var HY=!1,zY=!1,fS=[],VY=-1;function $te(w){Ite(w)}function Ite(w){fS.includes(w)||fS.push(w),Hte()}function Lte(w){let M=fS.indexOf(w);M!==-1&&M>VY&&fS.splice(M,1)}function Hte(){!zY&&!HY&&(HY=!0,queueMicrotask(zte))}function zte(){HY=!1,zY=!0;for(let w=0;w<fS.length;w++)fS[w](),VY=w;fS.length=0,VY=-1,zY=!1}var B_,vS,F_,Eee,UY=!0;function Vte(w){UY=!1,w(),UY=!0}function Ute(w){B_=w.reactive,F_=w.release,vS=M=>w.effect(M,{scheduler:L=>{UY?$te(L):L()}}),Eee=w.raw}function $J(w){vS=w}function Wte(w){let M=()=>{};return[X=>{let se=vS(X);return w._x_effects||(w._x_effects=new Set,w._x_runEffects=()=>{w._x_effects.forEach(le=>le())}),w._x_effects.add(se),M=()=>{se!==void 0&&(w._x_effects.delete(se),F_(se))},se},()=>{M()}]}function Tee(w,M){let L=!0,X,se=vS(()=>{let le=w();JSON.stringify(le),L?X=le:queueMicrotask(()=>{M(le,X),X=le}),L=!1});return()=>F_(se)}var Aee=[],_ee=[],kee=[];function Zte(w){kee.push(w)}function oX(w,M){typeof M=="function"?(w._x_cleanups||(w._x_cleanups=[]),w._x_cleanups.push(M)):(M=w,_ee.push(M))}function Dee(w){Aee.push(w)}function Oee(w,M,L){w._x_attributeCleanups||(w._x_attributeCleanups={}),w._x_attributeCleanups[M]||(w._x_attributeCleanups[M]=[]),w._x_attributeCleanups[M].push(L)}function Ree(w,M){w._x_attributeCleanups&&Object.entries(w._x_attributeCleanups).forEach(([L,X])=>{(M===void 0||M.includes(L))&&(X.forEach(se=>se()),delete w._x_attributeCleanups[L])})}function jte(w){var M,L;for((M=w._x_effects)==null||M.forEach(Lte);(L=w._x_cleanups)!=null&&L.length;)w._x_cleanups.pop()()}var sX=new MutationObserver(iX),rX=!1;function aX(){sX.observe(document,{subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0}),rX=!0}function Mee(){qte(),sX.disconnect(),rX=!1}var W5=[];function qte(){let w=sX.takeRecords();W5.push(()=>w.length>0&&iX(w));let M=W5.length;queueMicrotask(()=>{if(W5.length===M)for(;W5.length>0;)W5.shift()()})}function Mc(w){if(!rX)return w();Mee();let M=w();return aX(),M}var cX=!1,sL=[];function Gte(){cX=!0}function Kte(){cX=!1,iX(sL),sL=[]}function iX(w){if(cX){sL=sL.concat(w);return}let M=[],L=new Set,X=new Map,se=new Map;for(let le=0;le<w.length;le++)if(!w[le].target._x_ignoreMutationObserver&&(w[le].type==="childList"&&(w[le].removedNodes.forEach(Se=>{Se.nodeType===1&&Se._x_marker&&L.add(Se)}),w[le].addedNodes.forEach(Se=>{if(Se.nodeType===1){if(L.has(Se)){L.delete(Se);return}Se._x_marker||M.push(Se)}})),w[le].type==="attributes")){let Se=w[le].target,pe=w[le].attributeName,$e=w[le].oldValue,Ue=()=>{X.has(Se)||X.set(Se,[]),X.get(Se).push({name:pe,value:Se.getAttribute(pe)})},sn=()=>{se.has(Se)||se.set(Se,[]),se.get(Se).push(pe)};Se.hasAttribute(pe)&&$e===null?Ue():Se.hasAttribute(pe)?(sn(),Ue()):sn()}se.forEach((le,Se)=>{Ree(Se,le)}),X.forEach((le,Se)=>{Aee.forEach(pe=>pe(Se,le))});for(let le of L)M.some(Se=>Se.contains(le))||_ee.forEach(Se=>Se(le));for(let le of M)le.isConnected&&kee.forEach(Se=>Se(le));M=null,L=null,X=null,se=null}function Bee(w){return J5(R_(w))}function X5(w,M,L){return w._x_dataStack=[M,...R_(L||w)],()=>{w._x_dataStack=w._x_dataStack.filter(X=>X!==M)}}function R_(w){return w._x_dataStack?w._x_dataStack:typeof ShadowRoot=="function"&&w instanceof ShadowRoot?R_(w.host):w.parentNode?R_(w.parentNode):[]}function J5(w){return new Proxy({objects:w},Yte)}var Yte={ownKeys({objects:w}){return Array.from(new Set(w.flatMap(M=>Object.keys(M))))},has({objects:w},M){return M==Symbol.unscopables?!1:w.some(L=>Object.prototype.hasOwnProperty.call(L,M)||Reflect.has(L,M))},get({objects:w},M,L){return M=="toJSON"?Xte:Reflect.get(w.find(X=>Reflect.has(X,M))||{},M,L)},set({objects:w},M,L,X){const se=w.find(Se=>Object.prototype.hasOwnProperty.call(Se,M))||w[w.length-1],le=Object.getOwnPropertyDescriptor(se,M);return le!=null&&le.set&&(le!=null&&le.get)?le.set.call(X,L)||!0:Reflect.set(se,M,L)}};function Xte(){return Reflect.ownKeys(this).reduce((M,L)=>(M[L]=Reflect.get(this,L),M),{})}function Fee(w){let M=X=>typeof X=="object"&&!Array.isArray(X)&&X!==null,L=(X,se="")=>{Object.entries(Object.getOwnPropertyDescriptors(X)).forEach(([le,{value:Se,enumerable:pe}])=>{if(pe===!1||Se===void 0||typeof Se=="object"&&Se!==null&&Se.__v_skip)return;let $e=se===""?le:`${se}.${le}`;typeof Se=="object"&&Se!==null&&Se._x_interceptor?X[le]=Se.initialize(w,$e,le):M(Se)&&Se!==X&&!(Se instanceof Element)&&L(Se,$e)})};return L(w)}function Nee(w,M=()=>{}){let L={initialValue:void 0,_x_interceptor:!0,initialize(X,se,le){return w(this.initialValue,()=>Jte(X,se),Se=>WY(X,se,Se),se,le)}};return M(L),X=>{if(typeof X=="object"&&X!==null&&X._x_interceptor){let se=L.initialize.bind(L);L.initialize=(le,Se,pe)=>{let $e=X.initialize(le,Se,pe);return L.initialValue=$e,se(le,Se,pe)}}else L.initialValue=X;return L}}function Jte(w,M){return M.split(".").reduce((L,X)=>L[X],w)}function WY(w,M,L){if(typeof M=="string"&&(M=M.split(".")),M.length===1)w[M[0]]=L;else{if(M.length===0)throw error;return w[M[0]]||(w[M[0]]={}),WY(w[M[0]],M.slice(1),L)}}var Pee={};function Rh(w,M){Pee[w]=M}function ZY(w,M){let L=Qte(M);return Object.entries(Pee).forEach(([X,se])=>{Object.defineProperty(w,`$${X}`,{get(){return se(M,L)},enumerable:!1})}),w}function Qte(w){let[M,L]=Vee(w),X={interceptor:Nee,...M};return oX(w,L),X}function ene(w,M,L,...X){try{return L(...X)}catch(se){Y5(se,w,M)}}function Y5(w,M,L=void 0){w=Object.assign(w??{message:"No error message given."},{el:M,expression:L}),console.warn(`Alpine Expression Error: ${w.message}

${L?'Expression: "'+L+`"

`:""}`,M),setTimeout(()=>{throw w},0)}var nL=!0;function $ee(w){let M=nL;nL=!1;let L=w();return nL=M,L}function gS(w,M,L={}){let X;return Ld(w,M)(se=>X=se,L),X}function Ld(...w){return Iee(...w)}var Iee=Lee;function tne(w){Iee=w}function Lee(w,M){let L={};ZY(L,w);let X=[L,...R_(w)],se=typeof M=="function"?nne(X,M):sne(X,M,w);return ene.bind(null,w,M,se)}function nne(w,M){return(L=()=>{},{scope:X={},params:se=[],context:le}={})=>{let Se=M.apply(J5([X,...w]),se);rL(L,Se)}}var FY={};function one(w,M){if(FY[w])return FY[w];let L=Object.getPrototypeOf(async function(){}).constructor,X=/^[\n\s]*if.*\(.*\)/.test(w.trim())||/^(let|const)\s/.test(w.trim())?`(async()=>{ ${w} })()`:w,le=(()=>{try{let Se=new L(["__self","scope"],`with (scope) { __self.result = ${X} }; __self.finished = true; return __self.result;`);return Object.defineProperty(Se,"name",{value:`[Alpine] ${w}`}),Se}catch(Se){return Y5(Se,M,w),Promise.resolve()}})();return FY[w]=le,le}function sne(w,M,L){let X=one(M,L);return(se=()=>{},{scope:le={},params:Se=[],context:pe}={})=>{X.result=void 0,X.finished=!1;let $e=J5([le,...w]);if(typeof X=="function"){let Ue=X.call(pe,X,$e).catch(sn=>Y5(sn,L,M));X.finished?(rL(se,X.result,$e,Se,L),X.result=void 0):Ue.then(sn=>{rL(se,sn,$e,Se,L)}).catch(sn=>Y5(sn,L,M)).finally(()=>X.result=void 0)}}}function rL(w,M,L,X,se){if(nL&&typeof M=="function"){let le=M.apply(L,X);le instanceof Promise?le.then(Se=>rL(w,Se,L,X)).catch(Se=>Y5(Se,se,M)):w(le)}else typeof M=="object"&&M instanceof Promise?M.then(le=>w(le)):w(M)}var lX="x-";function N_(w=""){return lX+w}function rne(w){lX=w}var aL={};function zi(w,M){return aL[w]=M,{before(L){if(!aL[L]){console.warn(String.raw`Cannot find directive \`${L}\`. \`${w}\` will use the default order of execution`);return}const X=mS.indexOf(L);mS.splice(X>=0?X:mS.indexOf("DEFAULT"),0,w)}}}function ane(w){return Object.keys(aL).includes(w)}function uX(w,M,L){if(M=Array.from(M),w._x_virtualDirectives){let le=Object.entries(w._x_virtualDirectives).map(([pe,$e])=>({name:pe,value:$e})),Se=Hee(le);le=le.map(pe=>Se.find($e=>$e.name===pe.name)?{name:`x-bind:${pe.name}`,value:`"${pe.value}"`}:pe),M=M.concat(le)}let X={};return M.map(Zee((le,Se)=>X[le]=Se)).filter(qee).map(lne(X,L)).sort(une).map(le=>ine(w,le))}function Hee(w){return Array.from(w).map(Zee()).filter(M=>!qee(M))}var jY=!1,q5=new Map,zee=Symbol();function cne(w){jY=!0;let M=Symbol();zee=M,q5.set(M,[]);let L=()=>{for(;q5.get(M).length;)q5.get(M).shift()();q5.delete(M)},X=()=>{jY=!1,L()};w(L),X()}function Vee(w){let M=[],L=pe=>M.push(pe),[X,se]=Wte(w);return M.push(se),[{Alpine:Q5,effect:X,cleanup:L,evaluateLater:Ld.bind(Ld,w),evaluate:gS.bind(gS,w)},()=>M.forEach(pe=>pe())]}function ine(w,M){let L=()=>{},X=aL[M.type]||L,[se,le]=Vee(w);Oee(w,M.original,le);let Se=()=>{w._x_ignore||w._x_ignoreSelf||(X.inline&&X.inline(w,M,se),X=X.bind(X,w,M,se),jY?q5.get(zee).push(X):X())};return Se.runCleanups=le,Se}var Uee=(w,M)=>({name:L,value:X})=>(L.startsWith(w)&&(L=L.replace(w,M)),{name:L,value:X}),Wee=w=>w;function Zee(w=()=>{}){return({name:M,value:L})=>{let{name:X,value:se}=jee.reduce((le,Se)=>Se(le),{name:M,value:L});return X!==M&&w(X,M),{name:X,value:se}}}var jee=[];function dX(w){jee.push(w)}function qee({name:w}){return Gee().test(w)}var Gee=()=>new RegExp(`^${lX}([^:^.]+)\\b`);function lne(w,M){return({name:L,value:X})=>{let se=L.match(Gee()),le=L.match(/:([a-zA-Z0-9\-_:]+)/),Se=L.match(/\.[^.\]]+(?=[^\]]*$)/g)||[],pe=M||w[L]||L;return{type:se?se[1]:null,value:le?le[1]:null,modifiers:Se.map($e=>$e.replace(".","")),expression:X,original:pe}}}var qY="DEFAULT",mS=["ignore","ref","data","id","anchor","bind","init","for","model","modelable","transition","show","if",qY,"teleport"];function une(w,M){let L=mS.indexOf(w.type)===-1?qY:w.type,X=mS.indexOf(M.type)===-1?qY:M.type;return mS.indexOf(L)-mS.indexOf(X)}function G5(w,M,L={}){w.dispatchEvent(new CustomEvent(M,{detail:L,bubbles:!0,composed:!0,cancelable:!0}))}function bS(w,M){if(typeof ShadowRoot=="function"&&w instanceof ShadowRoot){Array.from(w.children).forEach(se=>bS(se,M));return}let L=!1;if(M(w,()=>L=!0),L)return;let X=w.firstElementChild;for(;X;)bS(X,M),X=X.nextElementSibling}function dg(w,...M){console.warn(`Alpine Warning: ${w}`,...M)}var IJ=!1;function dne(){IJ&&dg("Alpine has already been initialized on this page. Calling Alpine.start() more than once can cause problems."),IJ=!0,document.body||dg("Unable to initialize. Trying to load Alpine before `<body>` is available. Did you forget to add `defer` in Alpine's `<script>` tag?"),G5(document,"alpine:init"),G5(document,"alpine:initializing"),aX(),Zte(M=>rb(M,bS)),oX(M=>$_(M)),Dee((M,L)=>{uX(M,L).forEach(X=>X())});let w=M=>!iL(M.parentElement,!0);Array.from(document.querySelectorAll(Xee().join(","))).filter(w).forEach(M=>{rb(M)}),G5(document,"alpine:initialized"),setTimeout(()=>{hne()})}var mX=[],Kee=[];function Yee(){return mX.map(w=>w())}function Xee(){return mX.concat(Kee).map(w=>w())}function Jee(w){mX.push(w)}function Qee(w){Kee.push(w)}function iL(w,M=!1){return P_(w,L=>{if((M?Xee():Yee()).some(se=>L.matches(se)))return!0})}function P_(w,M){if(w){if(M(w))return w;if(w._x_teleportBack&&(w=w._x_teleportBack),!!w.parentElement)return P_(w.parentElement,M)}}function mne(w){return Yee().some(M=>w.matches(M))}var ete=[];function fne(w){ete.push(w)}var gne=1;function rb(w,M=bS,L=()=>{}){P_(w,X=>X._x_ignore)||cne(()=>{M(w,(X,se)=>{X._x_marker||(L(X,se),ete.forEach(le=>le(X,se)),uX(X,X.attributes).forEach(le=>le()),X._x_ignore||(X._x_marker=gne++),X._x_ignore&&se())})})}function $_(w,M=bS){M(w,L=>{jte(L),Ree(L),delete L._x_marker})}function hne(){[["ui","dialog",["[x-dialog], [x-popover]"]],["anchor","anchor",["[x-anchor]"]],["sort","sort",["[x-sort]"]]].forEach(([M,L,X])=>{ane(L)||X.some(se=>{if(document.querySelector(se))return dg(`found "${se}", but missing ${M} plugin`),!0})})}var GY=[],fX=!1;function gX(w=()=>{}){return queueMicrotask(()=>{fX||setTimeout(()=>{KY()})}),new Promise(M=>{GY.push(()=>{w(),M()})})}function KY(){for(fX=!1;GY.length;)GY.shift()()}function pne(){fX=!0}function hX(w,M){return Array.isArray(M)?LJ(w,M.join(" ")):typeof M=="object"&&M!==null?bne(w,M):typeof M=="function"?hX(w,M()):LJ(w,M)}function LJ(w,M){let L=se=>se.split(" ").filter(le=>!w.classList.contains(le)).filter(Boolean),X=se=>(w.classList.add(...se),()=>{w.classList.remove(...se)});return M=M===!0?M="":M||"",X(L(M))}function bne(w,M){let L=pe=>pe.split(" ").filter(Boolean),X=Object.entries(M).flatMap(([pe,$e])=>$e?L(pe):!1).filter(Boolean),se=Object.entries(M).flatMap(([pe,$e])=>$e?!1:L(pe)).filter(Boolean),le=[],Se=[];return se.forEach(pe=>{w.classList.contains(pe)&&(w.classList.remove(pe),Se.push(pe))}),X.forEach(pe=>{w.classList.contains(pe)||(w.classList.add(pe),le.push(pe))}),()=>{Se.forEach(pe=>w.classList.add(pe)),le.forEach(pe=>w.classList.remove(pe))}}function lL(w,M){return typeof M=="object"&&M!==null?vne(w,M):yne(w,M)}function vne(w,M){let L={};return Object.entries(M).forEach(([X,se])=>{L[X]=w.style[X],X.startsWith("--")||(X=Cne(X)),w.style.setProperty(X,se)}),setTimeout(()=>{w.style.length===0&&w.removeAttribute("style")}),()=>{lL(w,L)}}function yne(w,M){let L=w.getAttribute("style",M);return w.setAttribute("style",M),()=>{w.setAttribute("style",L||"")}}function Cne(w){return w.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function YY(w,M=()=>{}){let L=!1;return function(){L?M.apply(this,arguments):(L=!0,w.apply(this,arguments))}}zi("transition",(w,{value:M,modifiers:L,expression:X},{evaluate:se})=>{typeof X=="function"&&(X=se(X)),X!==!1&&(!X||typeof X=="boolean"?Sne(w,L,M):wne(w,X,M))});function wne(w,M,L){tte(w,hX,""),{enter:se=>{w._x_transition.enter.during=se},"enter-start":se=>{w._x_transition.enter.start=se},"enter-end":se=>{w._x_transition.enter.end=se},leave:se=>{w._x_transition.leave.during=se},"leave-start":se=>{w._x_transition.leave.start=se},"leave-end":se=>{w._x_transition.leave.end=se}}[L](M)}function Sne(w,M,L){tte(w,lL);let X=!M.includes("in")&&!M.includes("out")&&!L,se=X||M.includes("in")||["enter"].includes(L),le=X||M.includes("out")||["leave"].includes(L);M.includes("in")&&!X&&(M=M.filter((Gn,Bt)=>Bt<M.indexOf("out"))),M.includes("out")&&!X&&(M=M.filter((Gn,Bt)=>Bt>M.indexOf("out")));let Se=!M.includes("opacity")&&!M.includes("scale"),pe=Se||M.includes("opacity"),$e=Se||M.includes("scale"),Ue=pe?0:1,sn=$e?Z5(M,"scale",95)/100:1,hn=Z5(M,"delay",0)/1e3,Rt=Z5(M,"origin","center"),tn="opacity, transform",fo=Z5(M,"duration",150)/1e3,Wn=Z5(M,"duration",75)/1e3,ze="cubic-bezier(0.4, 0.0, 0.2, 1)";se&&(w._x_transition.enter.during={transformOrigin:Rt,transitionDelay:`${hn}s`,transitionProperty:tn,transitionDuration:`${fo}s`,transitionTimingFunction:ze},w._x_transition.enter.start={opacity:Ue,transform:`scale(${sn})`},w._x_transition.enter.end={opacity:1,transform:"scale(1)"}),le&&(w._x_transition.leave.during={transformOrigin:Rt,transitionDelay:`${hn}s`,transitionProperty:tn,transitionDuration:`${Wn}s`,transitionTimingFunction:ze},w._x_transition.leave.start={opacity:1,transform:"scale(1)"},w._x_transition.leave.end={opacity:Ue,transform:`scale(${sn})`})}function tte(w,M,L={}){w._x_transition||(w._x_transition={enter:{during:L,start:L,end:L},leave:{during:L,start:L,end:L},in(X=()=>{},se=()=>{}){XY(w,M,{during:this.enter.during,start:this.enter.start,end:this.enter.end},X,se)},out(X=()=>{},se=()=>{}){XY(w,M,{during:this.leave.during,start:this.leave.start,end:this.leave.end},X,se)}})}window.Element.prototype._x_toggleAndCascadeWithTransitions=function(w,M,L,X){const se=document.visibilityState==="visible"?requestAnimationFrame:setTimeout;let le=()=>se(L);if(M){w._x_transition&&(w._x_transition.enter||w._x_transition.leave)?w._x_transition.enter&&(Object.entries(w._x_transition.enter.during).length||Object.entries(w._x_transition.enter.start).length||Object.entries(w._x_transition.enter.end).length)?w._x_transition.in(L):le():w._x_transition?w._x_transition.in(L):le();return}w._x_hidePromise=w._x_transition?new Promise((Se,pe)=>{w._x_transition.out(()=>{},()=>Se(X)),w._x_transitioning&&w._x_transitioning.beforeCancel(()=>pe({isFromCancelledTransition:!0}))}):Promise.resolve(X),queueMicrotask(()=>{let Se=nte(w);Se?(Se._x_hideChildren||(Se._x_hideChildren=[]),Se._x_hideChildren.push(w)):se(()=>{let pe=$e=>{let Ue=Promise.all([$e._x_hidePromise,...($e._x_hideChildren||[]).map(pe)]).then(([sn])=>sn==null?void 0:sn());return delete $e._x_hidePromise,delete $e._x_hideChildren,Ue};pe(w).catch($e=>{if(!$e.isFromCancelledTransition)throw $e})})})};function nte(w){let M=w.parentNode;if(M)return M._x_hidePromise?M:nte(M)}function XY(w,M,{during:L,start:X,end:se}={},le=()=>{},Se=()=>{}){if(w._x_transitioning&&w._x_transitioning.cancel(),Object.keys(L).length===0&&Object.keys(X).length===0&&Object.keys(se).length===0){le(),Se();return}let pe,$e,Ue;xne(w,{start(){pe=M(w,X)},during(){$e=M(w,L)},before:le,end(){pe(),Ue=M(w,se)},after:Se,cleanup(){$e(),Ue()}})}function xne(w,M){let L,X,se,le=YY(()=>{Mc(()=>{L=!0,X||M.before(),se||(M.end(),KY()),M.after(),w.isConnected&&M.cleanup(),delete w._x_transitioning})});w._x_transitioning={beforeCancels:[],beforeCancel(Se){this.beforeCancels.push(Se)},cancel:YY(function(){for(;this.beforeCancels.length;)this.beforeCancels.shift()();le()}),finish:le},Mc(()=>{M.start(),M.during()}),pne(),requestAnimationFrame(()=>{if(L)return;let Se=Number(getComputedStyle(w).transitionDuration.replace(/,.*/,"").replace("s",""))*1e3,pe=Number(getComputedStyle(w).transitionDelay.replace(/,.*/,"").replace("s",""))*1e3;Se===0&&(Se=Number(getComputedStyle(w).animationDuration.replace("s",""))*1e3),Mc(()=>{M.before()}),X=!0,requestAnimationFrame(()=>{L||(Mc(()=>{M.end()}),KY(),setTimeout(w._x_transitioning.finish,Se+pe),se=!0)})})}function Z5(w,M,L){if(w.indexOf(M)===-1)return L;const X=w[w.indexOf(M)+1];if(!X||M==="scale"&&isNaN(X))return L;if(M==="duration"||M==="delay"){let se=X.match(/([0-9]+)ms/);if(se)return se[1]}return M==="origin"&&["top","right","left","center","bottom"].includes(w[w.indexOf(M)+2])?[X,w[w.indexOf(M)+2]].join(" "):X}var Ny=!1;function $y(w,M=()=>{}){return(...L)=>Ny?M(...L):w(...L)}function Ene(w){return(...M)=>Ny&&w(...M)}var ote=[];function uL(w){ote.push(w)}function Tne(w,M){ote.forEach(L=>L(w,M)),Ny=!0,ste(()=>{rb(M,(L,X)=>{X(L,()=>{})})}),Ny=!1}var JY=!1;function Ane(w,M){M._x_dataStack||(M._x_dataStack=w._x_dataStack),Ny=!0,JY=!0,ste(()=>{_ne(M)}),Ny=!1,JY=!1}function _ne(w){let M=!1;rb(w,(X,se)=>{bS(X,(le,Se)=>{if(M&&mne(le))return Se();M=!0,se(le,Se)})})}function ste(w){let M=vS;$J((L,X)=>{let se=M(L);return F_(se),()=>{}}),w(),$J(M)}function rte(w,M,L,X=[]){switch(w._x_bindings||(w._x_bindings=B_({})),w._x_bindings[M]=L,M=X.includes("camel")?Nne(M):M,M){case"value":kne(w,L);break;case"style":One(w,L);break;case"class":Dne(w,L);break;case"selected":case"checked":Rne(w,M,L);break;default:ate(w,M,L);break}}function kne(w,M){if(lte(w))w.attributes.value===void 0&&(w.value=M),window.fromModel&&(typeof M=="boolean"?w.checked=oL(w.value)===M:w.checked=HJ(w.value,M));else if(pX(w))Number.isInteger(M)?w.value=M:!Array.isArray(M)&&typeof M!="boolean"&&![null,void 0].includes(M)?w.value=String(M):Array.isArray(M)?w.checked=M.some(L=>HJ(L,w.value)):w.checked=!!M;else if(w.tagName==="SELECT")Fne(w,M);else{if(w.value===M)return;w.value=M===void 0?"":M}}function Dne(w,M){w._x_undoAddedClasses&&w._x_undoAddedClasses(),w._x_undoAddedClasses=hX(w,M)}function One(w,M){w._x_undoAddedStyles&&w._x_undoAddedStyles(),w._x_undoAddedStyles=lL(w,M)}function Rne(w,M,L){ate(w,M,L),Bne(w,M,L)}function ate(w,M,L){[null,void 0,!1].includes(L)&&$ne(M)?w.removeAttribute(M):(cte(M)&&(L=M),Mne(w,M,L))}function Mne(w,M,L){w.getAttribute(M)!=L&&w.setAttribute(M,L)}function Bne(w,M,L){w[M]!==L&&(w[M]=L)}function Fne(w,M){const L=[].concat(M).map(X=>X+"");Array.from(w.options).forEach(X=>{X.selected=L.includes(X.value)})}function Nne(w){return w.toLowerCase().replace(/-(\w)/g,(M,L)=>L.toUpperCase())}function HJ(w,M){return w==M}function oL(w){return[1,"1","true","on","yes",!0].includes(w)?!0:[0,"0","false","off","no",!1].includes(w)?!1:w?!!w:null}var Pne=new Set(["allowfullscreen","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","inert","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected","shadowrootclonable","shadowrootdelegatesfocus","shadowrootserializable"]);function cte(w){return Pne.has(w)}function $ne(w){return!["aria-pressed","aria-checked","aria-expanded","aria-selected"].includes(w)}function Ine(w,M,L){return w._x_bindings&&w._x_bindings[M]!==void 0?w._x_bindings[M]:ite(w,M,L)}function Lne(w,M,L,X=!0){if(w._x_bindings&&w._x_bindings[M]!==void 0)return w._x_bindings[M];if(w._x_inlineBindings&&w._x_inlineBindings[M]!==void 0){let se=w._x_inlineBindings[M];return se.extract=X,$ee(()=>gS(w,se.expression))}return ite(w,M,L)}function ite(w,M,L){let X=w.getAttribute(M);return X===null?typeof L=="function"?L():L:X===""?!0:cte(M)?!![M,"true"].includes(X):X}function pX(w){return w.type==="checkbox"||w.localName==="ui-checkbox"||w.localName==="ui-switch"}function lte(w){return w.type==="radio"||w.localName==="ui-radio"}function ute(w,M){let L;return function(){const X=this,se=arguments,le=function(){L=null,w.apply(X,se)};clearTimeout(L),L=setTimeout(le,M)}}function dte(w,M){let L;return function(){let X=this,se=arguments;L||(w.apply(X,se),L=!0,setTimeout(()=>L=!1,M))}}function mte({get:w,set:M},{get:L,set:X}){let se=!0,le,Se=vS(()=>{let pe=w(),$e=L();if(se)X(NY(pe)),se=!1;else{let Ue=JSON.stringify(pe),sn=JSON.stringify($e);Ue!==le?X(NY(pe)):Ue!==sn&&M(NY($e))}le=JSON.stringify(w()),JSON.stringify(L())});return()=>{F_(Se)}}function NY(w){return typeof w=="object"?JSON.parse(JSON.stringify(w)):w}function Hne(w){(Array.isArray(w)?w:[w]).forEach(L=>L(Q5))}var dS={},zJ=!1;function zne(w,M){if(zJ||(dS=B_(dS),zJ=!0),M===void 0)return dS[w];dS[w]=M,Fee(dS[w]),typeof M=="object"&&M!==null&&M.hasOwnProperty("init")&&typeof M.init=="function"&&dS[w].init()}function Vne(){return dS}var fte={};function Une(w,M){let L=typeof M!="function"?()=>M:M;return w instanceof Element?gte(w,L()):(fte[w]=L,()=>{})}function Wne(w){return Object.entries(fte).forEach(([M,L])=>{Object.defineProperty(w,M,{get(){return(...X)=>L(...X)}})}),w}function gte(w,M,L){let X=[];for(;X.length;)X.pop()();let se=Object.entries(M).map(([Se,pe])=>({name:Se,value:pe})),le=Hee(se);return se=se.map(Se=>le.find(pe=>pe.name===Se.name)?{name:`x-bind:${Se.name}`,value:`"${Se.value}"`}:Se),uX(w,se,L).map(Se=>{X.push(Se.runCleanups),Se()}),()=>{for(;X.length;)X.pop()()}}var hte={};function Zne(w,M){hte[w]=M}function jne(w,M){return Object.entries(hte).forEach(([L,X])=>{Object.defineProperty(w,L,{get(){return(...se)=>X.bind(M)(...se)},enumerable:!1})}),w}var qne={get reactive(){return B_},get release(){return F_},get effect(){return vS},get raw(){return Eee},version:"3.15.0",flushAndStopDeferringMutations:Kte,dontAutoEvaluateFunctions:$ee,disableEffectScheduling:Vte,startObservingMutations:aX,stopObservingMutations:Mee,setReactivityEngine:Ute,onAttributeRemoved:Oee,onAttributesAdded:Dee,closestDataStack:R_,skipDuringClone:$y,onlyDuringClone:Ene,addRootSelector:Jee,addInitSelector:Qee,interceptClone:uL,addScopeToNode:X5,deferMutations:Gte,mapAttributes:dX,evaluateLater:Ld,interceptInit:fne,setEvaluator:tne,mergeProxies:J5,extractProp:Lne,findClosest:P_,onElRemoved:oX,closestRoot:iL,destroyTree:$_,interceptor:Nee,transition:XY,setStyles:lL,mutateDom:Mc,directive:zi,entangle:mte,throttle:dte,debounce:ute,evaluate:gS,initTree:rb,nextTick:gX,prefixed:N_,prefix:rne,plugin:Hne,magic:Rh,store:zne,start:dne,clone:Ane,cloneNode:Tne,bound:Ine,$data:Bee,watch:Tee,walk:bS,data:Zne,bind:Une},Q5=qne;function Gne(w,M){const L=Object.create(null),X=w.split(",");for(let se=0;se<X.length;se++)L[X[se]]=!0;return se=>!!L[se]}var Kne=Object.freeze({}),Yne=Object.prototype.hasOwnProperty,dL=(w,M)=>Yne.call(w,M),hS=Array.isArray,K5=w=>pte(w)==="[object Map]",Xne=w=>typeof w=="string",bX=w=>typeof w=="symbol",mL=w=>w!==null&&typeof w=="object",Jne=Object.prototype.toString,pte=w=>Jne.call(w),bte=w=>pte(w).slice(8,-1),vX=w=>Xne(w)&&w!=="NaN"&&w[0]!=="-"&&""+parseInt(w,10)===w,Qne=w=>{const M=Object.create(null);return L=>M[L]||(M[L]=w(L))},eoe=Qne(w=>w.charAt(0).toUpperCase()+w.slice(1)),vte=(w,M)=>w!==M&&(w===w||M===M),QY=new WeakMap,j5=[],e1,pS=Symbol("iterate"),eX=Symbol("Map key iterate");function toe(w){return w&&w._isEffect===!0}function noe(w,M=Kne){toe(w)&&(w=w.raw);const L=roe(w,M);return M.lazy||L(),L}function ooe(w){w.active&&(yte(w),w.options.onStop&&w.options.onStop(),w.active=!1)}var soe=0;function roe(w,M){const L=function(){if(!L.active)return w();if(!j5.includes(L)){yte(L);try{return coe(),j5.push(L),e1=L,w()}finally{j5.pop(),Cte(),e1=j5[j5.length-1]}}};return L.id=soe++,L.allowRecurse=!!M.allowRecurse,L._isEffect=!0,L.active=!0,L.raw=w,L.deps=[],L.options=M,L}function yte(w){const{deps:M}=w;if(M.length){for(let L=0;L<M.length;L++)M[L].delete(w);M.length=0}}var M_=!0,yX=[];function aoe(){yX.push(M_),M_=!1}function coe(){yX.push(M_),M_=!0}function Cte(){const w=yX.pop();M_=w===void 0?!0:w}function Oh(w,M,L){if(!M_||e1===void 0)return;let X=QY.get(w);X||QY.set(w,X=new Map);let se=X.get(L);se||X.set(L,se=new Set),se.has(e1)||(se.add(e1),e1.deps.push(se),e1.options.onTrack&&e1.options.onTrack({effect:e1,target:w,type:M,key:L}))}function Py(w,M,L,X,se,le){const Se=QY.get(w);if(!Se)return;const pe=new Set,$e=sn=>{sn&&sn.forEach(hn=>{(hn!==e1||hn.allowRecurse)&&pe.add(hn)})};if(M==="clear")Se.forEach($e);else if(L==="length"&&hS(w))Se.forEach((sn,hn)=>{(hn==="length"||hn>=X)&&$e(sn)});else switch(L!==void 0&&$e(Se.get(L)),M){case"add":hS(w)?vX(L)&&$e(Se.get("length")):($e(Se.get(pS)),K5(w)&&$e(Se.get(eX)));break;case"delete":hS(w)||($e(Se.get(pS)),K5(w)&&$e(Se.get(eX)));break;case"set":K5(w)&&$e(Se.get(pS));break}const Ue=sn=>{sn.options.onTrigger&&sn.options.onTrigger({effect:sn,target:w,key:L,type:M,newValue:X,oldValue:se,oldTarget:le}),sn.options.scheduler?sn.options.scheduler(sn):sn()};pe.forEach(Ue)}var ioe=Gne("__proto__,__v_isRef,__isVue"),wte=new Set(Object.getOwnPropertyNames(Symbol).map(w=>Symbol[w]).filter(bX)),loe=Ste(),uoe=Ste(!0),VJ=doe();function doe(){const w={};return["includes","indexOf","lastIndexOf"].forEach(M=>{w[M]=function(...L){const X=rc(this);for(let le=0,Se=this.length;le<Se;le++)Oh(X,"get",le+"");const se=X[M](...L);return se===-1||se===!1?X[M](...L.map(rc)):se}}),["push","pop","shift","unshift","splice"].forEach(M=>{w[M]=function(...L){aoe();const X=rc(this)[M].apply(this,L);return Cte(),X}}),w}function Ste(w=!1,M=!1){return function(X,se,le){if(se==="__v_isReactive")return!w;if(se==="__v_isReadonly")return w;if(se==="__v_raw"&&le===(w?M?Toe:Ate:M?Eoe:Tte).get(X))return X;const Se=hS(X);if(!w&&Se&&dL(VJ,se))return Reflect.get(VJ,se,le);const pe=Reflect.get(X,se,le);return(bX(se)?wte.has(se):ioe(se))||(w||Oh(X,"get",se),M)?pe:tX(pe)?!Se||!vX(se)?pe.value:pe:mL(pe)?w?_te(pe):xX(pe):pe}}var moe=foe();function foe(w=!1){return function(L,X,se,le){let Se=L[X];if(!w&&(se=rc(se),Se=rc(Se),!hS(L)&&tX(Se)&&!tX(se)))return Se.value=se,!0;const pe=hS(L)&&vX(X)?Number(X)<L.length:dL(L,X),$e=Reflect.set(L,X,se,le);return L===rc(le)&&(pe?vte(se,Se)&&Py(L,"set",X,se,Se):Py(L,"add",X,se)),$e}}function goe(w,M){const L=dL(w,M),X=w[M],se=Reflect.deleteProperty(w,M);return se&&L&&Py(w,"delete",M,void 0,X),se}function hoe(w,M){const L=Reflect.has(w,M);return(!bX(M)||!wte.has(M))&&Oh(w,"has",M),L}function poe(w){return Oh(w,"iterate",hS(w)?"length":pS),Reflect.ownKeys(w)}var boe={get:loe,set:moe,deleteProperty:goe,has:hoe,ownKeys:poe},voe={get:uoe,set(w,M){return console.warn(`Set operation on key "${String(M)}" failed: target is readonly.`,w),!0},deleteProperty(w,M){return console.warn(`Delete operation on key "${String(M)}" failed: target is readonly.`,w),!0}},CX=w=>mL(w)?xX(w):w,wX=w=>mL(w)?_te(w):w,SX=w=>w,fL=w=>Reflect.getPrototypeOf(w);function X7(w,M,L=!1,X=!1){w=w.__v_raw;const se=rc(w),le=rc(M);M!==le&&!L&&Oh(se,"get",M),!L&&Oh(se,"get",le);const{has:Se}=fL(se),pe=X?SX:L?wX:CX;if(Se.call(se,M))return pe(w.get(M));if(Se.call(se,le))return pe(w.get(le));w!==se&&w.get(M)}function J7(w,M=!1){const L=this.__v_raw,X=rc(L),se=rc(w);return w!==se&&!M&&Oh(X,"has",w),!M&&Oh(X,"has",se),w===se?L.has(w):L.has(w)||L.has(se)}function Q7(w,M=!1){return w=w.__v_raw,!M&&Oh(rc(w),"iterate",pS),Reflect.get(w,"size",w)}function UJ(w){w=rc(w);const M=rc(this);return fL(M).has.call(M,w)||(M.add(w),Py(M,"add",w,w)),this}function WJ(w,M){M=rc(M);const L=rc(this),{has:X,get:se}=fL(L);let le=X.call(L,w);le?Ete(L,X,w):(w=rc(w),le=X.call(L,w));const Se=se.call(L,w);return L.set(w,M),le?vte(M,Se)&&Py(L,"set",w,M,Se):Py(L,"add",w,M),this}function ZJ(w){const M=rc(this),{has:L,get:X}=fL(M);let se=L.call(M,w);se?Ete(M,L,w):(w=rc(w),se=L.call(M,w));const le=X?X.call(M,w):void 0,Se=M.delete(w);return se&&Py(M,"delete",w,void 0,le),Se}function jJ(){const w=rc(this),M=w.size!==0,L=K5(w)?new Map(w):new Set(w),X=w.clear();return M&&Py(w,"clear",void 0,void 0,L),X}function eL(w,M){return function(X,se){const le=this,Se=le.__v_raw,pe=rc(Se),$e=M?SX:w?wX:CX;return!w&&Oh(pe,"iterate",pS),Se.forEach((Ue,sn)=>X.call(se,$e(Ue),$e(sn),le))}}function tL(w,M,L){return function(...X){const se=this.__v_raw,le=rc(se),Se=K5(le),pe=w==="entries"||w===Symbol.iterator&&Se,$e=w==="keys"&&Se,Ue=se[w](...X),sn=L?SX:M?wX:CX;return!M&&Oh(le,"iterate",$e?eX:pS),{next(){const{value:hn,done:Rt}=Ue.next();return Rt?{value:hn,done:Rt}:{value:pe?[sn(hn[0]),sn(hn[1])]:sn(hn),done:Rt}},[Symbol.iterator](){return this}}}}function Fy(w){return function(...M){{const L=M[0]?`on key "${M[0]}" `:"";console.warn(`${eoe(w)} operation ${L}failed: target is readonly.`,rc(this))}return w==="delete"?!1:this}}function yoe(){const w={get(le){return X7(this,le)},get size(){return Q7(this)},has:J7,add:UJ,set:WJ,delete:ZJ,clear:jJ,forEach:eL(!1,!1)},M={get(le){return X7(this,le,!1,!0)},get size(){return Q7(this)},has:J7,add:UJ,set:WJ,delete:ZJ,clear:jJ,forEach:eL(!1,!0)},L={get(le){return X7(this,le,!0)},get size(){return Q7(this,!0)},has(le){return J7.call(this,le,!0)},add:Fy("add"),set:Fy("set"),delete:Fy("delete"),clear:Fy("clear"),forEach:eL(!0,!1)},X={get(le){return X7(this,le,!0,!0)},get size(){return Q7(this,!0)},has(le){return J7.call(this,le,!0)},add:Fy("add"),set:Fy("set"),delete:Fy("delete"),clear:Fy("clear"),forEach:eL(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(le=>{w[le]=tL(le,!1,!1),L[le]=tL(le,!0,!1),M[le]=tL(le,!1,!0),X[le]=tL(le,!0,!0)}),[w,L,M,X]}var[Coe,woe]=yoe();function xte(w,M){const L=w?woe:Coe;return(X,se,le)=>se==="__v_isReactive"?!w:se==="__v_isReadonly"?w:se==="__v_raw"?X:Reflect.get(dL(L,se)&&se in X?L:X,se,le)}var Soe={get:xte(!1)},xoe={get:xte(!0)};function Ete(w,M,L){const X=rc(L);if(X!==L&&M.call(w,X)){const se=bte(w);console.warn(`Reactive ${se} contains both the raw and reactive versions of the same object${se==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}var Tte=new WeakMap,Eoe=new WeakMap,Ate=new WeakMap,Toe=new WeakMap;function Aoe(w){switch(w){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function _oe(w){return w.__v_skip||!Object.isExtensible(w)?0:Aoe(bte(w))}function xX(w){return w&&w.__v_isReadonly?w:kte(w,!1,boe,Soe,Tte)}function _te(w){return kte(w,!0,voe,xoe,Ate)}function kte(w,M,L,X,se){if(!mL(w))return console.warn(`value cannot be made reactive: ${String(w)}`),w;if(w.__v_raw&&!(M&&w.__v_isReactive))return w;const le=se.get(w);if(le)return le;const Se=_oe(w);if(Se===0)return w;const pe=new Proxy(w,Se===2?X:L);return se.set(w,pe),pe}function rc(w){return w&&rc(w.__v_raw)||w}function tX(w){return!!(w&&w.__v_isRef===!0)}Rh("nextTick",()=>gX);Rh("dispatch",w=>G5.bind(G5,w));Rh("watch",(w,{evaluateLater:M,cleanup:L})=>(X,se)=>{let le=M(X),pe=Tee(()=>{let $e;return le(Ue=>$e=Ue),$e},se);L(pe)});Rh("store",Vne);Rh("data",w=>Bee(w));Rh("root",w=>iL(w));Rh("refs",w=>(w._x_refs_proxy||(w._x_refs_proxy=J5(koe(w))),w._x_refs_proxy));function koe(w){let M=[];return P_(w,L=>{L._x_refs&&M.push(L._x_refs)}),M}var PY={};function Dte(w){return PY[w]||(PY[w]=0),++PY[w]}function Doe(w,M){return P_(w,L=>{if(L._x_ids&&L._x_ids[M])return!0})}function Ooe(w,M){w._x_ids||(w._x_ids={}),w._x_ids[M]||(w._x_ids[M]=Dte(M))}Rh("id",(w,{cleanup:M})=>(L,X=null)=>{let se=`${L}${X?`-${X}`:""}`;return Roe(w,se,M,()=>{let le=Doe(w,L),Se=le?le._x_ids[L]:Dte(L);return X?`${L}-${Se}-${X}`:`${L}-${Se}`})});uL((w,M)=>{w._x_id&&(M._x_id=w._x_id)});function Roe(w,M,L,X){if(w._x_id||(w._x_id={}),w._x_id[M])return w._x_id[M];let se=X();return w._x_id[M]=se,L(()=>{delete w._x_id[M]}),se}Rh("el",w=>w);Ote("Focus","focus","focus");Ote("Persist","persist","persist");function Ote(w,M,L){Rh(M,X=>dg(`You can't use [$${M}] without first installing the "${w}" plugin here: https://alpinejs.dev/plugins/${L}`,X))}zi("modelable",(w,{expression:M},{effect:L,evaluateLater:X,cleanup:se})=>{let le=X(M),Se=()=>{let sn;return le(hn=>sn=hn),sn},pe=X(`${M} = __placeholder`),$e=sn=>pe(()=>{},{scope:{__placeholder:sn}}),Ue=Se();$e(Ue),queueMicrotask(()=>{if(!w._x_model)return;w._x_removeModelListeners.default();let sn=w._x_model.get,hn=w._x_model.set,Rt=mte({get(){return sn()},set(tn){hn(tn)}},{get(){return Se()},set(tn){$e(tn)}});se(Rt)})});zi("teleport",(w,{modifiers:M,expression:L},{cleanup:X})=>{w.tagName.toLowerCase()!=="template"&&dg("x-teleport can only be used on a <template> tag",w);let se=qJ(L),le=w.content.cloneNode(!0).firstElementChild;w._x_teleport=le,le._x_teleportBack=w,w.setAttribute("data-teleport-template",!0),le.setAttribute("data-teleport-target",!0),w._x_forwardEvents&&w._x_forwardEvents.forEach(pe=>{le.addEventListener(pe,$e=>{$e.stopPropagation(),w.dispatchEvent(new $e.constructor($e.type,$e))})}),X5(le,{},w);let Se=(pe,$e,Ue)=>{Ue.includes("prepend")?$e.parentNode.insertBefore(pe,$e):Ue.includes("append")?$e.parentNode.insertBefore(pe,$e.nextSibling):$e.appendChild(pe)};Mc(()=>{Se(le,se,M),$y(()=>{rb(le)})()}),w._x_teleportPutBack=()=>{let pe=qJ(L);Mc(()=>{Se(w._x_teleport,pe,M)})},X(()=>Mc(()=>{le.remove(),$_(le)}))});var Moe=document.createElement("div");function qJ(w){let M=$y(()=>document.querySelector(w),()=>Moe)();return M||dg(`Cannot find x-teleport element for selector: "${w}"`),M}var Rte=()=>{};Rte.inline=(w,{modifiers:M},{cleanup:L})=>{M.includes("self")?w._x_ignoreSelf=!0:w._x_ignore=!0,L(()=>{M.includes("self")?delete w._x_ignoreSelf:delete w._x_ignore})};zi("ignore",Rte);zi("effect",$y((w,{expression:M},{effect:L})=>{L(Ld(w,M))}));function nX(w,M,L,X){let se=w,le=$e=>X($e),Se={},pe=($e,Ue)=>sn=>Ue($e,sn);if(L.includes("dot")&&(M=Boe(M)),L.includes("camel")&&(M=Foe(M)),L.includes("passive")&&(Se.passive=!0),L.includes("capture")&&(Se.capture=!0),L.includes("window")&&(se=window),L.includes("document")&&(se=document),L.includes("debounce")){let $e=L[L.indexOf("debounce")+1]||"invalid-wait",Ue=cL($e.split("ms")[0])?Number($e.split("ms")[0]):250;le=ute(le,Ue)}if(L.includes("throttle")){let $e=L[L.indexOf("throttle")+1]||"invalid-wait",Ue=cL($e.split("ms")[0])?Number($e.split("ms")[0]):250;le=dte(le,Ue)}return L.includes("prevent")&&(le=pe(le,($e,Ue)=>{Ue.preventDefault(),$e(Ue)})),L.includes("stop")&&(le=pe(le,($e,Ue)=>{Ue.stopPropagation(),$e(Ue)})),L.includes("once")&&(le=pe(le,($e,Ue)=>{$e(Ue),se.removeEventListener(M,le,Se)})),(L.includes("away")||L.includes("outside"))&&(se=document,le=pe(le,($e,Ue)=>{w.contains(Ue.target)||Ue.target.isConnected!==!1&&(w.offsetWidth<1&&w.offsetHeight<1||w._x_isShown!==!1&&$e(Ue))})),L.includes("self")&&(le=pe(le,($e,Ue)=>{Ue.target===w&&$e(Ue)})),(Poe(M)||Mte(M))&&(le=pe(le,($e,Ue)=>{$oe(Ue,L)||$e(Ue)})),se.addEventListener(M,le,Se),()=>{se.removeEventListener(M,le,Se)}}function Boe(w){return w.replace(/-/g,".")}function Foe(w){return w.toLowerCase().replace(/-(\w)/g,(M,L)=>L.toUpperCase())}function cL(w){return!Array.isArray(w)&&!isNaN(w)}function Noe(w){return[" ","_"].includes(w)?w:w.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[_\s]/,"-").toLowerCase()}function Poe(w){return["keydown","keyup"].includes(w)}function Mte(w){return["contextmenu","click","mouse"].some(M=>w.includes(M))}function $oe(w,M){let L=M.filter(le=>!["window","document","prevent","stop","once","capture","self","away","outside","passive","preserve-scroll"].includes(le));if(L.includes("debounce")){let le=L.indexOf("debounce");L.splice(le,cL((L[le+1]||"invalid-wait").split("ms")[0])?2:1)}if(L.includes("throttle")){let le=L.indexOf("throttle");L.splice(le,cL((L[le+1]||"invalid-wait").split("ms")[0])?2:1)}if(L.length===0||L.length===1&&GJ(w.key).includes(L[0]))return!1;const se=["ctrl","shift","alt","meta","cmd","super"].filter(le=>L.includes(le));return L=L.filter(le=>!se.includes(le)),!(se.length>0&&se.filter(Se=>((Se==="cmd"||Se==="super")&&(Se="meta"),w[`${Se}Key`])).length===se.length&&(Mte(w.type)||GJ(w.key).includes(L[0])))}function GJ(w){if(!w)return[];w=Noe(w);let M={ctrl:"control",slash:"/",space:" ",spacebar:" ",cmd:"meta",esc:"escape",up:"arrow-up",down:"arrow-down",left:"arrow-left",right:"arrow-right",period:".",comma:",",equal:"=",minus:"-",underscore:"_"};return M[w]=w,Object.keys(M).map(L=>{if(M[L]===w)return L}).filter(L=>L)}zi("model",(w,{modifiers:M,expression:L},{effect:X,cleanup:se})=>{let le=w;M.includes("parent")&&(le=w.parentNode);let Se=Ld(le,L),pe;typeof L=="string"?pe=Ld(le,`${L} = __placeholder`):typeof L=="function"&&typeof L()=="string"?pe=Ld(le,`${L()} = __placeholder`):pe=()=>{};let $e=()=>{let Rt;return Se(tn=>Rt=tn),KJ(Rt)?Rt.get():Rt},Ue=Rt=>{let tn;Se(fo=>tn=fo),KJ(tn)?tn.set(Rt):pe(()=>{},{scope:{__placeholder:Rt}})};typeof L=="string"&&w.type==="radio"&&Mc(()=>{w.hasAttribute("name")||w.setAttribute("name",L)});let sn=w.tagName.toLowerCase()==="select"||["checkbox","radio"].includes(w.type)||M.includes("lazy")?"change":"input",hn=Ny?()=>{}:nX(w,sn,M,Rt=>{Ue($Y(w,M,Rt,$e()))});if(M.includes("fill")&&([void 0,null,""].includes($e())||pX(w)&&Array.isArray($e())||w.tagName.toLowerCase()==="select"&&w.multiple)&&Ue($Y(w,M,{target:w},$e())),w._x_removeModelListeners||(w._x_removeModelListeners={}),w._x_removeModelListeners.default=hn,se(()=>w._x_removeModelListeners.default()),w.form){let Rt=nX(w.form,"reset",[],tn=>{gX(()=>w._x_model&&w._x_model.set($Y(w,M,{target:w},$e())))});se(()=>Rt())}w._x_model={get(){return $e()},set(Rt){Ue(Rt)}},w._x_forceModelUpdate=Rt=>{Rt===void 0&&typeof L=="string"&&L.match(/\./)&&(Rt=""),window.fromModel=!0,Mc(()=>rte(w,"value",Rt)),delete window.fromModel},X(()=>{let Rt=$e();M.includes("unintrusive")&&document.activeElement.isSameNode(w)||w._x_forceModelUpdate(Rt)})});function $Y(w,M,L,X){return Mc(()=>{if(L instanceof CustomEvent&&L.detail!==void 0)return L.detail!==null&&L.detail!==void 0?L.detail:L.target.value;if(pX(w))if(Array.isArray(X)){let se=null;return M.includes("number")?se=IY(L.target.value):M.includes("boolean")?se=oL(L.target.value):se=L.target.value,L.target.checked?X.includes(se)?X:X.concat([se]):X.filter(le=>!Ioe(le,se))}else return L.target.checked;else{if(w.tagName.toLowerCase()==="select"&&w.multiple)return M.includes("number")?Array.from(L.target.selectedOptions).map(se=>{let le=se.value||se.text;return IY(le)}):M.includes("boolean")?Array.from(L.target.selectedOptions).map(se=>{let le=se.value||se.text;return oL(le)}):Array.from(L.target.selectedOptions).map(se=>se.value||se.text);{let se;return lte(w)?L.target.checked?se=L.target.value:se=X:se=L.target.value,M.includes("number")?IY(se):M.includes("boolean")?oL(se):M.includes("trim")?se.trim():se}}})}function IY(w){let M=w?parseFloat(w):null;return Loe(M)?M:w}function Ioe(w,M){return w==M}function Loe(w){return!Array.isArray(w)&&!isNaN(w)}function KJ(w){return w!==null&&typeof w=="object"&&typeof w.get=="function"&&typeof w.set=="function"}zi("cloak",w=>queueMicrotask(()=>Mc(()=>w.removeAttribute(N_("cloak")))));Qee(()=>`[${N_("init")}]`);zi("init",$y((w,{expression:M},{evaluate:L})=>typeof M=="string"?!!M.trim()&&L(M,{},!1):L(M,{},!1)));zi("text",(w,{expression:M},{effect:L,evaluateLater:X})=>{let se=X(M);L(()=>{se(le=>{Mc(()=>{w.textContent=le})})})});zi("html",(w,{expression:M},{effect:L,evaluateLater:X})=>{let se=X(M);L(()=>{se(le=>{Mc(()=>{w.innerHTML=le,w._x_ignoreSelf=!0,rb(w),delete w._x_ignoreSelf})})})});dX(Uee(":",Wee(N_("bind:"))));var Bte=(w,{value:M,modifiers:L,expression:X,original:se},{effect:le,cleanup:Se})=>{if(!M){let $e={};Wne($e),Ld(w,X)(sn=>{gte(w,sn,se)},{scope:$e});return}if(M==="key")return Hoe(w,X);if(w._x_inlineBindings&&w._x_inlineBindings[M]&&w._x_inlineBindings[M].extract)return;let pe=Ld(w,X);le(()=>pe($e=>{$e===void 0&&typeof X=="string"&&X.match(/\./)&&($e=""),Mc(()=>rte(w,M,$e,L))})),Se(()=>{w._x_undoAddedClasses&&w._x_undoAddedClasses(),w._x_undoAddedStyles&&w._x_undoAddedStyles()})};Bte.inline=(w,{value:M,modifiers:L,expression:X})=>{M&&(w._x_inlineBindings||(w._x_inlineBindings={}),w._x_inlineBindings[M]={expression:X,extract:!1})};zi("bind",Bte);function Hoe(w,M){w._x_keyExpression=M}Jee(()=>`[${N_("data")}]`);zi("data",(w,{expression:M},{cleanup:L})=>{if(zoe(w))return;M=M===""?"{}":M;let X={};ZY(X,w);let se={};jne(se,X);let le=gS(w,M,{scope:se});(le===void 0||le===!0)&&(le={}),ZY(le,w);let Se=B_(le);Fee(Se);let pe=X5(w,Se);Se.init&&gS(w,Se.init),L(()=>{Se.destroy&&gS(w,Se.destroy),pe()})});uL((w,M)=>{w._x_dataStack&&(M._x_dataStack=w._x_dataStack,M.setAttribute("data-has-alpine-state",!0))});function zoe(w){return Ny?JY?!0:w.hasAttribute("data-has-alpine-state"):!1}zi("show",(w,{modifiers:M,expression:L},{effect:X})=>{let se=Ld(w,L);w._x_doHide||(w._x_doHide=()=>{Mc(()=>{w.style.setProperty("display","none",M.includes("important")?"important":void 0)})}),w._x_doShow||(w._x_doShow=()=>{Mc(()=>{w.style.length===1&&w.style.display==="none"?w.removeAttribute("style"):w.style.removeProperty("display")})});let le=()=>{w._x_doHide(),w._x_isShown=!1},Se=()=>{w._x_doShow(),w._x_isShown=!0},pe=()=>setTimeout(Se),$e=YY(hn=>hn?Se():le(),hn=>{typeof w._x_toggleAndCascadeWithTransitions=="function"?w._x_toggleAndCascadeWithTransitions(w,hn,Se,le):hn?pe():le()}),Ue,sn=!0;X(()=>se(hn=>{!sn&&hn===Ue||(M.includes("immediate")&&(hn?pe():le()),$e(hn),Ue=hn,sn=!1)}))});zi("for",(w,{expression:M},{effect:L,cleanup:X})=>{let se=Uoe(M),le=Ld(w,se.items),Se=Ld(w,w._x_keyExpression||"index");w._x_prevKeys=[],w._x_lookup={},L(()=>Voe(w,se,le,Se)),X(()=>{Object.values(w._x_lookup).forEach(pe=>Mc(()=>{$_(pe),pe.remove()})),delete w._x_prevKeys,delete w._x_lookup})});function Voe(w,M,L,X){let se=Se=>typeof Se=="object"&&!Array.isArray(Se),le=w;L(Se=>{Woe(Se)&&Se>=0&&(Se=Array.from(Array(Se).keys(),ze=>ze+1)),Se===void 0&&(Se=[]);let pe=w._x_lookup,$e=w._x_prevKeys,Ue=[],sn=[];if(se(Se))Se=Object.entries(Se).map(([ze,Gn])=>{let Bt=YJ(M,Gn,ze,Se);X(ie=>{sn.includes(ie)&&dg("Duplicate key on x-for",w),sn.push(ie)},{scope:{index:ze,...Bt}}),Ue.push(Bt)});else for(let ze=0;ze<Se.length;ze++){let Gn=YJ(M,Se[ze],ze,Se);X(Bt=>{sn.includes(Bt)&&dg("Duplicate key on x-for",w),sn.push(Bt)},{scope:{index:ze,...Gn}}),Ue.push(Gn)}let hn=[],Rt=[],tn=[],fo=[];for(let ze=0;ze<$e.length;ze++){let Gn=$e[ze];sn.indexOf(Gn)===-1&&tn.push(Gn)}$e=$e.filter(ze=>!tn.includes(ze));let Wn="template";for(let ze=0;ze<sn.length;ze++){let Gn=sn[ze],Bt=$e.indexOf(Gn);if(Bt===-1)$e.splice(ze,0,Gn),hn.push([Wn,ze]);else if(Bt!==ze){let ie=$e.splice(ze,1)[0],en=$e.splice(Bt-1,1)[0];$e.splice(ze,0,en),$e.splice(Bt,0,ie),Rt.push([ie,en])}else fo.push(Gn);Wn=Gn}for(let ze=0;ze<tn.length;ze++){let Gn=tn[ze];Gn in pe&&(Mc(()=>{$_(pe[Gn]),pe[Gn].remove()}),delete pe[Gn])}for(let ze=0;ze<Rt.length;ze++){let[Gn,Bt]=Rt[ze],ie=pe[Gn],en=pe[Bt],Ro=document.createElement("div");Mc(()=>{en||dg('x-for ":key" is undefined or invalid',le,Bt,pe),en.after(Ro),ie.after(en),en._x_currentIfEl&&en.after(en._x_currentIfEl),Ro.before(ie),ie._x_currentIfEl&&ie.after(ie._x_currentIfEl),Ro.remove()}),en._x_refreshXForScope(Ue[sn.indexOf(Bt)])}for(let ze=0;ze<hn.length;ze++){let[Gn,Bt]=hn[ze],ie=Gn==="template"?le:pe[Gn];ie._x_currentIfEl&&(ie=ie._x_currentIfEl);let en=Ue[Bt],Ro=sn[Bt],Qe=document.importNode(le.content,!0).firstElementChild,K=B_(en);X5(Qe,K,le),Qe._x_refreshXForScope=It=>{Object.entries(It).forEach(([Kn,vn])=>{K[Kn]=vn})},Mc(()=>{ie.after(Qe),$y(()=>rb(Qe))()}),typeof Ro=="object"&&dg("x-for key cannot be an object, it must be a string or an integer",le),pe[Ro]=Qe}for(let ze=0;ze<fo.length;ze++)pe[fo[ze]]._x_refreshXForScope(Ue[sn.indexOf(fo[ze])]);le._x_prevKeys=sn})}function Uoe(w){let M=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,L=/^\s*\(|\)\s*$/g,X=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,se=w.match(X);if(!se)return;let le={};le.items=se[2].trim();let Se=se[1].replace(L,"").trim(),pe=Se.match(M);return pe?(le.item=Se.replace(M,"").trim(),le.index=pe[1].trim(),pe[2]&&(le.collection=pe[2].trim())):le.item=Se,le}function YJ(w,M,L,X){let se={};return/^\[.*\]$/.test(w.item)&&Array.isArray(M)?w.item.replace("[","").replace("]","").split(",").map(Se=>Se.trim()).forEach((Se,pe)=>{se[Se]=M[pe]}):/^\{.*\}$/.test(w.item)&&!Array.isArray(M)&&typeof M=="object"?w.item.replace("{","").replace("}","").split(",").map(Se=>Se.trim()).forEach(Se=>{se[Se]=M[Se]}):se[w.item]=M,w.index&&(se[w.index]=L),w.collection&&(se[w.collection]=X),se}function Woe(w){return!Array.isArray(w)&&!isNaN(w)}function Fte(){}Fte.inline=(w,{expression:M},{cleanup:L})=>{let X=iL(w);X._x_refs||(X._x_refs={}),X._x_refs[M]=w,L(()=>delete X._x_refs[M])};zi("ref",Fte);zi("if",(w,{expression:M},{effect:L,cleanup:X})=>{w.tagName.toLowerCase()!=="template"&&dg("x-if can only be used on a <template> tag",w);let se=Ld(w,M),le=()=>{if(w._x_currentIfEl)return w._x_currentIfEl;let pe=w.content.cloneNode(!0).firstElementChild;return X5(pe,{},w),Mc(()=>{w.after(pe),$y(()=>rb(pe))()}),w._x_currentIfEl=pe,w._x_undoIf=()=>{Mc(()=>{$_(pe),pe.remove()}),delete w._x_currentIfEl},pe},Se=()=>{w._x_undoIf&&(w._x_undoIf(),delete w._x_undoIf)};L(()=>se(pe=>{pe?le():Se()})),X(()=>w._x_undoIf&&w._x_undoIf())});zi("id",(w,{expression:M},{evaluate:L})=>{L(M).forEach(se=>Ooe(w,se))});uL((w,M)=>{w._x_ids&&(M._x_ids=w._x_ids)});dX(Uee("@",Wee(N_("on:"))));zi("on",$y((w,{value:M,modifiers:L,expression:X},{cleanup:se})=>{let le=X?Ld(w,X):()=>{};w.tagName.toLowerCase()==="template"&&(w._x_forwardEvents||(w._x_forwardEvents=[]),w._x_forwardEvents.includes(M)||w._x_forwardEvents.push(M));let Se=nX(w,M,L,pe=>{le(()=>{},{scope:{$event:pe},params:[pe]})});se(()=>Se())}));gL("Collapse","collapse","collapse");gL("Intersect","intersect","intersect");gL("Focus","trap","focus");gL("Mask","mask","mask");function gL(w,M,L){zi(M,X=>dg(`You can't use [x-${M}] without first installing the "${w}" plugin here: https://alpinejs.dev/plugins/${L}`,X))}Q5.setEvaluator(Lee);Q5.setReactivityEngine({reactive:xX,effect:noe,release:ooe,raw:rc});var Zoe=Q5,Nte=Zoe;function joe(w){return w&&w.__esModule&&Object.prototype.hasOwnProperty.call(w,"default")?w.default:w}var LY={exports:{}},XJ;function qoe(){return XJ||(XJ=1,(function(w){(function(){var M=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var n=typeof e;return n==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":n==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":n},L=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},X=function(e,n){var o=Array.prototype.slice.call(e);return o.sort(n)},se=function(e,n){return le(function(o,r){return e.eq(n(o),n(r))})},le=function(e){return{eq:e}},Se=le(function(e,n){return e===n}),pe=Se,$e=function(e){return le(function(n,o){if(n.length!==o.length)return!1;for(var r=n.length,c=0;c<r;c++)if(!e.eq(n[c],o[c]))return!1;return!0})},Ue=function(e,n){return se($e(e),function(o){return X(o,n)})},sn=function(e){return le(function(n,o){var r=Object.keys(n),c=Object.keys(o);if(!Ue(pe).eq(r,c))return!1;for(var u=r.length,f=0;f<u;f++){var b=r[f];if(!e.eq(n[b],o[b]))return!1}return!0})},hn=le(function(e,n){if(e===n)return!0;var o=M(e),r=M(n);return o!==r?!1:L(o)?e===n:o==="array"?$e(hn).eq(e,n):o==="object"?sn(hn).eq(e,n):!1});const Rt=Object.getPrototypeOf,tn=(e,n,o)=>{var r;return o(e,n.prototype)?!0:((r=e.constructor)===null||r===void 0?void 0:r.name)===n.name},fo=e=>{const n=typeof e;return e===null?"null":n==="object"&&Array.isArray(e)?"array":n==="object"&&tn(e,String,(o,r)=>r.isPrototypeOf(o))?"string":n},Wn=e=>n=>fo(n)===e,ze=e=>n=>typeof n===e,Gn=e=>n=>e===n,Bt=(e,n)=>en(e)&&tn(e,n,(o,r)=>Rt(o)===r),ie=Wn("string"),en=Wn("object"),Ro=e=>Bt(e,Object),Qe=Wn("array"),K=Gn(null),It=ze("boolean"),Kn=Gn(void 0),vn=e=>e==null,Fe=e=>!vn(e),he=ze("function"),Cs=ze("number"),ut=(e,n)=>{if(Qe(e)){for(let o=0,r=e.length;o<r;++o)if(!n(e[o]))return!1;return!0}return!1},Ct=()=>{},k=(e,n)=>(...o)=>e(n.apply(null,o)),Eo=(e,n)=>o=>e(n(o)),bt=e=>()=>e,Uo=e=>e,pn=(e,n)=>e===n;function Te(e,...n){return(...o)=>{const r=n.concat(o);return e.apply(null,r)}}const St=e=>n=>!e(n),$n=e=>()=>{throw new Error(e)},Xe=e=>e(),qt=e=>{e()},Ne=bt(!1),ft=bt(!0);class P{constructor(n,o){this.tag=n,this.value=o}static some(n){return new P(!0,n)}static none(){return P.singletonNone}fold(n,o){return this.tag?o(this.value):n()}isSome(){return this.tag}isNone(){return!this.tag}map(n){return this.tag?P.some(n(this.value)):P.none()}bind(n){return this.tag?n(this.value):P.none()}exists(n){return this.tag&&n(this.value)}forall(n){return!this.tag||n(this.value)}filter(n){return!this.tag||n(this.value)?this:P.none()}getOr(n){return this.tag?this.value:n}or(n){return this.tag?this:n}getOrThunk(n){return this.tag?this.value:n()}orThunk(n){return this.tag?this:n()}getOrDie(n){if(this.tag)return this.value;throw new Error(n??"Called getOrDie on None")}static from(n){return Fe(n)?P.some(n):P.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(n){this.tag&&n(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}P.singletonNone=new P(!1);const Xo=Array.prototype.slice,ro=Array.prototype.indexOf,Qn=Array.prototype.push,_o=(e,n)=>ro.call(e,n),ws=(e,n)=>{const o=_o(e,n);return o===-1?P.none():P.some(o)},be=(e,n)=>_o(e,n)>-1,ke=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];if(n(c,o))return!0}return!1},Oe=(e,n)=>{const o=e.length,r=new Array(o);for(let c=0;c<o;c++){const u=e[c];r[c]=n(u,c)}return r},me=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];n(c,o)}},Re=(e,n)=>{for(let o=e.length-1;o>=0;o--){const r=e[o];n(r,o)}},at=(e,n)=>{const o=[],r=[];for(let c=0,u=e.length;c<u;c++){const f=e[c];(n(f,c)?o:r).push(f)}return{pass:o,fail:r}},tt=(e,n)=>{const o=[];for(let r=0,c=e.length;r<c;r++){const u=e[r];n(u,r)&&o.push(u)}return o},In=(e,n)=>{if(e.length===0)return[];{let o=n(e[0]);const r=[];let c=[];for(let u=0,f=e.length;u<f;u++){const b=e[u],v=n(b);v!==o&&(r.push(c),c=[]),o=v,c.push(b)}return c.length!==0&&r.push(c),r}},qe=(e,n,o)=>(Re(e,(r,c)=>{o=n(o,r,c)}),o),st=(e,n,o)=>(me(e,(r,c)=>{o=n(o,r,c)}),o),Fn=(e,n,o)=>{for(let r=0,c=e.length;r<c;r++){const u=e[r];if(n(u,r))return P.some(u);if(o(u,r))break}return P.none()},rn=(e,n)=>Fn(e,n,Ne),To=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];if(n(c,o))return P.some(o)}return P.none()},es=(e,n)=>{for(let o=e.length-1;o>=0;o--)if(n(e[o],o))return P.some(o);return P.none()},Wo=e=>{const n=[];for(let o=0,r=e.length;o<r;++o){if(!Qe(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);Qn.apply(n,e[o])}return n},eo=(e,n)=>Wo(Oe(e,n)),zs=(e,n)=>{for(let o=0,r=e.length;o<r;++o){const c=e[o];if(n(c,o)!==!0)return!1}return!0},wo=e=>{const n=Xo.call(e,0);return n.reverse(),n},mt=(e,n)=>tt(e,o=>!be(n,o)),Nt=(e,n)=>{const o={};for(let r=0,c=e.length;r<c;r++){const u=e[r];o[String(u)]=n(u,r)}return o},wn=(e,n)=>{const o=Xo.call(e,0);return o.sort(n),o},fn=(e,n)=>n>=0&&n<e.length?P.some(e[n]):P.none(),uo=e=>fn(e,0),ts=e=>fn(e,e.length-1),So=he(Array.from)?Array.from:e=>Xo.call(e),ks=(e,n)=>{for(let o=0;o<e.length;o++){const r=n(e[o],o);if(r.isSome())return r}return P.none()},Xs=(e,n)=>{const o=[],r=he(n)?c=>ke(o,u=>n(u,c)):c=>be(o,c);for(let c=0,u=e.length;c<u;c++){const f=e[c];r(f)||o.push(f)}return o},dn=Object.keys,ko=Object.hasOwnProperty,xo=(e,n)=>{const o=dn(e);for(let r=0,c=o.length;r<c;r++){const u=o[r],f=e[u];n(f,u)}},ac=(e,n)=>da(e,(o,r)=>({k:r,v:n(o,r)})),da=(e,n)=>{const o={};return xo(e,(r,c)=>{const u=n(r,c);o[u.k]=u.v}),o},cn=e=>(n,o)=>{e[o]=n},Bc=(e,n,o,r)=>{xo(e,(c,u)=>{(n(c,u)?o:r)(c,u)})},Ds=(e,n)=>{const o={},r={};return Bc(e,n,cn(o),cn(r)),{t:o,f:r}},Fc=(e,n)=>{const o={};return Bc(e,n,cn(o),Ct),o},Ma=(e,n)=>{const o=[];return xo(e,(r,c)=>{o.push(n(r,c))}),o},zr=e=>Ma(e,Uo),Ss=(e,n)=>to(e,n)?P.from(e[n]):P.none(),to=(e,n)=>ko.call(e,n),os=(e,n)=>to(e,n)&&e[n]!==void 0&&e[n]!==null,Wa=(e,n,o=hn)=>sn(o).eq(e,n),Za={generate:e=>{if(!Qe(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const n=[],o={};return me(e,(r,c)=>{const u=dn(r);if(u.length!==1)throw new Error("one and only one name per case");const f=u[0],b=r[f];if(o[f]!==void 0)throw new Error("duplicate key detected:"+f);if(f==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Qe(b))throw new Error("case arguments must be an array");n.push(f),o[f]=(...v)=>{const x=v.length;if(x!==b.length)throw new Error("Wrong number of arguments to case "+f+". Expected "+b.length+" ("+b+"), got "+x);return{fold:(...B)=>{if(B.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+B.length);return B[c].apply(null,v)},match:B=>{const N=dn(B);if(n.length!==N.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+`
Actual: `+N.join(","));if(!zs(n,te=>be(N,te)))throw new Error("Not all branches were specified when using match. Specified: "+N.join(", ")+`
Required: `+n.join(", "));return B[f].apply(null,v)},log:B=>{console.log(B,{constructors:n,constructor:f,params:v})}}}}),o}},gn=e=>{let n=e;return{get:()=>n,set:c=>{n=c}}},Fr=e=>{const n=u=>u(e),o=bt(e),r=()=>c,c={tag:!0,inner:e,fold:(u,f)=>f(e),isValue:ft,isError:Ne,map:u=>ge.value(u(e)),mapError:r,bind:n,exists:n,forall:n,getOr:o,or:r,getOrThunk:o,orThunk:r,getOrDie:o,each:u=>{u(e)},toOptional:()=>P.some(e)};return c},yr=e=>{const n=()=>o,o={tag:!1,inner:e,fold:(r,c)=>r(e),isValue:Ne,isError:ft,map:n,mapError:r=>ge.error(r(e)),bind:n,exists:Ne,forall:ft,getOr:Uo,or:Uo,getOrThunk:Xe,orThunk:Xe,getOrDie:$n(String(e)),each:Ct,toOptional:P.none};return o},ge={value:Fr,error:yr,fromOption:(e,n)=>e.fold(()=>yr(n),Fr)},Ce=typeof window<"u"?window:Function("return this;")(),Ie=()=>{const e=window.crypto.getRandomValues(new Uint8Array(16));return e[6]=e[6]&15|64,e[8]=e[8]&63|128,e},dt=()=>{const e=Ie(),n=(o,r)=>{let c="";for(let u=o;u<=r;++u){const f=e[u].toString(16).padStart(2,"0");c+=f}return c};return`${n(0,3)}-${n(4,5)}-${n(6,7)}-${n(8,9)}-${n(10,15)}`},Rn=(e,n,o)=>Math.min(Math.max(e,n),o),Zn=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let Ao=0;const jo=e=>{const o=new Date().getTime(),r=Math.floor(Zn()*1e9);return Ao++,e+"_"+r+Ao+String(o)},qo=()=>window.isSecureContext?window.crypto.randomUUID():dt(),Mo=(e,n)=>n,G=(e,n)=>Ro(e)&&Ro(n)?gt(e,n):n,we=e=>(...n)=>{if(n.length===0)throw new Error("Can't merge zero objects");const o={};for(let r=0;r<n.length;r++){const c=n[r];for(const u in c)to(c,u)&&(o[u]=e(o[u],c[u]))}return o},gt=we(G),Yt=we(Mo),At=(e,n,o=pn)=>e.exists(r=>o(r,n)),Mn=(e,n,o=pn)=>nn(e,n,o).getOr(e.isNone()&&n.isNone()),Tn=e=>{const n=[],o=r=>{n.push(r)};for(let r=0;r<e.length;r++)e[r].each(o);return n},nn=(e,n,o)=>e.isSome()&&n.isSome()?P.some(o(e.getOrDie(),n.getOrDie())):P.none(),bo=(e,n,o,r)=>e.isSome()&&n.isSome()&&o.isSome()?P.some(r(e.getOrDie(),n.getOrDie(),o.getOrDie())):P.none(),Lo=e=>e.bind(Uo),Qo=(e,n)=>e?P.some(n):P.none(),bs=(e,n)=>{let o=n??Ce;for(let r=0;r<e.length&&o!==void 0&&o!==null;++r)o=o[e[r]];return o},Sa=(e,n)=>{const o=e.split(".");return bs(o,n)};Za.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Er=e=>{const n=[],o=[];return me(e,r=>{r.fold(c=>{n.push(c)},c=>{o.push(c)})}),{errors:n,values:o}},Ml=e=>{const n=gn(P.none()),o=()=>n.get().each(e);return{clear:()=>{o(),n.set(P.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:b=>{o(),n.set(P.some(b))}}},Gs=e=>{const n=gn(P.none()),o=()=>n.get().each(b=>clearInterval(b));return{clear:()=>{o(),n.set(P.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:b=>{o(),n.set(P.some(setInterval(b,e)))}}},rs=()=>{const e=Ml(Ct);return{...e,on:o=>e.get().each(o)}},Os=(e,n)=>e.substring(n),ma=(e,n,o)=>n===""||e.length>=n.length&&e.substr(o,o+n.length)===n,Vi=(e,n)=>jn(e,n)?Os(e,n.length):e,er=(e,n,o=0,r)=>{const c=e.indexOf(n,o);return c!==-1?Kn(r)?!0:c+n.length<=r:!1},jn=(e,n)=>ma(e,n,0),fa=(e,n)=>ma(e,n,e.length-n.length),xa=e=>n=>n.replace(e,""),cr=xa(/^\s+|\s+$/g),Ju=xa(/^\s+/g),bu=xa(/\s+$/g),Js=e=>e.length>0,Ai=e=>!Js(e),ri=(e,n)=>n<=0?"":new Array(n+1).join(e),Qu=(e,n=10)=>{const o=parseInt(e,n);return isNaN(o)?P.none():P.some(o)},Gt=(e,n)=>{let o=null;return{cancel:()=>{K(o)||(clearTimeout(o),o=null)},throttle:(...u)=>{K(o)&&(o=setTimeout(()=>{o=null,e.apply(null,u)},n))}}},Pc=(e,n)=>{let o=null;const r=()=>{K(o)||(clearTimeout(o),o=null)};return{cancel:r,throttle:(...u)=>{r(),o=setTimeout(()=>{o=null,e.apply(null,u)},n)}}},Ba=e=>{let n=!1,o;return(...r)=>(n||(n=!0,o=e.apply(null,r)),o)},ja="\uFEFF",ir="",vu="",qa=e=>e===ja,yc=e=>e.replace(/\uFEFF/g,""),Bl=e=>{const n={};return me(e,o=>{n[o]={}}),dn(n)},ed=e=>e.length!==void 0,Ui=Array.isArray,yu=e=>{if(Ui(e))return e;{const n=[];for(let o=0,r=e.length;o<r;o++)n[o]=e[o];return n}},Fl=(e,n,o)=>{if(!e)return!1;if(o=o||e,ed(e)){for(let r=0,c=e.length;r<c;r++)if(n.call(o,e[r],r,e)===!1)return!1}else for(const r in e)if(to(e,r)&&n.call(o,e[r],r,e)===!1)return!1;return!0},Wi=(e,n)=>{const o=[];return Fl(e,(r,c)=>{o.push(n(r,c,e))}),o},Nl=(e,n)=>{const o=[];return Fl(e,(r,c)=>{(!n||n(r,c,e))&&o.push(r)}),o},zt=(e,n)=>{if(e){for(let o=0,r=e.length;o<r;o++)if(e[o]===n)return o}return-1},dl=(e,n,o,r)=>{let c=Kn(o)?e[0]:o;for(let u=0;u<e.length;u++)c=n.call(r,c,e[u],u);return c},td=(e,n,o)=>{for(let r=0,c=e.length;r<c;r++)if(n.call(o,e[r],r,e))return r;return-1},U=e=>e[e.length-1],ue=(e,n,o,r)=>{const c=e.isiOS()&&/ipad/i.test(o)===!0,u=e.isiOS()&&!c,f=e.isiOS()||e.isAndroid(),b=f||r("(pointer:coarse)"),v=c||!u&&f&&r("(min-device-width:768px)"),x=u||f&&!v,D=n.isSafari()&&e.isiOS()&&/safari/i.test(o)===!1,B=!x&&!v&&!D;return{isiPad:bt(c),isiPhone:bt(u),isTablet:bt(v),isPhone:bt(x),isTouch:bt(b),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:bt(D),isDesktop:bt(B)}},Me=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o];if(r.test(n))return r}},ct=(e,n)=>{const o=Me(e,n);if(!o)return{major:0,minor:0};const r=c=>Number(n.replace(o,"$"+c));return Bo(r(1),r(2))},Lt=(e,n)=>{const o=String(n).toLowerCase();return e.length===0?mn():ct(e,o)},mn=()=>Bo(0,0),Bo=(e,n)=>({major:e,minor:n}),yo={nu:Bo,detect:Lt,unknown:mn},us=(e,n)=>ks(n.brands,o=>{const r=o.brand.toLowerCase();return rn(e,c=>{var u;return r===((u=c.brand)===null||u===void 0?void 0:u.toLowerCase())}).map(c=>({current:c.name,version:yo.nu(parseInt(o.version,10),0)}))}),$=(e,n)=>{const o=String(n).toLowerCase();return rn(e,r=>r.search(o))},j=(e,n)=>$(e,n).map(o=>{const r=yo.detect(o.versionRegexes,n);return{current:o.name,version:r}}),fe=(e,n)=>$(e,n).map(o=>{const r=yo.detect(o.versionRegexes,n);return{current:o.name,version:r}}),Ge=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ln=e=>n=>er(n,e),Go=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>er(e,"edge/")&&er(e,"chrome")&&er(e,"safari")&&er(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ge],search:e=>er(e,"chrome")&&!er(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>er(e,"msie")||er(e,"trident")},{name:"Opera",versionRegexes:[Ge,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ln("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ln("firefox")},{name:"Safari",versionRegexes:[Ge,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(er(e,"safari")||er(e,"mobile/"))&&er(e,"applewebkit")}],Rs=[{name:"Windows",search:ln("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>er(e,"iphone")||er(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ln("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:ln("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ln("linux"),versionRegexes:[]},{name:"Solaris",search:ln("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ln("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:ln("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Or={browsers:bt(Go),oses:bt(Rs)},Fa="Edge",Cc="Chromium",Ko="IE",ml="Opera",Rm="Firefox",Zi="Safari",mg=()=>Mm({current:void 0,version:yo.unknown()}),Mm=e=>{const n=e.current,o=e.version,r=c=>()=>n===c;return{current:n,version:o,isEdge:r(Fa),isChromium:r(Cc),isIE:r(Ko),isOpera:r(ml),isFirefox:r(Rm),isSafari:r(Zi)}},wc={unknown:mg,nu:Mm},nd="Windows",od="iOS",Mh="Android",fg="Linux",gg="macOS",Bh="Solaris",pf="FreeBSD",ji="ChromeOS",Fh=()=>Nh({current:void 0,version:yo.unknown()}),Nh=e=>{const n=e.current,o=e.version,r=c=>()=>n===c;return{current:n,version:o,isWindows:r(nd),isiOS:r(od),isAndroid:r(Mh),isMacOS:r(gg),isLinux:r(fg),isSolaris:r(Bh),isFreeBSD:r(pf),isChromeOS:r(ji)}},J={unknown:Fh,nu:Nh},He={detect:(e,n,o)=>{const r=Or.browsers(),c=Or.oses(),u=n.bind(v=>us(r,v)).orThunk(()=>j(r,e)).fold(wc.unknown,wc.nu),f=fe(c,e).fold(J.unknown,J.nu),b=ue(f,u,e,o);return{browser:u,os:f,deviceType:b}}},pt=e=>window.matchMedia(e).matches;let Ln=Ba(()=>He.detect(window.navigator.userAgent,P.from(window.navigator.userAgentData),pt));const Do=()=>Ln(),Rr=(e,n)=>Sa(e,n),Sc=(e,n)=>{const o=Rr(e,n);if(o==null)throw new Error(e+" not available on this browser");return o},ga=Object.getPrototypeOf,xc=e=>Sc("HTMLElement",e),Cu=e=>{const n=Sa("ownerDocument.defaultView",e);return en(e)&&(xc(n).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(ga(e).constructor.name))},Ec=window.navigator.userAgent,wu=Do(),Tc=wu.browser,$c=wu.os,Pl=wu.deviceType,Ic=Ec.indexOf("Windows Phone")!==-1,Po={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Tc.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Tc.isIE(),windowsPhone:Ic,browser:{current:Tc.current,version:Tc.version,isChromium:Tc.isChromium,isEdge:Tc.isEdge,isFirefox:Tc.isFirefox,isIE:Tc.isIE,isOpera:Tc.isOpera,isSafari:Tc.isSafari},os:{current:$c.current,version:$c.version,isAndroid:$c.isAndroid,isChromeOS:$c.isChromeOS,isFreeBSD:$c.isFreeBSD,isiOS:$c.isiOS,isLinux:$c.isLinux,isMacOS:$c.isMacOS,isSolaris:$c.isSolaris,isWindows:$c.isWindows},deviceType:{isDesktop:Pl.isDesktop,isiPad:Pl.isiPad,isiPhone:Pl.isiPhone,isPhone:Pl.isPhone,isTablet:Pl.isTablet,isTouch:Pl.isTouch,isWebView:Pl.isWebView}},bf=/^\s*|\s*$/g,Ph=e=>vn(e)?"":(""+e).replace(bf,""),Ir=(e,n)=>n?n==="array"&&Ui(e)?!0:typeof e===n:e!==void 0,yS=(e,n,o={})=>{const r=ie(e)?e.split(n||","):e||[];let c=r.length;for(;c--;)o[r[c]]={};return o},t1=to,CS=(e,...n)=>{for(let o=0;o<n.length;o++){const r=n[o];for(const c in r)if(to(r,c)){const u=r[c];u!==void 0&&(e[c]=u)}}return e},ab=function(e,n,o,r){r=r||this,e&&(o&&(e=e[o]),Fl(e,(c,u)=>n.call(r,c,u,o)===!1?!1:(ab(c,n,o,r),!0)))},Mt={trim:Ph,isArray:Ui,is:Ir,toArray:yu,makeMap:yS,each:Fl,map:Wi,grep:Nl,inArray:zt,hasOwn:t1,extend:CS,walk:ab,resolve:(e,n=window)=>{const o=e.split(".");for(let r=0,c=o.length;r<c&&(n=n[o[r]],!!n);r++);return n},explode:(e,n)=>Qe(e)?e:e===""?[]:Wi(e.split(n||","),Ph),_addCacheSuffix:e=>{const n=Po.cacheSuffix;return n&&(e+=(e.indexOf("?")===-1?"?":"&")+n),e}},_i=(e,n)=>{const r=(n||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){const c="HTML does not have a single root node";throw console.error(c,e),new Error(c)}return vf(r.childNodes[0])},hg=(e,n)=>{const r=(n||document).createElement(e);return vf(r)},fl=(e,n)=>{const r=(n||document).createTextNode(e);return vf(r)},vf=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},re={fromHtml:_i,fromTag:hg,fromText:fl,fromDom:vf,fromPoint:(e,n,o)=>P.from(e.dom.elementFromPoint(n,o)).map(vf)},ai=(e,n)=>{n.fold(o=>{e.setStartBefore(o.dom)},(o,r)=>{e.setStart(o.dom,r)},o=>{e.setStartAfter(o.dom)})},Hd=(e,n)=>{n.fold(o=>{e.setEndBefore(o.dom)},(o,r)=>{e.setEnd(o.dom,r)},o=>{e.setEndAfter(o.dom)})},o1=(e,n,o)=>{const r=e.document.createRange();return ai(r,n),Hd(r,o),r},yf=(e,n,o,r,c)=>{const u=e.document.createRange();return u.setStart(n.dom,o),u.setEnd(r.dom,c),u},cc=Za.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),ci=(e,n,o)=>n(re.fromDom(o.startContainer),o.startOffset,re.fromDom(o.endContainer),o.endOffset),s1=(e,n)=>n.match({domRange:o=>({ltr:bt(o),rtl:P.none}),relative:(o,r)=>({ltr:Ba(()=>o1(e,o,r)),rtl:Ba(()=>P.some(o1(e,r,o)))}),exact:(o,r,c,u)=>({ltr:Ba(()=>yf(e,o,r,c,u)),rtl:Ba(()=>P.some(yf(e,c,u,o,r)))})}),r1=(e,n)=>{const o=n.ltr();return o.collapsed?n.rtl().filter(c=>c.collapsed===!1).map(c=>cc.rtl(re.fromDom(c.endContainer),c.endOffset,re.fromDom(c.startContainer),c.startOffset)).getOrThunk(()=>ci(e,cc.ltr,o)):ci(e,cc.ltr,o)},pg=(e,n)=>{const o=s1(e,n);return r1(e,o)};cc.ltr,cc.rtl;const ii=8,a1=9,Su=11,bg=1,c1=3,ki=(e,n)=>{const o=e.dom;if(o.nodeType!==bg)return!1;{const r=o;if(r.matches!==void 0)return r.matches(n);if(r.msMatchesSelector!==void 0)return r.msMatchesSelector(n);if(r.webkitMatchesSelector!==void 0)return r.webkitMatchesSelector(n);if(r.mozMatchesSelector!==void 0)return r.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}},i1=e=>e.nodeType!==bg&&e.nodeType!==a1&&e.nodeType!==Su||e.childElementCount===0,$l=(e,n)=>{const o=n===void 0?document:n.dom;return i1(o)?[]:Oe(o.querySelectorAll(e),re.fromDom)},zd=(e,n)=>{const o=n===void 0?document:n.dom;return i1(o)?P.none():P.from(o.querySelector(e)).map(re.fromDom)},Yo=(e,n)=>e.dom===n.dom,Lc=(e,n)=>{const o=e.dom,r=n.dom;return o===r?!1:o.contains(r)},Cf=ki,cb=(e,n)=>{const o=[],r=u=>(o.push(u),n(u));let c=n(e);do c=c.bind(r);while(c.isSome());return o},Oo=e=>e.dom.nodeName.toLowerCase(),sd=e=>e.dom.nodeType,Xr=e=>n=>sd(n)===e,Il=e=>sd(e)===ii||Oo(e)==="#comment",Ll=e=>Tr(e)&&Cu(e.dom),Tr=Xr(bg),xs=Xr(c1),Ly=Xr(a1),Hy=Xr(Su),Jr=e=>n=>Tr(n)&&Oo(n)===e,gl=e=>re.fromDom(e.dom.ownerDocument),hl=e=>Ly(e)?e:gl(e),oa=e=>re.fromDom(hl(e).dom.documentElement),Hl=e=>re.fromDom(hl(e).dom.defaultView),Hc=e=>P.from(e.dom.parentNode).map(re.fromDom),Di=e=>P.from(e.dom.parentElement).map(re.fromDom),ic=(e,n)=>{const o=he(n)?n:Ne;let r=e.dom;const c=[];for(;r.parentNode!==null&&r.parentNode!==void 0;){const u=r.parentNode,f=re.fromDom(u);if(c.push(f),o(f)===!0)break;r=u}return c},_s=e=>{const n=o=>tt(o,r=>!Yo(e,r));return Hc(e).map(wr).map(n).getOr([])},qi=e=>P.from(e.dom.previousSibling).map(re.fromDom),zc=e=>P.from(e.dom.nextSibling).map(re.fromDom),Na=e=>wo(cb(e,qi)),Ea=e=>cb(e,zc),wr=e=>Oe(e.dom.childNodes,re.fromDom),pl=(e,n)=>{const o=e.dom.childNodes;return P.from(o[n]).map(re.fromDom)},Ta=e=>pl(e,0),Vr=e=>pl(e,e.dom.childNodes.length-1),Vd=e=>e.dom.childNodes.length,ib=e=>{const n=e.dom.head;if(n==null)throw new Error("Head is not available yet");return re.fromDom(n)},$h=e=>Hy(e)&&Fe(e.dom.host),Aa=e=>re.fromDom(e.dom.getRootNode()),l1=e=>$h(e)?e:ib(hl(e)),lb=e=>$h(e)?e:re.fromDom(hl(e).dom.body),Fm=e=>{const n=Aa(e);return $h(n)?P.some(n):P.none()},Hn=e=>re.fromDom(e.dom.host),u1=e=>{if(Fe(e.target)){const n=re.fromDom(e.target);if(Tr(n)&&ha(n)&&e.composed&&e.composedPath){const o=e.composedPath();if(o)return uo(o)}}return P.from(e.target)},ha=e=>Fe(e.dom.shadowRoot),Pa=(e,n,o,r,c,u,f)=>({target:e,x:n,y:o,stop:r,prevent:c,kill:u,raw:f}),$a=e=>{const n=re.fromDom(u1(e).getOr(e.target)),o=()=>e.stopPropagation(),r=()=>e.preventDefault(),c=k(r,o);return Pa(n,e.clientX,e.clientY,o,r,c,e)},tr=(e,n)=>o=>{e(o)&&n($a(o))},Ud=(e,n,o,r,c)=>{const u=tr(o,r);return e.dom.addEventListener(n,u,c),{unbind:Te(Gi,e,n,u,c)}},Ih=(e,n,o,r)=>Ud(e,n,o,r,!1),Gi=(e,n,o,r)=>{e.dom.removeEventListener(n,o,r)},zl=ft,d1=(e,n,o)=>Ih(e,n,zl,o),m1=()=>re.fromDom(document),vg=(e,n=!1)=>e.dom.focus({preventScroll:n}),xu=e=>{const n=Aa(e).dom;return e.dom===n.activeElement},bl=(e=m1())=>P.from(e.dom.activeElement).map(re.fromDom),f1=e=>bl(Aa(e)).filter(n=>e.dom.contains(n.dom)),Ga=(e,n)=>{Hc(e).each(r=>{r.dom.insertBefore(n.dom,e.dom)})},Ki=(e,n)=>{zc(e).fold(()=>{Hc(e).each(c=>{ds(c,n)})},r=>{Ga(r,n)})},Eu=(e,n)=>{Ta(e).fold(()=>{ds(e,n)},r=>{e.dom.insertBefore(n.dom,r.dom)})},ds=(e,n)=>{e.dom.appendChild(n.dom)},Oi=(e,n)=>{Ga(e,n),ds(n,e)},ub=(e,n)=>{me(n,o=>{Ga(e,o)})},yg=(e,n)=>{me(n,(o,r)=>{const c=r===0?e:n[r-1];Ki(c,o)})},Yi=(e,n)=>{me(n,o=>{ds(e,o)})},Yn=(e,n,o)=>{if(ie(o)||It(o)||Cs(o))e.setAttribute(n,o+"");else throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",o,":: Element ",e),new Error("Attribute value was not simple")},Cr=(e,n,o)=>{Yn(e.dom,n,o)},Ka=(e,n)=>{const o=e.dom;xo(n,(r,c)=>{Yn(o,c,r)})},nr=(e,n)=>{const o=e.dom.getAttribute(n);return o===null?void 0:o},Xi=(e,n)=>P.from(nr(e,n)),lr=(e,n)=>{const o=e.dom;return o&&o.hasAttribute?o.hasAttribute(n):!1},Qr=(e,n)=>{e.dom.removeAttribute(n)},wf=e=>{const n=e.dom.attributes;return n==null||n.length===0},Ho=e=>st(e.dom.attributes,(n,o)=>(n[o.name]=o.value,n),{}),vl=e=>{e.dom.textContent="",me(wr(e),n=>{Ws(n)})},Ws=e=>{const n=e.dom;n.parentNode!==null&&n.parentNode.removeChild(n)},li=e=>{const n=wr(e);n.length>0&&yg(e,n),Ws(e)},ea=(e,n)=>re.fromDom(e.dom.cloneNode(n)),ta=e=>ea(e,!1),Tu=e=>ea(e,!0),Sf=(e,n)=>{const o=re.fromTag(n),r=Ho(e);return Ka(o,r),o},rd=(e,n)=>{const o=Sf(e,n);Ki(e,o);const r=wr(e);return Yi(o,r),Ws(e),o},Wd=(e,n)=>{const r=(n||document).createElement("div");return r.innerHTML=e,wr(re.fromDom(r))},Zd=e=>Oe(e,re.fromDom),Ya=e=>e.dom.innerHTML,ad=(e,n)=>{const r=gl(e).dom,c=re.fromDom(r.createDocumentFragment()),u=Wd(n,r);Yi(c,u),vl(e),ds(e,c)},zy=e=>{const n=re.fromTag("div"),o=re.fromDom(e.dom.cloneNode(!0));return ds(n,o),Ya(n)},jd=e=>e.style!==void 0&&he(e.style.getPropertyValue),Ms=e=>{const n=xs(e)?e.dom.parentNode:e.dom;if(n==null||n.ownerDocument===null)return!1;const o=n.ownerDocument;return Fm(re.fromDom(n)).fold(()=>o.body.contains(n),Eo(Ms,Hn))},g1=(e,n,o)=>{if(!ie(o))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",o,":: Element ",e),new Error("CSS value must be a string: "+o);jd(e)&&e.style.setProperty(n,o)},xf=(e,n)=>{jd(e)&&e.style.removeProperty(n)},lc=(e,n,o)=>{const r=e.dom;g1(r,n,o)},ui=(e,n)=>{const o=e.dom;xo(n,(r,c)=>{g1(o,c,r)})},Pr=(e,n)=>{const o=e.dom,c=window.getComputedStyle(o).getPropertyValue(n);return c===""&&!Ms(e)?cd(o,n):c},cd=(e,n)=>jd(e)?e.style.getPropertyValue(n):"",Ur=(e,n)=>{const o=e.dom,r=cd(o,n);return P.from(r).filter(c=>c.length>0)},Ef=e=>{const n={},o=e.dom;if(jd(o))for(let r=0;r<o.style.length;r++){const c=o.style.item(r);n[c]=o.style[c]}return n},Lh=(e,n)=>{const o=e.dom;xf(o,n),At(Xi(e,"style").map(cr),"")&&Qr(e,"style")},h1=e=>e.dom.offsetWidth,Vl=((e,n)=>{const o=(b,v)=>{if(!Cs(v)&&!v.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+v);const x=b.dom;jd(x)&&(x.style[e]=v+"px")},r=b=>{const v=n(b);if(v<=0||v===null){const x=Pr(b,e);return parseFloat(x)||0}return v},c=r,u=(b,v)=>st(v,(x,D)=>{const B=Pr(b,D),N=B===void 0?0:parseInt(B,10);return isNaN(N)?x:x+N},0);return{set:o,get:r,getOuter:c,aggregate:u,max:(b,v,x)=>{const D=u(b,x);return v>D?v-D:0}}})("height",e=>{const n=e.dom;return Ms(e)?n.getBoundingClientRect().height:n.offsetHeight}),Vy=e=>Vl.get(e),p1=(e,n)=>({left:e,top:n,translate:(r,c)=>p1(e+r,n+c)}),Ul=p1,db=e=>{const n=e.getBoundingClientRect();return Ul(n.left,n.top)},Tf=(e,n)=>e!==void 0?e:n!==void 0?n:0,Cg=e=>{const n=e.dom.ownerDocument,o=n.body,r=n.defaultView,c=n.documentElement;if(o===e.dom)return Ul(o.offsetLeft,o.offsetTop);const u=Tf(r==null?void 0:r.pageYOffset,c.scrollTop),f=Tf(r==null?void 0:r.pageXOffset,c.scrollLeft),b=Tf(c.clientTop,o.clientTop),v=Tf(c.clientLeft,o.clientLeft);return wg(e).translate(f-v,u-b)},wg=e=>{const n=e.dom,r=n.ownerDocument.body;return r===n?Ul(r.offsetLeft,r.offsetTop):Ms(e)?db(n):Ul(0,0)},b1=e=>{const n=e!==void 0?e.dom:document,o=n.body.scrollLeft||n.documentElement.scrollLeft,r=n.body.scrollTop||n.documentElement.scrollTop;return Ul(o,r)},mb=(e,n,o)=>{const c=(o!==void 0?o.dom:document).defaultView;c&&c.scrollTo(e,n)},yl=(e,n)=>{Do().browser.isSafari()&&he(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(n)},Uy=(e,n)=>{const o=u=>{if(!e(u))throw new Error("Can only get "+n+" value of a "+n+" node");return r(u).getOr("")},r=u=>e(u)?P.from(u.dom.nodeValue):P.none();return{get:o,getOption:r,set:(u,f)=>{if(!e(u))throw new Error("Can only set raw "+n+" value of a "+n+" node");u.dom.nodeValue=f}}},qd=(e,n)=>{const r=document.createDocumentFragment();return me(e,c=>{r.appendChild(c.dom)}),re.fromDom(r)},Bs=Uy(xs,"text"),uc=e=>Bs.get(e),Au=e=>Bs.getOption(e),v1=(e,n)=>Bs.set(e,n),Gd=(e,n)=>{const o=nr(e,n);return o===void 0||o===""?[]:o.split(" ")},y1=(e,n,o)=>{const c=Gd(e,n).concat([o]);return Cr(e,n,c.join(" ")),!0},fb=(e,n,o)=>{const r=tt(Gd(e,n),c=>c!==o);return r.length>0?Cr(e,n,r.join(" ")):Qr(e,n),!1};var _u=(e,n,o,r,c)=>e(o,r)?P.some(o):he(c)&&c(o)?P.none():n(o,r,c);const ku=(e,n,o)=>{let r=e.dom;const c=he(o)?o:Ne;for(;r.parentNode;){r=r.parentNode;const u=re.fromDom(r);if(n(u))return P.some(u);if(c(u))break}return P.none()},Ls=(e,n,o)=>_u((c,u)=>u(c),ku,e,n,o),gb=(e,n)=>{const o=e.dom;return o.parentNode?Sr(re.fromDom(o.parentNode),r=>!Yo(e,r)&&n(r)):P.none()},Sr=(e,n)=>{const o=c=>n(re.fromDom(c));return rn(e.dom.childNodes,o).map(re.fromDom)},Af=(e,n)=>{const o=r=>{for(let c=0;c<r.childNodes.length;c++){const u=re.fromDom(r.childNodes[c]);if(n(u))return P.some(u);const f=o(r.childNodes[c]);if(f.isSome())return f}return P.none()};return o(e.dom)},Wr=(e,n,o)=>ku(e,r=>ki(r,n),o),Du=(e,n)=>zd(n,e),dc=(e,n,o)=>_u((c,u)=>ki(c,u),Wr,e,n,o),id=e=>e.dom.classList!==void 0,Hh=e=>Gd(e,"class"),C1=(e,n)=>y1(e,"class",n),w1=(e,n)=>fb(e,"class",n),Wy=(e,n)=>be(Hh(e),n)?w1(e,n):C1(e,n),di=(e,n)=>{id(e)?e.dom.classList.add(n):C1(e,n)},Wl=e=>{(id(e)?e.dom.classList:Hh(e)).length===0&&Qr(e,"class")},Zr=(e,n)=>{id(e)?e.dom.classList.remove(n):w1(e,n),Wl(e)},_a=(e,n)=>{const o=id(e)?e.dom.classList.toggle(n):Wy(e,n);return Wl(e),o},zh=(e,n)=>id(e)&&e.dom.classList.contains(n),Sg=(e,n)=>{me(n,o=>{di(e,o)})},Vh=(e,n)=>{me(n,o=>{Zr(e,o)})},hb=e=>dc(e,"[contenteditable]"),Cl=(e,n=!1)=>Ms(e)?e.dom.isContentEditable:hb(e).fold(bt(n),o=>SS(o)==="true"),SS=e=>e.dom.contentEditable,E=(e,n)=>{e.dom.contentEditable=n?"true":"false"},_=(e,n,o)=>tt(ic(e,o),n),V=(e,n)=>tt(wr(e),n),ee=(e,n)=>{let o=[];return me(wr(e),r=>{n(r)&&(o=o.concat([r])),o=o.concat(ee(r,n))}),o},Ee=(e,n,o)=>_(e,r=>ki(r,n),o),ot=(e,n)=>$l(n,e),Zt=(e,n,o)=>ku(e,n,o).isSome(),Sn=(e,n)=>gb(e,n).isSome(),go=(e,n)=>Af(e,n).isSome(),Fo=(e,n)=>Zt(e,Te(Yo,n)),Ks=(e,n,o)=>Wr(e,n,o).isSome(),ur=e=>he(e)?e:Ne,na=(e,n,o)=>{let r=e.dom;const c=ur(o);for(;r.parentNode;){r=r.parentNode;const u=re.fromDom(r),f=n(u);if(f.isSome())return f;if(c(u))break}return P.none()},Vc=(e,n,o)=>{const r=n(e),c=ur(o);return r.orThunk(()=>c(e)?P.none():na(e,n,c))},ld=e=>Au(e).filter(n=>n.trim().length!==0||n.indexOf(ir)>-1).isSome(),ud=e=>Ll(e)&&nr(e,"contenteditable")==="false",wl=["img","br"],S1=e=>ld(e)||be(wl,Oo(e))||ud(e),_f=e=>Af(e,S1),Nm={create:(e,n,o,r)=>({start:e,soffset:n,finish:o,foffset:r})},kf=Za.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Wh=(e,n,o,r)=>e.fold(n,o,r),Zh=e=>e.fold(Uo,Uo,Uo),Zy=kf.before,jy=kf.on,ls=kf.after,Zs={before:Zy,on:jy,after:ls,cata:Wh,getStart:Zh},pa=Za.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),mi=e=>pa.exact(e.start,e.soffset,e.finish,e.foffset),jh=e=>e.match({domRange:n=>re.fromDom(n.startContainer),relative:(n,o)=>Zs.getStart(n),exact:(n,o,r,c)=>n}),xg=pa.domRange,qh=pa.relative,Gh=pa.exact,xS=e=>{const n=jh(e);return Hl(n)},Pm=Nm.create,Kd={domRange:xg,relative:qh,exact:Gh,exactFromRange:mi,getWin:xS,range:Pm},qy=(e,n,o)=>{var r;return P.from((r=e.caretPositionFromPoint)===null||r===void 0?void 0:r.call(e,n,o)).bind(c=>{if(c.offsetNode===null)return P.none();const u=e.createRange();return u.setStart(c.offsetNode,c.offset),u.collapse(),P.some(u)})},I_=(e,n,o)=>{var r;return P.from((r=e.caretRangeFromPoint)===null||r===void 0?void 0:r.call(e,n,o))},ba=(e,n,o)=>e.caretPositionFromPoint?qy(e,n,o):e.caretRangeFromPoint?I_(e,n,o):P.none(),sa=(e,n,o)=>{const r=e.document;return ba(r,n,o).map(c=>Nm.create(re.fromDom(c.startContainer),c.startOffset,re.fromDom(c.endContainer),c.endOffset))},dd=(e,n)=>{const o=Oo(e);return o==="input"?Zs.after(e):be(["br","img"],o)?n===0?Zs.before(e):Zs.after(e):Zs.on(e,n)},Kh=(e,n)=>{const o=e.fold(Zs.before,dd,Zs.after),r=n.fold(Zs.before,dd,Zs.after);return Kd.relative(o,r)},pb=(e,n,o,r)=>{const c=dd(e,n),u=dd(o,r);return Kd.relative(c,u)},Uc=e=>e.match({domRange:n=>{const o=re.fromDom(n.startContainer),r=re.fromDom(n.endContainer);return pb(o,n.startOffset,r,n.endOffset)},relative:Kh,exact:pb}),Gy=e=>{const n=Kd.getWin(e).dom,o=(c,u,f,b)=>yf(n,c,u,f,b),r=Uc(e);return pg(n,r).match({ltr:o,rtl:o})},Df=(e,n,o)=>sa(e,n,o),bb=e=>{const n=e===void 0?window:e;return Do().browser.isFirefox()?P.none():P.from(n.visualViewport)},Ji=(e,n,o,r)=>({x:e,y:n,width:o,height:r,right:e+o,bottom:n+r}),vb=e=>{const n=e===void 0?window:e,o=n.document,r=b1(re.fromDom(o));return bb(n).fold(()=>{const c=n.document.documentElement,u=c.clientWidth,f=c.clientHeight;return Ji(r.left,r.top,u,f)},c=>Ji(Math.max(c.pageLeft,r.left),Math.max(c.pageTop,r.top),c.width,c.height))};class Qs{constructor(n,o){this.node=n,this.rootNode=o,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(n){return this.node=this.findSibling(this.node,"firstChild","nextSibling",n),this.node}prev(n){return this.node=this.findSibling(this.node,"lastChild","previousSibling",n),this.node}prev2(n){return this.node=this.findPreviousNode(this.node,n),this.node}findSibling(n,o,r,c){if(n){if(!c&&n[o])return n[o];if(n!==this.rootNode){let u=n[r];if(u)return u;for(let f=n.parentNode;f&&f!==this.rootNode;f=f.parentNode)if(u=f[r],u)return u}}}findPreviousNode(n,o){if(n){const r=n.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!o){for(let u=r.lastChild;u;u=u.lastChild)if(!u.lastChild)return u}return r}const c=n.parentNode;if(c&&c!==this.rootNode)return c}}}const Yh=/^[ \t\r\n]*$/,$m=e=>Yh.test(e),L_=e=>{for(const n of e)if(!qa(n))return!1;return!0},ES=e=>" \f	\v".indexOf(e)!==-1,yb=e=>e===`
`||e==="\r",H_=(e,n)=>n<e.length&&n>=0?yb(e[n]):!1,Ky=(e,n=4,o=!0,r=!0)=>{const c=ri(" ",n),u=e.replace(/\t/g,c);return st(u,(b,v)=>ES(v)||v===ir?b.pcIsSpace||b.str===""&&o||b.str.length===u.length-1&&r||H_(u,b.str.length+1)?{pcIsSpace:!1,str:b.str+ir}:{pcIsSpace:!0,str:b.str+" "}:{pcIsSpace:yb(v),str:b.str+v},{pcIsSpace:!1,str:""}).str},Im=e=>n=>!!n&&n.nodeType===e,Yy=e=>!!e&&!Object.getPrototypeOf(e),Cn=Im(1),dr=e=>Cn(e)&&Ll(re.fromDom(e)),Xh=e=>Cn(e)&&e.namespaceURI==="http://www.w3.org/2000/svg",Eg=e=>{const n=e.toLowerCase();return o=>Fe(o)&&o.nodeName.toLowerCase()===n},Xa=e=>{const n=e.map(o=>o.toLowerCase());return o=>{if(o&&o.nodeName){const r=o.nodeName.toLowerCase();return be(n,r)}return!1}},Jh=(e,n)=>{const o=n.toLowerCase().split(" ");return r=>{if(Cn(r)){const c=r.ownerDocument.defaultView;if(c)for(let u=0;u<o.length;u++){const f=c.getComputedStyle(r,null);if((f?f.getPropertyValue(e):null)===o[u])return!0}}return!1}},z_=e=>n=>Cn(n)&&n.hasAttribute(e),Tg=e=>Cn(e)&&e.hasAttribute("data-mce-bogus"),TS=e=>Cn(e)&&e.getAttribute("data-mce-bogus")==="all",Yd=e=>Cn(e)&&e.tagName==="TABLE",Of=e=>n=>!!(dr(n)&&(n.contentEditable===e||n.getAttribute("data-mce-contenteditable")===e)),Xy=Xa(["textarea","input"]),kt=Im(3),Jy=Im(4),Qy=Im(7),$r=Im(8),Io=Im(9),Ag=Im(11),xr=Eg("br"),e2=Eg("img"),Ou=Eg("a"),fi=Of("true"),mr=Of("false"),Cb=e=>dr(e)&&e.isContentEditable&&Fe(e.parentElement)&&!e.parentElement.isContentEditable,Xd=Xa(["td","th"]),t2=Xa(["td","th","caption"]),wb=Eg("template"),Ru=Xa(["video","audio","object","embed"]),n2=Eg("li"),Sb=Eg("details"),o2=Eg("summary"),AS={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},V_=(e,n,o)=>{const r=re.fromDom(n),c=re.fromDom(e),u=o.getWhitespaceElements();return Zt(c,b=>to(u,Oo(b)),Te(Yo,r))},s2=e=>Cn(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),_S=(e,n)=>Cn(e)&&to(n.getNonEmptyElements(),e.nodeName),xb=z_("data-mce-bookmark"),U_=e=>Di(re.fromDom(e)).exists(n=>!Cl(n)),W_=(e,n,o)=>$m(e.data)&&!V_(e,n,o),r2=(e,n,o,r)=>kt(e)&&!W_(e,n,o)&&(!r.includeZwsp||!L_(e.data)),a2=(e,n,o,r)=>he(r.isContent)&&r.isContent(n)||_S(n,e)||xb(n)||s2(n)||r2(n,o,e,r)||mr(n)||fi(n)&&U_(n),Zl=(e,n,o)=>{const r={...AS,...o};if(r.checkRootAsContent&&a2(e,n,n,r))return!1;let c=n.firstChild,u=0;if(!c)return!0;const f=new Qs(c,n);do{if(r.skipBogus&&Cn(c)){const b=c.getAttribute("data-mce-bogus");if(b){c=f.next(b==="all");continue}}if($r(c)){c=f.next(!0);continue}if(xr(c)){u++,c=f.next();continue}if(a2(e,c,n,r))return!1;c=f.next()}while(c);return u<=1},gi=(e,n,o)=>Zl(e,n.dom,{checkRootAsContent:!0,...o}),Sl=(e,n,o)=>a2(e,n,n,{includeZwsp:AS.includeZwsp,...o}),Xn=e=>{const n=e.toLowerCase();return n==="svg"?"svg":n==="math"?"math":"html"},hi=e=>Xn(e)!=="html",_g=e=>hi(e.nodeName),kS=e=>Xn(e.nodeName),Z_=["svg","math"],Eb=()=>{const e=rs(),n=()=>e.get().map(kS).getOr("html");return{track:c=>(_g(c)?e.set(c):e.get().exists(u=>!u.contains(c))&&e.clear(),n()),current:n,reset:()=>{e.clear()}}},x1="data-mce-block",kg=e=>tt(dn(e),n=>!/[A-Z]/.test(n)),Tb=e=>Oe(kg(e),n=>{const o=CSS.escape(n);return`${o}:`+Oe(Z_,r=>`not(${r} ${o})`).join(":")}).join(","),Rf=(e,n)=>Fe(n.querySelector(e))?(n.setAttribute(x1,"true"),n.getAttribute("data-mce-selected")==="inline-boundary"&&n.removeAttribute("data-mce-selected"),!0):(n.removeAttribute(x1),!1),c2=(e,n)=>{const o=Tb(e.getTransparentElements()),r=Tb(e.getBlockElements());return tt(n.querySelectorAll(o),c=>Rf(r,c))},DS=(e,n,o)=>{var r;const c=o?"lastChild":"firstChild";for(let u=n[c];u;u=u[c])if(Zl(e,u,{checkRootAsContent:!0})){(r=u.parentNode)===null||r===void 0||r.removeChild(u);return}},Mr=(e,n,o)=>{const r=document.createRange(),c=n.parentNode;if(c){r.setStartBefore(n),r.setEndBefore(o);const u=r.extractContents();DS(e,u,!0),r.setStartAfter(o),r.setEndAfter(n);const f=r.extractContents();DS(e,f,!1),Zl(e,u,{checkRootAsContent:!0})||c.insertBefore(u,n),Zl(e,o,{checkRootAsContent:!0})||c.insertBefore(o,n),Zl(e,f,{checkRootAsContent:!0})||c.insertBefore(f,n),c.removeChild(n)}},Mu=(e,n,o)=>{const r=e.getBlockElements(),c=re.fromDom(n),u=b=>Oo(b)in r,f=b=>Yo(b,c);me(Zd(o),b=>{ku(b,u,f).each(v=>{const x=V(b,D=>u(D)&&!e.isValidChild(Oo(v),Oo(D)));if(x.length>0){const D=Di(v);me(x,B=>{ku(B,u,f).each(N=>{Mr(e,N.dom,B.dom)})}),D.each(B=>c2(e,B.dom))}})})},Ri=(e,n,o)=>{me([...o,...yt(e,n)?[n]:[]],r=>me(ot(re.fromDom(r),r.nodeName.toLowerCase()),c=>{xl(e,c.dom)&&li(c)}))},Mf=(e,n)=>{const o=c2(e,n);Mu(e,n,o),Ri(e,n,o)},pi=(e,n)=>{if(Qh(e,n)){const o=Tb(e.getBlockElements());Rf(o,n)}},Dg=(e,n,o)=>{const r=u=>Yo(u,re.fromDom(n)),c=ic(re.fromDom(o),r);fn(c,c.length-2).filter(Tr).fold(()=>Mf(e,n),u=>Mf(e,u.dom))},Ia=e=>e.hasAttribute(x1),Ac=(e,n)=>to(e.getTransparentElements(),n),Qh=(e,n)=>Cn(n)&&Ac(e,n.nodeName),yt=(e,n)=>Qh(e,n)&&Ia(n),xl=(e,n)=>Qh(e,n)&&!Ia(n),E1=(e,n)=>n.type===1&&Ac(e,n.name)&&ie(n.attr(x1)),ka=Do().browser,jl=e=>rn(e,Tr),ql=e=>ka.isFirefox()&&Oo(e)==="table"?jl(wr(e)).filter(n=>Oo(n)==="caption").bind(n=>jl(Ea(n)).map(o=>{const r=o.dom.offsetTop,c=n.dom.offsetTop,u=n.dom.offsetHeight;return r<=c?-u:0})).getOr(0):0,OS=(e,n)=>e.children&&be(e.children,n),Lm=(e,n,o)=>{let r=0,c=0;const u=e.ownerDocument;if(o=o||e,n){if(o===e&&n.getBoundingClientRect&&Pr(re.fromDom(e),"position")==="static"){const b=n.getBoundingClientRect();return r=b.left+(u.documentElement.scrollLeft||e.scrollLeft)-u.documentElement.clientLeft,c=b.top+(u.documentElement.scrollTop||e.scrollTop)-u.documentElement.clientTop,{x:r,y:c}}let f=n;for(;f&&f!==o&&f.nodeType&&!OS(f,o);){const b=f;r+=b.offsetLeft||0,c+=b.offsetTop||0,f=b.offsetParent}for(f=n.parentNode;f&&f!==o&&f.nodeType&&!OS(f,o);)r-=f.scrollLeft||0,c-=f.scrollTop||0,f=f.parentNode;c+=ql(re.fromDom(n))}return{x:r,y:c}},RS=(e,n)=>{const o=n.crossOrigin;return n.contentCssCors?"anonymous":he(o)?o(e):void 0},Mi=(e,n={})=>{let o=0;const r={},c=re.fromDom(e),u=hl(c),f=_e=>{n.referrerPolicy=_e},b=_e=>{n.contentCssCors=_e},v=_e=>{n.crossOrigin=_e},x=_e=>{ds(l1(c),_e)},D=_e=>{const Pe=l1(c);Du(Pe,"#"+_e).each(Ws)},B=_e=>Ss(r,_e).getOrThunk(()=>({id:"mce-u"+o++,passed:[],failed:[],count:0})),N=_e=>new Promise((Pe,Ze)=>{let ht;const Vt=Mt._addCacheSuffix(_e),Ot=B(Vt);r[Vt]=Ot,Ot.count++;const lt=(kn,io)=>{me(kn,qt),Ot.status=io,Ot.passed=[],Ot.failed=[],ht&&(ht.onload=null,ht.onerror=null,ht=null)},Be=()=>lt(Ot.passed,2),oe=()=>lt(Ot.failed,3);if(Pe&&Ot.passed.push(Pe),Ze&&Ot.failed.push(Ze),Ot.status===1)return;if(Ot.status===2){Be();return}if(Ot.status===3){oe();return}Ot.status=1;const je=re.fromTag("link",u.dom);Ka(je,{rel:"stylesheet",type:"text/css",id:Ot.id});const Dt=RS(_e,n);Dt!==void 0&&Cr(je,"crossOrigin",Dt),n.referrerPolicy&&Cr(je,"referrerpolicy",n.referrerPolicy),ht=je.dom,ht.onload=Be,ht.onerror=oe,x(je),Cr(je,"href",Vt)}),H=(_e,Pe)=>{const Ze=B(_e);r[_e]=Ze,Ze.count++;const ht=re.fromTag("style",u.dom);Ka(ht,{rel:"stylesheet",type:"text/css",id:Ze.id,"data-mce-key":_e}),ht.dom.innerHTML=Pe,x(ht)},te=_e=>Promise.allSettled(Oe(_e,Ze=>N(Ze).then(bt(Ze)))).then(Ze=>{const ht=at(Ze,Vt=>Vt.status==="fulfilled");return ht.fail.length>0?Promise.reject(Oe(ht.fail,Vt=>Vt.reason)):Oe(ht.pass,Vt=>Vt.value)}),Q=_e=>{const Pe=Mt._addCacheSuffix(_e);Ss(r,Pe).each(Ze=>{--Ze.count===0&&(delete r[Pe],D(Ze.id))})};return{load:N,loadRawCss:H,loadAll:te,unload:Q,unloadRawCss:_e=>{Ss(r,_e).each(Pe=>{--Pe.count===0&&(delete r[_e],D(Pe.id))})},unloadAll:_e=>{me(_e,Pe=>{Q(Pe)})},_setReferrerPolicy:f,_setContentCssCors:b,_setCrossOrigin:v}},Bu=(()=>{const e=new WeakMap;return{forElement:(o,r)=>{const u=Aa(o).dom;return P.from(e.get(u)).getOrThunk(()=>{const f=Mi(u,r);return e.set(u,f),f})}}})(),T1=e=>e.nodeName.toLowerCase()==="span",Lr=(e,n)=>Fe(e)&&(Sl(n,e)||n.isInline(e.nodeName.toLowerCase())),MS=(e,n,o)=>{const r=new Qs(e,n).prev(!1),c=new Qs(e,n).next(!1),u=Kn(r)||Lr(r,o),f=Kn(c)||Lr(c,o);return u&&f},Ab=e=>T1(e)&&e.getAttribute("data-mce-type")==="bookmark",md=(e,n,o)=>kt(e)&&e.data.length>0&&MS(e,n,o),i2=e=>Cn(e)?e.childNodes.length>0:!1,Qi=e=>Ag(e)||Io(e),l2=(e,n,o,r)=>{var c;const u=r||n;if(Cn(n)&&Ab(n))return n;const f=n.childNodes;for(let b=f.length-1;b>=0;b--)l2(e,f[b],o,u);if(Cn(n)){const b=n.childNodes;b.length===1&&Ab(b[0])&&((c=n.parentNode)===null||c===void 0||c.insertBefore(b[0],n))}return!Qi(n)&&!Sl(o,n)&&!i2(n)&&!md(n,u,o)&&e.remove(n),n},We=Mt.makeMap,bi=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ep=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Br=/[<>&\"\']/g,El=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,mc={128:"",130:"",131:"",132:"",133:"",134:"",135:"",136:"",137:"",138:"",139:"",140:"",142:"",145:"",146:"",147:"",148:"",149:"",150:"",151:"",152:"",153:"",154:"",155:"",156:"",158:"",159:""},$s={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},BS={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Bf=e=>{const n=re.fromTag("div").dom;return n.innerHTML=e,n.textContent||n.innerText||e},u2=(e,n)=>{const o={};if(e){const r=e.split(",");n=n||10;for(let c=0;c<r.length;c+=2){const u=String.fromCharCode(parseInt(r[c],n));if(!$s[u]){const f="&"+r[c+1]+";";o[u]=f,o[f]=u}}return o}else return},Ff=u2("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),tp=(e,n)=>e.replace(n?bi:ep,o=>$s[o]||o),FS=e=>(""+e).replace(Br,n=>$s[n]||n),NS=(e,n)=>e.replace(n?bi:ep,o=>o.length>1?"&#"+((o.charCodeAt(0)-55296)*1024+(o.charCodeAt(1)-56320)+65536)+";":$s[o]||"&#"+o.charCodeAt(0)+";"),Hm=(e,n,o)=>{const r=o||Ff;return e.replace(n?bi:ep,c=>$s[c]||r[c]||c)},Og={encodeRaw:tp,encodeAllRaw:FS,encodeNumeric:NS,encodeNamed:Hm,getEncodeFunc:(e,n)=>{const o=u2(n)||Ff,r=(f,b)=>f.replace(b?bi:ep,v=>$s[v]!==void 0?$s[v]:o[v]!==void 0?o[v]:v.length>1?"&#"+((v.charCodeAt(0)-55296)*1024+(v.charCodeAt(1)-56320)+65536)+";":"&#"+v.charCodeAt(0)+";"),c=(f,b)=>Hm(f,b,o),u=We(e.replace(/\+/g,","));return u.named&&u.numeric?r:u.named?n?c:Hm:u.numeric?NS:tp},decode:e=>e.replace(El,(n,o)=>o?(o.charAt(0).toLowerCase()==="x"?o=parseInt(o.substr(1),16):o=parseInt(o,10),o>65535?(o-=65536,String.fromCharCode(55296+(o>>10),56320+(o&1023))):mc[o]||String.fromCharCode(o)):BS[n]||Ff[n]||Bf(n))},fc=(e,n)=>(e=Mt.trim(e),e?e.split(n||" "):[]),Ja=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),zm=e=>en(e)&&e.source&&Object.prototype.toString.call(e)==="[object RegExp]",Vm=e=>{const n=o=>Qe(o)?Oe(o,n):zm(o)?new RegExp(o.source,o.flags):en(o)?ac(o,n):o;return n(e)},Rg=e=>{const n=/^(~)?(.+)$/;return eo(fc(e,","),o=>{const r=n.exec(o);if(r){const u=r[1]==="~"?"span":"div",f=r[2];return[{cloneName:u,name:f}]}else return[]})},np=e=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",...e!=="html4"?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],...e!=="html5-strict"?["xml:lang"]:[]]),vi=e=>{let n,o;n="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",o="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"&&(n+=" article aside details dialog figure main header footer hgroup section nav "+"a ins del canvas map",o+=" audio canvas command data datalist mark meter output picture progress template time wbr video ruby bdi keygen svg"),e!=="html5-strict"&&(o=[o,"acronym applet basefont big font strike tt"].join(" "),n=[n,"center dir isindex noframes"].join(" "));const r=[n,o].join(" ");return{blockContent:n,phrasingContent:o,flowContent:r}},Nf=e=>{const{blockContent:n,phrasingContent:o,flowContent:r}=vi(e),c=u=>Object.freeze(u.split(" "));return Object.freeze({blockContent:c(n),phrasingContent:c(o),flowContent:c(r)})},Da={html4:Ba(()=>Nf("html4")),html5:Ba(()=>Nf("html5")),"html5-strict":Ba(()=>Nf("html5-strict"))},_b=(e,n)=>{const{blockContent:o,phrasingContent:r,flowContent:c}=Da[e]();return n==="blocks"?P.some(o):n==="phrasing"?P.some(r):n==="flow"?P.some(c):P.none()},Fu=e=>{const n=np(e),{phrasingContent:o,flowContent:r}=vi(e),c={},u=(v,x,D)=>{c[v]={attributes:Nt(x,bt({})),attributesOrder:x,children:Nt(D,bt({}))}},f=(v,x="",D="")=>{const B=fc(D),N=fc(v);let H=N.length;const te=[...n,...fc(x)];for(;H--;)u(N[H],te.slice(),B)},b=(v,x)=>{const D=fc(v),B=fc(x);let N=D.length;for(;N--;){const H=c[D[N]];for(let te=0,Q=B.length;te<Q;te++)H.attributes[B[te]]={},H.attributesOrder.push(B[te])}};return e!=="html5-strict"&&(me(fc("acronym applet basefont big font strike tt"),D=>{f(D,"",o)}),me(fc("center dir isindex noframes"),D=>{f(D,"",r)})),f("html","manifest","head body"),f("head","","base command link meta noscript script style title"),f("title hr noscript br"),f("base","href target"),f("link","href rel media hreflang type sizes hreflang"),f("meta","name http-equiv content charset"),f("style","media type scoped"),f("script","src async defer type charset"),f("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",r),f("dd div","",r),f("address dt caption","",e==="html4"?o:r),f("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",o),f("blockquote","cite",r),f("ol","reversed start type","li"),f("ul","","li"),f("li","value",r),f("dl","","dt dd"),f("a","href target rel media hreflang type",e==="html4"?o:r),f("q","cite",o),f("ins del","cite datetime",r),f("img","src sizes srcset alt usemap ismap width height"),f("iframe","src name width height",r),f("embed","src type width height"),f("object","data type typemustmatch name usemap form width height",[r,"param"].join(" ")),f("param","name value"),f("map","name",[r,"area"].join(" ")),f("area","alt coords shape href target rel media hreflang type"),f("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),f("colgroup","span","col"),f("col","span"),f("tbody thead tfoot","","tr"),f("tr","","td th"),f("td","colspan rowspan headers",r),f("th","colspan rowspan headers scope abbr",r),f("form","accept-charset action autocomplete enctype method name novalidate target",r),f("fieldset","disabled form name",[r,"legend"].join(" ")),f("label","form for",o),f("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),f("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?r:o),f("select","disabled form multiple name required size","option optgroup"),f("optgroup","disabled label","option"),f("option","disabled label selected value"),f("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),f("menu","type label",[r,"li"].join(" ")),f("noscript","",r),e!=="html4"&&(f("wbr"),f("ruby","",[o,"rt rp"].join(" ")),f("figcaption","",r),f("mark rt rp bdi","",o),f("summary","",[o,"h1 h2 h3 h4 h5 h6"].join(" ")),f("canvas","width height",r),f("data","value",o),f("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[r,"track source"].join(" ")),f("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[r,"track source"].join(" ")),f("picture","","img source"),f("source","src srcset type media sizes"),f("track","kind src srclang label default"),f("datalist","",[o,"option"].join(" ")),f("article section nav aside main header footer","",r),f("hgroup","","h1 h2 h3 h4 h5 h6"),f("figure","",[r,"figcaption"].join(" ")),f("time","datetime",o),f("dialog","open",r),f("command","type label icon disabled checked radiogroup command"),f("output","for form name",o),f("progress","value max",o),f("meter","value min max low high optimum",o),f("details","open",[r,"summary"].join(" ")),f("keygen","autofocus challenge disabled form keytype name"),u("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),e!=="html5-strict"&&(b("script","language xml:space"),b("style","xml:space"),b("object","declare classid code codebase codetype archive standby align border hspace vspace"),b("embed","align name hspace vspace"),b("param","valuetype type"),b("a","charset name rev shape coords"),b("br","clear"),b("applet","codebase archive code object alt name width height align hspace vspace"),b("img","name longdesc align border hspace vspace"),b("iframe","longdesc frameborder marginwidth marginheight scrolling align"),b("font basefont","size color face"),b("input","usemap align"),b("select"),b("textarea"),b("h1 h2 h3 h4 h5 h6 div p legend caption","align"),b("ul","type compact"),b("li","type"),b("ol dl menu dir","compact"),b("pre","width xml:space"),b("hr","align noshade size width"),b("isindex","prompt"),b("table","summary width frame rules cellspacing cellpadding align bgcolor"),b("col","width align char charoff valign"),b("colgroup","width align char charoff valign"),b("thead","align char charoff valign"),b("tr","align char charoff valign bgcolor"),b("th","axis align char charoff valign nowrap bgcolor width height"),b("form","accept"),b("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),b("tfoot","align char charoff valign"),b("tbody","align char charoff valign"),b("area","nohref"),b("body","background bgcolor text link vlink alink")),e!=="html4"&&(b("input button select textarea","autofocus"),b("input textarea","placeholder"),b("a","download"),b("link script img","crossorigin"),b("img","loading"),b("iframe","sandbox seamless allow allowfullscreen loading referrerpolicy")),e!=="html4"&&me([c.video,c.audio],v=>{delete v.children.audio,delete v.children.video}),me(fc("a form meter progress dfn"),v=>{c[v]&&delete c[v].children[v]}),delete c.caption.children.table,delete c.script,c},Nu=e=>e==="-"?"remove":"add",kb=e=>{const n=/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/;return P.from(n.exec(e)).map(o=>({preset:o[1]==="@",name:o[2]}))},La=e=>{const n=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return eo(fc(e,","),o=>{const r=n.exec(o);if(r){const c=r[1],u=c?Nu(c):"replace",f=r[2],b=eo(fc(r[3],"|"),v=>kb(v).toArray());return[{operation:u,name:f,validChildren:b}]}else return[]})},op=(e,n)=>{const o=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,r=/[*?+]/,{attributes:c,attributesOrder:u}=n;return me(fc(e,"|"),f=>{const b=o.exec(f);if(b){const v={},x=b[1],D=b[2].replace(/[\\:]:/g,":"),B=b[3],N=b[4];if(x==="!"&&(n.attributesRequired=n.attributesRequired||[],n.attributesRequired.push(D),v.required=!0),x==="-"){delete c[D],u.splice(Mt.inArray(u,D),1);return}if(B&&(B==="="?(n.attributesDefault=n.attributesDefault||[],n.attributesDefault.push({name:D,value:N}),v.defaultValue=N):B==="~"?(n.attributesForced=n.attributesForced||[],n.attributesForced.push({name:D,value:N}),v.forcedValue=N):B==="<"&&(v.validValues=Mt.makeMap(N,"?"))),r.test(D)){const H=v;n.attributePatterns=n.attributePatterns||[],H.pattern=Ja(D),n.attributePatterns.push(H)}else c[D]||u.push(D),c[D]=v}})},Um=(e,n)=>{xo(e.attributes,(o,r)=>{n.attributes[r]=o}),n.attributesOrder.push(...e.attributesOrder)},Mg=(e,n)=>{const o=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return eo(fc(n,","),r=>{const c=o.exec(r);if(c){const u=c[1],f=c[2],b=c[3],v=c[4],x=c[5],D={attributes:{},attributesOrder:[]};if(e.each(B=>Um(B,D)),u==="#"?D.paddEmpty=!0:u==="-"&&(D.removeEmpty=!0),v==="!"&&(D.removeEmptyAttrs=!0),x&&op(x,D),b&&(D.outputName=f),f==="@")if(e.isNone())e=P.some(D);else return[];return[b?{name:f,element:D,aliasName:b}:{name:f,element:D}]}else return[]})},Jd={},_1=Mt.makeMap,Tl=Mt.each,Bg=Mt.extend,PS=Mt.explode,jr=(e,n={})=>{const o=_1(e," ",_1(e.toUpperCase()," "));return Bg(o,n)},$S=e=>jr("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),Qd=(e,n)=>{if(e){const o={};return ie(e)&&(e={"*":e}),Tl(e,(r,c)=>{o[c]=o[c.toUpperCase()]=n==="map"?_1(r,/[, ]/):PS(r,/[, ]/)}),o}else return},Pu=(e={})=>{var n;const o={},r={};let c=[];const u={},f={},b=(Un,ps,la)=>{const bc=e[Un];if(bc)return _1(bc,/[, ]/,_1(bc.toUpperCase(),/[, ]/));{let Rc=Jd[Un];return Rc||(Rc=jr(ps,la),Jd[Un]=Rc),Rc}},v=(n=e.schema)!==null&&n!==void 0?n:"html5",x=Fu(v);e.verify_html===!1&&(e.valid_elements="*[*]");const D=Qd(e.valid_styles),B=Qd(e.invalid_styles,"map"),N=Qd(e.valid_classes,"map"),H=b("whitespace_elements","pre script noscript style textarea video audio iframe object code"),te=b("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),Q=b("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),Y=b("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),Ae="td th iframe video audio object script code",_e=b("non_empty_elements",Ae+" pre svg textarea summary",Q),Pe=b("move_caret_before_on_enter_elements",Ae+" table",Q),Ze="h1 h2 h3 h4 h5 h6",ht=b("text_block_elements",Ze+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),Vt=b("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing colgroup col",ht),Ot=b("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),lt=b("transparent_elements","a ins del canvas map"),Be=b("wrap_block_elements","pre "+Ze);Tl("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),Un=>{f[Un]=new RegExp("</"+Un+"[^>]*>","gi")});const oe=Un=>{const ps=P.from(o["@"]),la=/[*?+]/;me(Mg(ps,Un??""),({name:bc,element:Rc,aliasName:sc})=>{if(sc&&(o[sc]=Rc),la.test(bc)){const Kr=Rc;Kr.pattern=Ja(bc),c.push(Kr)}else o[bc]=Rc})},je=Un=>{c=[],me(dn(o),ps=>{delete o[ps]}),oe(Un)},Dt=(Un,ps)=>{var la,bc;delete Jd.text_block_elements,delete Jd.block_elements;const Rc=ps.extends?!Rl(ps.extends):!1,sc=ps.extends;if(r[Un]=sc?r[sc]:{},u[Un]=sc??Un,_e[Un.toUpperCase()]={},_e[Un]={},Rc||(Vt[Un.toUpperCase()]={},Vt[Un]={}),sc&&!o[Un]&&o[sc]){const Kr=Vm(o[sc]);delete Kr.removeEmptyAttrs,delete Kr.removeEmpty,o[Un]=Kr}else o[Un]={attributesOrder:[],attributes:{}};if(Qe(ps.attributes)){const Kr=pu=>{Yr.attributesOrder.push(pu),Yr.attributes[pu]={}},Yr=(la=o[Un])!==null&&la!==void 0?la:{};delete Yr.attributesDefault,delete Yr.attributesForced,delete Yr.attributePatterns,delete Yr.attributesRequired,Yr.attributesOrder=[],Yr.attributes={},me(ps.attributes,pu=>{const ig=np(v);kb(pu).each(({preset:Qp,name:kh})=>{Qp?kh==="global"&&me(ig,Kr):Kr(kh)})}),o[Un]=Yr}if(It(ps.padEmpty)){const Kr=(bc=o[Un])!==null&&bc!==void 0?bc:{};Kr.paddEmpty=ps.padEmpty,o[Un]=Kr}if(Qe(ps.children)){const Kr={},Yr=ig=>{Kr[ig]={}},pu=ig=>{_b(v,ig).each(Qp=>{me(Qp,Yr)})};me(ps.children,ig=>{kb(ig).each(({preset:Qp,name:kh})=>{Qp?pu(kh):Yr(kh)})}),r[Un]=Kr}sc&&xo(r,(Kr,Yr)=>{Kr[sc]&&(r[Yr]=Kr=Bg({},r[Yr]),Kr[Un]=Kr[sc])})},kn=Un=>{me(Rg(Un??""),({name:ps,cloneName:la})=>{Dt(ps,{extends:la})})},io=Un=>{en(Un)?xo(Un,(ps,la)=>Dt(la,ps)):ie(Un)&&kn(Un)},zo=Un=>{me(La(Un??""),({operation:ps,name:la,validChildren:bc})=>{const Rc=ps==="replace"?{"#comment":{}}:r[la],sc=Yr=>{ps==="remove"?delete Rc[Yr]:Rc[Yr]={}},Kr=Yr=>{_b(v,Yr).each(pu=>{me(pu,sc)})};me(bc,({preset:Yr,name:pu})=>{Yr?Kr(pu):sc(pu)}),r[la]=Rc})},is=Un=>{const ps=o[Un];if(ps)return ps;let la=c.length;for(;la--;){const bc=c[la];if(bc.pattern.test(Un))return bc}},kr=()=>{e.valid_elements?(je(e.valid_elements),Tl(x,(Un,ps)=>{r[ps]=Un.children})):(Tl(x,(Un,ps)=>{o[ps]={attributes:Un.attributes,attributesOrder:Un.attributesOrder},r[ps]=Un.children}),Tl(fc("strong/b em/i"),Un=>{const ps=fc(Un,"/");o[ps[1]].outputName=ps[0]}),Tl(Ot,(Un,ps)=>{o[ps]&&(e.padd_empty_block_inline_children&&(o[ps].paddInEmptyBlock=!0),o[ps].removeEmpty=!0)}),Tl(fc("ol ul blockquote a table tbody"),Un=>{o[Un]&&(o[Un].removeEmpty=!0)}),Tl(fc("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),Un=>{o[Un]&&(o[Un].paddEmpty=!0)}),Tl(fc("span"),Un=>{o[Un].removeEmptyAttrs=!0})),delete o.svg,io(e.custom_elements),zo(e.valid_children),oe(e.extended_valid_elements),zo("+ol[ul|ol],+ul[ul|ol]"),Tl({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(Un,ps)=>{o[ps]&&(o[ps].parentsRequired=fc(Un))}),e.invalid_elements&&Tl(PS(e.invalid_elements),Un=>{o[Un]&&delete o[Un]}),is("span")||oe("span[!data-mce-type|*]")},Dr=bt(D),Oc=bt(B),$t=bt(N),On=bt(Y),hs=bt(Vt),Ps=bt(ht),An=bt(Ot),Ht=bt(Object.seal(Q)),on=bt(te),Jn=bt(_e),lo=bt(Pe),Us=bt(H),ar=bt(lt),Id=bt(Be),si=bt(Object.seal(f)),gf=(Un,ps)=>{const la=r[Un.toLowerCase()];return!!(la&&la[ps.toLowerCase()])},Dm=(Un,ps)=>{const la=is(Un);if(la)if(ps){if(la.attributes[ps])return!0;const bc=la.attributePatterns;if(bc){let Rc=bc.length;for(;Rc--;)if(bc[Rc].pattern.test(ps))return!0}}else return!0;return!1},Rl=Un=>to(hs(),Un),hu=Un=>!jn(Un,"#")&&Dm(Un)&&!Rl(Un),hf=Un=>to(Id(),Un)||hu(Un),Ry=bt(u);return kr(),{type:v,children:r,elements:o,getValidStyles:Dr,getValidClasses:$t,getBlockElements:hs,getInvalidStyles:Oc,getVoidElements:Ht,getTextBlockElements:Ps,getTextInlineElements:An,getBoolAttrs:On,getElementRule:is,getSelfClosingElements:on,getNonEmptyElements:Jn,getMoveCaretBeforeOnEnterElements:lo,getWhitespaceElements:Us,getTransparentElements:ar,getSpecialElements:si,isValidChild:gf,isValid:Dm,isBlock:Rl,isInline:hu,isWrapper:hf,getCustomElements:Ry,addValidElements:oe,setValidElements:je,addCustomElements:io,addValidChildren:zo}},d2=e=>({value:Fg(e)}),Fg=e=>Vi(e,"#").toUpperCase(),el=e=>{const n=e.toString(16);return(n.length===1?"0"+n:n).toUpperCase()},Ng=e=>{const n=el(e.red)+el(e.green)+el(e.blue);return d2(n)},Pg=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,m2=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,Db=(e,n,o,r)=>({red:e,green:n,blue:o,alpha:r}),Ob=(e,n,o,r)=>{const c=parseInt(e,10),u=parseInt(n,10),f=parseInt(o,10),b=parseFloat(r);return Db(c,u,f,b)},Rb=e=>Pg.test(e)?"rgb":m2.test(e)?"rgba":"other",f2=e=>{const n=Pg.exec(e);if(n!==null)return P.some(Ob(n[1],n[2],n[3],"1"));const o=m2.exec(e);return o!==null?P.some(Ob(o[1],o[2],o[3],o[4])):P.none()},IS=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,$g=e=>f2(e).map(Ng).map(n=>"#"+n.value).getOr(e),Ig=(e={},n)=>{const o=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,c=/\s+$/,u={};let f,b;const v=ja;n&&(f=n.getValidStyles(),b=n.getInvalidStyles());const x=(`\\" \\' \\; \\: ; : `+v).split(" ");for(let B=0;B<x.length;B++)u[x[B]]=v+B,u[v+B]=x[B];const D={parse:B=>{const N={};let H=!1;const te=e.url_converter,Q=e.url_converter_scope||D,Y=(lt,Be,oe)=>{const je=N[lt+"-top"+Be];if(!je)return;const Dt=N[lt+"-right"+Be];if(!Dt)return;const kn=N[lt+"-bottom"+Be];if(!kn)return;const io=N[lt+"-left"+Be];if(!io)return;const zo=[je,Dt,kn,io];let is=zo.length-1;for(;is--&&zo[is]===zo[is+1];);is>-1&&oe||(N[lt+Be]=is===-1?zo[0]:zo.join(" "),delete N[lt+"-top"+Be],delete N[lt+"-right"+Be],delete N[lt+"-bottom"+Be],delete N[lt+"-left"+Be])},Ae=lt=>{const Be=N[lt];if(!Be)return;const oe=Be.indexOf(",")>-1?[Be]:Be.split(" ");let je=oe.length;for(;je--;)if(oe[je]!==oe[0])return!1;return N[lt]=oe[0],!0},_e=(lt,Be,oe,je)=>{Ae(Be)&&Ae(oe)&&Ae(je)&&(N[lt]=N[Be]+" "+N[oe]+" "+N[je],delete N[Be],delete N[oe],delete N[je])},Pe=lt=>(H=!0,u[lt]),Ze=(lt,Be)=>(H&&(lt=lt.replace(/\uFEFF[0-9]/g,oe=>u[oe])),Be||(lt=lt.replace(/\\([\'\";:])/g,"$1")),lt),ht=lt=>String.fromCharCode(parseInt(lt.slice(1),16)),Vt=lt=>lt.replace(/\\[0-9a-f]+/gi,ht),Ot=(lt,Be,oe,je,Dt,kn)=>{if(Dt=Dt||kn,Dt)return Dt=Ze(Dt),"'"+Dt.replace(/\'/g,"\\'")+"'";if(Be=Ze(Be||oe||je||""),!e.allow_script_urls){const io=Be.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(io)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(io))return""}return te&&(Be=te.call(Q,Be,"style")),"url('"+Be.replace(/\'/g,"\\'")+"')"};if(B){B=B.replace(/[\u0000-\u001F]/g,""),B=B.replace(/\\[\"\';:\uFEFF]/g,Pe).replace(/\"[^\"]+\"|\'[^\']+\'/g,Be=>Be.replace(/[;:]/g,Pe));let lt;for(;lt=r.exec(B);){r.lastIndex=lt.index+lt[0].length;let Be=lt[1].replace(c,"").toLowerCase(),oe=lt[2].replace(c,"");if(Be&&oe){if(Be=Vt(Be),oe=Vt(oe),Be.indexOf(v)!==-1||Be.indexOf('"')!==-1||!e.allow_script_urls&&(Be==="behavior"||/expression\s*\(|\/\*|\*\//.test(oe)))continue;Be==="font-weight"&&oe==="700"?oe="bold":(Be==="color"||Be==="background-color")&&(oe=oe.toLowerCase()),Rb(oe)==="rgb"&&f2(oe).each(je=>{oe=$g(IS(je)).toLowerCase()}),oe=oe.replace(o,Ot),N[Be]=H?Ze(oe,!0):oe}}Y("border","",!0),Y("border","-width"),Y("border","-color"),Y("border","-style"),Y("padding",""),Y("margin",""),_e("border","border-width","border-style","border-color"),N.border==="medium none"&&delete N.border,N["border-image"]==="none"&&delete N["border-image"]}return N},serialize:(B,N)=>{let H="";const te=(Y,Ae)=>{const _e=Ae[Y];if(_e)for(let Pe=0,Ze=_e.length;Pe<Ze;Pe++){const ht=_e[Pe],Vt=B[ht];Vt&&(H+=(H.length>0?" ":"")+ht+": "+Vt+";")}},Q=(Y,Ae)=>{if(!b||!Ae)return!0;let _e=b["*"];return _e&&_e[Y]?!1:(_e=b[Ae],!(_e&&_e[Y]))};return N&&f?(te("*",f),te(N,f)):xo(B,(Y,Ae)=>{Y&&Q(Ae,N)&&(H+=(H.length>0?" ":"")+Ae+": "+Y+";")}),H}};return D},fd={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},Wm=e=>e instanceof Event||he(e.initEvent),Lg=e=>e.isDefaultPrevented===ft||e.isDefaultPrevented===Ne,LS=e=>vn(e.preventDefault)||Wm(e),k1=(e,n)=>{const o=n??{};for(const r in e)to(fd,r)||(o[r]=e[r]);return Fe(e.composedPath)&&(o.composedPath=()=>e.composedPath()),Fe(e.getModifierState)&&(o.getModifierState=r=>e.getModifierState(r)),Fe(e.getTargetRanges)&&(o.getTargetRanges=()=>e.getTargetRanges()),o},D1=(e,n,o,r)=>{var c;const u=k1(n,r);return u.type=e,vn(u.target)&&(u.target=(c=u.srcElement)!==null&&c!==void 0?c:o),LS(n)&&(u.preventDefault=()=>{u.defaultPrevented=!0,u.isDefaultPrevented=ft,he(n.preventDefault)&&n.preventDefault()},u.stopPropagation=()=>{u.cancelBubble=!0,u.isPropagationStopped=ft,he(n.stopPropagation)&&n.stopPropagation()},u.stopImmediatePropagation=()=>{u.isImmediatePropagationStopped=ft,u.stopPropagation()},Lg(u)||(u.isDefaultPrevented=u.defaultPrevented===!0?ft:Ne,u.isPropagationStopped=u.cancelBubble===!0?ft:Ne,u.isImmediatePropagationStopped=Ne)),u},HS="mce-data-",zS=/^(?:mouse|contextmenu)|click/,Mb=(e,n,o,r)=>{e.addEventListener(n,o,r||!1)},Hg=(e,n,o,r)=>{e.removeEventListener(n,o,r||!1)},Bb=e=>Fe(e)&&zS.test(e.type),Gl=(e,n)=>{const o=D1(e.type,e,document,n);if(Bb(e)&&Kn(e.pageX)&&!Kn(e.clientX)){const r=o.target.ownerDocument||document,c=r.documentElement,u=r.body,f=o;f.pageX=e.clientX+(c&&c.scrollLeft||u&&u.scrollLeft||0)-(c&&c.clientLeft||u&&u.clientLeft||0),f.pageY=e.clientY+(c&&c.scrollTop||u&&u.scrollTop||0)-(c&&c.clientTop||u&&u.clientTop||0)}return o},VS=(e,n,o)=>{const r=e.document,c={type:"ready"};if(o.domLoaded){n(c);return}const u=()=>r.readyState==="complete"||r.readyState==="interactive"&&r.body,f=()=>{Hg(e,"DOMContentLoaded",f),Hg(e,"load",f),o.domLoaded||(o.domLoaded=!0,n(c)),e=null};u()?f():Mb(e,"DOMContentLoaded",f),o.domLoaded||Mb(e,"load",f)};class $u{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=HS+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(n,o,r,c){const u=this;let f;const b=window,v=N=>{u.executeHandlers(Gl(N||b.event),x)};if(!n||kt(n)||$r(n))return r;let x;n[u.expando]?x=n[u.expando]:(x=u.count++,n[u.expando]=x,u.events[x]={}),c=c||n;const D=o.split(" ");let B=D.length;for(;B--;){let N=D[B],H=v,te=!1,Q=!1;if(N==="DOMContentLoaded"&&(N="ready"),u.domLoaded&&N==="ready"&&n.readyState==="complete"){r.call(c,Gl({type:N}));continue}!u.hasFocusIn&&(N==="focusin"||N==="focusout")&&(te=!0,Q=N==="focusin"?"focus":"blur",H=Y=>{const Ae=Gl(Y||b.event);Ae.type=Ae.type==="focus"?"focusin":"focusout",u.executeHandlers(Ae,x)}),f=u.events[x][N],f?N==="ready"&&u.domLoaded?r(Gl({type:N})):f.push({func:r,scope:c}):(u.events[x][N]=f=[{func:r,scope:c}],f.fakeName=Q,f.capture=te,f.nativeHandler=H,N==="ready"?VS(n,H,u):Mb(n,Q||N,H,te))}return n=f=null,r}unbind(n,o,r){if(!n||kt(n)||$r(n))return this;const c=n[this.expando];if(c){let u=this.events[c];if(o){const f=o.split(" ");let b=f.length;for(;b--;){const v=f[b],x=u[v];if(x){if(r){let D=x.length;for(;D--;)if(x[D].func===r){const B=x.nativeHandler,N=x.fakeName,H=x.capture,te=x.slice(0,D).concat(x.slice(D+1));te.nativeHandler=B,te.fakeName=N,te.capture=H,u[v]=te}}(!r||x.length===0)&&(delete u[v],Hg(n,x.fakeName||v,x.nativeHandler,x.capture))}}}else xo(u,(f,b)=>{Hg(n,f.fakeName||b,f.nativeHandler,f.capture)}),u={};for(const f in u)if(to(u,f))return this;delete this.events[c];try{delete n[this.expando]}catch{n[this.expando]=null}}return this}fire(n,o,r){return this.dispatch(n,o,r)}dispatch(n,o,r){if(!n||kt(n)||$r(n))return this;const c=Gl({type:o,target:n},r);do{const u=n[this.expando];u&&this.executeHandlers(c,u),n=n.parentNode||n.ownerDocument||n.defaultView||n.parentWindow}while(n&&!c.isPropagationStopped());return this}clean(n){if(!n||kt(n)||$r(n))return this;if(n[this.expando]&&this.unbind(n),n.getElementsByTagName||(n=n.document),n&&n.getElementsByTagName){this.unbind(n);const o=n.getElementsByTagName("*");let r=o.length;for(;r--;)n=o[r],n[this.expando]&&this.unbind(n)}return this}destroy(){this.events={}}cancel(n){return n&&(n.preventDefault(),n.stopImmediatePropagation()),!1}executeHandlers(n,o){const r=this.events[o],c=r&&r[n.type];if(c)for(let u=0,f=c.length;u<f;u++){const b=c[u];if(b&&b.func.call(b.scope,n)===!1&&n.preventDefault(),n.isImmediatePropagationStopped())return}}}$u.Event=new $u;const O1=Mt.each,US=Mt.grep,WS="data-mce-style",tl=Mt.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),R1=(e,n,o)=>{vn(o)||o===""?Qr(e,n):Cr(e,n,o)},ZS=e=>e.replace(/[A-Z]/g,n=>"-"+n.toLowerCase()),Pf=(e,n)=>{let o=0;if(e)for(let r=e.nodeType,c=e.previousSibling;c;c=c.previousSibling){const u=c.nodeType;n&&kt(c)&&(u===r||!c.data.length)||(o++,r=u)}return o},j_=(e,n)=>{const o=nr(n,"style"),r=e.serialize(e.parse(o),Oo(n));R1(n,WS,r)},q_=(e,n)=>Cs(e)?to(tl,n)?e+"":e+"px":e,g2=(e,n,o)=>{const r=ZS(n);vn(o)||o===""?Lh(e,r):lc(e,r,q_(o,r))},G_=(e,n,o)=>{const r=n.keep_values,c={set:(f,b,v)=>{const x=re.fromDom(f);he(n.url_converter)&&Fe(b)&&(b=n.url_converter.call(n.url_converter_scope||o(),String(b),v,f));const D="data-mce-"+v;R1(x,D,b),R1(x,v,b)},get:(f,b)=>{const v=re.fromDom(f);return nr(v,"data-mce-"+b)||nr(v,b)}},u={style:{set:(f,b)=>{const v=re.fromDom(f);r&&R1(v,WS,b),Qr(v,"style"),ie(b)&&ui(v,e.parse(b))},get:f=>{const b=re.fromDom(f),v=nr(b,WS)||nr(b,"style");return e.serialize(e.parse(v),Oo(b))}}};return r&&(u.href=u.src=c),u},Is=(e,n={})=>{const o={},r=window,c={};let u=0;const f=!0,b=!0,v=Bu.forElement(re.fromDom(e),{contentCssCors:n.contentCssCors,referrerPolicy:n.referrerPolicy,crossOrigin:Ve=>{const Je=n.crossOrigin;if(he(Je))return Je(Ve,"stylesheet")}}),x=[],D=n.schema?n.schema:Pu({}),B=Ig({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema),N=n.ownEvents?new $u:$u.Event,H=D.getBlockElements(),te=Ve=>ie(Ve)?to(H,Ve):Cn(Ve)&&(to(H,Ve.nodeName)||yt(D,Ve)),Q=Ve=>Ve&&e&&ie(Ve)?e.getElementById(Ve):Ve,Y=Ve=>{const Je=Q(Ve);return Fe(Je)?re.fromDom(Je):null},Ae=(Ve,Je,Jt="")=>{let Wt;const no=Y(Ve);if(Fe(no)&&Tr(no)){const As=Y7[Je];As&&As.get?Wt=As.get(no.dom,Je):Wt=nr(no,Je)}return Fe(Wt)?Wt:Jt},_e=Ve=>{const Je=Q(Ve);return vn(Je)?[]:Je.attributes},Pe=(Ve,Je,Jt)=>{On(Ve,Wt=>{if(Cn(Wt)){const no=re.fromDom(Wt),As=Jt===""?null:Jt,ua=nr(no,Je),Dh=Y7[Je];Dh&&Dh.set?Dh.set(no.dom,As,Je):R1(no,Je,As),ua!==As&&n.onSetAttrib&&n.onSetAttrib({attrElm:no.dom,attrName:Je,attrValue:As})}})},Ze=(Ve,Je)=>Ve.cloneNode(Je),ht=()=>n.root_element||e.body,Vt=Ve=>{const Je=vb(Ve);return{x:Je.x,y:Je.y,w:Je.width,h:Je.height}},Ot=(Ve,Je)=>Lm(e.body,Q(Ve),Je),lt=(Ve,Je,Jt)=>{On(Ve,Wt=>{const no=re.fromDom(Wt);g2(no,Je,Jt),n.update_styles&&j_(B,no)})},Be=(Ve,Je)=>{On(Ve,Jt=>{const Wt=re.fromDom(Jt);xo(Je,(no,As)=>{g2(Wt,As,no)}),n.update_styles&&j_(B,Wt)})},oe=(Ve,Je,Jt)=>{const Wt=Q(Ve);if(!(vn(Wt)||!dr(Wt)&&!Xh(Wt)))return Jt?Pr(re.fromDom(Wt),ZS(Je)):(Je=Je.replace(/-(\D)/g,(no,As)=>As.toUpperCase()),Je==="float"&&(Je="cssFloat"),Wt.style?Wt.style[Je]:void 0)},je=Ve=>{const Je=Q(Ve);if(!Je)return{w:0,h:0};let Jt=oe(Je,"width"),Wt=oe(Je,"height");return(!Jt||Jt.indexOf("px")===-1)&&(Jt="0"),(!Wt||Wt.indexOf("px")===-1)&&(Wt="0"),{w:parseInt(Jt,10)||Je.offsetWidth||Je.clientWidth,h:parseInt(Wt,10)||Je.offsetHeight||Je.clientHeight}},Dt=Ve=>{const Je=Q(Ve),Jt=Ot(Je),Wt=je(Je);return{x:Jt.x,y:Jt.y,w:Wt.w,h:Wt.h}},kn=(Ve,Je)=>{if(!Ve)return!1;const Jt=Qe(Ve)?Ve:[Ve];return ke(Jt,Wt=>ki(re.fromDom(Wt),Je))},io=(Ve,Je,Jt,Wt)=>{const no=[];let As=Q(Ve);Wt=Wt===void 0;const ua=Jt||(ht().nodeName!=="BODY"?ht().parentNode:null);if(ie(Je))if(Je==="*")Je=Cn;else{const Dh=Je;Je=ug=>kn(ug,Dh)}for(;As&&!(As===ua||vn(As.nodeType)||Io(As)||Ag(As));){if(!Je||Je(As))if(Wt)no.push(As);else return[As];As=As.parentNode}return Wt?no:null},zo=(Ve,Je,Jt)=>{const Wt=io(Ve,Je,Jt,!1);return Wt&&Wt.length>0?Wt[0]:null},is=(Ve,Je,Jt)=>{let Wt=Je;if(Ve){ie(Je)&&(Wt=no=>kn(no,Je));for(let no=Ve[Jt];no;no=no[Jt])if(he(Wt)&&Wt(no))return no}return null},kr=(Ve,Je)=>is(Ve,Je,"nextSibling"),Dr=(Ve,Je)=>is(Ve,Je,"previousSibling"),Oc=Ve=>he(Ve.querySelectorAll),$t=(Ve,Je)=>{var Jt,Wt;const no=(Wt=(Jt=Q(Je))!==null&&Jt!==void 0?Jt:n.root_element)!==null&&Wt!==void 0?Wt:e;return Oc(no)?So(no.querySelectorAll(Ve)):[]},On=function(Ve,Je,Jt){const Wt=Jt??this;if(Qe(Ve)){const no=[];return O1(Ve,(As,ua)=>{const Dh=Q(As);Dh&&no.push(Je.call(Wt,Dh,ua))}),no}else{const no=Q(Ve);return no?Je.call(Wt,no):!1}},hs=(Ve,Je)=>{On(Ve,Jt=>{xo(Je,(Wt,no)=>{Pe(Jt,no,Wt)})})},Ps=(Ve,Je)=>{On(Ve,Jt=>{const Wt=re.fromDom(Jt);ad(Wt,Je)})},An=(Ve,Je,Jt,Wt,no)=>On(Ve,As=>{const ua=ie(Je)?e.createElement(Je):Je;return Fe(Jt)&&hs(ua,Jt),Wt&&(!ie(Wt)&&Wt.nodeType?ua.appendChild(Wt):ie(Wt)&&Ps(ua,Wt)),no?ua:As.appendChild(ua)}),Ht=(Ve,Je,Jt)=>An(e.createElement(Ve),Ve,Je,Jt,!0),on=Og.decode,Jn=Og.encodeAllRaw,lo=(Ve,Je,Jt="")=>{let Wt="<"+Ve;for(const no in Je)os(Je,no)&&(Wt+=" "+no+'="'+Jn(Je[no])+'"');return Ai(Jt)&&to(D.getVoidElements(),Ve)?Wt+" />":Wt+">"+Jt+"</"+Ve+">"},Us=Ve=>{const Je=e.createElement("div"),Jt=e.createDocumentFragment();Jt.appendChild(Je),Ve&&(Je.innerHTML=Ve);let Wt;for(;Wt=Je.firstChild;)Jt.appendChild(Wt);return Jt.removeChild(Je),Jt},ar=(Ve,Je)=>On(Ve,Jt=>{const Wt=re.fromDom(Jt);return Je&&me(wr(Wt),no=>{xs(no)&&no.dom.length===0?Ws(no):Ga(Wt,no)}),Ws(Wt),Wt.dom}),Id=Ve=>On(Ve,Je=>{const Jt=Je.attributes;for(let Wt=Jt.length-1;Wt>=0;Wt--)Je.removeAttributeNode(Jt.item(Wt))}),si=Ve=>B.parse(Ve),gf=(Ve,Je)=>B.serialize(Ve,Je),Dm=Ve=>{if(By!==Is.DOM&&e===document){if(o[Ve])return;o[Ve]=!0}let Je=e.getElementById("mceDefaultStyles");if(!Je){Je=e.createElement("style"),Je.id="mceDefaultStyles",Je.type="text/css";const Jt=e.head;Jt.firstChild?Jt.insertBefore(Je,Jt.firstChild):Jt.appendChild(Je)}Je.styleSheet?Je.styleSheet.cssText+=Ve:Je.appendChild(e.createTextNode(Ve))},Rl=Ve=>{Ve||(Ve=""),me(Ve.split(","),Je=>{c[Je]=!0,v.load(Je).catch(Ct)})},hu=(Ve,Je,Jt)=>{On(Ve,Wt=>{if(Cn(Wt)){const no=re.fromDom(Wt),As=Je.split(" ");me(As,ua=>{Fe(Jt)?(Jt?di:Zr)(no,ua):_a(no,ua)})}})},hf=(Ve,Je)=>{hu(Ve,Je,!0)},Ry=(Ve,Je)=>{hu(Ve,Je,!1)},Un=(Ve,Je)=>{const Jt=Y(Ve),Wt=Je.split(" ");return Fe(Jt)&&zs(Wt,no=>zh(Jt,no))},ps=Ve=>{On(Ve,Je=>Lh(re.fromDom(Je),"display"))},la=Ve=>{On(Ve,Je=>lc(re.fromDom(Je),"display","none"))},bc=Ve=>{const Je=Y(Ve);return Fe(Je)&&At(Ur(Je,"display"),"none")},Rc=Ve=>(Ve||"mce_")+u++,sc=Ve=>{const Je=Y(Ve);return Fe(Je)?Cn(Je.dom)?Je.dom.outerHTML:zy(Je):""},Kr=(Ve,Je)=>{On(Ve,Jt=>{Cn(Jt)&&(Jt.outerHTML=Je)})},Yr=(Ve,Je)=>{const Jt=Q(Je);return On(Ve,Wt=>{const no=Jt==null?void 0:Jt.parentNode,As=Jt==null?void 0:Jt.nextSibling;return no&&(As?no.insertBefore(Wt,As):no.appendChild(Wt)),Wt})},pu=(Ve,Je,Jt)=>On(Je,Wt=>{var no;const As=Qe(Je)?Ve.cloneNode(!0):Ve;return Jt&&O1(US(Wt.childNodes),ua=>{As.appendChild(ua)}),(no=Wt.parentNode)===null||no===void 0||no.replaceChild(As,Wt),Wt}),ig=(Ve,Je)=>{if(Ve.nodeName!==Je.toUpperCase()){const Jt=Ht(Je);return O1(_e(Ve),Wt=>{Pe(Jt,Wt.nodeName,Ae(Ve,Wt.nodeName))}),pu(Jt,Ve,!0),Jt}else return Ve},Qp=(Ve,Je)=>{let Jt=Ve;for(;Jt;){let Wt=Je;for(;Wt&&Jt!==Wt;)Wt=Wt.parentNode;if(Jt===Wt)break;Jt=Jt.parentNode}return!Jt&&Ve.ownerDocument?Ve.ownerDocument.documentElement:Jt},kh=(Ve,Je,Jt)=>Ro(Je)?Zl(D,Ve,{...Jt,isContent:no=>{const As=no.nodeName.toLowerCase();return!!Je[As]}}):Zl(D,Ve,Jt),A_=()=>e.createRange(),__=(Ve,Je,Jt)=>{let Wt=A_(),no,As;if(Ve&&Je&&Ve.parentNode&&Je.parentNode){const ua=Ve.parentNode;return Wt.setStart(ua,Pf(Ve)),Wt.setEnd(Je.parentNode,Pf(Je)),no=Wt.extractContents(),Wt=A_(),Wt.setStart(Je.parentNode,Pf(Je)+1),Wt.setEnd(ua,Pf(Ve)+1),As=Wt.extractContents(),ua.insertBefore(l2(By,no,D),Ve),Jt?ua.insertBefore(Jt,Ve):ua.insertBefore(Je,Ve),ua.insertBefore(l2(By,As,D),Ve),ar(Ve),Jt||Je}else return},uS=(Ve,Je,Jt,Wt)=>{if(Qe(Ve)){let no=Ve.length;const As=[];for(;no--;)As[no]=uS(Ve[no],Je,Jt,Wt);return As}else return n.collect&&(Ve===e||Ve===r)&&x.push([Ve,Je,Jt,Wt]),N.bind(Ve,Je,Jt,Wt||By)},lg=(Ve,Je,Jt)=>{if(Qe(Ve)){let Wt=Ve.length;const no=[];for(;Wt--;)no[Wt]=lg(Ve[Wt],Je,Jt);return no}else{if(x.length>0&&(Ve===e||Ve===r)){let Wt=x.length;for(;Wt--;){const[no,As,ua]=x[Wt];Ve===no&&(!Je||Je===As)&&(!Jt||Jt===ua)&&N.unbind(no,As,ua)}}return N.unbind(Ve,Je,Jt)}},My=(Ve,Je,Jt)=>N.dispatch(Ve,Je,Jt),H5=(Ve,Je,Jt)=>N.dispatch(Ve,Je,Jt),k_=Ve=>{if(Ve&&dr(Ve)){const Je=Ve.getAttribute("data-mce-contenteditable");return Je&&Je!=="inherit"?Je:Ve.contentEditable!=="inherit"?Ve.contentEditable:null}else return null},By={doc:e,settings:n,win:r,files:c,stdMode:f,boxModel:b,styleSheetLoader:v,boundEvents:x,styles:B,schema:D,events:N,isBlock:te,root:null,clone:Ze,getRoot:ht,getViewPort:Vt,getRect:Dt,getSize:je,getParent:zo,getParents:io,get:Q,getNext:kr,getPrev:Dr,select:$t,is:kn,add:An,create:Ht,createHTML:lo,createFragment:Us,remove:ar,setStyle:lt,getStyle:oe,setStyles:Be,removeAllAttribs:Id,setAttrib:Pe,setAttribs:hs,getAttrib:Ae,getPos:Ot,parseStyle:si,serializeStyle:gf,addStyle:Dm,loadCSS:Rl,addClass:hf,removeClass:Ry,hasClass:Un,toggleClass:hu,show:ps,hide:la,isHidden:bc,uniqueId:Rc,setHTML:Ps,getOuterHTML:sc,setOuterHTML:Kr,decode:on,encode:Jn,insertAfter:Yr,replace:pu,rename:ig,findCommonAncestor:Qp,run:On,getAttribs:_e,isEmpty:kh,createRng:A_,nodeIndex:Pf,split:__,bind:uS,unbind:lg,fire:H5,dispatch:My,getContentEditable:k_,getContentEditableParent:Ve=>{const Je=ht();let Jt=null;for(let Wt=Ve;Wt&&Wt!==Je&&(Jt=k_(Wt),Jt===null);Wt=Wt.parentNode);return Jt},isEditable:Ve=>{if(Fe(Ve)){const Je=Cn(Ve)?Ve:Ve.parentElement;return Fe(Je)&&dr(Je)&&Cl(re.fromDom(Je))}else return!1},destroy:()=>{if(x.length>0){let Ve=x.length;for(;Ve--;){const[Je,Jt,Wt]=x[Ve];N.unbind(Je,Jt,Wt)}}xo(c,(Ve,Je)=>{v.unload(Je),delete c[Je]})},isChildOf:(Ve,Je)=>Ve===Je||Je.contains(Ve),dumpRng:Ve=>"startContainer: "+Ve.startContainer.nodeName+", startOffset: "+Ve.startOffset+", endContainer: "+Ve.endContainer.nodeName+", endOffset: "+Ve.endOffset},Y7=G_(B,n,bt(By));return By};Is.DOM=Is(document),Is.nodeIndex=Pf;const jS=Is.DOM,qS=0,Kl=1,zg=2,as=3;class va{constructor(n={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=n}_setReferrerPolicy(n){this.settings.referrerPolicy=n}_setCrossOrigin(n){this.settings.crossOrigin=n}loadScript(n){return new Promise((o,r)=>{const c=jS;let u;const f=()=>{c.remove(x),u&&(u.onerror=u.onload=u=null)},b=()=>{f(),o()},v=()=>{f(),r("Failed to load script: "+n)},x=c.uniqueId();u=document.createElement("script"),u.id=x,u.type="text/javascript",u.src=Mt._addCacheSuffix(n),this.settings.referrerPolicy&&c.setAttrib(u,"referrerpolicy",this.settings.referrerPolicy);const D=this.settings.crossOrigin;if(he(D)){const B=D(n);B!==void 0&&c.setAttrib(u,"crossorigin",B)}u.onload=b,u.onerror=v,(document.getElementsByTagName("head")[0]||document.body).appendChild(u)})}isDone(n){return this.states[n]===zg}markDone(n){this.states[n]=zg}add(n){const o=this;return o.queue.push(n),o.states[n]===void 0&&(o.states[n]=qS),new Promise((c,u)=>{o.scriptLoadedCallbacks[n]||(o.scriptLoadedCallbacks[n]=[]),o.scriptLoadedCallbacks[n].push({resolve:c,reject:u})})}load(n){return this.add(n)}remove(n){delete this.states[n],delete this.scriptLoadedCallbacks[n]}loadQueue(){const n=this.queue;return this.queue=[],this.loadScripts(n)}loadScripts(n){const o=this,r=(v,x)=>{Ss(o.scriptLoadedCallbacks,x).each(D=>{me(D,B=>B[v](x))}),delete o.scriptLoadedCallbacks[x]},c=v=>{const x=tt(v,D=>D.status==="rejected");return x.length>0?Promise.reject(eo(x,({reason:D})=>Qe(D)?D:[D])):Promise.resolve()},u=v=>Promise.allSettled(Oe(v,x=>o.states[x]===zg?(r("resolve",x),Promise.resolve()):o.states[x]===as?(r("reject",x),Promise.reject(x)):(o.states[x]=Kl,o.loadScript(x).then(()=>{o.states[x]=zg,r("resolve",x);const D=o.queue;return D.length>0?(o.queue=[],u(D).then(c)):Promise.resolve()},()=>(o.states[x]=as,r("reject",x),Promise.reject(x)))))),f=v=>(o.loading=!0,u(v).then(x=>{o.loading=!1;const D=o.queueLoadedCallbacks.shift();return P.from(D).each(qt),c(x)})),b=Bl(n);return o.loading?new Promise((v,x)=>{o.queueLoadedCallbacks.push(()=>{f(b).then(v,x)})}):f(b)}}va.ScriptLoader=new va;const M1=(e,n)=>{const o=e.indexOf(n);return o!==-1&&e.indexOf(n,o+1)>o},Fb=e=>en(e)&&to(e,"raw"),fr=e=>Qe(e)&&e.length>1,sp={},Nb=gn("en"),GS=()=>Ss(sp,Nb.get()),Iu={getData:()=>ac(sp,e=>({...e})),setCode:e=>{e&&Nb.set(e)},getCode:()=>Nb.get(),add:(e,n)=>{let o=sp[e];o||(sp[e]=o={});const r=Oe(dn(n),c=>c.toLowerCase());xo(n,(c,u)=>{const f=u.toLowerCase();f!==u&&M1(r,f)?(to(n,f)||(o[f]=c),o[u]=c):o[f]=c})},translate:e=>{const n=GS().getOr({}),o=b=>he(b)?Object.prototype.toString.call(b):r(b)?"":""+b,r=b=>b===""||b===null||b===void 0,c=b=>{const v=o(b);return to(n,v)?o(n[v]):Ss(n,v.toLowerCase()).map(o).getOr(v)},u=b=>b.replace(/{context:\w+}$/,""),f=b=>b.replaceAll("...",vu);if(r(e))return"";if(Fb(e))return f(o(e.raw));if(fr(e)){const b=e.slice(1),v=c(e[0]).replace(/\{([0-9]+)\}/g,(x,D)=>to(b,D)?o(b[D]):x);return f(u(v))}return f(u(c(e)))},isRtl:()=>GS().bind(e=>Ss(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>to(sp,e)},_c=()=>{const e=[],n={},o={},r=[],c=(Q,Y)=>{const Ae=tt(r,_e=>_e.name===Q&&_e.state===Y);me(Ae,_e=>_e.resolve())},u=Q=>to(n,Q),f=Q=>to(o,Q),b=Q=>{if(o[Q])return o[Q].instance},v=(Q,Y)=>{const Ae=Iu.getCode(),_e=","+(Y||"")+",";!Ae||Y&&_e.indexOf(","+Ae+",")===-1||va.ScriptLoader.add(n[Q]+"/langs/"+Ae+".js")},x=(Q,Y)=>{_c.languageLoad!==!1&&(u(Q)?v(Q,Y):te(Q,"loaded").then(()=>v(Q,Y)))},D=(Q,Y)=>(e.push(Y),o[Q]={instance:Y},c(Q,"added"),Y),B=Q=>{delete n[Q],delete o[Q]},N=(Q,Y)=>ie(Y)?ie(Q)?{prefix:"",resource:Y,suffix:""}:{prefix:Q.prefix,resource:Y,suffix:Q.suffix}:Y,H=(Q,Y)=>{if(n[Q])return Promise.resolve();let Ae=ie(Y)?Y:Y.prefix+Y.resource+Y.suffix;Ae.indexOf("/")!==0&&Ae.indexOf("://")===-1&&(Ae=_c.baseURL+"/"+Ae),n[Q]=Ae.substring(0,Ae.lastIndexOf("/"));const _e=()=>(c(Q,"loaded"),Promise.resolve());return o[Q]?_e():va.ScriptLoader.add(Ae).then(_e)},te=(Q,Y="added")=>Y==="added"&&f(Q)||Y==="loaded"&&u(Q)?Promise.resolve():new Promise(Ae=>{r.push({name:Q,state:Y,resolve:Ae})});return{items:e,urls:n,lookup:o,get:b,requireLangPack:x,add:D,remove:B,createUrl:N,load:H,waitFor:te}};_c.languageLoad=!0,_c.baseURL="",_c.PluginManager=_c(),_c.ThemeManager=_c(),_c.ModelManager=_c();const Lu=bt("mce-annotation"),gd=bt("data-mce-annotation"),hd=bt("data-mce-annotation-uid"),$f=bt("data-mce-annotation-active"),em=bt("data-mce-annotation-classes"),Zm=bt("data-mce-annotation-attrs"),h2=e=>n=>Yo(n,e),p2=(e,n)=>{const o=e.selection.getRng(),r=re.fromDom(o.startContainer),c=re.fromDom(e.getBody()),u=n.fold(()=>"."+Lu(),v=>`[${gd()}="${v}"]`),f=pl(r,o.startOffset).getOr(r);return dc(f,u,h2(c)).bind(v=>Xi(v,`${hd()}`).bind(x=>Xi(v,`${gd()}`).map(D=>{const B=Pb(e,x);return{uid:x,name:D,elements:B}})))},nM=e=>Tr(e)&&zh(e,Lu()),X_=(e,n)=>lr(e,"data-mce-bogus")||Ks(e,'[data-mce-bogus="all"]',h2(n)),Pb=(e,n)=>{const o=re.fromDom(e.getBody()),r=ot(o,`[${hd()}="${n}"]`);return tt(r,c=>!X_(c,o))},$b=(e,n)=>{const o=re.fromDom(e.getBody()),r=ot(o,`[${gd()}="${n}"]`),c={};return me(r,u=>{if(!X_(u,o)){const f=nr(u,hd()),b=Ss(c,f).getOr([]);c[f]=b.concat([u])}}),c},QS=(e,n)=>{const o=gn({}),r=()=>({listeners:[],previous:rs()}),c=(B,N)=>{u(B,H=>(N(H),H))},u=(B,N)=>{const H=o.get(),te=Ss(H,B).getOrThunk(r),Q=N(te);H[B]=Q,o.set(H)},f=(B,N,H)=>{c(B,te=>{me(te.listeners,Q=>Q(!0,B,{uid:N,nodes:Oe(H,Y=>Y.dom)}))})},b=B=>{c(B,N=>{me(N.listeners,H=>H(!1,B))})},v=(B,N)=>{me(Pb(e,B),H=>{N?Cr(H,$f(),"true"):Qr(H,$f())})},x=Pc(()=>{const B=wn(n.getNames());me(B,N=>{u(N,H=>{const te=H.previous.get();return p2(e,P.some(N)).fold(()=>{te.each(Q=>{b(N),H.previous.clear(),v(Q,!1)})},({uid:Q,name:Y,elements:Ae})=>{At(te,Q)||(te.each(_e=>v(_e,!1)),f(Y,Q,Ae),H.previous.set(Q),v(Q,!0))}),{previous:H.previous,listeners:H.listeners}})})},30);return e.on("remove",()=>{x.cancel()}),e.on("NodeChange",()=>{x.throttle()}),{addListener:(B,N)=>{u(B,H=>({previous:H.previous,listeners:H.listeners.concat([N])}))}}},Ib=(e,n)=>{const o=gd(),r=u=>P.from(u.attr(o)).bind(n.lookup),c=u=>{var f,b;u.attr(hd(),null),u.attr(gd(),null),u.attr($f(),null);const v=P.from(u.attr(Zm())).map(N=>N.split(",")).getOr([]),x=P.from(u.attr(em())).map(N=>N.split(",")).getOr([]);me(v,N=>u.attr(N,null));const D=(b=(f=u.attr("class"))===null||f===void 0?void 0:f.split(" "))!==null&&b!==void 0?b:[],B=mt(D,[Lu()].concat(x));u.attr("class",B.length>0?B.join(" "):null),u.attr(em(),null),u.attr(Zm(),null)};e.serializer.addTempAttr($f()),e.serializer.addAttributeFilter(o,u=>{for(const f of u)r(f).each(b=>{b.persistent===!1&&(f.name==="span"?f.unwrap():c(f))})})},If=()=>{const e={};return{register:(c,u)=>{e[c]={name:c,settings:u}},lookup:c=>Ss(e,c).map(u=>u.settings),getNames:()=>dn(e)}},B1=(e,n,o=Ne)=>{const r=new Qs(e,n),c=u=>{let f;do f=r[u]();while(f&&!kt(f)&&!o(f));return P.from(f).filter(kt)};return{current:()=>P.from(r.current()).filter(kt),next:()=>c("next"),prev:()=>c("prev"),prev2:()=>c("prev2")}},pd=(e,n)=>{const o=n||(f=>e.isBlock(f)||xr(f)||mr(f)),r=(f,b,v,x)=>{if(kt(f)){const D=x(f,b,f.data);if(D!==-1)return P.some({container:f,offset:D})}return v().bind(D=>r(D.container,D.offset,v,x))};return{backwards:(f,b,v,x)=>{const D=B1(f,x??e.getRoot(),o);return r(f,b,()=>D.prev().map(B=>({container:B,offset:B.length})),v).getOrNull()},forwards:(f,b,v,x)=>{const D=B1(f,x??e.getRoot(),o);return r(f,b,()=>D.next().map(B=>({container:B,offset:0})),v).getOrNull()}}},Lb=["td","th"],J_=["thead","tbody","tfoot"],Hb=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],zb=["li","dd","dt"],ex=["ul","ol","dl"],Q_=["pre","script","textarea","style"],rp=e=>{let n;return o=>(n=n||Nt(e,ft),to(n,Oo(o)))},tx=e=>Oo(e)==="table",tm=e=>Tr(e)&&Oo(e)==="br",ap=rp(Hb),Vb=rp(ex),nm=rp(zb),yi=rp(J_),nl=rp(Lb),ol=rp(Q_),Ub=e=>{const n=[];let o=e.dom;for(;o;)n.push(re.fromDom(o)),o=o.lastChild;return n},b2=e=>{const n=ot(e,"br"),o=tt(Ub(e).slice(-1),tm);n.length===o.length&&me(o,Ws)},cp=()=>{const e=re.fromTag("br");return Cr(e,"data-mce-bogus","1"),e},om=e=>{vl(e),ds(e,cp())},e4=(e,n)=>{Vr(e).each(o=>{qi(o).each(r=>{n.isBlock(Oo(e))&&tm(o)&&n.isBlock(Oo(r))&&Ws(o)})})},ya=ja,Wb=qa,Bi=yc,nx=e=>e.insertContent(ya,{preserve_zwsp:!0}),ox=Cn,Lf=kt,jm=e=>(Lf(e)&&(e=e.parentNode),ox(e)&&e.hasAttribute("data-mce-caret")),Es=e=>Lf(e)&&Wb(e.data),Wc=e=>jm(e)||Es(e),F1=e=>e.firstChild!==e.lastChild||!xr(e.firstChild),Zb=(e,n)=>{var o;const c=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(ya),u=e.parentNode;if(n){const f=e.previousSibling;if(Lf(f)){if(Wc(f))return f;if(Hf(f))return f.splitText(f.data.length-1)}u==null||u.insertBefore(c,e)}else{const f=e.nextSibling;if(Lf(f)){if(Wc(f))return f;if(sm(f))return f.splitText(1),f}e.nextSibling?u==null||u.insertBefore(c,e.nextSibling):u==null||u.appendChild(c)}return c},jb=e=>{const n=e.container();return kt(n)?n.data.charAt(e.offset())===ya||e.isAtStart()&&Es(n.previousSibling):!1},N1=e=>{const n=e.container();return kt(n)?n.data.charAt(e.offset()-1)===ya||e.isAtEnd()&&Es(n.nextSibling):!1},sx=(e,n,o)=>{var r;const u=((r=n.ownerDocument)!==null&&r!==void 0?r:document).createElement(e);u.setAttribute("data-mce-caret",o?"before":"after"),u.setAttribute("data-mce-bogus","all"),u.appendChild(cp().dom);const f=n.parentNode;return o?f==null||f.insertBefore(u,n):n.nextSibling?f==null||f.insertBefore(u,n.nextSibling):f==null||f.appendChild(u),u},sm=e=>Lf(e)&&e.data[0]===ya,Hf=e=>Lf(e)&&e.data[e.data.length-1]===ya,v2=e=>{var n;const o=e.getElementsByTagName("br"),r=o[o.length-1];Tg(r)&&((n=r.parentNode)===null||n===void 0||n.removeChild(r))},Al=e=>e&&e.hasAttribute("data-mce-caret")?(v2(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,ip=e=>jm(e.startContainer),ra=Math.round,Fi=e=>e?{left:ra(e.left),top:ra(e.top),bottom:ra(e.bottom),right:ra(e.right),width:ra(e.width),height:ra(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},qb=(e,n)=>(e=Fi(e),n||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),rx=(e,n)=>e.left===n.left&&e.top===n.top&&e.bottom===n.bottom&&e.right===n.right,y2=(e,n,o)=>e>=0&&e<=Math.min(n.height,o.height)/2,zf=(e,n)=>{const o=Math.min(n.height/2,e.height/2);return e.bottom-o<n.top?!0:e.top>n.bottom?!1:y2(n.top-e.bottom,e,n)},Vg=(e,n)=>e.top>n.bottom?!0:e.bottom<n.top?!1:y2(n.bottom-e.top,e,n),C2=(e,n,o)=>n>=e.left&&n<=e.right&&o>=e.top&&o<=e.bottom,w2=e=>st(e,(n,o)=>n.fold(()=>P.some(o),r=>{const c=Math.min(o.left,r.left),u=Math.min(o.top,r.top),f=Math.max(o.right,r.right),b=Math.max(o.bottom,r.bottom);return P.some({top:u,right:f,bottom:b,left:c,width:f-c,height:b-u})}),P.none()),P1=(e,n,o)=>{const r=Math.max(Math.min(n,e.left+e.width),e.left),c=Math.max(Math.min(o,e.top+e.height),e.top);return Math.sqrt((n-r)*(n-r)+(o-c)*(o-c))},S2=(e,n)=>Math.max(0,Math.min(e.bottom,n.bottom)-Math.max(e.top,n.top)),Vf=e=>{const n=e.startContainer,o=e.startOffset;return n===e.endContainer&&n.hasChildNodes()&&e.endOffset===o+1?n.childNodes[o]:null},qm=(e,n)=>{if(Cn(e)&&e.hasChildNodes()){const o=e.childNodes,r=Rn(n,0,o.length-1);return o[r]}else return e},ax=(e,n)=>{if(!(n<0&&Cn(e)&&e.hasChildNodes()))return qm(e,n)},gc=new RegExp("[-----------------------------------------------------------------------------------------------------------------------------------]"),cx=e=>ie(e)&&e.charCodeAt(0)>=768&&gc.test(e),Uf=(...e)=>n=>{for(let o=0;o<e.length;o++)if(e[o](n))return!0;return!1},ix=(...e)=>n=>{for(let o=0;o<e.length;o++)if(!e[o](n))return!1;return!0},Gb=fi,x2=mr,$1=xr,E2=kt,lx=Xa(["script","style","textarea"]),ux=Xa(["img","input","textarea","hr","iframe","video","audio","object","embed"]),I1=Xa(["table"]),Ca=Wc,gr=e=>Ca(e)?!1:E2(e)?!lx(e.parentNode):ux(e)||$1(e)||I1(e)||Oa(e),hc=e=>Cn(e)&&e.getAttribute("unselectable")==="true",Oa=e=>!hc(e)&&x2(e),Ha=(e,n)=>{for(let o=e.parentNode;o&&o!==n;o=o.parentNode){if(Oa(o))return!1;if(Gb(o))return!0}return!0},aa=e=>Oa(e)?!st(So(e.getElementsByTagName("*")),(n,o)=>n||Gb(o),!1):!1,Kb=e=>ux(e)||aa(e),Yb=(e,n)=>gr(e)&&Ha(e,n),Xb=Cn,dx=gr,Jb=Jh("display","block table"),mx=Jh("float","left right"),Ug=ix(Xb,dx,St(mx)),T2=St(Jh("white-space","pre pre-line pre-wrap")),Wg=kt,Qb=xr,A2=Is.nodeIndex,ev=ax,bd=e=>e?e.createRange():Is.DOM.createRng(),L1=e=>ie(e)&&/[\r\n\t ]/.test(e),_2=e=>!!e.setStart&&!!e.setEnd,lp=e=>{const n=e.startContainer,o=e.startOffset;if(L1(e.toString())&&T2(n.parentNode)&&kt(n)){const r=n.data;if(L1(r[o-1])||L1(r[o+1]))return!0}return!1},H1=e=>{const n=e.ownerDocument,o=bd(n),r=n.createTextNode(ir),c=e.parentNode;c.insertBefore(r,e),o.setStart(r,0),o.setEnd(r,1);const u=Fi(o.getBoundingClientRect());return c.removeChild(r),u},tv=e=>{const n=e.startContainer,o=e.endContainer,r=e.startOffset,c=e.endOffset;if(n===o&&kt(o)&&r===0&&c===1){const u=e.cloneRange();return u.setEndAfter(o),Hu(u)}else return null},k2=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,Hu=e=>{var n;let o;const r=e.getClientRects();return r.length>0?o=Fi(r[0]):o=Fi(e.getBoundingClientRect()),!_2(e)&&Qb(e)&&k2(o)?H1(e):k2(o)&&_2(e)&&(n=tv(e))!==null&&n!==void 0?n:o},rm=(e,n)=>{const o=qb(e,n);return o.width=1,o.right=o.left+1,o},up=e=>{const n=[],o=f=>{f.height!==0&&(n.length>0&&rx(f,n[n.length-1])||n.push(f))},r=(f,b)=>{const v=bd(f.ownerDocument);if(b<f.data.length){if(cx(f.data[b]))return;if(cx(f.data[b-1])&&(v.setStart(f,b),v.setEnd(f,b+1),!lp(v))){o(rm(Hu(v),!1));return}}b>0&&(v.setStart(f,b-1),v.setEnd(f,b),lp(v)||o(rm(Hu(v),!1))),b<f.data.length&&(v.setStart(f,b),v.setEnd(f,b+1),lp(v)||o(rm(Hu(v),!0)))},c=e.container(),u=e.offset();if(Wg(c))return r(c,u),n;if(Xb(c))if(e.isAtEnd()){const f=ev(c,u);Wg(f)&&r(f,f.data.length),Ug(f)&&!Qb(f)&&o(rm(Hu(f),!1))}else{const f=ev(c,u);if(Wg(f)&&r(f,0),Ug(f)&&e.isAtEnd())return o(rm(Hu(f),!1)),n;const b=ev(e.container(),e.offset()-1);Ug(b)&&!Qb(b)&&(Jb(b)||Jb(f)||!Ug(f))&&o(rm(Hu(b),!1)),Ug(f)&&o(rm(Hu(f),!0))}return n},nt=(e,n,o)=>{const r=()=>(Wg(e),n===0),c=()=>Wg(e)?n>=e.data.length:n>=e.childNodes.length,u=()=>{const D=bd(e.ownerDocument);return D.setStart(e,n),D.setEnd(e,n),D},f=()=>(o||(o=up(nt(e,n))),o),b=()=>f().length>0,v=D=>D&&e===D.container()&&n===D.offset(),x=D=>ev(e,D?n-1:n);return{container:bt(e),offset:bt(n),toRange:u,getClientRects:f,isVisible:b,isAtStart:r,isAtEnd:c,isEqual:v,getNode:x}};nt.fromRangeStart=e=>nt(e.startContainer,e.startOffset),nt.fromRangeEnd=e=>nt(e.endContainer,e.endOffset),nt.after=e=>nt(e.parentNode,A2(e)+1),nt.before=e=>nt(e.parentNode,A2(e)),nt.isAbove=(e,n)=>nn(uo(n.getClientRects()),ts(e.getClientRects()),zf).getOr(!1),nt.isBelow=(e,n)=>nn(ts(n.getClientRects()),uo(e.getClientRects()),Vg).getOr(!1),nt.isAtStart=e=>e?e.isAtStart():!1,nt.isAtEnd=e=>e?e.isAtEnd():!1,nt.isTextPosition=e=>e?kt(e.container()):!1,nt.isElementPosition=e=>!nt.isTextPosition(e);const Ni=(e,n)=>{kt(n)&&n.data.length===0&&e.remove(n)},dp=(e,n,o)=>{n.insertNode(o),Ni(e,o.previousSibling),Ni(e,o.nextSibling)},z1=(e,n,o)=>{const r=P.from(o.firstChild),c=P.from(o.lastChild);n.insertNode(o),r.each(u=>Ni(e,u.previousSibling)),c.each(u=>Ni(e,u.nextSibling))},nv=(e,n,o)=>{Ag(o)?z1(e,n,o):dp(e,n,o)},vd=kt,Zc=Tg,V1=Is.nodeIndex,fx=e=>{const n=e.parentNode;return Zc(n)?fx(n):n},ov=e=>e?dl(e.childNodes,(n,o)=>(Zc(o)&&o.nodeName!=="BR"?n=n.concat(ov(o)):n.push(o),n),[]):[],gx=(e,n)=>{let o=e;for(;(o=o.previousSibling)&&vd(o);)n+=o.data.length;return n},Zg=e=>n=>e===n,D2=e=>{let n,o;n=ov(fx(e)),o=td(n,Zg(e),e),n=n.slice(0,o+1);const r=dl(n,(c,u,f)=>(vd(u)&&vd(n[f-1])&&c++,c),0);return n=Nl(n,Xa([e.nodeName])),o=td(n,Zg(e),e),o-r},am=e=>(vd(e)?"text()":e.nodeName.toLowerCase())+"["+D2(e)+"]",O2=(e,n,o)=>{const r=[];for(let c=n.parentNode;c&&c!==e;c=c.parentNode)r.push(c);return r},hx=(e,n)=>{let o=[],r=n.container(),c=n.offset(),u;if(vd(r))u=gx(r,c);else{const b=r.childNodes;c>=b.length?(u="after",c=b.length-1):u="before",r=b[c]}o.push(am(r));let f=O2(e,r);return f=Nl(f,St(Tg)),o=o.concat(Wi(f,b=>am(b))),o.reverse().join("/")+","+u},jc=(e,n,o)=>{let r=ov(e);return r=Nl(r,(c,u)=>!vd(c)||!vd(r[u-1])),r=Nl(r,Xa([n])),r[o]},yd=(e,n)=>{let o=e,r=0;for(;vd(o);){const c=o.data.length;if(n>=r&&n<=r+c){e=o,n=n-r;break}if(!vd(o.nextSibling)){e=o,n=c;break}r+=c,o=o.nextSibling}return vd(e)&&n>e.data.length&&(n=e.data.length),nt(e,n)},sl=(e,n)=>{if(!n)return null;const o=n.split(","),r=o[0].split("/"),c=o.length>1?o[1]:"before",u=dl(r,(f,b)=>{const v=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(b);return v?(v[1]==="text()"&&(v[1]="#text"),jc(f,v[1],parseInt(v[2],10))):null},e);if(!u)return null;if(!vd(u)&&u.parentNode){let f;return c==="after"?f=V1(u)+1:f=V1(u),nt(u.parentNode,f)}return yd(u,parseInt(c,10))},sv=mr,mp=(e,n,o)=>{let r=e(n.data.slice(0,o)).length;for(let c=n.previousSibling;c&&kt(c);c=c.previousSibling)r+=e(c.data).length;return r},px=(e,n,o,r,c)=>{const u=c?r.startContainer:r.endContainer;let f=c?r.startOffset:r.endOffset;const b=[],v=e.getRoot();if(kt(u))b.push(o?mp(n,u,f):f);else{let x=0;const D=u.childNodes;f>=D.length&&D.length&&(x=1,f=Math.max(0,D.length-1)),b.push(e.nodeIndex(D[f],o)+x)}for(let x=u;x&&x!==v;x=x.parentNode)b.push(e.nodeIndex(x,o));return b},t4=(e,n,o,r)=>{const c=n.dom,u=px(c,e,o,r,!0),f=n.isForward(),b=ip(r)?{isFakeCaret:!0}:{};if(n.isCollapsed())return{start:u,forward:f,...b};{const v=px(c,e,o,r,!1);return{start:u,end:v,forward:f,...b}}},R2=(e,n,o)=>{let r=0;return Mt.each(e.select(n),c=>{if(c.getAttribute("data-mce-bogus")!=="all"){if(c===o)return!1;r++;return}}),r},bx=(e,n)=>{let o=n?e.startContainer:e.endContainer,r=n?e.startOffset:e.endOffset;if(Cn(o)&&o.nodeName==="TR"){const c=o.childNodes;o=c[Math.min(n?r:r-1,c.length-1)],o&&(r=n?0:o.childNodes.length,n?e.setStart(o,r):e.setEnd(o,r))}},$o=e=>(bx(e,!0),bx(e,!1),e),Nn=(e,n)=>{if(Cn(e)&&(e=qm(e,n),sv(e)))return e;if(Wc(e)){kt(e)&&jm(e)&&(e=e.parentNode);let o=e.previousSibling;if(sv(o)||(o=e.nextSibling,sv(o)))return o}},U1=e=>Nn(e.startContainer,e.startOffset)||Nn(e.endContainer,e.endOffset),rv=(e,n,o)=>{const r=o.getNode(),c=o.getRng();if(r.nodeName==="IMG"||sv(r)){const f=r.nodeName;return{name:f,index:R2(o.dom,f,r)}}const u=U1(c);if(u){const f=u.tagName;return{name:f,index:R2(o.dom,f,u)}}return t4(e,o,n,c)},M2=e=>{const n=e.getRng();return{start:hx(e.dom.getRoot(),nt.fromRangeStart(n)),end:hx(e.dom.getRoot(),nt.fromRangeEnd(n)),forward:e.isForward()}},n4=e=>({rng:e.getRng(),forward:e.isForward()}),B2=(e,n,o)=>{const r={"data-mce-type":"bookmark",id:n,style:"overflow:hidden;line-height:0px"};return o?e.create("span",r,"&#xFEFF;"):e.create("span",r)},hr=(e,n)=>{const o=e.dom;let r=e.getRng();const c=o.uniqueId(),u=e.isCollapsed(),f=e.getNode(),b=f.nodeName,v=e.isForward();if(b==="IMG")return{name:b,index:R2(o,b,f)};const x=$o(r.cloneRange());if(!u){x.collapse(!1);const B=B2(o,c+"_end",n);nv(o,x,B)}r=$o(r),r.collapse(!0);const D=B2(o,c+"_start",n);return nv(o,r,D),e.moveToBookmark({id:c,keep:!0,forward:v}),{id:c,forward:v}},av=(e,n,o=!1)=>n===2?rv(Bi,o,e):n===3?M2(e):n?n4(e):hr(e,!1),W1=Te(rv,Uo,!0),jg=e=>e===1,rt=e=>e===-1,cv=e=>e.type==="inline-command"||e.type==="inline-format",vx=e=>e.type==="block-command"||e.type==="block-format",iv=(e,n)=>(e.type==="block-command"||e.type==="block-format")&&e.trigger===n,yx=e=>{var n;const o=c=>ge.error({message:c,pattern:e}),r=(c,u,f)=>{if(e.format!==void 0){let b;if(Qe(e.format)){if(!zs(e.format,ie))return o(c+" pattern has non-string items in the `format` array");b=e.format}else if(ie(e.format))b=[e.format];else return o(c+" pattern has non-string `format` parameter");return ge.value(u(b))}else return e.cmd!==void 0?ie(e.cmd)?ge.value(f(e.cmd,e.value)):o(c+" pattern has non-string `cmd` parameter"):o(c+" pattern is missing both `format` and `cmd` parameters")};if(!en(e))return o("Raw pattern is not an object");if(!ie(e.start))return o("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!ie(e.end))return o("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return o("Inline pattern has empty `start` and `end` parameters");let c=e.start,u=e.end;return u.length===0&&(u=c,c=""),r("Inline",f=>({type:"inline-format",start:c,end:u,format:f}),(f,b)=>({type:"inline-command",start:c,end:u,cmd:f,value:b}))}else{if(e.replacement!==void 0)return ie(e.replacement)?e.start.length===0?o("Replacement pattern has empty `start` parameter"):ge.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):o("Replacement pattern has non-string `replacement` parameter");{const c=(n=e.trigger)!==null&&n!==void 0?n:"space";return e.start.length===0?o("Block pattern has empty `start` parameter"):r("Block",u=>({type:"block-format",start:e.start,format:u[0],trigger:c}),(u,f)=>({type:"block-command",start:e.start,cmd:u,value:f,trigger:c}))}}},Gm=e=>tt(e,vx),qg=e=>tt(e,cv),Gg=(e,n)=>({inlinePatterns:qg(e),blockPatterns:Gm(e),dynamicPatternsLookup:n}),F2=(e,n)=>({...e,blockPatterns:tt(e.blockPatterns,o=>iv(o,n))}),Kg=e=>{const n=Er(Oe(e,yx));return me(n.errors,o=>console.error(o.message,o.pattern)),n.values},or=e=>n=>{const o=e(n);return Kg(o)},Cd=(e,n)=>e.dispatch("PreProcess",n),Cx=(e,n)=>e.dispatch("PostProcess",n),Km=e=>{e.dispatch("remove")},zu=e=>{e.dispatch("detach")},o4=(e,n)=>{e.dispatch("SwitchMode",{mode:n})},s4=(e,n,o,r,c)=>{e.dispatch("ObjectResizeStart",{target:n,width:o,height:r,origin:c})},N2=(e,n,o,r,c)=>{e.dispatch("ObjectResized",{target:n,width:o,height:r,origin:c})},r4=e=>{e.dispatch("PreInit")},a4=e=>{e.dispatch("PostRender")},c4=e=>{e.dispatch("Init")},i4=(e,n)=>{e.dispatch("PlaceholderToggle",{state:n})},P2=(e,n,o)=>{e.dispatch(n,o)},Ft=(e,n,o,r)=>{e.dispatch("FormatApply",{format:n,node:o,vars:r})},wx=(e,n,o,r)=>{e.dispatch("FormatRemove",{format:n,node:o,vars:r})},Qa=(e,n)=>e.dispatch("BeforeSetContent",n),Sx=(e,n)=>e.dispatch("SetContent",n),xx=(e,n)=>e.dispatch("BeforeGetContent",n),Ex=(e,n)=>e.dispatch("GetContent",n),l4=(e,n)=>{e.dispatch("AutocompleterStart",n)},so=(e,n)=>{e.dispatch("AutocompleterUpdate",n)},$2=(e,n)=>{e.dispatch("AutocompleterUpdateActiveRange",n)},Tx=e=>{e.dispatch("AutocompleterEnd")},oM=(e,n,o)=>e.dispatch("PastePreProcess",{content:n,internal:o}),u4=(e,n,o)=>e.dispatch("PastePostProcess",{node:n,internal:o}),Ax=(e,n)=>e.dispatch("PastePlainTextToggle",{state:n}),sM=(e,n)=>e.dispatch("EditableRootStateChange",{state:n}),d4=(e,n)=>e.dispatch("DisabledStateChange",{state:n}),_x=e=>e.dispatch("CloseActiveTooltips"),I2=Do().deviceType,ao=I2.isTouch(),L2=Is.DOM,Ym=e=>{const n=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return st(n,(o,r)=>{const c=r.split("="),u=c[0],f=c.length>1?c[1]:u;return o[cr(u)]=cr(f),o},{})},_l=e=>Bt(e,RegExp),an=e=>n=>n.options.get(e),qc=e=>ie(e)||en(e),Z1=(e,n="")=>o=>{const r=ie(o);if(r)if(o.indexOf("=")!==-1){const c=Ym(o);return{value:Ss(c,e.id).getOr(n),valid:r}}else return{value:o,valid:r};else return{valid:!1,message:"Must be a string."}},j1=e=>{const n=e.options.register;n("id",{processor:"string",default:e.id}),n("selector",{processor:"string"}),n("target",{processor:"object"}),n("suffix",{processor:"string"}),n("cache_suffix",{processor:"string"}),n("base_url",{processor:"string"}),n("referrer_policy",{processor:"string",default:""}),n("crossorigin",{processor:"function",default:bt(void 0)}),n("language_load",{processor:"boolean",default:!0}),n("inline",{processor:"boolean",default:!1}),n("iframe_attrs",{processor:"object",default:{}}),n("doctype",{processor:"string",default:"<!DOCTYPE html>"}),n("document_base_url",{processor:"string",default:e.editorManager.documentBaseURL}),n("body_id",{processor:Z1(e,"tinymce"),default:"tinymce"}),n("body_class",{processor:Z1(e),default:""}),n("content_security_policy",{processor:"string",default:""}),n("br_in_pre",{processor:"boolean",default:!0}),n("forced_root_block",{processor:o=>{const r=ie(o)&&Js(o);return r?{value:o,valid:r}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),n("forced_root_block_attrs",{processor:"object",default:{}}),n("newline_behavior",{processor:o=>{const r=be(["block","linebreak","invert","default"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),n("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),n("no_newline_selector",{processor:"string",default:""}),n("keep_styles",{processor:"boolean",default:!0}),n("end_container_on_empty_block",{processor:o=>It(o)?{valid:!0,value:o}:ie(o)?{valid:!0,value:o}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),n("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),n("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),n("font_size_classes",{processor:"string",default:""}),n("automatic_uploads",{processor:"boolean",default:!0}),n("images_reuse_filename",{processor:"boolean",default:!1}),n("images_replace_blob_uris",{processor:"boolean",default:!0}),n("icons",{processor:"string",default:""}),n("icons_url",{processor:"string",default:""}),n("images_upload_url",{processor:"string",default:""}),n("images_upload_base_path",{processor:"string",default:""}),n("images_upload_credentials",{processor:"boolean",default:!1}),n("images_upload_handler",{processor:"function"}),n("language",{processor:"string",default:"en"}),n("language_url",{processor:"string",default:""}),n("entity_encoding",{processor:"string",default:"named"}),n("indent",{processor:"boolean",default:!0}),n("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_use_margin",{processor:"boolean",default:!1}),n("indentation",{processor:"string",default:"40px"}),n("content_css",{processor:o=>{const r=o===!1||ie(o)||ut(o,ie);return r?ie(o)?{value:Oe(o.split(","),cr),valid:r}:Qe(o)?{value:o,valid:r}:o===!1?{value:[],valid:r}:{value:o,valid:r}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:mv(e)?[]:["default"]}),n("content_style",{processor:"string"}),n("content_css_cors",{processor:"boolean",default:!1}),n("font_css",{processor:o=>{const r=ie(o)||ut(o,ie);return r?{value:Qe(o)?o:Oe(o.split(","),cr),valid:r}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),n("extended_mathml_attributes",{processor:"string[]"}),n("extended_mathml_elements",{processor:"string[]"}),n("inline_boundaries",{processor:"boolean",default:!0}),n("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),n("object_resizing",{processor:o=>{const r=It(o)||ie(o);return r?o===!1||I2.isiPhone()||I2.isiPad()?{value:"",valid:r}:{value:o===!0?"table,img,figure.image,div,video,iframe":o,valid:r}:{valid:!1,message:"Must be boolean or a string"}},default:!ao}),n("resize_img_proportional",{processor:"boolean",default:!0}),n("event_root",{processor:"string"}),n("service_message",{processor:"string"}),n("onboarding",{processor:"boolean",default:!0}),n("tiny_cloud_entry_url",{processor:"string"}),n("theme",{processor:o=>o===!1||ie(o)||he(o),default:"silver"}),n("theme_url",{processor:"string"}),n("formats",{processor:"object"}),n("format_empty_lines",{processor:"boolean",default:!1}),n("format_noneditable_selector",{processor:"string",default:""}),n("preview_styles",{processor:o=>{const r=o===!1||ie(o);return r?{value:o===!1?"":o,valid:r}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),n("custom_ui_selector",{processor:"string",default:""}),n("hidden_input",{processor:"boolean",default:!0}),n("submit_patch",{processor:"boolean",default:!0}),n("encoding",{processor:"string"}),n("add_form_submit_trigger",{processor:"boolean",default:!0}),n("add_unload_trigger",{processor:"boolean",default:!0}),n("custom_undo_redo_levels",{processor:"number",default:0}),n("disable_nodechange",{processor:"boolean",default:!1}),n("disabled",{processor:o=>It(o)?(e.initialized&&c0(e)!==o&&Promise.resolve().then(()=>{d4(e,o)}),{valid:!0,value:o}):{valid:!1,message:"The value must be a boolean."},default:!1}),n("readonly",{processor:"boolean",default:!1}),n("editable_root",{processor:"boolean",default:!0}),n("plugins",{processor:"string[]",default:[]}),n("external_plugins",{processor:"object"}),n("forced_plugins",{processor:"string[]"}),n("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),n("model_url",{processor:"string"}),n("block_unsupported_drop",{processor:"boolean",default:!0}),n("visual",{processor:"boolean",default:!0}),n("visual_table_class",{processor:"string",default:"mce-item-table"}),n("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),n("iframe_aria_text",{processor:"string",default:"Rich Text Area".concat(e.hasPlugin("help")?". Press ALT-0 for help.":"")}),n("setup",{processor:"function"}),n("init_instance_callback",{processor:"function"}),n("url_converter",{processor:"function",default:e.convertURL}),n("url_converter_scope",{processor:"object",default:e}),n("urlconverter_callback",{processor:"function"}),n("allow_conditional_comments",{processor:"boolean",default:!1}),n("allow_html_data_urls",{processor:"boolean",default:!1}),n("allow_svg_data_urls",{processor:"boolean"}),n("allow_html_in_named_anchor",{processor:"boolean",default:!1}),n("allow_html_in_comments",{processor:"boolean",default:!1}),n("allow_script_urls",{processor:"boolean",default:!1}),n("allow_unsafe_link_target",{processor:"boolean",default:!1}),n("allow_mathml_annotation_encodings",{processor:o=>{const r=ut(o,ie);return r?{value:o,valid:r}:{valid:!1,message:"Must be an array of strings."}},default:[]}),n("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),n("fix_list_elements",{processor:"boolean",default:!1}),n("preserve_cdata",{processor:"boolean",default:!1}),n("remove_trailing_brs",{processor:"boolean",default:!0}),n("pad_empty_with_br",{processor:"boolean",default:!1}),n("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),n("element_format",{processor:"string",default:"html"}),n("entities",{processor:"string"}),n("schema",{processor:"string",default:"html5"}),n("convert_urls",{processor:"boolean",default:!0}),n("relative_urls",{processor:"boolean",default:!0}),n("remove_script_host",{processor:"boolean",default:!0}),n("custom_elements",{processor:qc}),n("extended_valid_elements",{processor:"string"}),n("invalid_elements",{processor:"string"}),n("invalid_styles",{processor:qc}),n("valid_children",{processor:"string"}),n("valid_classes",{processor:qc}),n("valid_elements",{processor:"string"}),n("valid_styles",{processor:qc}),n("verify_html",{processor:"boolean",default:!0}),n("auto_focus",{processor:o=>ie(o)||o===!0}),n("browser_spellcheck",{processor:"boolean",default:!1}),n("protect",{processor:"array"}),n("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),n("deprecation_warnings",{processor:"boolean",default:!0}),n("a11y_advanced_options",{processor:"boolean",default:!1}),n("api_key",{processor:"string"}),n("license_key",{processor:"string"}),n("paste_block_drop",{processor:"boolean",default:!1}),n("paste_data_images",{processor:"boolean",default:!0}),n("paste_preprocess",{processor:"function"}),n("paste_postprocess",{processor:"function"}),n("paste_webkit_styles",{processor:"string",default:"none"}),n("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),n("paste_merge_formats",{processor:"boolean",default:!0}),n("smart_paste",{processor:"boolean",default:!0}),n("paste_as_text",{processor:"boolean",default:!1}),n("paste_tab_spaces",{processor:"number",default:4}),n("text_patterns",{processor:o=>ut(o,en)||o===!1?{value:Kg(o===!1?[]:o),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),n("text_patterns_lookup",{processor:o=>he(o)?{value:or(o),valid:!0}:{valid:!1,message:"Must be a single function"},default:o=>[]}),n("noneditable_class",{processor:"string",default:"mceNonEditable"}),n("editable_class",{processor:"string",default:"mceEditable"}),n("noneditable_regexp",{processor:o=>ut(o,_l)?{value:o,valid:!0}:_l(o)?{value:[o],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),n("table_tab_navigation",{processor:"boolean",default:!0}),n("highlight_on_focus",{processor:"boolean",default:!0}),n("xss_sanitization",{processor:"boolean",default:!0}),n("details_initial_state",{processor:o=>{const r=be(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("details_serialized_state",{processor:o=>{const r=be(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("init_content_sync",{processor:"boolean",default:!1}),n("newdocument_content",{processor:"string",default:""}),n("sandbox_iframes",{processor:"boolean",default:!0}),n("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),n("convert_unsafe_embeds",{processor:"boolean",default:!0}),n("user_id",{processor:"string",default:"Anonymous"}),n("fetch_users",{processor:o=>o===void 0?{valid:!0,value:void 0}:he(o)?{valid:!0,value:o}:{valid:!1,message:"fetch_users must be a function that returns a Promise<ExpectedUser[]>"}}),e.on("ScriptsLoaded",()=>{n("directionality",{processor:"string",default:Iu.isRtl()?"rtl":void 0}),n("placeholder",{processor:"string",default:L2.getAttrib(e.getElement(),"placeholder")})}),n("lists_indent_on_tab",{processor:"boolean",default:!0}),n("list_max_depth",{processor:o=>{const r=Cs(o);if(r){if(o<0)throw new Error("list_max_depth cannot be set to lower than 0");return{value:o,valid:r}}else return{valid:!1,message:"Must be a number"}}})},lv=an("iframe_attrs"),fp=an("doctype"),q1=an("document_base_url"),Xm=an("body_id"),kc=an("body_class"),cm=an("content_security_policy"),m4=an("br_in_pre"),pc=an("forced_root_block"),gp=an("forced_root_block_attrs"),f4=an("newline_behavior"),ss=an("br_newline_selector"),wd=an("no_newline_selector"),Yg=an("keep_styles"),rM=an("end_container_on_empty_block"),Xg=an("automatic_uploads"),cs=an("images_reuse_filename"),aM=an("images_replace_blob_uris"),kx=an("icons"),cM=an("icons_url"),iM=an("images_upload_url"),G1=an("images_upload_base_path"),g4=an("images_upload_credentials"),lM=an("images_upload_handler"),uv=an("content_css_cors"),H2=an("referrer_policy"),K1=an("crossorigin"),Dx=an("language"),h4=an("language_url"),Y1=an("indent_use_margin"),z2=an("indentation"),V2=an("content_css"),Ox=an("content_style"),Rx=an("font_css"),Mx=an("directionality"),U2=an("inline_boundaries_selector"),W2=an("object_resizing"),vs=an("resize_img_proportional"),Bx=an("placeholder"),dv=an("event_root"),Z2=an("service_message"),Yl=an("theme"),Fx=an("theme_url"),j2=an("model"),p4=an("model_url"),im=an("inline_boundaries"),b4=an("formats"),X1=an("preview_styles"),J1=an("format_empty_lines"),v4=an("format_noneditable_selector"),Wf=an("custom_ui_selector"),mv=an("inline"),Nx=an("hidden_input"),y4=an("submit_patch"),Px=an("add_form_submit_trigger"),uM=an("add_unload_trigger"),$x=an("custom_undo_redo_levels"),Ix=an("disable_nodechange"),Q1=an("readonly"),e0=an("editable_root"),t0=an("content_css_cors"),Jg=an("plugins"),fv=an("external_plugins"),n0=an("block_unsupported_drop"),Jm=an("visual"),o0=an("visual_table_class"),q2=an("visual_anchor_class"),gv=an("iframe_aria_text"),Lx=an("setup"),Hx=an("init_instance_callback"),zx=an("urlconverter_callback"),C4=an("auto_focus"),hv=an("browser_spellcheck"),hp=an("protect"),Qg=an("paste_block_drop"),eh=an("paste_data_images"),Vx=an("paste_preprocess"),Ux=an("paste_postprocess"),Wx=an("newdocument_content"),pv=an("paste_webkit_styles"),Zx=an("paste_remove_styles_if_webkit"),w4=an("paste_merge_formats"),jx=an("smart_paste"),bv=an("paste_as_text"),G2=an("paste_tab_spaces"),vv=an("allow_html_data_urls"),K2=an("text_patterns"),S4=an("text_patterns_lookup"),Y2=an("noneditable_class"),qx=an("editable_class"),Gx=an("noneditable_regexp"),s0=an("preserve_cdata"),x4=an("highlight_on_focus"),X2=an("xss_sanitization"),J2=an("init_content_sync"),E4=e=>e.options.isSet("text_patterns_lookup"),T4=e=>Mt.explode(e.options.get("font_size_style_values")),th=e=>Mt.explode(e.options.get("font_size_classes")),Kx=e=>e.options.get("encoding")==="xml",Yx=e=>Mt.explode(e.options.get("images_file_types")),A4=an("table_tab_navigation"),_4=an("details_initial_state"),k4=an("details_serialized_state"),yv=an("sandbox_iframes"),r0=e=>e.options.get("sandbox_iframes_exclusions"),Q2=an("convert_unsafe_embeds"),a0=an("license_key"),Xx=an("api_key"),c0=an("disabled"),D4=an("user_id"),Cv=an("fetch_users"),O4=an("lists_indent_on_tab"),Jx=e=>P.from(e.options.get("list_max_depth")),dM=Cn,R4=kt,nh=e=>{const n=e.parentNode;n&&n.removeChild(e)},wv=e=>{const n=Bi(e);return{count:e.length-n.length,text:n}},Sv=e=>{let n;for(;(n=e.data.lastIndexOf(ya))!==-1;)e.deleteData(n,1)},Qx=(e,n)=>(lm(e),n),M4=(e,n)=>{const o=wv(e.data.substr(0,n.offset())),r=wv(e.data.substr(n.offset()));return(o.text+r.text).length>0?(Sv(e),nt(e,n.offset()-o.count)):n},xv=(e,n)=>{const o=n.container(),r=ws(So(o.childNodes),e).map(c=>c<n.offset()?nt(o,n.offset()-1):n).getOr(n);return lm(e),r},eE=(e,n)=>R4(e)&&n.container()===e?M4(e,n):Qx(e,n),tE=(e,n)=>n.container()===e.parentNode?xv(e,n):Qx(e,n),Ev=(e,n)=>nt.isTextPosition(n)?eE(e,n):tE(e,n),lm=e=>{dM(e)&&Wc(e)&&(F1(e)?e.removeAttribute("data-mce-caret"):nh(e)),R4(e)&&(Sv(e),e.data.length===0&&nh(e))},nE=mr,B4=Ru,F4=Xd,N4="*[contentEditable=false],video,audio,embed,object",pp=(e,n,o)=>{const r=qb(n.getBoundingClientRect(),o);let c,u;if(e.tagName==="BODY"){const b=e.ownerDocument.documentElement;c=e.scrollLeft||b.scrollLeft,u=e.scrollTop||b.scrollTop}else{const b=e.getBoundingClientRect();c=e.scrollLeft-b.left,u=e.scrollTop-b.top}r.left+=c,r.right+=c,r.top+=u,r.bottom+=u,r.width=1;let f=n.offsetWidth-n.clientWidth;return f>0&&(o&&(f*=-1),r.left+=f,r.right+=f),r},oE=e=>{var n,o;const r=ot(re.fromDom(e),N4);for(let c=0;c<r.length;c++){const u=r[c].dom;let f=u.previousSibling;if(Hf(f)){const b=f.data;b.length===1?(n=f.parentNode)===null||n===void 0||n.removeChild(f):f.deleteData(b.length-1,1)}f=u.nextSibling,sm(f)&&(f.data.length===1?(o=f.parentNode)===null||o===void 0||o.removeChild(f):f.deleteData(0,1))}},eC=(e,n,o,r)=>{const c=rs();let u,f;const b=pc(e),v=e.dom,x=(Q,Y)=>{let Ae;if(D(),F4(Y))return null;if(o(Y)){const _e=sx(b,Y,Q),Pe=pp(n,Y,Q);v.setStyle(_e,"top",Pe.top),v.setStyle(_e,"caret-color","transparent"),f=_e;const Ze=v.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});v.setStyles(Ze,{...Pe}),v.add(n,Ze),c.set({caret:Ze,element:Y,before:Q}),Q&&v.addClass(Ze,"mce-visual-caret-before"),B(),Ae=Y.ownerDocument.createRange(),Ae.setStart(_e,0),Ae.setEnd(_e,0)}else return f=Zb(Y,Q),Ae=Y.ownerDocument.createRange(),Sd(f.nextSibling)?(Ae.setStart(f,0),Ae.setEnd(f,0)):(Ae.setStart(f,1),Ae.setEnd(f,1)),Ae;return Ae},D=()=>{oE(n),f&&(lm(f),f=null),c.on(Q=>{v.remove(Q.caret),c.clear()}),u&&(clearInterval(u),u=void 0)},B=()=>{u=window.setInterval(()=>{c.on(Q=>{r()?v.toggleClass(Q.caret,"mce-visual-caret-hidden"):v.addClass(Q.caret,"mce-visual-caret-hidden")})},500)},N=()=>{c.on(Q=>{const Y=pp(n,Q.element,Q.before);v.setStyles(Q.caret,{...Y})})},H=()=>clearInterval(u),te=()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}";return{isShowing:c.isSet,show:x,hide:D,getCss:te,reposition:N,destroy:H}},Tv=()=>Po.browser.isFirefox(),Sd=e=>nE(e)||B4(e),i0=e=>(Sd(e)||Yd(e)&&Tv())&&Di(re.fromDom(e)).exists(Cl),um=fi,tC=mr,sE=Ru,rE=Jh("display","block table table-cell table-row table-caption list-item"),P4=Wc,aE=jm,$4=Cn,I4=kt,L4=gr,bp=(e,n)=>{let o;for(;o=e(n);)if(!aE(o))return o;return null},l0=(e,n,o,r,c)=>{const u=new Qs(e,r),f=tC(e)||aE(e);let b;if(rt(n)){if(f&&(b=bp(u.prev.bind(u),!0),o(b)))return b;for(;b=bp(u.prev.bind(u),c);)if(o(b))return b}if(jg(n)){if(f&&(b=bp(u.next.bind(u),!0),o(b)))return b;for(;b=bp(u.next.bind(u),c);)if(o(b))return b}return null},cE=(e,n)=>{const o=c=>um(c.dom),r=c=>c.dom===n;return ku(re.fromDom(e),o,r).map(c=>c.dom).getOr(n)},dm=(e,n)=>{for(;e&&e!==n;){if(rE(e))return e;e=e.parentNode}return null},mm=(e,n,o)=>dm(e.container(),o)===dm(n.container(),o),nC=(e,n)=>{if(!n)return P.none();const o=n.container(),r=n.offset();return $4(o)?P.from(o.childNodes[r+e]):P.none()},Av=(e,n)=>{var o;const c=((o=n.ownerDocument)!==null&&o!==void 0?o:document).createRange();return e?(c.setStartBefore(n),c.setEndBefore(n)):(c.setStartAfter(n),c.setEndAfter(n)),c},iE=(e,n,o)=>dm(n,e)===dm(o,e),_n=(e,n,o)=>{const r=e?"previousSibling":"nextSibling";let c=o;for(;c&&c!==n;){let u=c[r];if(u&&P4(u)&&(u=u[r]),tC(u)||sE(u)){if(iE(n,u,c))return u;break}if(L4(u))break;c=c.parentNode}return null},Zf=Te(Av,!0),vp=Te(Av,!1),oC=(e,n,o)=>{let r;const c=Te(_n,!0,n),u=Te(_n,!1,n),f=o.startContainer,b=o.startOffset;if(jm(f)){const v=I4(f)?f.parentNode:f,x=v.getAttribute("data-mce-caret");if(x==="before"&&(r=v.nextSibling,i0(r)))return Zf(r);if(x==="after"&&(r=v.previousSibling,i0(r)))return vp(r)}if(!o.collapsed)return o;if(kt(f)){if(P4(f)){if(e===1){if(r=u(f),r)return Zf(r);if(r=c(f),r)return vp(r)}if(e===-1){if(r=c(f),r)return vp(r);if(r=u(f),r)return Zf(r)}return o}if(Hf(f)&&b>=f.data.length-1)return e===1&&(r=u(f),r)?Zf(r):o;if(sm(f)&&b<=1)return e===-1&&(r=c(f),r)?vp(r):o;if(b===f.data.length)return r=u(f),r?Zf(r):o;if(b===0)return r=c(f),r?vp(r):o}return o},_v=(e,n)=>nC(e?0:-1,n).filter(tC),Qm=(e,n,o)=>{const r=oC(e,n,o);return e===-1?nt.fromRangeStart(r):nt.fromRangeEnd(r)},yp=e=>P.from(e.getNode()).map(re.fromDom),u0=e=>P.from(e.getNode(!0)).map(re.fromDom),jf=(e,n)=>{let o=n;for(;o=e(o);)if(o.isVisible())return o;return o},Cp=(e,n)=>{const o=mm(e,n);return!o&&xr(e.getNode())?!0:o},sC=mr,xd=kt,rC=Cn,kv=xr,Ed=gr,fm=Kb,qf=Yb,oh=(e,n)=>{const o=[];let r=e;for(;r&&r!==n;)o.push(r),r=r.parentNode;return o},gm=(e,n)=>e.hasChildNodes()&&n<e.childNodes.length?e.childNodes[n]:null,aC=(e,n)=>{if(jg(e)){if(Ed(n.previousSibling)&&!xd(n.previousSibling))return nt.before(n);if(xd(n))return nt(n,0)}if(rt(e)){if(Ed(n.nextSibling)&&!xd(n.nextSibling))return nt.after(n);if(xd(n))return nt(n,n.data.length)}return rt(e)?kv(n)?nt.before(n):nt.after(n):nt.before(n)},d0=(e,n)=>{const o=n.nextSibling;return o&&Ed(o)?xd(o)?nt(o,0):nt.before(o):Td(1,nt.after(n),e)},Td=(e,n,o)=>{let r,c,u,f;if(!rC(o)||!n)return null;if(n.isEqual(nt.after(o))&&o.lastChild){if(f=nt.after(o.lastChild),rt(e)&&Ed(o.lastChild)&&rC(o.lastChild))return kv(o.lastChild)?nt.before(o.lastChild):f}else f=n;const b=f.container();let v=f.offset();if(xd(b)){if(rt(e)&&v>0)return nt(b,--v);if(jg(e)&&v<b.length)return nt(b,++v);r=b}else{if(rt(e)&&v>0&&(c=gm(b,v-1),Ed(c)))return!fm(c)&&(u=l0(c,e,qf,c),u)?xd(u)?nt(u,u.data.length):nt.after(u):xd(c)?nt(c,c.data.length):nt.before(c);if(jg(e)&&v<b.childNodes.length&&(c=gm(b,v),Ed(c)))return kv(c)?d0(o,c):!fm(c)&&(u=l0(c,e,qf,c),u)?xd(u)?nt(u,0):nt.before(u):xd(c)?nt(c,0):nt.after(c);r=c||f.getNode()}if(r&&(jg(e)&&f.isAtEnd()||rt(e)&&f.isAtStart())&&(r=l0(r,e,ft,o,!0),qf(r,o)))return aC(e,r);c=r&&l0(r,e,qf,o);const x=U(tt(oh(b,o),sC));return x&&(!c||!x.contains(c))?(jg(e)?f=nt.after(x):f=nt.before(x),f):c?aC(e,c):null},Ad=e=>({next:n=>Td(1,n,e),prev:n=>Td(-1,n,e)}),lE=(e,n,o)=>{const r=e?nt.before(o):nt.after(o);return Gc(e,n,r)},cC=e=>xr(e)?nt.before(e):nt.after(e),iC=e=>nt.isTextPosition(e)?e.offset()===0:gr(e.getNode()),lC=e=>{if(nt.isTextPosition(e)){const n=e.container();return e.offset()===n.data.length}else return gr(e.getNode(!0))},uE=(e,n)=>!nt.isTextPosition(e)&&!nt.isTextPosition(n)&&e.getNode()===n.getNode(!0),mM=e=>!nt.isTextPosition(e)&&xr(e.getNode()),H4=(e,n,o)=>e?!uE(n,o)&&!mM(n)&&lC(n)&&iC(o):!uE(o,n)&&iC(n)&&lC(o),Gc=(e,n,o)=>{const r=Ad(n);return P.from(e?r.next(o):r.prev(o))},sh=(e,n,o)=>Gc(e,n,o).bind(r=>mm(o,r,n)&&H4(e,o,r)?Gc(e,n,r):P.some(r)),uC=(e,n,o,r)=>sh(e,n,o).bind(c=>r(c)?uC(e,n,c,r):P.some(c)),Gf=(e,n)=>{const o=e?n.firstChild:n.lastChild;return kt(o)?P.some(nt(o,e?0:o.data.length)):o?gr(o)?P.some(e?nt.before(o):cC(o)):lE(e,n,o):P.none()},Kc=Te(Gc,!0),Ci=Te(Gc,!1),Yc=Te(Gf,!0),Vu=Te(Gf,!1),ef="_mce_caret",Pi=e=>Cn(e)&&e.id===ef,hm=(e,n)=>{let o=n;for(;o&&o!==e;){if(Pi(o))return o;o=o.parentNode}return null},dE=e=>ie(e.start),fM=e=>to(e,"rng"),mE=e=>to(e,"id"),co=e=>to(e,"name"),Dv=e=>Mt.isArray(e.start),Xl=e=>!co(e)&&It(e.forward)?e.forward:!0,fE=(e,n)=>(Cn(n)&&e.isBlock(n)&&!n.innerHTML&&(n.innerHTML='<br data-mce-bogus="1" />'),n),z4=(e,n)=>{const o=P.from(sl(e.getRoot(),n.start)),r=P.from(sl(e.getRoot(),n.end));return nn(o,r,(c,u)=>{const f=e.createRng();return f.setStart(c.container(),c.offset()),f.setEnd(u.container(),u.offset()),{range:f,forward:Xl(n)}})},V4=(e,n)=>{var o;const c=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(ya);e.appendChild(c),n.setStart(c,0),n.setEnd(c,0)},U4=e=>!e.hasChildNodes(),gE=(e,n)=>Vu(e).fold(Ne,o=>(n.setStart(o.container(),o.offset()),n.setEnd(o.container(),o.offset()),!0)),dC=(e,n,o)=>U4(n)&&hm(e,n)?(V4(n,o),!0):!1,m0=(e,n,o,r)=>{const c=o[n?"start":"end"],u=e.getRoot();if(c){let f=u,b=c[0];for(let v=c.length-1;f&&v>=1;v--){const x=f.childNodes;if(dC(u,f,r))return!0;if(c[v]>x.length-1)return dC(u,f,r)?!0:gE(f,r);f=x[c[v]]}kt(f)&&(b=Math.min(c[0],f.data.length)),Cn(f)&&(b=Math.min(c[0],f.childNodes.length)),n?r.setStart(f,b):r.setEnd(f,b)}return!0},Jl=e=>kt(e)&&e.data.length>0,rh=(e,n,o)=>{const r=e.get(o.id+"_"+n),c=r==null?void 0:r.parentNode,u=o.keep;if(r&&c){let f,b;if(n==="start"?u?r.hasChildNodes()?(f=r.firstChild,b=1):Jl(r.nextSibling)?(f=r.nextSibling,b=0):Jl(r.previousSibling)?(f=r.previousSibling,b=r.previousSibling.data.length):(f=c,b=e.nodeIndex(r)+1):(f=c,b=e.nodeIndex(r)):u?r.hasChildNodes()?(f=r.firstChild,b=1):Jl(r.previousSibling)?(f=r.previousSibling,b=r.previousSibling.data.length):(f=c,b=e.nodeIndex(r)):(f=c,b=e.nodeIndex(r)),!u){const v=r.previousSibling,x=r.nextSibling;Mt.each(Mt.grep(r.childNodes),B=>{kt(B)&&(B.data=B.data.replace(/\uFEFF/g,""))});let D;for(;D=e.get(o.id+"_"+n);)e.remove(D,!0);if(kt(x)&&kt(v)&&!Po.browser.isOpera()){const B=v.data.length;v.appendData(x.data),e.remove(x),f=v,b=B}}return P.some(nt(f,b))}else return P.none()},W4=(e,n)=>{const o=e.createRng();return m0(e,!0,n,o)&&m0(e,!1,n,o)?P.some({range:o,forward:Xl(n)}):P.none()},Ov=(e,n)=>{const o=rh(e,"start",n),r=rh(e,"end",n);return nn(o,r.or(o),(c,u)=>{const f=e.createRng();return f.setStart(fE(e,c.container()),c.offset()),f.setEnd(fE(e,u.container()),u.offset()),{range:f,forward:Xl(n)}})},Z4=(e,n)=>P.from(e.select(n.name)[n.index]).map(o=>{const r=e.createRng();return r.selectNode(o),{range:r,forward:!0}}),Rv=(e,n)=>{const o=e.dom;if(n){if(Dv(n))return W4(o,n);if(dE(n))return z4(o,n);if(mE(n))return Ov(o,n);if(co(n))return Z4(o,n);if(fM(n))return P.some({range:n.rng,forward:Xl(n)})}return P.none()},ec=(e,n,o)=>av(e,n,o),j4=(e,n)=>{Rv(e,n).each(({range:o,forward:r})=>{e.setRng(o,r)})},rl=e=>Cn(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",Mv=(e=>n=>e===n)(ir),ah=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,mC=e=>!ah(e)&&!Mv(e)&&!qa(e),fC=e=>{const n=[];if(e)for(let o=0;o<e.rangeCount;o++)n.push(e.getRangeAt(o));return n},gC=e=>eo(e,n=>{const o=Vf(n);return o?[re.fromDom(o)]:[]}),q4=e=>fC(e).length>1,Bv=e=>tt(gC(e),nl),hE=e=>ot(e,"td[data-mce-selected],th[data-mce-selected]"),Fv=(e,n)=>{const o=hE(n);return o.length>0?o:Bv(e)},Kf=e=>Fv(fC(e.selection.getSel()),re.fromDom(e.getBody())),wp=(e,n)=>Wr(e,"table",n),hC=e=>{const n=e.startContainer,o=e.startOffset;return kt(n)?o===0?P.some(re.fromDom(n)):P.none():P.from(n.childNodes[o]).map(re.fromDom)},pE=e=>{const n=e.endContainer,o=e.endOffset;return kt(n)?o===n.data.length?P.some(re.fromDom(n)):P.none():P.from(n.childNodes[o-1]).map(re.fromDom)},tf=e=>Ta(e).fold(bt([e]),n=>[e].concat(tf(n))),Nv=e=>Vr(e).fold(bt([e]),n=>Oo(n)==="br"?qi(n).map(o=>[e].concat(Nv(o))).getOr([]):[e].concat(Nv(n))),pC=(e,n)=>nn(hC(n),pE(n),(o,r)=>{const c=rn(tf(e),Te(Yo,o)),u=rn(Nv(e),Te(Yo,r));return c.isSome()&&u.isSome()}).getOr(!1),Pv=(e,n,o,r)=>{const c=o,u=new Qs(o,c),f=Fc(e.schema.getMoveCaretBeforeOnEnterElements(),(v,x)=>!be(["td","th","table"],x.toLowerCase()));let b=o;do{if(kt(b)&&Mt.trim(b.data).length!==0){r?n.setStart(b,0):n.setEnd(b,b.data.length);return}if(f[b.nodeName]){r?n.setStartBefore(b):b.nodeName==="BR"?n.setEndBefore(b):n.setEndAfter(b);return}}while(b=r?u.next():u.prev());c.nodeName==="BODY"&&(r?n.setStart(c,0):n.setEnd(c,c.childNodes.length))},f0=e=>{const n=e.selection.getSel();return Fe(n)&&n.rangeCount>0},bC=(e,n)=>{const o=Kf(e);o.length>0?me(o,r=>{const c=r.dom,u=e.dom.createRng();u.setStartBefore(c),u.setEndAfter(c),n(u,!0)}):n(e.selection.getRng(),!1)},g0=(e,n,o)=>{const r=hr(e,n);o(r),e.moveToBookmark(r)},vC=(e,n)=>e.startContainer===e.endContainer&&e.endOffset-e.startOffset===1&&n(e.startContainer.childNodes[e.startOffset]),G4=e=>vC(e,dr),K4=e=>vC(e,kt),yC=e=>vC(e,Ou),h0=e=>Cs(e==null?void 0:e.nodeType),CC=e=>Cn(e)&&!rl(e)&&!Pi(e)&&!Tg(e),bE=(e,n)=>{if(CC(n)&&!/^(TD|TH)$/.test(n.nodeName)){const o=e.getAttrib(n,"data-mce-selected"),r=parseInt(o,10);return!isNaN(r)&&r>0}else return!1},$v=(e,n,o)=>{const{selection:r,dom:c}=e,u=r.getNode(),f=mr(u);g0(r,!0,()=>{n()}),f&&mr(u)&&c.isChildOf(u,e.getBody())?e.selection.select(u):o(r.getStart())&&Y4(c,r)},Y4=(e,n)=>{var o,r;const c=n.getRng(),{startContainer:u,startOffset:f}=c,b=n.getNode();if(!bE(e,b)&&Cn(u)){const v=u.childNodes,x=e.getRoot();let D;if(f<v.length){const B=v[f];D=new Qs(B,(o=e.getParent(B,e.isBlock))!==null&&o!==void 0?o:x)}else{const B=v[v.length-1];D=new Qs(B,(r=e.getParent(B,e.isBlock))!==null&&r!==void 0?r:x),D.next(!0)}for(let B=D.current();B;B=D.next()){if(e.getContentEditable(B)==="false")return;if(kt(B)&&!SC(B)){c.setStart(B,0),n.setRng(c);return}}}},vE=(e,n,o)=>{if(e){const r=n?"nextSibling":"previousSibling";for(e=e[r];e;e=e[r])if(Cn(e)||!SC(e))return e}},wC=(e,n)=>!!e.getTextBlockElements()[n.nodeName.toLowerCase()]||yt(e,n),Sp=(e,n,o)=>e.schema.isValidChild(n,o),SC=(e,n=!1)=>{if(Fe(e)&&kt(e)){const o=n?e.data.replace(/ /g,""):e.data;return $m(o)}else return!1},pr=e=>Fe(e)&&kt(e)&&e.length===0,yE=(e,n)=>{const o="[data-mce-cef-wrappable]",r=v4(e),c=Ai(r)?o:`${o},${r}`;return ki(re.fromDom(n),c)},CE=(e,n)=>{const o=e.dom;return CC(n)&&o.getContentEditable(n)==="false"&&yE(e,n)&&o.select('[contenteditable="true"]',n).length===0},l=(e,n)=>he(e)?e(n):(Fe(n)&&(e=e.replace(/%(\w+)/g,(o,r)=>n[r]||o)),e),m=(e,n)=>(e=e||"",n=n||"",e=""+(e.nodeName||e),n=""+(n.nodeName||n),e.toLowerCase()===n.toLowerCase()),p=(e,n)=>{if(vn(e))return null;{let o=String(e);return(n==="color"||n==="backgroundColor")&&(o=$g(o)),n==="fontWeight"&&e===700&&(o="bold"),n==="fontFamily"&&(o=o.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),o}},y=(e,n,o)=>{const r=e.getStyle(n,o);return p(r,o)},A=(e,n)=>{let o;return e.getParent(n,r=>Cn(r)?(o=e.getStyle(r,"text-decoration"),!!o&&o!=="none"):!1),o},R=(e,n,o)=>e.getParents(n,o,e.getRoot()),I=(e,n,o)=>{const r=e.formatter.get(n);return Fe(r)&&ke(r,o)},W=(e,n)=>I(e,n,r=>{const c=u=>he(u)||u.length>1&&u.charAt(0)==="%";return ke(["styles","attributes"],u=>Ss(r,u).exists(f=>{const b=Qe(f)?f:zr(f);return ke(b,c)}))}),ne=(e,n,o)=>{const r=["inline","block","selector","attributes","styles","classes"],c=u=>Fc(u,(f,b)=>ke(r,v=>v===b));return I(e,n,u=>{const f=c(u);return I(e,o,b=>{const v=c(b);return Wa(f,v)})})},ve=e=>os(e,"block"),Le=e=>ve(e)&&e.wrapper===!0,xt=e=>ve(e)&&e.wrapper!==!0,jt=e=>os(e,"selector"),Pt=e=>os(e,"inline"),Dn=e=>jt(e)&&Pt(e)&&At(Ss(e,"mixed"),!0),it=e=>jt(e)&&e.expand!==!1&&!Pt(e),Et=e=>{const n=[];let o=e;for(;o;){if(kt(o)&&o.data!==ya||o.childNodes.length>1)return[];Cn(o)&&n.push(o),o=o.firstChild}return n},zn=e=>Et(e).length>0,ho=e=>Pi(e.dom)&&zn(e.dom),un=rl,Fs=R,Ns=SC,Co=wC,ca=e=>xr(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,kl=(e,n)=>{let o=n;for(;o;){if(Cn(o)&&e.getContentEditable(o))return e.getContentEditable(o)==="false"?o:n;o=o.parentNode}return n},pm=(e,n,o,r)=>{const c=n.data;if(e){for(let u=o;u>0;u--)if(r(c.charAt(u-1)))return u}else for(let u=o;u<c.length;u++)if(r(c.charAt(u)))return u;return-1},Yf=(e,n,o)=>pm(e,n,o,r=>Mv(r)||ah(r)),ch=(e,n,o)=>pm(e,n,o,mC),Vs=(e,n,o,r,c,u)=>{let f;const b=e.getParent(o,B=>Cb(B)||e.isBlock(B)),v=Fe(b)?b:n,x=(B,N,H)=>{const te=pd(e),Q=c?te.backwards:te.forwards;return P.from(Q(B,N,(Y,Ae)=>un(Y.parentNode)?-1:(f=Y,H(c,Y,Ae)),v))};return x(o,r,Yf).bind(B=>u?x(B.container,B.offset+(c?-1:0),ch):P.some(B)).orThunk(()=>f?P.some({container:f,offset:c?0:f.length}):P.none())},Xc=(e,n,o,r,c)=>{const u=r[c];kt(r)&&Ai(r.data)&&u&&(r=u);const f=Fs(e,r);for(let b=0;b<f.length;b++)for(let v=0;v<n.length;v++){const x=n[v];if(!(Fe(x.collapsed)&&x.collapsed!==o.collapsed)&&jt(x)&&e.is(f[b],x.selector))return f[b]}return r},Jc=(e,n,o,r)=>{var c;let u=o;const f=e.getRoot(),b=n[0];if(ve(b)&&(u=b.wrapper?null:e.getParent(o,b.block,f)),!u){const v=(c=e.getParent(o,"LI,TD,TH,SUMMARY"))!==null&&c!==void 0?c:f;u=e.getParent(kt(o)?o.parentNode:o,x=>x!==f&&Co(e.schema,x),v)}if(u&&ve(b)&&b.wrapper&&(u=Fs(e,u,"ul,ol").reverse()[0]||u),!u)for(u=o;u&&u[r]&&!e.isBlock(u[r])&&(u=u[r],!m(u,"br")););return u||o},Ql=(e,n,o,r)=>{const c=o.parentNode;return Fe(o[r])?!1:c===n||vn(c)||e.isBlock(c)?!0:Ql(e,n,c,r)},Qc=(e,n,o,r,c,u)=>{let f=o;const b=c?"previousSibling":"nextSibling",v=e.getRoot();if(kt(o)&&!Ns(o)&&(c?r>0:r<o.data.length))return o;for(;f;){if(Cb(f))return o;if(!n[0].block_expand&&e.isBlock(f))return u?f:o;for(let x=f[b];x;x=x[b]){const D=kt(x)&&!Ql(e,v,x,b);if(!un(x)&&!ca(x)&&!Ns(x,D))return f}if(f===v||f.parentNode===v){o=f;break}f=f.parentNode}return o},nf=e=>un(e.parentNode)||un(e),wa=(e,n,o,r={})=>{const{includeTrailingSpace:c=!1,expandToBlock:u=!0}=r,f=e.getParent(n.commonAncestorContainer,H=>Cb(H)),b=Fe(f)?f:e.getRoot();let{startContainer:v,startOffset:x,endContainer:D,endOffset:B}=n;const N=o[0];return Cn(v)&&v.hasChildNodes()&&(v=qm(v,x),kt(v)&&(x=0)),Cn(D)&&D.hasChildNodes()&&(D=qm(D,n.collapsed?B:B-1),kt(D)&&(B=D.data.length)),v=kl(e,v),D=kl(e,D),nf(v)&&(v=un(v)?v:v.parentNode,n.collapsed?v=v.previousSibling||v:v=v.nextSibling||v,kt(v)&&(x=n.collapsed?v.length:0)),nf(D)&&(D=un(D)?D:D.parentNode,n.collapsed?D=D.nextSibling||D:D=D.previousSibling||D,kt(D)&&(B=n.collapsed?0:D.length)),n.collapsed&&(Vs(e,b,v,x,!0,c).each(({container:Q,offset:Y})=>{v=Q,x=Y}),Vs(e,b,D,B,!1,c).each(({container:Q,offset:Y})=>{D=Q,B=Y})),(Pt(N)||N.block_expand)&&((!Pt(N)||!kt(v)||x===0)&&(v=Qc(e,o,v,x,!0,u)),(!Pt(N)||!kt(D)||B===D.data.length)&&(D=Qc(e,o,D,B,!1,u))),it(N)&&(v=Xc(e,o,n,v,"previousSibling"),D=Xc(e,o,n,D,"nextSibling")),(ve(N)||jt(N))&&(v=Jc(e,o,v,"previousSibling"),D=Jc(e,o,D,"nextSibling"),ve(N)&&(e.isBlock(v)||(v=Qc(e,o,v,x,!0,u),kt(v)&&(x=0)),e.isBlock(D)||(D=Qc(e,o,D,B,!1,u),kt(D)&&(B=D.data.length)))),Cn(v)&&v.parentNode&&(x=e.nodeIndex(v),v=v.parentNode),Cn(D)&&D.parentNode&&(B=e.nodeIndex(D)+1,D=D.parentNode),{startContainer:v,startOffset:x,endContainer:D,endOffset:B}},xp=(e,n,o)=>{var r;const c=n.startOffset,u=qm(n.startContainer,c),f=n.endOffset,b=qm(n.endContainer,f-1),v=Y=>{const Ae=Y[0];kt(Ae)&&Ae===u&&c>=Ae.data.length&&Y.splice(0,1);const _e=Y[Y.length-1];return f===0&&Y.length>0&&_e===b&&kt(_e)&&Y.splice(Y.length-1,1),Y},x=(Y,Ae,_e)=>{const Pe=[];for(;Y&&Y!==_e;Y=Y[Ae])Pe.push(Y);return Pe},D=(Y,Ae)=>e.getParent(Y,_e=>_e.parentNode===Ae,Ae),B=(Y,Ae,_e)=>{const Pe=_e?"nextSibling":"previousSibling";for(let Ze=Y,ht=Ze.parentNode;Ze&&Ze!==Ae;Ze=ht){ht=Ze.parentNode;const Vt=x(Ze===Y?Ze:Ze[Pe],Pe);Vt.length&&(_e||Vt.reverse(),o(v(Vt)))}};if(u===b)return o(v([u]));const N=(r=e.findCommonAncestor(u,b))!==null&&r!==void 0?r:e.getRoot();if(e.isChildOf(u,b))return B(u,N,!0);if(e.isChildOf(b,u))return B(b,N);const H=D(u,N)||u,te=D(b,N)||b;B(u,H,!0);const Q=x(H===u?H:H.nextSibling,"nextSibling",te===b?te.nextSibling:te);Q.length&&o(v(Q)),B(b,te)},p0=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]","div.mce-footnotes"],of=e=>xs(e)&&uc(e)===ya,ei=(e,n,o,r)=>Di(n).fold(()=>"skipping",c=>r==="br"||of(n)?"valid":nM(n)?"existing":Pi(n.dom)?"caret":ke(p0,u=>ki(n,u))?"valid-block":!Sp(e,o,r)||!Sp(e,Oo(c),o)?"invalid-child":"valid"),X4=(e,n)=>{const o=wa(e.dom,n,[{inline:"span"}]);n.setStart(o.startContainer,o.startOffset),n.setEnd(o.endContainer,o.endOffset),e.selection.setRng(n)},wE=(e,n,o,r,c,u)=>{const{uid:f=n,...b}=o;di(e,Lu()),Cr(e,`${hd()}`,f),Cr(e,`${gd()}`,r);const{attributes:v={},classes:x=[]}=c(f,b);if(Ka(e,v),Sg(e,x),u){x.length>0&&Cr(e,`${em()}`,x.join(","));const D=dn(v);D.length>0&&Cr(e,`${Zm()}`,D.join(","))}},xn=e=>{Zr(e,Lu()),Qr(e,`${hd()}`),Qr(e,`${gd()}`),Qr(e,`${$f()}`);const n=Xi(e,`${Zm()}`).map(r=>r.split(",")).getOr([]),o=Xi(e,`${em()}`).map(r=>r.split(",")).getOr([]);me(n,r=>Qr(e,r)),Vh(e,o),Qr(e,`${em()}`),Qr(e,`${Zm()}`)},eu=(e,n,o,r,c)=>{const u=re.fromTag("span",e);return wE(u,n,o,r,c,!1),u},J4=(e,n,o,r,c,u)=>{const f=[],b=eu(e.getDoc(),o,u,r,c),v=rs(),x=()=>{v.clear()},D=()=>v.get().getOrThunk(()=>{const te=ta(b);return f.push(te),v.set(te),te}),B=te=>{me(te,N)},N=te=>{switch(ei(e,te,"span",Oo(te))){case"invalid-child":{x();const Y=wr(te);B(Y),x();break}case"valid-block":{x(),wE(te,o,u,r,c,!0);break}case"valid":{const Y=D();Oi(te,Y);break}}},H=te=>{const Q=Oe(te,re.fromDom);B(Q)};return xp(e.dom,n,te=>{x(),H(te)}),f},Iv=(e,n,o,r)=>{e.undoManager.transact(()=>{const c=e.selection,u=c.getRng(),f=Kf(e).length>0,b=jo("mce-annotation");if(u.collapsed&&!f&&X4(e,u),c.getRng().collapsed&&!f){const v=eu(e.getDoc(),b,r,n,o.decorate);ad(v,ir),c.getRng().insertNode(v.dom),c.select(v.dom)}else g0(c,!1,()=>{bC(e,v=>{J4(e,v,b,n,o.decorate,r)})})})},SE=e=>{const n=If();Ib(e,n);const o=QS(e,n),r=Jr("span"),c=u=>{me(u,f=>{r(f)?li(f):xn(f)})};return{register:(u,f)=>{n.register(u,f)},annotate:(u,f)=>{n.lookup(u).each(b=>{Iv(e,u,b,f)})},annotationChanged:(u,f)=>{o.addListener(u,f)},remove:u=>{p2(e,P.some(u)).each(({elements:f})=>{const b=e.selection.getBookmark();c(f),e.selection.moveToBookmark(b)})},removeAll:u=>{const f=e.selection.getBookmark();xo($b(e,u),(b,v)=>{c(b)}),e.selection.moveToBookmark(f)},getAll:u=>{const f=$b(e,u);return ac(f,b=>Oe(b,v=>v.dom))}}},bm=e=>({getBookmark:Te(ec,e),moveToBookmark:Te(j4,e)});bm.isBookmarkNode=rl;const hM=(e,n,o)=>o.collapsed?!1:ke(o.getClientRects(),r=>C2(r,e,n)),Q4=(e,n)=>{const o=xs(n)?uc(n).length:wr(n).length+1;return e>o?o:e<0?0:e},pM=e=>Kd.range(e.start,Q4(e.soffset,e.start),e.finish,Q4(e.foffset,e.finish)),xE=(e,n)=>!Yy(n.dom)&&(Lc(e,n)||Yo(e,n)),EE=e=>n=>xE(e,n.start)&&xE(e,n.finish),ek=e=>e.inline||Po.browser.isFirefox(),hL=e=>Kd.range(re.fromDom(e.startContainer),e.startOffset,re.fromDom(e.endContainer),e.endOffset),pL=e=>{const n=e.getSelection();return(!n||n.rangeCount===0?P.none():P.from(n.getRangeAt(0))).map(hL)},bL=e=>{const n=Hl(e);return pL(n.dom).filter(EE(e))},vL=(e,n)=>P.from(n).filter(EE(e)).map(pM),tk=e=>{const n=document.createRange();try{return n.setStart(e.start.dom,e.soffset),n.setEnd(e.finish.dom,e.foffset),P.some(n)}catch{return P.none()}},xC=e=>{const n=ek(e)?bL(re.fromDom(e.getBody())):P.none();e.bookmark=n.isSome()?n:e.bookmark},nk=e=>(e.bookmark?e.bookmark:P.none()).bind(o=>vL(re.fromDom(e.getBody()),o)).bind(tk),bM=e=>{nk(e).each(n=>e.selection.setRng(n))},TE={isEditorUIElement:e=>{const n=e.className.toString();return n.indexOf("tox-")!==-1||n.indexOf("mce-")!==-1}},yL=(e,n)=>(Cs(n)||(n=0),window.setTimeout(e,n)),CL=(e,n)=>(Cs(n)||(n=0),window.setInterval(e,n)),_d={setEditorTimeout:(e,n,o)=>yL(()=>{e.removed||n()},o),setEditorInterval:(e,n,o)=>{const r=CL(()=>{e.removed?window.clearInterval(r):n()},o);return r}},vM=(e,n)=>e.view(n).fold(bt([]),r=>{const c=e.owner(r),u=vM(e,c);return[r].concat(u)}),wL=(e,n)=>{const o=n.owner(e);return vM(n,o)};var CM=Object.freeze({__proto__:null,view:e=>{var n;return(e.dom===document?P.none():P.from((n=e.dom.defaultView)===null||n===void 0?void 0:n.frameElement)).map(re.fromDom)},owner:e=>hl(e)});const ok=e=>{const n=m1(),o=b1(n),r=wL(e,CM),c=wg(e),u=qe(r,(f,b)=>{const v=wg(b);return{left:f.left+v.left,top:f.top+v.top}},{left:0,top:0});return Ul(u.left+c.left+o.left,u.top+c.top+o.top)},xL=e=>e.type==="nodechange"&&e.selectionChange,EL=(e,n)=>{const o=()=>{n.throttle()};Is.DOM.bind(document,"mouseup",o),e.on("remove",()=>{Is.DOM.unbind(document,"mouseup",o)})},TL=(e,n)=>{e.on("mouseup touchend",o=>{n.throttle()})},AE=(e,n)=>{TL(e,n),e.on("keyup NodeChange AfterSetSelectionRange",o=>{xL(o)||xC(e)})},wM=e=>{const n=Gt(()=>{xC(e)},0);e.on("init",()=>{e.inline&&EL(e,n),AE(e,n)}),e.on("remove",()=>{n.cancel()})};let b0;const sk=Is.DOM,AL=e=>Cn(e)&&TE.isEditorUIElement(e),SM=e=>{const n=e.classList;return n!==void 0?n.contains("tox-edit-area")||n.contains("tox-edit-area__iframe")||n.contains("mce-content-body"):!1},rk=(e,n)=>{const o=Wf(e);return sk.getParent(n,c=>AL(c)||(o?e.dom.is(c,o):!1))!==null},xM=e=>{try{const n=Aa(re.fromDom(e.getElement()));return bl(n).fold(()=>document.body,o=>o.dom)}catch{return document.body}},_L=(e,n)=>{const o=n.editor;wM(o);const r=(u,f)=>{if(x4(u)&&u.inline!==!0){const b=re.fromDom(u.getContainer());f(b,"tox-edit-focus")}},c=u=>{if(!u.iframeElement)return;const b=re.fromDom(u.iframeElement),v=ok(b),x=vb(window);(v.top<x.y||v.top>x.bottom-25)&&b.dom.scrollIntoView({block:"center"})};o.on("focusin",()=>{const u=e.focusedEditor;if(SM(xM(o))&&r(o,di),u!==o){u&&u.dispatch("blur",{focusedEditor:o}),e.setActive(o),e.focusedEditor=o,o.dispatch("focus",{blurredEditor:u}),o.focus(!0);const f=Do().browser;o.inline!==!0&&(f.isSafari()||f.isChromium())&&c(o)}}),o.on("focusout",()=>{_d.setEditorTimeout(o,()=>{const u=e.focusedEditor;(!SM(xM(o))||u!==o)&&r(o,Zr),!rk(o,xM(o))&&u===o&&(o.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),b0||(b0=u=>{const f=e.activeEditor;f&&u1(u).each(b=>{const v=b;v.ownerDocument===document&&v!==document.body&&!rk(f,v)&&e.focusedEditor===f&&(f.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},sk.bind(document,"focusin",b0))},TX=(e,n)=>{e.focusedEditor===n.editor&&(e.focusedEditor=null),!e.activeEditor&&b0&&(sk.unbind(document,"focusin",b0),b0=null)},kL=e=>{e.on("AddEditor",Te(_L,e)),e.on("RemoveEditor",Te(TX,e))},DL=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="true"),AX=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="false")!==null,OL=e=>e.collapsed?P.from(qm(e.startContainer,e.startOffset)).map(re.fromDom):P.none(),Ar=(e,n)=>OL(n).bind(o=>yi(o)?P.some(o):Lc(e,o)?P.none():P.some(e)),_E=(e,n)=>{Ar(re.fromDom(e.getBody()),n).bind(o=>Yc(o.dom)).fold(()=>{e.selection.normalize()},o=>e.selection.setRng(o.toRange()))},v0=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},kE=e=>xu(e)||f1(e).isSome(),ih=e=>Fe(e.iframeElement)&&xu(re.fromDom(e.iframeElement)),DE=e=>{const n=e.getBody();return n&&kE(re.fromDom(n))},Lv=e=>{const n=Aa(re.fromDom(e.getElement()));return bl(n).filter(o=>!SM(o.dom)&&rk(e,o.dom)).isSome()},y0=e=>e.inline?DE(e):ih(e),ak=e=>y0(e)||Lv(e),RL=e=>{const n=e.selection,o=e.getBody();let r=n.getRng();e.quirks.refreshContentEditable();const c=f=>{nk(f).each(b=>{f.selection.setRng(b),r=b})};!y0(e)&&e.hasEditableRoot()&&c(e);const u=DL(e,n.getNode());if(u&&e.dom.isChildOf(u,o)){AX(e,u)||v0(o),v0(u),e.hasEditableRoot()||c(e),_E(e,r),OE(e);return}e.inline||(Po.browser.isOpera()||v0(o),e.getWin().focus()),(Po.browser.isFirefox()||e.inline)&&(v0(o),_E(e,r)),OE(e)},OE=e=>e.editorManager.setActive(e),ML=(e,n)=>{e.removed||(n?OE(e):RL(e))},Qt={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||Qt.metaKeyPressed(e),metaKeyPressed:e=>Po.os.isMacOS()||Po.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},Xf="data-mce-selected",Ep="table,img,figure.image,hr,video,span.mce-preview-object,details",Tp=Math.abs,EC=Math.round,ck={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},BL=e=>e.type==="longpress"||e.type.indexOf("touch")===0,EM=(e,n)=>{const o=n.dom,r=n.getDoc(),c=document,u=n.getBody();let f,b,v,x,D,B,N,H,te,Q,Y,Ae,_e,Pe,Ze;const ht=An=>Fe(An)&&(e2(An)||o.is(An,"figure.image")),Vt=An=>Ru(An)||o.hasClass(An,"mce-preview-object"),Ot=(An,Ht)=>{if(BL(An)){const on=An.touches[0];return ht(An.target)&&!hM(on.clientX,on.clientY,Ht)}else return ht(An.target)&&!hM(An.clientX,An.clientY,Ht)},lt=An=>{const Ht=An.target;Ot(An,n.selection.getRng())&&!An.isDefaultPrevented()&&n.selection.select(Ht)},Be=An=>o.hasClass(An,"mce-preview-object")&&Fe(An.firstElementChild)?[An,An.firstElementChild]:o.is(An,"figure.image")?[An.querySelector("img")]:[An],oe=An=>{const Ht=W2(n);return!Ht||n.mode.isReadOnly()||An.getAttribute("data-mce-resize")==="false"||An===n.getBody()?!1:o.hasClass(An,"mce-preview-object")&&Fe(An.firstElementChild)?ki(re.fromDom(An.firstElementChild),Ht):ki(re.fromDom(An),Ht)},je=(An,Ht)=>{if(Vt(Ht))return An.create("img",{src:Po.transparentSrc});if(Yd(Ht)){const Jn=jn(x.name,"n")?uo:ts,lo=Ht.cloneNode(!0);return Jn(An.select("tr",lo)).each(Us=>{const ar=An.select("td,th",Us);An.setStyle(Us,"height",null),me(ar,Id=>An.setStyle(Id,"height",null))}),lo}else return Ht.cloneNode(!0)},Dt=(An,Ht,on)=>{if(Fe(on)){const Jn=Be(An);me(Jn,lo=>{lo.style[Ht]||!n.schema.isValid(lo.nodeName.toLowerCase(),Ht)?o.setStyle(lo,Ht,on):o.setAttrib(lo,Ht,""+on)})}},kn=(An,Ht,on)=>{Dt(An,"width",Ht),Dt(An,"height",on)},io=An=>{let Ht,on,Jn,lo,Us;Ht=An.screenX-B,on=An.screenY-N,Ae=Ht*x[2]+H,_e=on*x[3]+te,Ae=Ae<5?5:Ae,_e=_e<5?5:_e,(ht(f)||Vt(f))&&vs(n)!==!1?Jn=!Qt.modifierPressed(An):Jn=Qt.modifierPressed(An),Jn&&(Tp(Ht)>Tp(on)?(_e=EC(Ae*Q),Ae=EC(_e/Q)):(Ae=EC(_e/Q),_e=EC(Ae*Q))),kn(b,Ae,_e),lo=x.startPos.x+Ht,Us=x.startPos.y+on,lo=lo>0?lo:0,Us=Us>0?Us:0,o.setStyles(v,{left:lo,top:Us,display:"block"}),v.innerHTML=Ae+" &times; "+_e,Ht=u.scrollWidth-Pe,on=u.scrollHeight-Ze,Ht+on!==0&&o.setStyles(v,{left:lo-Ht,top:Us-on}),Y||(s4(n,f,H,te,"corner-"+x.name),Y=!0)},zo=()=>{const An=Y;Y=!1,An&&(Dt(f,"width",Ae),Dt(f,"height",_e)),o.unbind(r,"mousemove",io),o.unbind(r,"mouseup",zo),c!==r&&(o.unbind(c,"mousemove",io),o.unbind(c,"mouseup",zo)),o.remove(b),o.remove(v),o.remove(D),is(f),An&&(N2(n,f,Ae,_e,"corner-"+x.name),o.setAttrib(f,"style",o.getAttrib(f,"style"))),n.nodeChanged()},is=An=>{On();const Ht=o.getPos(An,u),on=Ht.x,Jn=Ht.y,lo=An.getBoundingClientRect(),Us=lo.width||lo.right-lo.left,ar=lo.height||lo.bottom-lo.top;f!==An&&(Dr(),f=An,Ae=_e=0);const Id=n.dispatch("ObjectSelected",{target:An});oe(An)&&!Id.isDefaultPrevented()?xo(ck,(si,gf)=>{const Dm=hu=>{const hf=Be(f)[0];B=hu.screenX,N=hu.screenY,H=hf.clientWidth,te=hf.clientHeight,Q=te/H,x=si,x.name=gf,x.startPos={x:Us*si[0]+on,y:ar*si[1]+Jn},Pe=u.scrollWidth,Ze=u.scrollHeight,D=o.add(u,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),o.setStyles(D,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),b=je(o,f),o.addClass(b,"mce-clonedresizable"),o.setAttrib(b,"data-mce-bogus","all"),b.contentEditable="false",o.setStyles(b,{left:on,top:Jn,margin:0}),kn(b,Us,ar),b.removeAttribute(Xf),u.appendChild(b),o.bind(r,"mousemove",io),o.bind(r,"mouseup",zo),c!==r&&(o.bind(c,"mousemove",io),o.bind(c,"mouseup",zo)),v=o.add(u,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},H+" &times; "+te)};let Rl=o.get("mceResizeHandle"+gf);Rl&&o.remove(Rl),Rl=o.add(u,"div",{id:"mceResizeHandle"+gf,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+gf+"-resize; margin:0; padding:0"}),o.bind(Rl,"mousedown",hu=>{hu.stopImmediatePropagation(),hu.preventDefault(),Dm(hu)}),si.elm=Rl,o.setStyles(Rl,{left:Us*si[0]+on-Rl.offsetWidth/2,top:ar*si[1]+Jn-Rl.offsetHeight/2})}):Dr(!1)},kr=Gt(is,0),Dr=(An=!0)=>{kr.cancel(),On(),f&&An&&f.removeAttribute(Xf),xo(ck,(Ht,on)=>{const Jn=o.get("mceResizeHandle"+on);Jn&&(o.unbind(Jn),o.remove(Jn))})},Oc=(An,Ht)=>o.isChildOf(An,Ht),$t=An=>{if(Y||n.removed||n.composing)return;const Ht=An.type==="mousedown"?An.target:e.getNode(),on=dc(re.fromDom(Ht),Ep).map(lo=>lo.dom).filter(lo=>o.isEditable(lo.parentElement)||lo.nodeName==="IMG"&&o.isEditable(lo)).getOrUndefined(),Jn=Fe(on)?o.getAttrib(on,Xf,"1"):"1";if(me(o.select(`img[${Xf}],hr[${Xf}]`),lo=>{lo.removeAttribute(Xf)}),Fe(on)&&Oc(on,u)&&ak(n)){hs();const lo=e.getStart(!0);if(Oc(lo,on)&&Oc(e.getEnd(!0),on)){o.setAttrib(on,Xf,Jn),kr.throttle(on);return}}Dr()},On=()=>{xo(ck,An=>{An.elm&&(o.unbind(An.elm),delete An.elm)})},hs=()=>{try{n.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return n.on("init",()=>{hs(),n.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",$t),n.on("keyup compositionend",An=>{f&&f.nodeName==="TABLE"&&$t(An)}),n.on("hide blur",Dr),n.on("contextmenu longpress",lt,!0)}),n.on("remove",On),{isResizable:oe,showResizeRect:is,hideResizeRect:Dr,updateResizeRect:$t,destroy:()=>{kr.cancel(),f=b=D=null}}},TM=(e,n,o)=>{const r=Hl(re.fromDom(o));return Df(r.dom,e,n).map(c=>{const u=o.createRange();return u.setStart(c.start.dom,c.soffset),u.setEnd(c.finish.dom,c.foffset),u}).getOrUndefined()},ik=(e,n)=>Fe(e)&&Fe(n)&&e.startContainer===n.startContainer&&e.startOffset===n.startOffset&&e.endContainer===n.endContainer&&e.endOffset===n.endOffset,FL=(e,n,o)=>{let r=e;for(;r&&r!==n;){if(o(r))return r;r=r.parentNode}return null},lk=(e,n,o)=>FL(e,n,o)!==null,NL=(e,n,o)=>lk(e,n,r=>r.nodeName===o),PL=(e,n)=>Wc(e)&&!lk(e,n,Pi),AM=(e,n,o)=>{const r=n.parentNode;if(r){const c=new Qs(n,e.getParent(r,e.isBlock)||e.getRoot());let u;for(;u=c[o?"prev":"next"]();)if(xr(u))return!0}return!1},_X=(e,n)=>{var o;return((o=e.previousSibling)===null||o===void 0?void 0:o.nodeName)===n},$L=(e,n)=>{let o=n;for(;o&&o!==e;){if(mr(o))return!0;o=o.parentNode}return!1},tc=(e,n,o,r,c)=>{const u=e.getRoot(),f=e.schema.getNonEmptyElements(),b=c.parentNode;let v,x;if(!b)return P.none();const D=e.getParent(b,e.isBlock)||u;if(r&&xr(c)&&n&&e.isEmpty(D))return P.some(nt(b,e.nodeIndex(c)));const B=new Qs(c,D);for(;x=B[r?"prev":"next"]();){if(e.getContentEditableParent(x)==="false"||PL(x,u))return P.none();if(kt(x)&&x.data.length>0)return NL(x,u,"A")?P.none():P.some(nt(x,r?x.data.length:0));if(e.isBlock(x)||f[x.nodeName.toLowerCase()])return P.none();v=x}return $r(v)?P.none():o&&v?P.some(nt(v,0)):P.none()},TC=(e,n,o,r)=>{const c=e.getRoot();let u,f=!1,b=o?r.startContainer:r.endContainer,v=o?r.startOffset:r.endOffset;const x=Cn(b)&&v===b.childNodes.length,D=e.schema.getNonEmptyElements();let B=o;if(Wc(b))return P.none();if(Cn(b)&&v>b.childNodes.length-1&&(B=!1),Io(b)&&(b=c,v=0),b===c){if(B&&(u=b.childNodes[v>0?v-1:0],u&&(Wc(u)||D[u.nodeName]||Yd(u))))return P.none();if(b.hasChildNodes()){if(v=Math.min(!B&&v>0?v-1:v,b.childNodes.length-1),b=b.childNodes[v],v=kt(b)&&x?b.data.length:0,!n&&b===c.lastChild&&Yd(b)||$L(c,b)||Wc(b)||Sb(b))return P.none();if(b.hasChildNodes()&&!Yd(b)){u=b;const N=new Qs(b,c);do{if(mr(u)||Wc(u)){f=!1;break}if(kt(u)&&u.data.length>0){v=B?0:u.data.length,b=u,f=!0;break}if(D[u.nodeName.toLowerCase()]&&!t2(u)){v=e.nodeIndex(u),b=u.parentNode,B||v++,f=!0;break}}while(u=B?N.next():N.prev())}}}return n&&(kt(b)&&v===0&&tc(e,x,n,!0,b).each(N=>{b=N.container(),v=N.offset(),f=!0}),Cn(b)&&(u=b.childNodes[v],u||(u=b.childNodes[v-1]),u&&xr(u)&&!_X(u,"A")&&!AM(e,u,!1)&&!AM(e,u,!0)&&tc(e,x,n,!0,u).each(N=>{b=N.container(),v=N.offset(),f=!0}))),B&&!n&&kt(b)&&v===b.data.length&&tc(e,x,n,!1,b).each(N=>{b=N.container(),v=N.offset(),f=!0}),f&&b?P.some(nt(b,v)):P.none()},nc=(e,n)=>{const o=n.collapsed,r=n.cloneRange(),c=nt.fromRangeStart(n);return TC(e,o,!0,r).each(u=>{(!o||!nt.isAbove(c,u))&&r.setStart(u.container(),u.offset())}),o||TC(e,o,!1,r).each(u=>{r.setEnd(u.container(),u.offset())}),o&&r.collapse(!0),ik(n,r)?P.none():P.some(r)},tu=(e,n)=>e.splitText(n),RE=e=>{let n=e.startContainer,o=e.startOffset,r=e.endContainer,c=e.endOffset;if(n===r&&kt(n)){if(o>0&&o<n.data.length)if(r=tu(n,o),n=r.previousSibling,c>o){c=c-o;const u=tu(r,c).previousSibling;n=r=u,c=u.data.length,o=0}else c=0}else if(kt(n)&&o>0&&o<n.data.length&&(n=tu(n,o),o=0),kt(r)&&c>0&&c<r.data.length){const u=tu(r,c).previousSibling;r=u,c=u.data.length}return{startContainer:n,startOffset:o,endContainer:r,endOffset:c}},sf=e=>({walk:(u,f)=>xp(e,u,f),split:RE,expand:(u,f={type:"word"})=>{if(f.type==="word"){const b=wa(e,u,[{inline:"span"}],{includeTrailingSpace:!1,expandToBlock:!1}),v=e.createRng();return v.setStart(b.startContainer,b.startOffset),v.setEnd(b.endContainer,b.endOffset),v}return u},normalize:u=>nc(e,u).fold(Ne,f=>(u.setStart(f.startContainer,f.startOffset),u.setEnd(f.endContainer,f.endOffset),!0))});sf.compareRanges=ik,sf.getCaretRangeFromPoint=TM,sf.getSelectedNode=Vf,sf.getNode=qm;const uk=e=>Oo(e)==="textarea",dk=(e,n)=>e.dispatch("ScrollIntoView",n).isDefaultPrevented(),IL=(e,n)=>{e.dispatch("AfterScrollIntoView",n)},_M=(e,n)=>{const o=wr(e);if(o.length===0||uk(e))return{element:e,offset:n};if(n<o.length&&!uk(o[n]))return{element:o[n],offset:0};{const r=o[o.length-1];return uk(r)?{element:e,offset:n}:Oo(r)==="img"?{element:r,offset:1}:xs(r)?{element:r,offset:uc(r).length}:{element:r,offset:wr(r).length}}},kM=(e,n)=>{const o=Cg(e),r=Vy(e);return{element:e,bottom:o.top+r,height:r,pos:o,cleanup:n}},LL=(e,n)=>{const o=_M(e,n),r=re.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+ya+"</span>");return Ga(o.element,r),kM(r,()=>Ws(r))},HL=e=>kM(re.fromDom(e),Ct),nu=(e,n,o,r)=>{mk(e,(c,u)=>kX(e,n,o,r),o)},$i=(e,n,o,r,c)=>{const u={elm:r.element.dom,alignToTop:c};if(dk(e,u))return;const f=b1(n).top;o(e,n,f,r,c),IL(e,u)},kX=(e,n,o,r)=>{const c=re.fromDom(e.getBody()),u=re.fromDom(e.getDoc());h1(c);const f=LL(re.fromDom(o.startContainer),o.startOffset);$i(e,u,n,f,r),f.cleanup()},vm=(e,n,o,r)=>{const c=re.fromDom(e.getDoc());$i(e,c,o,HL(n),r)},mk=(e,n,o)=>{const r=o.startContainer,c=o.startOffset,u=o.endContainer,f=o.endOffset;n(re.fromDom(r),re.fromDom(u));const b=e.dom.createRng();b.setStart(r,c),b.setEnd(u,f),e.selection.setRng(o)},fk=(e,n,o,r,c)=>{const u=n.pos,f=30;if(r)mb(u.left,Math.max(0,u.top-f),c);else{const b=u.top-o+n.height+f;mb(-e.getBody().getBoundingClientRect().left,b,c)}},DM=(e,n,o,r,c,u)=>{const f=r+o,b=c.pos.top,v=c.bottom,x=v-b>=r;b<o?fk(e,c,r,u!==!1,n):b>f?fk(e,c,r,x?u!==!1:u===!0,n):v>f&&!x&&fk(e,c,r,u===!0,n)},gk=(e,n,o,r,c)=>{const u=Hl(n).dom.innerHeight;DM(e,n,o,u,r,c)},OM=(e,n,o,r,c)=>{const u=Hl(n).dom.innerHeight;DM(e,n,o,u,r,c);const f=ok(r.element),b=vb(window);f.top<b.y?yl(r.element,c!==!1):f.top>b.bottom&&yl(r.element,c===!0)},RM=(e,n,o)=>nu(e,gk,n,o),zL=(e,n,o)=>vm(e,n,gk,o),hk=(e,n,o)=>nu(e,OM,n,o),VL=(e,n,o)=>vm(e,n,OM,o),UL=(e,n,o)=>{(e.inline?zL:VL)(e,n,o)},AC=(e,n,o)=>{(e.inline?RM:hk)(e,n,o)},MM=(e,n)=>n.collapsed?e.isEditable(n.startContainer):e.isEditable(n.startContainer)&&e.isEditable(n.endContainer),pk=(e,n,o,r,c)=>{const u=o?n.startContainer:n.endContainer,f=o?n.startOffset:n.endOffset;return P.from(u).map(re.fromDom).map(b=>!r||!n.collapsed?pl(b,c(b,f)).getOr(b):b).bind(b=>Tr(b)?P.some(b):Hc(b).filter(Tr)).map(b=>b.dom).getOr(e)},ME=(e,n,o=!1)=>pk(e,n,!0,o,(r,c)=>Math.min(Vd(r),c)),bk=(e,n,o=!1)=>pk(e,n,!1,o,(r,c)=>c>0?c-1:c),BE=(e,n)=>{const o=e;for(;e&&kt(e)&&e.length===0;)e=n?e.nextSibling:e.previousSibling;return e||o},WL=(e,n)=>{if(!n)return e;let o=n.startContainer,r=n.endContainer;const c=n.startOffset,u=n.endOffset;let f=n.commonAncestorContainer;n.collapsed||(o===r&&u-c<2&&o.hasChildNodes()&&(f=o.childNodes[c]),kt(o)&&kt(r)&&(o.length===c?o=BE(o.nextSibling,!0):o=o.parentNode,u===0?r=BE(r.previousSibling,!1):r=r.parentNode,o&&o===r&&(f=o)));const b=kt(f)?f.parentNode:f;return dr(b)?b:e},DX=(e,n,o,r)=>{const c=[],u=e.getRoot(),f=e.getParent(o||ME(u,n,n.collapsed),e.isBlock),b=e.getParent(r||bk(u,n,n.collapsed),e.isBlock);if(f&&f!==u&&c.push(f),f&&b&&f!==b){let v;const x=new Qs(f,u);for(;(v=x.next())&&v!==b;)e.isBlock(v)&&c.push(v)}return b&&f!==b&&b!==u&&c.push(b),c},OX=(e,n,o)=>P.from(n).bind(r=>P.from(r.parentNode).map(c=>{const u=e.nodeIndex(r),f=e.createRng();return f.setStart(c,u),f.setEnd(c,u+1),o&&(Pv(e,f,r,!0),Pv(e,f,r,!1)),f})),vk=(e,n)=>Oe(n,o=>{const r=e.dispatch("GetSelectionRange",{range:o});return r.range!==o?r.range:o}),BM={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},FE=(e,n,o)=>{const r=o?"lastChild":"firstChild",c=o?"prev":"next";if(e[r])return e[r];if(e!==n){let u=e[c];if(u)return u;for(let f=e.parent;f&&f!==n;f=f.parent)if(u=f[c],u)return u}},ZL=e=>{var n;const o=(n=e.value)!==null&&n!==void 0?n:"";if(!$m(o))return!1;const r=e.parent;return!(r&&(r.name!=="span"||r.attr("style"))&&/^[ ]+$/.test(o))},FM=e=>{const n=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||n};class Ii{static create(n,o){const r=new Ii(n,BM[n]||1);return o&&xo(o,(c,u)=>{r.attr(u,c)}),r}constructor(n,o){this.name=n,this.type=o,o===1&&(this.attributes=[],this.attributes.map={})}replace(n){const o=this;return n.parent&&n.remove(),o.insert(n,o),o.remove(),o}attr(n,o){const r=this;if(!ie(n))return Fe(n)&&xo(n,(u,f)=>{r.attr(f,u)}),r;const c=r.attributes;if(c){if(o!==void 0){if(o===null){if(n in c.map){delete c.map[n];let u=c.length;for(;u--;)if(c[u].name===n)return c.splice(u,1),r}return r}if(n in c.map){let u=c.length;for(;u--;)if(c[u].name===n){c[u].value=o;break}}else c.push({name:n,value:o});return c.map[n]=o,r}return c.map[n]}}clone(){const n=this,o=new Ii(n.name,n.type),r=n.attributes;if(r){const c=[];c.map={};for(let u=0,f=r.length;u<f;u++){const b=r[u];b.name!=="id"&&(c[c.length]={name:b.name,value:b.value},c.map[b.name]=b.value)}o.attributes=c}return o.value=n.value,o}wrap(n){const o=this;return o.parent&&(o.parent.insert(n,o),n.append(o)),o}unwrap(){const n=this;for(let o=n.firstChild;o;){const r=o.next;n.insert(o,n,!0),o=r}n.remove()}remove(){const n=this,o=n.parent,r=n.next,c=n.prev;return o&&(o.firstChild===n?(o.firstChild=r,r&&(r.prev=null)):c&&(c.next=r),o.lastChild===n?(o.lastChild=c,c&&(c.next=null)):r&&(r.prev=c),n.parent=n.next=n.prev=null),n}append(n){const o=this;n.parent&&n.remove();const r=o.lastChild;return r?(r.next=n,n.prev=r,o.lastChild=n):o.lastChild=o.firstChild=n,n.parent=o,n}insert(n,o,r){n.parent&&n.remove();const c=o.parent||this;return r?(o===c.firstChild?c.firstChild=n:o.prev&&(o.prev.next=n),n.prev=o.prev,n.next=o,o.prev=n):(o===c.lastChild?c.lastChild=n:o.next&&(o.next.prev=n),n.next=o.next,n.prev=o,o.next=n),n.parent=c,n}getAll(n){const o=this,r=[];for(let c=o.firstChild;c;c=FE(c,o))c.name===n&&r.push(c);return r}children(){const n=this,o=[];for(let r=n.firstChild;r;r=r.next)o.push(r);return o}empty(){const n=this;if(n.firstChild){const o=[];for(let c=n.firstChild;c;c=FE(c,n))o.push(c);let r=o.length;for(;r--;){const c=o[r];c.parent=c.firstChild=c.lastChild=c.next=c.prev=null}}return n.firstChild=n.lastChild=null,n}isEmpty(n,o={},r){var c;const u=this;let f=u.firstChild;if(FM(u))return!1;if(f)do{if(f.type===1){if(f.attr("data-mce-bogus"))continue;if(n[f.name]||FM(f))return!1}if(f.type===8||f.type===3&&!ZL(f)||f.type===3&&f.parent&&o[f.parent.name]&&$m((c=f.value)!==null&&c!==void 0?c:"")||r&&r(f))return!1}while(f=FE(f,u));return!0}walk(n){return FE(this,null,n)}}const RX=Mt.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),yk=e=>ie(e.nodeValue)&&e.nodeValue.includes(ya),Ck=e=>`${e.length===0?"":`${Oe(e,n=>`[${n}]`).join(",")},`}[data-mce-bogus="all"]`,jL=(e,n)=>n.querySelectorAll(Ck(e)),NM=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,n=>yk(n)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),PM=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,n=>{if(yk(n)){const o=n.parentNode;return o&&to(RX,o.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}else return NodeFilter.FILTER_SKIP}),MX=e=>NM(e).nextNode()!==null,BX=e=>PM(e).nextNode()!==null,FX=(e,n)=>n.querySelector(Ck(e))!==null,qL=(e,n)=>{me(jL(e,n),o=>{const r=re.fromDom(o);nr(r,"data-mce-bogus")==="all"?Ws(r):me(e,c=>{lr(r,c)&&Qr(r,c)})})},GL=e=>{let n=e.nextNode();for(;n!==null;)n.nodeValue=null,n=e.nextNode()},KL=k(GL,NM),C0=k(GL,PM),$M=(e,n)=>{const o=[{condition:Te(FX,n),action:Te(qL,n)},{condition:MX,action:KL},{condition:BX,action:C0}];let r=e,c=!1;return me(o,({condition:u,action:f})=>{u(r)&&(c||(r=e.cloneNode(!0),c=!0),f(r))}),r},wk=e=>{const n=ot(e,"[data-mce-bogus]");me(n,o=>{nr(o,"data-mce-bogus")==="all"?Ws(o):tm(o)?(Ga(o,re.fromText(ja)),Ws(o)):li(o)})},Sk=e=>{const n=ot(e,"input");me(n,o=>{Qr(o,"name")})},IM=(e,n)=>{const o=pc(e),r=new RegExp(`^(<${o}[^>]*>(&nbsp;|&#160;|\\s||<br \\/>|)<\\/${o}>[\r
]*|<br \\/>[\r
]*)$`);return n.replace(r,"")},LM=(e,n)=>{const o=e.getDoc(),r=Aa(re.fromDom(e.getBody())),c=re.fromTag("div",o);Cr(c,"data-mce-bogus","all"),ui(c,{position:"fixed",left:"-9999999px",top:"0"}),ad(c,n.innerHTML),wk(c),Sk(c);const u=lb(r);ds(u,c);const f=Bi(c.dom.innerText);return Ws(c),f},xk=(e,n,o)=>{let r;return n.format==="raw"?r=Mt.trim(Bi($M(o,e.serializer.getTempAttrs()).innerHTML)):n.format==="text"?r=LM(e,o):n.format==="tree"?r=e.serializer.serialize(o,n):r=IM(e,e.serializer.serialize(o,n)),n.format!=="text"&&!ol(re.fromDom(o))&&ie(r)?Mt.trim(r):r},NX=(e,n)=>P.from(e.getBody()).fold(bt(n.format==="tree"?new Ii("body",11):""),o=>xk(e,n,o)),HM=Mt.makeMap,YL=e=>{const n=[];e=e||{};const o=e.indent,r=HM(e.indent_before||""),c=HM(e.indent_after||""),u=Og.getEncodeFunc(e.entity_encoding||"raw",e.entities),f=e.element_format!=="xhtml";return{start:(b,v,x)=>{if(o&&r[b]&&n.length>0){const D=n[n.length-1];D.length>0&&D!==`
`&&n.push(`
`)}if(n.push("<",b),v)for(let D=0,B=v.length;D<B;D++){const N=v[D];n.push(" ",N.name,'="',u(N.value,!0),'"')}if(!x||f?n[n.length]=">":n[n.length]=" />",x&&o&&c[b]&&n.length>0){const D=n[n.length-1];D.length>0&&D!==`
`&&n.push(`
`)}},end:b=>{let v;n.push("</",b,">"),o&&c[b]&&n.length>0&&(v=n[n.length-1],v.length>0&&v!==`
`&&n.push(`
`))},text:(b,v)=>{b.length>0&&(n[n.length]=v?b:u(b))},cdata:b=>{n.push("<![CDATA[",b,"]]>")},comment:b=>{n.push("<!--",b,"-->")},pi:(b,v)=>{v?n.push("<?",b," ",u(v),"?>"):n.push("<?",b,"?>"),o&&n.push(`
`)},doctype:b=>{n.push("<!DOCTYPE",b,">",o?`
`:"")},reset:()=>{n.length=0},getContent:()=>n.join("").replace(/\n$/,"")}},Ap=(e={},n=Pu())=>{const o=YL(e);return e.validate="validate"in e?e.validate:!0,{serialize:c=>{const u=e.validate,f={3:v=>{var x;o.text((x=v.value)!==null&&x!==void 0?x:"",v.raw)},8:v=>{var x;o.comment((x=v.value)!==null&&x!==void 0?x:"")},7:v=>{o.pi(v.name,v.value)},10:v=>{var x;o.doctype((x=v.value)!==null&&x!==void 0?x:"")},4:v=>{var x;o.cdata((x=v.value)!==null&&x!==void 0?x:"")},11:v=>{let x=v;if(x=x.firstChild)do b(x);while(x=x.next)}};o.reset();const b=v=>{var x;const D=f[v.type];if(D)D(v);else{const B=v.name,N=B in n.getVoidElements();let H=v.attributes;if(u&&H&&H.length>1){const te=[];te.map={};const Q=n.getElementRule(v.name);if(Q){for(let Y=0,Ae=Q.attributesOrder.length;Y<Ae;Y++){const _e=Q.attributesOrder[Y];if(_e in H.map){const Pe=H.map[_e];te.map[_e]=Pe,te.push({name:_e,value:Pe})}}for(let Y=0,Ae=H.length;Y<Ae;Y++){const _e=H[Y].name;if(!(_e in te.map)){const Pe=H.map[_e];te.map[_e]=Pe,te.push({name:_e,value:Pe})}}H=te}}if(o.start(B,H,N),hi(B))ie(v.value)&&o.text(v.value,!0),o.end(B);else if(!N){let te=v.firstChild;if(te){(B==="pre"||B==="textarea")&&te.type===3&&((x=te.value)===null||x===void 0?void 0:x[0])===`
`&&o.text(`
`,!0);do b(te);while(te=te.next)}o.end(B)}}};return c.type===1&&!e.inner?b(c):c.type===3?f[3](c):f[11](c),o.getContent()}}},zM=new Set;me(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],n=>{zM.add(n)});const NE=new Set;me(["background-color"],n=>{NE.add(n)});const Ek=["font","text-decoration","text-emphasis"],PX=(e,n)=>e.parseStyle(e.getAttrib(n,"style")),_C=(e,n)=>dn(PX(e,n)),$X=e=>zM.has(e),XL=e=>NE.has(e),JL=(e,n)=>ke(_C(e,n),o=>$X(o)),QL=(e,n)=>JL(e,n)&&ke(_C(e,n),o=>XL(o)),VM=e=>tt(e,n=>ke(Ek,o=>jn(n,o))),e9=(e,n,o)=>{const r=_C(e,n),c=_C(e,o),u=f=>{var b,v;const x=(b=e.getStyle(n,f))!==null&&b!==void 0?b:"",D=(v=e.getStyle(o,f))!==null&&v!==void 0?v:"";return Js(x)&&Js(D)&&x!==D};return ke(r,f=>{const b=v=>ke(v,x=>x===f);if(!b(c)&&b(Ek)){const v=VM(c);return ke(v,u)}else return u(f)})},Tk=(e,n,o)=>P.from(o.container()).filter(kt).exists(r=>{const c=e?0:-1;return n(r.data.charAt(o.offset()+c))}),UM=Te(Tk,!0,ah),Ak=Te(Tk,!1,ah),WM=e=>{const n=e.container();return kt(n)&&(n.data.length===0||Wb(n.data)&&bm.isBookmarkNode(n.parentNode))},_p=(e,n)=>o=>nC(e?0:-1,o).filter(n).isSome(),ZM=e=>e2(e)&&Pr(re.fromDom(e),"display")==="block",jM=e=>mr(e)&&!TS(e),t9=_p(!0,ZM),n9=_p(!1,ZM),kC=_p(!0,Ru),DC=_p(!1,Ru),qM=_p(!0,Yd),_k=_p(!1,Yd),kp=_p(!0,jM),Dp=_p(!1,jM),o9=e=>e.slice(0,-1),s9=(e,n,o)=>Lc(n,e)?o9(ic(e,r=>o(r)||Yo(r,n))):[],GM=(e,n)=>s9(e,n,Ne),Xt=(e,n)=>[e].concat(GM(e,n)),ym=(e,n,o)=>uC(e,n,o,WM),IX=e=>n=>e.isBlock(Oo(n)),KM=(e,n,o)=>rn(Xt(re.fromDom(n.container()),e),IX(o)),PE=(e,n,o,r)=>ym(e,n.dom,o).forall(c=>KM(n,o,r).fold(()=>!mm(c,o,n.dom),u=>!mm(c,o,n.dom)&&Lc(u,re.fromDom(c.container())))),kk=(e,n,o,r)=>KM(n,o,r).fold(()=>ym(e,n.dom,o).forall(c=>!mm(c,o,n.dom)),c=>ym(e,c.dom,o).isNone()),$E=Te(kk,!1),IE=Te(kk,!0),r9=Te(PE,!1),YM=Te(PE,!0),a9=e=>yp(e).exists(tm),LE=(e,n,o,r)=>{const c=tt(Xt(re.fromDom(o.container()),n),f=>r.isBlock(Oo(f))),u=uo(c).getOr(n);return Gc(e,u.dom,o).filter(a9)},Dk=(e,n,o)=>yp(n).exists(tm)||LE(!0,e,n,o).isSome(),HE=(e,n,o)=>u0(n).exists(tm)||LE(!1,e,n,o).isSome(),XM=Te(LE,!1),zE=Te(LE,!0),JM=e=>nt.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),QM=(e,n,o)=>{const r=tt(Xt(re.fromDom(n.container()),e),c=>o.isBlock(Oo(c)));return uo(r).getOr(e)},eB=(e,n,o)=>JM(n)?Ak(n):Ak(n)||Ci(QM(e,n,o).dom,n).exists(Ak),tB=(e,n,o)=>JM(n)?UM(n):UM(n)||Kc(QM(e,n,o).dom,n).exists(UM),c9=e=>be(["pre","pre-wrap"],e),VE=e=>yp(e).bind(n=>Ls(n,Tr)).exists(n=>c9(Pr(n,"white-space"))),UE=(e,n)=>Ci(e.dom,n).isNone(),i9=(e,n)=>Kc(e.dom,n).isNone(),l9=(e,n,o)=>UE(e,n)||i9(e,n)||$E(e,n,o)||IE(e,n,o)||HE(e,n,o)||Dk(e,n,o),u9=e=>Fe(e)&&mr(e)&&rE(e),nB=(e,n)=>o=>u9(new Qs(o,e)[n]()),d9=(e,n)=>{const o=Kc(e.dom,n).getOr(n),r=nB(e.dom,"next");return n.isAtEnd()&&(r(n.container())||r(o.container()))},m9=(e,n)=>{const o=Ci(e.dom,n).getOr(n),r=nB(e.dom,"prev");return n.isAtStart()&&(r(n.container())||r(o.container()))},oB=(e,n,o)=>VE(n)?!1:l9(e,n,o)||eB(e,n,o)||tB(e,n,o),OC=(e,n,o)=>VE(n)?!1:$E(e,n,o)||r9(e,n,o)||HE(e,n,o)||eB(e,n,o)||m9(e,n),f9=e=>{const n=e.container(),o=e.offset();return kt(n)&&o<n.data.length?nt(n,o+1):e},RC=(e,n,o)=>VE(n)?!1:IE(e,n,o)||YM(e,n,o)||Dk(e,n,o)||tB(e,n,o)||d9(e,n),Ok=(e,n,o)=>OC(e,n,o)||RC(e,f9(n),o),sB=(e,n)=>Mv(e.charAt(n)),rB=(e,n)=>ah(e.charAt(n)),g9=e=>{const n=e.container();return kt(n)&&er(n.data,ir)},aB=e=>{const n=e.split("");return Oe(n,(o,r)=>Mv(o)&&r>0&&r<n.length-1&&mC(n[r-1])&&mC(n[r+1])?" ":o).join("")},cB=(e,n,o,r)=>{const c=n.data,u=nt(n,0);return!o&&sB(c,0)&&!Ok(e,u,r)?(n.data=" "+c.slice(1),!0):o&&rB(c,0)&&OC(e,u,r)?(n.data=ir+c.slice(1),!0):!1},h9=e=>{const n=e.data,o=aB(n);return o!==n?(e.data=o,!0):!1},MC=(e,n,o,r)=>{const c=n.data,u=nt(n,c.length-1);return!o&&sB(c,c.length-1)&&!Ok(e,u,r)?(n.data=c.slice(0,-1)+" ",!0):o&&rB(c,c.length-1)&&RC(e,u,r)?(n.data=c.slice(0,-1)+ir,!0):!1},w0=(e,n,o)=>{const r=n.container();if(!kt(r))return P.none();if(g9(n)){const c=cB(e,r,!1,o)||h9(r)||MC(e,r,!1,o);return Qo(c,n)}else if(Ok(e,n,o)){const c=cB(e,r,!0,o)||MC(e,r,!0,o);return Qo(c,n)}else return P.none()},WE=e=>{const n=re.fromDom(e.getBody());e.selection.isCollapsed()&&w0(n,nt.fromRangeStart(e.selection.getRng()),e.schema).each(o=>{e.selection.setRng(o.toRange())})},iB=(e,n,o,r)=>{if(o===0)return;const c=re.fromDom(e),u=ku(c,x=>r.isBlock(Oo(x))).getOr(c),f=e.data.slice(n,n+o),b=n+o>=e.data.length&&RC(u,nt(e,e.data.length),r),v=n===0&&OC(u,nt(e,0),r);e.replaceData(n,o,Ky(f,4,v,b))},ZE=(e,n,o)=>{const r=e.data.slice(n),c=r.length-Ju(r).length;iB(e,n,c,o)},Rk=(e,n,o)=>{const r=e.data.slice(0,n),c=r.length-bu(r).length;iB(e,n-c,c,o)},Mk=(e,n,o,r,c=!0)=>{const u=bu(e.data).length,f=c?e:n,b=c?n:e;return c?f.appendData(b.data):f.insertData(0,b.data),Ws(re.fromDom(b)),r&&ZE(f,u,o),f},lB=(e,n)=>{const o=e.container(),r=e.offset();return!nt.isTextPosition(e)&&o===n.parentNode&&r>nt.before(n).offset()},p9=(e,n)=>lB(n,e)?nt(n.container(),n.offset()-1):n,b9=e=>kt(e)?nt(e,0):nt.before(e),uB=e=>kt(e)?nt(e,e.data.length):nt.after(e),dB=e=>gr(e.previousSibling)?P.some(uB(e.previousSibling)):e.previousSibling?Vu(e.previousSibling):P.none(),Bk=e=>gr(e.nextSibling)?P.some(b9(e.nextSibling)):e.nextSibling?Yc(e.nextSibling):P.none(),v9=(e,n)=>P.from(n.previousSibling?n.previousSibling:n.parentNode).bind(o=>Ci(e,nt.before(o))).orThunk(()=>Kc(e,nt.after(n))),y9=(e,n)=>Kc(e,nt.after(n)).orThunk(()=>Ci(e,nt.before(n))),C9=(e,n)=>dB(n).orThunk(()=>Bk(n)).orThunk(()=>v9(e,n)),mB=(e,n)=>Bk(n).orThunk(()=>dB(n)).orThunk(()=>y9(e,n)),Fk=(e,n,o)=>e?mB(n,o):C9(n,o),fB=(e,n,o)=>Fk(e,n,o).map(Te(p9,o)),gB=(e,n,o)=>{o.fold(()=>{e.focus()},r=>{e.selection.setRng(r.toRange(),n)})},w9=e=>n=>n.dom===e,jE=(e,n)=>n&&to(e.schema.getBlockElements(),Oo(n)),S9=(e,n,o)=>{if(gi(e,n)){const r=re.fromHtml('<br data-mce-bogus="1">');return o?me(wr(n),c=>{ho(c)||Ws(c)}):vl(n),ds(n,r),P.some(nt.before(r.dom))}else return P.none()},hB=(e,n,o,r)=>{const c=qi(e).filter(xs),u=zc(e).filter(xs);return Ws(e),bo(c,u,n,(f,b,v)=>{const x=f.dom,D=b.dom,B=x.data.length;return Mk(x,D,o,r),v.container()===D?nt(x,B):v}).orThunk(()=>(r&&(c.each(f=>Rk(f.dom,f.dom.length,o)),u.each(f=>ZE(f.dom,0,o))),n))},Nk=(e,n)=>to(e.schema.getTextInlineElements(),Oo(n)),lh=(e,n,o,r=!0,c=!1)=>{const u=fB(n,e.getBody(),o.dom),f=ku(o,Te(jE,e),w9(e.getBody())),b=hB(o,u,e.schema,Nk(e,o));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):f.bind(v=>S9(e.schema,v,c)).fold(()=>{r&&gB(e,n,b)},v=>{r&&gB(e,n,P.some(v))})},x9=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,E9=e=>x9.test(e),Jf=(e,n)=>ki(re.fromDom(n),U2(e))&&!yt(e.schema,n)&&e.dom.isEditable(n),Pk=e=>{var n;return Is.DOM.getStyle(e,"direction",!0)==="rtl"||E9((n=e.textContent)!==null&&n!==void 0?n:"")},pB=(e,n,o)=>tt(Is.DOM.getParents(o.container(),"*",n),e),uh=(e,n,o)=>{const r=pB(e,n,o);return P.from(r[r.length-1])},bB=(e,n,o)=>{const r=dm(n,e),c=dm(o,e);return Fe(r)&&r===c},vB=e=>jb(e)||N1(e),Uu=(e,n)=>{const o=n.container(),r=n.offset();return e?Es(o)?kt(o.nextSibling)?nt(o.nextSibling,0):nt.after(o):jb(n)?nt(o,r+1):n:Es(o)?kt(o.previousSibling)?nt(o.previousSibling,o.previousSibling.data.length):nt.before(o):N1(n)?nt(o,r-1):n},$k=Te(Uu,!0),Ik=Te(Uu,!1),Lk=(e,n)=>{const o=r=>r.stopImmediatePropagation();e.on("beforeinput input",o,!0),e.getDoc().execCommand(n),e.off("beforeinput input",o)},yB=e=>{e.execCommand("delete")},qE=e=>Lk(e,"Delete"),CB=e=>Lk(e,"ForwardDelete"),T9=e=>n=>At(Hc(n),e,Yo),A9=e=>ap(e)||nm(e),GE=(e,n)=>Lc(e,n)?Ls(n,A9,T9(e)):P.none(),Hk=(e,n=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!n})},wB=(e,n,o)=>nn(Yc(o),Vu(o),(r,c)=>{const u=Uu(!0,r),f=Uu(!1,c),b=Uu(!1,n);return e?Kc(o,b).exists(v=>v.isEqual(f)&&n.isEqual(u)):Ci(o,b).exists(v=>v.isEqual(u)&&n.isEqual(f))}).getOr(!0),SB=e=>(Il(e)?qi(e):Vr(e)).bind(SB).orThunk(()=>P.some(e)),xB=(e,n,o,r=!0)=>{var c;n.deleteContents();const u=SB(o).getOr(o),f=re.fromDom((c=e.dom.getParent(u.dom,e.dom.isBlock))!==null&&c!==void 0?c:o.dom);if(f.dom===e.getBody()?Hk(e,r):gi(e.schema,f,{checkRootAsContent:!1})&&(om(f),r&&e.selection.setCursorLocation(f.dom,0)),!Yo(o,f)){const b=At(Hc(f),o)?[]:_s(f);me(b.concat(wr(o)),v=>{!Yo(v,f)&&!Lc(v,f)&&gi(e.schema,v)&&Ws(v)})}},_9=e=>n=>Yo(e,n),KE=e=>ot(e,"td,th"),k9=(e,n)=>wp(re.fromDom(e),n),LX=e=>nn(e.startTable,e.endTable,(n,o)=>{const r=go(n,u=>Yo(u,o)),c=go(o,u=>Yo(u,n));return!r&&!c?e:{...e,startTable:r?P.none():e.startTable,endTable:c?P.none():e.endTable,isSameTable:!1,isMultiTable:!1}}).getOr(e),D9=e=>LX(e),HX=(e,n)=>{const o=k9(e.startContainer,n),r=k9(e.endContainer,n),c=o.isSome(),u=r.isSome(),f=nn(o,r,Yo).getOr(!1);return D9({startTable:o,endTable:r,isStartInTable:c,isEndInTable:u,isSameTable:f,isMultiTable:!f&&c&&u})},zk=(e,n)=>({start:e,end:n}),wi=(e,n,o)=>({rng:e,table:n,cells:o}),BC=Za.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),Vk=(e,n)=>dc(re.fromDom(e),"td,th",n),EB=e=>!Yo(e.start,e.end),TB=(e,n)=>wp(e.start,n).bind(o=>wp(e.end,n).bind(r=>Qo(Yo(o,r),o))),ou=(e,n)=>!EB(e)&&TB(e,n).exists(o=>{const r=o.dom.rows;return r.length===1&&r[0].cells.length===1}),zX=(e,n)=>{const o=Vk(e.startContainer,n),r=Vk(e.endContainer,n);return nn(o,r,zk)},O9=e=>n=>wp(n,e).bind(o=>ts(KE(o)).map(r=>zk(n,r))),VX=e=>n=>wp(n,e).bind(o=>uo(KE(o)).map(r=>zk(r,n))),Uk=e=>n=>TB(n,e).map(o=>wi(n,o,KE(o))),AB=(e,n,o,r)=>{if(o.collapsed||!e.forall(EB))return P.none();if(n.isSameTable){const c=e.bind(Uk(r));return P.some({start:c,end:c})}else{const c=Vk(o.startContainer,r),u=Vk(o.endContainer,r),f=c.bind(O9(r)).bind(Uk(r)),b=u.bind(VX(r)).bind(Uk(r));return P.some({start:f,end:b})}},R9=(e,n)=>To(e,o=>Yo(o,n)),Wk=e=>nn(R9(e.cells,e.rng.start),R9(e.cells,e.rng.end),(n,o)=>e.cells.slice(n,o+1)),su=(e,n,o)=>e.exists(r=>ou(r,o)&&pC(r.start,n)),Zk=(e,n)=>{const{startTable:o,endTable:r}=n,c=e.cloneRange();return o.each(u=>c.setStartAfter(u.dom)),r.each(u=>c.setEndBefore(u.dom)),c},_B=(e,n,o,r)=>AB(e,n,o,r).bind(({start:c,end:u})=>c.or(u)).bind(c=>{const{isSameTable:u}=n,f=Wk(c).getOr([]);if(u&&c.cells.length===f.length)return P.some(BC.fullTable(c.table));if(f.length>0){if(u)return P.some(BC.partialTable(f,P.none()));{const b=Zk(o,n);return P.some(BC.partialTable(f,P.some({...n,rng:b})))}}else return P.none()}),M9=(e,n,o,r)=>AB(e,n,o,r).bind(({start:c,end:u})=>{const f=c.bind(Wk).getOr([]),b=u.bind(Wk).getOr([]);if(f.length>0&&b.length>0){const v=Zk(o,n);return P.some(BC.multiTable(f,b,v))}else return P.none()}),B9=(e,n)=>{const o=_9(e),r=zX(n,o),c=HX(n,o);return su(r,n,o)?r.map(u=>BC.singleCellTable(n,u.start)):c.isMultiTable?M9(r,c,n,o):_B(r,c,n,o)},jk=e=>me(e,n=>{Qr(n,"contenteditable"),om(n)}),kB=(e,n)=>P.from(e.dom.getParent(n,e.dom.isBlock)).map(re.fromDom),F9=(e,n,o)=>{o.each(r=>{n?Ws(r):(om(r),e.selection.setCursorLocation(r.dom,0))})},qk=(e,n,o,r)=>{const c=o.cloneRange();r?(c.setStart(o.startContainer,o.startOffset),c.setEndAfter(n.dom.lastChild)):(c.setStartBefore(n.dom.firstChild),c.setEnd(o.endContainer,o.endOffset)),Gk(e,c,n,!1).each(u=>u())},DB=e=>{const n=Kf(e),o=re.fromDom(e.selection.getNode());Xd(o.dom)&&gi(e.schema,o)?e.selection.setCursorLocation(o.dom,0):e.selection.collapse(!0),n.length>1&&ke(n,r=>Yo(r,o))&&Cr(o,"data-mce-selected","1")},OB=(e,n,o)=>P.some(()=>{const r=e.selection.getRng(),c=o.bind(({rng:u,isStartInTable:f})=>{const b=kB(e,f?u.endContainer:u.startContainer);u.deleteContents(),F9(e,f,b.filter(Te(gi,e.schema)));const v=f?n[0]:n[n.length-1];return qk(e,v,r,f),gi(e.schema,v)?P.none():P.some(f?n.slice(1):n.slice(0,-1))}).getOr(n);jk(c),DB(e)}),RB=(e,n,o,r)=>P.some(()=>{const c=e.selection.getRng(),u=n[0],f=o[o.length-1];qk(e,u,c,!0),qk(e,f,c,!1);const b=gi(e.schema,u)?n:n.slice(1),v=gi(e.schema,f)?o:o.slice(0,-1);jk(b.concat(v)),r.deleteContents(),DB(e)}),Gk=(e,n,o,r=!0)=>P.some(()=>{xB(e,n,o,r)}),MB=(e,n)=>P.some(()=>lh(e,!1,n)),N9=(e,n,o)=>B9(n,o).bind(r=>r.fold(Te(Gk,e),Te(MB,e),Te(OB,e),Te(RB,e))),UX=(e,n)=>Op(e,n),P9=(e,n,o,r)=>Kk(n,r).fold(()=>N9(e,n,o),c=>UX(e,c)),$9=(e,n,o)=>{const r=re.fromDom(e.getBody()),c=e.selection.getRng();return o.length!==0?OB(e,o,P.none()):P9(e,r,c,n)},I9=(e,n)=>rn(Xt(n,e),nl),Kk=(e,n)=>rn(Xt(n,e),Jr("caption")),ms=(e,n,o,r,c)=>sh(o,e.getBody(),c).bind(u=>I9(n,re.fromDom(u.getNode())).bind(f=>Yo(f,r)?P.none():P.some(Ct))),Op=(e,n)=>P.some(()=>{om(n),e.selection.setCursorLocation(n.dom,0)}),dh=(e,n,o,r)=>Yc(e.dom).bind(c=>Vu(e.dom).map(u=>n?o.isEqual(c)&&r.isEqual(u):o.isEqual(u)&&r.isEqual(c))).getOr(!0),S0=(e,n)=>Op(e,n),YE=(e,n,o)=>Kk(e,re.fromDom(o.getNode())).fold(()=>P.some(Ct),r=>Qo(!Yo(r,n),Ct)),Yk=(e,n,o,r,c)=>sh(o,e.getBody(),c).fold(()=>P.some(Ct),u=>dh(r,o,c,u)?S0(e,r):YE(n,r,u)),Xk=(e,n,o,r)=>{const c=nt.fromRangeStart(e.selection.getRng());return I9(o,r).bind(u=>gi(e.schema,u,{checkRootAsContent:!1})?Op(e,u):ms(e,o,n,u,c))},BB=(e,n,o,r)=>{const c=nt.fromRangeStart(e.selection.getRng());return gi(e.schema,r)?Op(e,r):Yk(e,o,n,r,c)},FB=(e,n)=>e?qM(n):_k(n),NB=(e,n)=>{const o=nt.fromRangeStart(e.selection.getRng());return FB(n,o)||Gc(n,e.getBody(),o).exists(r=>FB(n,r))},PB=(e,n,o)=>{const r=re.fromDom(e.getBody());return Kk(r,o).fold(()=>Xk(e,n,r,o).orThunk(()=>Qo(NB(e,n),Ct)),c=>BB(e,n,r,c))},Jk=(e,n)=>{const o=re.fromDom(e.selection.getStart(!0)),r=Kf(e);return e.selection.isCollapsed()&&r.length===0?PB(e,n,o):$9(e,o,r)},x0=(e,n)=>{let o=n;for(;o&&o!==e;){if(fi(o)||mr(o))return o;o=o.parentNode}return null},L9=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],H9=Mt.each,Qk=e=>{const n=e.dom,o=new Set(e.serializer.getTempAttrs()),r=(u,f)=>{if(u.nodeName!==f.nodeName||u.nodeType!==f.nodeType)return!1;const b=x=>{const D={};return H9(n.getAttribs(x),B=>{const N=B.nodeName.toLowerCase();N!=="style"&&!c(N)&&(D[N]=n.getAttrib(x,N))}),D},v=(x,D)=>{for(const B in x)if(to(x,B)){const N=D[B];if(Kn(N)||x[B]!==N)return!1;delete D[B]}for(const B in D)if(to(D,B))return!1;return!0};return Cn(u)&&Cn(f)&&(!v(b(u),b(f))||!v(n.parseStyle(n.getAttrib(u,"style")),n.parseStyle(n.getAttrib(f,"style"))))?!1:!rl(u)&&!rl(f)},c=u=>ke(L9,f=>jn(u,f))||o.has(u);return{compare:r,isAttributeInternal:c}},$B=(e,n)=>{if(kt(e))return{container:e,offset:n};const o=sf.getNode(e,n);return kt(o)?{container:o,offset:n>=e.childNodes.length?o.data.length:0}:o.previousSibling&&kt(o.previousSibling)?{container:o.previousSibling,offset:o.previousSibling.data.length}:o.nextSibling&&kt(o.nextSibling)?{container:o.nextSibling,offset:0}:{container:e,offset:n}},IB=e=>{const n=e.cloneRange(),o=$B(e.startContainer,e.startOffset);n.setStart(o.container,o.offset);const r=$B(e.endContainer,e.endOffset);return n.setEnd(r.container,r.offset),n},Hv=Is.DOM,WX=()=>Hv.create("span",{"data-mce-type":"bookmark"}),z9=(e,n,o)=>{if(Cn(e)){const r=o();return e.hasChildNodes()?n===e.childNodes.length?e.appendChild(r):e.insertBefore(r,e.childNodes[n]):e.appendChild(r),{container:r,offset:0}}else return{container:e,offset:n}},V9=(e,n)=>{const o=r=>{var c;let u=(c=r.parentNode)===null||c===void 0?void 0:c.firstChild,f=0;for(;u;){if(u===r)return f;(!Cn(u)||u.getAttribute("data-mce-type")!=="bookmark")&&f++,u=u.nextSibling}return-1};if(Cn(e)&&Fe(e.parentNode)){const r=e;n=o(e),e=e.parentNode,Hv.remove(r),!e.hasChildNodes()&&Hv.isBlock(e)&&e.appendChild(Hv.create("br"))}return{container:e,offset:n}},LB=(e,n,o,r)=>{const c=Hv.createRng();return c.setStart(e,n),c.setEnd(o,r),IB(c)},Rp=(e,n=WX)=>{const{container:o,offset:r}=z9(e.startContainer,e.startOffset,n);if(e.collapsed)return{startContainer:o,startOffset:r};{const{container:c,offset:u}=z9(e.endContainer,e.endOffset,n);return{startContainer:o,startOffset:r,endContainer:c,endOffset:u}}},Mp=e=>{const{container:n,offset:o}=V9(e.startContainer,e.startOffset);if(!Kn(e.endContainer)&&!Kn(e.endOffset)){const{container:r,offset:c}=V9(e.endContainer,e.endOffset);return LB(n,o,r,c)}else return LB(n,o,n,o)},HB=(e,n,o,r)=>{if(Mt.each(o.styles,(c,u)=>{e.setStyle(n,u,l(c,r))}),o.styles){const c=e.getAttrib(n,"style");c&&e.setAttrib(n,"data-mce-style",c)}},zv=(e,n,o,r,c)=>{const u=e.dom;he(o.onformat)&&o.onformat(n,o,r,c),HB(u,n,o,r),Mt.each(o.attributes,(f,b)=>{u.setAttrib(n,b,l(f,r))}),Mt.each(o.classes,f=>{const b=l(f,r);u.hasClass(n,b)||u.addClass(n,b)})},ZX=e=>!Qe(e.attributes)&&!Qe(e.styles),e3=m,al=(e,n,o)=>{const r=e.formatter.get(o);if(r)for(let c=0;c<r.length;c++){const u=r[c];if(jt(u)&&u.inherit===!1&&e.dom.is(n,u.selector))return!0}return!1},zB=(e,n,o,r,c)=>{const u=e.dom.getRoot();if(n===u)return!1;const f=e.dom.getParent(n,b=>al(e,b,o)?!0:b.parentNode===u||!!Cm(e,b,o,r,!0));return!!Cm(e,f,o,r,c)},XE=(e,n,o)=>Pt(o)&&e3(n,o.inline)||ve(o)&&e3(n,o.block)?!0:jt(o)?Cn(n)&&e.is(n,o.selector):!1,t3=(e,n,o,r,c,u)=>{const f=o[r],b=r==="attributes";if(he(o.onmatch))return o.onmatch(n,o,r);if(f){if(ed(f)){for(let v=0;v<f.length;v++)if(b?e.getAttrib(n,f[v]):y(e,n,f[v]))return!0}else for(const v in f)if(to(f,v)){const x=b?e.getAttrib(n,v):y(e,n,v),D=l(f[v],u),B=vn(x)||Ai(x);if(B&&vn(D))continue;if(c&&B&&!o.exact||(!c||o.exact)&&!e3(x,p(D,v)))return!1}}return!0},Cm=(e,n,o,r,c)=>{const u=e.formatter.get(o),f=e.dom;if(u&&Cn(n))for(let b=0;b<u.length;b++){const v=u[b];if(XE(e.dom,n,v)&&t3(f,n,v,"attributes",c,r)&&t3(f,n,v,"styles",c,r)){const x=v.classes;if(x){for(let D=0;D<x.length;D++)if(!e.dom.hasClass(n,l(x[D],r)))return}return v}}},n3=(e,n,o,r,c)=>{if(r)return zB(e,r,n,o,c);if(r=e.selection.getNode(),zB(e,r,n,o,c))return!0;const u=e.selection.getStart();return!!(u!==r&&zB(e,u,n,o,c))},U9=(e,n,o)=>{const r=[],c={},u=e.selection.getStart();return e.dom.getParent(u,f=>{for(let b=0;b<n.length;b++){const v=n[b];!c[v]&&Cm(e,f,v,o)&&(c[v]=!0,r.push(v))}},e.dom.getRoot()),r},W9=(e,n)=>{const o=c=>Yo(c,re.fromDom(e.getBody())),r=(c,u)=>Cm(e,c.dom,u)?P.some(u):P.none();return P.from(e.selection.getStart(!0)).bind(c=>Vc(re.fromDom(c),u=>ks(n,f=>r(u,f)),o)).getOrNull()},o3=(e,n)=>{const o=e.formatter.get(n),r=e.dom;if(o&&e.selection.isEditable()){const c=e.selection.getStart(),u=R(r,c);for(let f=o.length-1;f>=0;f--){const b=o[f];if(!jt(b))return!0;for(let v=u.length-1;v>=0;v--)if(r.is(u[v],b.selector))return!0}}return!1},jX=(e,n,o)=>st(o,(r,c)=>{const u=W(e,c);return e.formatter.matchNode(n,c,{},u)?r.concat([c]):r},[]),FC=ya,Z9=(e,n)=>e.importNode(n,!0),Ys=e=>{if(e){const n=new Qs(e,e);for(let o=n.current();o;o=n.next())if(kt(o))return o}return null},s3=e=>{const n=re.fromTag("span");return Ka(n,{id:ef,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&ds(n,re.fromText(FC)),n},j9=e=>{const n=Ys(e);return n&&n.data.charAt(0)===FC&&n.deleteData(0,1),n},E0=(e,n,o)=>{const r=e.dom,c=e.selection;if(zn(n))lh(e,!1,re.fromDom(n),o,!0);else{const u=c.getRng(),f=r.getParent(n,r.isBlock),b=u.startContainer,v=u.startOffset,x=u.endContainer,D=u.endOffset,B=j9(n);r.remove(n,!0),b===B&&v>0&&u.setStart(B,v-1),x===B&&D>0&&u.setEnd(B,D-1),f&&r.isEmpty(f)&&om(re.fromDom(f)),c.setRng(u)}},JE=(e,n,o)=>{const r=e.dom,c=e.selection;if(n)E0(e,n,o);else if(n=hm(e.getBody(),c.getStart()),!n)for(;n=r.get(ef);)E0(e,n,o)},q9=(e,n,o)=>{var r,c;const u=e.dom,f=u.getParent(o,Te(wC,e.schema));f&&u.isEmpty(f)?(r=o.parentNode)===null||r===void 0||r.replaceChild(n,o):(b2(re.fromDom(o)),u.isEmpty(o)?(c=o.parentNode)===null||c===void 0||c.replaceChild(n,o):u.insertAfter(n,o))},VB=(e,n)=>(e.appendChild(n),n),UB=(e,n)=>{var o;const r=qe(e,(u,f)=>VB(u,f.cloneNode(!1)),n),c=(o=r.ownerDocument)!==null&&o!==void 0?o:document;return VB(r,c.createTextNode(FC))},WB=(e,n,o,r,c,u)=>{const f=e.formatter,b=e.dom,v=tt(dn(f.get()),B=>B!==r&&!er(B,"removeformat")),x=jX(e,o,v);if(tt(x,B=>!ne(e,B,r)).length>0){const B=o.cloneNode(!1);return b.add(n,B),f.remove(r,c,B,u),b.remove(B),P.some(B)}else return P.none()},ZB=e=>v1(e,uc(e).replace(new RegExp(`${ir}$`)," ")),G9=(e,n)=>{const o=()=>{n!==null&&!e.dom.isEmpty(n)&&qi(re.fromDom(n)).each(r=>{xs(r)?ZB(r):Af(r,c=>xs(c)).each(c=>{xs(c)&&ZB(c)})})};e.once("input",r=>{r.data&&!ah(r.data)&&(r.isComposing?e.once("compositionend",()=>{o()}):o())})},qX=(e,n,o)=>{let r;const c=e.selection,u=e.formatter.get(n);if(!u)return;const f=c.getRng();let b=f.startOffset;const x=f.startContainer.nodeValue;r=hm(e.getBody(),c.getStart());const D=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(x&&b>0&&b<x.length&&D.test(x.charAt(b))&&D.test(x.charAt(b-1))){const B=c.getBookmark();f.collapse(!0);let N=wa(e.dom,f,u);N=RE(N),e.formatter.apply(n,o,N),c.moveToBookmark(B)}else{let B=r?Ys(r):null;(!r||(B==null?void 0:B.data)!==FC)&&(r=Z9(e.getDoc(),s3(!0).dom),B=r.firstChild,f.insertNode(r),b=1,G9(e,r)),e.formatter.apply(n,o,r),c.setCursorLocation(B,b)}},K9=(e,n,o,r)=>{const c=e.dom,u=e.selection;let f=!1;const b=e.formatter.get(n);if(!b)return;const v=u.getRng(),x=v.startContainer,D=v.startOffset;let B=x;kt(x)&&(D!==x.data.length&&(f=!0),B=B.parentNode);const N=[];let H;for(;B;){if(Cm(e,B,n,o,r)){H=B;break}B.nextSibling&&(f=!0),N.push(B),B=B.parentNode}if(H)if(f){const te=u.getBookmark();v.collapse(!0);let Q=wa(c,v,b,{includeTrailingSpace:!0});Q=RE(Q),e.formatter.remove(n,o,Q,r),u.moveToBookmark(te)}else{const te=hm(e.getBody(),H),Q=Fe(te)?c.getParents(H.parentNode,ft,te):[],Y=s3(!1).dom;q9(e,Y,te??H);const Ae=WB(e,Y,H,n,o,r),_e=UB([...N,...Ae.toArray(),...Q],Y);te&&E0(e,te,Fe(te)),u.setCursorLocation(_e,1),G9(e,Y),c.isEmpty(H)&&c.remove(H)}},Y9=(e,n,o)=>{const r=e.selection,c=e.getBody();JE(e,null,o),(n===8||n===46)&&r.isCollapsed()&&r.getStart().innerHTML===FC&&JE(e,hm(c,r.getStart()),!0),(n===37||n===39)&&JE(e,hm(c,r.getStart()),!0)},X9=e=>kt(e)&&fa(e.data,ir),J9=e=>{e.on("mouseup keydown",n=>{Y9(e,n.keyCode,X9(e.selection.getRng().endContainer))})},r3=e=>{const n=s3(!1),o=UB(e,n.dom);return{caretContainer:n,caretPosition:nt(o,0)}},jB=(e,n)=>{const{caretContainer:o,caretPosition:r}=r3(n);return Ga(re.fromDom(e),o),Ws(re.fromDom(e)),r},Jo=(e,n)=>{const{caretContainer:o,caretPosition:r}=r3(n);return e.insertNode(o.dom),r},a3=(e,n)=>{if(Pi(n.dom))return!1;const o=e.schema.getTextInlineElements();return to(o,Oo(n))&&!Pi(n.dom)&&!Tg(n.dom)},Vv=["fontWeight","fontStyle","color","fontSize","fontFamily"],NC=e=>en(e.styles)&&ke(dn(e.styles),n=>be(Vv,n)),PC=e=>rn(e,n=>Pt(n)&&n.inline==="span"&&NC(n)),Uv=(e,n)=>{const o=e.get(n);return Qe(o)?PC(o):P.none()},c3=(e,n)=>Ci(n,nt.fromRangeStart(e)).isNone(),Q9=(e,n)=>Kc(n,nt.fromRangeEnd(e)).exists(o=>!xr(o.getNode())||Kc(n,o).isSome())===!1,eH=e=>n=>n2(n)&&e.isEditable(n),GX=e=>{const n=e.getSelectedBlocks(),o=e.getRng();if(e.isCollapsed())return[];if(n.length===1)return c3(o,n[0])&&Q9(o,n[0])?n:[];{const r=uo(n).filter(f=>c3(o,f)).toArray(),c=ts(n).filter(f=>Q9(o,f)).toArray(),u=n.slice(1,-1);return r.concat(u).concat(c)}},KX=e=>tt(GX(e),eH(e.dom)),qB=e=>tt(e.getSelectedBlocks(),eH(e.dom)),GB=Mt.each,i3=e=>Cn(e)&&!rl(e)&&!Pi(e)&&!Tg(e),KB=(e,n)=>{for(let o=e;o;o=o[n]){if(kt(o)&&Js(o.data))return e;if(Cn(o)&&!rl(o))return o}return e},tH=(e,n,o)=>{const r=Qk(e),c=dr(n)&&e.dom.isEditable(n),u=dr(o)&&e.dom.isEditable(o);if(c&&u){const f=KB(n,"previousSibling"),b=KB(o,"nextSibling");if(r.compare(f,b)){for(let v=f.nextSibling;v&&v!==b;){const x=v;v=v.nextSibling,f.appendChild(x)}return e.dom.remove(b),Mt.each(Mt.grep(b.childNodes),v=>{f.appendChild(v)}),f}}return o},YB=(e,n,o,r)=>{var c;if(r&&n.merge_siblings!==!1){const u=(c=tH(e,vE(r),r))!==null&&c!==void 0?c:r;tH(e,u,vE(u,!0))}},br=(e,n,o)=>{if(n.clear_child_styles){const r=n.links?"*:not(a)":"*";GB(e.select(r,o),c=>{i3(c)&&e.isEditable(c)&&GB(n.styles,(u,f)=>{e.setStyle(c,f,"")})})}},XB=(e,n,o)=>{GB(e.childNodes,r=>{i3(r)&&(n(r)&&o(r),r.hasChildNodes()&&XB(r,n,o))})},YX=(e,n)=>{n.nodeName==="SPAN"&&e.getAttribs(n).length===0&&e.remove(n,!0)},JB=(e,n)=>o=>!!(o&&y(e,o,n)),Wv=(e,n,o)=>r=>{e.setStyle(r,n,o),r.getAttribute("style")===""&&r.removeAttribute("style"),YX(e,r)},T0=Za.generate([{keep:[]},{rename:["name"]},{removed:[]}]),nH=/^(src|href|style)$/,rf=Mt.each,fs=m,oc=e=>/^(TR|TH|TD)$/.test(e.nodeName),af=(e,n,o)=>e.isChildOf(n,o)&&n!==o&&!e.isBlock(o),QB=(e,n,o)=>{let r=n[o?"startContainer":"endContainer"],c=n[o?"startOffset":"endOffset"];if(Cn(r)){const u=r.childNodes.length-1;!o&&c&&c--,r=r.childNodes[c>u?u:c]}return kt(r)&&o&&c>=r.data.length&&(r=new Qs(r,e.getBody()).next()||r),kt(r)&&!o&&c===0&&(r=new Qs(r,e.getBody()).prev()||r),r},eF=(e,n)=>{const o=n?"firstChild":"lastChild",r=e[o];return oc(e)&&r?e.nodeName==="TR"&&r[o]||r:e},l3=(e,n,o,r)=>{var c;const u=e.create(o,r);return(c=n.parentNode)===null||c===void 0||c.insertBefore(u,n),u.appendChild(n),u},tF=(e,n,o,r,c)=>{const u=re.fromDom(n),f=re.fromDom(e.create(r,c)),b=o?Ea(u):Na(u);return Yi(f,b),o?(Ga(u,f),Eu(f,u)):(Ki(u,f),ds(f,u)),f.dom},nF=(e,n)=>n.links&&e.nodeName==="A",Zv=(e,n,o)=>{const r=n.parentNode;let c;const u=e.dom,f=pc(e);ve(o)&&r===u.getRoot()&&(!o.list_block||!fs(n,o.list_block))&&me(So(n.childNodes),b=>{Sp(e,f,b.nodeName.toLowerCase())?c?c.appendChild(b):(c=l3(u,b,f),u.setAttribs(c,gp(e))):c=null}),!(Dn(o)&&!fs(o.inline,n))&&u.remove(n,!0)},u3=(e,n,o)=>Cs(e)?{name:n,value:null}:{name:e,value:l(n,o)},d3=(e,n)=>{e.getAttrib(n,"style")===""&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style"))},oF=(e,n,o,r,c)=>{let u=!1;rf(o.styles,(f,b)=>{const{name:v,value:x}=u3(b,f,r),D=p(x,v);(o.remove_similar||K(x)||!Cn(c)||fs(y(e,c,v),D))&&e.setStyle(n,v,""),u=!0}),u&&d3(e,n)},oH=(e,n,o)=>{n==="removeformat"?me(qB(e.selection),r=>{me(Vv,c=>e.dom.setStyle(r,c,"")),d3(e.dom,r)}):Uv(e.formatter,n).each(r=>{me(qB(e.selection),c=>oF(e.dom,c,r,o,null))})},m3=(e,n,o,r,c)=>{const u=e.dom,f=Qk(e),b=e.schema;if(Pt(n)&&Ac(b,n.inline)&&yt(b,r)&&r.parentElement===e.getBody())return Zv(e,r,n),T0.removed();if(!n.ceFalseOverride&&r&&u.getContentEditableParent(r)==="false"||r&&!XE(u,r,n)&&!nF(r,n))return T0.keep();const v=r,x=n.preserve_attributes;if(Pt(n)&&n.remove==="all"&&Qe(x)){const D=tt(u.getAttribs(v),B=>be(x,B.name.toLowerCase()));if(u.removeAllAttribs(v),me(D,B=>u.setAttrib(v,B.name,B.value)),D.length>0)return T0.rename("span")}if(n.remove!=="all"){oF(u,v,n,o,c),rf(n.attributes,(B,N)=>{const{name:H,value:te}=u3(N,B,o);if(n.remove_similar||K(te)||!Cn(c)||fs(u.getAttrib(c,H),te)){if(H==="class"){const Q=u.getAttrib(v,H);if(Q){let Y="";if(me(Q.split(/\s+/),Ae=>{/mce\-\w+/.test(Ae)&&(Y+=(Y?" ":"")+Ae)}),Y){u.setAttrib(v,H,Y);return}}}if(nH.test(H)&&v.removeAttribute("data-mce-"+H),H==="style"&&Xa(["li"])(v)&&u.getStyle(v,"list-style-type")==="none"){v.removeAttribute(H),u.setStyle(v,"list-style-type","none");return}H==="class"&&v.removeAttribute("className"),v.removeAttribute(H)}}),rf(n.classes,B=>{B=l(B,o),(!Cn(c)||u.hasClass(c,B))&&u.removeClass(v,B)});const D=u.getAttribs(v);for(let B=0;B<D.length;B++){const N=D[B].nodeName;if(!f.isAttributeInternal(N))return T0.keep()}}return n.remove!=="none"?(Zv(e,v,n),T0.removed()):T0.keep()},sF=(e,n,o,r,c)=>{let u;return n.parentNode&&me(R(e.dom,n.parentNode).reverse(),f=>{if(!u&&Cn(f)&&f.id!=="_start"&&f.id!=="_end"){const b=Cm(e,f,o,r,c);b&&b.split!==!1&&(u=f)}}),u},sH=(e,n,o,r)=>m3(e,n,o,r,r).fold(bt(r),c=>(e.dom.createFragment().appendChild(r),e.dom.rename(r,c)),bt(null)),rH=(e,n,o,r,c,u,f,b)=>{var v,x;let D,B;const N=e.dom;if(o){const H=o.parentNode;for(let te=r.parentNode;te&&te!==H;te=te.parentNode){let Q=N.clone(te,!1);for(let Y=0;Y<n.length&&(Q=sH(e,n[Y],b,Q),Q!==null);Y++);Q&&(D&&Q.appendChild(D),B||(B=Q),D=Q)}(!f.mixed||!N.isBlock(o))&&(r=(v=N.split(o,r))!==null&&v!==void 0?v:r),D&&B&&((x=c.parentNode)===null||x===void 0||x.insertBefore(D,c),B.appendChild(c),Pt(f)&&YB(e,f,b,D))}return r},aH=(e,n,o,r,c)=>{const u=e.formatter.get(n),f=u[0],b=e.dom,v=e.selection,x=Q=>{const Y=sF(e,Q,n,o,c);return rH(e,u,Y,Q,Q,!0,f,o)},D=Q=>rl(Q)&&Cn(Q)&&(Q.id==="_start"||Q.id==="_end"),B=Q=>ke(u,Y=>jv(e,Y,o,Q,Q)),N=Q=>{const Y=So(Q.childNodes),_e=B(Q)||ke(u,ht=>XE(b,Q,ht)),Pe=Q.parentNode;if(!_e&&Fe(Pe)&&it(f)&&B(Pe),f.deep&&Y.length)for(let ht=0;ht<Y.length;ht++)N(Y[ht]);me(["underline","line-through","overline"],ht=>{Cn(Q)&&e.dom.getStyle(Q,"text-decoration")===ht&&Q.parentNode&&A(b,Q.parentNode)===ht&&jv(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:ht}},void 0,Q)})},H=Q=>{const Y=b.get(Q?"_start":"_end");if(Y){let Ae=Y[Q?"firstChild":"lastChild"];return D(Ae)&&(Ae=Ae[Q?"firstChild":"lastChild"]),kt(Ae)&&Ae.data.length===0&&(Ae=Q?Y.previousSibling||Y.nextSibling:Y.nextSibling||Y.previousSibling),b.remove(Y,!0),Ae}else return null},te=Q=>{let Y,Ae,_e=wa(b,Q,u,{includeTrailingSpace:Q.collapsed});if(f.split){if(_e=RE(_e),Y=QB(e,_e,!0),Ae=QB(e,_e),Y!==Ae){if(Y=eF(Y,!0),Ae=eF(Ae,!1),af(b,Y,Ae)){const Ze=P.from(Y.firstChild).getOr(Y);x(tF(b,Ze,!0,"span",{id:"_start","data-mce-type":"bookmark"})),H(!0);return}if(af(b,Ae,Y)){const Ze=P.from(Ae.lastChild).getOr(Ae);x(tF(b,Ze,!1,"span",{id:"_end","data-mce-type":"bookmark"})),H(!1);return}Y=l3(b,Y,"span",{id:"_start","data-mce-type":"bookmark"}),Ae=l3(b,Ae,"span",{id:"_end","data-mce-type":"bookmark"});const Pe=b.createRng();Pe.setStartAfter(Y),Pe.setEndBefore(Ae),xp(b,Pe,Ze=>{me(Ze,ht=>{!rl(ht)&&!rl(ht.parentNode)&&x(ht)})}),x(Y),x(Ae),Y=H(!0),Ae=H()}else Y=Ae=x(Y);_e.startContainer=Y.parentNode?Y.parentNode:Y,_e.startOffset=b.nodeIndex(Y),_e.endContainer=Ae.parentNode?Ae.parentNode:Ae,_e.endOffset=b.nodeIndex(Ae)+1}xp(b,_e,Pe=>{me(Pe,N)})};if(r){if(h0(r)){const Q=b.createRng();Q.setStartBefore(r),Q.setEndAfter(r),te(Q)}else te(r);wx(e,n,r,o);return}!v.isCollapsed()||!Pt(f)||Kf(e).length?($v(e,()=>bC(e,te),Q=>Pt(f)&&n3(e,n,o,Q)),e.nodeChanged()):K9(e,n,o,c),oH(e,n,o),wx(e,n,r,o)},rF=(e,n,o,r,c)=>{(r||e.selection.isEditable())&&aH(e,n,o,r,c)},f3=(e,n,o,r)=>m3(e,n,o,r).fold(()=>P.some(r),c=>P.some(e.dom.rename(r,c)),P.none),jv=(e,n,o,r,c)=>m3(e,n,o,r,c).fold(Ne,u=>(e.dom.rename(r,u),!0),ft),QE=["fontsize","subscript","superscript"],XX=["strikethrough",...QE],ti=(e,n,o)=>Fe(e.matchNode(n.dom,o,{},o==="fontsize")),g3=(e,n)=>ke(QE,o=>ti(e,n,o)),JX=e=>be(XX,e),cH=(e,n,o,r,c)=>{const u=ic(n,e).filter(Tr);return es(u,o).map(f=>{const b=u[f],v=r(b),x=[...c(ta(b)).toArray(),...eo(u.slice(0,f),D=>o(D)?c(D).toArray():[ta(D)])];return{container:b,innerWrapper:v,outerWrappers:x}})},iH=(e,n,o,r)=>{me(wr(e),c=>{Tr(c)&&o(c)&&r(c).isNone()&&li(c)}),me(wr(e),c=>ds(n,c)),Eu(e,n)},lH=(e,n)=>{if(n.length>0){const o=n[n.length-1];Ga(e,o);const r=st(n.slice(0,n.length-1),(c,u)=>(ds(c,u),u),o);ds(r,e)}},uH=(e,n,o,r,c)=>{const u=f=>Yo(re.fromDom(e.getRoot()),f)||e.isBlock(f.dom);me(n,f=>{cH(u,f,o,r,c).each(({container:b,innerWrapper:v,outerWrappers:x})=>{e.split(b.dom,f.dom),iH(f,v,o,c),lH(f,x)})})},h3=(e,n,o)=>{const r=b=>Fe(Cm(e,b.dom,n)),c=b=>{const v=re.fromTag(Oo(b)),x=Cm(e,b.dom,n,{});return Fe(x)&&ZX(x)&&zv(e,v.dom,x),v},u=b=>{const v=Cm(e,b.dom,n,{});return Fe(v)?f3(e,v,{},b.dom).map(re.fromDom):P.some(b)},f=Rp(e.selection.getRng());uH(e.dom,o,r,c,u),e.selection.setRng(Mp(f))},$C=(e,n)=>eo(n,o=>{const r=ee(o,c=>g3(e,c));return g3(e,o)?[o,...r]:r}),dH=(e,n,o)=>{if(JX(n)){const r=$C(e.formatter,o);h3(e,"strikethrough",r)}},aF=(e,n)=>{const o=tt(n,r=>g3(e.formatter,r));h3(e,"strikethrough",o)},cF=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),A0=e=>e.name==="summary",iF=(e,n)=>{let o=e;for(;o=o.walk();)n(o)},p3=(e,n,o,r)=>{const c=o.name;for(let u=0,f=e.length;u<f;u++){const b=e[u];if(b.name===c){const v=r.nodes[c];v?v.nodes.push(o):r.nodes[c]={filter:b,nodes:[o]}}}if(o.attributes)for(let u=0,f=n.length;u<f;u++){const b=n[u],v=b.name;if(v in o.attributes.map){const x=r.attributes[v];x?x.nodes.push(o):r.attributes[v]={filter:b,nodes:[o]}}}},lF=(e,n,o)=>{const r={nodes:{},attributes:{}};return o.firstChild&&iF(o,c=>{p3(e,n,c,r)}),r},b3=(e,n)=>{const o=(r,c)=>{xo(r,u=>{const f=So(u.nodes);me(u.filter.callbacks,b=>{for(let v=f.length-1;v>=0;v--){const x=f[v];(!(c?x.attr(u.filter.name)!==void 0:x.name===u.filter.name)||vn(x.parent))&&f.splice(v,1)}f.length>0&&b(f,u.filter.name,n)})})};o(e.nodes,!1),o(e.attributes,!0)},v3=(e,n,o,r={})=>{const c=lF(e,n,o);b3(c,r)},y3=(e,n,o,r)=>{if((e.pad_empty_with_br||n.insert)&&o(r)){const u=new Ii("br",1);n.insert&&u.attr("data-mce-bogus","1"),r.empty().append(u)}else r.empty().append(new Ii("#text",3)).value=ir},uF=e=>{var n;return dF(e,"#text")&&((n=e==null?void 0:e.firstChild)===null||n===void 0?void 0:n.value)===ir},dF=(e,n)=>{const o=e==null?void 0:e.firstChild;return Fe(o)&&o===e.lastChild&&o.name===n},mH=(e,n)=>{const o=e.getElementRule(n.name);return(o==null?void 0:o.paddEmpty)===!0},IC=(e,n,o,r)=>r.isEmpty(n,o,c=>mH(e,c)),fH=(e,n)=>Fe(e)&&(n(e)||e.name==="br"),gH=e=>{let n;for(let o=e;o;o=o.parent){const r=o.attr("contenteditable");if(r==="false")break;r==="true"&&(n=o)}return P.from(n)},QX=e=>{const n=[];for(let o=e.firstChild;Fe(o);o=o.walk())n.push(o);return n},C3=(e,n,o=e.parent)=>{if(n.getSpecialElements()[e.name])e.empty().remove();else{const r=e.children();for(const c of r)o&&!n.isValidChild(o.name,c.name)&&C3(c,n,o);e.unwrap()}},mF=(e,n,o,r=Ct)=>{const c=n.getTextBlockElements(),u=n.getNonEmptyElements(),f=n.getWhitespaceElements(),b=Mt.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),v=new Set,x=D=>D!==o&&!b[D.name];for(let D=0;D<e.length;D++){const B=e[D];let N,H,te;if(!B.parent||v.has(B))continue;if(c[B.name]&&B.parent.name==="li"){let Y=B.next;for(;Y&&c[Y.name];){Y.name="li",v.add(Y),B.parent.insert(Y,B.parent);Y=Y.next}B.unwrap();continue}const Q=[B];for(N=B.parent;N&&!n.isValidChild(N.name,B.name)&&x(N);N=N.parent)Q.push(N);if(N&&Q.length>1)if(w3(n,B,N))C3(B,n);else{Q.reverse(),H=Q[0].clone(),r(H);let Y=H;for(let Ae=0;Ae<Q.length-1;Ae++){n.isValidChild(Y.name,Q[Ae].name)&&Ae>0?(te=Q[Ae].clone(),r(te),Y.append(te)):te=Y;for(let _e=Q[Ae].firstChild;_e&&_e!==Q[Ae+1];){const Pe=_e.next;te.append(_e),_e=Pe}Y=te}IC(n,u,f,H)?N.insert(B,Q[0],!0):(N.insert(H,Q[0],!0),N.insert(B,H)),N=Q[0],(IC(n,u,f,N)||dF(N,"br"))&&N.empty().remove()}else if(B.parent){if(B.name==="li"){let Y=B.prev;if(Y&&(Y.name==="ul"||Y.name==="ol")){Y.append(B);continue}if(Y=B.next,Y&&(Y.name==="ul"||Y.name==="ol")&&Y.firstChild){Y.insert(B,Y.firstChild,!0);continue}const Ae=new Ii("ul",1);r(Ae),B.wrap(Ae);continue}if(n.isValidChild(B.parent.name,"div")&&n.isValidChild("div",B.name)){const Y=new Ii("div",1);r(Y),B.wrap(Y)}else C3(B,n)}}},eJ=(e,n)=>{let o=e;for(;o;){if(o.name===n)return!0;o=o.parent}return!1},w3=(e,n,o=n.parent)=>o?e.children[n.name]&&!e.isValidChild(o.name,n.name)||n.name==="a"&&eJ(o,"a")?!0:A0(o)&&cF(n)?!((o==null?void 0:o.firstChild)===n&&(o==null?void 0:o.lastChild)===n):!1:!1,S3=(e,n,o,r)=>{const c=document.createRange();return c.setStart(e,n),c.setEnd(o,r),c},x3=e=>{const n=nt.fromRangeStart(e),o=nt.fromRangeEnd(e),r=e.commonAncestorContainer;return Gc(!1,r,o).map(c=>!mm(n,o,r)&&mm(n,c,r)?S3(n.container(),n.offset(),c.container(),c.offset()):e).getOr(e)},eT=e=>e.collapsed?e:x3(e),hH=Mt.explode,fF=()=>{const e={};return{addFilter:(c,u)=>{me(hH(c),f=>{to(e,f)||(e[f]={name:f,callbacks:[]}),e[f].callbacks.push(u)})},getFilters:()=>zr(e),removeFilter:(c,u)=>{me(hH(c),f=>{if(to(e,f))if(Fe(u)){const b=e[f],v=tt(b.callbacks,x=>x!==u);v.length>0?b.callbacks=v:delete e[f]}else delete e[f]})}}},pH=e=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),bH=e=>e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&"),vH=(e,n)=>{me(n,o=>{e.attr(o,null)})},yH=(e,n,o)=>{e.addNodeFilter("font",r=>{me(r,c=>{const u=n.parse(c.attr("style")),f=c.attr("color"),b=c.attr("face"),v=c.attr("size");f&&(u.color=f),b&&(u["font-family"]=b),v&&Qu(v).each(x=>{u["font-size"]=o[x-1]}),c.name="span",c.attr("style",n.serialize(u)),vH(c,["color","face","size"])})})},CH=(e,n,o)=>{e.addNodeFilter("strike",r=>{const c=n.type!=="html4";me(r,u=>{if(c)u.name="s";else{const f=o.parse(u.attr("style"));f["text-decoration"]="line-through",u.name="span",u.attr("style",o.serialize(f))}})})},wH=(e,n,o)=>{var r;const c=Ig();n.convert_fonts_to_spans&&yH(e,c,Mt.explode((r=n.font_size_legacy_values)!==null&&r!==void 0?r:"")),CH(e,o,c)},gF=(e,n,o)=>{n.inline_styles&&wH(e,n,o)},SH=e=>fetch(e).then(n=>n.ok?n.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})),xH=e=>{const n=/([a-z0-9+\/=\s]+)/i.exec(e);return n?n[1]:""},mh=e=>{try{return decodeURIComponent(e)}catch{return e}},E3=e=>{const[n,...o]=e.split(","),r=o.join(","),c=/data:([^/]+\/[^;]+)(;.+)?/.exec(n);if(c){const u=c[2]===";base64",f=mh(r),b=u?xH(f):f;return P.some({type:c[1],data:b,base64Encoded:u})}else return P.none()},T3=(e,n,o=!0)=>{let r=n;if(o)try{r=atob(n)}catch{return P.none()}const c=new Uint8Array(r.length);for(let u=0;u<c.length;u++)c[u]=r.charCodeAt(u);return P.some(new Blob([c],{type:e}))},EH=e=>new Promise((n,o)=>{E3(e).bind(({type:r,data:c,base64Encoded:u})=>T3(r,c,u)).fold(()=>o("Invalid data URI"),n)}),TH=e=>jn(e,"blob:")?SH(e):jn(e,"data:")?EH(e):Promise.reject("Unknown URI format"),A3=e=>new Promise((n,o)=>{const r=new FileReader;r.onloadend=()=>{n(r.result)},r.onerror=()=>{var c;o((c=r.error)===null||c===void 0?void 0:c.message)},r.readAsDataURL(e)});let hF=0;const pF=e=>"blobid"+hF++,_3=(e,n,o)=>E3(e).bind(({data:r,type:c,base64Encoded:u})=>{if(n&&!u)return P.none();{const f=u?r:btoa(r);return o(f,c)}}),bF=(e,n,o)=>{const r=e.create(pF(),n,o);return e.add(r),r},vF=(e,n,o=!1)=>_3(n,o,(r,c)=>P.from(e.getByData(r,c)).orThunk(()=>T3(c,r).map(u=>bF(e,u,r)))),AH=(e,n)=>{const o=()=>Promise.reject("Invalid data URI");if(jn(n,"blob:")){const r=e.getByUri(n);return Fe(r)?Promise.resolve(r):TH(n).then(c=>A3(c).then(u=>_3(u,!1,f=>P.some(bF(e,c,f))).getOrThunk(o)))}else return jn(n,"data:")?vF(e,n).fold(o,r=>Promise.resolve(r)):Promise.reject("Unknown image data format")},_H=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,kH=e=>P.from(e.match(_H)).bind(n=>fn(n,1)).map(n=>jn(n,"www.")?n.substring(4):n),Bp=(e,n)=>{P.from(e.attr("src")).bind(kH).forall(o=>!be(n,o))&&e.attr("sandbox","")},tT=(e,n)=>jn(e,`${n}/`),DH=e=>Kn(e)?"iframe":tT(e,"image")?"img":tT(e,"video")?"video":tT(e,"audio")?"audio":"iframe",OH=({type:e,src:n,width:o,height:r}={},c,u)=>{const f=DH(e),b=new Ii(f,1);return b.attr(f==="audio"?{src:n}:{src:n,width:o,height:r}),(f==="audio"||f==="video")&&b.attr("controls",""),f==="iframe"&&c&&Bp(b,u),b},k3=e=>Fe(e.attr("data-mce-bogus")),RH=e=>e.attr("src")===Po.transparentSrc||Fe(e.attr("data-mce-placeholder")),D3=(e,n)=>{const{blob_cache:o}=n;if(o){const r=c=>{const u=c.attr("src");RH(c)||k3(c)||vn(u)||vF(o,u,!0).each(f=>{c.attr("src",f.blobUri())})};e.addAttributeFilter("src",c=>me(c,r))}},yF=(e,n)=>{var o,r;const c=e.schema;e.addAttributeFilter("href",v=>{let x=v.length;const D=N=>N.split(" ").filter(te=>te.length>0).concat(["noopener"]).sort().join(" "),B=N=>{const H=N?Mt.trim(N):"";return/\b(noopener)\b/g.test(H)?H:D(H)};if(!n.allow_unsafe_link_target)for(;x--;){const N=v[x];N.name==="a"&&N.attr("target")==="_blank"&&N.attr("rel",B(N.attr("rel")))}}),n.allow_html_in_named_anchor||e.addAttributeFilter("id,name",v=>{let x=v.length,D,B,N,H;for(;x--;)if(H=v[x],H.name==="a"&&H.firstChild&&!H.attr("href"))for(N=H.parent,D=H.lastChild;D&&N;)B=D.prev,N.insert(D,H),D=B}),n.fix_list_elements&&e.addNodeFilter("ul,ol",v=>{let x=v.length,D,B;for(;x--;)if(D=v[x],B=D.parent,B&&(B.name==="ul"||B.name==="ol"))if(D.prev&&D.prev.name==="li")D.prev.append(D);else{const N=new Ii("li",1);N.attr("style","list-style-type: none"),D.wrap(N)}});const u=c.getValidClasses();n.validate&&u&&e.addAttributeFilter("class",v=>{var x;let D=v.length;for(;D--;){const B=v[D],N=(x=B.attr("class"))!==null&&x!==void 0?x:"",H=Mt.explode(N," ");let te="";for(let Q=0;Q<H.length;Q++){const Y=H[Q];let Ae=!1,_e=u["*"];_e&&_e[Y]&&(Ae=!0),_e=u[B.name],!Ae&&_e&&_e[Y]&&(Ae=!0),Ae&&(te&&(te+=" "),te+=Y)}te.length||(te=null),B.attr("class",te)}}),D3(e,n);const f=(o=n.sandbox_iframes)!==null&&o!==void 0?o:!1,b=Xs((r=n.sandbox_iframes_exclusions)!==null&&r!==void 0?r:[]);n.convert_unsafe_embeds&&e.addNodeFilter("object,embed",v=>me(v,x=>{x.replace(OH({type:x.attr("type"),src:x.name==="object"?x.attr("data"):x.attr("src"),width:x.attr("width"),height:x.attr("height")},f,b))})),f&&e.addNodeFilter("iframe",v=>me(v,x=>Bp(x,b)))};/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:CF,setPrototypeOf:wF,isFrozen:nT,getPrototypeOf:MH,getOwnPropertyDescriptor:SF}=Object;let{freeze:ru,seal:kd,create:O3}=Object,{apply:oT,construct:R3}=typeof Reflect<"u"&&Reflect;ru||(ru=function(n){return n}),kd||(kd=function(n){return n}),oT||(oT=function(n,o,r){return n.apply(o,r)}),R3||(R3=function(n,o){return new n(...o)});const LC=cu(Array.prototype.forEach),BH=cu(Array.prototype.lastIndexOf),xF=cu(Array.prototype.pop),HC=cu(Array.prototype.push),au=cu(Array.prototype.splice),zC=cu(String.prototype.toLowerCase),M3=cu(String.prototype.toString),B3=cu(String.prototype.match),VC=cu(String.prototype.replace),FH=cu(String.prototype.indexOf),NH=cu(String.prototype.trim),Dl=cu(Object.prototype.hasOwnProperty),ni=cu(RegExp.prototype.test),sT=PH(TypeError);function cu(e){return function(n){n instanceof RegExp&&(n.lastIndex=0);for(var o=arguments.length,r=new Array(o>1?o-1:0),c=1;c<o;c++)r[c-1]=arguments[c];return oT(e,n,r)}}function PH(e){return function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return R3(e,o)}}function Ts(e,n){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:zC;wF&&wF(e,null);let r=n.length;for(;r--;){let c=n[r];if(typeof c=="string"){const u=o(c);u!==c&&(nT(n)||(n[r]=u),c=u)}e[c]=!0}return e}function $H(e){for(let n=0;n<e.length;n++)Dl(e,n)||(e[n]=null);return e}function fh(e){const n=O3(null);for(const[o,r]of CF(e))Dl(e,o)&&(Array.isArray(r)?n[o]=$H(r):r&&typeof r=="object"&&r.constructor===Object?n[o]=fh(r):n[o]=r);return n}function Fp(e,n){for(;e!==null;){const r=SF(e,n);if(r){if(r.get)return cu(r.get);if(typeof r.value=="function")return cu(r.value)}e=MH(e)}function o(){return null}return o}const EF=ru(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),UC=ru(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),WC=ru(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),TF=ru(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),F3=ru(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),tJ=ru(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),gh=ru(["#text"]),AF=ru(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),N3=ru(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),_F=ru(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),No=ru(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),IH=kd(/\{\{[\w\W]*|[\w\W]*\}\}/gm),LH=kd(/<%[\w\W]*|[\w\W]*%>/gm),kF=kd(/\$\{[\w\W]*/gm),HH=kd(/^data-[\-\w.\u00B7-\uFFFF]+$/),zH=kd(/^aria-[\-\w]+$/),qr=kd(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),VH=kd(/^(?:\w+script|data):/i),UH=kd(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),DF=kd(/^html$/i),WH=kd(/^[a-z][.\w]*(-[.\w]+)+$/i);var _r=Object.freeze({__proto__:null,ARIA_ATTR:zH,ATTR_WHITESPACE:UH,CUSTOM_ELEMENT:WH,DATA_ATTR:HH,DOCTYPE_NAME:DF,ERB_EXPR:LH,IS_ALLOWED_URI:qr,IS_SCRIPT_OR_DATA:VH,MUSTACHE_EXPR:IH,TMPLIT_EXPR:kF});const qv={element:1,text:3,progressingInstruction:7,comment:8,document:9},OF=function(){return typeof window>"u"?null:window},ZH=function(n,o){if(typeof n!="object"||typeof n.createPolicy!="function")return null;let r=null;const c="data-tt-policy-suffix";o&&o.hasAttribute(c)&&(r=o.getAttribute(c));const u="dompurify"+(r?"#"+r:"");try{return n.createPolicy(u,{createHTML(f){return f},createScriptURL(f){return f}})}catch{return console.warn("TrustedTypes policy "+u+" could not be created."),null}},P3=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function RF(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:OF();const n=ns=>RF(ns);if(n.version="3.2.6",n.removed=[],!e||!e.document||e.document.nodeType!==qv.document||!e.Element)return n.isSupported=!1,n;let{document:o}=e;const r=o,c=r.currentScript,{DocumentFragment:u,HTMLTemplateElement:f,Node:b,Element:v,NodeFilter:x,NamedNodeMap:D=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:B,DOMParser:N,trustedTypes:H}=e,te=v.prototype,Q=Fp(te,"cloneNode"),Y=Fp(te,"remove"),Ae=Fp(te,"nextSibling"),_e=Fp(te,"childNodes"),Pe=Fp(te,"parentNode");if(typeof f=="function"){const ns=o.createElement("template");ns.content&&ns.content.ownerDocument&&(o=ns.content.ownerDocument)}let Ze,ht="";const{implementation:Vt,createNodeIterator:Ot,createDocumentFragment:lt,getElementsByTagName:Be}=o,{importNode:oe}=r;let je=P3();n.isSupported=typeof CF=="function"&&typeof Pe=="function"&&Vt&&Vt.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Dt,ERB_EXPR:kn,TMPLIT_EXPR:io,DATA_ATTR:zo,ARIA_ATTR:is,IS_SCRIPT_OR_DATA:kr,ATTR_WHITESPACE:Dr,CUSTOM_ELEMENT:Oc}=_r;let{IS_ALLOWED_URI:$t}=_r,On=null;const hs=Ts({},[...EF,...UC,...WC,...F3,...gh]);let Ps=null;const An=Ts({},[...AF,...N3,..._F,...No]);let Ht=Object.seal(O3(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),on=null,Jn=null,lo=!0,Us=!0,ar=!1,Id=!0,si=!1,gf=!0,Dm=!1,Rl=!1,hu=!1,hf=!1,Ry=!1,Un=!1,ps=!0,la=!1;const bc="user-content-";let Rc=!0,sc=!1,Kr={},Yr=null;const pu=Ts({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ig=null;const Qp=Ts({},["audio","video","img","source","image","track"]);let kh=null;const A_=Ts({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),__="http://www.w3.org/1998/Math/MathML",uS="http://www.w3.org/2000/svg",lg="http://www.w3.org/1999/xhtml";let My=lg,H5=!1,k_=null;const AJ=Ts({},[__,uS,lg],M3);let z5=Ts({},["mi","mo","mn","ms","mtext"]),V5=Ts({},["annotation-xml"]);const _J=Ts({},["title","style","font","a","script"]);let D_=null;const By=["application/xhtml+xml","text/html"],Y7="text/html";let Ve=null,Je=null;const Jt=o.createElement("form"),Wt=function(et){return et instanceof RegExp||et instanceof Function},no=function(){let et=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Je&&Je===et)){if((!et||typeof et!="object")&&(et={}),et=fh(et),D_=By.indexOf(et.PARSER_MEDIA_TYPE)===-1?Y7:et.PARSER_MEDIA_TYPE,Ve=D_==="application/xhtml+xml"?M3:zC,On=Dl(et,"ALLOWED_TAGS")?Ts({},et.ALLOWED_TAGS,Ve):hs,Ps=Dl(et,"ALLOWED_ATTR")?Ts({},et.ALLOWED_ATTR,Ve):An,k_=Dl(et,"ALLOWED_NAMESPACES")?Ts({},et.ALLOWED_NAMESPACES,M3):AJ,kh=Dl(et,"ADD_URI_SAFE_ATTR")?Ts(fh(A_),et.ADD_URI_SAFE_ATTR,Ve):A_,ig=Dl(et,"ADD_DATA_URI_TAGS")?Ts(fh(Qp),et.ADD_DATA_URI_TAGS,Ve):Qp,Yr=Dl(et,"FORBID_CONTENTS")?Ts({},et.FORBID_CONTENTS,Ve):pu,on=Dl(et,"FORBID_TAGS")?Ts({},et.FORBID_TAGS,Ve):fh({}),Jn=Dl(et,"FORBID_ATTR")?Ts({},et.FORBID_ATTR,Ve):fh({}),Kr=Dl(et,"USE_PROFILES")?et.USE_PROFILES:!1,lo=et.ALLOW_ARIA_ATTR!==!1,Us=et.ALLOW_DATA_ATTR!==!1,ar=et.ALLOW_UNKNOWN_PROTOCOLS||!1,Id=et.ALLOW_SELF_CLOSE_IN_ATTR!==!1,si=et.SAFE_FOR_TEMPLATES||!1,gf=et.SAFE_FOR_XML!==!1,Dm=et.WHOLE_DOCUMENT||!1,hf=et.RETURN_DOM||!1,Ry=et.RETURN_DOM_FRAGMENT||!1,Un=et.RETURN_TRUSTED_TYPE||!1,hu=et.FORCE_BODY||!1,ps=et.SANITIZE_DOM!==!1,la=et.SANITIZE_NAMED_PROPS||!1,Rc=et.KEEP_CONTENT!==!1,sc=et.IN_PLACE||!1,$t=et.ALLOWED_URI_REGEXP||qr,My=et.NAMESPACE||lg,z5=et.MATHML_TEXT_INTEGRATION_POINTS||z5,V5=et.HTML_INTEGRATION_POINTS||V5,Ht=et.CUSTOM_ELEMENT_HANDLING||{},et.CUSTOM_ELEMENT_HANDLING&&Wt(et.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ht.tagNameCheck=et.CUSTOM_ELEMENT_HANDLING.tagNameCheck),et.CUSTOM_ELEMENT_HANDLING&&Wt(et.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ht.attributeNameCheck=et.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),et.CUSTOM_ELEMENT_HANDLING&&typeof et.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Ht.allowCustomizedBuiltInElements=et.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),si&&(Us=!1),Ry&&(hf=!0),Kr&&(On=Ts({},gh),Ps=[],Kr.html===!0&&(Ts(On,EF),Ts(Ps,AF)),Kr.svg===!0&&(Ts(On,UC),Ts(Ps,N3),Ts(Ps,No)),Kr.svgFilters===!0&&(Ts(On,WC),Ts(Ps,N3),Ts(Ps,No)),Kr.mathMl===!0&&(Ts(On,F3),Ts(Ps,_F),Ts(Ps,No))),et.ADD_TAGS&&(On===hs&&(On=fh(On)),Ts(On,et.ADD_TAGS,Ve)),et.ADD_ATTR&&(Ps===An&&(Ps=fh(Ps)),Ts(Ps,et.ADD_ATTR,Ve)),et.ADD_URI_SAFE_ATTR&&Ts(kh,et.ADD_URI_SAFE_ATTR,Ve),et.FORBID_CONTENTS&&(Yr===pu&&(Yr=fh(Yr)),Ts(Yr,et.FORBID_CONTENTS,Ve)),Rc&&(On["#text"]=!0),Dm&&Ts(On,["html","head","body"]),On.table&&(Ts(On,["tbody"]),delete on.tbody),et.TRUSTED_TYPES_POLICY){if(typeof et.TRUSTED_TYPES_POLICY.createHTML!="function")throw sT('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof et.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw sT('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Ze=et.TRUSTED_TYPES_POLICY,ht=Ze.createHTML("")}else Ze===void 0&&(Ze=ZH(H,c)),Ze!==null&&typeof ht=="string"&&(ht=Ze.createHTML(""));ru&&ru(et),Je=et}},As=Ts({},[...UC,...WC,...TF]),ua=Ts({},[...F3,...tJ]),Dh=function(et){let Pn=Pe(et);(!Pn||!Pn.tagName)&&(Pn={namespaceURI:My,tagName:"template"});const Vo=zC(et.tagName),vc=zC(Pn.tagName);return k_[et.namespaceURI]?et.namespaceURI===uS?Pn.namespaceURI===lg?Vo==="svg":Pn.namespaceURI===__?Vo==="svg"&&(vc==="annotation-xml"||z5[vc]):!!As[Vo]:et.namespaceURI===__?Pn.namespaceURI===lg?Vo==="math":Pn.namespaceURI===uS?Vo==="math"&&V5[vc]:!!ua[Vo]:et.namespaceURI===lg?Pn.namespaceURI===uS&&!V5[vc]||Pn.namespaceURI===__&&!z5[vc]?!1:!ua[Vo]&&(_J[Vo]||!As[Vo]):!!(D_==="application/xhtml+xml"&&k_[et.namespaceURI]):!1},ug=function(et){HC(n.removed,{element:et});try{Pe(et).removeChild(et)}catch{Y(et)}},O_=function(et,Pn){try{HC(n.removed,{attribute:Pn.getAttributeNode(et),from:Pn})}catch{HC(n.removed,{attribute:null,from:Pn})}if(Pn.removeAttribute(et),et==="is")if(hf||Ry)try{ug(Pn)}catch{}else try{Pn.setAttribute(et,"")}catch{}},kJ=function(et){let Pn=null,Vo=null;if(hu)et="<remove></remove>"+et;else{const ul=B3(et,/^[\r\n\t ]+/);Vo=ul&&ul[0]}D_==="application/xhtml+xml"&&My===lg&&(et='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+et+"</body></html>");const vc=Ze?Ze.createHTML(et):et;if(My===lg)try{Pn=new N().parseFromString(vc,D_)}catch{}if(!Pn||!Pn.documentElement){Pn=Vt.createDocument(My,"template",null);try{Pn.documentElement.innerHTML=H5?ht:vc}catch{}}const Yu=Pn.body||Pn.documentElement;return et&&Vo&&Yu.insertBefore(o.createTextNode(Vo),Yu.childNodes[0]||null),My===lg?Be.call(Pn,Dm?"html":"body")[0]:Dm?Pn.documentElement:Yu},DJ=function(et){return Ot.call(et.ownerDocument||et,et,x.SHOW_ELEMENT|x.SHOW_COMMENT|x.SHOW_TEXT|x.SHOW_PROCESSING_INSTRUCTION|x.SHOW_CDATA_SECTION,null)},MY=function(et){return et instanceof B&&(typeof et.nodeName!="string"||typeof et.textContent!="string"||typeof et.removeChild!="function"||!(et.attributes instanceof D)||typeof et.removeAttribute!="function"||typeof et.setAttribute!="function"||typeof et.namespaceURI!="string"||typeof et.insertBefore!="function"||typeof et.hasChildNodes!="function")},OJ=function(et){return typeof b=="function"&&et instanceof b};function ob(ns,et,Pn){LC(ns,Vo=>{Vo.call(n,et,Pn,Je)})}const RJ=function(et){let Pn=null;if(ob(je.beforeSanitizeElements,et,null),MY(et))return ug(et),!0;const Vo=Ve(et.nodeName);if(ob(je.uponSanitizeElement,et,{tagName:Vo,allowedTags:On}),gf&&et.hasChildNodes()&&!OJ(et.firstElementChild)&&ni(/<[/\w!]/g,et.innerHTML)&&ni(/<[/\w!]/g,et.textContent)||et.nodeType===qv.progressingInstruction||gf&&et.nodeType===qv.comment&&ni(/<[/\w]/g,et.data))return ug(et),!0;if(!On[Vo]||on[Vo]){if(!on[Vo]&&BJ(Vo)&&(Ht.tagNameCheck instanceof RegExp&&ni(Ht.tagNameCheck,Vo)||Ht.tagNameCheck instanceof Function&&Ht.tagNameCheck(Vo)))return!1;if(Rc&&!Yr[Vo]){const vc=Pe(et)||et.parentNode,Yu=_e(et)||et.childNodes;if(Yu&&vc){const ul=Yu.length;for(let Om=ul-1;Om>=0;--Om){const sb=Q(Yu[Om],!0);sb.__removalCount=(et.__removalCount||0)+1,vc.insertBefore(sb,Ae(et))}}}return ug(et),!0}return et instanceof v&&!Dh(et)||(Vo==="noscript"||Vo==="noembed"||Vo==="noframes")&&ni(/<\/no(script|embed|frames)/i,et.innerHTML)?(ug(et),!0):(si&&et.nodeType===qv.text&&(Pn=et.textContent,LC([Dt,kn,io],vc=>{Pn=VC(Pn,vc," ")}),et.textContent!==Pn&&(HC(n.removed,{element:et.cloneNode()}),et.textContent=Pn)),ob(je.afterSanitizeElements,et,null),!1)},MJ=function(et,Pn,Vo){if(ps&&(Pn==="id"||Pn==="name")&&(Vo in o||Vo in Jt))return!1;if(!(Us&&!Jn[Pn]&&ni(zo,Pn))){if(!(lo&&ni(is,Pn))){if(!Ps[Pn]||Jn[Pn]){if(!(BJ(et)&&(Ht.tagNameCheck instanceof RegExp&&ni(Ht.tagNameCheck,et)||Ht.tagNameCheck instanceof Function&&Ht.tagNameCheck(et))&&(Ht.attributeNameCheck instanceof RegExp&&ni(Ht.attributeNameCheck,Pn)||Ht.attributeNameCheck instanceof Function&&Ht.attributeNameCheck(Pn))||Pn==="is"&&Ht.allowCustomizedBuiltInElements&&(Ht.tagNameCheck instanceof RegExp&&ni(Ht.tagNameCheck,Vo)||Ht.tagNameCheck instanceof Function&&Ht.tagNameCheck(Vo))))return!1}else if(!kh[Pn]){if(!ni($t,VC(Vo,Dr,""))){if(!((Pn==="src"||Pn==="xlink:href"||Pn==="href")&&et!=="script"&&FH(Vo,"data:")===0&&ig[et])){if(!(ar&&!ni(kr,VC(Vo,Dr,"")))){if(Vo)return!1}}}}}}return!0},BJ=function(et){return et!=="annotation-xml"&&B3(et,Oc)},FJ=function(et){ob(je.beforeSanitizeAttributes,et,null);const{attributes:Pn}=et;if(!Pn||MY(et))return;const Vo={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Ps,forceKeepAttr:void 0};let vc=Pn.length;for(;vc--;){const Yu=Pn[vc],{name:ul,namespaceURI:Om,value:sb}=Yu,U5=Ve(ul),BY=sb;let Xu=ul==="value"?BY:NH(BY);if(Vo.attrName=U5,Vo.attrValue=Xu,Vo.keepAttr=!0,Vo.forceKeepAttr=void 0,ob(je.uponSanitizeAttribute,et,Vo),Xu=Vo.attrValue,la&&(U5==="id"||U5==="name")&&(O_(ul,et),Xu=bc+Xu),gf&&ni(/((--!?|])>)|<\/(style|title)/i,Xu)){O_(ul,et);continue}if(Vo.forceKeepAttr)continue;if(!Vo.keepAttr){O_(ul,et);continue}if(!Id&&ni(/\/>/i,Xu)){O_(ul,et);continue}si&&LC([Dt,kn,io],PJ=>{Xu=VC(Xu,PJ," ")});const NJ=Ve(et.nodeName);if(!MJ(NJ,U5,Xu)){O_(ul,et);continue}if(Ze&&typeof H=="object"&&typeof H.getAttributeType=="function"&&!Om)switch(H.getAttributeType(NJ,U5)){case"TrustedHTML":{Xu=Ze.createHTML(Xu);break}case"TrustedScriptURL":{Xu=Ze.createScriptURL(Xu);break}}if(Xu!==BY)try{Om?et.setAttributeNS(Om,ul,Xu):et.setAttribute(ul,Xu),MY(et)?ug(et):xF(n.removed)}catch{O_(ul,et)}}ob(je.afterSanitizeAttributes,et,null)},Pte=function ns(et){let Pn=null;const Vo=DJ(et);for(ob(je.beforeSanitizeShadowDOM,et,null);Pn=Vo.nextNode();)ob(je.uponSanitizeShadowNode,Pn,null),RJ(Pn),FJ(Pn),Pn.content instanceof u&&ns(Pn.content);ob(je.afterSanitizeShadowDOM,et,null)};return n.sanitize=function(ns){let et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Pn=null,Vo=null,vc=null,Yu=null;if(H5=!ns,H5&&(ns="<!-->"),typeof ns!="string"&&!OJ(ns))if(typeof ns.toString=="function"){if(ns=ns.toString(),typeof ns!="string")throw sT("dirty is not a string, aborting")}else throw sT("toString is not a function");if(!n.isSupported)return ns;if(Rl||no(et),n.removed=[],typeof ns=="string"&&(sc=!1),sc){if(ns.nodeName){const sb=Ve(ns.nodeName);if(!On[sb]||on[sb])throw sT("root node is forbidden and cannot be sanitized in-place")}}else if(ns instanceof b)Pn=kJ("<!---->"),Vo=Pn.ownerDocument.importNode(ns,!0),Vo.nodeType===qv.element&&Vo.nodeName==="BODY"||Vo.nodeName==="HTML"?Pn=Vo:Pn.appendChild(Vo);else{if(!hf&&!si&&!Dm&&ns.indexOf("<")===-1)return Ze&&Un?Ze.createHTML(ns):ns;if(Pn=kJ(ns),!Pn)return hf?null:Un?ht:""}Pn&&hu&&ug(Pn.firstChild);const ul=DJ(sc?ns:Pn);for(;vc=ul.nextNode();)RJ(vc),FJ(vc),vc.content instanceof u&&Pte(vc.content);if(sc)return ns;if(hf){if(Ry)for(Yu=lt.call(Pn.ownerDocument);Pn.firstChild;)Yu.appendChild(Pn.firstChild);else Yu=Pn;return(Ps.shadowroot||Ps.shadowrootmode)&&(Yu=oe.call(r,Yu,!0)),Yu}let Om=Dm?Pn.outerHTML:Pn.innerHTML;return Dm&&On["!doctype"]&&Pn.ownerDocument&&Pn.ownerDocument.doctype&&Pn.ownerDocument.doctype.name&&ni(DF,Pn.ownerDocument.doctype.name)&&(Om="<!DOCTYPE "+Pn.ownerDocument.doctype.name+`>
`+Om),si&&LC([Dt,kn,io],sb=>{Om=VC(Om,sb," ")}),Ze&&Un?Ze.createHTML(Om):Om},n.setConfig=function(){let ns=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};no(ns),Rl=!0},n.clearConfig=function(){Je=null,Rl=!1},n.isValidAttribute=function(ns,et,Pn){Je||no({});const Vo=Ve(ns),vc=Ve(et);return MJ(Vo,vc,Pn)},n.addHook=function(ns,et){typeof et=="function"&&HC(je[ns],et)},n.removeHook=function(ns,et){if(et!==void 0){const Pn=BH(je[ns],et);return Pn===-1?void 0:au(je[ns],Pn,1)[0]}return xF(je[ns])},n.removeHooks=function(ns){je[ns]=[]},n.removeAllHooks=function(){je=P3()},n}var cf=RF();const rT=Mt.each,jH=Mt.trim,qH=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],$3={ftp:21,http:80,https:443,mailto:25},GH=["img","video"],KH=(e,n)=>Fe(e)?!e:Fe(n)?!be(GH,n):!0,za=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},MF=(e,n,o)=>{const r=za(n).replace(/\s/g,"");return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(r)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(r)?KH(e.allow_svg_data_urls,o)&&/^data:image\/svg\+xml/i.test(r):/^data:/i.test(r)};class Si{static parseDataUri(n){let o;const r=decodeURIComponent(n).split(","),c=/data:([^;]+)/.exec(r[0]);return c&&(o=c[1]),{type:o,data:r[1]}}static isDomSafe(n,o,r={}){if(r.allow_script_urls)return!0;{const c=Og.decode(n).replace(/[\s\u0000-\u001F]+/g,"");return!MF(r,c,o)}}static getDocumentBaseUrl(n){var o;let r;return n.protocol.indexOf("http")!==0&&n.protocol!=="file:"?r=(o=n.href)!==null&&o!==void 0?o:"":r=n.protocol+"//"+n.host+n.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}constructor(n,o={}){this.path="",this.directory="",n=jH(n),this.settings=o;const r=o.base_uri,c=this;if(/^([\w\-]+):([^\/]{2})/i.test(n)||/^\s*#/.test(n)){c.source=n;return}const u=n.indexOf("//")===0;if(n.indexOf("/")===0&&!u&&(n=(r&&r.protocol||"http")+"://mce_host"+n),!/^[\w\-]*:?\/\//.test(n)){const b=r?r.path:new Si(document.location.href).directory;if((r==null?void 0:r.protocol)==="")n="//mce_host"+c.toAbsPath(b,n);else{const v=/([^#?]*)([#?]?.*)/.exec(n);v&&(n=(r&&r.protocol||"http")+"://mce_host"+c.toAbsPath(b,v[1])+v[2])}}n=n.replace(/@@/g,"(mce_at)");const f=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(n);f&&rT(qH,(b,v)=>{let x=f[v];x&&(x=x.replace(/\(mce_at\)/g,"@@")),c[b]=x}),r&&(c.protocol||(c.protocol=r.protocol),c.userInfo||(c.userInfo=r.userInfo),!c.port&&c.host==="mce_host"&&(c.port=r.port),(!c.host||c.host==="mce_host")&&(c.host=r.host),c.source=""),u&&(c.protocol="")}setPath(n){const o=/^(.*?)\/?(\w+)?$/.exec(n);o&&(this.path=o[0],this.directory=o[1],this.file=o[2]),this.source="",this.getURI()}toRelative(n){if(n==="./")return n;const o=new Si(n,{base_uri:this});if(o.host!=="mce_host"&&this.host!==o.host&&o.host||this.port!==o.port||this.protocol!==o.protocol&&o.protocol!=="")return o.getURI();const r=this.getURI(),c=o.getURI();if(r===c||r.charAt(r.length-1)==="/"&&r.substr(0,r.length-1)===c)return r;let u=this.toRelPath(this.path,o.path);return o.query&&(u+="?"+o.query),o.anchor&&(u+="#"+o.anchor),u}toAbsolute(n,o){const r=new Si(n,{base_uri:this});return r.getURI(o&&this.isSameOrigin(r))}isSameOrigin(n){if(this.host==n.host&&this.protocol==n.protocol){if(this.port==n.port)return!0;const o=this.protocol?$3[this.protocol]:null;if(o&&(this.port||o)==(n.port||o))return!0}return!1}toRelPath(n,o){let r=0,c="",u,f;const b=n.substring(0,n.lastIndexOf("/")).split("/"),v=o.split("/");if(b.length>=v.length){for(u=0,f=b.length;u<f;u++)if(u>=v.length||b[u]!==v[u]){r=u+1;break}}if(b.length<v.length){for(u=0,f=v.length;u<f;u++)if(u>=b.length||b[u]!==v[u]){r=u+1;break}}if(r===1)return o;for(u=0,f=b.length-(r-1);u<f;u++)c+="../";for(u=r-1,f=v.length;u<f;u++)u!==r-1?c+="/"+v[u]:c+=v[u];return c}toAbsPath(n,o){let r=0;const c=/\/$/.test(o)?"/":"",u=n.split("/"),f=o.split("/"),b=[];rT(u,B=>{B&&b.push(B)});const v=[];for(let B=f.length-1;B>=0;B--)if(!(f[B].length===0||f[B]===".")){if(f[B]===".."){r++;continue}if(r>0){r--;continue}v.push(f[B])}const x=b.length-r;let D;return x<=0?D=wo(v).join("/"):D=b.slice(0,x).join("/")+"/"+wo(v).join("/"),D.indexOf("/")!==0&&(D="/"+D),c&&D.lastIndexOf("/")!==D.length-1&&(D+=c),D}getURI(n=!1){let o;return(!this.source||n)&&(o="",n||(this.protocol?o+=this.protocol+"://":o+="//",this.userInfo&&(o+=this.userInfo+"@"),this.host&&(o+=this.host),this.port&&(o+=":"+this.port)),this.path&&(o+=this.path),this.query&&(o+="?"+this.query),this.anchor&&(o+="#"+this.anchor),this.source=o),this.source}}const YH=Mt.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),I3="data-mce-type";let BF=0;const FF=(e,n,o,r,c)=>{var u,f,b,v;const x=n.validate,D=o.getSpecialElements();e.nodeType===ii&&(!n.allow_conditional_comments&&/^\[if/i.test((u=e.nodeValue)!==null&&u!==void 0?u:"")&&(e.nodeValue=" "+e.nodeValue),n.sanitize&&n.allow_html_in_comments&&ie(e.nodeValue)&&(e.nodeValue=pH(e.nodeValue)));const B=(f=c==null?void 0:c.tagName)!==null&&f!==void 0?f:e.nodeName.toLowerCase();if(r!=="html"&&o.isValid(r)){Fe(c)&&(c.allowedTags[B]=!0);return}if(e.nodeType!==bg||B==="body")return;const N=re.fromDom(e),H=lr(N,I3),te=nr(N,"data-mce-bogus");if(!H&&ie(te)){te==="all"?Ws(N):li(N);return}const Q=o.getElementRule(B);if(x&&!Q){to(D,B)?Ws(N):li(N);return}else Fe(c)&&(c.allowedTags[B]=!0);if(x&&Q&&!H){if(me((b=Q.attributesForced)!==null&&b!==void 0?b:[],Y=>{Cr(N,Y.name,Y.value==="{$uid}"?`mce_${BF++}`:Y.value)}),me((v=Q.attributesDefault)!==null&&v!==void 0?v:[],Y=>{lr(N,Y.name)||Cr(N,Y.name,Y.value==="{$uid}"?`mce_${BF++}`:Y.value)}),Q.attributesRequired&&!ke(Q.attributesRequired,Y=>lr(N,Y))){li(N);return}if(Q.removeEmptyAttrs&&wf(N)){li(N);return}Q.outputName&&Q.outputName!==B&&rd(N,Q.outputName)}},XH=(e,n,o,r,c)=>{const u=e.tagName.toLowerCase(),{attrName:f,attrValue:b}=c;c.keepAttr=NF(n,o,r,u,f,b),c.keepAttr?(c.allowedAttributes[f]=!0,$F(f,o)&&(c.attrValue=f),n.allow_svg_data_urls&&jn(b,"data:image/svg+xml")&&(c.forceKeepAttr=!0)):PF(e,f)&&(c.forceKeepAttr=!0)},NF=(e,n,o,r,c,u)=>o!=="html"&&!hi(r)?!0:!(c in YH&&MF(e,u,r))&&(!e.validate||n.isValid(r,c)||jn(c,"data-")||jn(c,"aria-")),PF=(e,n)=>e.hasAttribute(I3)&&(n==="id"||n==="class"||n==="style"),$F=(e,n)=>e in n.getBoolAttrs(),JH=(e,n,o,r)=>{const{attributes:c}=e;for(let u=c.length-1;u>=0;u--){const f=c[u],b=f.name,v=f.value;!NF(n,o,r,e.tagName.toLowerCase(),b,v)&&!PF(e,b)?e.removeAttribute(b):$F(b,o)&&e.setAttribute(b,b)}},aT=(e,n,o)=>{const r=cf();return r.addHook("uponSanitizeElement",(c,u)=>{FF(c,e,n,o.track(c),u)}),r.addHook("uponSanitizeAttribute",(c,u)=>{XH(c,e,n,o.current(),u)}),r},QH=(e,n)=>{const r={...{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body","html"],ALLOWED_ATTR:[]}};return r.PARSER_MEDIA_TYPE=n,e.allow_script_urls?r.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(r.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),r},ez=e=>{const n=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(r=>`xlink:${r}`),o={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:n};cf().sanitize(e,o)},nJ=(e,n)=>{const o={IN_PLACE:!0,USE_PROFILES:{mathMl:!0}},r=cf(),c=n.allow_mathml_annotation_encodings,u=Qe(c)&&c.length>0,f=v=>{const x=v.getAttribute("encoding");return u&&ie(x)&&be(c,x)},b=(v,x)=>u&&x==="semantics"?P.some(!0):x==="annotation"?P.some(Cn(v)&&f(v)):Qe(n.extended_mathml_elements)&&n.extended_mathml_elements.includes(x)?P.from(!0):P.none();r.addHook("uponSanitizeElement",(v,x)=>{var D;const B=(D=x.tagName)!==null&&D!==void 0?D:v.nodeName.toLowerCase();b(v,B).each(H=>{x.allowedTags[B]=H,!H&&n.sanitize&&Cn(v)&&v.remove()})}),r.addHook("uponSanitizeAttribute",(v,x)=>{Qe(n.extended_mathml_attributes)&&n.extended_mathml_attributes.includes(x.attrName)&&(x.forceKeepAttr=!0)}),r.sanitize(e,o)},ZC=e=>n=>{const o=kS(n);if(o==="svg")ez(n);else if(o==="math")nJ(n,e);else throw new Error("Not a namespace element")},tz=(e,n)=>{const o=Eb();if(e.sanitize){const r=aT(e,n,o);return{sanitizeHtmlElement:(u,f)=>{r.sanitize(u,QH(e,f)),r.removed=[],o.reset()},sanitizeNamespaceElement:ZC(e)}}else return{sanitizeHtmlElement:(u,f)=>{const b=document.createNodeIterator(u,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let v;for(;v=b.nextNode();){const x=o.track(v);FF(v,e,n,x),Cn(v)&&JH(v,e,n,x)}o.reset()},sanitizeNamespaceElement:Ct}},cT=["script","style","template","param"],IF=Mt.makeMap,LF=Mt.extend,HF=(e,n,o,r,c)=>{const u=e.name,f=u in o&&u!=="title"&&u!=="textarea"&&u!=="noscript",b=n.childNodes;for(let v=0,x=b.length;v<x;v++){const D=b[v],B=new Ii(D.nodeName.toLowerCase(),D.nodeType);if(Cn(D)){const N=D.attributes;for(let H=0,te=N.length;H<te;H++){const Q=N[H];B.attr(Q.name,Q.value)}hi(B.name)&&(r(D),B.value=D.innerHTML)}else kt(D)?(B.value=D.data,f&&(B.raw=!0)):$r(D)?B.value=c?bH(D.data):D.data:(Jy(D)||Qy(D))&&(B.value=D.data);if(wb(D)){const N=Ii.create("#text");N.value=D.innerHTML,N.raw=!0,B.append(N)}else hi(B.name)||HF(B,D,o,r,c);e.append(B)}},nz=(e,n,o)=>{const r=[];for(let c=e,u=c;c;u=c,c=c.walk()){const f=c;me(n,b=>b(f)),vn(f.parent)&&f!==e?c=u:r.push(f)}for(let c=r.length-1;c>=0;c--){const u=r[c];me(o,f=>f(u))}},_0=(e,n,o,r)=>{const c=o.validate,u=n.getNonEmptyElements(),f=n.getWhitespaceElements(),b=LF(IF(cT),n.getBlockElements()),v=$S(n),x=/[ \t\r\n]+/g,D=/^[ \t\r\n]+/,B=/[ \t\r\n]+$/,N=_e=>{let Pe=_e.parent;for(;Fe(Pe);){if(Pe.name in f)return!0;Pe=Pe.parent}return!1},H=_e=>{let Pe=_e;for(;Fe(Pe);){if(Pe.name in v)return IC(n,u,f,Pe);Pe=Pe.parent}return!1},te=_e=>_e.name in b||E1(n,_e)||hi(_e.name)&&_e.parent===e,Q=(_e,Pe)=>{const Ze=Pe?_e.prev:_e.next;return Fe(Ze)||vn(_e.parent)?!1:te(_e.parent)&&(_e.parent!==e||r.isRootContent===!0)};return[_e=>{var Pe;if(_e.type===3&&!N(_e)){let Ze=(Pe=_e.value)!==null&&Pe!==void 0?Pe:"";Ze=Ze.replace(x," "),(fH(_e.prev,te)||Q(_e,!0))&&(Ze=Ze.replace(D,"")),Ze.length===0||Ze===" "&&_e.prev&&_e.prev.type===ii&&_e.next&&_e.next.type===ii?_e.remove():_e.value=Ze}},_e=>{var Pe;if(_e.type===1){const Ze=n.getElementRule(_e.name);if(c&&Ze){const ht=IC(n,u,f,_e);Ze.paddInEmptyBlock&&ht&&H(_e)?y3(o,r,te,_e):Ze.removeEmpty&&ht?te(_e)?_e.remove():_e.unwrap():Ze.paddEmpty&&(ht||uF(_e))&&y3(o,r,te,_e)}}else if(_e.type===3&&!N(_e)){let Ze=(Pe=_e.value)!==null&&Pe!==void 0?Pe:"";(_e.next&&te(_e.next)||Q(_e,!1))&&(Ze=Ze.replace(B,"")),Ze.length===0?_e.remove():_e.value=Ze}}]},k0=(e,n)=>{var o;const r=(o=n.forced_root_block)!==null&&o!==void 0?o:e.forced_root_block;return r===!1?"":r===!0?"p":r},jC=' xmlns="http://www.w3.org/1999/xhtml"',hh=(e={},n=Pu())=>{const o=fF(),r=fF(),c={validate:!0,root_name:"body",sanitize:!0,allow_html_in_comments:!1,...e},u=new DOMParser,f=tz(c,n),b=(Pe,Ze,ht="html",Vt=!1)=>{const Ot=ht==="xhtml",lt=Ot?"application/xhtml+xml":"text/html",Be=to(n.getSpecialElements(),Ze.toLowerCase()),oe=Be?`<${Ze}>${Pe}</${Ze}>`:Pe,je=()=>/^[\s]*<head/i.test(Pe)||/^[\s]*<html/i.test(Pe)||/^[\s]*<!DOCTYPE/i.test(Pe)?`<html${Ot?jC:""}>${oe}</html>`:Ot?`<html${jC}><head></head><body>${oe}</body></html>`:`<body>${oe}</body>`,Dt=u.parseFromString(je(),lt),kn=Vt?Dt.documentElement:Dt.body;return f.sanitizeHtmlElement(kn,lt),Be?kn.firstChild:kn},v=o.addFilter,x=o.getFilters,D=o.removeFilter,B=r.addFilter,N=r.getFilters,H=r.removeFilter,te=(Pe,Ze)=>{w3(n,Pe)&&Ze.push(Pe)},Q=(Pe,Ze)=>{const ht=ie(Ze.attr(I3)),Vt=Ze.type===1&&!to(Pe,Ze.name)&&!E1(n,Ze)&&!hi(Ze.name);return Ze.type===3||Vt&&!ht},Y=(Pe,Ze)=>{const ht=LF(IF(cT),n.getBlockElements()),Vt=/^[ \t\r\n]+/,Ot=/[ \t\r\n]+$/;let lt=Pe.firstChild,Be=null;const oe=je=>{var Dt,kn;je&&(lt=je.firstChild,lt&&lt.type===3&&(lt.value=(Dt=lt.value)===null||Dt===void 0?void 0:Dt.replace(Vt,"")),lt=je.lastChild,lt&&lt.type===3&&(lt.value=(kn=lt.value)===null||kn===void 0?void 0:kn.replace(Ot,"")))};if(n.isValidChild(Pe.name,Ze.toLowerCase())){for(;lt;){const je=lt.next;Q(ht,lt)?(Be||(Be=new Ii(Ze,1),Be.attr(c.forced_root_block_attrs),Pe.insert(Be,lt)),Be.append(lt)):(oe(Be),Be=null),lt=je}oe(Be)}},_e={schema:n,addAttributeFilter:B,getAttributeFilters:N,removeAttributeFilter:H,addNodeFilter:v,getNodeFilters:x,removeNodeFilter:D,parse:(Pe,Ze={})=>{var ht,Vt;const Ot=c.validate,lt=((ht=Ze.context)!==null&&ht!==void 0?ht:c.root_name)==="#document",Be=(Vt=Ze.context)!==null&&Vt!==void 0?Vt:lt?"html":c.root_name,oe=b(Pe,Be,Ze.format,lt);Mf(n,oe);const je=new Ii(Be,11);HF(je,oe,n.getSpecialElements(),f.sanitizeNamespaceElement,c.sanitize&&c.allow_html_in_comments),oe.innerHTML="";const[Dt,kn]=_0(je,n,c,Ze),io=[],zo=Ot?Oc=>te(Oc,io):Ct,is={nodes:{},attributes:{}},kr=Oc=>p3(x(),N(),Oc,is);nz(je,[Dt,kr],[kn,zo]),io.reverse(),Ot&&io.length>0&&(Ze.context?Ze.invalid=!0:mF(io,n,je,kr));const Dr=k0(c,Ze);return Dr&&(je.name==="body"||Ze.isRootContent)&&Y(je,Dr),Ze.invalid||b3(is,Ze),je}};return yF(_e,c),gF(_e,c,n),_e},Qf=e=>e instanceof Ii,D0=e=>Qf(e)?Ap({validate:!1}).serialize(e):e,qC=(e,n,o)=>{const r=D0(e),c=n(r);if(c.isDefaultPrevented())return c;if(Qf(e))if(c.content!==r){const u=hh({validate:!1,forced_root_block:!1,...o}).parse(c.content,{context:e.name});return{...c,content:u}}else return{...c,content:e};else return c},GC=e=>({sanitize:X2(e),sandbox_iframes:yv(e),sandbox_iframes_exclusions:r0(e)}),L3=(e,n)=>{if(n.no_events)return ge.value(n);{const o=xx(e,n);return o.isDefaultPrevented()?ge.error(Ex(e,{content:"",...o}).content):ge.value(o)}},iT=(e,n,o)=>o.no_events?n:qC(n,c=>Ex(e,{...o,content:c}),GC(e)).content,KC=(e,n)=>{if(n.no_events)return ge.value(n);{const o=qC(n.content,r=>Qa(e,{...n,content:r}),GC(e));return o.isDefaultPrevented()?(Sx(e,o),ge.error(void 0)):ge.value(o)}},lT=(e,n,o)=>{o.no_events||Sx(e,{...o,content:n})},zF="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),Gv=["content_css_cors"],VF="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),H3=[{name:"export",replacedWith:"Export to PDF"}],z3=(e,n)=>{const o=tt(n,r=>to(e,r));return wn(o)},uT=e=>{const n=z3(e,zF),o=e.forced_root_block;return(o===!1||o==="")&&n.push("forced_root_block (false only)"),wn(n)},UF=e=>z3(e,Gv),V3=(e,n)=>{const o=Mt.makeMap(e.plugins," "),c=tt(n,u=>to(o,u));return wn(c)},WF=e=>V3(e,VF),ZF=e=>V3(e,H3.map(n=>n.name)),ph=(e,n)=>{const o=uT(e),r=WF(n),c=r.length>0,u=o.length>0,f=n.theme==="mobile";if(c||u||f){const v=f?`

Themes:
- mobile`:"",x=c?`

Plugins:
- ${r.join(`
- `)}`:"",D=u?`

Options:
- ${o.join(`
- `)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 8.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/8/migration-from-7x/ for more information."+v+x+D)}},Np=e=>rn(H3,n=>n.name===e).fold(()=>e,n=>n.replacedWith?`${e}, replaced by ${n.replacedWith}`:e),wm=(e,n)=>{const o=UF(e),r=ZF(n),c=r.length>0,u=o.length>0;if(c||u){const b=c?`

Plugins:
- ${r.map(Np).join(`
- `)}`:"",v=u?`

Options:
- ${o.join(`
- `)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+b+v)}},oz=(e,n)=>{ph(e,n),wm(e,n)},sz={fire:'The "fire" event api has been deprecated and will be removed in TinyMCE 9. Use "dispatch" instead.',selectionSetContent:'The "editor.selection.setContent" method has been deprecated and will be removed in TinyMCE 9. Use "editor.insertContent" instead.'},jF=e=>{console.warn(sz[e],new Error().stack)},qF=e=>e.dom.length===0?(Ws(e),P.none()):P.some(e),rz=(e,n)=>e.filter(o=>bm.isBookmarkNode(o.dom)).bind(n?zc:qi),az=(e,n,o,r,c)=>{const u=e.dom,f=n.dom,b=r?u.length:f.length;r?(Mk(u,f,c,!1,!r),o.setStart(f,b)):(Mk(f,u,c,!1,!r),o.setEnd(f,b))},cz=(e,n,o)=>{Hc(e).each(r=>{const c=e.dom;n&&OC(r,nt(c,0),o)?ZE(c,0,o):!n&&RC(r,nt(c,c.length),o)&&Rk(c,c.length,o)})},GF=(e,n,o,r,c)=>{e.bind(u=>((r?Rk:ZE)(u.dom,r?u.dom.length:0,c),n.filter(xs).map(b=>az(u,b,o,r,c)))).orThunk(()=>rz(n,r).or(n).filter(xs).map(f=>cz(f,r,c)))},iz=(e,n,o)=>{const r=P.from(n.firstChild).map(re.fromDom),c=P.from(n.lastChild).map(re.fromDom);e.deleteContents(),e.insertNode(n);const u=r.bind(qi).filter(xs).bind(qF),f=c.bind(zc).filter(xs).bind(qF);GF(u,r,e,!0,o),GF(f,c,e,!1,o),e.collapse(!1)},lz=(e,n)=>({format:"html",...e,set:!0,selection:!0,content:n}),uz=(e,n)=>{if(n.format!=="raw"){const o=e.selection.getRng(),r=e.dom.getParent(o.commonAncestorContainer,e.dom.isBlock),c=r?{context:r.nodeName.toLowerCase()}:{},u=e.parser.parse(n.content,{forced_root_block:!1,...c,...n});return Ap({validate:!1},e.schema).serialize(u)}else return n.content},dT=(e,n,o={})=>{const r=lz(o,n);KC(e,r).each(c=>{const u=uz(e,c),f=e.selection.getRng();iz(f,f.createContextualFragment(u),e.schema),e.selection.setRng(f),AC(e,f),lT(e,u,c)})},U3=(e,n,o={})=>{jF("selectionSetContent"),dT(e,n,o)},W3=e=>Fe(e.firstChild)&&e.firstChild===e.lastChild,KF=e=>e.name==="br"||e.value===ir,dz=(e,n)=>e.getBlockElements()[n.name]&&W3(n)&&KF(n.firstChild),mz=(e,n)=>{const o=e.getNonEmptyElements();return Fe(n)&&(n.isEmpty(o)||dz(e,n))},YF=(e,n)=>{let o=n.firstChild,r=n.lastChild;return o&&o.name==="meta"&&(o=o.next),r&&r.attr("id")==="mce_marker"&&(r=r.prev),mz(e,r)&&(r=r==null?void 0:r.prev),!o||o!==r?!1:o.name==="ul"||o.name==="ol"},XF=e=>{var n,o;const r=e.firstChild,c=e.lastChild;return r&&r.nodeName==="META"&&((n=r.parentNode)===null||n===void 0||n.removeChild(r)),c&&c.id==="mce_marker"&&((o=c.parentNode)===null||o===void 0||o.removeChild(c)),e},Z3=(e,n,o)=>{const r=n.serialize(o),c=e.createFragment(r);return XF(c)},JF=e=>{var n;return tt((n=e==null?void 0:e.childNodes)!==null&&n!==void 0?n:[],o=>o.nodeName==="LI")},QF=e=>e.data===ir||xr(e),j3=e=>Fe(e==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&QF(e.firstChild),fz=e=>!e.firstChild||j3(e),gz=e=>e.length>0&&fz(e[e.length-1])?e.slice(0,-1):e,Sm=(e,n)=>{const o=e.getParent(n,e.isBlock);return o&&o.nodeName==="LI"?o:null},xm=(e,n)=>!!Sm(e,n),mT=(e,n)=>{const o=n.cloneRange(),r=n.cloneRange();return o.setStartBefore(e),r.setEndAfter(e),[o.cloneContents(),r.cloneContents()]},e6=(e,n)=>{const o=nt.before(e),c=Ad(n).next(o);return c?c.toRange():null},YC=(e,n)=>{const o=nt.after(e),c=Ad(n).prev(o);return c?c.toRange():null},t6=(e,n,o,r)=>{const c=mT(e,r),u=e.parentNode;return u&&(u.insertBefore(c[0],e),Mt.each(n,f=>{u.insertBefore(f,e)}),u.insertBefore(c[1],e),u.removeChild(e)),YC(n[n.length-1],o)},n6=(e,n,o)=>{const r=e.parentNode;return r&&Mt.each(n,c=>{r.insertBefore(c,e)}),e6(e,o)},o6=(e,n,o,r)=>(r.insertAfter(n.reverse(),e),YC(n[0],o)),s6=(e,n,o,r)=>{const c=Z3(n,e,r),u=Sm(n,o.startContainer),f=gz(JF(c.firstChild)),b=1,v=2,x=n.getRoot(),D=B=>{const N=nt.fromRangeStart(o),H=Ad(n.getRoot()),te=B===b?H.prev(N):H.next(N),Q=te==null?void 0:te.getNode();return Q?Sm(n,Q)!==u:!0};return u?D(b)?n6(u,f,x):D(v)?o6(u,f,x,n):t6(u,f,x,o):null},r6=["pre"],a6=(e,n,o,r)=>{var c;const u=n.firstChild,f=n.lastChild,b=f.attr("data-mce-type")==="bookmark"?f.prev:f,v=u===b,x=be(r6,u.name);if(v&&x){const D=u.attr("contenteditable")!=="false",B=((c=e.getParent(o,e.isBlock))===null||c===void 0?void 0:c.nodeName.toLowerCase())===u.name,N=P.from(x0(r,o)).forall(fi);return D&&B&&N}else return!1},Kv=Xd,q3=(e,n,o)=>{if(Fe(o)){const r=e.getParent(n.endContainer,Kv);return o===r&&pC(re.fromDom(o),n)}else return!1},hz=(e,n)=>{if(e.isBlock(n)&&e.isEditable(n)){const o=n.childNodes;return o.length===1&&xr(o[0])||o.length===0}else return!1},pz=(e,n,o)=>{var r;o.getAttribute("data-mce-bogus")==="all"?(r=o.parentNode)===null||r===void 0||r.insertBefore(e.dom.createFragment(n),o):hz(e.dom,o)?e.dom.setHTML(o,n):dT(e,n,{no_events:!0})},bz=(e,n,o)=>{P.from(e.getParent(n,"td,th")).map(re.fromDom).each(r=>e4(r,o))},vz=(e,n)=>{const o=e.schema.getTextInlineElements(),r=e.dom;if(n){const c=e.getBody(),u=Qk(e),f="*[data-mce-fragment]",b=r.select(f);Mt.each(b,v=>{const x=N=>Fe(o[N.nodeName.toLowerCase()]),D=N=>N.childNodes.length===1;if((N=>!(JL(r,N)||QL(r,N)))(v)&&x(v)&&D(v)){const N=_C(r,v),H=(Ae,_e)=>zs(Ae,Pe=>be(_e,Pe)),te=Ae=>D(v)&&r.is(Ae,f)&&x(Ae)&&(Ae.nodeName===v.nodeName&&H(N,_C(r,Ae))||te(Ae.children[0])),Q=Ae=>Fe(Ae)&&Ae!==c&&(u.compare(v,Ae)||Q(Ae.parentElement)),Y=Ae=>Fe(Ae)&&Ae!==c&&r.is(Ae,f)&&(e9(r,v,Ae)||Y(Ae.parentElement));(te(v.children[0])||Q(v.parentElement)&&!Y(v.parentElement))&&r.remove(v,!0)}}),aF(e,Zd(b))}},c6=e=>{let n=e;for(;n=n.walk();)n.type===1&&n.attr("data-mce-fragment","1")},yz=e=>{Mt.each(e.getElementsByTagName("*"),n=>{n.removeAttribute("data-mce-fragment")})},Cz=e=>!!e.getAttribute("data-mce-fragment"),G3=(e,n)=>Fe(n)&&!e.schema.getVoidElements()[n.nodeName],wz=(e,n)=>{var o,r,c;let u;const f=e.dom,b=e.selection;if(!n)return;b.scrollIntoView(n);const v=x0(e.getBody(),n);if(v&&f.getContentEditable(v)==="false"){f.remove(n),b.select(v);return}let x=f.createRng();const D=n.previousSibling;if(kt(D)){x.setStart(D,(r=(o=D.nodeValue)===null||o===void 0?void 0:o.length)!==null&&r!==void 0?r:0);const H=n.nextSibling;kt(H)&&(D.appendData(H.data),(c=H.parentNode)===null||c===void 0||c.removeChild(H))}else x.setStartBefore(n),x.setEndBefore(n);const B=H=>{let te=nt.fromRangeStart(H);return te=Ad(e.getBody()).next(te),te==null?void 0:te.toRange()},N=f.getParent(n,f.isBlock);if(f.remove(n),N&&f.isEmpty(N)){const H=Kv(N);vl(re.fromDom(N)),x.setStart(N,0),x.setEnd(N,0),!H&&!Cz(N)&&(u=B(x))?(x=u,f.remove(N)):f.add(N,f.create("br",H?{}:{"data-mce-bogus":"1"}))}b.setRng(x)},Sz=e=>{const n=e.dom,o=eT(e.selection.getRng());e.selection.setRng(o);const r=n.getParent(o.startContainer,Kv);q3(n,o,r)?Gk(e,o,re.fromDom(r)):yC(o)||K4(o)?o.deleteContents():e.getDoc().execCommand("Delete",!1)},xz=e=>{for(let n=e;n;n=n.walk())if(n.attr("id")==="mce_marker")return P.some(n);return P.none()},Ez=(e,n,o)=>{var r;return ke(o.children(),cF)&&((r=e.getParent(n,e.isBlock))===null||r===void 0?void 0:r.nodeName)==="SUMMARY"},Tz=(e,n,o)=>{var r;const c=e.selection,u=e.dom,f=e.parser,b=o.merge,v=Ap({validate:!0},e.schema),x='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';o.preserve_zwsp||(n=Bi(n)),n.indexOf("{$caret}")===-1&&(n+="{$caret}"),n=n.replace(/\{\$caret\}/,x);let D=c.getRng();const B=D.startContainer,N=e.getBody();B===N&&c.isCollapsed()&&u.isBlock(N.firstChild)&&G3(e,N.firstChild)&&u.isEmpty(N.firstChild)&&(D=u.createRng(),D.setStart(N.firstChild,0),D.setEnd(N.firstChild,0),c.setRng(D)),c.isCollapsed()||Sz(e);const H=c.getNode(),te={context:H.nodeName.toLowerCase(),data:o.data,insert:!0},Q=f.parse(n,te);if(o.paste===!0&&YF(e.schema,Q)&&xm(u,H))return D=s6(v,u,c.getRng(),Q),D&&c.setRng(D),n;o.paste===!0&&a6(u,Q,H,e.getBody())&&((r=Q.firstChild)===null||r===void 0||r.unwrap()),c6(Q);let Y=Q.lastChild;if(Y&&Y.attr("id")==="mce_marker"){const Ae=Y;for(Y=Y.prev;Y&&Y.name!=="table";Y=Y.walk(!0))if(Y.type===3||!u.isBlock(Y.name)){Y.parent&&e.schema.isValidChild(Y.parent.name,"span")&&Y.parent.insert(Ae,Y,Y.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(H),!te.invalid&&!Ez(u,H,Q))n=v.serialize(Q),pz(e,n,H);else{dT(e,x);let Ae=c.getNode(),_e;const Pe=e.getBody();for(Io(Ae)?Ae=_e=Pe:_e=Ae;_e&&_e!==Pe;)Ae=_e,_e=_e.parentNode;n=Ae===Pe?Pe.innerHTML:u.getOuterHTML(Ae);const Ze=f.parse(n),ht=xz(Ze),Vt=ht.bind(gH).getOr(Ze);ht.each(Be=>Be.replace(Q));const Ot=QX(Q);Q.unwrap();const lt=tt(Ot,Be=>w3(e.schema,Be));mF(lt,e.schema,Vt),v3(f.getNodeFilters(),f.getAttributeFilters(),Ze),n=v.serialize(Ze),Ae===Pe?u.setHTML(Pe,n):u.setOuterHTML(Ae,n)}return vz(e,b),wz(e,u.get("mce_marker")),yz(e.getBody()),bz(u,c.getStart(),e.schema),Dg(e.schema,e.getBody(),c.getStart()),n},Az=e=>{y0(e)&&Yc(e.getBody()).each(n=>{const o=n.getNode(),r=Yd(o)?Yc(o).getOr(n):n;e.selection.setRng(r.toRange())})},K3=(e,n,o)=>{e.dom.setHTML(e.getBody(),n),o!==!0&&Az(e)},fT=(e,n,o,r)=>{if(o=Bi(o),o.length===0||/^\s+$/.test(o)){const c='<br data-mce-bogus="1">';n.nodeName==="TABLE"?o="<tr><td>"+c+"</td></tr>":/^(UL|OL)$/.test(n.nodeName)&&(o="<li>"+c+"</li>");const u=pc(e);return e.schema.isValidChild(n.nodeName.toLowerCase(),u.toLowerCase())?(o=c,o=e.dom.createHTML(u,gp(e),o)):o||(o=c),K3(e,o,r.no_selection),{content:o,html:o}}else{r.format!=="raw"&&(o=Ap({validate:!1},e.schema).serialize(e.parser.parse(o,{isRootContent:!0,insert:!0})));const c=ol(re.fromDom(n))?o:Mt.trim(o);return K3(e,c,r.no_selection),{content:c,html:c}}},Y3=(e,n,o,r)=>{v3(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),o);const c=Ap({validate:!1},e.schema).serialize(o),u=Bi(ol(re.fromDom(n))?c:Mt.trim(c));return K3(e,u,r.no_selection),{content:o,html:u}},_z=(e,n,o)=>P.from(e.getBody()).map(r=>Qf(n)?Y3(e,r,n,o):fT(e,r,n,o)).getOr({content:n,html:Qf(o.content)?"":o.content}),XC={},i6=Xa(["pre"]),kz=(e,n)=>{XC[e]||(XC[e]=[]),XC[e].push(n)},l6=(e,n)=>{to(XC,e)&&me(XC[e],o=>{o(n)})};kz("pre",e=>{const n=e.selection.getRng(),o=c=>u=>{const f=u.previousSibling;return i6(f)&&be(c,f)},r=(c,u)=>{const f=re.fromDom(u),b=hl(f).dom;Ws(f),Yi(re.fromDom(c),[re.fromTag("br",b),re.fromTag("br",b),...wr(f)])};if(!n.collapsed){const c=e.selection.getSelectedBlocks(),u=tt(tt(c,i6),o(c));me(u,f=>{r(f.previousSibling,f)})}});const u6=Mt.each,Dz=(e,n,o,r)=>{const c=u=>{if(dr(u)&&Cn(u.parentNode)&&e.isEditable(u)){const f=A(e,u.parentNode);e.getStyle(u,"color")&&f?e.setStyle(u,"text-decoration",f):e.getStyle(u,"text-decoration")===f&&e.setStyle(u,"text-decoration",null)}};n.styles&&(n.styles.color||n.styles.textDecoration)&&(Mt.walk(r,c,"childNodes"),c(r))},X3=(e,n,o,r)=>{if(n.styles&&n.styles.backgroundColor){const c=JB(e,"fontSize");XB(r,u=>c(u)&&e.isEditable(u),Wv(e,"backgroundColor",l(n.styles.backgroundColor,o)))}},Oz=(e,n,o,r)=>{if(Pt(n)&&(n.inline==="sub"||n.inline==="sup")){const c=JB(e,"fontSize");XB(r,f=>c(f)&&e.isEditable(f),Wv(e,"fontSize",""));const u=tt(e.select(n.inline==="sup"?"sub":"sup",r),e.isEditable);e.remove(u,!0)}},Rz=(e,n,o,r)=>{u6(n,c=>{Pt(c)&&u6(e.dom.select(c.inline,r),u=>{i3(u)&&jv(e,c,o,u,c.exact?u:null)}),br(e.dom,c,r)})},Mz=(e,n,o,r,c)=>{const u=c.parentNode;Cm(e,u,o,r)&&jv(e,n,r,c)||n.merge_with_parents&&u&&e.dom.getParent(u,f=>Cm(e,f,o,r)?(jv(e,n,r,c),!0):!1)},Bz=Mt.each,Fz=(e,n,o,r)=>{if(J1(e)&&Pt(n)&&o.parentNode){const c=$S(e.schema),u=Sn(re.fromDom(o),f=>Pi(f.dom));return os(c,r)&&Zl(e.schema,o.parentNode,{skipBogus:!1,includeZwsp:!0})&&!u}else return!1},Nz=(e,n,o,r)=>{const c=e.formatter.get(n),u=c[0],f=!r&&e.selection.isCollapsed(),b=e.dom,v=e.selection,x=(H,te)=>{let Q=!1;return Bz(H,Y=>jt(Y)?b.getContentEditable(te)==="false"&&!Y.ceFalseOverride||Fe(Y.collapsed)&&Y.collapsed!==f?!0:b.is(te,Y.selector)&&!Pi(te)?(zv(e,te,Y,o,te),Q=!0,!1):!0:!1),Q},D=H=>{if(ie(H)){const te=b.create(H);return zv(e,te,u,o,r),te}else return null},B=(H,te,Q)=>{const Y=[];let Ae=!0;const _e=u.inline||u.block,Pe=D(_e),Ze=Ot=>Le(u)&&Cm(e,Ot,n,o),ht=(Ot,lt,Be)=>{const oe=xt(u)&&wC(e.schema,Ot)&&Sp(e,lt,_e);return Be&&oe},Vt=(Ot,lt,Be,oe)=>{const je=Ot.nodeName.toLowerCase(),Dt=Sp(e,_e,je)&&Sp(e,lt,_e),kn=!Q&&kt(Ot)&&Wb(Ot.data),io=Pi(Ot),zo=!Pt(u)||!H.isBlock(Ot);return(Be||oe)&&Dt&&!kn&&!io&&zo};xp(H,te,Ot=>{let lt;const Be=oe=>{let je=!1,Dt=Ae,kn=!1;const io=oe.parentNode,zo=io.nodeName.toLowerCase(),is=H.getContentEditable(oe);Fe(is)&&(Dt=Ae,Ae=is==="true",je=!0,kn=CE(e,oe));const kr=Ae&&!je;if(xr(oe)&&!Fz(e,u,oe,zo)){lt=null,ve(u)&&H.remove(oe);return}if(Ze(oe)){lt=null;return}if(ht(oe,zo,kr)){const Dr=H.rename(oe,_e);zv(e,Dr,u,o,oe),Y.push(Dr),lt=null;return}if(jt(u)){let Dr=x(c,oe);if(!Dr&&Fe(io)&&it(u)&&(Dr=x(c,io)),!Pt(u)||Dr){lt=null;return}}Fe(Pe)&&Vt(oe,zo,kr,kn)?(lt||(lt=H.clone(Pe,!1),io.insertBefore(lt,oe),Y.push(lt)),kn&&je&&(Ae=Dt),lt.appendChild(oe)):(lt=null,me(So(oe.childNodes),Be),je&&(Ae=Dt),lt=null)};me(Ot,Be)}),u.links===!0&&me(Y,Ot=>{const lt=Be=>{Be.nodeName==="A"&&zv(e,Be,u,o,r),me(So(Be.childNodes),lt)};lt(Ot)}),dH(e,n,Zd(Y)),me(Y,Ot=>{const lt=je=>{let Dt=0;return me(je.childNodes,kn=>{!pr(kn)&&!rl(kn)&&Dt++}),Dt},Be=je=>rn(je.childNodes,CC).filter(kn=>H.getContentEditable(kn)!=="false"&&XE(H,kn,u)).map(kn=>{const io=H.clone(kn,!1);return zv(e,io,u,o,je),H.replace(io,je,!0),H.remove(kn,!0),io}).getOr(je),oe=lt(Ot);if((Y.length>1||!H.isBlock(Ot))&&oe===0){H.remove(Ot,!0);return}(Pt(u)||ve(u)&&u.wrapper)&&(!u.exact&&oe===1&&(Ot=Be(Ot)),Rz(e,c,o,Ot),Mz(e,u,n,o,Ot),X3(H,u,o,Ot),Dz(H,u,o,Ot),Oz(H,u,o,Ot),YB(e,u,o,Ot))})},N=h0(r)?r:v.getNode();if(b.getContentEditable(N)==="false"&&!CE(e,N)){r=N,x(c,r),Ft(e,n,r,o);return}if(u){if(r)if(h0(r)){if(!x(c,r)){const H=b.createRng();H.setStartBefore(r),H.setEndAfter(r),B(b,wa(b,H,c),!0)}}else B(b,r,!0);else!f||!Pt(u)||Kf(e).length?(v.setRng(eT(v.getRng())),$v(e,()=>{bC(e,(H,te)=>{const Q=te?H:wa(b,H,c);B(b,Q,!1)})},ft),e.nodeChanged()):qX(e,n,o),Uv(e.formatter,n).each(H=>{me(KX(e.selection),te=>HB(b,te,H,o))});l6(n,e)}Ft(e,n,r,o)},d6=(e,n,o,r)=>{(r||e.selection.isEditable())&&Nz(e,n,o,r)},JC=e=>to(e,"vars"),gT=(e,n)=>{e.set({}),n.on("NodeChange",o=>{g6(n,o.element,e.get())}),n.on("FormatApply FormatRemove",o=>{const r=P.from(o.node).map(c=>h0(c)?c:c.startContainer).bind(c=>Cn(c)?P.some(c):P.from(c.parentElement)).getOrThunk(()=>m6(n));g6(n,r,e.get())})},m6=e=>e.selection.getStart(),f6=(e,n,o,r,c)=>Fn(n,b=>{const v=e.formatter.matchNode(b,o,c??{},r);return!Kn(v)},b=>al(e,b,o)?!0:r?!1:Fe(e.formatter.matchNode(b,o,c,!0))),QC=(e,n)=>{const o=n??m6(e);return tt(R(e.dom,o),r=>Cn(r)&&!Tg(r))},g6=(e,n,o)=>{const r=QC(e,n);xo(o,(c,u)=>{const f=b=>{const v=f6(e,r,u,b.similar,JC(b)?b.vars:void 0),x=v.isSome();if(b.state.get()!==x){b.state.set(x);const D=v.getOr(n);JC(b)?b.callback(x,{node:D,format:u,parents:r}):me(b.callbacks,B=>B(x,{node:D,format:u,parents:r}))}};me([c.withSimilar,c.withoutSimilar],f),me(c.withVars,f)})},Pz=(e,n,o,r,c,u)=>{const f=n.get();me(o.split(","),b=>{const v=Ss(f,b).getOrThunk(()=>{const D={withSimilar:{state:gn(!1),similar:!0,callbacks:[]},withoutSimilar:{state:gn(!1),similar:!1,callbacks:[]},withVars:[]};return f[b]=D,D}),x=()=>{const D=QC(e);return f6(e,D,b,c,u).isSome()};if(Kn(u)){const D=c?v.withSimilar:v.withoutSimilar;D.callbacks.push(r),D.callbacks.length===1&&D.state.set(x())}else v.withVars.push({state:gn(x()),similar:c,vars:u,callback:r})}),n.set(f)},$z=(e,n,o)=>{const r=e.get();me(n.split(","),c=>Ss(r,c).each(u=>{r[c]={withSimilar:{...u.withSimilar,callbacks:tt(u.withSimilar.callbacks,f=>f!==o)},withoutSimilar:{...u.withoutSimilar,callbacks:tt(u.withoutSimilar.callbacks,f=>f!==o)},withVars:tt(u.withVars,f=>f.callback!==o)}})),e.set(r)},Iz=(e,n,o,r,c,u)=>(Pz(e,n,o,r,c,u),{unbind:()=>$z(n,o,r)}),Lz=(e,n,o,r)=>{const c=e.formatter.get(n);c&&(n3(e,n,o,r)&&(!("toggle"in c[0])||c[0].toggle)?rF(e,n,o,r):d6(e,n,o,r))},J3=(e,n,o)=>({element:e,width:n,rows:o}),h6=(e,n)=>({element:e,cells:n}),Hz=(e,n)=>({x:e,y:n}),p6=(e,n)=>Xi(e,n).bind(Qu).getOr(1),zz=(e,n,o,r,c)=>{const u=p6(c,"rowspan"),f=p6(c,"colspan"),b=e.rows;for(let v=o;v<o+u;v++){b[v]||(b[v]=h6(Tu(r),[]));for(let x=n;x<n+f;x++){const D=b[v].cells;D[x]=v===o&&x===n?c:ta(c)}}},Vz=(e,n,o)=>{const r=e.rows;return!!(r[o]?r[o].cells:[])[n]},oJ=(e,n,o)=>{for(;Vz(e,n,o);)n++;return n},Dd=e=>st(e,(n,o)=>o.cells.length>n?o.cells.length:n,0),Q3=(e,n)=>{const o=e.rows;for(let r=0;r<o.length;r++){const c=o[r].cells;for(let u=0;u<c.length;u++)if(Yo(c[u],n))return P.some(Hz(u,r))}return P.none()},b6=(e,n,o,r,c)=>{const u=[],f=e.rows;for(let b=o;b<=c;b++){const v=f[b].cells,x=n<r?v.slice(n,r+1):v.slice(r,n+1);u.push(h6(f[b].element,x))}return u},v6=(e,n,o)=>{const r=n.x,c=n.y,u=o.x,f=o.y,b=c<f?b6(e,r,c,u,f):b6(e,r,f,u,c);return J3(e.element,Dd(b),b)},Uz=(e,n)=>{const o=ta(e.element),r=re.fromTag("tbody");return Yi(r,n),ds(o,r),o},Wz=e=>Oe(e.rows,n=>{const o=Oe(n.cells,c=>{const u=Tu(c);return Qr(u,"colspan"),Qr(u,"rowspan"),u}),r=ta(n.element);return Yi(r,o),r}),sJ=e=>{const n=J3(ta(e),0,[]);return me(ot(e,"tr"),(o,r)=>{me(ot(o,"td,th"),(c,u)=>{zz(n,oJ(n,u,r),r,o,c)})}),J3(n.element,Dd(n.rows),n.rows)},xi=e=>Uz(e,Wz(e)),Zz=(e,n,o)=>Q3(e,n).bind(r=>Q3(e,o).map(c=>v6(e,r,c))),eD=e=>rn(e,n=>Oo(n)==="ul"||Oo(n)==="ol"),y6=(e,n)=>rn(e,o=>Oo(o)==="li"&&pC(o,n)).fold(bt([]),o=>eD(e).map(r=>{const c=re.fromTag(Oo(r)),u=Fc(Ef(r),(f,b)=>jn(b,"list-style"));return ui(c,u),[re.fromTag("li"),c]}).getOr([])),hT=(e,n)=>{const o=st(n,(r,c)=>(ds(c,r),c),e);return n.length>0?qd([o]):o},jz=e=>nm(e)?Hc(e).filter(Vb).fold(bt([]),n=>[e,n]):Vb(e)?[e]:[],qz=(e,n,o)=>{const r=re.fromDom(n.commonAncestorContainer),c=Xt(r,e),u=tt(c,v=>o.isWrapper(Oo(v))),f=y6(c,n),b=u.concat(f.length?f:jz(r));return Oe(b,ta)},C6=()=>qd([]),Gz=(e,n,o)=>hT(re.fromDom(n.cloneContents()),qz(e,n,o)),Kz=(e,n)=>Wr(n,"table",Te(Yo,e)),w6=(e,n)=>Kz(e,n[0]).bind(o=>{const r=n[0],c=n[n.length-1],u=sJ(o);return Zz(u,r,c).map(f=>qd([xi(f)]))}).getOrThunk(C6),Yz=(e,n,o)=>n.length>0&&n[0].collapsed?C6():Gz(e,n[0],o),S6=(e,n,o)=>{const r=Fv(n,e);return r.length>0?w6(e,r):Yz(e,n,o)},ew=(e,n)=>n>=0&&n<e.length&&ah(e.charAt(n)),x6=e=>Bi(e.innerText),Xz=e=>e.map(n=>n.nodeName).getOr("div").toLowerCase(),Jz=e=>P.from(e.selection.getRng()).map(n=>{var o;const r=P.from(e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock)),c=e.getBody(),u=Xz(r),f=re.fromDom(n.cloneContents());wk(f),Sk(f);const b=e.dom.add(c,u,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},f.dom),v=x6(b),x=Bi((o=b.textContent)!==null&&o!==void 0?o:"");if(e.dom.remove(b),ew(x,0)||ew(x,x.length-1)){const D=r.getOr(c),B=x6(D),N=B.indexOf(v);if(N===-1)return v;{const H=ew(B,N-1),te=ew(B,N+v.length);return(H?" ":"")+v+(te?" ":"")}}else return v}).getOr(""),Qz=(e,n)=>{const o=e.selection.getRng(),r=e.dom.create("body"),c=e.selection.getSel(),u=vk(e,fC(c)),f=n.contextual?S6(re.fromDom(e.getBody()),u,e.schema).dom:o.cloneContents();return f&&r.appendChild(f),e.selection.serializer.serialize(r,n)},eV=(e,n)=>{if(n.format==="text")return Jz(e);{const o=Qz(e,n);return n.format==="tree"?o:e.selection.isCollapsed()?"":o}},pT=(e,n)=>({...e,format:n,get:!0,selection:!0,getInner:!0}),E6=(e,n,o={})=>{const r=pT(o,n);return L3(e,r).fold(Uo,c=>{const u=eV(e,c);return iT(e,u,c)})},bT=0,T6=1,tD=2,tV=(e,n)=>{const o=e.length+n.length+2,r=new Array(o),c=new Array(o),u=(D,B,N)=>({start:D,end:B,diag:N}),f=(D,B,N,H,te)=>{const Q=v(D,B,N,H);if(Q===null||Q.start===B&&Q.diag===B-H||Q.end===D&&Q.diag===D-N){let Y=D,Ae=N;for(;Y<B||Ae<H;)Y<B&&Ae<H&&e[Y]===n[Ae]?(te.push([bT,e[Y]]),++Y,++Ae):B-D>H-N?(te.push([tD,e[Y]]),++Y):(te.push([T6,n[Ae]]),++Ae)}else{f(D,Q.start,N,Q.start-Q.diag,te);for(let Y=Q.start;Y<Q.end;++Y)te.push([bT,e[Y]]);f(Q.end,B,Q.end-Q.diag,H,te)}},b=(D,B,N,H)=>{let te=D;for(;te-B<H&&te<N&&e[te]===n[te-B];)++te;return u(D,te,B)},v=(D,B,N,H)=>{const te=B-D,Q=H-N;if(te===0||Q===0)return null;const Y=te-Q,Ae=Q+te,_e=(Ae%2===0?Ae:Ae+1)/2;r[1+_e]=D,c[1+_e]=B+1;let Pe,Ze,ht,Vt,Ot;for(Pe=0;Pe<=_e;++Pe){for(Ze=-Pe;Ze<=Pe;Ze+=2){for(ht=Ze+_e,Ze===-Pe||Ze!==Pe&&r[ht-1]<r[ht+1]?r[ht]=r[ht+1]:r[ht]=r[ht-1]+1,Vt=r[ht],Ot=Vt-D+N-Ze;Vt<B&&Ot<H&&e[Vt]===n[Ot];)r[ht]=++Vt,++Ot;if(Y%2!==0&&Y-Pe<=Ze&&Ze<=Y+Pe&&c[ht-Y]<=r[ht])return b(c[ht-Y],Ze+D-N,B,H)}for(Ze=Y-Pe;Ze<=Y+Pe;Ze+=2){for(ht=Ze+_e-Y,Ze===Y-Pe||Ze!==Y+Pe&&c[ht+1]<=c[ht-1]?c[ht]=c[ht+1]-1:c[ht]=c[ht-1],Vt=c[ht]-1,Ot=Vt-D+N-Ze;Vt>=D&&Ot>=N&&e[Vt]===n[Ot];)c[ht]=Vt--,Ot--;if(Y%2===0&&-Pe<=Ze&&Ze<=Pe&&c[ht]<=r[ht+Y])return b(c[ht],Ze+D-N,B,H)}}return null},x=[];return f(0,e.length,0,n.length,x),x},A6=e=>Cn(e)?e.outerHTML:kt(e)?Og.encodeRaw(e.data,!1):$r(e)?"<!--"+e.data+"-->":"",nV=e=>{let n;const o=document.createElement("div"),r=document.createDocumentFragment();for(e&&(o.innerHTML=e);n=o.firstChild;)r.appendChild(n);return r},nD=(e,n,o)=>{const r=nV(n);if(e.hasChildNodes()&&o<e.childNodes.length){const c=e.childNodes[o];e.insertBefore(r,c)}else e.appendChild(r)},oD=(e,n)=>{if(e.hasChildNodes()&&n<e.childNodes.length){const o=e.childNodes[n];e.removeChild(o)}},oV=(e,n)=>{let o=0;me(e,r=>{r[0]===bT?o++:r[0]===T6?(nD(n,r[1],o),o++):r[0]===tD&&oD(n,o)})},sD=(e,n)=>tt(Oe(So(e.childNodes),k(Bi,A6)),o=>o.length>0),sV=(e,n)=>{const o=Oe(So(n.childNodes),A6);return oV(tV(o,e),n),n},rV=Ba(()=>document.implementation.createHTMLDocument("undo")),aV=e=>e.querySelector("iframe")!==null,cV=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),iV=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),vT=e=>{const n=e.serializer.getTempAttrs(),o=$M(e.getBody(),n);return aV(o)?cV(sD(o)):iV(Bi(o.innerHTML))},yT=(e,n,o)=>{const r=o?n.beforeBookmark:n.bookmark;n.type==="fragmented"?sV(n.fragments,e.getBody()):e.setContent(n.content,{format:"raw",no_selection:Fe(r)&&Dv(r)?!r.isFakeCaret:!0}),r&&(e.selection.moveToBookmark(r),e.selection.scrollIntoView())},rD=e=>e.type==="fragmented"?e.fragments.join(""):e.content,_6=e=>{const n=re.fromTag("body",rV());return ad(n,rD(e)),me(ot(n,"*[data-mce-bogus]"),li),Ya(n)},lV=(e,n)=>rD(e)===rD(n),uV=(e,n)=>_6(e)===_6(n),aD=(e,n)=>!e||!n?!1:lV(e,n)?!0:uV(e,n),cD=e=>e.get()===0,CT=(e,n,o)=>{cD(o)&&(e.typing=n)},O0=(e,n)=>{e.typing&&(CT(e,!1,n),e.add())},wT=e=>{e.typing&&(e.typing=!1,e.add())},k6=(e,n,o)=>{cD(n)&&o.set(W1(e.selection))},D6=(e,n,o,r,c,u,f)=>{const b=vT(e),v=Mt.extend(u||{},b);if(!cD(r)||e.removed)return null;const x=n.data[o.get()];if(e.dispatch("BeforeAddUndo",{level:v,lastLevel:x,originalEvent:f}).isDefaultPrevented()||x&&aD(x,v))return null;n.data[o.get()]&&c.get().each(N=>{n.data[o.get()].beforeBookmark=N});const D=$x(e);if(D&&n.data.length>D){for(let N=0;N<n.data.length-1;N++)n.data[N]=n.data[N+1];n.data.length--,o.set(n.data.length)}v.bookmark=W1(e.selection),o.get()<n.data.length-1&&(n.data.length=o.get()+1),n.data.push(v),o.set(n.data.length-1);const B={level:v,lastLevel:x,originalEvent:f};return o.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",B),e.dispatch("change",B)):e.dispatch("AddUndo",B),v},dV=(e,n,o)=>{n.data=[],o.set(0),n.typing=!1,e.dispatch("ClearUndos")},mV=(e,n,o,r,c)=>{if(n.transact(r)){const u=n.data[o.get()].bookmark,f=n.data[o.get()-1];yT(e,f,!0),n.transact(c)&&(n.data[o.get()-1].beforeBookmark=u)}},iD=(e,n,o)=>{let r;return n.get()<o.length-1&&(n.set(n.get()+1),r=o[n.get()],yT(e,r,!1),e.setDirty(!0),e.dispatch("Redo",{level:r})),r},fV=(e,n,o,r)=>{let c;return n.typing&&(n.add(),n.typing=!1,CT(n,!1,o)),r.get()>0&&(r.set(r.get()-1),c=n.data[r.get()],yT(e,c,!0),e.setDirty(!0),e.dispatch("Undo",{level:c})),c},gV=e=>{e.clear(),e.add()},hV=(e,n,o)=>o.get()>0||n.typing&&n.data[0]&&!aD(vT(e),n.data[0]),pV=(e,n)=>n.get()<e.data.length-1&&!e.typing,bV=(e,n,o)=>(O0(e,n),e.beforeChange(),e.ignore(o),e.add()),ST=(e,n)=>{try{e.set(e.get()+1),n()}finally{e.set(e.get()-1)}},tw=(e,n)=>{const o=e.dom,r=Fe(n)?n:e.getBody();me(o.select("table,a",r),c=>{switch(c.nodeName){case"TABLE":const u=o0(e),f=o.getAttrib(c,"border");(!f||f==="0")&&e.hasVisual?o.addClass(c,u):o.removeClass(c,u);break;case"A":if(!o.getAttrib(c,"href")){const b=o.getAttrib(c,"name")||c.id,v=q2(e);b&&e.hasVisual?o.addClass(c,v):o.removeClass(c,v)}break}}),e.dispatch("VisualAid",{element:n,hasVisual:e.hasVisual})},O6=e=>({init:{bindEvents:Ct},undoManager:{beforeChange:(n,o)=>k6(e,n,o),add:(n,o,r,c,u,f)=>D6(e,n,o,r,c,u,f),undo:(n,o,r)=>fV(e,n,o,r),redo:(n,o)=>iD(e,n,o),clear:(n,o)=>dV(e,n,o),reset:n=>gV(n),hasUndo:(n,o)=>hV(e,n,o),hasRedo:(n,o)=>pV(n,o),transact:(n,o,r)=>bV(n,o,r),ignore:(n,o)=>ST(n,o),extra:(n,o,r,c)=>mV(e,n,o,r,c)},formatter:{match:(n,o,r,c)=>n3(e,n,o,r,c),matchAll:(n,o)=>U9(e,n,o),matchNode:(n,o,r,c)=>Cm(e,n,o,r,c),canApply:n=>o3(e,n),closest:n=>W9(e,n),apply:(n,o,r)=>d6(e,n,o,r),remove:(n,o,r,c)=>rF(e,n,o,r,c),toggle:(n,o,r)=>Lz(e,n,o,r),formatChanged:(n,o,r,c,u)=>Iz(e,n,o,r,c,u)},editor:{getContent:n=>NX(e,n),setContent:(n,o)=>_z(e,n,o),insertContent:(n,o)=>Tz(e,n,o),addVisual:n=>tw(e,n)},selection:{getContent:(n,o)=>E6(e,n,o)},autocompleter:{addDecoration:Ct,removeDecoration:Ct},raw:{getModel:()=>P.none()}}),Yv=e=>{const n=x=>en(x)?x:{},{init:o,undoManager:r,formatter:c,editor:u,selection:f,autocompleter:b,raw:v}=e;return{init:{bindEvents:o.bindEvents},undoManager:{beforeChange:r.beforeChange,add:r.add,undo:r.undo,redo:r.redo,clear:r.clear,reset:r.reset,hasUndo:r.hasUndo,hasRedo:r.hasRedo,transact:(x,D,B)=>r.transact(B),ignore:(x,D)=>r.ignore(D),extra:(x,D,B,N)=>r.extra(B,N)},formatter:{match:(x,D,B,N)=>c.match(x,n(D),N),matchAll:c.matchAll,matchNode:c.matchNode,canApply:x=>c.canApply(x),closest:x=>c.closest(x),apply:(x,D,B)=>c.apply(x,n(D)),remove:(x,D,B,N)=>c.remove(x,n(D)),toggle:(x,D,B)=>c.toggle(x,n(D)),formatChanged:(x,D,B,N,H)=>c.formatChanged(D,B,N,H)},editor:{getContent:x=>u.getContent(x),setContent:(x,D)=>({content:u.setContent(x,D),html:""}),insertContent:(x,D)=>(u.insertContent(x),""),addVisual:u.addVisual},selection:{getContent:(x,D)=>f.getContent(D)},autocompleter:{addDecoration:b.addDecoration,removeDecoration:b.removeDecoration},raw:{getModel:()=>P.some(v.getRawModel())}}},Wu=()=>{const e=bt(null),n=bt("");return{init:{bindEvents:Ct},undoManager:{beforeChange:Ct,add:e,undo:e,redo:e,clear:Ct,reset:Ct,hasUndo:Ne,hasRedo:Ne,transact:e,ignore:Ct,extra:Ct},formatter:{match:Ne,matchAll:bt([]),matchNode:bt(void 0),canApply:Ne,closest:n,apply:Ct,remove:Ct,toggle:Ct,formatChanged:bt({unbind:Ct})},editor:{getContent:n,setContent:bt({content:"",html:""}),insertContent:bt(""),addVisual:Ct},selection:{getContent:n},autocompleter:{addDecoration:Ct,removeDecoration:Ct},raw:{getModel:bt(P.none())}}},Zu=e=>to(e.plugins,"rtc"),js=e=>Ss(e.plugins,"rtc").bind(n=>P.from(n.setup)),nw=e=>{const n=e;return js(e).fold(()=>(n.rtcInstance=O6(e),P.none()),o=>(n.rtcInstance=Wu(),P.some(()=>o().then(r=>(n.rtcInstance=Yv(r),r.rtc.isRemote)))))},xT=e=>e.rtcInstance?e.rtcInstance:O6(e),Va=e=>{const n=e.rtcInstance;if(n)return n;throw new Error("Failed to get RTC instance not yet initialized.")},ET=(e,n,o)=>{Va(e).undoManager.beforeChange(n,o)},lD=(e,n,o,r,c,u,f)=>Va(e).undoManager.add(n,o,r,c,u,f),uD=(e,n,o,r)=>Va(e).undoManager.undo(n,o,r),dD=(e,n,o)=>Va(e).undoManager.redo(n,o),mD=(e,n,o)=>{Va(e).undoManager.clear(n,o)},TT=(e,n)=>{Va(e).undoManager.reset(n)},fD=(e,n,o)=>Va(e).undoManager.hasUndo(n,o),R6=(e,n,o)=>Va(e).undoManager.hasRedo(n,o),M6=(e,n,o,r)=>Va(e).undoManager.transact(n,o,r),B6=(e,n,o)=>{Va(e).undoManager.ignore(n,o)},F6=(e,n,o,r,c)=>{Va(e).undoManager.extra(n,o,r,c)},N6=(e,n,o,r,c)=>Va(e).formatter.match(n,o,r,c),R0=(e,n,o)=>Va(e).formatter.matchAll(n,o),P6=(e,n,o,r,c)=>Va(e).formatter.matchNode(n,o,r,c),gD=(e,n)=>Va(e).formatter.canApply(n),vV=(e,n)=>Va(e).formatter.closest(n),yV=(e,n,o,r)=>{Va(e).formatter.apply(n,o,r)},$6=(e,n,o,r,c)=>{Va(e).formatter.remove(n,o,r,c)},I6=(e,n,o,r)=>{Va(e).formatter.toggle(n,o,r)},L6=(e,n,o,r,c,u)=>Va(e).formatter.formatChanged(n,o,r,c,u),AT=(e,n)=>xT(e).editor.getContent(n),H6=(e,n,o)=>xT(e).editor.setContent(n,o),z6=(e,n,o)=>xT(e).editor.insertContent(n,o),V6=(e,n,o)=>Va(e).selection.getContent(n,o),U6=(e,n)=>Va(e).editor.addVisual(n),hD=e=>Va(e).init.bindEvents(),W6=(e,n={})=>{const o=n.format?n.format:"html";return V6(e,o,n)},pD=(e,n,o)=>{if(to(e,n)){const r=tt(e[n],c=>c!==o);r.length===0?delete e[n]:e[n]=r}};var Z6=(e,n)=>{let o,r;const c=(b,v)=>rn(v,x=>e.is(x,b)),u=b=>e.getParents(b,void 0,e.getRoot()),f=()=>{o={},r={},n.on("NodeChange",b=>{const v=b.element,x=u(v),D={};xo(o,(B,N)=>{c(N,x).each(H=>{r[N]||(me(B,te=>{te(!0,{node:H,selector:N,parents:x})}),r[N]=B),D[N]=B})}),xo(r,(B,N)=>{D[N]||(delete r[N],me(B,H=>{H(!1,{node:v,selector:N,parents:x})}))})})};return{selectorChangedWithUnbind:(b,v)=>(o||f(),o[b]||(o[b]=[]),o[b].push(v),c(b,u(n.selection.getStart())).each(()=>{r[b]=o[b]}),{unbind:()=>{pD(o,b,v),pD(r,b,v)}})}};const bD=e=>!!(e&&e.ownerDocument)&&Lc(re.fromDom(e.ownerDocument),re.fromDom(e)),j6=e=>e?bD(e.startContainer)&&bD(e.endContainer):!1,_T=(e,n,o,r)=>{let c,u;const{selectorChangedWithUnbind:f}=Z6(e,r),b=($t,On)=>{const hs=e.createRng();Fe($t)&&Fe(On)?(hs.setStart($t,On),hs.setEnd($t,On),Ze(hs),Ae(!1)):(Pv(e,hs,r.getBody(),!0),Ze(hs))},v=$t=>W6(r,$t),x=($t,On)=>U3(r,$t,On),D=$t=>ME(r.getBody(),Pe(),$t),B=$t=>bk(r.getBody(),Pe(),$t),N=($t,On)=>Dr.getBookmark($t,On),H=$t=>Dr.moveToBookmark($t),te=($t,On)=>(OX(e,$t,On).each(Ze),$t),Q=()=>{const $t=Pe(),On=_e();return!$t||$t.item?!1:$t.compareEndPoints?$t.compareEndPoints("StartToEnd",$t)===0:!On||$t.collapsed},Y=()=>{if(r.mode.isReadOnly())return!1;const $t=Pe(),On=r.getBody().querySelectorAll('[data-mce-selected="1"]');return On.length>0?zs(On,hs=>e.isEditable(hs.parentElement)):MM(e,$t)},Ae=$t=>{const On=Pe();On.collapse(!!$t),Ze(On)},_e=()=>n.getSelection?n.getSelection():n.document.selection,Pe=()=>{let $t;const On=(Ps,An,Ht)=>{try{return An.compareBoundaryPoints(Ps,Ht)}catch{return-1}},hs=n.document;if(Fe(r.bookmark)&&!y0(r)){const Ps=nk(r);if(Ps.isSome())return Ps.map(An=>vk(r,[An])[0]).getOr(hs.createRange())}try{const Ps=_e();Ps&&!Yy(Ps.anchorNode)&&(Ps.rangeCount>0?$t=Ps.getRangeAt(0):$t=hs.createRange(),$t=vk(r,[$t])[0])}catch{}if($t||($t=hs.createRange()),Io($t.startContainer)&&$t.collapsed){const Ps=e.getRoot();$t.setStart(Ps,0),$t.setEnd(Ps,0)}return c&&u&&(On($t.START_TO_START,$t,c)===0&&On($t.END_TO_END,$t,c)===0?$t=u:(c=null,u=null)),$t},Ze=($t,On)=>{if(!j6($t))return;const hs=_e();if($t=r.dispatch("SetSelectionRange",{range:$t,forward:On}).range,hs){u=$t;try{hs.removeAllRanges(),hs.addRange($t)}catch{}On===!1&&hs.extend&&(hs.collapse($t.endContainer,$t.endOffset),hs.extend($t.startContainer,$t.startOffset)),c=hs.rangeCount>0?hs.getRangeAt(0):null}if(!$t.collapsed&&$t.startContainer===$t.endContainer&&(hs!=null&&hs.setBaseAndExtent)&&$t.endOffset-$t.startOffset<2&&$t.startContainer.hasChildNodes()){const An=$t.startContainer.childNodes[$t.startOffset];An&&An.nodeName==="IMG"&&(hs.setBaseAndExtent($t.startContainer,$t.startOffset,$t.endContainer,$t.endOffset),(hs.anchorNode!==$t.startContainer||hs.focusNode!==$t.endContainer)&&hs.setBaseAndExtent(An,0,An,1))}r.dispatch("AfterSetSelectionRange",{range:$t,forward:On})},ht=$t=>(dT(r,e.getOuterHTML($t)),$t),Vt=()=>WL(r.getBody(),Pe()),Ot=($t,On)=>DX(e,Pe(),$t,On),lt=()=>{const $t=_e(),On=$t==null?void 0:$t.anchorNode,hs=$t==null?void 0:$t.focusNode;if(!$t||!On||!hs||Yy(On)||Yy(hs))return!0;const Ps=e.createRng(),An=e.createRng();try{Ps.setStart(On,$t.anchorOffset),Ps.collapse(!0),An.setStart(hs,$t.focusOffset),An.collapse(!0)}catch{return!0}return Ps.compareBoundaryPoints(Ps.START_TO_START,An)<=0},kr={dom:e,win:n,serializer:o,editor:r,expand:($t={type:"word"})=>Ze(sf(e).expand(Pe(),$t)),collapse:Ae,setCursorLocation:b,getContent:v,setContent:x,getBookmark:N,moveToBookmark:H,select:te,isCollapsed:Q,isEditable:Y,isForward:lt,setNode:ht,getNode:Vt,getSel:_e,setRng:Ze,getRng:Pe,getStart:D,getEnd:B,getSelectedBlocks:Ot,normalize:()=>{const $t=Pe(),On=_e();if(!q4(On)&&f0(r)){const hs=nc(e,$t);return hs.each(Ps=>{Ze(Ps,lt())}),hs.getOr($t)}return $t},selectorChanged:($t,On)=>(f($t,On),kr),selectorChangedWithUnbind:f,getScrollContainer:()=>{let $t,On=e.getRoot();for(;On&&On.nodeName!=="BODY";){if(On.scrollHeight>On.clientHeight){$t=On;break}On=On.parentNode}return $t},scrollIntoView:($t,On)=>{Fe($t)?UL(r,$t,On):AC(r,Pe(),On)},placeCaretAt:($t,On)=>Ze(TM($t,On,r.getDoc())),getBoundingClientRect:()=>{const $t=Pe();return $t.collapsed?nt.fromRangeStart($t).getClientRects()[0]:$t.getBoundingClientRect()},destroy:()=>{n=c=u=null,Oc.destroy()}},Dr=bm(kr),Oc=EM(kr,r);return kr.bookmarkManager=Dr,kr.controlSelection=Oc,kr},q6=(e,n,o)=>{n.addNodeFilter("br",(r,c,u)=>{const f=Mt.extend({},o.getBlockElements()),b=o.getNonEmptyElements(),v=o.getWhitespaceElements();f.body=1;const x=D=>D.name in f||E1(o,D);for(let D=0,B=r.length;D<B;D++){let N=r[D],H=N.parent;if(H&&x(H)&&N===H.lastChild){let te=N.prev;for(;te;){const Q=te.name;if(Q!=="span"||te.attr("data-mce-type")!=="bookmark"){Q==="br"&&(N=null);break}te=te.prev}if(N&&(N.remove(),IC(o,b,v,H))){const Q=o.getElementRule(H.name);Q&&(Q.removeEmpty?H.remove():Q.paddEmpty&&y3(e,u,x,H))}}else{let te=N;for(;H&&H.firstChild===te&&H.lastChild===te&&(te=H,!f[H.name]);)H=H.parent;if(te===H){const Q=new Ii("#text",3);Q.value=ir,N.replace(Q)}}}})},G6=(e,n,o)=>{e.addAttributeFilter("data-mce-tabindex",(r,c)=>{let u=r.length;for(;u--;){const f=r[u];f.attr("tabindex",f.attr("data-mce-tabindex")),f.attr(c,null)}}),e.addAttributeFilter("src,href,style",(r,c)=>{const u="data-mce-"+c,f=n.url_converter,b=n.url_converter_scope;let v=r.length;for(;v--;){const x=r[v];let D=x.attr(u);D!==void 0?(x.attr(c,D.length>0?D:null),x.attr(u,null)):(D=x.attr(c),c==="style"?D=o.serializeStyle(o.parseStyle(D),x.name):f&&(D=f.call(b,D,c,x.name)),x.attr(c,D.length>0?D:null))}}),e.addAttributeFilter("class",r=>{let c=r.length;for(;c--;){const u=r[c];let f=u.attr("class");f&&(f=f.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),u.attr("class",f.length>0?f:null))}}),e.addAttributeFilter("data-mce-type",(r,c,u)=>{let f=r.length;for(;f--;){const b=r[f];b.attr("data-mce-type")==="bookmark"&&!u.cleanup&&(P.from(b.firstChild).exists(x=>{var D;return!Wb((D=x.value)!==null&&D!==void 0?D:"")})?b.unwrap():b.remove())}}),e.addNodeFilter("script,style",(r,c)=>{var u;const f=v=>v.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let b=r.length;for(;b--;){const v=r[b],x=v.firstChild,D=(u=x==null?void 0:x.value)!==null&&u!==void 0?u:"";if(c==="script"){const B=v.attr("type");B&&v.attr("type",B==="mce-no/type"?null:B.replace(/^mce\-/,"")),n.element_format==="xhtml"&&x&&D.length>0&&(x.value=`// <![CDATA[
`+f(D)+`
// ]]>`)}else n.element_format==="xhtml"&&x&&D.length>0&&(x.value=`<!--
`+f(D)+`
-->`)}}),e.addNodeFilter("#comment",r=>{let c=r.length;for(;c--;){const u=r[c],f=u.value;n.preserve_cdata&&(f==null?void 0:f.indexOf("[CDATA["))===0?(u.name="#cdata",u.type=4,u.value=o.decode(f.replace(/^\[CDATA\[|\]\]$/g,""))):(f==null?void 0:f.indexOf("mce:protected "))===0&&(u.name="#text",u.type=3,u.raw=!0,u.value=unescape(f).substr(14))}}),e.addNodeFilter("xml:namespace,input",(r,c)=>{let u=r.length;for(;u--;){const f=r[u];f.type===7?f.remove():f.type===1&&c==="input"&&!f.attr("type")&&f.attr("type","text")}}),e.addAttributeFilter("data-mce-type",r=>{me(r,c=>{c.attr("data-mce-type")==="format-caret"&&(c.isEmpty(e.schema.getNonEmptyElements())?c.remove():c.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(r,c)=>{let u=r.length;for(;u--;)r[u].attr(c,null)}),n.remove_trailing_brs&&q6(n,e,e.schema)},K6=e=>{const n=r=>(r==null?void 0:r.name)==="br",o=e.lastChild;if(n(o)){const r=o.prev;n(r)&&(o.remove(),r.remove())}},Y6=(e,n,o)=>{let r;const c=e.dom;let u=n.cloneNode(!0);const f=document.implementation;if(f.createHTMLDocument){const b=f.createHTMLDocument("");Mt.each(u.nodeName==="BODY"?u.childNodes:[u],v=>{b.body.appendChild(b.importNode(v,!0))}),u.nodeName!=="BODY"?u=b.body.firstChild:u=b.body,r=c.doc,c.doc=b}return Cd(e,{...o,node:u}),r&&(c.doc=r),u},X6=(e,n)=>Fe(e)&&e.hasEventListeners("PreProcess")&&!n.no_events,J6=(e,n,o)=>X6(e,o)?Y6(e,n,o):n,Q6=(e,n,o)=>{Mt.inArray(n,o)===-1&&(e.addAttributeFilter(o,(r,c)=>{let u=r.length;for(;u--;)r[u].attr(c,null)}),n.push(o))},vD=(e,n,o)=>!n.no_events&&e?Cx(e,{...n,content:o}).content:o,kT=(e,n,o)=>{const r=Bi(o.getInner?n.innerHTML:e.getOuterHTML(n));return o.selection||ol(re.fromDom(n))?r:Mt.trim(r)},eN=(e,n,o)=>{const r=o.selection?{forced_root_block:!1,...o}:o,c=e.parse(n,r);return K6(c),c},CV=(e,n,o)=>Ap(e,n).serialize(o),tN=(e,n,o,r,c)=>{const u=CV(n,o,r);return vD(e,c,u)},DT=(e,n)=>{const o=["data-mce-selected"],r={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},c=n&&n.dom?n.dom:Is.DOM,u=n&&n.schema?n.schema:Pu(r),f=hh(r,u);G6(f,r,c);const b=(v,x={})=>{const{indent:D,entity_encoding:B,...N}=x,H={format:"html",...N},te=J6(n,v,H),Q=kT(c,te,H),Y=eN(f,Q,H);if(H.format==="tree")return Y;const Ae={...r,...Fe(D)?{indent:D}:{},...Fe(B)?{entity_encoding:B}:{}};return tN(n,Ae,u,Y,H)};return{schema:u,addNodeFilter:f.addNodeFilter,addAttributeFilter:f.addAttributeFilter,serialize:b,addRules:u.addValidElements,setRules:u.setValidElements,addTempAttr:Te(Q6,f,o),getTempAttrs:bt(o),getNodeFilters:f.getNodeFilters,getAttributeFilters:f.getAttributeFilters,removeNodeFilter:f.removeNodeFilter,removeAttributeFilter:f.removeAttributeFilter}},OT=(e,n)=>{const o=DT(e,n);return{schema:o.schema,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:o.serialize,addRules:o.addRules,setRules:o.setRules,addTempAttr:o.addTempAttr,getTempAttrs:o.getTempAttrs,getNodeFilters:o.getNodeFilters,getAttributeFilters:o.getAttributeFilters,removeNodeFilter:o.removeNodeFilter,removeAttributeFilter:o.removeAttributeFilter}},ow="html",yD=(e,n)=>({...e,format:n,get:!0,getInner:!0}),nN=(e,n={})=>{const o=n.format?n.format:ow,r=yD(n,o);return L3(e,r).fold(Uo,c=>{const u=AT(e,c);return iT(e,u,c)})},Xv="html",CD=(e,n)=>({format:Xv,...e,set:!0,content:n}),sw=(e,n,o={})=>{const r=CD(o,n);KC(e,r).each(c=>{const u=H6(e,c.content,c);lT(e,u.html,c)})},bh=Is.DOM,Pp=e=>{bh.setStyle(e.id,"display",e.orgDisplay)},rw=e=>P.from(e).each(n=>n.destroy()),wV=e=>{const n=e;n.contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.bodyElement=n.contentDocument=n.contentWindow=null,n.iframeElement=n.targetElm=null;const o=e.selection;if(o){const r=o.dom;n.selection=o.win=o.dom=r.doc=null}},SV=e=>{const n=e.formElement;n&&(n._mceOldSubmit&&(n.submit=n._mceOldSubmit,delete n._mceOldSubmit),bh.unbind(n,"submit reset",e.formEventDelegate))},oN=e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:o}=e,r=e.getBody(),c=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&Fe(c==null?void 0:c.nextSibling)&&bh.remove(c.nextSibling),Km(e),e.editorManager.remove(e),!e.inline&&r&&Pp(e),zu(e),bh.remove(e.getContainer()),rw(n),rw(o),e.destroy()}},sN=(e,n)=>{const{selection:o,dom:r}=e;if(!e.destroyed){if(!n&&!e.removed){e.remove();return}n||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),rw(o),rw(r)),SV(e),wV(e),e.destroyed=!0}},RT=(()=>{const e={};return{add:(c,u)=>{e[c]=u},get:c=>e[c]?e[c]:{icons:{}},has:c=>to(e,c)}})(),Od=_c.ModelManager,$p=(e,n)=>n.dom[e],wD=(e,n)=>parseInt(Pr(n,e),10),rN=Te($p,"clientWidth"),EV=Te($p,"clientHeight"),TV=Te(wD,"margin-top"),AV=Te(wD,"margin-left"),iu=e=>e.dom.getBoundingClientRect(),Em=(e,n,o)=>{const r=rN(e),c=EV(e);return n>=0&&o>=0&&n<=r&&o<=c},aN=(e,n,o,r)=>{const c=iu(n),u=e?c.left+n.dom.clientLeft+AV(n):0,f=e?c.top+n.dom.clientTop+TV(n):0,b=o-u,v=r-f;return{x:b,y:v}},SD=(e,n,o)=>{const r=re.fromDom(e.getBody()),c=e.inline?r:oa(r),u=aN(e.inline,c,n,o);return Em(c,u.x,u.y)},xD=e=>P.from(e).map(re.fromDom),MT=e=>{const n=e.inline?e.getBody():e.getContentAreaContainer();return xD(n).map(Ms).getOr(!1)};var _V=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const ED=e=>{const n=[],o=()=>{const N=e.theme;return N&&N.getNotificationManagerImpl?N.getNotificationManagerImpl():_V()},r=()=>P.from(n[0]),c=(N,H)=>N.type===H.type&&N.text===H.text&&!N.progressBar&&!N.timeout&&!H.progressBar&&!H.timeout,u=()=>{r().each(N=>{N.reposition()})},f=N=>{n.push(N)},b=N=>{To(n,H=>H===N).each(H=>{n.splice(H,1)})},v=(N,H=!0)=>e.removed||!MT(e)?{}:(H&&e.dispatch("BeforeOpenNotification",{notification:N}),rn(n,te=>c(o().getArgs(te),N)).getOrThunk(()=>{e.editorManager.setActive(e);const te=o().open(N,()=>{b(te)},()=>ak(e));return f(te),u(),e.dispatch("OpenNotification",{notification:{...te}}),te})),x=()=>{r().each(N=>{o().close(N),b(N),u()})},D=bt(n);return(N=>{N.on("SkinLoaded",()=>{const H=Z2(N);H&&v({text:H,type:"warning",timeout:0},!1),u()}),N.on("show ResizeEditor ResizeWindow NodeChange ToggleView FullscreenStateChanged",()=>{requestAnimationFrame(u)}),N.on("remove",()=>{me(n.slice(),H=>{o().close(H)})}),N.on("keydown",H=>{var te;const Q=((te=H.key)===null||te===void 0?void 0:te.toLowerCase())==="f12"||H.keyCode===123;H.altKey&&Q&&(H.preventDefault(),r().map(Y=>re.fromDom(Y.getEl())).each(Y=>vg(Y)))})})(e),{open:v,close:x,getNotifications:D}},eg=_c.PluginManager,M0=_c.ThemeManager;var BT=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const FT=e=>{let n=[];const o=()=>{const Y=e.theme;return Y&&Y.getWindowManagerImpl?Y.getWindowManagerImpl():BT()},r=(Y,Ae)=>(..._e)=>Ae?Ae.apply(Y,_e):void 0,c=Y=>{e.dispatch("OpenWindow",{dialog:Y})},u=Y=>{e.dispatch("CloseWindow",{dialog:Y})},f=(Y,Ae)=>{n.push({instanceApi:Y,triggerElement:Ae}),c(Y)},b=Y=>{u(Y);const Ae=ks(n,({instanceApi:_e,triggerElement:Pe})=>_e===Y?Pe:P.none());n=tt(n,({instanceApi:_e})=>_e!==Y),n.length===0?e.focus():Ae.filter(Ms).each(vg)},v=()=>P.from(n[n.length-1]),x=Y=>{e.editorManager.setActive(e),xC(e);const Ae=bl();e.ui.show();const _e=Y();return f(_e,Ae),_e},D=(Y,Ae)=>x(()=>o().open(Y,Ae,b)),B=Y=>x(()=>o().openUrl(Y,b)),N=Y=>{n.length!==0&&Y.each(Ae=>vg(Ae))},H=(Y,Ae,_e)=>{const Pe=bl(),Ze=o();Ze.alert(Y,r(_e||Ze,()=>{N(Pe),Ae==null||Ae()}))},te=(Y,Ae,_e)=>{const Pe=bl(),Ze=o();Ze.confirm(Y,r(_e||Ze,ht=>{N(Pe),Ae==null||Ae(ht)}))},Q=()=>{v().each(({instanceApi:Y})=>{o().close(Y),b(Y)})};return e.on("remove",()=>{me(n,({instanceApi:Y})=>{o().close(Y)})}),{open:D,openUrl:B,alert:H,confirm:te,close:Q}},TD=(e,n)=>{e.notificationManager.open({type:"error",text:n})},Ip=(e,n)=>{e._skinLoaded?TD(e,n):e.on("SkinLoaded",()=>{TD(e,n)})},kV=(e,n)=>{Ip(e,Iu.translate(["Failed to upload image: {0}",n]))},Jv=(e,n,o)=>{P2(e,n,{message:o}),console.error(o)},Ol=(e,n,o)=>o?`Failed to load ${e}: ${o} from url ${n}`:`Failed to load ${e} url: ${n}`,lu=(e,n,o)=>{Jv(e,"PluginLoadError",Ol("plugin",n,o))},aw=(e,n,o)=>{Jv(e,"IconsLoadError",Ol("icons",n,o))},uu=(e,n,o)=>{Jv(e,"LanguageLoadError",Ol("language",n,o))},DV=(e,n,o)=>{Jv(e,"ThemeLoadError",Ol("theme",n,o))},sr=(e,n,o)=>{Jv(e,"ModelLoadError",Ol("model",n,o))},OV=(e,n)=>{Jv(e,"LicenseKeyManagerLoadError",Ol("license key manager",n))},vh=(e,n,o)=>{const r=Iu.translate(["Failed to initialize plugin: {0}",n]);P2(e,"PluginLoadError",{message:r}),Lp(r,o),Ip(e,r)},Lp=(e,...n)=>{const o=window.console;o&&(o.error?o.error(e,...n):o.log(e,...n))},AD=new WeakMap,_D=e=>{if(AD.has(e))return;AD.set(e,!0);const n=()=>{e.on("SwitchMode",r=>{const{mode:c}=r;c!=="readonly"&&e.mode.set("readonly")})},o=()=>{e.on("DisabledStateChange",r=>{const{state:c}=r;c||r.preventDefault()},!0)};e.initialized?(e.removed||e.mode.set("readonly"),e.options.set("disabled",!0)):e.on("init",()=>{e.removed||e.mode.set("readonly"),e.options.set("disabled",!0)}),o(),n()},NT=(e,n)=>{const{type:o,message:r}=n;e.notificationManager.open({type:o,text:r})},RV=e=>{switch(e){case"error":return console.error;case"info":return console.info;case"warn":return console.warn;case"log":default:return console.log}},kD=e=>{RV(e.type)(e.message)},DD=(e,n)=>{const{console:o,editor:r}=n;Fe(r)&&(e._skinLoaded?NT(e,r):e.on("SkinLoaded",()=>{NT(e,r)})),Fe(o)&&kD(o)},PT="Read more: https://www.tiny.cloud/docs/tinymce/latest/license-key/",OD="Make sure to provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms.",cN=e=>{const n="The editor is disabled because a TinyMCE license key has not been provided.";DD(e,{console:{type:"error",message:[`${n}`,OD,PT].join(" ")},editor:{type:"warning",message:`${n}`}})},$T=(e,n)=>{const o=`${n==="online"?"API":"license"} key`,r=`The editor is disabled because the TinyMCE ${o} could not be validated.`;DD(e,{console:{type:"error",message:[`${r}`,`The TinyMCE Commercial License Key Manager plugin is required for the provided ${o} to be validated but could not be loaded.`,PT].join(" ")},editor:{type:"warning",message:`${r}`}})},iN=(e,n)=>{const o=`The "${n}" plugin requires a valid TinyMCE license key.`;DD(e,{console:{type:"error",message:[`${o}`,PT].join(" ")}})},lN="licensekeymanager",BV=e=>ie(Xx(e))?"online":"offline",FV=e=>{var n;const o=(n=a0(e))===null||n===void 0?void 0:n.toLowerCase();return o==="gpl"?"gpl":vn(o)?"no_key":"non_gpl"},uN=e=>{const n=BV(e),o=FV(e),r=new Set(Jg(e)).has(lN);return o!=="gpl"||n==="online"||r?{type:"use_plugin",onlineStatus:n,licenseKeyType:o,forcePlugin:r}:{type:"use_gpl",onlineStatus:n,licenseKeyType:o,forcePlugin:r}},dN=e=>({validate:n=>{const{plugin:o}=n;return ie(o)&&iN(e,o),Promise.resolve(!1)}}),NV=e=>({validate:n=>{const{plugin:o}=n,r=ie(o);return r&&iN(e,o),Promise.resolve(!r)}}),IT="manager",mN=lN,LT=(()=>{const e=_c();return{load:(c,u)=>{if(uN(c).type==="use_plugin"){const b=`plugins/${mN}/plugin${u}.js`;e.load(IT,b).catch(()=>{OV(c,b)})}},add:c=>{e.add(IT,c)},init:c=>{const u=v=>{Object.defineProperty(c,"licenseKeyManager",{value:v,writable:!1,configurable:!1,enumerable:!0})},f=uN(c),b=e.get(IT);if(Fe(b)){const v=b(c,e.urls[IT]);u(v)}else switch(f.type){case"use_gpl":{u(NV(c));break}case"use_plugin":{_D(c),u(dN(c)),f.onlineStatus==="offline"&&f.licenseKeyType==="no_key"?cN(c):$T(c,f.onlineStatus);break}}c.licenseKeyManager.validate({})}}})(),cw=e=>{P.from(e.selection.getNode()).each(n=>{n.removeAttribute("data-mce-selected")})},RD=(e,n,o)=>{try{e.getDoc().execCommand(n,!1,String(o))}catch{}},PV=(e,n)=>{RD(e,"StyleWithCSS",n),RD(e,"enableInlineTableEditing",n),RD(e,"enableObjectResizing",n)},fN=e=>{e.selection.setRng(e.selection.getRng())},MD=(e,n,o)=>{zh(e,n)&&!o?Zr(e,n):o&&di(e,n)},gN=e=>{const n=re.fromDom(e.getBody());MD(n,"mce-content-readonly",!0),e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),cw(e)},BD=e=>{const n=re.fromDom(e.getBody());MD(n,"mce-content-readonly",!1),e.hasEditableRoot()&&E(n,!0),PV(e,!1),ak(e)&&e.focus(),fN(e),e.nodeChanged()},ia=e=>c0(e),B0="data-mce-contenteditable",hN=e=>{me(ot(e,'*[contenteditable="true"]'),n=>{Cr(n,B0,"true"),E(n,!1)})},FD=e=>{me(ot(e,`*[${B0}="true"]`),n=>{Qr(n,B0),E(n,!0)})},HT=(e,n)=>{const o=re.fromDom(e.getBody());n?(gN(e),E(o,!1),hN(o)):(FD(o),BD(e))},pN=e=>{e.serializer?ND(e):e.on("PreInit",()=>{ND(e)})},ND=e=>{e.parser.addAttributeFilter("contenteditable",n=>{ia(e)&&me(n,o=>{o.attr(B0,o.attr("contenteditable")),o.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(B0,n=>{ia(e)&&me(n,o=>{o.attr("contenteditable",o.attr(B0))})}),e.serializer.addTempAttr(B0)},$V=e=>e.type==="click",IV=["copy"],bN=e=>be(IV,e.type),vN=(e,n)=>dc(n,"a",r=>Yo(r,re.fromDom(e.getBody()))).bind(r=>Xi(r,"href")),ju=(e,n)=>{if($V(n)&&!Qt.metaKeyPressed(n)){const o=re.fromDom(n.target);vN(e,o).each(r=>{if(n.preventDefault(),/^#/.test(r)){const c=e.dom.select(`${r},[name="${Vi(r,"#")}"]`);c.length&&e.selection.scrollIntoView(c[0],!0)}else window.open(r,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else bN(n)&&e.dispatch(n.type,n)},LV=e=>{e.on("ShowCaret ObjectSelected",n=>{ia(e)&&n.preventDefault()}),e.on("DisabledStateChange",n=>{n.isDefaultPrevented()||HT(e,n.state)})},HV=e=>{pN(e),LV(e)},aJ=e=>/^[a-z0-9\-]+$/i.test(e),iw=e=>"content/"+e+"/content.css",zV=e=>tinymce.Resource.has(iw(e)),cJ=e=>zT(e,V2(e)),VV=e=>zT(e,Rx(e)),zT=(e,n)=>{const o=e.editorManager.baseURL+"/skins/content",c=`content${e.editorManager.suffix}.css`;return Oe(n,u=>zV(u)?u:aJ(u)&&!e.inline?`${o}/${u}/${c}`:e.documentBaseURI.toAbsolute(u))},Tm=e=>{e.contentCSS=e.contentCSS.concat(cJ(e),VV(e))},PD=e=>e?So(e.getElementsByTagName("img")):[],VT=(e,n)=>{const o={};return{findAll:(c,u=ft)=>{const f=tt(PD(c),v=>{const x=v.src;return v.hasAttribute("data-mce-bogus")||v.hasAttribute("data-mce-placeholder")||!x||x===Po.transparentSrc?!1:jn(x,"blob:")?!e.isUploaded(x)&&u(v):jn(x,"data:")?u(v):!1}),b=Oe(f,v=>{const x=v.src;if(to(o,x))return o[x].then(D=>ie(D)?D:{image:v,blobInfo:D.blobInfo});{const D=AH(n,x).then(B=>(delete o[x],{image:v,blobInfo:B})).catch(B=>(delete o[x],B));return o[x]=D,D}});return Promise.all(b)}}},UT=()=>{let o={};const r=(N,H)=>({status:N,resultUri:H}),c=N=>N in o;return{hasBlobUri:c,getResultUri:N=>{const H=o[N];return H?H.resultUri:null},isPending:N=>c(N)?o[N].status===1:!1,isUploaded:N=>c(N)?o[N].status===2:!1,markPending:N=>{o[N]=r(1,null)},markUploaded:(N,H)=>{o[N]=r(2,H)},removeFailed:N=>{delete o[N]},destroy:()=>{o={}}}};let UV=0;const $D=()=>{const e=()=>Math.round(Zn()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},WV=e=>e+UV+++$D(),yN=()=>{let e=[];const n=B=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[B.toLowerCase()]||"dat",o=(B,N,H,te,Q)=>{if(ie(B))return r({id:B,name:te,filename:Q,blob:N,base64:H});if(en(B))return r(B);throw new Error("Unknown input type")},r=B=>{if(!B.blob||!B.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const N=B.id||WV("blobid"),H=B.name||N,te=B.blob;return{id:bt(N),name:bt(H),filename:bt(B.filename||H+"."+n(te.type)),blob:bt(te),base64:bt(B.base64),blobUri:bt(B.blobUri||URL.createObjectURL(te)),uri:bt(B.uri)}},c=B=>{f(B.id())||e.push(B)},u=B=>rn(e,B).getOrUndefined(),f=B=>u(N=>N.id()===B);return{create:o,add:c,get:f,getByUri:B=>u(N=>N.blobUri()===B),getByData:(B,N)=>u(H=>H.base64()===B&&H.blob().type===N),findFirst:u,removeByUri:B=>{e=tt(e,N=>N.blobUri()===B?(URL.revokeObjectURL(N.blobUri()),!1):!0)},destroy:()=>{me(e,B=>{URL.revokeObjectURL(B.blobUri())}),e=[]}}},ZV=(e,n)=>{const o={},r=(Q,Y)=>Q?Q.replace(/\/$/,"")+"/"+Y.replace(/^\//,""):Y,c=(Q,Y)=>new Promise((Ae,_e)=>{const Pe=new XMLHttpRequest;Pe.open("POST",n.url),Pe.withCredentials=n.credentials,Pe.upload.onprogress=ht=>{Y(ht.loaded/ht.total*100)},Pe.onerror=()=>{_e("Image upload failed due to a XHR Transport error. Code: "+Pe.status)},Pe.onload=()=>{if(Pe.status<200||Pe.status>=300){_e("HTTP Error: "+Pe.status);return}const ht=JSON.parse(Pe.responseText);if(!ht||!ie(ht.location)){_e("Invalid JSON: "+Pe.responseText);return}Ae(r(n.basePath,ht.location))};const Ze=new FormData;Ze.append("file",Q.blob(),Q.filename()),Pe.send(Ze)}),u=he(n.handler)?n.handler:c,f=()=>new Promise(Q=>{Q([])}),b=(Q,Y)=>({url:Y,blobInfo:Q,status:!0}),v=(Q,Y)=>({url:"",blobInfo:Q,status:!1,error:Y}),x=(Q,Y)=>{Mt.each(o[Q],Ae=>{Ae(Y)}),delete o[Q]},D=(Q,Y,Ae)=>(e.markPending(Q.blobUri()),new Promise(_e=>{let Pe,Ze;try{const ht=()=>{Pe&&(Pe.close(),Ze=Ct)},Vt=lt=>{ht(),e.markUploaded(Q.blobUri(),lt),x(Q.blobUri(),b(Q,lt)),_e(b(Q,lt))},Ot=lt=>{ht(),e.removeFailed(Q.blobUri()),x(Q.blobUri(),v(Q,lt)),_e(v(Q,lt))};Ze=lt=>{lt<0||lt>100||P.from(Pe).orThunk(()=>P.from(Ae).map(Xe)).each(Be=>{Pe=Be,Be.progressBar.value(lt)})},Y(Q,Ze).then(Vt,lt=>{Ot(ie(lt)?{message:lt}:lt)})}catch(ht){_e(v(Q,ht))}})),B=Q=>Q===c,N=Q=>{const Y=Q.blobUri();return new Promise(Ae=>{o[Y]=o[Y]||[],o[Y].push(Ae)})},H=(Q,Y)=>(Q=Mt.grep(Q,Ae=>!e.isUploaded(Ae.blobUri())),Promise.all(Mt.map(Q,Ae=>e.isPending(Ae.blobUri())?N(Ae):D(Ae,u,Y))));return{upload:(Q,Y)=>!n.url&&B(u)?f():H(Q,Y)}},CN=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),WT=(e,n)=>ZV(n,{url:iM(e),basePath:G1(e),credentials:g4(e),handler:lM(e)}),jV=e=>{const n=UT(),o=WT(e,n);return{upload:(r,c=!0)=>o.upload(r,c?CN(e):void 0)}},wN=(e,n)=>e.dom.isEmpty(n.dom)&&Fe(e.schema.getTextBlockElements()[Oo(n)]),qV=e=>n=>{wN(e,n)&&ds(n,re.fromHtml('<br data-mce-bogus="1" />'))},F0=e=>{const n=yN();let o,r;const c=UT(),u=[],f=Pe=>Ze=>e.selection?Pe(Ze):[],b=Pe=>Pe+(Pe.indexOf("?")===-1?"?":"&")+new Date().getTime(),v=(Pe,Ze,ht)=>{let Vt=0;do Vt=Pe.indexOf(Ze,Vt),Vt!==-1&&(Pe=Pe.substring(0,Vt)+ht+Pe.substr(Vt+Ze.length),Vt+=ht.length-Ze.length+1);while(Vt!==-1);return Pe},x=(Pe,Ze,ht)=>{const Vt=`src="${ht}"${ht===Po.transparentSrc?' data-mce-placeholder="1"':""}`;return Pe=v(Pe,`src="${Ze}"`,Vt),Pe=v(Pe,'data-mce-src="'+Ze+'"','data-mce-src="'+ht+'"'),Pe},D=(Pe,Ze)=>{me(e.undoManager.data,ht=>{ht.type==="fragmented"?ht.fragments=Oe(ht.fragments,Vt=>x(Vt,Pe,Ze)):ht.content=x(ht.content,Pe,Ze)})},B=(Pe,Ze)=>{const ht=e.convertURL(Ze,"src");D(Pe.src,Ze),Ka(re.fromDom(Pe),{src:cs(e)?b(Ze):Ze,"data-mce-src":ht})},N=()=>(o||(o=WT(e,c)),Y().then(f(Pe=>{const Ze=Oe(Pe,ht=>ht.blobInfo);return o.upload(Ze,CN(e)).then(f(ht=>{const Vt=[];let Ot=!1;const lt=Oe(ht,(Be,oe)=>{const{blobInfo:je,image:Dt}=Pe[oe];let kn=!1;return Be.status&&aM(e)?(Be.url&&!er(Dt.src,Be.url)&&(Ot=!0),n.removeByUri(Dt.src),Zu(e)||B(Dt,Be.url)):Be.error&&(Be.error.remove&&(D(Dt.src,Po.transparentSrc),Vt.push(Dt),kn=!0),kV(e,Be.error.message)),{element:Dt,status:Be.status,uploadUri:Be.url,blobInfo:je,removed:kn}});return Vt.length>0&&!Zu(e)?e.undoManager.transact(()=>{me(Zd(Vt),Be=>{const oe=Hc(Be);Ws(Be),oe.each(qV(e)),n.removeByUri(Be.dom.src)})}):Ot&&e.undoManager.dispatchChange(),lt}))}))),H=()=>Xg(e)?N():Promise.resolve([]),te=Pe=>zs(u,Ze=>Ze(Pe)),Q=Pe=>{u.push(Pe)},Y=()=>(r||(r=VT(c,n)),r.findAll(e.getBody(),te).then(f(Pe=>{const Ze=tt(Pe,ht=>ie(ht)?(Ip(e,ht),!1):ht.uriType!=="blob");return Zu(e)||me(Ze,ht=>{D(ht.image.src,ht.blobInfo.blobUri()),ht.image.src=ht.blobInfo.blobUri(),ht.image.removeAttribute("data-mce-src")}),Ze}))),Ae=()=>{n.destroy(),c.destroy(),r=o=null},_e=Pe=>Pe.replace(/src="(blob:[^"]+)"/g,(Ze,ht)=>{const Vt=c.getResultUri(ht);if(Vt)return'src="'+Vt+'"';let Ot=n.getByUri(ht);return Ot||(Ot=st(e.editorManager.get(),(lt,Be)=>lt||Be.editorUpload&&Be.editorUpload.blobCache.getByUri(ht),void 0)),Ot?'src="data:'+Ot.blob().type+";base64,"+Ot.base64()+'"':Ze});return e.on("SetContent",()=>{Xg(e)?H():Y()}),e.on("RawSaveContent",Pe=>{Pe.content=_e(Pe.content)}),e.on("GetContent",Pe=>{Pe.source_view||Pe.format==="raw"||Pe.format==="tree"||(Pe.content=_e(Pe.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",Pe=>{me(Pe,Ze=>{const ht=Ze.attr("src");if(!ht||n.getByUri(ht))return;const Vt=c.getResultUri(ht);Vt&&Ze.attr("src",Vt)})})}),{blobCache:n,addFilter:Q,uploadImages:N,uploadImagesAuto:H,scanForImages:Y,destroy:Ae}},SN=e=>{const n=e.dom,o=e.schema.type,r={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"left"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:c=>{n.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:".mce-placeholder",styles:{display:"block",marginLeft:"auto",marginRight:"auto"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"right"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:c=>{n.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const c={inline:"span",styles:{textDecoration:"line-through"},exact:!0},u={inline:"strike",remove:"all",preserve_attributes:["class","style"]},f={inline:"s",remove:"all",preserve_attributes:["class","style"]};return o!=="html4"?[f,c,u]:[c,f,u]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},samp:{inline:"samp"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(c,u,f)=>Cn(c)&&c.hasAttribute("href"),onformat:(c,u,f)=>{Mt.each(f,(b,v)=>{n.setAttrib(c,v,b)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":c=>{var u;return(u=c==null?void 0:c.customValue)!==null&&u!==void 0?u:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return Mt.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd".split(/\s/),c=>{r[c]={block:c,remove:"all"}}),r},xN={remove_similar:!0,inherit:!1},N0={selector:"td,th",...xN},GV={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...N0},tablecellverticalalign:{styles:{"vertical-align":"%value"},...N0},tablecellbordercolor:{styles:{borderColor:"%value"},...N0},tablecellclass:{classes:["%value"],...N0},tableclass:{selector:"table",classes:["%value"],...xN},tablecellborderstyle:{styles:{borderStyle:"%value"},...N0},tablecellborderwidth:{styles:{borderWidth:"%value"},...N0}},KV=bt(GV),YV=e=>{const n={},o=f=>Fe(f)?n[f]:n,r=f=>to(n,f),c=(f,b)=>{f&&(ie(f)?(Qe(b)||(b=[b]),me(b,v=>{Kn(v.deep)&&(v.deep=!jt(v)),Kn(v.split)&&(v.split=!jt(v)||Pt(v)),Kn(v.remove)&&jt(v)&&!Pt(v)&&(v.remove="none"),jt(v)&&Pt(v)&&(v.mixed=!0,v.block_expand=!0),ie(v.classes)&&(v.classes=v.classes.split(/\s+/))}),n[f]=b):xo(f,(v,x)=>{c(x,v)}))},u=f=>(f&&n[f]&&delete n[f],n);return c(SN(e)),c(KV()),c(b4(e)),{get:o,has:r,register:c,unregister:u}},ZT=Mt.each,Rd=Is.DOM,jT=e=>Fe(e)&&en(e),EN=(e,n)=>{const o=n&&n.schema||Pu({}),r=(v,x)=>{x.classes.length>0&&Rd.addClass(v,x.classes.join(" ")),Rd.setAttribs(v,x.attrs)},c=v=>{const x=ie(v)?{name:v,classes:[],attrs:{}}:v,D=Rd.create(x.name);return r(D,x),D},u=(v,x)=>{const D=o.getElementRule(v.nodeName.toLowerCase()),B=D==null?void 0:D.parentsRequired;return B&&B.length?x&&be(B,x)?x:B[0]:!1},f=(v,x,D)=>{let B;const N=x[0],H=jT(N)?N.name:void 0,te=u(v,H);if(te)H===te?(B=N,x=x.slice(1)):B=te;else if(N)B=N,x=x.slice(1);else if(!D)return v;const Q=B?c(B):Rd.create("div");Q.appendChild(v),D&&Mt.each(D,Ae=>{const _e=c(Ae);Q.insertBefore(_e,v)});const Y=jT(B)?B.siblings:void 0;return f(Q,x,Y)},b=Rd.create("div");if(e.length>0){const v=e[0],x=c(v),D=jT(v)?v.siblings:void 0;b.appendChild(f(x,e.slice(1),D))}return b},ID=e=>{e=Mt.trim(e);let n="div";const o={name:n,classes:[],attrs:{},selector:e};return e!=="*"&&(n=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,c,u,f,b)=>{switch(c){case"#":o.attrs.id=u;break;case".":o.classes.push(u);break;case":":Mt.inArray("checked disabled enabled read-only required".split(" "),u)!==-1&&(o.attrs[u]=u);break}if(f==="["){const v=b.match(/([\w\-]+)(?:\=\"([^\"]+))?/);v&&(o.attrs[v[1]]=v[2])}return""})),o.name=n||"div",o},Hp=e=>ie(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Mt.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),n=>{const o=Mt.map(n.split(/(?:~\+|~|\+)/),ID),r=o.pop();return o.length&&(r.siblings=o),r}).reverse()):[],XV=(e,n)=>{let o="",r=X1(e);if(r==="")return"";const c=N=>ie(N)?N.replace(/%(\w+)/g,""):"",u=(N,H)=>Rd.getStyle(H??e.getBody(),N,!0);if(ie(n)){const N=e.formatter.get(n);if(!N)return"";n=N[0]}if("preview"in n){const N=n.preview;if(N===!1)return"";r=N||r}let f=n.block||n.inline||"span",b;const v=Hp(n.selector);v.length>0?(v[0].name||(v[0].name=f),f=n.selector,b=EN(v,e)):b=EN([f],e);const x=Rd.select(f,b)[0]||b.firstChild;ZT(n.styles,(N,H)=>{const te=c(N);te&&Rd.setStyle(x,H,te)}),ZT(n.attributes,(N,H)=>{const te=c(N);te&&Rd.setAttrib(x,H,te)}),ZT(n.classes,N=>{const H=c(N);Rd.hasClass(x,H)||Rd.addClass(x,H)}),e.dispatch("PreviewFormats"),Rd.setStyles(b,{position:"absolute",left:-65535}),e.getBody().appendChild(b);const D=u("fontSize"),B=/px$/.test(D)?parseInt(D,10):0;return ZT(r.split(" "),N=>{let H=u(N,x);if(!(N==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(H)&&(H=u(N),$g(H).toLowerCase()==="#ffffff"))&&!(N==="color"&&$g(H).toLowerCase()==="#000000")){if(N==="font-size"&&/em|%$/.test(H)){if(B===0)return;H=parseFloat(H)/(/%$/.test(H)?100:1)*B+"px"}N==="border"&&H&&(o+="padding:0 2px;"),o+=N+":"+H+";"}}),e.dispatch("AfterPreviewFormats"),Rd.remove(b),o},JV=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let n=1;n<=6;n++)e.addShortcut("access+"+n,"",["FormatBlock",!1,"h"+n]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},Qv=e=>{const n=YV(e),o=gn({});return JV(e),J9(e),Zu(e)||gT(o,e),{get:n.get,has:n.has,register:n.register,unregister:n.unregister,apply:(r,c,u)=>{yV(e,r,c,u)},remove:(r,c,u,f)=>{$6(e,r,c,u,f)},toggle:(r,c,u)=>{I6(e,r,c,u)},match:(r,c,u,f)=>N6(e,r,c,u,f),closest:r=>vV(e,r),matchAll:(r,c)=>R0(e,r,c),matchNode:(r,c,u,f)=>P6(e,r,c,u,f),canApply:r=>gD(e,r),formatChanged:(r,c,u,f)=>L6(e,o,r,c,u,f),getCssText:Te(XV,e)}},LD=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},TN=(e,n,o)=>{const r=gn(!1),c=v=>{CT(n,!1,o),n.add({},v)};e.on("init",()=>{n.add()}),e.on("BeforeExecCommand",v=>{const x=v.command;LD(x)||(O0(n,o),n.beforeChange())}),e.on("ExecCommand",v=>{const x=v.command;LD(x)||c(v)}),e.on("ObjectResizeStart cut",()=>{n.beforeChange()}),e.on("SaveContent ObjectResized blur",c),e.on("dragend",c),e.on("keyup",v=>{const x=v.keyCode;if(v.isDefaultPrevented())return;const D=Po.os.isMacOS()&&v.key==="Meta";(x>=33&&x<=36||x>=37&&x<=40||x===45||v.ctrlKey||D)&&(c(),e.nodeChanged()),(x===46||x===8)&&e.nodeChanged(),r.get()&&n.typing&&!aD(vT(e),n.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),r.set(!1),e.nodeChanged())}),e.on("keydown",v=>{const x=v.keyCode;if(v.isDefaultPrevented())return;if(x>=33&&x<=36||x>=37&&x<=40||x===45){n.typing&&c(v);return}const D=v.ctrlKey&&!v.altKey||v.metaKey;if((x<16||x>20)&&x!==224&&x!==91&&!n.typing&&!D){n.beforeChange(),CT(n,!0,o),n.add({},v),r.set(!0);return}(Po.os.isMacOS()?v.metaKey:v.ctrlKey&&!v.altKey)&&n.beforeChange()}),e.on("mousedown",v=>{n.typing&&c(v)});const u=v=>v.inputType==="insertReplacementText",f=v=>v.inputType==="insertText"&&v.data===null,b=v=>v.inputType==="insertFromPaste"||v.inputType==="insertFromDrop";e.on("input",v=>{v.inputType&&(u(v)||f(v)||b(v))&&c(v)}),e.on("AddUndo Undo Redo ClearUndos",v=>{v.isDefaultPrevented()||e.nodeChanged()})},AN=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},lw=e=>{const n=rs(),o=gn(0),r=gn(0),c={data:[],typing:!1,beforeChange:()=>{ET(e,o,n)},add:(u,f)=>lD(e,c,r,o,n,u,f),dispatchChange:()=>{e.setDirty(!0);const u=vT(e);u.bookmark=W1(e.selection),e.dispatch("change",{level:u,lastLevel:fn(c.data,r.get()).getOrUndefined()})},undo:()=>uD(e,c,o,r),redo:()=>dD(e,r,c.data),clear:()=>{mD(e,c,r)},reset:()=>{TT(e,c)},hasUndo:()=>fD(e,c,r),hasRedo:()=>R6(e,c,r),transact:u=>M6(e,c,o,u),ignore:u=>{B6(e,o,u)},extra:(u,f)=>{F6(e,c,r,u,f)}};return Zu(e)||TN(e,c,o),AN(e),c},_N=[9,27,Qt.HOME,Qt.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,Qt.DOWN,Qt.UP,Qt.LEFT,Qt.RIGHT].concat(Po.browser.isFirefox()?[224]:[]),kN="data-mce-placeholder",HD=e=>e.type==="keydown"||e.type==="keyup",DN=e=>{const n=e.keyCode;return n===Qt.BACKSPACE||n===Qt.DELETE},QV=e=>{if(HD(e)){const n=e.keyCode;return!DN(e)&&(Qt.metaKeyPressed(e)||e.altKey||n>=112&&n<=123||be(_N,n))}else return!1},qT=e=>HD(e)&&!(DN(e)||e.type==="keyup"&&e.keyCode===229),ON=(e,n,o)=>{if(e.isEmpty(n,void 0,{skipBogus:!1,includeZwsp:!0})){const r=n.firstElementChild;return r?e.getStyle(n.firstElementChild,"padding-left")||e.getStyle(n.firstElementChild,"padding-right")?!1:o===r.nodeName.toLowerCase():!0}else return!1},RN=e=>{var n;const o=e.dom,r=pc(e),c=(n=Bx(e))!==null&&n!==void 0?n:"",u=(f,b)=>{if(QV(f))return;const v=e.getBody(),x=qT(f)?!1:ON(o,v,r);(o.getAttrib(v,kN)!==""!==x||b)&&(o.setAttrib(v,kN,x?c:null),i4(e,x),e.on(x?"keydown":"keyup",u),e.off(x?"keyup":"keydown",u))};Js(c)&&e.on("init",f=>{u(f,!0),e.on("change SetContent ExecCommand",u),e.on("paste",b=>_d.setEditorTimeout(e,()=>u(b)))})},GT=e=>n=>Fe(n)&&n.nodeName.toLowerCase()===e,KT=e=>n=>Fe(n)&&e.test(n.nodeName),tg=e=>Fe(e)&&e.nodeType===3,MN=e=>Fe(e)&&e.nodeType===1,qu=KT(/^(OL|UL|DL)$/),zD=KT(/^(OL|UL)$/),YT=KT(/^(LI|DT|DD)$/),BN=KT(/^(DT|DD)$/),P0=GT("br"),eU=e=>{var n;return((n=e.parentNode)===null||n===void 0?void 0:n.firstChild)===e},VD=(e,n)=>Fe(n)&&n.nodeName in e.schema.getTextBlockElements(),$0=(e,n)=>Fe(e)&&e.nodeName in n,lf=(e,n)=>Fe(n)&&n.nodeName in e.schema.getVoidElements(),tU=(e,n)=>P0(n)?e.isBlock(n.nextSibling)&&!P0(n.previousSibling):!1,yh=(e,n,o)=>{const r=e.isEmpty(n);return o&&e.select("span[data-mce-type=bookmark]",n).length>0?!1:r},Hr=(e,n)=>e.isChildOf(n,e.getRoot()),XT=Is.DOM,JT=(e,n)=>{const o=n.parentElement;if(o&&o.nodeName==="LI"&&o.firstChild===n){const r=o.previousSibling;r&&r.nodeName==="LI"?(r.appendChild(n),yh(e,o)&&XT.remove(o)):XT.setStyle(o,"listStyleType","none")}if(qu(o)){const r=o.previousSibling;r&&r.nodeName==="LI"&&r.appendChild(n)}},uf=(e,n)=>{const o=Mt.grep(e.select("ol,ul",n));Mt.each(o,r=>{JT(e,r)})},UD=(e,n)=>{if(tg(e))return{container:e,offset:n};const o=sf.getNode(e,n);return tg(o)?{container:o,offset:n>=e.childNodes.length?o.data.length:0}:o.previousSibling&&tg(o.previousSibling)?{container:o.previousSibling,offset:o.previousSibling.data.length}:o.nextSibling&&tg(o.nextSibling)?{container:o.nextSibling,offset:0}:{container:e,offset:n}},uw=e=>{const n=e.cloneRange(),o=UD(e.startContainer,e.startOffset);n.setStart(o.container,o.offset);const r=UD(e.endContainer,e.endOffset);return n.setEnd(r.container,r.offset),n},FN=["OL","UL","DL"],I0=FN.join(","),dw=(e,n)=>{const o=e.selection.getStart(!0);return e.dom.getParent(o,I0,df(e,o))},nU=(e,n)=>Fe(e)&&n.length===1&&n[0]===e,ey=e=>tt(e.querySelectorAll(I0),qu),oU=e=>{const n=dw(e),o=e.selection.getSelectedBlocks();return nU(n,o)?ey(n):tt(o,r=>qu(r)&&n!==r)},L0=(e,n)=>{const o=Mt.map(n,r=>{const c=e.dom.getParent(r,"li,dd,dt",df(e,r));return c||r});return Xs(o)},WD=e=>{const n=e.selection.getSelectedBlocks();return tt(L0(e,n),YT)},zp=e=>tt(WD(e),BN),ZD=(e,n)=>{const o=e.dom.getParents(n,"TD,TH");return o.length>0?o[0]:e.getBody()},Md=(e,n)=>!qu(n)&&!YT(n)&&ke(FN,o=>e.isValidChild(n.nodeName,o)),df=(e,n)=>{const o=e.dom.getParents(n,e.dom.isBlock),r=u=>u.nodeName.toLowerCase()!==pc(e);return rn(o,u=>r(u)&&Md(e.schema,u)).getOr(e.getBody())},sU=e=>Hc(e).exists(n=>YT(n.dom)&&Ta(n).exists(o=>!qu(o.dom))&&Vr(n).exists(o=>!qu(o.dom))),ty=(e,n)=>{const o=e.dom.getParents(n,"ol,ul",df(e,n));return ts(o)},jD=e=>{const n=ty(e,e.selection.getStart()),o=tt(e.selection.getSelectedBlocks(),zD);return n.toArray().concat(o)},rU=e=>{const n=e.selection.getStart();return e.dom.getParents(n,"ol,ul",df(e,n))},ny=e=>{const n=jD(e),o=rU(e);return rn(o,r=>sU(re.fromDom(r))).fold(()=>aU(e,n),r=>[r])},aU=(e,n)=>{const o=Oe(n,r=>ty(e,r).getOr(r));return Xs(o)},du=e=>/\btox\-/.test(e.className),mw=(e,n)=>n!==null&&!e.dom.isEditable(n),NN=e=>{const n=dw(e);return mw(e,n)||!e.selection.isEditable()},fw=(e,n)=>{const o=e.dom.getParent(n,"ol,ul,dl");return mw(e,o)||!e.selection.isEditable()},Ch=(e,n,o)=>e.dispatch("ListMutation",{action:n,element:o}),Vp=(e,n,o={})=>{const r=e.dom,c=e.schema.getBlockElements(),u=r.createFragment(),f=pc(e),b=gp(e);let v,x,D=!1;for(x=r.create(f,{...b,...o.style?{style:o.style}:{}}),$0(n.firstChild,c)||u.appendChild(x);v=n.firstChild;){const B=v.nodeName;!D&&(B!=="SPAN"||v.getAttribute("data-mce-type")!=="bookmark")&&(D=!0),$0(v,c)?(u.appendChild(v),x=null):(x||(x=r.create(f,b),u.appendChild(x)),x.appendChild(v))}return!D&&x&&x.appendChild(r.create("br",{"data-mce-bogus":"1"})),u},H0=e=>Cf(e,"OL,UL"),cU=e=>Cf(e,"LI"),PN=e=>Ta(e).exists(H0),iU=e=>Vr(e).exists(H0),lU=(e,n)=>Jx(e).map(o=>o>=n).getOr(!0),z0=e=>"listAttributes"in e,$N=e=>"isComment"in e,oy=e=>"isFragment"in e,Am=e=>e.depth>0,uU=e=>e.isSelected,dU=e=>{const n=wr(e),o=iU(e)?n.slice(0,-1):n;return Oe(o,Tu)},mU=(e,n,o)=>Hc(e).filter(Tr).map(r=>({depth:n,dirty:!1,isSelected:o,content:dU(e),itemAttributes:Ho(e),listAttributes:Ho(r),listType:Oo(r),isInPreviousLi:!1})),IN=(e,n)=>{ds(e.item,n.list)},fU=e=>{for(let n=1;n<e.length;n++)IN(e[n-1],e[n])},gU=(e,n)=>{nn(ts(e),uo(n),IN)},hU=(e,n)=>{const o={list:re.fromTag(n,e),item:re.fromTag("li",e)};return ds(o.list,o.item),o},pU=(e,n,o)=>{const r=[];for(let c=0;c<o;c++)r.push(hU(e,z0(n)?n.listType:n.parentListType));return r},bU=(e,n)=>{for(let o=0;o<e.length-1;o++)lc(e[o].item,"list-style-type","none");ts(e).each(o=>{z0(n)&&(Ka(o.list,n.listAttributes),Ka(o.item,n.itemAttributes)),Yi(o.item,n.content)})},iJ=(e,n)=>{Oo(e.list)!==n.listType&&(e.list=rd(e.list,n.listType)),Ka(e.list,n.listAttributes)},vU=(e,n,o)=>{const r=re.fromTag("li",e);return Ka(r,n),Yi(r,o),r},yU=(e,n)=>{ds(e.list,n),e.item=n},LN=(e,n,o)=>{const r=n.slice(0,o.depth);return ts(r).each(c=>{if(z0(o)){const u=vU(e,o.itemAttributes,o.content);yU(c,u),iJ(c,o)}else if(oy(o))Yi(c.item,o.content);else{const u=re.fromHtml(`<!--${o.content}-->`);ds(c.list,u)}}),r},CU=(e,n,o)=>{const r=pU(e,o,o.depth-n.length);return fU(r),bU(r,o),gU(n,r),n.concat(r)},wU=(e,n)=>{let o=P.none();const r=st(n,(c,u,f)=>$N(u)?f===0?(o=P.some(u),c):LN(e,c,u):u.depth>c.length?CU(e,c,u):LN(e,c,u),[]);return o.each(c=>{const u=re.fromHtml(`<!--${c.content}-->`);uo(r).each(f=>{Eu(f.list,u)})}),uo(r).map(c=>c.list)},SU=(e,n,o)=>{switch(n){case"Indent":if(lU(e,o.depth))o.depth++;else return;break;case"Outdent":o.depth--;break;case"Flatten":o.depth=0}o.dirty=!0},Up=(e,n)=>{z0(e)&&z0(n)&&(e.listType=n.listType,e.listAttributes={...n.listAttributes})},xU=e=>{e.listAttributes=Fc(e.listAttributes,(n,o)=>o!=="start")},EU=(e,n)=>{const o=e[n].depth,r=u=>u.depth===o&&!u.dirty,c=u=>u.depth<o;return Fn(wo(e.slice(0,n)),r,c).orThunk(()=>Fn(e.slice(n+1),r,c))},QT=e=>(me(e,(n,o)=>{EU(e,o).fold(()=>{n.dirty&&z0(n)&&xU(n)},r=>Up(n,r))}),e),qD=(e,n,o,r)=>{var c;if(Il(r))return[{depth:e+1,content:(c=r.dom.nodeValue)!==null&&c!==void 0?c:"",dirty:!1,isSelected:!1,isComment:!0}];n.each(b=>{Yo(b.start,r)&&o.set(!0)});const u=mU(r,e,o.get());n.each(b=>{Yo(b.end,r)&&o.set(!1)});const f=Vr(r).filter(H0).map(b=>eA(e,n,o,b)).getOr([]);return u.toArray().concat(f)},GD=(e,n,o,r)=>Ta(r).filter(H0).fold(()=>qD(e,n,o,r),c=>{const u=st(wr(r),(f,b,v)=>{if(v===0)return f;if(cU(b))return f.concat(qD(e,n,o,b));{const x={isFragment:!0,depth:e,content:[b],isSelected:!1,dirty:!1,parentListType:Oo(c)};return f.concat(x)}},[]);return eA(e,n,o,c).concat(u)}),eA=(e,n,o,r)=>eo(wr(r),c=>{const u=H0(c)?eA:GD,f=e+1;return u(f,n,o,c)}),TU=(e,n)=>{const o=gn(!1),r=0;return Oe(e,c=>({sourceList:c,entries:eA(r,n,o,c)}))},AU=(e,n)=>{const o=QT(n);return Oe(o,r=>{const c=$N(r)?qd([re.fromHtml(`<!--${r.content}-->`)]):qd(r.content),u=z0(r)?r.itemAttributes:{};return re.fromDom(Vp(e,c.dom,u))})},_U=(e,n)=>{const o=QT(n);return wU(e.contentDocument,o).toArray()},kU=(e,n)=>eo(In(n,Am),o=>uo(o).exists(Am)?_U(e,o):AU(e,o)),DU=(e,n,o)=>{me(tt(n,uU),r=>SU(e,o,r))},OU=e=>{const n=Oe(WD(e),re.fromDom);return nn(rn(n,St(PN)),rn(wo(n),St(PN)),(o,r)=>({start:o,end:r}))},RU=(e,n,o)=>{const r=TU(n,OU(e));me(r,c=>{DU(e,c.entries,o);const u=kU(e,c.entries);me(u,f=>{Ch(e,o==="Indent"?"IndentList":"OutdentList",f.dom)}),ub(c.sourceList,u),Ws(c.sourceList)})},MU=e=>Jx(e).forall(n=>{const o=e.selection.getSelectedBlocks();return ke(o,r=>dc(re.fromDom(r),"li").forall(c=>Ee(c,"ol,ul").length<=n))}),Wp=Is.DOM,BU=(e,n,o)=>{const r=x=>{const D=x.parentNode;D&&Mt.each(c,B=>{D.insertBefore(B,o.parentNode)}),Wp.remove(x)},c=Wp.select('span[data-mce-type="bookmark"]',n),u=Vp(e,o),f=Wp.createRng();f.setStartAfter(o),f.setEndAfter(n);const b=f.extractContents();for(let x=b.firstChild;x;x=x.firstChild)if(x.nodeName==="LI"&&e.dom.isEmpty(x)){Wp.remove(x);break}e.dom.isEmpty(b)||Wp.insertAfter(b,n),Wp.insertAfter(u,n);const v=o.parentElement;v&&yh(e.dom,v)&&r(v),Wp.remove(o),yh(e.dom,n)&&Wp.remove(n)},FU=Jr("dd"),HN=Jr("dt"),NU=(e,n)=>{FU(n)?rd(n,"dt"):HN(n)&&Di(n).each(o=>BU(e,o.dom,n.dom))},PU=e=>{HN(e)&&rd(e,"dd")},$U=(e,n,o)=>{n==="Indent"?me(o,PU):me(o,r=>NU(e,r))},IU=(e,n)=>{const o=Zd(ny(e)),r=Zd(zp(e));let c=!1;if(o.length||r.length){const u=e.selection.getBookmark();RU(e,o,n),$U(e,n,r),e.selection.moveToBookmark(u),e.selection.setRng(uw(e.selection.getRng())),e.nodeChanged(),c=!0}return c},KD=(e,n)=>!NN(e)&&IU(e,n),zN=e=>KD(e,"Indent"),YD=e=>KD(e,"Outdent"),gw=e=>KD(e,"Flatten"),sy=e=>{switch(e){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},LU=(e,n,o)=>{const r=o["list-style-type"]?o["list-style-type"]:null;e.setStyle(n,"list-style-type",r)},VN=(e,n)=>{Mt.each(n,(o,r)=>{e.setAttribute(r,o)})},HU=(e,n,o)=>{VN(n,o["list-attributes"]),Mt.each(e.select("li",n),r=>{VN(r,o["list-item-attributes"])})},ry=(e,n,o)=>{LU(e,n,o),HU(e,n,o)},zU=(e,n,o)=>{Mt.each(o,r=>e.setStyle(n,r,""))},tA=(e,n)=>Fe(n)&&!$0(n,e.schema.getBlockElements()),XD=(e,n,o,r)=>{let c=n[o?"startContainer":"endContainer"];const u=n[o?"startOffset":"endOffset"];MN(c)&&(c=c.childNodes[Math.min(u,c.childNodes.length-1)]||c),!o&&P0(c.nextSibling)&&(c=c.nextSibling);const f=v=>{for(;!e.dom.isBlock(v)&&v.parentNode&&r!==v;)v=v.parentNode;return v},b=(v,x)=>{var D;const B=new Qs(v,f(v)),N=x?"next":"prev";let H;for(;H=B[N]();)if(!(lf(e,H)||qa(H.textContent)||((D=H.textContent)===null||D===void 0?void 0:D.length)===0))return P.some(H);return P.none()};if(o&&tg(c))if(qa(c.textContent))c=b(c,!1).getOr(c);else for(c.parentNode!==null&&tA(e,c.parentNode)&&(c=c.parentNode);c.previousSibling!==null&&(tA(e,c.previousSibling)||tg(c.previousSibling));)c=c.previousSibling;if(!o&&tg(c))if(qa(c.textContent))c=b(c,!0).getOr(c);else for(c.parentNode!==null&&tA(e,c.parentNode)&&(c=c.parentNode);c.nextSibling!==null&&(tA(e,c.nextSibling)||tg(c.nextSibling));)c=c.nextSibling;for(;c.parentNode!==r;){const v=c.parentNode;if(VD(e,c)||/^(TD|TH)$/.test(v.nodeName))return c;c=v}return c},UN=(e,n,o)=>{const r=[],c=e.dom,u=XD(e,n,!0,o),f=XD(e,n,!1,o);let b;const v=[];for(let x=u;x&&(v.push(x),x!==f);x=x.nextSibling);return Mt.each(v,x=>{var D;if(VD(e,x)){r.push(x),b=null;return}if(c.isBlock(x)||P0(x)){P0(x)&&c.remove(x),b=null;return}const B=x.nextSibling;if(bm.isBookmarkNode(x)&&(qu(B)||VD(e,B)||!B&&x.parentNode===o)){b=null;return}b||(b=c.create("p"),(D=x.parentNode)===null||D===void 0||D.insertBefore(b,x),r.push(b)),b.appendChild(x)}),r},VU=(e,n,o)=>{const r=e.getStyle(n,"list-style-type");let c=o?o["list-style-type"]:"";return c=c===null?"":c,r===c},UU=(e,n)=>{const o=e.selection.getStart(!0),r=XD(e,n,!0,e.getBody());return Fo(re.fromDom(r),re.fromDom(n.commonAncestorContainer))?n.commonAncestorContainer:o},JD=(e,n,o)=>{const r=e.selection.getRng();let c="LI";const u=df(e,UU(e,r)),f=e.dom;if(f.getContentEditable(e.selection.getNode())==="false")return;n=n.toUpperCase(),n==="DL"&&(c="DT");const b=Rp(r),v=tt(UN(e,r,u),e.dom.isEditable);Mt.each(v,x=>{let D;const B=x.previousSibling,N=x.parentNode;YT(N)||(B&&qu(B)&&B.nodeName===n&&VU(f,B,o)?(D=B,x=f.rename(x,c),B.appendChild(x)):(D=f.create(n),N.insertBefore(D,x),D.appendChild(x),x=f.rename(x,c)),zU(f,x,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),ry(f,D,o),QD(e.dom,D))}),e.selection.setRng(Mp(b))},WU=(e,n)=>qu(e)&&e.nodeName===(n==null?void 0:n.nodeName),ZU=(e,n,o)=>{const r=e.getStyle(n,"list-style-type",!0),c=e.getStyle(o,"list-style-type",!0);return r===c},jU=(e,n)=>e.className===n.className,WN=(e,n,o)=>WU(n,o)&&ZU(e,n,o)&&jU(n,o),QD=(e,n)=>{let o,r=n.nextSibling;if(WN(e,n,r)){const c=r;for(;o=c.firstChild;)n.appendChild(o);e.remove(c)}if(r=n.previousSibling,WN(e,n,r)){const c=r;for(;o=c.lastChild;)n.insertBefore(o,n.firstChild);e.remove(c)}},qU=(e,n,o,r)=>{if(n.nodeName!==o){const c=e.dom.rename(n,o);ry(e.dom,c,r),Ch(e,sy(o),c)}else ry(e.dom,n,r),Ch(e,sy(o),n)},ZN=(e,n,o,r)=>{if(n.classList.forEach((c,u,f)=>{c.startsWith("tox-")&&(f.remove(c),f.length===0&&n.removeAttribute("class"))}),n.nodeName!==o){const c=e.dom.rename(n,o);ry(e.dom,c,r),Ch(e,sy(o),c)}else ry(e.dom,n,r),Ch(e,sy(o),n)},jN=(e,n,o,r,c)=>{const u=qu(n);if(u&&n.nodeName===r&&!eO(c)&&!du(n))gw(e);else{JD(e,r,c);const f=Rp(e.selection.getRng()),b=u?[n,...o]:o,v=u&&du(n)?ZN:qU;Mt.each(b,x=>{v(e,x,r,c)}),e.selection.setRng(Mp(f))}},eO=e=>"list-style-type"in e,lJ=(e,n,o,r)=>{if(n!==e.getBody())if(n)if(n.nodeName===o&&!eO(r)&&!du(n))gw(e);else{const c=Rp(e.selection.getRng());du(n)&&n.classList.forEach((f,b,v)=>{f.startsWith("tox-")&&(v.remove(f),v.length===0&&n.removeAttribute("class"))}),ry(e.dom,n,r);const u=e.dom.rename(n,o);QD(e.dom,u),e.selection.setRng(Mp(c)),JD(e,o,r),Ch(e,sy(o),u)}else JD(e,o,r),Ch(e,sy(o),n)},nA=(e,n,o)=>{const r=dw(e);if(fw(e,r))return;const c=oU(e),u=en(o)?o:{};c.length>0?jN(e,r,c,n,u):lJ(e,r,n,u)},qN=(e,n,o,r)=>{let c=n.startContainer;const u=n.startOffset;if(tg(c)&&(o?u<c.data.length:u>0))return c;const f=e.schema.getNonEmptyElements();MN(c)&&(c=sf.getNode(c,u));const b=new Qs(c,r);o&&tU(e.dom,c)&&b.next();const v=o?b.next.bind(b):b.prev2.bind(b);for(;c=v();)if(c.nodeName==="LI"&&!c.hasChildNodes()||f[c.nodeName]||tg(c)&&c.data.length>0)return c;return null},tO=(e,n)=>{const o=n.childNodes;return o.length===1&&!qu(o[0])&&e.isBlock(o[0])},GU=e=>P.from(e).map(re.fromDom).filter(Ll).exists(n=>Cl(n)&&!be(["details"],Oo(n))),KU=(e,n)=>{tO(e,n)&&GU(n.firstChild)&&e.remove(n.firstChild,!0)},GN=(e,n,o)=>{let r;const c=tO(e,o)?o.firstChild:o;if(KU(e,n),!yh(e,n,!0))for(;r=n.firstChild;)c.appendChild(r)},nO=(e,n,o)=>{let r;const c=n.parentNode;if(!Hr(e,n)||!Hr(e,o))return;qu(o.lastChild)&&(r=o.lastChild),c===o.lastChild&&P0(c.previousSibling)&&e.remove(c.previousSibling);const u=o.lastChild;u&&P0(u)&&n.hasChildNodes()&&e.remove(u),yh(e,o,!0)&&vl(re.fromDom(o)),GN(e,n,o),r&&o.appendChild(r);const b=Lc(re.fromDom(o),re.fromDom(n))?e.getParents(n,qu,o):[];e.remove(n),me(b,v=>{yh(e,v)&&v!==e.getRoot()&&e.remove(v)})},YU=(e,n,o)=>{vl(re.fromDom(o)),nO(e.dom,n,o),e.selection.setCursorLocation(o,0)},XU=(e,n,o,r)=>{const c=e.dom;if(c.isEmpty(r))YU(e,o,r);else{const u=Rp(n);nO(c,o,r),e.selection.setRng(Mp(u))}},oO=(e,n,o,r)=>{const c=Rp(n);nO(e.dom,o,r);const u=Mp(c);e.selection.setRng(u)},sO=(e,n)=>{const o=e.dom,r=e.selection,c=r.getStart(),u=ZD(e,c),f=o.getParent(r.getStart(),"LI",u);if(f){const b=f.parentElement;if(b===e.getBody()&&yh(o,b))return!0;const v=uw(r.getRng()),x=o.getParent(qN(e,v,n,u),"LI",u),D=x&&(n?o.isChildOf(f,x):o.isChildOf(x,f));if(x&&x!==f&&!D)return e.undoManager.transact(()=>{n?XU(e,v,x,f):eU(f)?YD(e):oO(e,v,f,x)}),!0;if(D&&!n&&x!==f){const B=v.commonAncestorContainer.parentElement;return!B||o.isChildOf(x,B)?!1:(e.undoManager.transact(()=>{const N=Rp(v);GN(o,B,x),B.remove();const H=Mp(N);e.selection.setRng(H)}),!0)}else if(!x&&!n&&v.startOffset===0&&v.endOffset===0)return e.undoManager.transact(()=>{gw(e)}),!0}return!1},JU=(e,n,o)=>{const r=e.getParent(n.parentNode,e.isBlock,o);e.remove(n),r&&e.isEmpty(r)&&e.remove(r)},KN=(e,n)=>{const o=e.dom,r=e.selection.getStart(),c=ZD(e,r),u=o.getParent(r,o.isBlock,c);if(u&&o.isEmpty(u,void 0,{checkRootAsContent:!0})){const f=uw(e.selection.getRng()),b=qN(e,f,n,c),v=o.getParent(b,"LI",c);if(b&&v){const x=H=>be(["td","th","caption"],Oo(H)),D=H=>H.dom===c,B=Ls(re.fromDom(v),x,D),N=Ls(re.fromDom(f.startContainer),x,D);return Mn(B,N,Yo)?(e.undoManager.transact(()=>{const H=v.parentNode;JU(o,u,c),QD(o,H),e.selection.select(b,!0),e.selection.collapse(n)}),!0):!1}}return!1},QU=(e,n)=>sO(e,n)||KN(e,n),rO=e=>{const n=e.selection.getStart(),o=ZD(e,n),r=e.dom.getParent(n,"LI,DT,DD",o);return Fe(r)||WD(e).length>0},eW=e=>rO(e)?(e.undoManager.transact(()=>{let n=!0;const o=()=>n=!1;e.on("input",o),e.execCommand("Delete"),e.off("input",o),n&&e.dispatch("input"),uf(e.dom,e.getBody())}),!0):!1,aO=(e,n)=>{const o=e.selection;return!fw(e,o.getNode())&&(o.isCollapsed()?QU(e,n):eW(e))},tW=(e,n)=>({block:e,position:n}),nW=(e,n)=>({from:e,to:n}),cO=(e,n)=>{const o=re.fromDom(e),r=re.fromDom(n.container());return GE(o,r).map(c=>tW(c,n))},oW=e=>!(Lc(e.to.block,e.from.block)||Lc(e.from.block,e.to.block)),sW=e=>!Yo(e.from.block,e.to.block),YN=(e,n)=>Ls(n,c=>nl(c)||fi(c.dom),c=>Yo(c,e)).filter(Tr).getOr(e),iO=(e,n)=>{const o=re.fromDom(e);return Yo(YN(o,n.from.block),YN(o,n.to.block))},rW=e=>mr(e.from.block.dom)===!1&&mr(e.to.block.dom)===!1,aW=e=>{const n=o=>ap(o)||Ia(o.dom)||nm(o);return n(e.from.block)&&n(e.to.block)},cW=(e,n,o,r)=>xr(r.position.getNode())&&!gi(e,r.block)?Gf(!1,r.block.dom).bind(c=>c.isEqual(r.position)?Gc(o,n,c).bind(u=>cO(n,u)):P.some(r)).getOr(r):r,iW=(e,n,o,r)=>{const c=cO(n,nt.fromRangeStart(r)),u=c.bind(f=>Gc(o,n,f.position).bind(b=>cO(n,b).map(v=>cW(e,n,o,v))));return nn(c,u,nW).filter(f=>sW(f)&&iO(n,f)&&rW(f)&&aW(f)&&oW(f))},lW=(e,n,o,r)=>r.collapsed?iW(e,n,o,r):P.none(),XN=(e,n)=>{const o=wr(e);return To(o,r=>n.isBlock(Oo(r))).fold(bt(o),r=>o.slice(0,r))},Zp=(e,n)=>{const o=XN(e,n);return me(o,Ws),o},lO=(e,n,o)=>{const r=Xt(o,n);return rn(r.reverse(),c=>gi(e,c)).each(Ws)},uW=(e,n)=>tt(Na(n),o=>!gi(e,o)).length===0,dW=(e,n,o,r,c)=>{if(gi(r,o))return om(o),Yc(o.dom);uW(r,c)&&gi(r,n)&&Ga(c,re.fromTag("br"));const u=Ci(o.dom,nt.before(c.dom));return me(Zp(n,r),f=>{Ga(c,f)}),lO(r,e,n),u},mW=(e,n)=>e.isInline(Oo(n)),fW=(e,n,o,r)=>{if(gi(r,o)){if(gi(r,n)){const f=qe((b=>{const v=(x,D)=>Ta(x).fold(()=>D,B=>mW(r,B)?v(B,D.concat(ta(B))):D);return v(b,[])})(o),(b,v)=>(Oi(b,v),v),cp());vl(n),ds(n,f)}return Ws(o),Yc(n.dom)}const c=Vu(o.dom);return me(Zp(n,r),u=>{ds(o,u)}),lO(r,e,n),c},ay=(e,n)=>{const o=Xt(n,e);return P.from(o[o.length-1])},gW=(e,n)=>Lc(n,e)?ay(n,e):P.none(),oA=(e,n)=>{Gf(e,n.dom).bind(o=>P.from(o.getNode())).map(re.fromDom).filter(tm).each(Ws)},sA=(e,n,o,r)=>(oA(!0,n),oA(!1,o),gW(n,o).fold(Te(fW,e,n,o,r),Te(dW,e,n,o,r))),JN=(e,n,o,r,c)=>n?sA(e,r,o,c):sA(e,o,r,c),rA=(e,n)=>{const o=re.fromDom(e.getBody());return lW(e.schema,o.dom,n,e.selection.getRng()).map(c=>()=>{JN(o,n,c.from.block,c.to.block,e.schema).each(u=>{e.selection.setRng(u.toRange())})})},aA=(e,n,o)=>{const r=n.getRng();return nn(GE(e,re.fromDom(r.startContainer)),GE(e,re.fromDom(r.endContainer)),(c,u)=>Yo(c,u)?P.none():P.some(()=>{r.deleteContents(),JN(e,!0,c,u,o).each(f=>{n.setRng(f.toRange())})})).getOr(P.none())},QN=(e,n)=>{const o=re.fromDom(n),r=Te(Yo,e);return ku(o,nl,r).isSome()},hW=(e,n)=>QN(e,n.startContainer)||QN(e,n.endContainer),pW=(e,n)=>{const o=Ci(e.dom,nt.fromRangeStart(n)).isNone(),r=Kc(e.dom,nt.fromRangeEnd(n)).isNone();return!hW(e,n)&&o&&r},bW=e=>P.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),vW=e=>{const n=re.fromDom(e.getBody()),o=e.selection.getRng();return pW(n,o)?bW(e):aA(n,e.selection,e.schema)},hw=(e,n)=>e.selection.isCollapsed()?P.none():vW(e),wh=(e,n,o,r,c)=>P.from(n._selectionOverrides.showCaret(e,o,r,c)),yW=e=>{const n=e.ownerDocument.createRange();return n.selectNode(e),n},pw=(e,n)=>e.dispatch("BeforeObjectSelected",{target:n}).isDefaultPrevented()?P.none():P.some(yW(n)),CW=(e,n,o)=>{const r=oC(1,e.getBody(),n),c=nt.fromRangeStart(r),u=c.getNode();if(Sd(u))return wh(1,e,u,!c.isAtEnd(),!1);const f=c.getNode(!0);if(Sd(f))return wh(1,e,f,!1,!1);const b=x0(e.dom.getRoot(),c.getNode());return Sd(b)?wh(1,e,b,!1,o):P.none()},uO=(e,n,o)=>n.collapsed?CW(e,n,o).getOr(n):n,wW=e=>kp(e)||kC(e),SW=e=>Dp(e)||DC(e),xW=(e,n)=>{kt(n)&&n.data.length===0&&e.remove(n)},eP=(e,n,o,r,c,u)=>{wh(r,e,u.getNode(!c),c,!0).each(f=>{if(n.collapsed){const b=n.cloneRange();c?b.setEnd(f.startContainer,f.startOffset):b.setStart(f.endContainer,f.endOffset),b.deleteContents()}else n.deleteContents();e.selection.setRng(f)}),xW(e.dom,o)},EW=(e,n)=>{const o=e.selection.getRng();if(!kt(o.commonAncestorContainer))return P.none();const r=n?1:-1,c=Ad(e.getBody()),u=Te(jf,n?c.next:c.prev),f=n?wW:SW,b=Qm(r,e.getBody(),o),v=u(b),x=v&&Uu(n,v);if(!x||!Cp(b,x))return P.none();if(f(x))return P.some(()=>eP(e,o,b.getNode(),r,n,x));const D=u(x);return D&&f(D)&&Cp(x,D)?P.some(()=>eP(e,o,b.getNode(),r,n,D)):P.none()},dO=(e,n)=>EW(e,n),mO=(e,n)=>{const o=e.getBody();return n?Yc(o).filter(kp):Vu(o).filter(Dp)},fO=e=>{const n=e.selection.getRng();return!n.collapsed&&(mO(e,!0).exists(o=>o.isEqual(nt.fromRangeStart(n)))||mO(e,!1).exists(o=>o.isEqual(nt.fromRangeEnd(n))))},TW=e=>Fe(e)&&(nl(re.fromDom(e))||nm(re.fromDom(e))),mu=Za.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),AW=(e,n)=>{const o=n.getNode(!e),r=e?"after":"before";return Cn(o)&&o.getAttribute("data-mce-caret")===r},_W=(e,n,o,r,c)=>{const u=f=>c.isInline(f.nodeName.toLowerCase())&&!mm(o,r,e);return _v(!n,o).fold(()=>_v(n,r).fold(Ne,u),u)},tP=(e,n,o,r,c)=>{const u=c.getNode(!o);return GE(re.fromDom(n),re.fromDom(r.getNode())).map(f=>gi(e,f)?mu.remove(f.dom):mu.moveToElement(u)).orThunk(()=>P.some(mu.moveToElement(u)))},nP=(e,n,o,r)=>Gc(n,e,o).bind(c=>TW(c.getNode())||_W(e,n,o,c,r)?P.none():n&&mr(c.getNode())||!n&&mr(c.getNode(!0))?tP(r,e,n,o,c):n&&Dp(o)||!n&&kp(o)?P.some(mu.moveToPosition(c)):P.none()),kW=(e,n)=>vn(n)?P.none():e&&mr(n.nextSibling)?P.some(mu.moveToElement(n.nextSibling)):!e&&mr(n.previousSibling)?P.some(mu.moveToElement(n.previousSibling)):P.none(),gO=(e,n,o)=>o.fold(r=>P.some(mu.remove(r)),r=>P.some(mu.moveToElement(r)),r=>mm(n,r,e)?P.none():P.some(mu.moveToPosition(r))),DW=(e,n,o,r)=>AW(n,o)?kW(n,o.getNode(!n)).orThunk(()=>nP(e,n,o,r)):nP(e,n,o,r).bind(c=>gO(e,o,c)),OW=(e,n,o,r)=>{const c=oC(n?1:-1,e,o),u=nt.fromRangeStart(c),f=re.fromDom(e);return!n&&Dp(u)?P.some(mu.remove(u.getNode(!0))):n&&kp(u)?P.some(mu.remove(u.getNode())):!n&&kp(u)&&HE(f,u,r)?XM(f,u,r).map(b=>mu.remove(b.getNode())):n&&Dp(u)&&Dk(f,u,r)?zE(f,u,r).map(b=>mu.remove(b.getNode())):DW(e,n,u,r)},RW=(e,n)=>o=>(e._selectionOverrides.hideFakeCaret(),lh(e,n,re.fromDom(o)),!0),MW=(e,n)=>o=>{const r=n?nt.before(o):nt.after(o);return e.selection.setRng(r.toRange()),!0},BW=e=>n=>(e.selection.setRng(n.toRange()),!0),oP=(e,n)=>P.from(x0(e.getBody(),n)),FW=(e,n)=>{const o=e.selection.getNode();return oP(e,o).filter(mr).fold(()=>OW(e.getBody(),n,e.selection.getRng(),e.schema).map(r=>()=>r.fold(RW(e,n),MW(e,n),BW(e))),()=>P.some(Ct))},NW=e=>{me(ot(e,".mce-offscreen-selection"),Ws)},PW=(e,n)=>{const o=e.selection.getNode();return mr(o)&&!Xd(o)?oP(e,o.parentNode).filter(mr).fold(()=>P.some(()=>{NW(re.fromDom(e.getBody())),lh(e,n,re.fromDom(e.selection.getNode())),Hk(e)}),()=>P.some(Ct)):fO(e)?P.some(()=>{xB(e,e.selection.getRng(),re.fromDom(e.getBody()))}):P.none()},sP=e=>{const n=e.dom,o=e.selection,r=x0(e.getBody(),o.getNode());if(fi(r)&&n.isBlock(r)&&n.isEmpty(r)){const c=n.create("br",{"data-mce-bogus":"1"});n.setHTML(r,""),r.appendChild(c),o.setRng(nt.before(c).toRange())}return!0},hO=(e,n)=>e.selection.isCollapsed()?FW(e,n):PW(e,n),pO=(e,n)=>{var o;const r=e.dom,c=r.getParent(e.selection.getStart(),r.isBlock),u=r.getParent(e.selection.getEnd(),r.isBlock),f=e.getBody();if(((o=c==null?void 0:c.nodeName)===null||o===void 0?void 0:o.toLowerCase())==="div"&&c&&u&&c===f.firstChild&&u===f.lastChild&&!r.isEmpty(f)){const v=c.cloneNode(!1),x=()=>{if(n?CB(e):qE(e),f.firstChild!==c){const D=Rp(e.selection.getRng(),()=>document.createElement("span"));Array.from(f.childNodes).forEach(B=>v.appendChild(B)),f.appendChild(v),e.selection.setRng(Mp(D))}};return P.some(x)}return P.none()},$W=(e,n)=>{const o=nt.fromRangeStart(e.selection.getRng());return Gc(n,e.getBody(),o).filter(r=>n?t9(r):n9(r)).bind(r=>nC(n?0:-1,r)).map(r=>()=>e.selection.select(r))},bO=(e,n)=>e.selection.isCollapsed()?$W(e,n):P.none(),cy=kt,rP=e=>cy(e)&&e.data[0]===ya,aP=e=>cy(e)&&e.data[e.data.length-1]===ya,cP=e=>{var n;return((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(ya)},IW=e=>{var n;if(cy(e.previousSibling))return aP(e.previousSibling)||e.previousSibling.appendData(ya),e.previousSibling;if(cy(e))return rP(e)||e.insertData(0,ya),e;{const o=cP(e);return(n=e.parentNode)===null||n===void 0||n.insertBefore(o,e),o}},LW=e=>{var n,o;if(cy(e.nextSibling))return rP(e.nextSibling)||e.nextSibling.insertData(0,ya),e.nextSibling;if(cy(e))return aP(e)||e.appendData(ya),e;{const r=cP(e);return e.nextSibling?(n=e.parentNode)===null||n===void 0||n.insertBefore(r,e.nextSibling):(o=e.parentNode)===null||o===void 0||o.appendChild(r),r}},cA=(e,n)=>e?IW(n):LW(n),iP=Te(cA,!0),HW=Te(cA,!1),lP=(e,n)=>kt(e.container())?cA(n,e.container()):cA(n,e.getNode()),vO=(e,n)=>{const o=n.get();return o&&e.container()===o&&Es(o)},yO=(e,n)=>n.fold(o=>{lm(e.get());const r=iP(o);return e.set(r),P.some(nt(r,r.length-1))},o=>Yc(o).map(r=>{if(vO(r,e)){const c=e.get();return nt(c,1)}else{lm(e.get());const c=lP(r,!0);return e.set(c),nt(c,1)}}),o=>Vu(o).map(r=>{if(vO(r,e)){const c=e.get();return nt(c,c.length-1)}else{lm(e.get());const c=lP(r,!1);return e.set(c),nt(c,c.length-1)}}),o=>{lm(e.get());const r=HW(o);return e.set(r),P.some(nt(r,1))}),uP=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o].apply(null,n);if(r.isSome())return r}return P.none()},cl=Za.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),dP=(e,n)=>{const o=dm(n,e);return o||e},CO=(e,n,o)=>{const r=$k(o),c=dP(n,r.container());return uh(e,c,r).fold(()=>Kc(c,r).bind(Te(uh,e,c)).map(u=>cl.before(u)),P.none)},mP=(e,n)=>hm(e,n)===null,zW=(e,n,o)=>uh(e,n,o).filter(Te(mP,n)),bw=(e,n,o)=>{const r=Ik(o);return zW(e,n,r).bind(c=>Ci(c,r).isNone()?P.some(cl.start(c)):P.none())},uJ=(e,n,o)=>{const r=$k(o);return zW(e,n,r).bind(c=>Kc(c,r).isNone()?P.some(cl.end(c)):P.none())},dJ=(e,n,o)=>{const r=Ik(o),c=dP(n,r.container());return uh(e,c,r).fold(()=>Ci(c,r).bind(Te(uh,e,c)).map(u=>cl.after(u)),P.none)},VW=e=>!Pk(Gu(e)),Sh=(e,n,o)=>uP([CO,bw,uJ,dJ],[e,n,o]).filter(VW),Gu=e=>e.fold(Uo,Uo,Uo,Uo),iy=e=>e.fold(bt("before"),bt("start"),bt("end"),bt("after")),Ku=e=>e.fold(cl.before,cl.before,cl.after,cl.after),xh=e=>e.fold(cl.start,cl.start,cl.end,cl.end),wO=(e,n)=>iy(e)===iy(n)&&Gu(e)===Gu(n),fP=(e,n,o,r,c,u)=>nn(uh(n,o,r),uh(n,o,c),(f,b)=>f!==b&&bB(o,f,b)?cl.after(e?f:b):u).getOr(u),vw=(e,n)=>e.fold(ft,o=>!wO(o,n)),UW=(e,n,o,r,c)=>{const u=Uu(e,c);return Gc(e,o,u).map(Te(Uu,e)).fold(()=>r.map(Ku),v=>Sh(n,o,v).map(Te(fP,e,n,o,u,v)).filter(Te(vw,r))).filter(VW)},gP=(e,n)=>e?n.fold(k(P.some,cl.start),P.none,k(P.some,cl.after),P.none):n.fold(P.none,k(P.some,cl.before),P.none,k(P.some,cl.end)),mJ=(e,n,o,r)=>{const c=Uu(e,r),u=Sh(n,o,c);return Sh(n,o,c).bind(Te(gP,e)).orThunk(()=>UW(e,n,o,u,r))},WW=e=>he(e.selection.getSel().modify),ly=(e,n,o)=>{const r=e?1:-1;return n.setRng(nt(o.container(),o.offset()+r).toRange()),n.getSel().modify("move",e?"forward":"backward","word"),!0},hP=(e,n)=>{const o=n.selection.getRng(),r=e?nt.fromRangeEnd(o):nt.fromRangeStart(o);return WW(n)?e&&jb(r)?ly(!0,n.selection,r):!e&&N1(r)?ly(!1,n.selection,r):!1:!1};var vr;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(vr||(vr={}));const iA=(e,n)=>e===-1?wo(n):n,ZW=(e,n,o)=>e===1?n.next(o):n.prev(o),uy=(e,n,o,r)=>xr(r.getNode(n===1))?vr.Br:mm(o,r)===!1?vr.Block:vr.Wrap,jp=(e,n,o,r)=>{const c=Ad(o);let u=r;const f=[];for(;u;){const b=ZW(n,c,u);if(!b)break;if(xr(b.getNode(!1)))return n===1?{positions:iA(n,f).concat([b]),breakType:vr.Br,breakAt:P.some(b)}:{positions:iA(n,f),breakType:vr.Br,breakAt:P.some(b)};if(!b.isVisible()){u=b;continue}if(e(u,b)){const v=uy(o,n,u,b);return{positions:iA(n,f),breakType:v,breakAt:P.some(b)}}f.push(b),u=b}return{positions:iA(n,f),breakType:vr.Eol,breakAt:P.none()}},qp=(e,n,o,r)=>n(o,r).breakAt.map(c=>{const u=n(o,c).positions;return e===-1?u.concat(c):[c].concat(u)}).getOr([]),SO=(e,n)=>st(e,(o,r)=>o.fold(()=>P.some(r),c=>nn(uo(c.getClientRects()),uo(r.getClientRects()),(u,f)=>{const b=Math.abs(n-u.left);return Math.abs(n-f.left)<=b?r:c}).or(o)),P.none()),lA=(e,n)=>uo(n.getClientRects()).bind(o=>SO(e,o.left)),V0=Te(jp,nt.isAbove,-1),U0=Te(jp,nt.isBelow,1),xO=Te(qp,-1,V0),EO=Te(qp,1,U0),TO=(e,n)=>V0(e,n).breakAt.isNone(),AO=(e,n)=>U0(e,n).breakAt.isNone(),_O=e=>Yc(e).map(n=>[n].concat(U0(e,n).positions)).getOr([]),jW=e=>Vu(e).map(n=>V0(e,n).positions.concat(n)).getOr([]),pP=(e,n)=>lA(xO(e,n),n),bP=(e,n)=>lA(EO(e,n),n),qW=mr,vP=(e,n)=>Math.abs(e.left-n),uA=(e,n)=>Math.abs(e.right-n),yP=e=>os(e,"node"),CP=(e,n)=>dl(e,(o,r)=>{const c=Math.min(vP(o,n),uA(o,n)),u=Math.min(vP(r,n),uA(r,n));return u===c&&yP(r)&&qW(r.node)||u<c?r:o}),GW=e=>{const n=o=>Oe(o,r=>{const c=Fi(r);return c.node=e,c});if(Cn(e))return n(e.getClientRects());if(kt(e)){const o=e.ownerDocument.createRange();return o.setStart(e,0),o.setEnd(e,e.data.length),n(o.getClientRects())}else return[]},W0=e=>eo(e,GW);var Gp;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(Gp||(Gp={}));const KW=(e,n,o,r)=>{let c=r;for(;c=l0(c,e,Yb,n);)if(o(c))return},kO=(e,n,o,r,c,u)=>{let f=0;const b=[],v=B=>{let N=W0([B]);e===Gp.Up&&(N=N.reverse());for(let H=0;H<N.length;H++){const te=N[H];if(!o(te,x)){if(b.length>0&&n(te,U(b))&&f++,te.line=f,c(te))return!0;b.push(te)}}return!1},x=U(u.getClientRects());if(!x)return b;const D=u.getNode();return D&&(v(D),KW(e,r,v,D)),b},YW=(e,n)=>n.line>e,wP=(e,n)=>n.line===e,XW=Te(kO,Gp.Up,zf,Vg),SP=Te(kO,Gp.Down,Vg,zf),DO=e=>U(e.getClientRects()),xP=(e,n,o,r)=>{const c=Ad(n);let u,f,b,v;const x=[];let D=0;e===Gp.Down?(u=c.next,f=Vg,b=zf,v=nt.after(r)):(u=c.prev,f=zf,b=Vg,v=nt.before(r));const B=DO(v);do{if(!v.isVisible())continue;const N=DO(v);if(b(N,B))continue;x.length>0&&f(N,U(x))&&D++;const H=Fi(N);if(H.position=v,H.line=D,o(H))return x;x.push(H)}while(v=u(v));return x},OO=e=>n=>YW(e,n),dA=e=>n=>wP(e,n),mf=(e,n)=>{e.selection.setRng(n),AC(e,e.selection.getRng())},RO=(e,n,o)=>P.some(uO(e,n,o)),EP=(e,n,o,r,c,u)=>{const f=n===1,b=Ad(e.getBody()),v=Te(jf,f?b.next:b.prev),x=f?r:c;if(!o.collapsed){const te=Vf(o);if(u(te))return wh(n,e,te,n===-1,!1);if(fO(e)){const Q=o.cloneRange();return Q.collapse(n===-1),P.from(Q)}}const D=Qm(n,e.getBody(),o);if(x(D))return pw(e,D.getNode(!f));let B=v(D);const N=ip(o);if(B)B=Uu(f,B);else return N?P.some(o):P.none();if(x(B))return wh(n,e,B.getNode(!f),f,!1);const H=v(B);return H&&x(H)&&Cp(B,H)?wh(n,e,H.getNode(!f),f,!1):N?RO(e,B.toRange(),!1):P.none()},TP=(e,n,o,r,c,u)=>{const f=Qm(n,e.getBody(),o),b=U(f.getClientRects()),v=n===Gp.Down,x=e.getBody();if(!b)return P.none();if(fO(e)){const Y=v?nt.fromRangeEnd(o):nt.fromRangeStart(o);return(v?bP:pP)(x,Y).orThunk(()=>P.from(Y)).map(_e=>_e.toRange())}const B=(v?SP:XW)(x,OO(1),f),N=tt(B,dA(1)),H=b.left,te=CP(N,H);if(te&&u(te.node)){const Y=Math.abs(H-te.left),Ae=Math.abs(H-te.right);return wh(n,e,te.node,Y<Ae,!1)}let Q;if(r(f)?Q=f.getNode():c(f)?Q=f.getNode(!0):Q=Vf(o),Q){const Y=xP(n,x,OO(1),Q);let Ae=CP(tt(Y,dA(1)),H);if(Ae||(Ae=U(tt(Y,dA(0))),Ae))return RO(e,Ae.position.toRange(),!1)}return N.length===0?yw(e,v).filter(v?c:r).map(Y=>uO(e,Y.toRange(),!1)):P.none()},yw=(e,n)=>{const o=e.selection.getRng(),r=n?nt.fromRangeEnd(o):nt.fromRangeStart(o),c=cE(r.container(),e.getBody());if(n){const u=U0(c,r);return ts(u.positions)}else{const u=V0(c,r);return uo(u.positions)}},dy=(e,n,o)=>yw(e,n).filter(o).exists(r=>(e.selection.setRng(r.toRange()),!0)),Kp=(e,n)=>{const o=e.dom.createRng();o.setStart(n.container(),n.offset()),o.setEnd(n.container(),n.offset()),e.selection.setRng(o)},mA=(e,n)=>{e?n.setAttribute("data-mce-selected","inline-boundary"):n.removeAttribute("data-mce-selected")},MO=(e,n,o)=>yO(n,o).map(r=>(Kp(e,r),o)),AP=(e,n,o)=>{const r=nt.fromRangeStart(e);if(e.collapsed)return r;{const c=nt.fromRangeEnd(e);return o?Ci(n,c).getOr(c):Kc(n,r).getOr(r)}},fA=(e,n,o)=>{const r=e.getBody(),c=AP(e.selection.getRng(),r,o),u=Te(Jf,e);return mJ(o,u,r,c).bind(b=>MO(e,n,b))},JW=(e,n,o)=>{const r=Oe(ot(re.fromDom(n.getRoot()),'*[data-mce-selected="inline-boundary"]'),f=>f.dom),c=tt(r,e),u=tt(o,e);me(mt(c,u),Te(mA,!1)),me(mt(u,c),Te(mA,!0))},QW=(e,n)=>{const o=n.get();if(e.selection.isCollapsed()&&!e.composing&&o){const r=nt.fromRangeStart(e.selection.getRng());nt.isTextPosition(r)&&!vB(r)&&(Kp(e,Ev(o,r)),n.set(null))}},Z0=(e,n,o,r)=>{if(n.selection.isCollapsed()){const c=tt(r,e);me(c,u=>{const f=nt.fromRangeStart(n.selection.getRng());Sh(e,n.getBody(),f).bind(b=>MO(n,o,b))})}},gA=(e,n,o)=>im(e)?fA(e,n,o).isSome():!1,BO=(e,n,o)=>im(n)?hP(e,n):!1,Cw=e=>{const n=gn(null),o=Te(Jf,e);return e.on("NodeChange",r=>{im(e)&&(JW(o,e.dom,r.parents),QW(e,n),Z0(o,e,n,r.parents))}),n},_P=Te(BO,!0),FO=Te(BO,!1),ww=(e,n,o)=>{if(im(e)){const r=yw(e,n).getOrThunk(()=>{const c=e.selection.getRng();return n?nt.fromRangeEnd(c):nt.fromRangeStart(c)});return Sh(Te(Jf,e),e.getBody(),r).exists(c=>{const u=Ku(c);return yO(o,u).exists(f=>(Kp(e,f),!0))})}else return!1},kP=(e,n)=>{const o=document.createRange();return o.setStart(e.container(),e.offset()),o.setEnd(n.container(),n.offset()),o},eZ=e=>nn(Yc(e),Vu(e),(n,o)=>{const r=Uu(!0,n),c=Uu(!1,o);return Kc(e,r).forall(u=>u.isEqual(c))}).getOr(!0),NO=(e,n)=>o=>yO(n,o).map(r=>()=>Kp(e,r)),DP=(e,n,o,r)=>{const c=e.getBody(),u=Te(Jf,e);e.undoManager.ignore(()=>{e.selection.setRng(kP(o,r)),qE(e),Sh(u,c,nt.fromRangeStart(e.selection.getRng())).map(xh).bind(NO(e,n)).each(qt)}),e.nodeChanged()},tZ=(e,n)=>{const o=dm(n,e);return o||e},nZ=(e,n,o,r)=>{const c=tZ(e.getBody(),r.container()),u=Te(Jf,e),f=Sh(u,c,r);return f.bind(v=>o?v.fold(bt(P.some(xh(v))),P.none,bt(P.some(Ku(v))),P.none):v.fold(P.none,bt(P.some(Ku(v))),P.none,bt(P.some(xh(v))))).map(NO(e,n)).getOrThunk(()=>{const v=sh(o,c,r),x=v.bind(D=>Sh(u,c,D));return nn(f,x,()=>uh(u,c,r).bind(D=>eZ(D)?P.some(()=>{lh(e,o,re.fromDom(D))}):P.none())).getOrThunk(()=>x.bind(()=>v.map(D=>()=>{o?DP(e,n,r,D):DP(e,n,D,r)})))})},PO=(e,n,o)=>{if(e.selection.isCollapsed()&&im(e)){const r=nt.fromRangeStart(e.selection.getRng());return nZ(e,n,o,r)}return P.none()},$O=e=>Vd(e)>1,OP=(e,n)=>{const o=re.fromDom(e.getBody()),r=re.fromDom(e.selection.getStart()),c=Xt(r,o);return To(c,n).fold(bt(c),u=>c.slice(0,u))},RP=e=>Vd(e)===1,oZ=e=>OP(e,n=>e.schema.isBlock(Oo(n))||$O(n)),sZ=e=>OP(e,n=>e.schema.isBlock(Oo(n))),MP=(e,n)=>{const o=Te(a3,e);return eo(n,r=>o(r)?[r.dom]:[])},IO=e=>{const n=sZ(e);return MP(e,n)},rZ=(e,n,o,r)=>{const c=MP(n,r);if(c.length===0)lh(n,e,o);else{const u=jB(o.dom,c);n.selection.setRng(u.toRange())}},aZ=(e,n)=>{const o=tt(oZ(e),RP);return ts(o).bind(r=>{const c=nt.fromRangeStart(e.selection.getRng());return wB(n,c,r.dom)&&!ho(r)?P.some(()=>rZ(n,e,r,o)):P.none()})},cZ=(e,n)=>{const o=n.parentElement;return xr(n)&&!K(o)&&e.dom.isEmpty(o)},iZ=e=>ho(re.fromDom(e)),BP=(e,n)=>{const o=e.selection.getStart(),r=cZ(e,o)||iZ(o)?jB(o,n):Jo(e.selection.getRng(),n);e.selection.setRng(r.toRange())},FP=(e,n)=>{const o=mt(n,IO(e));o.length>0&&BP(e,o)},NP=e=>kt(e.startContainer),PP=e=>e.startOffset===0&&NP(e),lZ=(e,n)=>{const o=n.startContainer.parentElement;return!K(o)&&a3(e,re.fromDom(o))},hA=e=>{const n=e.startContainer.parentNode,o=e.endContainer.parentNode;return!K(n)&&!K(o)&&n.isEqualNode(o)},Li=e=>{const n=e.endContainer;return e.endOffset===(kt(n)?n.length:n.childNodes.length)},uZ=e=>hA(e)&&Li(e),pA=e=>!e.endContainer.isEqualNode(e.commonAncestorContainer),j0=e=>uZ(e)||pA(e),$P=e=>{const n=e.selection.getRng();return PP(n)&&lZ(e,n)&&j0(n)},fu=e=>{if($P(e)){const n=IO(e);return P.some(()=>{qE(e),FP(e,n)})}else return P.none()},Eh=(e,n)=>e.selection.isCollapsed()?aZ(e,n):fu(e),IP=(e,n)=>Zt(e,o=>Pi(o.dom),o=>n.isBlock(Oo(o))),dZ=e=>IP(re.fromDom(e.selection.getStart()),e.schema),LP=e=>{const n=e.selection.getRng();return n.collapsed&&(NP(n)||e.dom.isEmpty(n.startContainer))&&!dZ(e)},Sw=e=>(LP(e)&&BP(e,[]),!0),bA=(e,n,o)=>Fe(o)?P.some(()=>{e._selectionOverrides.hideFakeCaret(),lh(e,n,re.fromDom(o))}):P.none(),LO=(e,n)=>{const o=n?kC:DC,c=Qm(n?1:-1,e.getBody(),e.selection.getRng());return o(c)?bA(e,n,c.getNode(!n)):P.from(Uu(n,c)).filter(u=>o(u)&&Cp(c,u)).bind(u=>bA(e,n,u.getNode(!n)))},HO=(e,n)=>{const o=e.selection.getNode();return Ru(o)?bA(e,n,o):P.none()},zO=(e,n)=>e.selection.isCollapsed()?LO(e,n):HO(e,n),mZ=e=>Ls(e,n=>fi(n.dom)||mr(n.dom)).exists(n=>fi(n.dom)),vA=e=>Qu(e??"").getOr(0),_m=(e,n)=>{const o=e||tx(n)?"margin":"padding",r=Pr(n,"direction")==="rtl"?"-right":"-left";return o+r},VO=(e,n,o,r,c,u)=>{const f=_m(o,re.fromDom(u)),b=vA(e.getStyle(u,f));if(n==="outdent"){const v=Math.max(0,b-r);e.setStyle(u,f,v?v+c:"")}else{const v=b+r+c;e.setStyle(u,f,v)}},fZ=(e,n)=>zs(n,o=>{const r=_m(Y1(e),o),c=Ur(o,r).map(vA).getOr(0);return e.dom.getContentEditable(o.dom)!=="false"&&c>0}),xw=e=>{const n=ZO(e);return!e.mode.isReadOnly()&&(n.length>1||fZ(e,n))},UO=e=>!e.mode.isReadOnly()&&MU(e),WO=e=>Vb(e)||nm(e),HP=e=>Hc(e).exists(WO),ZO=e=>tt(Zd(e.selection.getSelectedBlocks()),n=>!WO(n)&&!HP(n)&&mZ(n)),zP=(e,n)=>{var o,r;if(e.mode.isReadOnly())return;const{dom:c}=e,u=z2(e),f=(r=(o=/[a-z%]+$/i.exec(u))===null||o===void 0?void 0:o[0])!==null&&r!==void 0?r:"px",b=vA(u),v=Y1(e);me(ZO(e),x=>{VO(c,n,v,b,f,x.dom)}),n==="indent"?zN(e):YD(e)},gZ=e=>zP(e,"indent"),VP=e=>zP(e,"outdent"),UP=e=>{if(e.selection.isCollapsed()&&xw(e)){const n=e.dom,o=e.selection.getRng(),r=nt.fromRangeStart(o),c=n.getParent(o.startContainer,n.isBlock);if(c!==null&&$E(re.fromDom(c),r,e.schema))return P.some(()=>VP(e))}return P.none()},hZ=(e,n)=>{const o=eT(e.selection.getRng());return G4(o)?P.some(()=>lh(e,n,re.fromDom(e.selection.getNode()))):P.none()},yA=(e,n)=>e.selection.isCollapsed()?P.none():hZ(e,n),WP=(e,n,o)=>ks([UP,hO,dO,(r,c)=>PO(r,n,c),rA,Jk,bO,zO,hw,Eh,pO,yA],r=>r(e,o)).filter(r=>e.selection.isEditable()),jO=(e,n)=>{WP(e,n,!1).fold(()=>{e.selection.isEditable()&&(qE(e),Hk(e))},qt),rO(e)&&uf(e.dom,e.getBody())},pZ=(e,n)=>{WP(e,n,!0).fold(()=>{e.selection.isEditable()&&CB(e)},qt),rO(e)&&uf(e.dom,e.getBody())},ZP=(e,n)=>{e.addCommand("delete",()=>{jO(e,n)}),e.addCommand("forwardDelete",()=>{pZ(e,n)})},CA=5,qO=400,GO=e=>e.touches===void 0||e.touches.length!==1?P.none():P.some(e.touches[0]),KO=(e,n)=>{const o=Math.abs(e.clientX-n.x),r=Math.abs(e.clientY-n.y);return o>CA||r>CA},jP=e=>{const n=rs(),o=gn(!1),r=Pc(c=>{e.dispatch("longpress",{...c,type:"longpress"}),o.set(!0)},qO);e.on("touchstart",c=>{GO(c).each(u=>{r.cancel();const f={x:u.clientX,y:u.clientY,target:c.target};r.throttle(c),o.set(!1),n.set(f)})},!0),e.on("touchmove",c=>{r.cancel(),GO(c).each(u=>{n.on(f=>{KO(u,f)&&(n.clear(),o.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",c=>{r.cancel(),c.type!=="touchcancel"&&n.get().filter(u=>u.target.isEqualNode(c.target)).each(()=>{o.get()?c.preventDefault():e.dispatch("tap",{...c,type:"tap"})})},!0)},wA=(e,n)=>to(e,n.nodeName),YO=(e,n)=>kt(n)?!0:Cn(n)?!wA(e.getBlockElements(),n)&&!rl(n)&&!yt(e,n)&&!_g(n)&&!wb(n):!1,qP=(e,n,o)=>ke(GM(re.fromDom(o),re.fromDom(n)),r=>wA(e,r.dom)),GP=(e,n)=>{if(kt(n)){if(n.data.length===0)return!0;if(/^\s+$/.test(n.data))return!n.nextSibling||wA(e,n.nextSibling)||_g(n.nextSibling)}return!1},SA=e=>e.dom.create(pc(e),gp(e)),bZ=e=>{const n=e.dom,o=e.selection,r=e.schema,c=r.getBlockElements(),u=o.getStart(),f=e.getBody();let b,v,x=null;const D=pc(e);if(!u||!Cn(u))return;const B=f.nodeName.toLowerCase();if(!r.isValidChild(B,D.toLowerCase())||qP(c,f,u))return;if(f.firstChild===f.lastChild&&xr(f.firstChild)){b=SA(e),b.appendChild(cp().dom),f.replaceChild(b,f.firstChild),e.selection.setCursorLocation(b,0),e.nodeChanged();return}let N=f.firstChild;for(;N;)if(Cn(N)&&pi(r,N),YO(r,N)){if(GP(c,N)){v=N,N=N.nextSibling,n.remove(v);continue}if(!b){if(!x&&e.hasFocus()&&(x=Rp(e.selection.getRng(),()=>document.createElement("span"))),!N.parentNode){N=null;break}b=SA(e),f.insertBefore(b,N)}v=N,N=N.nextSibling,b.appendChild(v)}else b=null,N=N.nextSibling;x&&(e.selection.setRng(Mp(x)),e.nodeChanged())},KP=(e,n,o)=>{const r=re.fromDom(SA(e)),c=cp();ds(r,c),o(n,r);const u=document.createRange();return u.setStartBefore(c.dom),u.setEndBefore(c.dom),u},xA=e=>{e.on("NodeChange",()=>bZ(e))},YP=e=>n=>(" "+n.attr("class")+" ").indexOf(e)!==-1,Ew=(e,n,o)=>function(r){const c=arguments,u=c[c.length-2],f=u>0?n.charAt(u-1):"";if(f==='"')return r;if(f===">"){const b=n.lastIndexOf("<",u);if(b!==-1&&n.substring(b,u).indexOf('contenteditable="false"')!==-1)return r}return'<span class="'+o+'" data-mce-content="'+e.dom.encode(c[0])+'">'+e.dom.encode(typeof c[1]=="string"?c[1]:c[0])+"</span>"},vZ=(e,n,o)=>{let r=n.length,c=o.content;if(o.format!=="raw"){for(;r--;)c=c.replace(n[r],Ew(e,c,Y2(e)));o.content=c}},yZ=(e,n)=>zs(e,o=>{const r=n.match(o);return r!==null&&r[0].length===n.length}),CZ=e=>{const n="contenteditable",o=" "+Mt.trim(qx(e))+" ",r=" "+Mt.trim(Y2(e))+" ",c=YP(o),u=YP(r),f=Gx(e);f.length>0&&e.on("BeforeSetContent",b=>{vZ(e,f,b)}),e.parser.addAttributeFilter("class",b=>{let v=b.length;for(;v--;){const x=b[v];c(x)?x.attr(n,"true"):u(x)&&x.attr(n,"false")}}),e.serializer.addAttributeFilter(n,b=>{let v=b.length;for(;v--;){const x=b[v];if(!c(x)&&!u(x))continue;const D=x.attr("data-mce-content");f.length>0&&D?yZ(f,D)?(x.name="#text",x.type=3,x.raw=!0,x.value=D):x.remove():x.attr(n,null)}})},wZ=e=>Du(re.fromDom(e.getBody()),"*[data-mce-caret]").map(n=>n.dom).getOrNull(),XO=(e,n)=>{n.hasAttribute("data-mce-caret")&&(Al(n),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(n))},XP=(e,n)=>{const o=wZ(e);if(o){if(n.type==="compositionstart"){n.preventDefault(),n.stopPropagation(),XO(e,o);return}F1(o)&&(XO(e,o),e.undoManager.add())}},SZ=e=>{e.on("keyup compositionstart",Te(XP,e))},JP=mr,xZ=(e,n,o)=>EP(n,e,o,kp,Dp,JP),EZ=(e,n,o)=>TP(n,e,o,u=>kp(u)||qM(u),u=>Dp(u)||_k(u),JP),TZ=e=>{const n=e.dom.create(pc(e));return n.innerHTML='<br data-mce-bogus="1">',n},JO=(e,n,o)=>{const r=Ad(e.getBody()),c=Te(jf,n===1?r.next:r.prev);if(o.collapsed){const u=e.dom.getParent(o.startContainer,"PRE");if(!u)return;if(!c(nt.fromRangeStart(o))){const b=re.fromDom(TZ(e));n===1?Ki(re.fromDom(u),b):Ga(re.fromDom(u),b),e.selection.select(b.dom,!0),e.selection.collapse()}}},fJ=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return xZ(o,e,r).orThunk(()=>(JO(e,o,r),P.none()))},AZ=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return EZ(o,e,r).orThunk(()=>(JO(e,o,r),P.none()))},_Z=(e,n)=>{const o=n?e.getEnd(!0):e.getStart(!0);return Pk(o)?!n:n},QP=(e,n)=>fJ(e,_Z(e.selection,n)).exists(o=>(mf(e,o),!0)),e8=(e,n)=>AZ(e,n).exists(o=>(mf(e,o),!0)),t8=(e,n)=>dy(e,n,n?Dp:kp),EA=(e,n)=>mO(e,!n).map(o=>{const r=o.toRange(),c=e.selection.getRng();return n?r.setStart(c.startContainer,c.startOffset):r.setEnd(c.endContainer,c.endOffset),r}).exists(o=>(mf(e,o),!0)),n8=(e,n)=>{const o=f=>Yo(f,n),r=f=>fi(f.dom),c=re.fromDom(e.container());return Ls(c,r,o).filter(f=>!o(f))},o8=(e,n,o)=>(o?bP:pP)(e.getBody(),n).map(c=>c.toRange()),kZ=(e,n)=>{const o=nt.fromRangeStart(e.selection.getRng()),r=nt.fromRangeEnd(e.selection.getRng()),c=re.fromDom(e.getBody());return Lo(nn(n8(o,c),n8(r,c),(f,b)=>Yo(f,b)?P.some(f):P.none())).fold(Ne,f=>n&&AO(f.dom,r)||!n&&TO(f.dom,o)?o8(e,n?r:o,n).exists(b=>(mf(e,b),!0)):!1)},s8=(e,n)=>kZ(e,n),DZ=e=>be(["figcaption"],Oo(e)),OZ=(e,n,o)=>{const r=Te(Yo,n);return Ls(re.fromDom(e.container()),c=>o.isBlock(Oo(c)),r).filter(DZ)},RZ=(e,n,o)=>n?AO(e.dom,o):TO(e.dom,o),MZ=(e,n)=>{const o=re.fromDom(e.getBody()),r=nt.fromRangeStart(e.selection.getRng());return OZ(r,o,e.schema).exists(()=>{if(RZ(o,n,r)){const u=KP(e,o,n?ds:Eu);return e.selection.setRng(u),!0}else return!1})},r8=(e,n)=>e.selection.isCollapsed()?MZ(e,n):!1,BZ=(e,n,o)=>{const r=e.selection.getRng(),c=nt.fromRangeStart(r);return e.getBody().firstChild===n&&TO(o,c)?(e.execCommand("InsertNewBlockBefore"),!0):!1},FZ=(e,n)=>{const o=e.selection.getRng(),r=nt.fromRangeStart(o);return e.getBody().lastChild===n&&AO(n,r)?(e.execCommand("InsertNewBlockAfter"),!0):!1},NZ=(e,n)=>n?P.from(e.dom.getParent(e.selection.getNode(),"details")).map(o=>FZ(e,o)).getOr(!1):P.from(e.dom.getParent(e.selection.getNode(),"summary")).bind(o=>P.from(e.dom.getParent(o,"details")).map(r=>BZ(e,r,o))).getOr(!1),QO=(e,n)=>NZ(e,n),a8={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},PZ=e=>Oe(e,n=>({...a8,...n})),$Z=e=>Oe(e,n=>({...a8,...n})),Tw=(e,n)=>n.keyCode===e.keyCode&&n.shiftKey===e.shiftKey&&n.altKey===e.altKey&&n.ctrlKey===e.ctrlKey&&n.metaKey===e.metaKey,IZ=(e,n)=>eo(PZ(e),o=>Tw(o,n)?[o]:[]),LZ=(e,n)=>eo($Z(e),o=>Tw(o,n)?[o]:[]),oo=(e,...n)=>()=>e.apply(null,n),q0=(e,n)=>rn(IZ(e,n),o=>o.action()),c8=(e,n)=>ks(LZ(e,n),o=>o.action()),i8=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return EP(e,o,r,kC,DC,Ru).exists(c=>(mf(e,c),!0))},HZ=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return TP(e,o,r,kC,DC,Ru).exists(c=>(mf(e,c),!0))},l8=(e,n)=>dy(e,n,n?DC:kC),zZ=(e,n)=>u8(e,n,ft),u8=(e,n,o)=>eo(wr(e),r=>ki(r,n)?o(r)?[r]:[]:u8(r,n,o)),Aw=(e,n,o=Ne)=>{if(o(n))return P.none();if(be(e,Oo(n)))return P.some(n);const r=c=>ki(c,"table")||o(c);return Wr(n,e.join(","),r)},VZ=(e,n)=>Aw(["td","th"],e,n),UZ=e=>zZ(e,"th,td"),d8=(e,n)=>dc(e,"table",n),eR=Za.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),oi={...eR,none:e=>eR.none(e)},TA=(e,n,o,r,c=ft)=>{const u=r===1;if(!u&&o<=0)return oi.first(e[0]);if(u&&o>=e.length-1)return oi.last(e[e.length-1]);{const f=o+r,b=e[f];return c(b)?oi.middle(n,b):TA(e,n,f,r,c)}},my=(e,n)=>d8(e,n).bind(o=>{const r=UZ(o);return To(r,u=>Yo(e,u)).map(u=>({index:u,all:r}))}),Yp=(e,n,o)=>my(e,o).fold(()=>oi.none(e),c=>TA(c.all,e,c.index,1,n)),ng=(e,n,o)=>my(e,o).fold(()=>oi.none(),c=>TA(c.all,e,c.index,-1,n));var _w=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],tR=()=>{const e=x=>re.fromDom(x.dom.cloneNode(!1)),n=x=>hl(x).dom,o=x=>Tr(x)?Oo(x)==="body"?!0:be(_w,Oo(x)):!1,r=x=>Tr(x)?be(["br","img","hr","input"],Oo(x)):!1,c=x=>Tr(x)&&nr(x,"contenteditable")==="false",u=(x,D)=>x.dom.compareDocumentPosition(D.dom),f=(x,D)=>{const B=Ho(x);Ka(D,B)},b=x=>{const D=Oo(x);return be(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],D)},v=x=>Tr(x)?Xi(x,"lang"):P.none();return{up:bt({selector:Wr,closest:dc,predicate:ku,all:ic}),down:bt({selector:ot,predicate:ee}),styles:bt({get:Pr,getRaw:Ur,set:lc,remove:Lh}),attrs:bt({get:nr,set:Cr,remove:Qr,copyTo:f}),insert:bt({before:Ga,after:Ki,afterAll:yg,append:ds,appendAll:Yi,prepend:Eu,wrap:Oi}),remove:bt({unwrap:li,remove:Ws}),create:bt({nu:re.fromTag,clone:e,text:re.fromText}),query:bt({comparePosition:u,prevSibling:qi,nextSibling:zc}),property:bt({children:wr,name:Oo,parent:Hc,document:n,isText:xs,isComment:Il,isElement:Tr,isSpecial:b,getLanguage:v,getText:uc,setText:v1,isBoundary:o,isEmptyTag:r,isNonEditable:c}),eq:Yo,is:Cf}};const kw=(e,n)=>({element:e,offset:n}),nR=(e,n)=>{if(e.property().isText(n))return kw(n,e.property().getText(n).length);{const o=e.property().children(n);return o.length>0?nR(e,o[o.length-1]):kw(n,o.length)}},oR=(e,n,o)=>{const r=e.property().children(n);return r.length>0&&o<r.length?oR(e,r[o],0):r.length>0&&e.property().isElement(n)&&r.length===o?nR(e,r[r.length-1]):kw(n,o)},WZ=oR,ZZ=tR(),m8=(e,n)=>WZ(ZZ,e,n),sR=jo("image"),f8=e=>{const n=e;return P.from(n[sR])},jZ=(e,n)=>{const o=e;o[sR]=n},g8=jo("event"),gJ=e=>{const n=e;return P.from(n[g8])},rR=e=>n=>{const o=n;o[g8]=e},km=(e,n)=>rR(n)(e),h8=rR(0),qZ=rR(2),K0=rR(1),KZ=(e=>n=>{const o=n;return P.from(o[g8]).exists(r=>r===e)})(0),AA=()=>Object.freeze({length:0,item:e=>null}),Dw=jo("mode"),p8=e=>{const n=e;return P.from(n[Dw])},Ow=e=>n=>{const o=n;o[Dw]=e},b8=(e,n)=>Ow(n)(e),aR=Ow(0),_A=Ow(2),v8=Ow(1),kA=e=>n=>{const o=n;return P.from(o[Dw]).exists(r=>r===e)},fy=kA(0),y8=kA(1),YZ=(e,n)=>({...n,get length(){return n.length},add:(o,r)=>{if(fy(e))if(ie(o)){if(!Kn(r))return n.add(o,r)}else return n.add(o);return null},remove:o=>{fy(e)&&n.remove(o)},clear:()=>{fy(e)&&n.clear()}}),XZ=["none","copy","link","move"],JZ=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],cR=()=>{const e=new window.DataTransfer;let n="move",o="all";const r={get dropEffect(){return n},set dropEffect(c){be(XZ,c)&&(n=c)},get effectAllowed(){return o},set effectAllowed(c){KZ(r)&&be(JZ,c)&&(o=c)},get items(){return YZ(r,e.items)},get files(){return y8(r)?AA():e.files},get types(){return e.types},setDragImage:(c,u,f)=>{fy(r)&&(jZ(r,{image:c,x:u,y:f}),e.setDragImage(c,u,f))},getData:c=>y8(r)?"":e.getData(c),setData:(c,u)=>{fy(r)&&e.setData(c,u)},clearData:c=>{fy(r)&&e.clearData(c)}};return aR(r),r},QZ=e=>{const n=cR(),o=p8(e);return _A(e),h8(n),n.dropEffect=e.dropEffect,n.effectAllowed=e.effectAllowed,f8(e).each(r=>n.setDragImage(r.image,r.x,r.y)),me(e.types,r=>{r!=="Files"&&n.setData(r,e.getData(r))}),me(e.files,r=>n.items.add(r)),gJ(e).each(r=>{km(n,r)}),o.each(r=>{b8(e,r),b8(n,r)}),n},ej=e=>{const n=e.getData("text/html");return n===""?P.none():P.some(n)},iR=(e,n)=>e.setData("text/html",n),tj=(e,n)=>({left:e.left-n,top:e.top-n,right:e.right+n*2,bottom:e.bottom+n*2,width:e.width+n,height:e.height+n}),Th=(e,n)=>eo(n,o=>{const r=tj(Fi(o.getBoundingClientRect()),-1);return[{x:r.left,y:e(r),cell:o},{x:r.right,y:e(r),cell:o}]}),lR=(e,n,o)=>st(e,(r,c)=>r.fold(()=>P.some(c),u=>{const f=Math.sqrt(Math.abs(u.x-n)+Math.abs(u.y-o)),b=Math.sqrt(Math.abs(c.x-n)+Math.abs(c.y-o));return P.some(b<f?c:u)}),P.none()),C8=(e,n,o,r,c)=>{const u=ot(re.fromDom(o),"td,th,caption").map(b=>b.dom),f=tt(Th(e,u),b=>n(b,c));return lR(f,r,c).map(b=>b.cell)},nj=e=>e.bottom,oj=e=>e.top,uR=(e,n)=>e.y<n,dR=(e,n)=>e.y>n,w8=Te(C8,nj,uR),S8=Te(C8,oj,dR),x8=(e,n)=>uo(n.getClientRects()).bind(o=>w8(e,o.left,o.top)).bind(o=>lA(jW(o),n)),sj=(e,n)=>ts(n.getClientRects()).bind(o=>S8(e,o.left,o.top)).bind(o=>lA(_O(o),n)),Rw=(e,n,o)=>o.breakAt.exists(r=>e(n,r).breakAt.isSome()),DA=e=>e.breakType===vr.Wrap&&e.positions.length===0,E8=e=>e.breakType===vr.Br&&e.positions.length===1,mR=(e,n,o)=>{const r=e(n,o);return DA(r)||!xr(o.getNode())&&E8(r)?!Rw(e,n,r):r.breakAt.isNone()},T8=Te(mR,V0),A8=Te(mR,U0),OA=(e,n,o)=>{const r=nt.fromRangeStart(n);return Gf(!e,o).exists(c=>c.isEqual(r))},fR=(e,n,o,r)=>{const c=e.selection.getRng(),u=n?1:-1;return Tv()&&OA(n,c,o)?(wh(u,e,o,!n,!1).each(f=>{mf(e,f)}),!0):!1},Mw=(e,n,o)=>x8(n,o).orThunk(()=>uo(o.getClientRects()).bind(r=>SO(xO(e,nt.before(n)),r.left))).getOr(nt.before(n)),rj=(e,n,o)=>sj(n,o).orThunk(()=>uo(o.getClientRects()).bind(r=>SO(EO(e,nt.after(n)),r.left))).getOr(nt.after(n)),gR=(e,n)=>{const o=n.getNode(e);return Yd(o)?P.some(o):P.none()},aj=(e,n,o)=>{n.undoManager.transact(()=>{const r=e?Ki:Ga,c=KP(n,re.fromDom(o),r);mf(n,c)})},_8=(e,n,o)=>{const r=gR(!!n,o),c=n===!1;r.fold(()=>mf(e,o.toRange()),u=>Gf(c,e.getBody()).filter(f=>f.isEqual(o)).fold(()=>mf(e,o.toRange()),f=>aj(n,e,u)))},k8=(e,n,o,r)=>{const c=e.selection.getRng(),u=nt.fromRangeStart(c),f=e.getBody();if(!n&&T8(r,u)){const b=Mw(f,o,u);return _8(e,n,b),!0}else if(n&&A8(r,u)){const b=rj(f,o,u);return _8(e,n,b),!0}else return!1},D8=(e,n,o)=>P.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(r=>P.from(e.dom.getParent(r,"table")).map(c=>o(e,n,c,r))).getOr(!1),hR=(e,n)=>D8(e,n,fR),O8=(e,n)=>D8(e,n,k8),cj=e=>{const n=Kd.exact(e,0,e,0);return Gy(n)},ij=e=>RA(e)||_s(e).some(n=>Ll(n)&&RA(n)),R8=(e,n,o)=>o.fold(P.none,P.none,(r,c)=>_f(c).map(u=>cj(u)),r=>e.mode.isReadOnly()||!lj(r)||!ij(r)?P.none():(e.execCommand("mceTableInsertRowAfter"),M8(e,n,r))),lj=e=>Ls(e,Jr("table")).exists(Cl),M8=(e,n,o)=>R8(e,n,Yp(o,RA)),uj=(e,n,o)=>R8(e,n,ng(o,RA)),RA=e=>Cl(e)||go(e,pR),pR=e=>Ll(e)&&Cl(e),B8=(e,n)=>{const o=["table","li","dl"],r=re.fromDom(e.getBody()),c=b=>{const v=Oo(b);return Yo(b,r)||be(o,v)},u=e.selection.getRng(),f=re.fromDom(n?u.endContainer:u.startContainer);return VZ(f,c).map(b=>(d8(b,c).each(D=>{e.model.table.clearSelectedCells(D.dom)}),e.selection.collapse(!n),(n?M8:uj)(e,c,b).each(D=>{e.selection.setRng(D)}),!0)).getOr(!1)},Xp=(e,n,o)=>{const r=Po.os.isMacOS()||Po.os.isiOS(),c=Po.browser.isFirefox();q0([{keyCode:Qt.RIGHT,action:oo(QP,e,!0)},{keyCode:Qt.LEFT,action:oo(QP,e,!1)},{keyCode:Qt.UP,action:oo(e8,e,!1)},{keyCode:Qt.DOWN,action:oo(e8,e,!0)},...r?[{keyCode:Qt.UP,action:oo(EA,e,!1),metaKey:!0,shiftKey:!0},{keyCode:Qt.DOWN,action:oo(EA,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:Qt.RIGHT,action:oo(hR,e,!0)},{keyCode:Qt.LEFT,action:oo(hR,e,!1)},{keyCode:Qt.UP,action:oo(O8,e,!1)},{keyCode:Qt.DOWN,action:oo(O8,e,!0)},{keyCode:Qt.UP,action:oo(O8,e,!1)},{keyCode:Qt.UP,action:oo(QO,e,!1)},{keyCode:Qt.DOWN,action:oo(QO,e,!0)},{keyCode:Qt.RIGHT,action:oo(i8,e,!0)},{keyCode:Qt.LEFT,action:oo(i8,e,!1)},{keyCode:Qt.UP,action:oo(HZ,e,!1)},{keyCode:Qt.DOWN,action:oo(HZ,e,!0)},{keyCode:Qt.RIGHT,action:oo(gA,e,n,!0)},{keyCode:Qt.LEFT,action:oo(gA,e,n,!1)},{keyCode:Qt.RIGHT,ctrlKey:!r,altKey:r,action:oo(_P,e,n)},{keyCode:Qt.LEFT,ctrlKey:!r,altKey:r,action:oo(FO,e,n)},{keyCode:Qt.UP,action:oo(r8,e,!1)},{keyCode:Qt.DOWN,action:oo(r8,e,!0)},...c?[{keyCode:Qt.UP,action:oo(s8,e,!1)},{keyCode:Qt.DOWN,action:oo(s8,e,!0)}]:[]],o).each(u=>{o.preventDefault()})},F8=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||Xp(e,n,o)})},Bd=(e,n)=>({container:e,offset:n}),Bw=Is.DOM,gy=e=>n=>e===n?-1:0,Jp=e=>n=>e.isBlock(n)||be(["BR","IMG","HR","INPUT"],n.nodeName)||e.getContentEditable(n)==="false",MA=(e,n,o)=>{if(kt(e)&&n>=0)return P.some(Bd(e,n));{const r=pd(Bw);return P.from(r.backwards(e,n,gy(e),o)).map(c=>Bd(c.container,c.container.data.length))}},Fd=(e,n,o)=>{if(kt(e)&&n>=e.length)return P.some(Bd(e,n));{const r=pd(Bw);return P.from(r.forwards(e,n,gy(e),o)).map(c=>Bd(c.container,0))}},Ah=(e,n,o)=>{if(!kt(e))return P.none();const r=e.data;if(n>=0&&n<=r.length)return P.some(Bd(e,n));{const c=pd(Bw);return P.from(c.backwards(e,n,gy(e),o)).bind(u=>{const f=u.container.data;return Ah(u.container,n+f.length,o)})}},bR=(e,n,o)=>{if(!kt(e))return P.none();const r=e.data;if(n<=r.length)return P.some(Bd(e,n));{const c=pd(Bw);return P.from(c.forwards(e,n,gy(e),o)).bind(u=>bR(u.container,n-r.length,o))}},Fw=(e,n,o,r,c)=>{const u=pd(e,Jp(e));return P.from(u.backwards(n,o,r,c))},dj=e=>e.collapsed&&kt(e.startContainer),N8=e=>Bi(e.toString().replace(/\u00A0/g," ")),P8=e=>e!==""&&` \uFEFF\f
\r	\v`.indexOf(e)!==-1,mj=(e,n)=>e.substring(n.length),fj=(e,n,o,r=!1)=>{let c;const u=o.charAt(0);for(c=n-1;c>=0;c--){const f=e.charAt(c);if(!r&&P8(f))return P.none();if(u===f&&er(e,o,c,n))break}return P.some(c)},vR=(e,n,o,r=!1)=>{if(!dj(n))return P.none();const c={text:"",offset:0},u=(b,v,x)=>(c.text=x+c.text,c.offset+=v,fj(c.text,c.offset,o,r).getOr(v)),f=e.getParent(n.startContainer,e.isBlock)||e.getRoot();return Fw(e,n.startContainer,n.startOffset,u,f).bind(b=>{const v=n.cloneRange();if(v.setStart(b.container,b.offset),v.setEnd(n.endContainer,n.endOffset),v.collapsed)return P.none();const x=N8(v);return x.lastIndexOf(o)!==0?P.none():P.some({text:mj(x,o),range:v,trigger:o})})},gj=e=>e.nodeType===c1,$8=e=>e.nodeType===bg,I8=e=>{if(gj(e))return Bd(e,e.data.length);{const n=e.childNodes;return n.length>0?I8(n[n.length-1]):Bd(e,n.length)}},L8=(e,n)=>{const o=e.childNodes;return o.length>0&&n<o.length?L8(o[n],0):o.length>0&&$8(e)&&o.length===n?I8(o[o.length-1]):Bd(e,n)},hy=(e,n)=>{var o;const r=(o=e.getParent(n.container,e.isBlock))!==null&&o!==void 0?o:e.getRoot();return Fw(e,n.container,n.offset,(c,u)=>u===0?-1:u,r).filter(c=>{const u=c.container.data.charAt(c.offset-1);return!P8(u)}).isSome()},BA=e=>n=>{const o=L8(n.startContainer,n.startOffset);return!hy(e,o)},H8=(e,n,o)=>ks(o.triggers,r=>vR(e,n,r)),z8=(e,n)=>{const o=n(),r=e.selection.getRng();return H8(e.dom,r,o).bind(c=>FA(e,n,c))},FA=(e,n,o,r={})=>{var c;const u=n(),b=(c=e.selection.getRng().startContainer.nodeValue)!==null&&c!==void 0?c:"",v=tt(u.lookupByTrigger(o.trigger),D=>o.text.length>=D.minChars&&D.matches.getOrThunk(()=>BA(e.dom))(o.range,b,o.text));if(v.length===0)return P.none();const x=Promise.all(Oe(v,D=>D.fetch(o.text,D.maxResults,r).then(N=>({matchText:o.text,items:N,columns:D.columns,onAction:D.onAction,highlightOn:D.highlightOn}))));return P.some({lookupData:x,context:o})};var ff;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(ff||(ff={}));const yR=(e,n,o)=>e.stype===ff.Error?n(e.serror):o(e.svalue),hj=e=>{const n=[],o=[];return me(e,r=>{yR(r,c=>o.push(c),c=>n.push(c))}),{values:n,errors:o}},V8=(e,n)=>e.stype===ff.Error?{stype:ff.Error,serror:n(e.serror)}:e,NA=(e,n)=>e.stype===ff.Value?{stype:ff.Value,svalue:n(e.svalue)}:e,U8=(e,n)=>e.stype===ff.Value?n(e.svalue):e,PA=(e,n)=>e.stype===ff.Error?n(e.serror):e,W8=e=>({stype:ff.Value,svalue:e}),CR=e=>({stype:ff.Error,serror:e}),il={fromResult:e=>e.fold(CR,W8),toResult:e=>yR(e,ge.error,ge.value),svalue:W8,partition:hj,serror:CR,bind:U8,bindError:PA,map:NA,mapError:V8,fold:yR},wR=e=>en(e)&&dn(e).length>100?" removed due to size":JSON.stringify(e,null,2),pj=e=>{const n=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:bt("... (only showing first ten failures)")}]):e;return Oe(n,o=>"Failed path: ("+o.path.join(" > ")+`)
`+o.getErrorInfo())},Z8=(e,n)=>il.serror([{path:e,getErrorInfo:n}]),j8=(e,n,o)=>Z8(e,()=>'Could not find valid *required* value for "'+n+'" in '+wR(o)),Nw=(e,n)=>Z8(e,bt(n)),q8=e=>{const n=(r,c)=>il.bindError(e(c),u=>Nw(r,u)),o=bt("val");return{extract:n,toString:o}},G8=q8(il.svalue),$A=bt(G8),IA=(e,n)=>q8(o=>{const r=typeof o;return e(o)?il.svalue(o):il.serror(`Expected type: ${n} but got: ${r}`)}),SR=IA(Cs,"number"),LA=IA(ie,"string"),K8=IA(he,"function"),xR=()=>({tag:"required",process:{}}),bj=e=>({tag:"defaultedThunk",process:e}),Y8=e=>bj(bt(e)),X8=()=>({tag:"option",process:{}}),ER=(e,n,o,r)=>({tag:"field",key:e,newKey:n,presence:o,prop:r}),J8=(e,n,o)=>{switch(e.tag){case"field":return n(e.key,e.newKey,e.presence,e.prop);case"custom":return o(e.newKey,e.instantiator)}},vj=(e,n)=>il.svalue(gt(n,Yt.apply(void 0,e))),Pw=e=>k(il.serror,Wo)(e),e$={consolidateObj:(e,n)=>{const o=il.partition(e);return o.errors.length>0?Pw(o.errors):vj(o.values,n)},consolidateArr:e=>{const n=il.partition(e);return n.errors.length>0?Pw(n.errors):il.svalue(n.values)}},t$=(e,n,o,r)=>Ss(n,o).fold(()=>j8(e,o,n),r),TR=(e,n,o,r)=>{const c=Ss(e,n).getOrThunk(()=>o(e));return r(c)},yj=(e,n,o)=>o(Ss(e,n)),Cj=(e,n,o,r)=>{const c=Ss(e,n).map(u=>u===!0?o(e):u);return r(c)},wj=(e,n,o,r,c)=>{const u=b=>c.extract(n.concat([r]),b),f=b=>b.fold(()=>il.svalue(P.none()),v=>{const x=c.extract(n.concat([r]),v);return il.map(x,P.some)});switch(e.tag){case"required":return t$(n,o,r,u);case"defaultedThunk":return TR(o,r,e.process,u);case"option":return yj(o,r,f);case"defaultedOptionThunk":return Cj(o,r,e.process,f);case"mergeWithThunk":return TR(o,r,bt({}),b=>{const v=gt(e.process(o),b);return u(v)})}},Sj=(e,n,o)=>{const r={},c=[];for(const u of o)J8(u,(f,b,v,x)=>{const D=wj(v,e,n,f,x);il.fold(D,B=>{c.push(...B)},B=>{r[b]=B})},(f,b)=>{r[f]=b(n)});return c.length>0?il.serror(c):il.svalue(r)},$w=e=>({extract:(r,c)=>Sj(r,c,e),toString:()=>`obj{
`+Oe(e,c=>J8(c,(u,f,b,v)=>u+" -> "+v.toString(),(u,f)=>"state("+u+")")).join(`
`)+"}"}),xj=e=>({extract:(r,c)=>{const u=Oe(c,(f,b)=>e.extract(r.concat(["["+b+"]"]),f));return e$.consolidateArr(u)},toString:()=>"array("+e.toString()+")"}),Ej=(e,n,o)=>{const r=n.extract([e],o);return il.mapError(r,c=>({input:o,errors:c}))},n$=(e,n,o)=>il.toResult(Ej(e,n,o)),HA=e=>`Errors: 
`+pj(e.errors).join(`
`)+`

Input object: `+wR(e.input),py=ER,Tj=e=>py(e,e,xR(),$A()),AR=(e,n)=>py(e,e,xR(),n),o$=e=>AR(e,LA),s$=e=>AR(e,K8),Aj=e=>py(e,e,X8(),$A()),r$=(e,n)=>py(e,e,X8(),n),a$=e=>r$(e,LA),_j=e=>r$(e,K8),_R=(e,n)=>py(e,e,Y8(n),$A()),c$=(e,n,o)=>py(e,e,Y8(n),o),kR=(e,n)=>c$(e,n,SR),kj=(e,n,o)=>c$(e,n,xj(o)),Dj=o$("type"),Oj=s$("fetch"),Rj=s$("onAction"),Ua=e=>_R("columns",e),Mj=$w([Dj,o$("trigger"),kR("minChars",1),Ua(1),kR("maxResults",10),_j("matches"),Oj,Rj,kj("highlightOn",[],LA)]),Bj=e=>n$("Autocompleter",Mj,e),Fj=()=>{const e={},n={},o={},r={},c={},u={},f={},b={},v={},x=(H,te)=>(Q,Y)=>{H[Q.toLowerCase()]={...Y,type:te}},D=(H,te)=>(Q,Y)=>{H[Q.toLowerCase()]={type:te,...Y}},B=(H,te)=>r[H.toLowerCase()]=te,N=(H,te)=>f[H.toLowerCase()]=te;return{addButton:x(e,"button"),addGroupToolbarButton:x(e,"grouptoolbarbutton"),addToggleButton:x(e,"togglebutton"),addMenuButton:x(e,"menubutton"),addSplitButton:x(e,"splitbutton"),addMenuItem:x(n,"menuitem"),addNestedMenuItem:x(n,"nestedmenuitem"),addToggleMenuItem:x(n,"togglemenuitem"),addAutocompleter:x(o,"autocompleter"),addContextMenu:x(c,"contextmenu"),addContextToolbar:x(u,"contexttoolbar"),addContextForm:D(u,"contextform"),addSidebar:x(b,"sidebar"),addView:x(v,"views"),addIcon:B,addContext:N,getAll:()=>({buttons:e,menuItems:n,icons:r,popups:o,contextMenus:c,contextToolbars:u,sidebars:b,views:v,contexts:f})}},i$=e=>{const n=e.ui.registry.getAll().popups,o=ac(n,f=>Bj(f).fold(b=>{throw new Error(HA(b))},Uo)),r=Bl(Ma(o,f=>f.trigger)),c=zr(o);return{dataset:o,triggers:r,lookupByTrigger:f=>tt(c,b=>b.trigger===f)}},DR=(e,n)=>{const o=Pc(n.load,50);e.on("input",r=>{r.inputType==="insertCompositionText"&&!e.composing||o.throttle()}),e.on("keydown",r=>{const c=r.which;c===8?o.throttle():c===27?(o.cancel(),n.cancelIfNecessary()):(c===38||c===40)&&o.cancel()},!0),e.on("remove",o.cancel)},l$=e=>{const n=rs(),o=gn(!1),r=n.isSet,c=()=>{r()&&(Tx(e),o.set(!1),n.clear())},u=B=>{r()||n.set({trigger:B.trigger,matchLength:B.text.length})},f=Ba(()=>i$(e)),b=B=>n.get().map(N=>vR(e.dom,e.selection.getRng(),N.trigger,!0).bind(H=>FA(e,f,H,B))).getOrThunk(()=>z8(e,f)),v=B=>{b(B).fold(c,N=>{u(N.context),N.lookupData.then(H=>{n.get().map(te=>{const Q=N.context;te.trigger===Q.trigger&&(n.set({...te,matchLength:Q.text.length}),o.get()?($2(e,{range:Q.range}),so(e,{lookupData:H})):(o.set(!0),$2(e,{range:Q.range}),l4(e,{lookupData:H})))})})})},x=(B,N)=>{const H=B.compareBoundaryPoints(window.Range.START_TO_START,N),te=B.compareBoundaryPoints(window.Range.END_TO_END,N);return H>=0&&te<=0},D=()=>n.get().bind(({trigger:B})=>{const N=e.selection.getRng();return vR(e.dom,N,B,o.get()).filter(({range:H})=>x(N,H)).map(({range:H})=>H)});e.addCommand("mceAutocompleterReload",(B,N)=>{const H=en(N)?N.fetchOptions:{};v(H)}),e.addCommand("mceAutocompleterClose",c),e.addCommand("mceAutocompleterRefreshActiveRange",()=>{D().each(B=>{$2(e,{range:B})})}),e.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",()=>D().isSome()),DR(e,{cancelIfNecessary:c,load:v})},Nj=Do().browser.isSafari(),u$=e=>om(re.fromDom(e)),d$=(e,n)=>{var o;return e.startOffset===0&&e.endOffset===((o=n.textContent)===null||o===void 0?void 0:o.length)},VA=(e,n)=>P.from(e.getParent(n.container(),"details")),m$=(e,n)=>VA(e,n).isSome(),Pj=(e,n)=>{const o=P.from(e.getParent(n.startContainer,"details")),r=P.from(e.getParent(n.endContainer,"details"));if(o.isSome()||r.isSome()){const c=o.bind(u=>P.from(e.select("summary",u)[0]));return P.some({startSummary:c,startDetails:o,endDetails:r})}else return P.none()},$j=(e,n)=>Yc(n).exists(o=>o.isEqual(e)),Ij=(e,n)=>Vu(n).exists(o=>xr(o.getNode())&&Ci(n,o).exists(r=>r.isEqual(e))||o.isEqual(e)),Lj=(e,n)=>n.startSummary.exists(o=>$j(e,o)),Hj=(e,n)=>n.startSummary.exists(o=>Ij(e,o)),zj=(e,n)=>n.startDetails.exists(o=>Ci(o,e).forall(r=>n.startSummary.exists(c=>!c.contains(e.container())&&c.contains(r.container())))),Vj=(e,n,o)=>o.startDetails.exists(r=>Kc(e,n).forall(c=>!r.contains(c.container()))),f$=(e,n)=>{const o=n.getNode();Kn(o)||e.selection.setCursorLocation(o,n.offset())},g$=(e,n,o)=>{const r=e.dom.getParent(n.container(),"details");if(r&&!r.open){const c=e.dom.select("summary",r)[0];c&&(o?Yc(c):Vu(c)).each(f=>f$(e,f))}else f$(e,n)},h$=(e,n)=>{const o=v=>v.contains(e.startContainer),r=v=>v.contains(e.endContainer),c=n.startSummary.exists(o),u=n.startSummary.exists(r),f=n.startDetails.forall(v=>n.endDetails.forall(x=>v!==x));return(c||u)&&!(c&&u)||f},OR=(e,n,o)=>{const{dom:r,selection:c}=e,u=e.getBody();if(o==="character"){const f=nt.fromRangeStart(c.getRng()),b=r.getParent(f.container(),r.isBlock),v=VA(r,f),x=b&&r.isEmpty(b),D=K(b==null?void 0:b.previousSibling),B=K(b==null?void 0:b.nextSibling);return x&&(n?B:D)&&sh(!n,u,f).exists(te=>m$(r,te)&&!Mn(v,VA(r,te)))?!0:sh(n,u,f).fold(Ne,N=>{const H=VA(r,N);if(m$(r,N)&&!Mn(v,H)){if(n||g$(e,N,!1),b&&x){if(n&&D)return!0;if(!n&&B)return!0;g$(e,N,n),e.dom.remove(b)}return!0}else return!1})}else return!1},p$=(e,n,o,r)=>{const u=e.selection.getRng(),f=nt.fromRangeStart(u),b=e.getBody();return r==="selection"?h$(u,n):o?Hj(f,n)||Vj(b,f,n):Lj(f,n)||zj(f,n)},Uj=(e,n,o)=>Pj(e.dom,e.selection.getRng()).fold(()=>OR(e,n,o),r=>p$(e,r,n,o)||OR(e,n,o)),Wj=(e,n,o)=>{const r=e.selection,c=r.getNode(),u=r.getRng(),f=nt.fromRangeStart(u);return o2(c)?(o==="selection"&&d$(u,c)||wB(n,f,c)?u$(c):e.undoManager.transact(()=>{const b=r.getSel();let{anchorNode:v,anchorOffset:x,focusNode:D,focusOffset:B}=b??{};const N=()=>{Fe(v)&&Fe(x)&&Fe(D)&&Fe(B)&&(b==null||b.setBaseAndExtent(v,x,D,B))},H=()=>{v=b==null?void 0:b.anchorNode,x=b==null?void 0:b.anchorOffset,D=b==null?void 0:b.focusNode,B=b==null?void 0:b.focusOffset},te=(Y,Ae)=>{me(Y.childNodes,_e=>{h0(_e)&&Ae.appendChild(_e)})},Q=e.dom.create("span",{"data-mce-bogus":"1"});te(c,Q),c.appendChild(Q),N(),(o==="word"||o==="line")&&(b==null||b.modify("extend",n?"right":"left",o)),!r.isCollapsed()&&d$(r.getRng(),Q)?u$(c):(e.execCommand(n?"ForwardDelete":"Delete"),H(),te(Q,c),N()),e.dom.remove(Q)}),!0):!1},Y0=(e,n,o)=>Uj(e,n,o)||Nj&&Wj(e,n,o)?P.some(Ct):P.none(),b$=e=>(n,o,r={})=>{const c=n.getBody(),u={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:c,currentTarget:c,eventPhase:Event.AT_TARGET,originalTarget:c,explicitOriginalTarget:c,isTrusted:!1,srcElement:c,cancelable:!1,preventDefault:Ct,inputType:o},f=k1(new InputEvent(e));return n.dispatch(e,{...f,...u,...r})},by=b$("input"),UA=b$("beforeinput"),RR=Do(),v$=RR.os,MR=v$.isMacOS()||v$.isiOS(),jj=RR.browser.isFirefox(),qj=(e,n,o)=>{const r=o.keyCode===Qt.BACKSPACE?"deleteContentBackward":"deleteContentForward",c=e.selection.isCollapsed(),u=c?"character":"selection",f=b=>c?b?"word":"line":"selection";c8([{keyCode:Qt.BACKSPACE,action:oo(UP,e)},{keyCode:Qt.BACKSPACE,action:oo(hO,e,!1)},{keyCode:Qt.DELETE,action:oo(hO,e,!0)},{keyCode:Qt.BACKSPACE,action:oo(dO,e,!1)},{keyCode:Qt.DELETE,action:oo(dO,e,!0)},{keyCode:Qt.BACKSPACE,action:oo(PO,e,n,!1)},{keyCode:Qt.DELETE,action:oo(PO,e,n,!0)},{keyCode:Qt.BACKSPACE,action:oo(Jk,e,!1)},{keyCode:Qt.DELETE,action:oo(Jk,e,!0)},{keyCode:Qt.BACKSPACE,action:oo(Y0,e,!1,u)},{keyCode:Qt.DELETE,action:oo(Y0,e,!0,u)},...MR?[{keyCode:Qt.BACKSPACE,altKey:!0,action:oo(Y0,e,!1,f(!0))},{keyCode:Qt.DELETE,altKey:!0,action:oo(Y0,e,!0,f(!0))},{keyCode:Qt.BACKSPACE,metaKey:!0,action:oo(Y0,e,!1,f(!1))}]:[{keyCode:Qt.BACKSPACE,ctrlKey:!0,action:oo(Y0,e,!1,f(!0))},{keyCode:Qt.DELETE,ctrlKey:!0,action:oo(Y0,e,!0,f(!0))}],{keyCode:Qt.BACKSPACE,action:oo(bO,e,!1)},{keyCode:Qt.DELETE,action:oo(bO,e,!0)},{keyCode:Qt.BACKSPACE,action:oo(zO,e,!1)},{keyCode:Qt.DELETE,action:oo(zO,e,!0)},{keyCode:Qt.BACKSPACE,action:oo(hw,e,!1)},{keyCode:Qt.DELETE,action:oo(hw,e,!0)},{keyCode:Qt.BACKSPACE,action:oo(rA,e,!1)},{keyCode:Qt.DELETE,action:oo(rA,e,!0)},{keyCode:Qt.BACKSPACE,action:oo(Eh,e,!1)},{keyCode:Qt.DELETE,action:oo(Eh,e,!0)},{keyCode:Qt.BACKSPACE,action:oo(pO,e,!1)},{keyCode:Qt.DELETE,action:oo(pO,e,!0)},{keyCode:Qt.BACKSPACE,action:oo(yA,e,!1)},{keyCode:Qt.DELETE,action:oo(yA,e,!0)}],o).filter(b=>e.selection.isEditable()).each(b=>{o.preventDefault(),UA(e,r).isDefaultPrevented()||(b(),by(e,r))})},Gj=(e,n,o,r)=>q0([{keyCode:Qt.BACKSPACE,action:oo(sP,e)},{keyCode:Qt.DELETE,action:oo(sP,e)},...MR?[{keyCode:Qt.BACKSPACE,altKey:!0,action:oo(Sw,e)},{keyCode:Qt.DELETE,altKey:!0,action:oo(Sw,e)},...o?[{keyCode:jj?224:91,action:oo(()=>(FP(e,r),Sw(e)))}]:[]]:[{keyCode:Qt.BACKSPACE,ctrlKey:!0,action:oo(Sw,e)},{keyCode:Qt.DELETE,ctrlKey:!0,action:oo(Sw,e)}]],n),Kj=(e,n)=>{let o=!1,r=[];e.on("keydown",c=>{o=c.keyCode===Qt.BACKSPACE,r=IO(e),c.isDefaultPrevented()||qj(e,n,c)}),e.on("keyup",c=>{c.isDefaultPrevented()||(Gj(e,c,o,r),r.length=0),o=!1})},y$=(e,n)=>{const o=re.fromDom(e),r=re.fromDom(n),c=Jr("span"),u=Te(Yo,o),f=v=>Tr(v)&&Ur(v,"font-size").isSome(),b=[...f(r)?[r]:[],..._(r,f,u)];me(b.slice(1),v=>{Lh(v,"font-size"),Qr(v,"data-mce-style"),c(v)&&wf(v)&&li(v)})},Yj=e=>{for(;e;){if(Cn(e)||kt(e)&&e.data&&/[\r\n\s]/.test(e.data))return P.from(re.fromDom(e));e=e.nextSibling}return P.none()},vy=(e,n)=>{const o=e.dom,r=e.schema.getMoveCaretBeforeOnEnterElements();if(!n)return;if(/^(LI|DT|DD)$/.test(n.nodeName)){const u=v=>/^(ul|ol|dl)$/.test(Oo(v)),f=v=>u(v)?P.from(v):Af(v,u),b=v=>o.isEmpty(v.dom);Yj(n.firstChild).each(v=>{f(v).fold(()=>{if(b(v)){const x=m8(v,0).element;Tr(x)&&!tm(x)&&ds(x,re.fromText(ir))}},x=>{Ga(x,re.fromText(ir))})})}const c=o.createRng();if(n.normalize(),n.hasChildNodes()){const u=new Qs(n,n);let f=n,b;for(;b=u.current();){if(kt(b)){c.setStart(b,0),c.setEnd(b,0);break}if(r[b.nodeName.toLowerCase()]){c.setStartBefore(b),c.setEndBefore(b);break}f=b,b=u.next()}b||(c.setStart(f,0),c.setEnd(f,0))}else xr(n)?n.nextSibling&&o.isBlock(n.nextSibling)?(c.setStartBefore(n),c.setEndBefore(n)):(c.setStartAfter(n),c.setEndAfter(n)):(c.setStart(n,0),c.setEnd(n,0));e.selection.setRng(c),AC(e,c)},yy=(e,n)=>{const o=e.getRoot();let r,c=n;for(;c!==o&&c&&e.getContentEditable(c)!=="false";){if(e.getContentEditable(c)==="true"){r=c;break}c=c.parentNode}return c!==o?r:o},BR=e=>P.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),Xj=e=>BR(e).fold(bt(""),n=>n.nodeName.toUpperCase()),C$=e=>BR(e).filter(n=>nm(re.fromDom(n))).isSome(),FR=e=>{e.innerHTML='<br data-mce-bogus="1">'},Jj=(e,n,o)=>{const r=e.dom;P.from(o.style).map(r.parseStyle).each(v=>{const D={...Ef(re.fromDom(n)),...v};r.setStyles(n,D)});const c=P.from(o.class).map(v=>v.split(/\s+/)),u=P.from(n.className).map(v=>tt(v.split(/\s+/),x=>x!==""));nn(c,u,(v,x)=>{const D=tt(x,N=>!be(v,N)),B=[...v,...D];r.setAttrib(n,"class",B.join(" "))});const f=["style","class"],b=Fc(o,(v,x)=>!be(f,x));r.setAttribs(n,b)},Iw=(e,n)=>{if(pc(e).toLowerCase()===n.tagName.toLowerCase()){const r=gp(e);Jj(e,n,r)}},NR=(e,n,o,r,c=!0,u,f)=>{const b=e.dom,v=e.schema,x=pc(e),D=o?o.nodeName.toUpperCase():"";let B=n;const N=v.getTextInlineElements();let H;u||D==="TABLE"||D==="HR"?H=b.create(u||x,f||{}):H=o.cloneNode(!1);let te=H;if(!c)b.setAttrib(H,"style",null),b.setAttrib(H,"class",null);else{do if(N[B.nodeName]){if(Pi(B)||rl(B))continue;const Q=B.cloneNode(!1);b.setAttrib(Q,"id",""),H.hasChildNodes()?(Q.appendChild(H.firstChild),H.appendChild(Q)):(te=Q,H.appendChild(Q))}while((B=B.parentNode)&&B!==r);y$(H,te)}return Iw(e,H),FR(te),H},w$=(e,n)=>e.dom.getParent(n,Sb),Qj=(e,n,o)=>{let r=n;for(;r&&r!==e&&K(r.nextSibling);){const c=r.parentElement;if(!c||!o(c))return Sb(c);r=c}return!1},eq=(e,n,o)=>!n&&o.nodeName.toLowerCase()===pc(e)&&e.dom.isEmpty(o)&&Qj(e.getBody(),o,r=>to(e.schema.getTextBlockElements(),r.nodeName.toLowerCase())),tq=(e,n,o)=>{var r,c,u;const f=n(pc(e)),b=w$(e,o);b&&(e.dom.insertAfter(f,b),vy(e,f),((u=(c=(r=o.parentElement)===null||r===void 0?void 0:r.childNodes)===null||c===void 0?void 0:c.length)!==null&&u!==void 0?u:0)>1&&e.dom.remove(o))},nq=(e,n)=>e.firstChild&&e.firstChild.nodeName===n,oq=e=>{var n;return((n=e.parentNode)===null||n===void 0?void 0:n.firstChild)===e},S$=(e,n)=>{const o=e==null?void 0:e.parentNode;return Fe(o)&&o.nodeName===n},x$=e=>Fe(e)&&/^(OL|UL|LI)$/.test(e.nodeName),PR=e=>Fe(e)&&/^(LI|DT|DD)$/.test(e.nodeName),vJ=e=>x$(e)&&x$(e.parentNode),WA=e=>{const n=e.parentNode;return PR(n)?n:e},X0=(e,n,o)=>{let r=e[o?"firstChild":"lastChild"];for(;r&&!Cn(r);)r=r[o?"nextSibling":"previousSibling"];return r===n},$R=e=>st(Ma(Ef(re.fromDom(e)),(n,o)=>`${o}: ${n};`),(n,o)=>n+o,""),E$=(e,n,o,r,c)=>{const u=e.dom,f=e.selection.getRng(),b=o.parentNode;if(o===e.getBody()||!b)return;vJ(o)&&(c="LI");const v=PR(r)?$R(r):void 0;let x=PR(r)&&v?n(c,{style:$R(r)}):n(c);if(X0(o,r,!0)&&X0(o,r,!1))if(S$(o,"LI")){const D=WA(o);u.insertAfter(x,D),oq(o)?u.remove(D):u.remove(o)}else u.replace(x,o);else if(X0(o,r,!0))S$(o,"LI")?(u.insertAfter(x,WA(o)),x.appendChild(u.doc.createTextNode(" ")),x.appendChild(o)):b.insertBefore(x,o),u.remove(r);else if(X0(o,r,!1))u.insertAfter(x,WA(o)),u.remove(r);else{o=WA(o);const D=f.cloneRange();D.setStartAfter(r),D.setEndAfter(o);const B=D.extractContents();if(c==="LI"&&nq(B,"LI")){const N=tt(Oe(x.children,re.fromDom),St(Jr("br")));x=B.firstChild,u.insertAfter(B,o),me(N,H=>Eu(re.fromDom(x),H)),v&&x.setAttribute("style",v)}else u.insertAfter(B,o),u.insertAfter(x,o);u.remove(r)}vy(e,x)},sq=e=>{me(ee(re.fromDom(e),xs),n=>{const o=n.dom;o.nodeValue=Bi(o.data)})},T$=(e,n)=>{const o=e.dom.getParent(n,"ol,ul,dl");return o!==null&&e.dom.getContentEditableParent(o)==="false"},A$=(e,n)=>n&&n.nodeName==="A"&&e.isEmpty(n),IR=(e,n)=>e.nodeName===n||e.previousSibling&&e.previousSibling.nodeName===n,rq=(e,n)=>e.nodeName===n||e.nextSibling&&e.nextSibling.nodeName===n,LR=(e,n)=>Fe(n)&&e.isBlock(n)&&!/^(TD|TH|CAPTION|FORM)$/.test(n.nodeName)&&!/^(fixed|absolute)/i.test(n.style.position)&&e.isEditable(n.parentNode)&&e.getContentEditable(n)!=="false",_$=(e,n,o)=>{var r;const c=[];if(!o)return;let u=o;for(;u=u.firstChild;){if(e.isBlock(u))return;Cn(u)&&!n[u.nodeName.toLowerCase()]&&c.push(u)}let f=c.length;for(;f--;)u=c[f],(!u.hasChildNodes()||u.firstChild===u.lastChild&&((r=u.firstChild)===null||r===void 0?void 0:r.nodeValue)===""||A$(e,u))&&e.remove(u)},HR=(e,n,o)=>kt(n)?e?o===1&&n.data.charAt(o-1)===ya?0:o:o===n.data.length-1&&n.data.charAt(o)===ya?n.data.length:o:o,zR=e=>{const n=e.cloneRange();return n.setStart(e.startContainer,HR(!0,e.startContainer,e.startOffset)),n.setEnd(e.endContainer,HR(!1,e.endContainer,e.endOffset)),n},aq=e=>{let n=e;do kt(n)&&(n.data=n.data.replace(/^[\r\n]+/,"")),n=n.firstChild;while(n)},cq=(e,n,o,r,c)=>{var u,f;const b=e.dom,v=(u=yy(b,r))!==null&&u!==void 0?u:b.getRoot();let x=b.getParent(r,b.isBlock);if(!x||!LR(b,x)){if(x=x||v,!x.hasChildNodes()){const H=b.create(n);return Iw(e,H),x.appendChild(H),o.setStart(H,0),o.setEnd(H,0),H}let D=r;for(;D&&D.parentNode!==x;)D=D.parentNode;let B;for(;D&&!b.isBlock(D);)B=D,D=D.previousSibling;const N=(f=B==null?void 0:B.parentElement)===null||f===void 0?void 0:f.nodeName;if(B&&N&&e.schema.isValidChild(N,n.toLowerCase())){const H=B.parentNode,te=b.create(n);for(Iw(e,te),H.insertBefore(te,B),D=B;D&&!b.isBlock(D);){const Q=D.nextSibling;te.appendChild(D),D=Q}o.setStart(r,c),o.setEnd(r,c)}}return r},iq=(e,n)=>{n.normalize();const o=n.lastChild;(!o||Cn(o)&&/^(left|right)$/gi.test(e.getStyle(o,"float",!0)))&&e.add(n,"br")},k$=(e,n)=>{const o=rM(e);return vn(n)?!1:ie(o)?be(Mt.explode(o),n.nodeName.toLowerCase()):o},D$={insert:(e,n)=>{let o,r,c,u,f=!1;const b=e.dom,v=e.schema,x=v.getNonEmptyElements(),D=e.selection.getRng(),B=pc(e),N=re.fromDom(D.startContainer),H=pl(N,D.startOffset),te=H.exists(oe=>Ll(oe)&&!Cl(oe)),Q=D.collapsed&&te,Y=(oe,je)=>NR(e,o,Vt,ht,Yg(e),oe,je),Ae=oe=>{const je=HR(oe,o,r);if(kt(o)&&(oe?je>0:je<o.data.length))return!1;if((o.parentNode===Vt||o===Vt)&&f&&!oe||oe&&Cn(o)&&o===Vt.firstChild)return!0;if(IR(o,"TABLE")||IR(o,"HR"))return rq(o,"BR")?!oe:f&&!oe||!f&&oe;const Dt=new Qs(o,Vt);kt(o)&&(oe&&je===0?Dt.prev():!oe&&je===o.data.length&&Dt.next());let kn;for(;kn=Dt.current();){if(Cn(kn)){if(!kn.getAttribute("data-mce-bogus")){const io=kn.nodeName.toLowerCase();if(x[io]&&io!=="br")return!1}}else if(kt(kn)&&!$m(kn.data))return!1;oe?Dt.prev():Dt.next()}return!0},_e=()=>{let oe;return/^(H[1-6]|PRE|FIGURE)$/.test(c)&&Ot!=="HGROUP"?oe=Y(B):oe=Y(),k$(e,u)&&LR(b,u)&&b.isEmpty(Vt,void 0,{includeZwsp:!0})?oe=b.split(u,Vt):b.insertAfter(oe,Vt),vy(e,oe),oe};nc(b,D).each(oe=>{D.setStart(oe.startContainer,oe.startOffset),D.setEnd(oe.endContainer,oe.endOffset)}),o=D.startContainer,r=D.startOffset;const Pe=!!(n&&n.shiftKey),Ze=!!(n&&n.ctrlKey);Cn(o)&&o.hasChildNodes()&&!Q&&(f=r>o.childNodes.length-1,o=o.childNodes[Math.min(r,o.childNodes.length-1)]||o,f&&kt(o)?r=o.data.length:r=0);const ht=yy(b,o);if(!ht||T$(e,o))return;Pe||(o=cq(e,B,D,o,r));let Vt=b.getParent(o,b.isBlock)||b.getRoot();u=Fe(Vt==null?void 0:Vt.parentNode)?b.getParent(Vt.parentNode,b.isBlock):null,c=Vt?Vt.nodeName.toUpperCase():"";const Ot=u?u.nodeName.toUpperCase():"";if(Ot==="LI"&&!Ze){const oe=u;Vt=oe,u=oe.parentNode,c=Ot}if(Cn(u)&&eq(e,Pe,Vt))return tq(e,Y,Vt);if(/^(LI|DT|DD)$/.test(c)&&Cn(u)&&b.isEmpty(Vt)){E$(e,Y,u,Vt,B);return}if(!Q&&(Vt===e.getBody()||!LR(b,Vt)))return;const lt=Vt.parentNode;let Be;if(Q)Be=Y(B),H.fold(()=>{ds(N,re.fromDom(Be))},oe=>{Ga(oe,re.fromDom(Be))}),e.selection.setCursorLocation(Be,0);else if(jm(Vt))Be=Al(Vt),b.isEmpty(Vt)&&FR(Vt),Iw(e,Be),vy(e,Be);else if(Ae(!1))Be=_e();else if(Ae(!0)&&lt){const oe=nt.fromRangeStart(D),je=_k(oe),Dt=re.fromDom(Vt),io=HE(Dt,oe,e.schema)?XM(Dt,oe,e.schema).bind(is=>P.from(is.getNode())):P.none();Be=lt.insertBefore(Y(),Vt);const zo=IR(Vt,"HR")||je?Be:io.getOr(Vt);vy(e,zo)}else{const oe=zR(D).cloneRange();oe.setEndAfter(Vt);const je=oe.extractContents();sq(je),aq(je),Be=je.firstChild,Vt===Be?Fe(lt)&&b.insertAfter(je,lt):b.insertAfter(je,Vt),_$(b,x,Be),iq(b,Vt),b.isEmpty(Vt)&&FR(Vt),Be.normalize(),b.isEmpty(Be)?(b.remove(Be),_e()):(Iw(e,Be),vy(e,Be))}b.setAttrib(Be,"id",""),e.dispatch("NewBlock",{newBlock:Be})},fakeEventName:"insertParagraph"},lq=(e,n,o)=>{const r=new Qs(n,o);let c;const u=e.getNonEmptyElements();for(;c=r.next();)if(u[c.nodeName.toLowerCase()]||kt(c)&&c.length>0)return!0;return!1},uq=(e,n,o)=>{const r=e.dom.createRng();o?(r.setStartBefore(n),r.setEndBefore(n)):(r.setStartAfter(n),r.setEndAfter(n)),e.selection.setRng(r),AC(e,r)},dq=(e,n)=>{const o=e.selection,r=e.dom,c=o.getRng();let u,f=!1;nc(r,c).each(H=>{c.setStart(H.startContainer,H.startOffset),c.setEnd(H.endContainer,H.endOffset)});let b=c.startOffset,v=c.startContainer;if(Cn(v)&&v.hasChildNodes()){const H=b>v.childNodes.length-1;v=v.childNodes[Math.min(b,v.childNodes.length-1)]||v,H&&kt(v)?b=v.data.length:b=0}let x=r.getParent(v,r.isBlock);const D=x&&x.parentNode?r.getParent(x.parentNode,r.isBlock):null,B=D?D.nodeName.toUpperCase():"",N=!!(n&&n.ctrlKey);B==="LI"&&!N&&(x=D),kt(v)&&b>=v.data.length&&(lq(e.schema,v,x||r.getRoot())||(u=r.create("br"),c.insertNode(u),c.setStartAfter(u),c.setEndAfter(u),f=!0)),u=r.create("br"),nv(r,c,u),uq(e,u,f),e.undoManager.add()},mq=(e,n)=>{const o=re.fromTag("br");Ga(re.fromDom(n),o),e.undoManager.add()},fq=(e,n)=>{hq(e.getBody(),n)||Ki(re.fromDom(n),re.fromTag("br"));const o=re.fromTag("br");Ki(re.fromDom(n),o),uq(e,o.dom,!1),e.undoManager.add()},gq=e=>xr(e.getNode()),hq=(e,n)=>gq(nt.after(n))?!0:Kc(e,nt.after(n)).map(o=>xr(o.getNode())).getOr(!1),VR=e=>e&&e.nodeName==="A"&&"href"in e,pq=e=>e.fold(Ne,VR,VR,Ne),UR=e=>{const n=Te(Jf,e),o=nt.fromRangeStart(e.selection.getRng());return Sh(n,e.getBody(),o).filter(pq)},og=(e,n)=>{n.fold(Ct,Te(mq,e),Te(fq,e),Ct)},O$={insert:(e,n)=>{const o=UR(e);o.isSome()?o.each(Te(og,e)):dq(e,n)},fakeEventName:"insertLineBreak"},Lw=(e,n)=>BR(e).filter(o=>n.length>0&&ki(re.fromDom(o),n)).isSome(),WR=e=>Lw(e,ss(e)),R$=e=>Lw(e,wd(e)),gu=Za.generate([{br:[]},{block:[]},{none:[]}]),yq=(e,n)=>R$(e),M$=e=>(n,o)=>C$(n)===e,B$=(e,n)=>(o,r)=>Xj(o)===e.toUpperCase()===n,Cq=e=>{const n=yy(e.dom,e.selection.getStart());return vn(n)},Hw=e=>B$("pre",e),F$=()=>B$("summary",!0),ZA=e=>(n,o)=>m4(n)===e,wq=(e,n)=>WR(e),ZR=(e,n)=>n,jR=e=>{const n=pc(e),o=yy(e.dom,e.selection.getStart());return Fe(o)&&e.schema.isValidChild(o.nodeName,n)},Sq=e=>{const n=e.selection.getRng(),o=re.fromDom(n.startContainer),c=pl(o,n.startOffset).map(u=>Ll(u)&&!Cl(u));return n.collapsed&&c.getOr(!0)},Nd=(e,n)=>(o,r)=>st(e,(u,f)=>u&&f(o,r),!0)?P.some(n):P.none(),xq=(e,n)=>uP([Nd([yq],gu.none()),Nd([Hw(!0),Cq],gu.none()),Nd([F$()],gu.br()),Nd([Hw(!0),ZA(!1),ZR],gu.br()),Nd([Hw(!0),ZA(!1)],gu.block()),Nd([Hw(!0),ZA(!0),ZR],gu.block()),Nd([Hw(!0),ZA(!0)],gu.br()),Nd([M$(!0),ZR],gu.br()),Nd([M$(!0)],gu.block()),Nd([wq],gu.br()),Nd([ZR],gu.br()),Nd([jR],gu.block()),Nd([Sq],gu.block())],[e,!!(n&&n.shiftKey)]).getOr(gu.none()),jA=(e,n,o)=>{n.mode.isReadOnly()||(n.selection.isCollapsed()||yB(n),!(Fe(o)&&UA(n,e.fakeEventName).isDefaultPrevented())&&(e.insert(n,o),Fe(o)&&by(n,e.fakeEventName)))},N$=(e,n)=>{if(e.mode.isReadOnly())return;const o=()=>jA(O$,e,n),r=()=>jA(D$,e,n),c=xq(e,n);switch(f4(e)){case"linebreak":c.fold(o,o,Ct);break;case"block":c.fold(r,r,Ct);break;case"invert":c.fold(r,o,Ct);break;default:c.fold(o,r,Ct);break}},P$=Do(),Eq=P$.os.isiOS()&&P$.browser.isSafari(),$$=(e,n)=>{n.isDefaultPrevented()||(n.preventDefault(),wT(e.undoManager),e.undoManager.transact(()=>{N$(e,n)}))},qA=e=>{if(!e.collapsed)return!1;const n=e.startContainer;if(kt(n)){const o=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,r=n.data.charAt(e.startOffset-1);return o.test(r)}else return!1},Tq=e=>{let n=P.none();const o=c=>{n=P.some(c.selection.getBookmark()),c.undoManager.add()},r=(c,u)=>{c.undoManager.undo(),n.fold(Ct,f=>c.selection.moveToBookmark(f)),$$(c,u),n=P.none()};e.on("keydown",c=>{c.keyCode===Qt.ENTER&&(Eq&&qA(e.selection.getRng())?o(e):$$(e,c))}),e.on("keyup",c=>{c.keyCode===Qt.ENTER&&n.each(()=>r(e,c))})},Aq=(e,n,o)=>{const r=Po.os.isMacOS()||Po.os.isiOS();q0([{keyCode:Qt.END,action:oo(t8,e,!0)},{keyCode:Qt.HOME,action:oo(t8,e,!1)},...r?[]:[{keyCode:Qt.HOME,action:oo(EA,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:Qt.END,action:oo(EA,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:Qt.END,action:oo(l8,e,!0)},{keyCode:Qt.HOME,action:oo(l8,e,!1)},{keyCode:Qt.END,action:oo(ww,e,!0,n)},{keyCode:Qt.HOME,action:oo(ww,e,!1,n)}],o).each(c=>{o.preventDefault()})},qR=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||Aq(e,n,o)})},GR=e=>{e.on("input",n=>{n.isComposing||WE(e)})},_q=Do(),kq=(e,n,o)=>{q0([{keyCode:Qt.PAGE_UP,action:oo(ww,e,!1,n)},{keyCode:Qt.PAGE_DOWN,action:oo(ww,e,!0,n)}],o)},KR=e=>e.stopImmediatePropagation(),I$=e=>e.keyCode===Qt.PAGE_UP||e.keyCode===Qt.PAGE_DOWN,L$=(e,n,o)=>{o&&!e.get()?n.on("NodeChange",KR,!0):!o&&e.get()&&n.off("NodeChange",KR),e.set(o)},Dq=(e,n)=>{if(_q.os.isMacOS())return;const o=gn(!1);e.on("keydown",r=>{I$(r)&&L$(o,e,!0)}),e.on("keyup",r=>{r.isDefaultPrevented()||kq(e,n,r),I$(r)&&o.get()&&(L$(o,e,!1),e.nodeChanged())})},H$=(e,n)=>e===n||e.contains(n),Oq=(e,n)=>!H$(e.getBody(),n.startContainer)||!H$(e.getBody(),n.endContainer)?!0:MM(e.dom,n),Rq=e=>{e.on("beforeinput",n=>{(!e.selection.isEditable()||ke(n.getTargetRanges(),o=>!Oq(e,o)))&&n.preventDefault()})},YR=(e,n)=>{const o=n.container(),r=n.offset();return kt(o)?(o.insertData(r,e),P.some(nt(o,r+e.length))):yp(n).map(c=>{const u=re.fromText(e);return n.isAtEnd()?Ki(c,u):Ga(c,u),nt(u.dom,e.length)})},zw=Te(YR,ir),XR=Te(YR," "),z$=(e,n,o)=>oB(e,n,o)?zw(n):XR(n),Mq=e=>n=>n.fold(o=>Ci(e.dom,nt.before(o)),o=>Yc(o),o=>Vu(o),o=>Kc(e.dom,nt.after(o))),Bq=(e,n,o)=>r=>oB(e,r,o)?zw(n):XR(n),Vw=e=>n=>{e.selection.setRng(n.toRange()),e.nodeChanged()},Fq=(e,n)=>e.isEditable(e.getParent(n,"summary")),V$=e=>{const n=nt.fromRangeStart(e.selection.getRng()),o=re.fromDom(e.getBody());if(e.selection.isCollapsed()){const r=Te(Jf,e),c=nt.fromRangeStart(e.selection.getRng());return Sh(r,e.getBody(),c).bind(Mq(o)).map(u=>()=>Bq(o,n,e.schema)(u).each(Vw(e)))}else return P.none()},Nq=e=>{const n=()=>{const o=re.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete");const r=nt.fromRangeStart(e.selection.getRng());z$(o,r,e.schema).each(Vw(e))};return Qo(Po.browser.isFirefox()&&e.selection.isEditable()&&Fq(e.dom,e.selection.getRng().startContainer),n)},U$=(e,n)=>{c8([{keyCode:Qt.SPACEBAR,action:oo(V$,e)},{keyCode:Qt.SPACEBAR,action:oo(Nq,e)}],n).each(o=>{n.preventDefault(),UA(e,"insertText",{data:" "}).isDefaultPrevented()||(o(),by(e,"insertText",{data:" "}))})},Pq=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||U$(e,n)})},$q=e=>A4(e)?[{keyCode:Qt.TAB,action:oo(B8,e,!0)},{keyCode:Qt.TAB,shiftKey:!0,action:oo(B8,e,!1)}]:[],Iq=(e,n)=>{q0([...$q(e)],n).each(o=>{n.preventDefault()})},Lq=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||Iq(e,n)})},Hq=e=>{if(e.addShortcut("Meta+P","","mcePrint"),l$(e),Zu(e))return gn(null);{const n=Cw(e);return Rq(e),SZ(e),F8(e,n),Kj(e,n),Tq(e),Pq(e),GR(e),Lq(e),qR(e,n),Dq(e,n),n}},Cy=(e,n)=>{const o=dw(e);o===null||fw(e,o)||e.undoManager.transact(()=>{en(n.styles)&&e.dom.setStyles(o,n.styles),en(n.attrs)&&xo(n.attrs,(r,c)=>e.dom.setAttrib(o,c,r))})},JR=(e,n)=>()=>{const o=dw(e);return Fe(o)&&o.nodeName===n},zq=e=>{e.addCommand("InsertUnorderedList",(n,o)=>{nA(e,"UL",o)}),e.addCommand("InsertOrderedList",(n,o)=>{nA(e,"OL",o)}),e.addCommand("InsertDefinitionList",(n,o)=>{nA(e,"DL",o)}),e.addCommand("RemoveList",()=>{gw(e)}),e.addCommand("mceListUpdate",(n,o)=>{en(o)&&Cy(e,o)}),e.addCommand("mceListBackspaceDelete",(n,o)=>{aO(e,o)}),e.addQueryStateHandler("InsertUnorderedList",JR(e,"UL")),e.addQueryStateHandler("InsertOrderedList",JR(e,"OL")),e.addQueryStateHandler("InsertDefinitionList",JR(e,"DL"))},W$=e=>{e.on("keydown",n=>{n.keyCode===Qt.BACKSPACE?aO(e,!1)&&n.preventDefault():n.keyCode===Qt.DELETE&&aO(e,!0)&&n.preventDefault()})},Z$=e=>e.type===3,j$=e=>e.length===0,Vq=e=>{const n=(c,u)=>{const f=Ii.create("li");me(c,b=>f.append(b)),u?e.insert(f,u,!0):e.append(f)},o=(c,u)=>Z$(u)?[...c,u]:!j$(c)&&!Z$(u)?(n(c,u),[]):c,r=st(e.children(),o,[]);j$(r)||n(r)},q$=e=>{e.on("PreInit",()=>{const{parser:n}=e;n.addNodeFilter("ul,ol",o=>me(o,Vq))})},Uq=e=>{e.on("keydown",n=>{n.keyCode!==Qt.TAB||Qt.metaKeyPressed(n)||e.undoManager.transact(()=>{(n.shiftKey?YD(e):zN(e))&&n.preventDefault()})})},Wq=e=>{O4(e)&&Uq(e)},wJ=e=>{W$(e),zq(e),q$(e),Wq(e)};class GA{constructor(n){this.lastPath=[],this.editor=n;let o;const r=this;"onselectionchange"in n.getDoc()||n.on("NodeChange click mouseup keyup focus",c=>{const u=n.selection.getRng(),f={startContainer:u.startContainer,startOffset:u.startOffset,endContainer:u.endContainer,endOffset:u.endOffset};(c.type==="nodechange"||!ik(f,o))&&n.dispatch("SelectionChange"),o=f}),n.on("contextmenu",()=>{xC(n),n.dispatch("SelectionChange")}),n.on("SelectionChange",()=>{const c=n.selection.getStart(!0);c&&f0(n)&&!r.isSameElementPath(c)&&n.dom.isChildOf(c,n.getBody())&&n.nodeChanged({selectionChange:!0})}),n.on("mouseup",c=>{!c.isDefaultPrevented()&&f0(n)&&(n.selection.getNode().nodeName==="IMG"?_d.setEditorTimeout(n,()=>{n.nodeChanged()}):n.nodeChanged())})}nodeChanged(n={}){const o=this.editor,r=o.selection;let c;if(o.initialized&&r&&!Ix(o)&&!c0(o)){const u=o.getBody();c=r.getStart(!0)||u,(c.ownerDocument!==o.getDoc()||!o.dom.isChildOf(c,u))&&(c=u);const f=[];o.dom.getParent(c,b=>b===u?!0:(f.push(b),!1)),o.dispatch("NodeChange",{...n,element:c,parents:f})}}isSameElementPath(n){let o;const r=this.editor,c=wo(r.dom.getParents(n,ft,r.getBody()));if(c.length===this.lastPath.length){for(o=c.length;o>=0&&c[o]===this.lastPath[o];o--);if(o===-1)return this.lastPath=c,!0}return this.lastPath=c,!1}}const G$="x-tinymce/html",KA=bt(G$),QR="<!-- "+G$+" -->",Zq=e=>QR+e,jq=e=>e.replace(QR,""),K$=e=>e.indexOf(QR)!==-1,qq=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),Gq=(e,n)=>{let o="<"+e;const r=Ma(n,(c,u)=>u+'="'+Og.encodeAllRaw(c)+'"');return r.length&&(o+=" "+r.join(" ")),o+">"},Kq=(e,n,o)=>{const r=e.split(/\n\n/),c=Gq(n,o),u="</"+n+">",f=Oe(r,v=>v.split(/\n/).join("<br />")),b=v=>c+v+u;return f.length===1?f[0]:Oe(f,b).join("")},Y$="%MCEPASTEBIN%",Yq=(e,n)=>{const{dom:o,selection:r}=e,c=e.getBody();n.set(r.getRng());const u=o.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},Y$);Po.browser.isFirefox()&&o.setStyle(u,"left",o.getStyle(c,"direction",!0)==="rtl"?65535:-65535),o.bind(u,"beforedeactivate focusin focusout",f=>{f.stopPropagation()}),u.focus(),r.select(u,!0)},Xq=(e,n)=>{const o=e.dom;if(e5(e)){let r;const c=n.get();for(;r=e5(e);)o.remove(r),o.unbind(r);c&&e.selection.setRng(c)}n.set(null)},e5=e=>e.dom.get("mcepastebin"),qs=e=>Fe(e)&&e.id==="mcepastebin",Jq=e=>{const n=e.dom,o=(f,b)=>{f.appendChild(b),n.remove(b,!0)},[r,...c]=tt(e.getBody().childNodes,qs);me(c,f=>{o(r,f)});const u=n.select("div[id=mcepastebin]",r);for(let f=u.length-1;f>=0;f--){const b=n.create("div");r.insertBefore(b,u[f]),o(b,u[f])}return r?r.innerHTML:""},t5=e=>e===Y$,Qq=e=>{const n=gn(null);return{create:()=>Yq(e,n),remove:()=>Xq(e,n),getEl:()=>e5(e),getHtml:()=>Jq(e),getLastRng:n.get}},YA=(e,n)=>(Mt.each(n,o=>{Bt(o,RegExp)?e=e.replace(o,""):e=e.replace(o[0],o[1])}),e),X$=e=>{const n=Pu(),o=hh({},n);let r="";const c=n.getVoidElements(),u=Mt.makeMap("script noscript style textarea video audio iframe object"," "),f=n.getBlockElements(),b=v=>{const x=v.name,D=v;if(x==="br"){r+=`
`;return}if(x!=="wbr"){if(c[x]&&(r+=" "),u[x]){r+=" ";return}if(v.type===3&&(r+=v.value),!(v.name in n.getVoidElements())){let B=v.firstChild;if(B)do b(B);while(B=B.next)}f[x]&&D.next&&(r+=`
`,x==="p"&&(r+=`
`))}};return e=YA(e,[/<!\[[^\]]+\]>/g]),b(o.parse(e)),r},J$=e=>(e=YA(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(o,r,c)=>!r&&!c?" ":ir],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),eG=e=>{let n=0;return()=>e+n++},tG=e=>{const n=e.toLowerCase(),o={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return Mt.hasOwn(o,n)?"image/"+o[n]:"image/"+n},Q$=(e,n)=>{const o=hh({sanitize:X2(e),sandbox_iframes:yv(e),sandbox_iframes_exclusions:r0(e),convert_unsafe_embeds:Q2(e)},e.schema);o.addNodeFilter("meta",c=>{Mt.each(c,u=>{u.remove()})});const r=o.parse(n,{forced_root_block:!1,isRootContent:!0});return Ap({validate:!0},e.schema).serialize(r)},Uw=(e,n)=>({content:e,cancelled:n}),nG=(e,n,o)=>{const r=e.dom.create("div",{style:"display:none"},n),c=u4(e,r,o);return Uw(c.node.innerHTML,c.isDefaultPrevented())},oG=(e,n,o)=>{const r=oM(e,n,o),c=Q$(e,r.content);return e.hasEventListeners("PastePostProcess")&&!r.isDefaultPrevented()?nG(e,c,o):Uw(c,r.isDefaultPrevented())},n5=(e,n,o)=>oG(e,n,o),o5=(e,n)=>(e.insertContent(n,{merge:w4(e),paste:!0}),!0),s5=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),sG=(e,n)=>s5(n)&&ke(Yx(e),o=>fa(n.toLowerCase(),`.${o.toLowerCase()}`)),rG=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.insertContent('<img src="'+n+'">')}),!0),eI=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.execCommand("mceInsertLink",!1,n)}),!0),aG=(e,n,o)=>!e.selection.isCollapsed()&&s5(n)?eI(e,n,o):!1,cG=(e,n,o)=>sG(e,n)?rG(e,n,o):!1,tI=(e,n)=>{Mt.each([aG,cG,o5],o=>!o(e,n,o5))},iG=(e,n,o)=>{o||!jx(e)?o5(e,n):tI(e,n)},lG=eG("mceclip"),uG=e=>{const n=cR();return iR(n,e),_A(n),n},Ww=(e,n,o,r,c)=>{const u=n5(e,n,o);if(!u.cancelled){const f=u.content,b=()=>iG(e,f,r);c?UA(e,"insertFromPaste",{dataTransfer:uG(f)}).isDefaultPrevented()||(b(),by(e,"insertFromPaste")):b()}},XA=(e,n,o,r)=>{const c=o||K$(n);Ww(e,jq(n),c,!1,r)},JA=(e,n,o)=>{const r=e.dom.encode(n).replace(/\r\n/g,`
`),c=Ky(r,G2(e)),u=Kq(c,pc(e),gp(e));Ww(e,u,!1,!0,o)},nI=e=>{const n={};if(e&&e.types)for(let o=0;o<e.types.length;o++){const r=e.types[o];try{n[r]=e.getData(r)}catch{n[r]=""}}return n},sg=(e,n)=>n in e&&e[n].length>0,oI=e=>sg(e,"text/html")||sg(e,"text/plain"),sI=(e,n)=>{const o=n.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return Fe(o)?e.dom.encode(o[1]):void 0},dG=(e,n,o,r)=>{const c=lG(),u=cs(e)&&Fe(o.name),f=u?sI(e,o.name):c,b=u?o.name:void 0,v=n.create(c,o,r,f,b);return n.add(v),v},mG=(e,n)=>{E3(n.uri).each(({data:o,type:r,base64Encoded:c})=>{const u=c?o:btoa(o),f=n.file,b=e.editorUpload.blobCache,v=b.getByData(u,r),x=v??dG(e,b,f,u);XA(e,`<img src="${x.blobUri()}">`,!1,!0)})},fG=e=>e.type==="paste",gG=e=>Promise.all(Oe(e,n=>A3(n).then(o=>({file:n,uri:o})))),rI=e=>{const n=Yx(e);return o=>jn(o.type,"image/")&&ke(n,r=>tG(r)===o.type)},hG=(e,n)=>{const o=n.items?eo(So(n.items),c=>c.kind==="file"?[c.getAsFile()]:[]):[],r=n.files?So(n.files):[];return tt(o.length>0?o:r,rI(e))},r5=(e,n,o)=>{const r=fG(n)?n.clipboardData:n.dataTransfer;if(eh(e)&&r){const c=hG(e,r);if(c.length>0)return n.preventDefault(),gG(c).then(u=>{o&&e.selection.setRng(o),me(u,f=>{mG(e,f)})}),!0}return!1},QA=e=>{var n,o;return Po.os.isAndroid()&&((o=(n=e.clipboardData)===null||n===void 0?void 0:n.items)===null||o===void 0?void 0:o.length)===0},a5=e=>Qt.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,Zw=(e,n,o,r,c)=>{let u=J$(o);const f=sg(n,KA())||K$(o),b=!f&&qq(u),v=s5(u);(t5(u)||!u.length||b&&!v)&&(r=!0),(r||v)&&(sg(n,"text/plain")&&b?u=n["text/plain"]:u=X$(u)),!t5(u)&&(r?JA(e,u,c):XA(e,u,f,c))},pG=(e,n,o)=>{let r;const c=()=>n.getLastRng()||e.selection.getRng();e.on("keydown",u=>{a5(u)&&!u.isDefaultPrevented()&&(r=u.shiftKey&&u.keyCode===86)}),e.on("paste",u=>{if(u.isDefaultPrevented()||QA(u))return;const f=o.get()==="text"||r;r=!1;const b=nI(u.clipboardData);!oI(b)&&r5(e,u,c())||(sg(b,"text/html")?(u.preventDefault(),Zw(e,b,b["text/html"],f,!0)):sg(b,"text/plain")&&sg(b,"text/uri-list")?(u.preventDefault(),Zw(e,b,b["text/plain"],f,!0)):(n.create(),_d.setEditorTimeout(e,()=>{const v=n.getHtml();n.remove(),Zw(e,b,v,f,!1)},0)))})},bG=e=>{const n=c=>jn(c,"webkit-fake-url"),o=c=>jn(c,"data:"),r=c=>{var u;return((u=c.data)===null||u===void 0?void 0:u.paste)===!0};e.parser.addNodeFilter("img",(c,u,f)=>{if(!eh(e)&&r(f))for(const b of c){const v=b.attr("src");ie(v)&&!b.attr("data-mce-object")&&v!==Po.transparentSrc&&(n(v)||!vv(e)&&o(v))&&b.remove()}})},wy=(e,n,o)=>{pG(e,n,o),bG(e)},vG=(e,n)=>{n.get()==="text"?(n.set("html"),Ax(e,!1)):(n.set("text"),Ax(e,!0)),e.focus()},Sy=(e,n)=>{e.addCommand("mceTogglePlainTextPaste",()=>{vG(e,n)}),e.addCommand("mceInsertClipboardContent",(o,r)=>{r.html&&XA(e,r.html,r.internal,!1),r.text&&JA(e,r.text,!1)})},jw=(e,n,o)=>{if(e)try{return e.clearData(),e.setData("text/html",n),e.setData("text/plain",o),e.setData(KA(),n),!0}catch{return!1}else return!1},aI=(e,n,o,r)=>{jw(e.clipboardData,n.html,n.text)?(e.preventDefault(),r()):o(n.html,r)},cI=e=>(n,o)=>{const{dom:r,selection:c}=e,u=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),f=r.create("div",{contenteditable:"true"},n);r.setStyles(u,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),u.appendChild(f),r.add(e.getBody(),u);const b=c.getRng();f.focus();const v=r.createRng();v.selectNodeContents(f),c.setRng(v),_d.setEditorTimeout(e,()=>{c.setRng(b),r.remove(u),o()},0)},J0=e=>({html:Zq(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),yG=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),e_=e=>!e.selection.isCollapsed()||yG(e),CG=(e,n)=>o=>{!o.isDefaultPrevented()&&e_(e)&&e.selection.isEditable()&&aI(o,J0(e),cI(e),()=>{if(Po.browser.isChromium()||Po.browser.isFirefox()){const r=e.selection.getRng();_d.setEditorTimeout(e,()=>{e.selection.setRng(r),jO(e,n)},0)}else jO(e,n)})},iI=e=>n=>{!n.isDefaultPrevented()&&e_(e)&&aI(n,J0(e),cI(e),Ct)},lI=(e,n)=>{e.on("cut",CG(e,n)),e.on("copy",iI(e))},t_=(e,n)=>{var o,r;return sf.getCaretRangeFromPoint((o=n.clientX)!==null&&o!==void 0?o:0,(r=n.clientY)!==null&&r!==void 0?r:0,e.getDoc())},uI=e=>{const n=e["text/plain"];return n?n.indexOf("file://")===0:!1},dI=(e,n)=>{e.focus(),n&&e.selection.setRng(n)},wG=e=>ke(e.files,n=>/^image\//.test(n.type)),mI=(e,n,o,r)=>{const c=e.getParent(o,f=>yt(n,f));if(!K(e.getParent(o,"summary")))return!0;if(c&&to(r,"text/html")){const f=new DOMParser().parseFromString(r["text/html"],"text/html").body;return!K(f.querySelector(c.nodeName.toLowerCase()))}else return!1},SG=e=>{e.on("input",n=>{const o=r=>K(r.querySelector("summary"));if(n.inputType==="deleteByDrag"){const r=tt(e.dom.select("details"),o);me(r,c=>{xr(c.firstChild)&&c.firstChild.remove();const u=e.dom.create("summary");u.appendChild(cp().dom),c.prepend(u)})}})},fI=(e,n)=>{Qg(e)&&e.on("dragend dragover draggesture dragdrop drop drag",o=>{o.preventDefault(),o.stopPropagation()}),eh(e)||e.on("drop",o=>{const r=o.dataTransfer;r&&wG(r)&&o.preventDefault()}),e.on("drop",o=>{if(o.isDefaultPrevented())return;const r=t_(e,o);if(vn(r))return;const c=nI(o.dataTransfer),u=sg(c,KA());if((!oI(c)||uI(c))&&r5(e,o,r))return;const f=c[KA()],b=f||c["text/html"]||c["text/plain"],v=mI(e.dom,e.schema,r.startContainer,c),x=n.get();x&&!v||b&&(o.preventDefault(),_d.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{(f||x&&v)&&e.execCommand("Delete"),dI(e,r);const D=J$(b);c["text/html"]?XA(e,D,u,!0):JA(e,D,!0)})}))}),e.on("dragstart",o=>{n.set(!0)}),e.on("dragover dragend",o=>{eh(e)&&!n.get()&&(o.preventDefault(),dI(e,t_(e,o))),o.type==="dragend"&&n.set(!1)}),SG(e)},c5=e=>{const n=c=>u=>{c(e,u)},o=Vx(e);he(o)&&e.on("PastePreProcess",n(o));const r=Ux(e);he(r)&&e.on("PastePostProcess",n(r))},gI=(e,n)=>{e.on("PastePreProcess",o=>{o.content=n(e,o.content,o.internal)})},xG=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,hI=e=>Mt.trim(e).replace(xG,$g).toLowerCase(),EG=(e,n,o)=>{const r=pv(e);if(o||r==="all"||!Zx(e))return n;const c=r?r.split(/[, ]/):[];if(c&&r!=="none"){const u=e.dom,f=e.selection.getNode();n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(b,v,x,D)=>{const B=u.parseStyle(u.decode(x)),N={};for(let te=0;te<c.length;te++){const Q=B[c[te]];let Y=Q,Ae=u.getStyle(f,c[te],!0);/color/.test(c[te])&&(Y=hI(Y),Ae=hI(Ae)),Ae!==Y&&(N[c[te]]=Q)}const H=u.serializeStyle(N,"span");return H?v+' style="'+H+'"'+D:v+D})}else n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return n=n.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(u,f,b,v)=>f+' style="'+b+'"'+v),n},pI=e=>{(Po.browser.isChromium()||Po.browser.isSafari())&&gI(e,EG)},i5=(e,n)=>{const o=gn(!1),r=gn(bv(e)?"text":"html"),c=Qq(e);pI(e),Sy(e,r),c5(e),e.addQueryStateHandler("mceTogglePlainTextPaste",()=>r.get()==="text"),e.on("PreInit",()=>{lI(e,n),fI(e,o),wy(e,c,r)})},TG=e=>{e.on("click",n=>{e.dom.getParent(n.target,"details")&&n.preventDefault()})},bI=e=>{e.parser.addNodeFilter("details",n=>{const o=_4(e);me(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})}),e.serializer.addNodeFilter("details",n=>{const o=k4(e);me(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})})},vI=e=>{TG(e),bI(e)},AG=xr,l5=kt,_G=e=>mr(e.dom),kG=e=>fi(e.dom),qw=e=>n=>Yo(re.fromDom(e),n),DG=(e,n,o)=>Ls(re.fromDom(e),r=>kG(r)||o.isBlock(Oo(r)),qw(n)).getOr(re.fromDom(n)).dom,yI=(e,n)=>Ls(re.fromDom(e),_G,qw(n)),u5=(e,n,o)=>{const r=new Qs(e,n),c=o?r.next.bind(r):r.prev.bind(r);let u=e;for(let f=o?e:c();f&&!AG(f);f=c())gr(f)&&(u=f);return u},CI=(e,n,o)=>{const c=nt.fromRangeStart(e).getNode(),u=DG(c,n,o),f=u5(c,u,!1),b=u5(c,u,!0),v=document.createRange();return yI(f,u).fold(()=>{l5(f)?v.setStart(f,0):v.setStartBefore(f)},x=>v.setStartBefore(x.dom)),yI(b,u).fold(()=>{l5(b)?v.setEnd(b,b.data.length):v.setEndAfter(b)},x=>v.setEndAfter(x.dom)),v},OG=e=>{const n=CI(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(eT(n))},RG=e=>{e.on("mousedown",n=>{n.detail>=3&&(n.preventDefault(),OG(e))})};var xy;(function(e){e.Before="before",e.After="after"})(xy||(xy={}));const MG=(e,n)=>Math.abs(e.left-n),BG=(e,n)=>Math.abs(e.right-n),wI=(e,n)=>e>=n.top&&e<=n.bottom,FG=(e,n)=>e.top<n.bottom&&e.bottom>n.top,NG=(e,n)=>{const o=S2(e,n)/Math.min(e.height,n.height);return FG(e,n)&&o>.5},PG=(e,n)=>{const o=tt(e,r=>wI(n,r));return w2(o).fold(()=>[[],e],r=>{const{pass:c,fail:u}=at(e,f=>NG(f,r));return[c,u]})},$G=(e,n)=>({node:e.node,position:MG(e,n)<BG(e,n)?xy.Before:xy.After}),IG=(e,n,o)=>n>e.left&&n<e.right?0:Math.min(Math.abs(e.left-n),Math.abs(e.right-n)),d5=(e,n,o,r)=>{const c=B=>gr(B.node)?P.some(B):Cn(B.node)?d5(So(B.node.childNodes),n,o,!1):P.none(),u=(B,N,H)=>c(N).filter(te=>Math.abs(H(B,n,o)-H(te,n,o))<2&&kt(te.node)),f=(B,N)=>{const H=wn(B,(te,Q)=>N(te,n,o)-N(Q,n,o));return ks(H,c).map(te=>r&&!kt(te.node)&&H.length>1?u(te,H[1],N).getOr(te):te)},[b,v]=PG(W0(e),o),{pass:x,fail:D}=at(v,B=>B.top<o);return f(b,IG).orThunk(()=>f(D,P1)).orThunk(()=>f(x,P1))},LG=(e,n,o,r)=>{const c=(u,f)=>{const b=x=>Cn(x)&&x.classList.contains("mce-drag-container"),v=tt(u.dom.childNodes,St(b));return f.fold(()=>d5(v,o,r,!0),x=>{const D=tt(v,B=>B!==x.dom);return d5(D,o,r,!0)}).orThunk(()=>(Yo(u,e)?P.none():Di(u)).bind(D=>c(D,P.some(u))))};return c(n,P.none())},HG=(e,n,o)=>{const r=re.fromDom(e),c=hl(r),f=re.fromPoint(c,n,o).filter(b=>Lc(r,b)).getOr(r);return LG(r,f,n,o)},m5=(e,n,o)=>HG(e,n,o).filter(r=>i0(r.node)).map(r=>$G(r,n)),f5=e=>{var n,o;const r=e.getBoundingClientRect(),c=e.ownerDocument,u=c.documentElement,f=c.defaultView;return{top:r.top+((n=f==null?void 0:f.scrollY)!==null&&n!==void 0?n:0)-u.clientTop,left:r.left+((o=f==null?void 0:f.scrollX)!==null&&o!==void 0?o:0)-u.clientLeft}},zG=e=>e.inline?f5(e.getBody()):{left:0,top:0},VG=e=>{const n=e.getBody();return e.inline?{left:n.scrollLeft,top:n.scrollTop}:{left:0,top:0}},UG=e=>{const n=e.getBody(),o=e.getDoc().documentElement,r={left:n.scrollLeft,top:n.scrollTop},c={left:n.scrollLeft||o.scrollLeft,top:n.scrollTop||o.scrollTop};return e.inline?r:c},Gw=(e,n)=>{if(n.target.ownerDocument!==e.getDoc()){const o=f5(e.getContentAreaContainer()),r=UG(e);return{left:n.pageX-o.left+r.left,top:n.pageY-o.top+r.top}}return{left:n.pageX,top:n.pageY}},WG=(e,n,o)=>({pageX:o.left-e.left+n.left,pageY:o.top-e.top+n.top}),ZG=(e,n)=>WG(zG(e),VG(e),Gw(e,n)),g5=e=>({target:e,srcElement:e}),jG=(e,n,o,r)=>({...n,dataTransfer:r,type:e,...g5(o)}),qG=(e,n,o)=>{const r=$n("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:r,initEvent:r,preventDefault:Ct,stopImmediatePropagation:Ct,stopPropagation:Ct,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,layerX:0,layerY:0,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:r,initMouseEvent:r,getModifierState:r,dataTransfer:o,...g5(n)}},GG=(e,n)=>{const o=QZ(e);return n==="dragstart"?(h8(o),aR(o)):n==="drop"?(qZ(o),_A(o)):(K0(o),v8(o)),o},KG=(e,n,o,r)=>{const c=GG(o,e);return Kn(r)?qG(e,n,c):jG(e,r,n,c)},n_=32,o_=100,Kw=8,Yw=16,SI=mr,YG=Uf(SI,fi),XG=(e,n,o)=>SI(o)&&o!==n&&e.isEditable(o.parentElement),SJ=(e,n,o)=>vn(n)||n===o||e.dom.isChildOf(n,o)?!1:e.dom.isEditable(n),JG=(e,n,o,r)=>{const c=e.dom,u=n.cloneNode(!0);c.setStyles(u,{width:o,height:r}),c.setAttrib(u,"data-mce-selected",null);const f=c.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return c.setStyles(f,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:o,height:r}),c.setStyles(u,{margin:0,boxSizing:"border-box"}),f.appendChild(u),f},QG=(e,n)=>{e.parentNode!==n&&n.appendChild(e)},Ey=(e,n)=>o=>()=>{const r=e==="left"?o.scrollX:o.scrollY;o.scroll({[e]:r+n,behavior:"smooth"})},Xw=Ey("left",-n_),xI=Ey("left",n_),EI=Ey("top",-n_),TI=Ey("top",n_),AI=(e,n,o,r,c,u,f,b,v,x,D,B)=>{let N=0,H=0;e.style.left=n.pageX+"px",e.style.top=n.pageY+"px",n.pageX+o>c&&(N=n.pageX+o-c),n.pageY+r>u&&(H=n.pageY+r-u),e.style.width=o-N+"px",e.style.height=r-H+"px";const te=v.clientHeight,Q=v.clientWidth,Y=f+v.getBoundingClientRect().top,Ae=b+v.getBoundingClientRect().left;D.on(_e=>{_e.intervalId.clear(),_e.dragging&&B&&(f+Kw>=te?_e.intervalId.set(TI(x)):f-Kw<=0?_e.intervalId.set(EI(x)):b+Kw>=Q?_e.intervalId.set(xI(x)):b-Kw<=0?_e.intervalId.set(Xw(x)):Y+Yw>=window.innerHeight?_e.intervalId.set(TI(window)):Y-Yw<=0?_e.intervalId.set(EI(window)):Ae+Yw>=window.innerWidth?_e.intervalId.set(xI(window)):Ae-Yw<=0&&_e.intervalId.set(Xw(window)))})},_I=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},h5=(e,n)=>{const o=e.getParent(n.parentNode,e.isBlock);_I(n),o&&o!==e.getRoot()&&e.isEmpty(o)&&om(re.fromDom(o))},kI=e=>e.button===0,eK=(e,n)=>({pageX:n.pageX-e.relX,pageY:n.pageY+5}),tK=(e,n)=>o=>{if(kI(o)){const r=rn(n.dom.getParents(o.target),YG).getOr(null);if(Fe(r)&&XG(n.dom,n.getBody(),r)){const c=n.dom.getPos(r),u=n.getBody(),f=n.getDoc().documentElement;e.set({element:r,dataTransfer:cR(),dragging:!1,screenX:o.screenX,screenY:o.screenY,maxX:(n.inline?u.scrollWidth:f.offsetWidth)-2,maxY:(n.inline?u.scrollHeight:f.offsetHeight)-2,relX:o.pageX-c.x,relY:o.pageY-c.y,width:r.offsetWidth,height:r.offsetHeight,ghost:JG(n,r,r.offsetWidth,r.offsetHeight),intervalId:Gs(o_)})}}},DI=(e,n,o)=>{e._selectionOverrides.hideFakeCaret(),m5(e.getBody(),n,o).fold(()=>e.selection.placeCaretAt(n,o),r=>{const c=e._selectionOverrides.showCaret(1,r.node,r.position===xy.Before,!1);c?e.selection.setRng(c):e.selection.placeCaretAt(n,o)})},Jw=(e,n,o,r,c)=>{n==="dragstart"&&iR(r,e.dom.getOuterHTML(o));const u=KG(n,o,r,c);return e.dispatch(n,u)},xJ=(e,n)=>{const o=Gt((c,u)=>DI(n,c,u),0);n.on("remove",o.cancel);const r=e;return c=>e.on(u=>{const f=Math.max(Math.abs(c.screenX-u.screenX),Math.abs(c.screenY-u.screenY));if(!u.dragging&&f>10){const b=Jw(n,"dragstart",u.element,u.dataTransfer,c);if(Fe(b.dataTransfer)&&(u.dataTransfer=b.dataTransfer),b.isDefaultPrevented())return;u.dragging=!0,n.focus()}if(u.dragging){const b=c.currentTarget===n.getDoc().documentElement,v=eK(u,ZG(n,c));QG(u.ghost,n.getBody()),AI(u.ghost,v,u.width,u.height,u.maxX,u.maxY,c.clientY,c.clientX,n.getContentAreaContainer(),n.getWin(),r,b),o.throttle(c.clientX,c.clientY)}})},nK=e=>{const n=e.getSel();if(Fe(n)){const r=n.getRangeAt(0).startContainer;return kt(r)?r.parentNode:r}else return null},oK=(e,n)=>o=>{e.on(r=>{var c;if(r.intervalId.clear(),r.dragging){if(SJ(n,nK(n.selection),r.element)){const u=(c=n.getDoc().elementFromPoint(o.clientX,o.clientY))!==null&&c!==void 0?c:n.getBody();Jw(n,"drop",u,r.dataTransfer,o).isDefaultPrevented()||n.undoManager.transact(()=>{h5(n.dom,r.element),ej(r.dataTransfer).each(b=>n.insertContent(b)),n._selectionOverrides.hideFakeCaret()})}Jw(n,"dragend",n.getBody(),r.dataTransfer,o)}}),s_(e)},OI=(e,n,o)=>{e.on(r=>{r.intervalId.clear(),r.dragging&&o.fold(()=>Jw(n,"dragend",r.element,r.dataTransfer),c=>Jw(n,"dragend",r.element,r.dataTransfer,c))}),s_(e)},RI=(e,n)=>o=>OI(e,n,P.some(o)),s_=e=>{e.on(n=>{n.intervalId.clear(),_I(n.ghost)}),e.clear()},r_=e=>{const n=rs(),o=Is.DOM,r=document,c=tK(n,e),u=xJ(n,e),f=oK(n,e),b=RI(n,e);e.on("mousedown",c),e.on("mousemove",u),e.on("mouseup",f),o.bind(r,"mousemove",u),o.bind(r,"mouseup",b),e.on("remove",()=>{o.unbind(r,"mousemove",u),o.unbind(r,"mouseup",b)}),e.on("keydown",v=>{v.keyCode===Qt.ESC&&OI(n,e,P.none())})},MI=e=>{const n=c=>{if(!c.isDefaultPrevented()){const u=c.dataTransfer;u&&(be(u.types,"Files")||u.files.length>0)&&(c.preventDefault(),c.type==="drop"&&Ip(e,"Dropped file type is not supported"))}},o=c=>{rk(e,c.target)&&n(c)},r=()=>{const c=Is.DOM,u=e.dom,f=document,b=e.inline?e.getBody():e.getDoc(),v=["drop","dragover"];me(v,x=>{c.bind(f,x,o),u.bind(b,x,n)}),e.on("remove",()=>{me(v,x=>{c.unbind(f,x,o),u.unbind(b,x,n)})})};e.on("init",()=>{_d.setEditorTimeout(e,r,0)})},sK=e=>{r_(e),n0(e)&&MI(e)},rK=e=>{const n=Gt(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const o=e.selection.getRng();if(o.collapsed){const r=uO(e,o,!1);e.selection.setRng(r)}}},0);e.on("focus",()=>{n.throttle()}),e.on("blur",()=>{n.cancel()})},aK=e=>{e.on("init",()=>{e.on("focusin",n=>{const o=n.target;if(Ru(o)){const r=x0(e.getBody(),o),c=mr(r)?r:o;e.selection.getNode()!==c&&pw(e,c).each(u=>e.selection.setRng(u))}})})},Qw=mr,p5=(e,n)=>x0(e.getBody(),n),cK=e=>{const n=e.selection,o=e.dom,r=e.getBody(),c=eC(e,r,o.isBlock,()=>y0(e)),u="sel-"+o.uniqueId(),f="data-mce-selected";let b;const v=Ot=>Fe(Ot)&&o.hasClass(Ot,"mce-offscreen-selection"),x=Ot=>Ot!==r&&(Qw(Ot)||Ru(Ot))&&o.isChildOf(Ot,r)&&o.isEditable(Ot.parentNode),D=Ot=>{Ot&&n.setRng(Ot)},B=(Ot,lt,Be,oe=!0)=>e.dispatch("ShowCaret",{target:lt,direction:Ot,before:Be}).isDefaultPrevented()?null:(oe&&n.scrollIntoView(lt,Ot===-1),c.show(Be,lt)),N=Ot=>{Ot.hasAttribute("data-mce-caret")&&(Al(Ot),n.scrollIntoView(Ot))},H=()=>{e.on("click",lt=>{o.isEditable(lt.target)||(lt.preventDefault(),e.focus())}),e.on("blur NewBlock",Ze),e.on("ResizeWindow FullscreenStateChanged",c.reposition),e.on("tap",lt=>{const Be=lt.target,oe=p5(e,Be);Qw(oe)?(lt.preventDefault(),pw(e,oe).each(Pe)):x(Be)&&pw(e,Be).each(Pe)},!0),e.on("mousedown",lt=>{const Be=lt.target;if(Be!==r&&Be.nodeName!=="HTML"&&!o.isChildOf(Be,r)||!SD(e,lt.clientX,lt.clientY))return;Ze(),Vt();const oe=p5(e,Be);Qw(oe)?(lt.preventDefault(),pw(e,oe).each(Pe)):m5(r,lt.clientX,lt.clientY).each(je=>{lt.preventDefault();const Dt=B(1,je.node,je.position===xy.Before,!1);D(Dt),dr(oe)?oe.focus():e.getBody().focus()})}),e.on("keypress",lt=>{Qt.modifierPressed(lt)||Qw(n.getNode())&&lt.preventDefault()}),e.on("GetSelectionRange",lt=>{let Be=lt.range;if(b){if(!b.parentNode){b=null;return}Be=Be.cloneRange(),Be.selectNode(b),lt.range=Be}}),e.on("focusin",lt=>{if(!Ru(lt.target)&&e.getBody().contains(lt.target)&&lt.target!==e.getBody()&&!e.dom.isEditable(lt.target.parentNode)){c.isShowing()&&c.hide(),lt.target.contains(e.selection.getNode())||(e.selection.select(lt.target,!0),e.selection.collapse(!0));const Be=Pe(e.selection.getRng(),!0);Be&&e.selection.setRng(Be)}}),e.on("SetSelectionRange",lt=>{lt.range=Y(lt.range);const Be=Pe(lt.range,lt.forward);Be&&(lt.range=Be)});const Ot=lt=>Cn(lt)&&lt.id==="mcepastebin";e.on("AfterSetSelectionRange",lt=>{const Be=lt.range,oe=Be.startContainer.parentElement;!Q(Be)&&!Ot(oe)&&Vt(),v(oe)||Ze()}),sK(e),rK(e),aK(e)},te=Ot=>Wc(Ot)||sm(Ot)||Hf(Ot),Q=Ot=>te(Ot.startContainer)||te(Ot.endContainer),Y=Ot=>{const lt=e.schema.getVoidElements(),Be=o.createRng(),oe=Ot.startContainer,je=Ot.startOffset,Dt=Ot.endContainer,kn=Ot.endOffset;return to(lt,oe.nodeName.toLowerCase())?je===0?Be.setStartBefore(oe):Be.setStartAfter(oe):Be.setStart(oe,je),to(lt,Dt.nodeName.toLowerCase())?kn===0?Be.setEndBefore(Dt):Be.setEndAfter(Dt):Be.setEnd(Dt,kn),Be},Ae=(Ot,lt)=>{const Be=re.fromDom(e.getBody()),oe=e.getDoc(),je=Du(Be,"#"+u).getOrThunk(()=>{const io=re.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',oe);return Cr(io,"id",u),ds(Be,io),io}),Dt=o.createRng();vl(je),Yi(je,[re.fromText(ir,oe),re.fromDom(lt),re.fromText(ir,oe)]),Dt.setStart(je.dom.firstChild,1),Dt.setEnd(je.dom.lastChild,0),ui(je,{top:o.getPos(Ot,e.getBody()).y+"px"}),vg(je);const kn=n.getSel();return kn&&(kn.removeAllRanges(),kn.addRange(Dt)),Dt},_e=Ot=>{const lt=Ot.cloneNode(!0),Be=e.dispatch("ObjectSelected",{target:Ot,targetClone:lt});if(Be.isDefaultPrevented())return null;const oe=Ae(Ot,Be.targetClone),je=re.fromDom(Ot);return me(ot(re.fromDom(e.getBody()),`*[${f}]`),Dt=>{Yo(je,Dt)||Qr(Dt,f)}),o.getAttrib(Ot,f)||Ot.setAttribute(f,"1"),b=Ot,Vt(),oe},Pe=(Ot,lt)=>{if(!Ot)return null;if(Ot.collapsed){if(!Q(Ot)){const Dt=lt?1:-1,kn=Qm(Dt,r,Ot),io=kn.getNode(!lt);if(Fe(io)){if(i0(io))return B(Dt,io,lt?!kn.isAtEnd():!1,!1);if(Es(io)&&mr(io.nextSibling)){const is=o.createRng();return is.setStart(io,0),is.setEnd(io,0),is}}const zo=kn.getNode(lt);if(Fe(zo)){if(i0(zo))return B(Dt,zo,lt?!1:!kn.isAtEnd(),!1);if(Es(zo)&&mr(zo.previousSibling)){const is=o.createRng();return is.setStart(zo,1),is.setEnd(zo,1),is}}}return null}let Be=Ot.startContainer,oe=Ot.startOffset;const je=Ot.endOffset;if(kt(Be)&&oe===0&&Qw(Be.parentNode)&&(Be=Be.parentNode,oe=o.nodeIndex(Be),Be=Be.parentNode),!Cn(Be))return null;if(je===oe+1&&Be===Ot.endContainer){const Dt=Be.childNodes[oe];if(x(Dt))return _e(Dt)}return null},Ze=()=>{b&&b.removeAttribute(f),Du(re.fromDom(e.getBody()),"#"+u).each(Ws),b=null},ht=()=>{c.destroy(),b=null},Vt=()=>{c.hide()};return Zu(e)||H(),{showCaret:B,showBlockCaretContainer:N,hideFakeCaret:Vt,destroy:ht}},BI=(e,n)=>{let o=n;for(let r=e.previousSibling;kt(r);r=r.previousSibling)o+=r.data.length;return o},FI=(e,n,o,r,c)=>{if(kt(o)&&(r<0||r>o.data.length))return[];const u=c&&kt(o)?[BI(o,r)]:[r];let f=o;for(;f!==n&&f.parentNode;)u.push(e.nodeIndex(f,c)),f=f.parentNode;return f===n?u.reverse():[]},b5=(e,n,o,r,c,u,f=!1)=>{const b=FI(e,n,o,r,f),v=FI(e,n,c,u,f);return{start:b,end:v}},a_=(e,n)=>{const o=n.slice(),r=o.pop();return Cs(r)?st(o,(u,f)=>u.bind(b=>P.from(b.childNodes[f])),P.some(e)).bind(u=>kt(u)&&(r<0||r>u.data.length)?P.none():P.some({node:u,offset:r})):P.none()},v5=(e,n)=>a_(e,n.start).bind(({node:o,offset:r})=>a_(e,n.end).map(({node:c,offset:u})=>{const f=document.createRange();return f.setStart(o,r),f.setEnd(c,u),f})),EJ=(e,n,o,r=!1)=>b5(e,n,o.startContainer,o.startOffset,o.endContainer,o.endOffset,r),Ty=(e,n,o)=>{if(n&&e.isEmpty(n)&&!o(n)){const r=n.parentNode;e.remove(n,kt(n.firstChild)&&$m(n.firstChild.data)),Ty(e,r,o)}},eS=(e,n,o,r=!0)=>{const c=n.startContainer.parentNode,u=n.endContainer.parentNode;n.deleteContents(),r&&!o(n.startContainer)&&(kt(n.startContainer)&&n.startContainer.data.length===0&&e.remove(n.startContainer),kt(n.endContainer)&&n.endContainer.data.length===0&&e.remove(n.endContainer),Ty(e,c,o),c!==u&&Ty(e,u,o))},c_=(e,n)=>P.from(e.dom.getParent(n.startContainer,e.dom.isBlock)),tS=(e,n,o)=>{const r=e.dynamicPatternsLookup({text:o,block:n});return{...e,blockPatterns:Gm(r).concat(e.blockPatterns),inlinePatterns:qg(r).concat(e.inlinePatterns)}},y5=(e,n,o,r)=>{const c=e.createRng();return c.setStart(n,0),c.setEnd(o,r),c.toString()},NI=(e,n)=>e.create("span",{"data-mce-type":"bookmark",id:n}),i_=(e,n)=>{const o=e.createRng();return o.setStartAfter(n.start),o.setEndBefore(n.end),o},C5=(e,n,o)=>{const r=v5(e.getRoot(),o).getOrDie("Unable to resolve path range"),c=r.startContainer,u=r.endContainer,f=r.endOffset===0?u:u.splitText(r.endOffset),b=r.startOffset===0?c:c.splitText(r.startOffset),v=b.parentNode,x=f.parentNode;return{prefix:n,end:x.insertBefore(NI(e,n+"-end"),f),start:v.insertBefore(NI(e,n+"-start"),b)}},nS=(e,n,o)=>{Ty(e,e.get(n.prefix+"-end"),o),Ty(e,e.get(n.prefix+"-start"),o)},l_=e=>e.start.length===0,PI=e=>(n,o)=>{const c=n.data.substring(0,o),u=c.lastIndexOf(e.charAt(e.length-1)),f=c.lastIndexOf(e);return f!==-1?f+e.length:u!==-1?u+1:-1},$I=(e,n,o,r)=>{const c=n.start;return Fw(e,r.container,r.offset,PI(c),o).bind(f=>{var b,v;const x=(v=(b=o.textContent)===null||b===void 0?void 0:b.indexOf(c))!==null&&v!==void 0?v:-1;if(x!==-1&&f.offset>=x+c.length){const B=e.createRng();return B.setStart(f.container,f.offset-c.length),B.setEnd(f.container,f.offset),P.some(B)}else{const B=f.offset-c.length;return Ah(f.container,B,o).map(N=>{const H=e.createRng();return H.setStart(N.container,N.offset),H.setEnd(f.container,f.offset),H}).filter(N=>N.toString()===c).orThunk(()=>$I(e,n,o,Bd(f.container,0)))}})},iK=(e,n,o,r,c,u=!1)=>{if(n.start.length===0&&!u){const f=e.createRng();return f.setStart(o,r),f.setEnd(o,r),P.some(f)}return MA(o,r,c).bind(f=>$I(e,n,c,f).bind(v=>{var x;if(u){if(v.endContainer===f.container&&v.endOffset===f.offset)return P.none();if(f.offset===0&&((x=v.endContainer.textContent)===null||x===void 0?void 0:x.length)===v.endOffset)return P.none()}return P.some(v)}))},II=(e,n,o,r)=>{const c=e.dom,u=c.getRoot(),f=o.pattern,b=o.position.container,v=o.position.offset;return Ah(b,v-o.pattern.end.length,n).bind(x=>{const D=b5(c,u,x.container,x.offset,b,v,r);if(l_(f))return P.some({matches:[{pattern:f,startRng:D,endRng:D}],position:x});{const B=u_(e,o.remainingPatterns,x.container,x.offset,n,r),N=B.getOr({matches:[],position:x}),H=N.position;return iK(c,f,H.container,H.offset,n,B.isNone()).map(Q=>{const Y=EJ(c,u,Q,r);return{matches:N.matches.concat([{pattern:f,startRng:Y,endRng:D}]),position:Bd(Q.startContainer,Q.startOffset)}})}})},u_=(e,n,o,r,c,u)=>{const f=e.dom;return MA(o,r,f.getRoot()).bind(b=>{const v=y5(f,c,o,r);for(let x=0;x<n.length;x++){const D=n[x];if(!fa(v,D.end))continue;const B=n.slice();B.splice(x,1);const N=II(e,c,{pattern:D,remainingPatterns:B,position:b},u);if(N.isNone()&&r>0)return u_(e,n,o,r-1,c,u);if(N.isSome())return N}return P.none()})},LI=(e,n,o)=>{e.selection.setRng(o),n.type==="inline-format"?me(n.format,r=>{e.formatter.apply(r)}):e.execCommand(n.cmd,!1,n.value)},lK=(e,n,o,r)=>{const c=i_(e.dom,o);eS(e.dom,c,r),LI(e,n,c)},w5=(e,n,o,r,c)=>{const u=e.dom,f=i_(u,r),b=i_(u,o);eS(u,b,c),eS(u,f,c);const v={prefix:o.prefix,start:o.end,end:r.start},x=i_(u,v);LI(e,n,x)},uK=(e,n)=>{const o=jo("mce_textpattern"),r=qe(n,(c,u)=>{const f=C5(e,o+`_end${c.length}`,u.endRng);return c.concat([{...u,endMarker:f}])},[]);return qe(r,(c,u)=>{const f=r.length-c.length-1,b=l_(u.pattern)?u.endMarker:C5(e,o+`_start${f}`,u.startRng);return c.concat([{...u,startMarker:b}])},[])},dK=e=>wn(e,(n,o)=>o.end.length-n.end.length),mK=(e,n)=>{const o=zs(e,r=>ke(n,c=>r.pattern.start===c.pattern.start&&r.pattern.end===c.pattern.end));return e.length===n.length?o?e:n:e.length>n.length?e:n},HI=(e,n,o,r,c,u)=>{const f=u_(e,c.inlinePatterns,o,r,n,u).fold(()=>[],v=>v.matches),b=u_(e,dK(c.inlinePatterns),o,r,n,u).fold(()=>[],v=>v.matches);return mK(f,b)},zI=(e,n)=>{if(n.length===0)return;const o=e.dom,r=e.selection.getBookmark(),c=uK(o,n);me(c,u=>{const f=o.getParent(u.startMarker.start,o.isBlock),b=v=>v===f;l_(u.pattern)?lK(e,u.pattern,u.endMarker,b):w5(e,u.pattern,u.startMarker,u.endMarker,b),nS(o,u.endMarker,b),nS(o,u.startMarker,b)}),e.selection.moveToBookmark(r)},VI=(e,n,o)=>Fd(n,0,n).map(r=>{const c=r.container;return bR(c,o.start.length,n).each(u=>{const f=e.createRng();f.setStart(c,0),f.setEnd(u.container,u.offset),eS(e,f,b=>b===n)}),c}),d_=e=>(n,o)=>{const r=n.dom,c=o.pattern,u=v5(r.getRoot(),o.range).getOrDie("Unable to resolve path range"),f=(b,v)=>{const x=v.get(b);return Qe(x)&&uo(x).exists(D=>to(D,"block"))};return c_(n,u).each(b=>{c.type==="block-format"?f(c.format,n.formatter)&&n.undoManager.transact(()=>{e(n.dom,b,c),n.formatter.apply(c.format)}):c.type==="block-command"&&n.undoManager.transact(()=>{e(n.dom,b,c),n.execCommand(c.cmd,!1,c.value)})}),!0},fK=e=>wn(e,(n,o)=>o.start.length-n.start.length),UI=e=>(n,o)=>{const r=fK(n),c=o.replace(ir," ");return rn(r,u=>e(u,o,c))},WI=(e,n)=>(o,r,c,u,f)=>{var b;f===void 0&&(f=(b=r.textContent)!==null&&b!==void 0?b:"");const v=o.dom,x=pc(o);return v.is(r,x)?e(c.blockPatterns,f).map(D=>n&&Mt.trim(f).length===D.start.length?[]:[{pattern:D,range:b5(v,v.getRoot(),r,0,r,0,u)}]).getOr([]):[]},ZI=e=>/^\s[^\s]/.test(e),gK=d_((e,n,o)=>{VI(e,n,o).each(r=>{const c=re.fromDom(r),u=uc(c);ZI(u)&&v1(c,u.slice(1))})}),hK=UI((e,n,o)=>n.indexOf(e.start)===0||o.indexOf(e.start)===0),pK=WI(hK,!0),bK=(e,n)=>{const o=e.selection.getRng();return c_(e,o).map(r=>{var c;const u=Math.max(0,o.startOffset),f=tS(n,r,(c=r.textContent)!==null&&c!==void 0?c:""),b=HI(e,r,o.startContainer,u,f,!0),v=pK(e,r,f,!0);return{inlineMatches:b,blockMatches:v}}).filter(({inlineMatches:r,blockMatches:c})=>c.length>0||r.length>0)},vK=(e,n)=>{if(n.length===0)return;const o=e.selection.getBookmark();me(n,r=>gK(e,r)),e.selection.moveToBookmark(o)},yK=d_(VI),CK=UI((e,n,o)=>n===e.start||o===e.start),jI=WI(CK,!1),wK=(e,n)=>{const o=e.selection.getRng();return c_(e,o).map(r=>{const c=Math.max(0,o.startOffset),u=y5(e.dom,r,o.startContainer,c),f=tS(n,r,u);return jI(e,r,f,!1,u)}).filter(r=>r.length>0)},S5=(e,n)=>{me(n,o=>yK(e,o))},SK=(e,n)=>bK(e,n).fold(Ne,({inlineMatches:o,blockMatches:r})=>(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{nx(e),zI(e,o),vK(e,r);const c=e.selection.getRng(),u=MA(c.startContainer,c.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),u.each(f=>{const b=f.container;b.data.charAt(f.offset-1)===ja&&(b.deleteData(f.offset-1,1),Ty(e.dom,b.parentNode,v=>v===e.dom.getRoot()))})}),!0)),xK=(e,n)=>{const o=e.selection.getRng();c_(e,o).map(r=>{const c=Math.max(0,o.startOffset-1),u=y5(e.dom,r,o.startContainer,c),f=tS(n,r,u),b=HI(e,r,o.startContainer,c,f,!1);b.length>0&&e.undoManager.transact(()=>{zI(e,b)})})},EK=(e,n)=>wK(e,n).fold(Ne,o=>(e.undoManager.transact(()=>{S5(e,o)}),!0)),qI=(e,n,o)=>{for(let r=0;r<e.length;r++)if(o(e[r],n))return!0;return!1},TK=(e,n)=>qI(e,n,(o,r)=>o===r.keyCode&&!Qt.modifierPressed(r)),AK=(e,n)=>qI(e,n,(o,r)=>o.charCodeAt(0)===r.charCode),m_=e=>{const n=[",",".",";",":","!","?"],o=[32],r=()=>Gg(K2(e).filter(f=>f.type==="inline-command"||f.type==="block-command"?e.queryCommandSupported(f.cmd):!0),S4(e)),c=()=>E4(e);e.on("keydown",f=>{if(f.keyCode===13&&!Qt.modifierPressed(f)&&e.selection.isCollapsed()&&e.selection.isEditable()){const b=F2(r(),"enter");(b.inlinePatterns.length>0||b.blockPatterns.length>0||c())&&SK(e,b)&&f.preventDefault()}},!0),e.on("keydown",f=>{if(f.keyCode===32&&e.selection.isCollapsed()&&e.selection.isEditable()){const b=F2(r(),"space");(b.blockPatterns.length>0||c())&&EK(e,b)&&f.preventDefault()}},!0);const u=()=>{if(e.selection.isCollapsed()&&e.selection.isEditable()){const f=F2(r(),"space");(f.inlinePatterns.length>0||c())&&xK(e,f)}};e.on("keyup",f=>{TK(o,f)&&u()}),e.on("keypress",f=>{AK(n,f)&&_d.setEditorTimeout(e,u)})},_K=e=>{m_(e)},kK=e=>{const n=Mt.each,o=Qt.BACKSPACE,r=Qt.DELETE,c=e.dom,u=e.selection,f=e.parser,b=Po.browser,v=b.isFirefox(),x=b.isChromium()||b.isSafari(),D=Po.deviceType.isiPhone()||Po.deviceType.isiPad(),B=Po.os.isMacOS()||Po.os.isiOS(),N=(Ht,on)=>{try{e.getDoc().execCommand(Ht,!1,String(on))}catch{}},H=Ht=>Ht.isDefaultPrevented(),te=()=>{const Ht=Jn=>{const lo=c.create("body"),Us=Jn.cloneContents();return lo.appendChild(Us),u.serializer.serialize(lo,{format:"html"})},on=Jn=>{const lo=Ht(Jn),Us=c.createRng();Us.selectNode(e.getBody());const ar=Ht(Us);return lo===ar};e.on("keydown",Jn=>{const lo=Jn.keyCode;if(!H(Jn)&&(lo===r||lo===o)&&e.selection.isEditable()){const Us=e.selection.isCollapsed(),ar=e.getBody();if(Us&&!Zl(e.schema,ar)||!Us&&!on(e.selection.getRng()))return;Jn.preventDefault(),e.setContent(""),ar.firstChild&&c.isBlock(ar.firstChild)?e.selection.setCursorLocation(ar.firstChild,0):e.selection.setCursorLocation(ar,0),e.nodeChanged()}})},Q=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},Y=()=>{e.inline||c.bind(e.getDoc(),"mousedown mouseup",Ht=>{var on;let Jn;if(Ht.target===e.getDoc().documentElement)if(Jn=u.getRng(),((on=e.getDoc().getSelection())===null||on===void 0?void 0:on.anchorNode)!==null&&e.getBody().focus(),Ht.type==="mousedown"){if(Wc(Jn.startContainer))return;u.placeCaretAt(Ht.clientX,Ht.clientY)}else u.setRng(Jn)})},Ae=()=>{e.on("keydown",Ht=>{if(!H(Ht)&&Ht.keyCode===o){if(!e.getBody().getElementsByTagName("hr").length)return;if(u.isCollapsed()&&u.getRng().startOffset===0){const on=u.getNode(),Jn=on.previousSibling;if(on.nodeName==="HR"){c.remove(on),Ht.preventDefault();return}Jn&&Jn.nodeName&&Jn.nodeName.toLowerCase()==="hr"&&(c.remove(Jn),Ht.preventDefault())}}})},_e=()=>{Range.prototype.getClientRects||e.on("mousedown",Ht=>{if(!H(Ht)&&Ht.target.nodeName==="HTML"){const on=e.getBody();on.blur(),_d.setEditorTimeout(e,()=>{on.focus()})}})},Pe=()=>{const Ht=q2(e);e.on("click",on=>{const Jn=on.target;/^(IMG|HR)$/.test(Jn.nodeName)&&c.isEditable(Jn)&&(on.preventDefault(),e.selection.select(Jn),e.nodeChanged()),Jn.nodeName==="A"&&c.hasClass(Jn,Ht)&&Jn.childNodes.length===0&&c.isEditable(Jn.parentNode)&&(on.preventDefault(),u.select(Jn))})},Ze=()=>{const Ht=on=>on.nodeName==="IMG"&&e.dom.isEditable(on);e.on("mousedown",on=>{nn(P.from(on.clientX),P.from(on.clientY),(Jn,lo)=>{var Us;const ar=e.getDoc().caretPositionFromPoint(Jn,lo),Id=((Us=ar==null?void 0:ar.offsetNode)===null||Us===void 0?void 0:Us.childNodes[ar.offset-(ar.offset>0?1:0)])||(ar==null?void 0:ar.offsetNode);if(Fe(Id)&&Ht(Id)){const si=Id.getBoundingClientRect();on.preventDefault(),e.hasFocus()||e.focus(),e.selection.select(Id),on.clientX<si.left||on.clientY<si.top?e.selection.collapse(!0):(on.clientX>si.right||on.clientY>si.bottom)&&e.selection.collapse(!1)}})})},ht=()=>{const Ht=()=>{const Jn=c.getAttribs(u.getStart().cloneNode(!1));return()=>{const lo=u.getStart();lo!==e.getBody()&&(c.setAttrib(lo,"style",null),n(Jn,Us=>{lo.setAttributeNode(Us.cloneNode(!0))}))}},on=()=>!u.isCollapsed()&&c.getParent(u.getStart(),c.isBlock)!==c.getParent(u.getEnd(),c.isBlock);e.on("keypress",Jn=>{let lo;return!H(Jn)&&(Jn.keyCode===8||Jn.keyCode===46)&&on()?(lo=Ht(),e.getDoc().execCommand("delete",!1),lo(),Jn.preventDefault(),!1):!0}),c.bind(e.getDoc(),"cut",Jn=>{if(!H(Jn)&&on()){const lo=Ht();_d.setEditorTimeout(e,()=>{lo()})}})},Vt=()=>{e.on("keydown",Ht=>{if(!H(Ht)&&Ht.keyCode===o&&u.isCollapsed()&&u.getRng().startOffset===0){const on=u.getNode().previousSibling;if(on&&on.nodeName&&on.nodeName.toLowerCase()==="table")return Ht.preventDefault(),!1}return!0})},Ot=()=>{e.on("keydown",Ht=>{if(H(Ht)||Ht.keyCode!==Qt.BACKSPACE)return;let on=u.getRng();const Jn=on.startContainer,lo=on.startOffset,Us=c.getRoot();let ar=Jn;if(!(!on.collapsed||lo!==0)){for(;ar.parentNode&&ar.parentNode.firstChild===ar&&ar.parentNode!==Us;)ar=ar.parentNode;ar.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,ar),on=c.createRng(),on.setStart(Jn,0),on.setEnd(Jn,0),u.setRng(on))}})},lt=()=>{const Ht=Jr("figcaption");e.on("keydown",on=>{if(on.keyCode===Qt.LEFT||on.keyCode===Qt.RIGHT){const Jn=re.fromDom(e.selection.getNode());Ht(Jn)&&e.selection.isCollapsed()&&Hc(Jn).bind(lo=>{var Us;return e.selection.getRng().startOffset===0&&on.keyCode===Qt.LEFT?qi(lo):e.selection.getRng().endOffset===((Us=Jn.dom.textContent)===null||Us===void 0?void 0:Us.length)&&on.keyCode===Qt.RIGHT?zc(lo):P.none()}).each(lo=>{e.selection.setCursorLocation(lo.dom,0)})}})},Be=()=>{const Ht=()=>{N("StyleWithCSS",!1),N("enableInlineTableEditing",!1),W2(e)||N("enableObjectResizing",!1)};Q1(e)||e.on("BeforeExecCommand mousedown",Ht)},oe=()=>{const Ht=()=>{n(c.select("a:not([data-mce-block])"),on=>{var Jn;let lo=on.parentNode;const Us=c.getRoot();if((lo==null?void 0:lo.lastChild)===on){for(;lo&&!c.isBlock(lo);){if(((Jn=lo.parentNode)===null||Jn===void 0?void 0:Jn.lastChild)!==lo||lo===Us)return;lo=lo.parentNode}c.add(lo,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",on=>{(on.type==="setcontent"||on.command==="mceInsertLink")&&Ht()})},je=()=>{e.on("init",()=>{N("DefaultParagraphSeparator",pc(e))})},Dt=Ht=>{const on=Ht.getBody(),Jn=Ht.selection.getRng();return Jn.startContainer===Jn.endContainer&&Jn.startContainer===on&&Jn.startOffset===0&&Jn.endOffset===on.childNodes.length},kn=()=>{e.on("keyup focusin mouseup",Ht=>{!Qt.modifierPressed(Ht)&&!Dt(e)&&u.normalize()},!0)},io=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},zo=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},is=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",Ht=>{let on;Ht.target.nodeName==="HTML"&&(on=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(on),e.selection.normalize(),e.nodeChanged())}))},kr=()=>{B&&e.on("keydown",Ht=>{Qt.metaKeyPressed(Ht)&&!Ht.shiftKey&&(Ht.keyCode===37||Ht.keyCode===39)&&(Ht.preventDefault(),e.selection.getSel().modify("move",Ht.keyCode===37?"backward":"forward","lineboundary"))})},Dr=()=>{e.on("click",Ht=>{let on=Ht.target;do if(on.tagName==="A"){Ht.preventDefault();return}while(on=on.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},Oc=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",Ht=>{Ht.preventDefault()})})},$t=()=>{f.addNodeFilter("br",Ht=>{let on=Ht.length;for(;on--;)Ht[on].attr("class")==="Apple-interchange-newline"&&Ht[on].remove()})},On=Ct,hs=()=>{if(!v||e.removed)return!1;const Ht=e.selection.getSel();return!Ht||!Ht.rangeCount||Ht.rangeCount===0},Ps=()=>{x&&(Y(),Pe(),Oc(),Q(),D&&(zo(),is(),Dr())),v&&(_e(),Be(),io(),kr())},An=()=>{Ot(),te(),Po.windowsPhone||kn(),x&&(Y(),Pe(),je(),Oc(),Vt(),$t(),D?(zo(),is(),Dr()):Q()),v&&(lt(),Ze(),Ae(),_e(),ht(),Be(),oe(),io(),kr(),Vt())};return Zu(e)?Ps():An(),{refreshContentEditable:On,isHidden:hs}},x5=Is.DOM,DK=(e,n)=>{const o=re.fromDom(e.getBody()),r=l1(Aa(o)),c=re.fromTag("style");Cr(c,"type","text/css"),ds(c,re.fromText(n)),ds(r,c),e.on("remove",()=>{Ws(c)})},OK=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,E5=e=>Fc(e,n=>Kn(n)===!1),GI=e=>{const n=e.options.get,o=e.editorUpload.blobCache;return E5({allow_conditional_comments:n("allow_conditional_comments"),allow_html_data_urls:n("allow_html_data_urls"),allow_svg_data_urls:n("allow_svg_data_urls"),allow_html_in_named_anchor:n("allow_html_in_named_anchor"),allow_script_urls:n("allow_script_urls"),allow_html_in_comments:n("allow_html_in_comments"),allow_mathml_annotation_encodings:n("allow_mathml_annotation_encodings"),allow_unsafe_link_target:n("allow_unsafe_link_target"),convert_unsafe_embeds:n("convert_unsafe_embeds"),convert_fonts_to_spans:n("convert_fonts_to_spans"),extended_mathml_attributes:n("extended_mathml_attributes"),extended_mathml_elements:n("extended_mathml_elements"),fix_list_elements:n("fix_list_elements"),font_size_legacy_values:n("font_size_legacy_values"),forced_root_block:n("forced_root_block"),forced_root_block_attrs:n("forced_root_block_attrs"),preserve_cdata:n("preserve_cdata"),inline_styles:n("inline_styles"),root_name:OK(e),sandbox_iframes:n("sandbox_iframes"),sandbox_iframes_exclusions:r0(e),sanitize:n("xss_sanitization"),validate:!0,blob_cache:o,document:e.getDoc()})},KI=e=>{const n=e.options.get;return E5({custom_elements:n("custom_elements"),extended_valid_elements:n("extended_valid_elements"),invalid_elements:n("invalid_elements"),invalid_styles:n("invalid_styles"),schema:n("schema"),valid_children:n("valid_children"),valid_classes:n("valid_classes"),valid_elements:n("valid_elements"),valid_styles:n("valid_styles"),verify_html:n("verify_html"),padd_empty_block_inline_children:n("format_empty_lines")})},RK=e=>{const n=e.options.get;return{...GI(e),...KI(e),...E5({remove_trailing_brs:n("remove_trailing_brs"),pad_empty_with_br:n("pad_empty_with_br"),url_converter:n("url_converter"),url_converter_scope:n("url_converter_scope"),element_format:n("element_format"),entities:n("entities"),entity_encoding:n("entity_encoding"),indent:n("indent"),indent_after:n("indent_after"),indent_before:n("indent_before")})}},YI=e=>{const n=hh(GI(e),e.schema);return n.addAttributeFilter("src,href,style,tabindex",(o,r)=>{const c=e.dom,u="data-mce-"+r;let f=o.length;for(;f--;){const b=o[f];let v=b.attr(r);if(v&&!b.attr(u)){if(v.indexOf("data:")===0||v.indexOf("blob:")===0)continue;r==="style"?(v=c.serializeStyle(c.parseStyle(v),b.name),v.length||(v=null),b.attr(u,v),b.attr(r,v)):r==="tabindex"?(b.attr(u,v),b.attr(r,null)):b.attr(u,e.convertURL(v,r,b.name))}}}),n.addNodeFilter("script",o=>{let r=o.length;for(;r--;){const c=o[r],u=c.attr("type")||"no/type";u.indexOf("mce-")!==0&&c.attr("type","mce-"+u)}}),s0(e)&&n.addNodeFilter("#cdata",o=>{var r;let c=o.length;for(;c--;){const u=o[c];u.type=8,u.name="#comment",u.value="[CDATA["+e.dom.encode((r=u.value)!==null&&r!==void 0?r:"")+"]]"}}),n.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",o=>{let r=o.length;const c=e.schema.getNonEmptyElements();for(;r--;){const u=o[r];u.isEmpty(c)&&u.getAll("br").length===0&&u.append(new Ii("br",1))}}),n},MK=e=>{const n=C4(e);n&&_d.setEditorTimeout(e,()=>{let o;n===!0?o=e:o=e.editorManager.get(n),o&&!o.destroyed&&(o.focus(),o.selection.scrollIntoView())},100)},XI=e=>{const n=e.dom.getRoot();!e.inline&&(!f0(e)||e.selection.getStart(!0)===n)&&Yc(n).each(o=>{const r=o.getNode(),c=Yd(r)?Yc(r).getOr(o):o;e.selection.setRng(c.toRange())})},BK=e=>{e.bindPendingEventDelegates(),e.initialized=!0,c4(e),e.focus(!0),XI(e),e.nodeChanged({initial:!0});const n=Hx(e);he(n)&&n.call(e,e),MK(e),ia(e)&&HT(e,!0)},T5=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,JI=(e,n,o)=>{const{pass:r,fail:c}=at(n,b=>tinymce.Resource.has(iw(b))),f=[...r.map(b=>{const v=tinymce.Resource.get(iw(b));return ie(v)?Promise.resolve(T5(e).loadRawCss(b,v)):Promise.resolve()}),T5(e).loadAll(c)];return e.inline?f:f.concat([e.ui.styleSheetLoader.loadAll(o)])},Ay=e=>{const n=T5(e),o=Rx(e),r=e.contentCSS,c=()=>{n.unloadAll(r),e.inline||e.ui.styleSheetLoader.unloadAll(o)},u=()=>{e.removed?c():e.on("remove",c)};if(e.contentStyles.length>0){let v="";Mt.each(e.contentStyles,x=>{v+=x+`\r
`}),e.dom.addStyle(v)}const f=Promise.all(JI(e,r,o)).then(u).catch(u),b=Ox(e);return b&&DK(e,b),f},FK=e=>{const n=e.getDoc(),o=e.getBody();r4(e),hv(e)||(n.body.spellcheck=!1,x5.setAttrib(o,"spellcheck","false")),e.quirks=kK(e),a4(e);const r=Mx(e);r!==void 0&&(o.dir=r);const c=hp(e);c&&e.on("BeforeSetContent",u=>{Mt.each(c,f=>{u.content=u.content.replace(f,b=>"<!--mce:protected "+escape(b)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",u=>{e.composing=u.type==="compositionstart"})},QI=e=>{Zu(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},A5=e=>{e.removed!==!0&&(QI(e),BK(e))},NK=e=>{let n=!1;const o=setTimeout(()=>{n||e.setProgressState(!0)},500);return()=>{clearTimeout(o),n=!0,e.setProgressState(!1)}},e7=e=>{const n=e.getElement();let o=e.getDoc();e.inline&&(x5.addClass(n,"mce-content-body"),e.contentDocument=o=document,e.contentWindow=window,e.bodyElement=n,e.contentAreaContainer=n);const r=e.getBody();r.disabled=!0,e.readonly=Q1(e),e._editableRoot=e0(e),!c0(e)&&e.hasEditableRoot()&&(e.inline&&x5.getStyle(r,"position",!0)==="static"&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,e.editorUpload=F0(e),e.schema=Pu(KI(e)),e.dom=Is(o,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:uv(e),referrerPolicy:H2(e),crossOrigin:K1(e),onSetAttrib:f=>{e.dispatch("SetAttrib",f)}}),e.parser=YI(e),e.serializer=OT(RK(e),e),e.selection=_T(e.dom,e.getWin(),e.serializer,e),e.annotator=SE(e),e.formatter=Qv(e),e.undoManager=lw(e),e._nodeChangeDispatcher=new GA(e),e._selectionOverrides=cK(e),wJ(e),jP(e),vI(e),CZ(e),Zu(e)||(RG(e),_K(e));const c=Hq(e);ZP(e,c),xA(e),RN(e),i5(e,c);const u=nw(e);FK(e),u.fold(()=>{const f=NK(e);Ay(e).then(()=>{A5(e),f()})},f=>{e.setProgressState(!0),Ay(e).then(()=>{f().then(b=>{e.setProgressState(!1),A5(e),hD(e)},b=>{e.notificationManager.open({type:"error",text:String(b)}),A5(e),hD(e)})})})},_5=Is.DOM,t7=(e,n,o,r)=>{const c=re.fromTag("iframe");return r.each(u=>Cr(c,"tabindex",u)),Ka(c,o),Ka(c,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",...Po.browser.isFirefox()?{title:n}:{}}),di(c,"tox-edit-area__iframe"),c},PK=e=>{let n=fp(e)+"<html><head>";q1(e)!==e.editorManager.documentBaseURL&&(n+='<base href="'+e.documentBaseURI.getURI()+'" />'),n+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const o=Xm(e),r=kc(e),c=e.translate(gv(e)),u=Po.browser.isFirefox()?"":`aria-label="${c}"`;return cm(e)&&(n+='<meta http-equiv="Content-Security-Policy" content="'+cm(e)+'" />'),n+=`</head><body id="${o}" class="mce-content-body ${r}" data-id="${e.id}" ${u}><br></body></html>`,n},n7=(e,n)=>{const o=gv(e),r=e.translate(o),c=Xi(re.fromDom(e.getElement()),"tabindex").bind(Qu),u=t7(e.id,r,lv(e),c).dom;u.onload=()=>{u.onload=null,e.dispatch("load")},e.contentAreaContainer=n.iframeContainer,e.iframeElement=u,e.iframeHTML=PK(e),_5.add(n.iframeContainer,u)},$K=e=>{const n=e.iframeElement,o=()=>{e.contentDocument=n.contentDocument,e7(e)};if(J2(e)||Po.browser.isFirefox()){const r=e.getDoc();r.open(),r.write(e.iframeHTML),r.close(),o()}else{const r=d1(re.fromDom(n),"load",()=>{r.unbind(),o()});n.srcdoc=e.iframeHTML}},IK=(e,n)=>{n7(e,n),n.editorContainer&&(n.editorContainer.style.display=e.orgDisplay,e.hidden=_5.isHidden(n.editorContainer)),e.getElement().style.display="none",_5.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,$K(e)},o7=Is.DOM,LK=(e,n,o)=>{const r=eg.get(o),c=eg.urls[o]||e.editorManager.documentBaseURL.replace(/\/$/,"");if(o=Mt.trim(o),r&&Mt.inArray(n,o)===-1){if(e.plugins[o])return;try{const u=r(e,c)||{};e.plugins[o]=u,he(u.init)&&(u.init(e,c),n.push(o))}catch(u){vh(e,o,u)}}},HK=e=>{const n=o=>{o.keyCode===Qt.ESC&&!o.defaultPrevented&&_x(e).isDefaultPrevented()&&o.preventDefault()};document.addEventListener("keyup",n),e.inline||e.on("keyup",n),e.on("remove",()=>{document.removeEventListener("keyup",n),e.inline||e.off("keyup",n)})},zK=e=>e.replace(/^\-/,""),VK=e=>{const n=[];me(Jg(e),o=>{LK(e,n,zK(o))})},UK=e=>{const n=Mt.trim(kx(e)),o=e.ui.registry.getAll().icons,r={...RT.get("default").icons,...RT.get(n).icons};xo(r,(c,u)=>{to(o,u)||e.ui.registry.addIcon(u,c)})},WK=e=>{const n=Yl(e);if(ie(n)){const o=M0.get(n);e.theme=o(e,M0.urls[n])||{},he(e.theme.init)&&e.theme.init(e,M0.urls[n]||e.editorManager.documentBaseURL.replace(/\/$/,""))}else e.theme={}},s7=e=>{const n=j2(e),o=Od.get(n);e.model=o(e,Od.urls[n])},k5=e=>{LT.init(e)},r7=e=>{const n=e.theme.renderUI;return n?n():i7(e)},a7=e=>{const n=e.getElement(),r=Yl(e)(e,n);return r.editorContainer.nodeType&&(r.editorContainer.id=r.editorContainer.id||e.id+"_parent"),r.iframeContainer&&r.iframeContainer.nodeType&&(r.iframeContainer.id=r.iframeContainer.id||e.id+"_iframecontainer"),r.height=r.iframeHeight?r.iframeHeight:n.offsetHeight,r},c7=(e,n)=>({editorContainer:e,iframeContainer:n,api:{}}),ZK=e=>{const n=o7.create("div");return o7.insertAfter(n,e),c7(n,n)},i7=e=>{const n=e.getElement();return e.inline?c7(null):ZK(n)},l7=e=>{const n=e.getElement();return e.orgDisplay=n.style.display,ie(Yl(e))?r7(e):he(Yl(e))?a7(e):i7(e)},u7=(e,n)=>{const o={show:P.from(n.show).getOr(Ct),hide:P.from(n.hide).getOr(Ct),isEnabled:P.from(n.isEnabled).getOr(ft),setEnabled:r=>{r&&(e.mode.get()==="readonly"||ia(e))||P.from(n.setEnabled).each(u=>u(r))}};e.ui={...e.ui,...o}},jK=async e=>{e.dispatch("ScriptsLoaded"),UK(e),HK(e),WK(e),s7(e),k5(e),VK(e);const n=await l7(e);u7(e,P.from(n.api).getOr({})),e.editorContainer=n.editorContainer,Tm(e),e.inline?e7(e):IK(e,{editorContainer:n.editorContainer,iframeContainer:n.iframeContainer})},Q0=Is.DOM,f_=e=>e.charAt(0)==="-",g_=(e,n)=>{const o=Dx(n),r=h4(n);if(!Iu.hasCode(o)&&o!=="en"){const c=Js(r)?r:`${n.editorManager.baseURL}/langs/${o}.js`;e.add(c).catch(()=>{uu(n,c,o)})}},d7=(e,n)=>{const o=Yl(e);if(ie(o)&&!f_(o)&&!to(M0.urls,o)){const r=Fx(e),c=r?e.documentBaseURI.toAbsolute(r):`themes/${o}/theme${n}.js`;M0.load(o,c).catch(()=>{DV(e,c,o)})}},m7=(e,n)=>{const o=j2(e);if(o!=="plugin"&&!to(Od.urls,o)){const r=p4(e),c=ie(r)?e.documentBaseURI.toAbsolute(r):`models/${o}/model${n}.js`;Od.load(o,c).catch(()=>{sr(e,c,o)})}},f7=(e,n)=>{LT.load(e,n)},qK=e=>P.from(cM(e)).filter(Js).map(n=>({url:n,name:P.none()})),g7=(e,n,o)=>P.from(n).filter(r=>Js(r)&&!RT.has(r)).map(r=>({url:`${e.editorManager.baseURL}/icons/${r}/icons${o}.js`,name:P.some(r)})),GK=(e,n,o)=>{const r=g7(n,"default",o),c=qK(n).orThunk(()=>g7(n,kx(n),""));me(Tn([r,c]),u=>{e.add(u.url).catch(()=>{aw(n,u.url,u.name.getOrUndefined())})})},KK=(e,n)=>{const o=(r,c)=>{r!=="licensekeymanager"&&eg.load(r,c).catch(()=>{lu(e,c,r)})};xo(fv(e),(r,c)=>{o(c,r),e.options.set("plugins",Jg(e).concat(c))}),me(Jg(e),r=>{r=Mt.trim(r),r&&!eg.urls[r]&&!f_(r)&&o(r,`plugins/${r}/plugin${n}.js`)})},rg=e=>{const n=Yl(e);return!ie(n)||Fe(M0.get(n))},h7=e=>{const n=j2(e);return Fe(Od.get(n))},YK=(e,n)=>{const o=va.ScriptLoader,r=()=>{!e.removed&&rg(e)&&h7(e)&&jK(e)};d7(e,n),m7(e,n),f7(e,n),g_(o,e),GK(o,e,n),KK(e,n),o.loadQueue().then(r,r)},p7=(e,n)=>Bu.forElement(e,{contentCssCors:t0(n),referrerPolicy:H2(n)}),XK=e=>{const n=e.id;Iu.setCode(Dx(e));const o=()=>{Q0.unbind(window,"ready",o),e.render()};if(!$u.Event.domLoaded){Q0.bind(window,"ready",o);return}if(!e.getElement())return;const r=re.fromDom(e.getElement()),c=Ho(r);e.on("remove",()=>{Re(r.dom.attributes,f=>Qr(r,f.name)),Ka(r,c)}),e.ui.styleSheetLoader=p7(r,e),mv(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const u=e.getElement().form||Q0.getParent(n,"form");u&&(e.formElement=u,Nx(e)&&!Xy(e.getElement())&&(Q0.insertAfter(Q0.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=f=>{e.dispatch(f.type,f)},Q0.bind(u,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),y4(e)&&!u.submit.nodeType&&!u.submit.length&&!u._mceOldSubmit&&(u._mceOldSubmit=u.submit,u.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),u._mceOldSubmit(u)))),e.windowManager=FT(e),e.notificationManager=ED(e),Kx(e)&&e.on("GetContent",f=>{f.save&&(f.content=Q0.encode(f.content))}),Px(e)&&e.on("submit",()=>{e.initialized&&e.save()}),uM(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),YK(e,e.suffix)},b7=["#E41B60","#AD1457","#1939EC","#001CB5","#648000","#465B00","#006CE7","#0054B4","#00838F","#006064","#00866F","#004D40","#51742F","#385021","#CF4900","#A84600","#CC0000","#6A1B9A","#9C27B0","#6A00AB","#3041BA","#0A1877","#774433","#452B24","#607D8B","#455A64"],D5=e=>{var n;return Intl.Segmenter?`${(n=new Intl.Segmenter().segment(e)[Symbol.iterator]().next().value)===null||n===void 0?void 0:n.segment}`:e.trim()[0]},h_=(e,n)=>{let o=5381;for(let r=0;r<e.length;r++)o=(o<<5)+o+e.charCodeAt(r);return(o>>>0)%(n+1)},JK=e=>{const n=h_(e??"",b7.length-1);return b7[n]},QK=(e,n,o)=>{const r=o/2;return`<svg height="${o}" width="${o}" xmlns="http://www.w3.org/2000/svg"><circle cx="${r}" cy="${r}" r="${r}" fill="${n}"/><text x="50%" y="50%" text-anchor="middle" dominant-baseline="central" fill="#FFF" font-family="sans-serif" font-size="${r}">`+e+"</text></svg>"},eY=(e,n,o)=>"data:image/svg+xml,"+encodeURIComponent(QK(e,n,o)),p_=(e,n={size:36})=>eY(D5(e.name),JK(e.id),n.size),tY=$w([Tj("id"),a$("name"),a$("avatar"),Aj("custom")]),v7=e=>{const n={};return xo(e,(o,r)=>{o.each(c=>{n[r]=c})}),n},nY=e=>{if(!Array.isArray(e))throw new Error("fetch_users must return an array");const n=Oe(e,c=>n$("Invalid user object",tY,c)),{errors:o,values:r}=Er(n);if(o.length>0){const c=Oe(o,(u,f)=>`User at index ${f}: ${HA(u)}`);console.warn(`User validation errors:
`+c.join(`
`))}return Oe(r,c=>{const{id:u,name:f,avatar:b,...v}=c;return{id:u,name:f.getOr(u),avatar:b.getOr(p_({id:u,name:f.getOr(u)})),...v7(v)}})},oY=e=>{const n=new Map,o=new Map,r=x=>P.from(n.get(x)),c=(x,D)=>{n.set(D,x)},u=(x,D)=>P.from(o.get(x)).each(({reject:B})=>{B(D),o.delete(x)}),f=(x,D)=>P.from(o.get(x)).each(({resolve:B})=>{B(D),o.delete(x)}),b=x=>{const D=Cv(e);if(Array.isArray(x)){if(!D)return Nt(x,N=>Promise.resolve({id:N,name:N,avatar:p_({id:N,name:N})}))}else return{};const B=Xs(tt(x,N=>!r(N).isSome()));return me(B,N=>{const H=new Promise((te,Q)=>{o.set(N,{resolve:te,reject:Q})});c(H,N)}),B.length>0&&D(B).then(nY).then(N=>{const H=new Set(Oe(N,te=>te.id));me(N,te=>f(te.id,te)),me(B,te=>{H.has(te)||u(te,new Error(`User ${te} not found`))})}).catch(N=>{me(B,H=>u(H,N instanceof Error?N:new Error("Network error")))}),st(x,(N,H)=>(N[H]=r(H).getOr(Promise.resolve({id:H,name:H,avatar:p_({id:H,name:H})})),N),{})},v=D4(e);return Object.freeze({userId:v,fetchUsers:b})},sY=e=>oY(e),rY=(e,n)=>{e._editableRoot!==n&&(e._editableRoot=n,ia(e)||(e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged()),sM(e,n))},aY=e=>e._editableRoot,y7=(e,n)=>({sections:bt(e),options:bt(n)}),oS=Do().deviceType,b_=oS.isPhone(),cY=oS.isTablet(),_y=e=>{if(vn(e))return[];{const n=Qe(e)?e:e.split(/[ ,]/),o=Oe(n,cr);return tt(o,Js)}},C7=(e,n)=>{const o=Ds(n,(r,c)=>be(e,c));return y7(o.t,o.f)},iY=(e,n,o={})=>{const r=e.sections(),c=Ss(r,n).getOr({});return Mt.extend({},o,c)},v_=(e,n)=>to(e.sections(),n),lY=(e,n)=>v_(e,n)?e.sections()[n]:{},uY=(e,n)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Ss(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...n?{menubar:!1}:{}}),dY=(e,n)=>{var o;const r=(o=n.external_plugins)!==null&&o!==void 0?o:{};return e&&e.external_plugins?Mt.extend({},e.external_plugins,r):r},mY=(e,n)=>[..._y(e),..._y(n)],w7=(e,n,o,r)=>e&&v_(n,"mobile")?r:o,S7=(e,n,o,r)=>{const c=_y(o.forced_plugins),u=_y(r.plugins),f=lY(n,"mobile"),b=f.plugins?_y(f.plugins):u,v=w7(e,n,u,b),x=mY(c,v);return Mt.extend(r,{forced_plugins:c,plugins:x})},x7=(e,n)=>e&&v_(n,"mobile"),E7=(e,n,o,r,c)=>{var u;const f=e?{mobile:uY((u=c.mobile)!==null&&u!==void 0?u:{},n)}:{},b=C7(["mobile"],gt(f,c)),v=Mt.extend(o,r,b.options(),x7(e,b)?iY(b,"mobile"):{},{external_plugins:dY(r,b.options())});return S7(e,b,r,v)},T7=(e,n)=>{const o=Yt(n);return E7(b_||cY,b_,o,e,o)},A7=(e,n)=>U6(e,n),O5=e=>{const n=(r,c)=>{e.formatter.toggle(r,c),e.nodeChanged()},o=r=>()=>{me("left,center,right,justify".split(","),c=>{r!==c&&e.formatter.remove("align"+c)}),r!=="none"&&n("align"+r)};e.editorCommands.addCommands({JustifyLeft:o("left"),JustifyCenter:o("center"),JustifyRight:o("right"),JustifyFull:o("justify"),JustifyNone:o("none")})},_7=e=>{const n=o=>()=>{const r=e.selection,c=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return ke(c,u=>Fe(e.formatter.matchNode(u,o)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")},k7=e=>{O5(e),_7(e)},D7=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=e.getDoc();let r;try{o.execCommand(n)}catch{r=!0}if(n==="paste"&&!o.queryCommandEnabled(n)&&(r=!0),r||!o.queryCommandSupported(n)){let c=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(Po.os.isMacOS()||Po.os.isiOS())&&(c=c.replace(/Ctrl\+/g,"+")),e.notificationManager.open({text:c,type:"error"})}}})},fY=(e,n,o,r)=>{const c=re.fromDom(e.getRoot());return OC(c,nt.fromRangeStart(n),r)?o=o.replace(/^ /,"&nbsp;"):o=o.replace(/^&nbsp;/," "),RC(c,nt.fromRangeEnd(n),r)?o=o.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):o=o.replace(/&nbsp;(<br( \/)?>)?$/," "),o},gY=e=>{if(typeof e!="string"){const n=Mt.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:n}}return{content:e,details:{}}},O7=(e,n)=>{const o=e.selection,r=e.dom;return/^ | $/.test(n)?fY(r,o.getRng(),n,e.schema):n},sS=(e,n)=>{if(e.selection.isEditable()){const{content:o,details:r}=gY(n);KC(e,{...r,content:O7(e,o),format:"html",set:!1,selection:!0}).each(c=>{const u=z6(e,c.content,r);lT(e,u,c),e.addVisual()})}},R7=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{sS(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{sS(e,e.dom.encode(r))},insertHTML:(n,o,r)=>{sS(e,r)},mceInsertContent:(n,o,r)=>{sS(e,r)},mceSetContent:(n,o,r)=>{e.setContent(r)},mceReplaceContent:(n,o,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(Wx(e))}})},M7={"font-size":"size","font-family":"face"},R5=Jr("font"),M5=(e,n,o)=>{const r=u=>Ur(u,e).orThunk(()=>R5(u)?Ss(M7,e).bind(f=>Xi(u,f)):P.none()),c=u=>Yo(re.fromDom(n),u);return Vc(re.fromDom(o),u=>r(u),c)},y_=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),B7=(e,n)=>P.from(Is.DOM.getStyle(n,e,!0)),B5=e=>(n,o)=>P.from(o).map(re.fromDom).filter(Tr).bind(r=>M5(e,n,r.dom).or(B7(e,r.dom))).getOr(""),F7=B5("font-size"),F5=k(y_,B5("font-family")),N7=e=>Yc(e.getBody()).bind(n=>{const o=n.container();return P.from(kt(o)?o.parentNode:o)}),P7=e=>P.from(e.selection.getRng()).bind(n=>{const o=e.getBody();return n.startContainer===o&&n.startOffset===0?P.none():P.from(e.selection.getStart(!0))}),hY=(e,n)=>P7(e).orThunk(Te(N7,e)).map(re.fromDom).filter(Tr).bind(n),C_=(e,n)=>hY(e,Eo(P.some,n)),$7=(e,n)=>{if(/^[0-9.]+$/.test(n)){const o=parseInt(n,10);if(o>=1&&o<=7){const r=T4(e),c=th(e);return c.length>0?c[o-1]||n:r[o-1]||n}else return n}else return n},pY=e=>{const n=e.split(/\s*,\s*/);return Oe(n,o=>o.indexOf(" ")!==-1&&!(jn(o,'"')||jn(o,"'"))?`'${o}'`:o).join(",")},bY=(e,n)=>{const o=$7(e,n);e.formatter.toggle("fontname",{value:pY(o)}),e.nodeChanged()},I7=e=>C_(e,n=>F5(e.getBody(),n.dom)).getOr(""),vY=(e,n)=>{e.formatter.toggle("fontsize",{value:$7(e,n)}),e.nodeChanged()},L7=e=>C_(e,n=>F7(e.getBody(),n.dom)).getOr(""),w_=e=>C_(e,n=>{const o=re.fromDom(e.getBody()),r=Vc(n,u=>Ur(u,"line-height"),Te(Yo,o)),c=()=>{const u=parseFloat(Pr(n,"line-height")),f=parseFloat(Pr(n,"font-size"));return String(u/f)};return r.getOrThunk(c)}).getOr(""),yY=(e,n)=>{e.formatter.toggle("lineheight",{value:String(n)}),e.nodeChanged()},H7=e=>{const n=(o,r)=>{e.formatter.toggle(o,r),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{n(o)},"ForeColor,HiliteColor":(o,r,c)=>{n(o,{value:c})},BackColor:(o,r,c)=>{n("hilitecolor",{value:c})},FontName:(o,r,c)=>{bY(e,c)},FontSize:(o,r,c)=>{vY(e,c)},LineHeight:(o,r,c)=>{yY(e,c)},Lang:(o,r,c)=>{var u;n(o,{value:c.code,customValue:(u=c.customCode)!==null&&u!==void 0?u:null})},RemoveFormat:o=>{e.formatter.remove(o)},mceBlockQuote:()=>{n("blockquote")},FormatBlock:(o,r,c)=>{n(ie(c)?c:"p")},mceToggleFormat:(o,r,c)=>{n(c)}})},CY=e=>{const n=o=>e.formatter.match(o);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>n(o),mceBlockQuote:()=>n("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>I7(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>L7(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>w_(e))},z7=e=>{H7(e),CY(e)},N5=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},wY=e=>{e.editorCommands.addCommands({Indent:()=>{gZ(e)},Outdent:()=>{VP(e)}}),e.editorCommands.addCommands({Outdent:()=>xw(e),Indent:()=>UO(e)},"state")},SY=e=>{const n=(o,r,c)=>{if(e.mode.isReadOnly())return;const u=ie(c)?{href:c}:c,f=e.dom.getParent(e.selection.getNode(),"a");en(u)&&ie(u.href)&&(u.href=u.href.replace(/ /g,"%20").replace(/&amp;/g,"&"),(!f||!u.href)&&e.formatter.remove("link"),u.href&&e.formatter.apply("link",u,f))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");o&&e.dom.remove(o,!0);return}e.formatter.remove("link")}},mceInsertLink:n,createLink:n})},V7=(e,n,o,r)=>{const c=e.dom,u=b=>c.isBlock(b)&&b.parentElement===o,f=u(n)?n:c.getParent(r,u,o);return P.from(f).map(re.fromDom)},U7=(e,n)=>{if(e.mode.isReadOnly())return;const o=e.dom,r=e.selection.getRng(),c=n?e.selection.getStart():e.selection.getEnd(),u=n?r.startContainer:r.endContainer,f=yy(o,u);if(!f||!f.isContentEditable)return;const b=n?Ga:Ki,v=pc(e);V7(e,c,f,u).each(x=>{const D=NR(e,u,x.dom,f,!1,v);b(x,re.fromDom(D)),e.selection.setCursorLocation(D,0),e.dispatch("NewBlock",{newBlock:D}),by(e,"insertParagraph")})},xY=e=>U7(e,!0),EY=e=>U7(e,!1),TY=e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{xY(e)},InsertNewBlockAfter:()=>{EY(e)}})},AY=e=>{e.editorCommands.addCommands({insertParagraph:()=>{jA(D$,e)},mceInsertNewLine:(n,o,r)=>{N$(e,r)},InsertLineBreak:(n,o,r)=>{jA(O$,e)}})},W7=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let c=0;e.dom.getParent(e.selection.getNode(),u=>Cn(u)&&c++===r?(e.selection.select(u),!1):!0,e.getBody())},mceSelectNode:(n,o,r)=>{e.selection.select(r)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),fi);if(n){const o=e.dom.createRng();o.selectNodeContents(n),e.selection.setRng(o)}}})},Z7=e=>{e.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const c=r??e.selection.getNode();if(c!==e.getBody()){const u=e.selection.getBookmark();e.dom.remove(c,!0),e.selection.moveToBookmark(u)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,o,r)=>{ML(e,r===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},_Y=e=>{k7(e),D7(e),N5(e),W7(e),R7(e),SY(e),wY(e),TY(e),AY(e),z7(e),Z7(e)},kY=["toggleview"],j7=e=>be(kY,e.toLowerCase());class q7{constructor(n){this.commands={state:{},exec:{},value:{}},this.editor=n}execCommand(n,o=!1,r,c){const u=this.editor,f=n.toLowerCase(),b=c==null?void 0:c.skip_focus;if(u.removed||(f!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(f)&&!b?u.focus():bM(u)),u.dispatch("BeforeExecCommand",{command:n,ui:o,value:r}).isDefaultPrevented()))return!1;const x=this.commands.exec[f];return he(x)?(x(f,o,r,c),u.dispatch("ExecCommand",{command:n,ui:o,value:r,args:c}),!0):!1}queryCommandState(n){if(!j7(n)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const o=n.toLowerCase(),r=this.commands.state[o];return he(r)?r(o):!1}queryCommandValue(n){if(!j7(n)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const o=n.toLowerCase(),r=this.commands.value[o];return he(r)?r(o):""}addCommands(n,o="exec"){const r=this.commands;xo(n,(c,u)=>{me(u.toLowerCase().split(","),f=>{r[o][f]=c})})}addCommand(n,o,r){const c=n.toLowerCase();this.commands.exec[c]=(u,f,b,v)=>o.call(r??this.editor,f,b,v)}queryCommandSupported(n){const o=n.toLowerCase();return!!this.commands.exec[o]}addQueryStateHandler(n,o,r){this.commands.state[n.toLowerCase()]=()=>o.call(r??this.editor)}addQueryValueHandler(n,o,r){this.commands.value[n.toLowerCase()]=()=>o.call(r??this.editor)}}const t=Mt.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class s{static isNative(n){return!!t[n.toLowerCase()]}constructor(n){this.bindings={},this.settings=n||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||Ne}fire(n,o){return this.dispatch(n,o)}dispatch(n,o){const r=n.toLowerCase(),c=D1(r,o??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(c);const u=this.bindings[r];if(u)for(let f=0,b=u.length;f<b;f++){const v=u[f];if(!v.removed){if(v.once&&this.off(r,v.func),c.isImmediatePropagationStopped())return c;if(v.func.call(this.scope,c)===!1)return c.preventDefault(),c}}return c}on(n,o,r,c){if(o===!1&&(o=Ne),o){const u={func:o,removed:!1};c&&Mt.extend(u,c);const f=n.toLowerCase().split(" ");let b=f.length;for(;b--;){const v=f[b];let x=this.bindings[v];x||(x=[],this.toggleEvent(v,!0)),r?x=[u,...x]:x=[...x,u],this.bindings[v]=x}}return this}off(n,o){if(n){const r=n.toLowerCase().split(" ");let c=r.length;for(;c--;){const u=r[c];let f=this.bindings[u];if(!u)return xo(this.bindings,(b,v)=>{this.toggleEvent(v,!1),delete this.bindings[v]}),this;if(f){if(!o)f.length=0;else{const b=at(f,v=>v.func===o);f=b.fail,this.bindings[u]=f,me(b.pass,v=>{v.removed=!0})}f.length||(this.toggleEvent(n,!1),delete this.bindings[u])}}}else xo(this.bindings,(r,c)=>{this.toggleEvent(c,!1)}),this.bindings={};return this}once(n,o,r){return this.on(n,o,r,{once:!0})}has(n){n=n.toLowerCase();const o=this.bindings[n];return!(!o||o.length===0)}}const a=e=>(e._eventDispatcher||(e._eventDispatcher=new s({scope:e,toggleEvent:(n,o)=>{s.isNative(n)&&e.toggleNativeEvent&&e.toggleNativeEvent(n,o)}})),e._eventDispatcher),i={fire(e,n,o){return jF("fire"),this.dispatch(e,n,o)},dispatch(e,n,o){const r=this;if(r.removed&&e!=="remove"&&e!=="detach")return D1(e.toLowerCase(),n??{},r);const c=a(r).dispatch(e,n);if(o!==!1&&r.parent){let u=r.parent();for(;u&&!c.isPropagationStopped();)u.dispatch(e,c,!1),u=u.parent?u.parent():void 0}return c},on(e,n,o){return a(this).on(e,n,o)},off(e,n){return a(this).off(e,n)},once(e,n){return a(this).once(e,n)},hasEventListeners(e){return a(this).has(e)}},d=Is.DOM;let g;const h=(e,n)=>{if(n==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(n))return e.getDoc().documentElement;const o=dv(e);return o?(e.eventRoot||(e.eventRoot=d.select(o)[0]),e.eventRoot):e.getBody()},C=e=>!e.hidden&&!ia(e),S=(e,n,o)=>{C(e)?e.dispatch(n,o):ia(e)&&ju(e,o)},T=(e,n)=>{if(e.delegates||(e.delegates={}),e.delegates[n]||e.removed)return;const o=h(e,n);if(dv(e)){if(g||(g={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||g&&(xo(g,(c,u)=>{e.dom.unbind(h(e,u))}),g=null)})),g[n])return;const r=c=>{const u=c.target,f=e.editorManager.get();let b=f.length;for(;b--;){const v=f[b].getBody();(v===u||d.isChildOf(u,v))&&S(f[b],n,c)}};g[n]=r,d.bind(o,n,r)}else{const r=c=>{S(e,n,c)};d.bind(o,n,r),e.delegates[n]=r}},O={...i,bindPendingEventDelegates(){const e=this;Mt.each(e._pendingNativeEvents,n=>{T(e,n)})},toggleNativeEvent(e,n){const o=this;e==="focus"||e==="blur"||o.removed||(n?o.initialized?T(o,e):o._pendingNativeEvents?o._pendingNativeEvents.push(e):o._pendingNativeEvents=[e]:o.initialized&&o.delegates&&(o.dom.unbind(h(o,e),e,o.delegates[e]),delete o.delegates[e]))},unbindAllNativeEvents(){const e=this,n=e.getBody(),o=e.dom;e.delegates&&(xo(e.delegates,(r,c)=>{e.dom.unbind(h(e,c),c,r)}),delete e.delegates),!e.inline&&n&&o&&(n.onload=null,o.unbind(e.getWin()),o.unbind(e.getDoc())),o&&(o.unbind(n),o.unbind(e.getContainer()))}},F=e=>ie(e)?{value:e.split(/[ ,]/),valid:!0}:ut(e,ie)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},z=e=>{const n=(()=>{switch(e){case"array":return Qe;case"boolean":return It;case"function":return he;case"number":return Cs;case"object":return en;case"string":return ie;case"string[]":return F;case"object[]":return o=>ut(o,en);case"regexp":return o=>Bt(o,RegExp);default:return ft}})();return o=>ye(o,n,`The value must be a ${e}.`)},q=e=>ie(e.processor),Z=(e,n)=>{const o=Ai(n.message)?"":`. ${n.message}`;return e+o},ae=e=>e.valid,ye=(e,n,o="")=>{const r=n(e);return It(r)?r?{value:e,valid:!0}:{valid:!1,message:o}:r},ce=(e,n,o)=>{if(!Kn(n)){const r=ye(n,o);if(ae(r))return r.value;console.error(Z(`Invalid default value passed for the "${e}" option`,r))}},xe=(e,n,o=n)=>{const r={},c={},u=(H,te,Q)=>{const Y=ye(te,Q);return ae(Y)?(c[H]=Y.value,!0):(console.warn(Z(`Invalid value passed for the ${H} option`,Y)),!1)},f=(H,te)=>{const Q=q(te)?z(te.processor):te.processor,Y=ce(H,te.default,Q);r[H]={...te,default:Y,processor:Q},Ss(c,H).orThunk(()=>Ss(n,H)).each(_e=>u(H,_e,Q))},b=H=>to(r,H);return{register:f,isRegistered:b,get:H=>Ss(c,H).orThunk(()=>Ss(r,H).map(te=>te.default)).getOrUndefined(),set:(H,te)=>{if(b(H)){const Q=r[H];return Q.immutable?(console.error(`"${H}" is an immutable option and cannot be updated`),!1):u(H,te,Q.processor)}else return console.warn(`"${H}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:H=>{const te=b(H);return te&&delete c[H],te},isSet:H=>to(c,H),debug:()=>{try{console.log(JSON.parse(JSON.stringify(o,(H,te)=>It(te)||Cs(te)||ie(te)||K(te)||Qe(te)||Ro(te)?te:Object.prototype.toString.call(te))))}catch(H){console.error(H)}}}},De=(e,n)=>{e.dom.contentEditable="true"},Ke=(e,n)=>{const o=re.fromDom(e.getBody());n?(e.readonly=!0,e.hasEditableRoot()&&De(o),gN(e)):(e.readonly=!1,BD(e))},Ye=e=>e.readonly,Kt=e=>{const n=e.undoManager.add();Fe(n)&&(e.undoManager.undo(),e.undoManager.reset())},Tt=e=>ke(e,n=>n.type==="characterData"||n.type==="childList"),_t=e=>{const n=r=>{Ye(e)&&Tt(r)&&Kt(e)},o=new MutationObserver(n);e.on("beforeinput paste cut dragend dragover draggesture dragdrop drop drag",r=>{Ye(e)&&r.preventDefault()}),e.on("BeforeExecCommand",r=>{(r.command==="Undo"||r.command==="Redo")&&Ye(e)&&r.preventDefault()}),e.on("compositionstart",()=>{Ye(e)&&o.observe(e.getBody(),{characterData:!0,childList:!0,subtree:!0})}),e.on("compositionend",()=>{if(Ye(e)){const r=o.takeRecords();n(r)}o.disconnect()})},wt=["design","readonly"],Bn=(e,n,o,r)=>{const c=o[n.get()],u=o[r];try{u.activate()}catch(f){console.error(`problem while activating editor mode ${r}:`,f);return}c.deactivate(),c.editorReadOnly!==u.editorReadOnly&&Ke(e,u.editorReadOnly),n.set(r),o4(e,r)},yn=(e,n,o,r)=>{if(!(r===o.get()||e.initialized&&ia(e))){if(!to(n,r))throw new Error(`Editor mode '${r}' is invalid`);e.initialized?Bn(e,o,n,r):e.on("init",()=>Bn(e,o,n,r))}},Zo=(e,n,o)=>{if(be(wt,n))throw new Error(`Cannot override default mode ${n}`);return{...e,[n]:{...o,deactivate:()=>{try{o.deactivate()}catch(r){console.error(`problem while deactivating editor mode ${n}:`,r)}}}}},Vn=e=>{const n=gn("design"),o=gn({design:{activate:Ct,deactivate:Ct,editorReadOnly:!1},readonly:{activate:Ct,deactivate:Ct,editorReadOnly:!0}});return _t(e),HV(e),{isReadOnly:()=>Ye(e),set:r=>yn(e,o.get(),n,r),get:()=>n.get(),register:(r,c)=>{o.set(Zo(o.get(),r,c))}}},mo=Mt.each,bn=Mt.explode,vt={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},Ut=Mt.makeMap("alt,ctrl,shift,meta,access"),qn=e=>e in Ut,vo=e=>{const n={},o=Po.os.isMacOS()||Po.os.isiOS();mo(bn(e.toLowerCase(),"+"),u=>{qn(u)?n[u]=!0:/^[0-9]{2,}$/.test(u)?n.keyCode=parseInt(u,10):(n.charCode=u.charCodeAt(0),n.keyCode=vt[u]||u.toUpperCase().charCodeAt(0))});const r=[n.keyCode];let c;for(c in Ut)n[c]?r.push(c):n[c]=!1;return n.id=r.join(","),n.access&&(n.alt=!0,o?n.ctrl=!0:n.shift=!0),n.meta&&(o?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n};class En{constructor(n){this.shortcuts={},this.pendingPatterns=[],this.editor=n;const o=this;n.on("keyup keypress keydown",r=>{(o.hasModifier(r)||o.isFunctionKey(r))&&!r.isDefaultPrevented()&&(mo(o.shortcuts,c=>{o.matchShortcut(r,c)&&(o.pendingPatterns=c.subpatterns.slice(0),r.type==="keydown"&&o.executeShortcutAction(c))}),o.matchShortcut(r,o.pendingPatterns[0])&&(o.pendingPatterns.length===1&&r.type==="keydown"&&o.executeShortcutAction(o.pendingPatterns[0]),o.pendingPatterns.shift()))})}add(n,o,r,c){const u=this,f=u.normalizeCommandFunc(r);return mo(bn(Mt.trim(n)),b=>{const v=u.createShortcut(b,o,f,c);u.shortcuts[v.id]=v}),!0}remove(n){const o=this.createShortcut(n);return this.shortcuts[o.id]?(delete this.shortcuts[o.id],!0):!1}normalizeCommandFunc(n){const o=this,r=n;return typeof r=="string"?()=>{o.editor.execCommand(r,!1,null)}:Mt.isArray(r)?()=>{o.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(n,o,r,c){const u=Mt.map(bn(n,">"),vo);return u[u.length-1]=Mt.extend(u[u.length-1],{func:r,scope:c||this.editor}),Mt.extend(u[0],{desc:this.editor.translate(o),subpatterns:u.slice(1)})}hasModifier(n){return n.altKey||n.ctrlKey||n.metaKey}isFunctionKey(n){return n.type==="keydown"&&n.keyCode>=112&&n.keyCode<=123}matchShortcut(n,o){return!o||o.ctrl!==n.ctrlKey||o.meta!==n.metaKey||o.alt!==n.altKey||o.shift!==n.shiftKey?!1:n.keyCode===o.keyCode||n.charCode&&n.charCode===o.charCode?(n.preventDefault(),!0):!1}executeShortcutAction(n){return n.func?n.func.call(n.scope):null}}const po=()=>{const e=Fj();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,addContext:e.addContext,getAll:e.getAll}},ys=Is.DOM,gs=Mt.extend,Hi=Mt.each;class rr{constructor(n,o,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=r,gs(this,O);const c=this;this.id=n,this.editorUid=qo(),this.hidden=!1;const u=T7(r.defaultOptions,o);this.options=xe(c,u,o),j1(c),this.userLookup=sY(this);const f=this.options.get;f("deprecation_warnings")&&oz(o,u);const b=f("suffix");b&&(r.suffix=b),this.suffix=r.suffix;const v=f("base_url");v&&r._setBaseUrl(v),this.baseUri=r.baseURI;const x=H2(c);x&&(va.ScriptLoader._setReferrerPolicy(x),Is.DOM.styleSheetLoader._setReferrerPolicy(x)),va.ScriptLoader._setCrossOrigin(H=>K1(c)(H,"script")),Is.DOM.styleSheetLoader._setCrossOrigin(H=>K1(c)(H,"stylesheet"));const D=t0(c);Fe(D)&&Is.DOM.styleSheetLoader._setContentCssCors(D),_c.languageLoad=f("language_load"),_c.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new Si(q1(c),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=mv(c),this.hasVisual=Jm(c),this.shortcuts=new En(this),this.editorCommands=new q7(this),_Y(this);const B=f("cache_suffix");B&&(Po.cacheSuffix=B.replace(/^[\?\&]+/,"")),this.ui={registry:po(),styleSheetLoader:void 0,show:Ct,hide:Ct,setEnabled:Ct,isEnabled:ft},this.mode=Vn(c),Object.defineProperty(this,"editorUid",{writable:!1,configurable:!1,enumerable:!0}),r.dispatch("SetupEditor",{editor:this});const N=Lx(c);he(N)&&N.call(c,c)}render(){XK(this)}focus(n){this.execCommand("mceFocus",!1,n)}hasFocus(){return y0(this)}translate(n){return Iu.translate(n)}getParam(n,o,r){const c=this.options;return c.isRegistered(n)||(Fe(r)?c.register(n,{processor:r,default:o}):c.register(n,{processor:ft,default:o})),!c.isSet(n)&&!Kn(o)?o:c.get(n)}hasPlugin(n,o){return be(Jg(this),n)?o?eg.get(n)!==void 0:!0:!1}nodeChanged(n){this._nodeChangeDispatcher.nodeChanged(n)}addCommand(n,o,r){this.editorCommands.addCommand(n,o,r)}addQueryStateHandler(n,o,r){this.editorCommands.addQueryStateHandler(n,o,r)}addQueryValueHandler(n,o,r){this.editorCommands.addQueryValueHandler(n,o,r)}addShortcut(n,o,r,c){this.shortcuts.add(n,o,r,c)}execCommand(n,o,r,c){return this.editorCommands.execCommand(n,o,r,c)}queryCommandState(n){return this.editorCommands.queryCommandState(n)}queryCommandValue(n){return this.editorCommands.queryCommandValue(n)}queryCommandSupported(n){return this.editorCommands.queryCommandSupported(n)}show(){const n=this;n.hidden&&(n.hidden=!1,n.inline?n.getBody().contentEditable="true":(ys.show(n.getContainer()),ys.hide(n.id)),n.load(),n.dispatch("show"))}hide(){const n=this;n.hidden||(n.save(),n.inline?(n.getBody().contentEditable="false",n===n.editorManager.focusedEditor&&(n.editorManager.focusedEditor=null)):(ys.hide(n.getContainer()),ys.setStyle(n.id,"display",n.orgDisplay)),n.hidden=!0,n.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(n,o){this.dispatch("ProgressState",{state:n,time:o})}load(n={}){const o=this,r=o.getElement();if(!o.removed&&r){const c={...n,load:!0},u=Xy(r)?r.value:r.innerHTML;o.setContent(u,c),c.no_events||o.dispatch("LoadContent",{...c,element:r})}}save(n={}){const o=this;let r=o.getElement();if(!r||!o.initialized||o.removed)return"";const c={...n,save:!0,element:r};let u=o.getContent(c);const f={...c,content:u};if(f.no_events||o.dispatch("SaveContent",f),f.format==="raw"&&o.dispatch("RawSaveContent",f),u=f.content,Xy(r))r.value=u;else{(n.is_removing||!o.inline)&&(r.innerHTML=u);const b=ys.getParent(o.id,"form");b&&Hi(b.elements,v=>v.name===o.id?(v.value=u,!1):!0)}return f.element=c.element=r=null,f.set_dirty!==!1&&o.setDirty(!1),u}setContent(n,o){sw(this,n,o)}getContent(n){return nN(this,n)}insertContent(n,o){o&&(n=gs({content:n},o)),this.execCommand("mceInsertContent",!1,n)}resetContent(n){n===void 0?sw(this,this.startContent,{initial:!0,format:"raw"}):sw(this,n,{initial:!0}),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(n){const o=!this.isNotDirty;this.isNotDirty=!n,n&&n!==o&&this.dispatch("dirty")}getContainer(){const n=this;return n.container||(n.container=n.editorContainer||ys.get(n.id+"_parent")),n.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=ys.get(this.id)),this.targetElm}getWin(){const n=this;if(!n.contentWindow){const o=n.iframeElement;o&&(n.contentWindow=o.contentWindow)}return n.contentWindow}getDoc(){const n=this;if(!n.contentDocument){const o=n.getWin();o&&(n.contentDocument=o.document)}return n.contentDocument}getBody(){var n,o;const r=this.getDoc();return(o=(n=this.bodyElement)!==null&&n!==void 0?n:r==null?void 0:r.body)!==null&&o!==void 0?o:null}convertURL(n,o,r){const c=this,u=c.options.get,f=zx(c);if(he(f))return f.call(c,n,r,!0,o);if(!u("convert_urls")||r==="link"||en(r)&&r.nodeName==="LINK"||n.indexOf("file:")===0||n.length===0)return n;const b=new Si(n);return b.protocol!=="http"&&b.protocol!=="https"&&b.protocol!==""?n:u("relative_urls")?c.documentBaseURI.toRelative(n):(n=c.documentBaseURI.toAbsolute(n,u("remove_script_host")),n)}addVisual(n){A7(this,n)}setEditableRoot(n){rY(this,n)}hasEditableRoot(){return aY(this)}remove(){oN(this)}destroy(n){sN(this,n)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const Dc=Is.DOM,Ra=Mt.each;let ll=!1,Ei,Gr=[];const ag=e=>{const n=e.type;Ra(cg.get(),o=>{switch(n){case"scroll":o.dispatch("ScrollWindow",e);break;case"resize":o.dispatch("ResizeWindow",e);break}})},Pd=e=>{if(e!==ll){const n=Is.DOM;e?(n.bind(window,"resize",ag),n.bind(window,"scroll",ag)):(n.unbind(window,"resize",ag),n.unbind(window,"scroll",ag)),ll=e}},eb=e=>{const n=Gr;return Gr=tt(Gr,o=>e!==o),cg.activeEditor===e&&(cg.activeEditor=Gr.length>0?Gr[0]:null),cg.focusedEditor===e&&(cg.focusedEditor=null),n.length!==Gr.length},_h=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(eb(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},rS=document.compatMode!=="CSS1Compat",cg={...i,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,pageUid:qo(),majorVersion:"8",minorVersion:"1.2",releaseDate:"TBD",i18n:Iu,activeEditor:null,focusedEditor:null,setup(){const e=this;let n="",o="",r=Si.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const c=window.tinymce||window.tinyMCEPreInit;if(c)n=c.base||c.baseURL,o=c.suffix;else{const u=document.getElementsByTagName("script");for(let f=0;f<u.length;f++){const b=u[f].src||"";if(b==="")continue;const v=b.substring(b.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(b)){v.indexOf(".min")!==-1&&(o=".min"),n=b.substring(0,b.lastIndexOf("/"));break}}if(!n&&document.currentScript){const f=document.currentScript.src;f.indexOf(".min")!==-1&&(o=".min"),n=f.substring(0,f.lastIndexOf("/"))}}e.baseURL=new Si(r).toAbsolute(n),e.documentBaseURL=r,e.baseURI=new Si(e.baseURL),e.suffix=o,kL(e),me(["majorVersion","minorVersion","releaseDate","pageUid","_addLicenseKeyManager"],u=>Object.defineProperty(e,u,{writable:!1,configurable:!1,enumerable:!0}))},overrideDefaults(e){const n=e.base_url;n&&this._setBaseUrl(n);const o=e.suffix;o&&(this.suffix=o),this.defaultOptions=e;const r=e.plugin_base_urls;r!==void 0&&xo(r,(c,u)=>{_c.PluginManager.urls[u]=c})},init(e){const n=this;let o;const r=Mt.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),c=(D,B)=>D.inline&&B.tagName.toLowerCase()in r,u=D=>{let B=D.id;return B||(B=Ss(D,"name").filter(N=>!Dc.get(N)).getOrThunk(Dc.uniqueId),D.setAttribute("id",B)),B},f=D=>{const B=e[D];if(B)return B.apply(n,[])},b=D=>Po.browser.isIE()||Po.browser.isEdge()?(Lp("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/8/support/#supportedwebbrowsers"),[]):rS?(Lp("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):ie(D.selector)?Dc.select(D.selector):Fe(D.target)?[D.target]:[];let v=D=>{o=D};const x=()=>{let D=0;const B=[];let N;const H=(te,Q,Y)=>{const Ae=new rr(te,Q,n);B.push(Ae),Ae.on("init",()=>{++D===N.length&&v(B)}),Ae.targetElm=Ae.targetElm||Y,Ae.render()};Dc.unbind(window,"ready",x),f("onpageload"),N=Xs(b(e)),Mt.each(N,te=>{_h(n.get(te.id))}),N=Mt.grep(N,te=>!n.get(te.id)),N.length===0?v([]):Ra(N,te=>{c(e,te)?Lp("Could not initialize inline editor on invalid inline target element",te):H(u(te),e,te)})};return Dc.bind(window,"ready",x),new Promise(D=>{o?D(o):v=B=>{D(B)}})},get(e){return arguments.length===0?Gr.slice(0):ie(e)?rn(Gr,n=>n.id===e).getOr(null):Cs(e)&&Gr[e]?Gr[e]:null},add(e){const n=this,o=n.get(e.id);return o===e||(o===null&&Gr.push(e),Pd(!0),n.activeEditor=e,n.dispatch("AddEditor",{editor:e}),Ei||(Ei=r=>{const c=n.dispatch("BeforeUnload");if(c.returnValue)return r.preventDefault(),r.returnValue=c.returnValue,c.returnValue},window.addEventListener("beforeunload",Ei))),e},createEditor(e,n){return this.add(new rr(e,n,this))},remove(e){const n=this;let o;if(!e){for(let r=Gr.length-1;r>=0;r--)n.remove(Gr[r]);return}if(ie(e)){Ra(Dc.select(e),r=>{o=n.get(r.id),o&&n.remove(o)});return}return o=e,K(n.get(o.id))?null:(eb(o)&&n.dispatch("RemoveEditor",{editor:o}),Gr.length===0&&window.removeEventListener("beforeunload",Ei),o.remove(),Pd(Gr.length>0),o)},execCommand(e,n,o){var r;const c=this,u=en(o)?(r=o.id)!==null&&r!==void 0?r:o.index:o;switch(e){case"mceAddEditor":{if(!c.get(u)){const f=o.options;new rr(u,f,c).render()}return!0}case"mceRemoveEditor":{const f=c.get(u);return f&&f.remove(),!0}case"mceToggleEditor":{const f=c.get(u);return f?(f.isHidden()?f.show():f.hide(),!0):(c.execCommand("mceAddEditor",!1,o),!0)}}return c.activeEditor?c.activeEditor.execCommand(e,n,o):!1},triggerSave:()=>{Ra(Gr,e=>{e.save()})},addI18n:(e,n)=>{Iu.add(e,n)},translate:e=>Iu.translate(e),setActive(e){const n=this.activeEditor;this.activeEditor!==e&&(n&&n.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:n})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new Si(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new Si(this.baseURL)},_addLicenseKeyManager:e=>LT.add(e)};cg.setup();const S_=(()=>{const e=rs(),n=u=>({items:u,types:dn(u),getType:f=>Ss(u,f).getOrUndefined()}),o=u=>{e.set(u)},r=()=>e.get().getOrUndefined(),c=e.clear;return{FakeClipboardItem:n,write:o,read:r,clear:c}})(),cS=Math.min,tb=Math.max,iS=Math.round,G7=(e,n,o)=>{let r=n.x,c=n.y;const u=e.w,f=e.h,b=n.w,v=n.h,x=(o||"").split("");return x[0]==="b"&&(c+=v),x[1]==="r"&&(r+=b),x[0]==="c"&&(c+=iS(v/2)),x[1]==="c"&&(r+=iS(b/2)),x[3]==="b"&&(c-=f),x[4]==="r"&&(r-=u),x[3]==="c"&&(c-=iS(f/2)),x[4]==="c"&&(r-=iS(u/2)),nb(r,c,u,f)},P5=(e,n,o,r)=>{for(let c=0;c<r.length;c++){const u=G7(e,n,r[c]);if(u.x>=o.x&&u.x+u.w<=o.w+o.x&&u.y>=o.y&&u.y+u.h<=o.h+o.y)return r[c]}return null},lS=(e,n,o)=>nb(e.x-n,e.y-o,e.w+n*2,e.h+o*2),ky=(e,n)=>{const o=tb(e.x,n.x),r=tb(e.y,n.y),c=cS(e.x+e.w,n.x+n.w),u=cS(e.y+e.h,n.y+n.h);return c-o<0||u-r<0?null:nb(o,r,c-o,u-r)},Dy=(e,n,o)=>{let r=e.x,c=e.y,u=e.x+e.w,f=e.y+e.h;const b=n.x+n.w,v=n.y+n.h,x=tb(0,n.x-r),D=tb(0,n.y-c),B=tb(0,u-b),N=tb(0,f-v);return r+=x,c+=D,o&&(u+=x,f+=D,r-=B,c-=N),u-=B,f-=N,nb(r,c,u-r,f-c)},nb=(e,n,o,r)=>({x:e,y:n,w:o,h:r}),K7={inflate:lS,relativePosition:G7,findBestRelativePosition:P5,intersect:ky,clamp:Dy,create:nb,fromClientRect:e=>nb(e.left,e.top,e.width,e.height)},$5=(e,n,o=1e3)=>{let r=!1,c=null;const u=x=>(...D)=>{r||(r=!0,c!==null&&(window.clearTimeout(c),c=null),x.apply(null,D))},f=u(e),b=u(n);return{start:(...x)=>{!r&&c===null&&(c=window.setTimeout(()=>b.apply(null,x),o))},resolve:f,reject:b}},x_=(()=>{const e={},n={},o={};return{load:(v,x)=>{const D=`Script at URL "${x}" failed to load`,B=`Script at URL "${x}" did not call \`tinymce.Resource.add('${v}', data)\` within 1 second`;if(e[v]!==void 0)return e[v];{const N=new Promise((H,te)=>{const Q=$5(H,te);n[v]=Q.resolve,va.ScriptLoader.loadScript(x).then(()=>Q.start(B),()=>Q.reject(D))});return e[v]=N,N}},add:(v,x)=>{n[v]!==void 0&&(n[v](x),delete n[v]),e[v]=Promise.resolve(x),o[v]=x},has:v=>v in o,get:v=>o[v],unload:v=>{delete e[v],delete o[v]}}})(),E_=()=>(()=>{let e={},n=[];const o={getItem:r=>{const c=e[r];return c||null},setItem:(r,c)=>{n.push(r),e[r]=String(c)},key:r=>n[r],removeItem:r=>{n=n.filter(c=>c===r),delete e[r]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})();let $d;try{const e="__storage_test__";$d=window.localStorage,$d.setItem(e,e),$d.removeItem(e)}catch{$d=E_()}var Oy=$d;const I5={geom:{Rect:K7},util:{Delay:_d,Tools:Mt,VK:Qt,URI:Si,EventDispatcher:s,Observable:i,I18n:Iu,LocalStorage:Oy,ImageUploader:jV},dom:{EventUtils:$u,TreeWalker:Qs,TextSeeker:pd,DOMUtils:Is,ScriptLoader:va,RangeUtils:sf,Serializer:OT,StyleSheetLoader:Mi,ControlSelection:EM,BookmarkManager:bm,Selection:_T,Event:$u.Event},html:{Styles:Ig,Entities:Og,Node:Ii,Schema:Pu,DomParser:hh,Writer:YL,Serializer:Ap},Env:Po,AddOnManager:_c,Annotator:SE,Formatter:Qv,UndoManager:lw,EditorCommands:q7,WindowManager:FT,NotificationManager:ED,EditorObservable:O,Shortcuts:En,Editor:rr,FocusManager:TE,EditorManager:cg,DOM:Is.DOM,ScriptLoader:va.ScriptLoader,PluginManager:eg,ThemeManager:M0,ModelManager:Od,IconManager:RT,Resource:x_,FakeClipboard:S_,trim:Mt.trim,isArray:Mt.isArray,is:Mt.is,toArray:Mt.toArray,makeMap:Mt.makeMap,each:Mt.each,map:Mt.map,grep:Mt.grep,inArray:Mt.inArray,extend:Mt.extend,walk:Mt.walk,resolve:Mt.resolve,explode:Mt.explode,_addCacheSuffix:Mt._addCacheSuffix},T_=Mt.extend(cg,I5),RY=e=>{try{w.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(T_),RY(T_)})()})(LY)),LY.exports}var Goe=qoe();const Koe=joe(Goe);var JJ={},QJ={},eQ;function Yoe(){return eQ||(eQ=1,(function(){const w=Object.getPrototypeOf,M=(t,s,a)=>{var i;return a(t,s.prototype)?!0:((i=t.constructor)===null||i===void 0?void 0:i.name)===s.name},L=t=>{const s=typeof t;return t===null?"null":s==="object"&&Array.isArray(t)?"array":s==="object"&&M(t,String,(a,i)=>i.isPrototypeOf(a))?"string":s},X=t=>s=>L(s)===t,se=t=>s=>typeof s===t,le=t=>s=>t===s,Se=(t,s)=>$e(t)&&M(t,s,(a,i)=>w(a)===i),pe=X("string"),$e=X("object"),Ue=t=>Se(t,Object),sn=X("array"),hn=le(null),Rt=se("boolean"),tn=le(void 0),fo=t=>t==null,Wn=t=>!fo(t),ze=se("function"),Gn=se("number"),Bt=(t,s)=>{if(sn(t)){for(let a=0,i=t.length;a<i;++a)if(!s(t[a]))return!1;return!0}return!1},ie=()=>{},en=t=>()=>t(),Ro=(t,s)=>(...a)=>t(s.apply(null,a)),Qe=(t,s)=>a=>t(s(a)),K=t=>()=>t,It=t=>t,Kn=(t,s)=>t===s;function vn(t,...s){return(...a)=>{const i=s.concat(a);return t.apply(null,i)}}const Fe=t=>s=>!t(s),he=t=>()=>{throw new Error(t)},Cs=t=>t(),ut=K(!1),Ct=K(!0);class k{constructor(s,a){this.tag=s,this.value=a}static some(s){return new k(!0,s)}static none(){return k.singletonNone}fold(s,a){return this.tag?a(this.value):s()}isSome(){return this.tag}isNone(){return!this.tag}map(s){return this.tag?k.some(s(this.value)):k.none()}bind(s){return this.tag?s(this.value):k.none()}exists(s){return this.tag&&s(this.value)}forall(s){return!this.tag||s(this.value)}filter(s){return!this.tag||s(this.value)?this:k.none()}getOr(s){return this.tag?this.value:s}or(s){return this.tag?this:s}getOrThunk(s){return this.tag?this.value:s()}orThunk(s){return this.tag?this:s()}getOrDie(s){if(this.tag)return this.value;throw new Error(s??"Called getOrDie on None")}static from(s){return Wn(s)?k.some(s):k.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(s){this.tag&&s(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}k.singletonNone=new k(!1);const Eo=Array.prototype.slice,bt=Array.prototype.indexOf,Uo=Array.prototype.push,pn=(t,s)=>bt.call(t,s),Te=(t,s)=>{const a=pn(t,s);return a===-1?k.none():k.some(a)},St=(t,s)=>pn(t,s)>-1,$n=(t,s)=>{for(let a=0,i=t.length;a<i;a++){const d=t[a];if(s(d,a))return!0}return!1},Xe=(t,s)=>{const a=[];for(let i=0;i<t;i++)a.push(s(i));return a},qt=(t,s)=>{const a=[];for(let i=0;i<t.length;i+=s){const d=Eo.call(t,i,i+s);a.push(d)}return a},Ne=(t,s)=>{const a=t.length,i=new Array(a);for(let d=0;d<a;d++){const g=t[d];i[d]=s(g,d)}return i},ft=(t,s)=>{for(let a=0,i=t.length;a<i;a++){const d=t[a];s(d,a)}},P=(t,s)=>{for(let a=t.length-1;a>=0;a--){const i=t[a];s(i,a)}},Xo=(t,s)=>{const a=[],i=[];for(let d=0,g=t.length;d<g;d++){const h=t[d];(s(h,d)?a:i).push(h)}return{pass:a,fail:i}},ro=(t,s)=>{const a=[];for(let i=0,d=t.length;i<d;i++){const g=t[i];s(g,i)&&a.push(g)}return a},Qn=(t,s,a)=>(P(t,(i,d)=>{a=s(a,i,d)}),a),_o=(t,s,a)=>(ft(t,(i,d)=>{a=s(a,i,d)}),a),ws=(t,s,a)=>{for(let i=0,d=t.length;i<d;i++){const g=t[i];if(s(g,i))return k.some(g);if(a(g,i))break}return k.none()},be=(t,s)=>ws(t,s,ut),ke=(t,s)=>{for(let a=0,i=t.length;a<i;a++){const d=t[a];if(s(d,a))return k.some(a)}return k.none()},Oe=t=>{const s=[];for(let a=0,i=t.length;a<i;++a){if(!sn(t[a]))throw new Error("Arr.flatten item "+a+" was not an array, input: "+t);Uo.apply(s,t[a])}return s},me=(t,s)=>Oe(Ne(t,s)),Re=(t,s)=>{for(let a=0,i=t.length;a<i;++a){const d=t[a];if(s(d,a)!==!0)return!1}return!0},at=t=>{const s=Eo.call(t,0);return s.reverse(),s},tt=(t,s)=>ro(t,a=>!St(s,a)),In=(t,s)=>{const a={};for(let i=0,d=t.length;i<d;i++){const g=t[i];a[String(g)]=s(g,i)}return a},qe=t=>[t],st=(t,s)=>{const a=Eo.call(t,0);return a.sort(s),a},Fn=(t,s)=>s>=0&&s<t.length?k.some(t[s]):k.none(),rn=t=>Fn(t,0),To=t=>Fn(t,t.length-1),es=ze(Array.from)?Array.from:t=>Eo.call(t),Wo=(t,s)=>{for(let a=0;a<t.length;a++){const i=s(t[a],a);if(i.isSome())return i}return k.none()},eo=Object.keys,zs=Object.hasOwnProperty,wo=(t,s)=>{const a=eo(t);for(let i=0,d=a.length;i<d;i++){const g=a[i],h=t[g];s(h,g)}},mt=(t,s)=>Nt(t,(a,i)=>({k:i,v:s(a,i)})),Nt=(t,s)=>{const a={};return wo(t,(i,d)=>{const g=s(i,d);a[g.k]=g.v}),a},wn=t=>(s,a)=>{t[a]=s},fn=(t,s,a,i)=>{wo(t,(d,g)=>{(s(d,g)?a:i)(d,g)})},uo=(t,s)=>{const a={},i={};return fn(t,s,wn(a),wn(i)),{t:a,f:i}},ts=(t,s)=>{const a={};return fn(t,s,wn(a),ie),a},So=(t,s)=>{const a=[];return wo(t,(i,d)=>{a.push(s(i,d))}),a},ks=(t,s)=>{const a=eo(t);for(let i=0,d=a.length;i<d;i++){const g=a[i],h=t[g];if(s(h,g,t))return k.some(h)}return k.none()},Xs=t=>So(t,It),dn=(t,s)=>ko(t,s)?k.from(t[s]):k.none(),ko=(t,s)=>zs.call(t,s),xo=(t,s)=>ko(t,s)&&t[s]!==void 0&&t[s]!==null,da={generate:t=>{if(!sn(t))throw new Error("cases must be an array");if(t.length===0)throw new Error("there must be at least one case");const s=[],a={};return ft(t,(i,d)=>{const g=eo(i);if(g.length!==1)throw new Error("one and only one name per case");const h=g[0],C=i[h];if(a[h]!==void 0)throw new Error("duplicate key detected:"+h);if(h==="cata")throw new Error("cannot have a case named cata (sorry)");if(!sn(C))throw new Error("case arguments must be an array");s.push(h),a[h]=(...S)=>{const T=S.length;if(T!==C.length)throw new Error("Wrong number of arguments to case "+h+". Expected "+C.length+" ("+C+"), got "+T);return{fold:(...F)=>{if(F.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+F.length);return F[d].apply(null,S)},match:F=>{const z=eo(F);if(s.length!==z.length)throw new Error("Wrong number of arguments to match. Expected: "+s.join(",")+`
Actual: `+z.join(","));if(!Re(s,Z=>St(z,Z)))throw new Error("Not all branches were specified when using match. Specified: "+z.join(", ")+`
Required: `+s.join(", "));return F[h].apply(null,S)},log:F=>{console.log(F,{constructors:s,constructor:h,params:S})}}}}),a}},cn=t=>{let s=t;return{get:()=>s,set:d=>{s=d}}},Bc=t=>{let s=k.none(),a=[];const i=T=>Bc(O=>{d(F=>{O(T(F))})}),d=T=>{h()?S(T):a.push(T)},g=T=>{h()||(s=k.some(T),C(a),a=[])},h=()=>s.isSome(),C=T=>{ft(T,S)},S=T=>{s.each(O=>{setTimeout(()=>{T(O)},0)})};return t(g),{get:d,map:i,isReady:h}},Fc={nu:Bc,pure:t=>Bc(s=>{s(t)})},Ma=t=>{setTimeout(()=>{throw t},0)},zr=t=>{const s=S=>{t().then(S,Ma)};return{map:S=>zr(()=>t().then(S)),bind:S=>zr(()=>t().then(T=>S(T).toPromise())),anonBind:S=>zr(()=>t().then(()=>S.toPromise())),toLazy:()=>Fc.nu(s),toCached:()=>{let S=null;return zr(()=>(S===null&&(S=t()),S))},toPromise:t,get:s}},os={nu:t=>zr(()=>new Promise(t)),pure:t=>zr(()=>Promise.resolve(t))},Wa=t=>{const s=g=>g(t),a=K(t),i=()=>d,d={tag:!0,inner:t,fold:(g,h)=>h(t),isValue:Ct,isError:ut,map:g=>gn.value(g(t)),mapError:i,bind:s,exists:s,forall:s,getOr:a,or:i,getOrThunk:a,orThunk:i,getOrDie:a,each:g=>{g(t)},toOptional:()=>k.some(t)};return d},Nc=t=>{const s=()=>a,a={tag:!1,inner:t,fold:(i,d)=>i(t),isValue:ut,isError:Ct,map:s,mapError:i=>gn.error(i(t)),bind:s,exists:ut,forall:Ct,getOr:It,or:It,getOrThunk:Cs,orThunk:Cs,getOrDie:he(String(t)),each:ie,toOptional:k.none};return a},gn={value:Wa,error:Nc,fromOption:(t,s)=>t.fold(()=>Nc(s),Wa)},Fr=t=>({...t,toCached:()=>Fr(t.toCached()),bindFuture:S=>Fr(t.bind(T=>T.fold(O=>os.pure(gn.error(O)),O=>S(O)))),bindResult:S=>Fr(t.map(T=>T.bind(S))),mapResult:S=>Fr(t.map(T=>T.map(S))),mapError:S=>Fr(t.map(T=>T.mapError(S))),foldResult:(S,T)=>t.map(O=>O.fold(S,T)),withTimeout:(S,T)=>Fr(os.nu(O=>{let F=!1;const z=setTimeout(()=>{F=!0,O(gn.error(T()))},S);t.get(q=>{F||(clearTimeout(z),O(q))})}))}),yr=t=>Fr(os.nu(t)),Ti=t=>Fr(os.pure(gn.value(t))),Rn={nu:yr,wrap:Fr,pure:Ti,value:Ti,error:t=>Fr(os.pure(gn.error(t))),fromResult:t=>Fr(os.pure(t)),fromFuture:t=>Fr(t.map(gn.value)),fromPromise:t=>yr(s=>{t.then(a=>{s(gn.value(a))},a=>{s(gn.error(a))})})},Zn=typeof window<"u"?window:Function("return this;")(),Ao=(t,s,a,i)=>{const d=t+s;return d>i?a:d<a?i:d},jo=(t,s,a)=>Math.min(Math.max(t,s),a),qo=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let Mo=0;const G=t=>{const a=new Date().getTime(),i=Math.floor(qo()*1e9);return Mo++,t+"_"+i+Mo+String(a)},we=(t,s)=>s,gt=(t,s)=>Ue(t)&&Ue(s)?At(t,s):s,Yt=t=>(...s)=>{if(s.length===0)throw new Error("Can't merge zero objects");const a={};for(let i=0;i<s.length;i++){const d=s[i];for(const g in d)ko(d,g)&&(a[g]=t(a[g],d[g]))}return a},At=Yt(gt),Mn=Yt(we),Tn=(t,s,a=Kn)=>t.exists(i=>a(i,s)),nn=(t,s,a=Kn)=>Qo(t,s,a).getOr(t.isNone()&&s.isNone()),bo=t=>{const s=[],a=i=>{s.push(i)};for(let i=0;i<t.length;i++)t[i].each(a);return s},Lo=t=>{const s=[];for(let a=0;a<t.length;a++){const i=t[a];if(i.isSome())s.push(i.getOrDie());else return k.none()}return k.some(s)},Qo=(t,s,a)=>t.isSome()&&s.isSome()?k.some(a(t.getOrDie(),s.getOrDie())):k.none(),bs=(t,s,a,i)=>t.isSome()&&s.isSome()&&a.isSome()?k.some(i(t.getOrDie(),s.getOrDie(),a.getOrDie())):k.none(),Sa=(t,s)=>t!=null?k.some(s(t)):k.none(),Er=(t,s)=>t?k.some(s):k.none(),Ml=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),Gs=(t,s)=>{let a=s??Zn;for(let i=0;i<t.length&&a!==void 0&&a!==null;++i)a=a[t[i]];return a},rs=(t,s)=>{const a=t.split(".");return Gs(a,s)};da.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Os=t=>{const s=[],a=[];return ft(t,i=>{i.fold(d=>{s.push(d)},d=>{a.push(d)})}),{errors:s,values:a}},ma=t=>{const s=cn(k.none()),a=()=>s.get().each(t);return{clear:()=>{a(),s.set(k.none())},isSet:()=>s.get().isSome(),get:()=>s.get(),set:C=>{a(),s.set(k.some(C))}}},Vi=()=>ma(t=>t.destroy()),er=()=>ma(t=>t.unbind()),jn=()=>{const t=ma(ie);return{...t,on:a=>t.get().each(a)}},fa=(t,s)=>t+s,xa=(t,s)=>t.substring(s),cr=(t,s,a)=>s===""||t.length>=s.length&&t.substr(a,a+s.length)===s,Ju=(t,s)=>Ai(t,s)?xa(t,s.length):t,bu=(t,s)=>ri(t,s)?t:fa(t,s),Js=(t,s,a=0,i)=>{const d=t.indexOf(s,a);return d!==-1?tn(i)?!0:d+s.length<=i:!1},Ai=(t,s)=>cr(t,s,0),ri=(t,s)=>cr(t,s,t.length-s.length),Gt=(t=>s=>s.replace(t,""))(/^\s+|\s+$/g),Pc=t=>t.length>0,Ba=t=>!Pc(t),ja=t=>{const s=parseFloat(t);return isNaN(s)?k.none():k.some(s)},ir=(t,s)=>{let a=null,i=null;return{cancel:()=>{hn(a)||(clearTimeout(a),a=null,i=null)},throttle:(...h)=>{i=h,hn(a)&&(a=setTimeout(()=>{const C=i;a=null,i=null,t.apply(null,C)},s))}}},vu=(t,s)=>{let a=null;return{cancel:()=>{hn(a)||(clearTimeout(a),a=null)},throttle:(...g)=>{hn(a)&&(a=setTimeout(()=>{a=null,t.apply(null,g)},s))}}},qa=(t,s)=>{let a=null;const i=()=>{hn(a)||(clearTimeout(a),a=null)};return{cancel:i,throttle:(...g)=>{i(),a=setTimeout(()=>{a=null,t.apply(null,g)},s)}}},yc=t=>{let s=!1,a;return(...i)=>(s||(s=!0,a=t.apply(null,i)),a)},Bl="\uFEFF",ed="",Ui=(t,s)=>{const i=(s||document).createElement("div");if(i.innerHTML=t,!i.hasChildNodes()||i.childNodes.length>1){const d="HTML does not have a single root node";throw console.error(d,t),new Error(d)}return Wi(i.childNodes[0])},yu=(t,s)=>{const i=(s||document).createElement(t);return Wi(i)},Fl=(t,s)=>{const i=(s||document).createTextNode(t);return Wi(i)},Wi=t=>{if(t==null)throw new Error("Node cannot be null or undefined");return{dom:t}},zt={fromHtml:Ui,fromTag:yu,fromText:Fl,fromDom:Wi,fromPoint:(t,s,a)=>k.from(t.dom.elementFromPoint(s,a)).map(Wi)},dl=(t,s)=>{s.fold(a=>{t.setStartBefore(a.dom)},(a,i)=>{t.setStart(a.dom,i)},a=>{t.setStartAfter(a.dom)})},td=(t,s)=>{s.fold(a=>{t.setEndBefore(a.dom)},(a,i)=>{t.setEnd(a.dom,i)},a=>{t.setEndAfter(a.dom)})},U=(t,s,a)=>{const i=t.document.createRange();return dl(i,s),td(i,a),i},ue=(t,s,a,i,d)=>{const g=t.document.createRange();return g.setStart(s.dom,a),g.setEnd(i.dom,d),g},Me=t=>({left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}),ct=t=>{const s=t.getClientRects(),a=s.length>0?s[0]:t.getBoundingClientRect();return a.width>0||a.height>0?k.some(a).map(Me):k.none()},Lt=t=>{const s=t.getBoundingClientRect();return s.width>0||s.height>0?k.some(s).map(Me):k.none()},mn=da.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Bo=(t,s,a)=>s(zt.fromDom(a.startContainer),a.startOffset,zt.fromDom(a.endContainer),a.endOffset),yo=(t,s)=>s.match({domRange:a=>({ltr:K(a),rtl:k.none}),relative:(a,i)=>({ltr:yc(()=>U(t,a,i)),rtl:yc(()=>k.some(U(t,i,a)))}),exact:(a,i,d,g)=>({ltr:yc(()=>ue(t,a,i,d,g)),rtl:yc(()=>k.some(ue(t,d,g,a,i)))})}),us=(t,s)=>{const a=s.ltr();return a.collapsed?s.rtl().filter(d=>d.collapsed===!1).map(d=>mn.rtl(zt.fromDom(d.endContainer),d.endOffset,zt.fromDom(d.startContainer),d.startOffset)).getOrThunk(()=>Bo(t,mn.ltr,a)):Bo(t,mn.ltr,a)},$=(t,s)=>{const a=yo(t,s);return us(t,a)},j=(t,s)=>$(t,s).match({ltr:(i,d,g,h)=>{const C=t.document.createRange();return C.setStart(i.dom,d),C.setEnd(g.dom,h),C},rtl:(i,d,g,h)=>{const C=t.document.createRange();return C.setStart(g.dom,h),C.setEnd(i.dom,d),C}});mn.ltr,mn.rtl;const fe=9,Ge=11,ln=1,Go=3,Rs=(t,s)=>{const a=t.dom;if(a.nodeType!==ln)return!1;{const i=a;if(i.matches!==void 0)return i.matches(s);if(i.msMatchesSelector!==void 0)return i.msMatchesSelector(s);if(i.webkitMatchesSelector!==void 0)return i.webkitMatchesSelector(s);if(i.mozMatchesSelector!==void 0)return i.mozMatchesSelector(s);throw new Error("Browser lacks native selectors")}},Or=t=>t.nodeType!==ln&&t.nodeType!==fe&&t.nodeType!==Ge||t.childElementCount===0,Fa=(t,s)=>{const a=s===void 0?document:s.dom;return Or(a)?[]:Ne(a.querySelectorAll(t),zt.fromDom)},Cc=(t,s)=>{const a=s===void 0?document:s.dom;return Or(a)?k.none():k.from(a.querySelector(t)).map(zt.fromDom)},Ko=(t,s)=>t.dom===s.dom,ml=(t,s)=>{const a=t.dom,i=s.dom;return a===i?!1:a.contains(i)},Rm=(t,s,a,i)=>{const d=t.isiOS()&&/ipad/i.test(a)===!0,g=t.isiOS()&&!d,h=t.isiOS()||t.isAndroid(),C=h||i("(pointer:coarse)"),S=d||!g&&h&&i("(min-device-width:768px)"),T=g||h&&!S,O=s.isSafari()&&t.isiOS()&&/safari/i.test(a)===!1,F=!T&&!S&&!O;return{isiPad:K(d),isiPhone:K(g),isTablet:K(S),isPhone:K(T),isTouch:K(C),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:K(O),isDesktop:K(F)}},Zi=(t,s)=>{for(let a=0;a<t.length;a++){const i=t[a];if(i.test(s))return i}},mg=(t,s)=>{const a=Zi(t,s);if(!a)return{major:0,minor:0};const i=d=>Number(s.replace(a,"$"+d));return nd(i(1),i(2))},Mm=(t,s)=>{const a=String(s).toLowerCase();return t.length===0?wc():mg(t,a)},wc=()=>nd(0,0),nd=(t,s)=>({major:t,minor:s}),od={nu:nd,detect:Mm,unknown:wc},Mh=(t,s)=>Wo(s.brands,a=>{const i=a.brand.toLowerCase();return be(t,d=>{var g;return i===((g=d.brand)===null||g===void 0?void 0:g.toLowerCase())}).map(d=>({current:d.name,version:od.nu(parseInt(a.version,10),0)}))}),fg=(t,s)=>{const a=String(s).toLowerCase();return be(t,i=>i.search(a))},gg=(t,s)=>fg(t,s).map(a=>{const i=od.detect(a.versionRegexes,s);return{current:a.name,version:i}}),Bh=(t,s)=>fg(t,s).map(a=>{const i=od.detect(a.versionRegexes,s);return{current:a.name,version:i}}),pf=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ji=t=>s=>Js(s,t),Fh=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>Js(t,"edge/")&&Js(t,"chrome")&&Js(t,"safari")&&Js(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,pf],search:t=>Js(t,"chrome")&&!Js(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>Js(t,"msie")||Js(t,"trident")},{name:"Opera",versionRegexes:[pf,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ji("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ji("firefox")},{name:"Safari",versionRegexes:[pf,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(Js(t,"safari")||Js(t,"mobile/"))&&Js(t,"applewebkit")}],Nh=[{name:"Windows",search:ji("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>Js(t,"iphone")||Js(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ji("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:ji("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ji("linux"),versionRegexes:[]},{name:"Solaris",search:ji("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ji("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:ji("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],J={browsers:K(Fh),oses:K(Nh)},de="Edge",He="Chromium",pt="IE",Ln="Opera",Do="Firefox",Rr="Safari",Sc=()=>ga({current:void 0,version:od.unknown()}),ga=t=>{const s=t.current,a=t.version,i=d=>()=>s===d;return{current:s,version:a,isEdge:i(de),isChromium:i(He),isIE:i(pt),isOpera:i(Ln),isFirefox:i(Do),isSafari:i(Rr)}},xc={unknown:Sc,nu:ga},Cu="Windows",Ec="iOS",wu="Android",Tc="Linux",$c="macOS",Pl="Solaris",Ic="FreeBSD",Po="ChromeOS",bf=()=>Ph({current:void 0,version:od.unknown()}),Ph=t=>{const s=t.current,a=t.version,i=d=>()=>s===d;return{current:s,version:a,isWindows:i(Cu),isiOS:i(Ec),isAndroid:i(wu),isMacOS:i($c),isLinux:i(Tc),isSolaris:i(Pl),isFreeBSD:i(Ic),isChromeOS:i(Po)}},Ir={unknown:bf,nu:Ph},t1={detect:(t,s,a)=>{const i=J.browsers(),d=J.oses(),g=s.bind(S=>Mh(i,S)).orThunk(()=>gg(i,t)).fold(xc.unknown,xc.nu),h=Bh(d,t).fold(Ir.unknown,Ir.nu),C=Rm(h,g,t,a);return{browser:g,os:h,deviceType:C}}},CS=t=>window.matchMedia(t).matches;let ab=yc(()=>t1.detect(window.navigator.userAgent,k.from(window.navigator.userAgentData),CS));const Nr=()=>ab(),Bm=(t,s)=>rs(t,s),Iy=(t,s)=>{const a=Bm(t,s);if(a==null)throw new Error(t+" not available on this browser");return a},Mt=Object.getPrototypeOf,_i=t=>Iy("HTMLElement",t),hg=t=>{const s=rs("ownerDocument.defaultView",t);return $e(t)&&(_i(s).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(Mt(t).constructor.name))},fl=t=>t.dom.nodeName.toLowerCase(),vf=t=>t.dom.nodeType,n1=t=>s=>vf(s)===t,re=t=>ai(t)&&hg(t.dom),ai=n1(ln),Hd=n1(Go),o1=n1(fe),yf=n1(Ge),cc=t=>s=>ai(s)&&fl(s)===t,ci=t=>zt.fromDom(t.dom.ownerDocument),s1=t=>o1(t)?t:ci(t),r1=t=>zt.fromDom(s1(t).dom.documentElement),pg=t=>zt.fromDom(s1(t).dom.defaultView),ii=t=>k.from(t.dom.parentNode).map(zt.fromDom),a1=t=>ii(t),Su=t=>k.from(t.dom.parentElement).map(zt.fromDom),bg=(t,s)=>{const a=ze(s)?s:ut;let i=t.dom;const d=[];for(;i.parentNode!==null&&i.parentNode!==void 0;){const g=i.parentNode,h=zt.fromDom(g);if(d.push(h),a(h)===!0)break;i=g}return d},c1=t=>k.from(t.dom.offsetParent).map(zt.fromDom),ki=t=>k.from(t.dom.previousSibling).map(zt.fromDom),i1=t=>k.from(t.dom.nextSibling).map(zt.fromDom),$l=t=>Ne(t.dom.childNodes,zt.fromDom),zd=(t,s)=>{const a=t.dom.childNodes;return k.from(a[s]).map(zt.fromDom)},Yo=t=>zd(t,0),Lc=(t,s)=>({element:t,offset:s}),Cf=(t,s)=>{const a=$l(t);return a.length>0&&s<a.length?Lc(a[s],0):Lc(t,s)},cb=(t,s,a,i)=>{const g=ci(t).dom.createRange();return g.setStart(t.dom,s),g.setEnd(a.dom,i),g},Oo=(t,s,a,i)=>{const d=cb(t,s,a,i),g=Ko(t,a)&&s===i;return d.collapsed&&!g},sd=t=>yf(t)&&Wn(t.dom.host),Xr=t=>zt.fromDom(t.dom.getRootNode()),Il=t=>sd(t)?t:zt.fromDom(s1(t).dom.body),Ll=t=>Tr(t).isSome(),Tr=t=>{const s=Xr(t);return sd(s)?k.some(s):k.none()},xs=t=>zt.fromDom(t.dom.host),Ly=t=>{if(Wn(t.target)){const s=zt.fromDom(t.target);if(ai(s)&&Hy(s)&&t.composed&&t.composedPath){const a=t.composedPath();if(a)return rn(a)}}return k.from(t.target)},Hy=t=>Wn(t.dom.shadowRoot),Jr=(t,s,a,i,d,g,h)=>({target:t,x:s,y:a,stop:i,prevent:d,kill:g,raw:h}),gl=t=>{const s=zt.fromDom(Ly(t).getOr(t.target)),a=()=>t.stopPropagation(),i=()=>t.preventDefault(),d=Ro(i,a);return Jr(s,t.clientX,t.clientY,a,i,d,t)},hl=(t,s)=>a=>{t(a)&&s(gl(a))},oa=(t,s,a,i,d)=>{const g=hl(a,i);return t.dom.addEventListener(s,g,d),{unbind:vn(Di,t,s,g,d)}},Hl=(t,s,a,i)=>oa(t,s,a,i,!1),Hc=(t,s,a,i)=>oa(t,s,a,i,!0),Di=(t,s,a,i)=>{t.dom.removeEventListener(s,a,i)},ic=Ct,_s=(t,s,a)=>Hl(t,s,ic,a),qi=(t,s,a)=>Hc(t,s,ic,a),zc=gl,Na=()=>zt.fromDom(document),Ea=(t,s=!1)=>t.dom.focus({preventScroll:s}),wr=t=>t.dom.blur(),pl=t=>{const s=Xr(t).dom;return t.dom===s.activeElement},Ta=(t=Na())=>k.from(t.dom.activeElement).map(zt.fromDom),Vr=t=>Ta(Xr(t)).filter(s=>t.dom.contains(s.dom)),Vd=(t,s)=>{ii(t).each(i=>{i.dom.insertBefore(s.dom,t.dom)})},ib=(t,s)=>{i1(t).fold(()=>{ii(t).each(d=>{Aa(d,s)})},i=>{Vd(i,s)})},$h=(t,s)=>{Yo(t).fold(()=>{Aa(t,s)},i=>{t.dom.insertBefore(s.dom,i.dom)})},Aa=(t,s)=>{t.dom.appendChild(s.dom)},l1=(t,s,a)=>{zd(t,a).fold(()=>{Aa(t,s)},i=>{Vd(i,s)})},lb=(t,s)=>{ft(s,a=>{Aa(t,a)})},Fm=(t,s,a)=>{if(pe(a)||Rt(a)||Gn(a))t.setAttribute(s,a+"");else throw console.error("Invalid call to Attribute.set. Key ",s,":: Value ",a,":: Element ",t),new Error("Attribute value was not simple")},Hn=(t,s,a)=>{Fm(t.dom,s,a)},u1=(t,s)=>{const a=t.dom;wo(s,(i,d)=>{Fm(a,d,i)})},ha=(t,s)=>{const a=t.dom.getAttribute(s);return a===null?void 0:a},Pa=(t,s)=>k.from(ha(t,s)),$a=(t,s)=>{const a=t.dom;return a&&a.hasAttribute?a.hasAttribute(s):!1},tr=(t,s)=>{t.dom.removeAttribute(s)},Ud=t=>_o(t.dom.attributes,(s,a)=>(s[a.name]=a.value,s),{}),Ih=t=>{t.dom.textContent="",ft($l(t),s=>{Gi(s)})},Gi=t=>{const s=t.dom;s.parentNode!==null&&s.parentNode.removeChild(s)},zl=(t,s)=>zt.fromDom(t.dom.cloneNode(s)),d1=t=>zl(t,!1),m1=t=>zl(t,!0),vg=(t,s)=>{const i=(s||document).createElement("div");return i.innerHTML=t,$l(zt.fromDom(i))},xu=t=>t.dom.innerHTML,bl=(t,s)=>{const i=ci(t).dom,d=zt.fromDom(i.createDocumentFragment()),g=vg(s,i);lb(d,g),Ih(t),Aa(t,d)},f1=t=>{const s=zt.fromTag("div"),a=zt.fromDom(t.dom.cloneNode(!0));return Aa(s,a),xu(s)},Ga=t=>{if(sd(t))return"#shadow-root";{const s=d1(t);return f1(s)}},Ki=t=>new Promise((s,a)=>{const i=()=>{g(),s(t)},d=[_s(t,"load",i),_s(t,"error",()=>{g(),a("Unable to load data from image: "+t.dom.src)})],g=()=>ft(d,h=>h.unbind());t.dom.complete&&i()}),Eu=t=>t.style!==void 0&&ze(t.style.getPropertyValue),ds=t=>{const s=Hd(t)?t.dom.parentNode:t.dom;if(s==null||s.ownerDocument===null)return!1;const a=s.ownerDocument;return Tr(zt.fromDom(s)).fold(()=>a.body.contains(s),Qe(ds,xs))},Oi=()=>ub(zt.fromDom(document)),ub=t=>{const s=t.dom.body;if(s==null)throw new Error("Body is not available yet");return zt.fromDom(s)},yg=(t,s,a)=>{if(!pe(a))throw console.error("Invalid call to CSS.set. Property ",s,":: Value ",a,":: Element ",t),new Error("CSS value must be a string: "+a);Eu(t)&&t.style.setProperty(s,a)},Yi=(t,s)=>{Eu(t)&&t.style.removeProperty(s)},Yn=(t,s,a)=>{const i=t.dom;yg(i,s,a)},Cr=(t,s)=>{const a=t.dom;wo(s,(i,d)=>{yg(a,d,i)})},Ka=(t,s)=>{const a=t.dom;wo(s,(i,d)=>{i.fold(()=>{Yi(a,d)},g=>{yg(a,d,g)})})},nr=(t,s)=>{const a=t.dom,d=window.getComputedStyle(a).getPropertyValue(s);return d===""&&!ds(t)?Xi(a,s):d},Xi=(t,s)=>Eu(t)?t.style.getPropertyValue(s):"",lr=(t,s)=>{const a=t.dom,i=Xi(a,s);return k.from(i).filter(d=>d.length>0)},Qr=t=>{const s={},a=t.dom;if(Eu(a))for(let i=0;i<a.style.length;i++){const d=a.style.item(i);s[d]=a.style[d]}return s},wf=(t,s,a)=>{const i=zt.fromTag(t);return Yn(i,s,a),lr(i,s).isSome()},Ho=(t,s)=>{const a=t.dom;Yi(a,s),Tn(Pa(t,"style").map(Gt),"")&&tr(t,"style")},vl=t=>t.dom.offsetWidth,Ws=(t,s)=>{const a=(C,S)=>{if(!Gn(S)&&!S.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+S);const T=C.dom;Eu(T)&&(T.style[t]=S+"px")},i=C=>{const S=s(C);if(S<=0||S===null){const T=nr(C,t);return parseFloat(T)||0}return S},d=i,g=(C,S)=>_o(S,(T,O)=>{const F=nr(C,O),z=F===void 0?0:parseInt(F,10);return isNaN(z)?T:T+z},0);return{set:a,get:i,getOuter:d,aggregate:g,max:(C,S,T)=>{const O=g(C,T);return S>O?S-O:0}}},li=Ws("height",t=>{const s=t.dom;return ds(t)?s.getBoundingClientRect().height:s.offsetHeight}),ea=t=>li.get(t),ta=t=>li.getOuter(t),Tu=(t,s)=>{const a=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],i=li.max(t,s,a);Yn(t,"max-height",i+"px")},Sf=t=>t.offsetWidth<=0&&t.offsetHeight<=0,rd=t=>!Sf(t.dom),Wd=Ws("width",t=>{const s=t.dom;return ds(t)?s.getBoundingClientRect().width:s.offsetWidth}),Zd=(t,s)=>Wd.set(t,s),Ya=t=>Wd.get(t),ad=t=>Wd.getOuter(t),zy=(t,s)=>{const a=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],i=Wd.max(t,s,a);Yn(t,"max-width",i+"px")},jd=(t,s)=>({left:t,top:s,translate:(i,d)=>jd(t+i,s+d)}),Ms=jd,g1=t=>{const s=t.getBoundingClientRect();return Ms(s.left,s.top)},xf=(t,s)=>t!==void 0?t:s!==void 0?s:0,lc=t=>{const s=t.dom.ownerDocument,a=s.body,i=s.defaultView,d=s.documentElement;if(a===t.dom)return Ms(a.offsetLeft,a.offsetTop);const g=xf(i==null?void 0:i.pageYOffset,d.scrollTop),h=xf(i==null?void 0:i.pageXOffset,d.scrollLeft),C=xf(d.clientTop,a.clientTop),S=xf(d.clientLeft,a.clientLeft);return ui(t).translate(h-S,g-C)},ui=t=>{const s=t.dom,i=s.ownerDocument.body;return i===s?Ms(i.offsetLeft,i.offsetTop):ds(t)?g1(s):Ms(0,0)},Pr=t=>{const s=t!==void 0?t.dom:document,a=s.body.scrollLeft||s.documentElement.scrollLeft,i=s.body.scrollTop||s.documentElement.scrollTop;return Ms(a,i)},cd=(t,s,a)=>{const d=(a!==void 0?a.dom:document).defaultView;d&&d.scrollTo(t,s)},Ef=((t,s)=>{const a=g=>{if(!t(g))throw new Error("Can only get "+s+" value of a "+s+" node");return i(g).getOr("")},i=g=>t(g)?k.from(g.dom.nodeValue):k.none();return{get:a,getOption:i,set:(g,h)=>{if(!t(g))throw new Error("Can only set raw "+s+" value of a "+s+" node");g.dom.nodeValue=h}}})(Hd,"text"),Lh=t=>Ef.get(t),h1=(t,s)=>a=>wS(a)==="rtl"?s:t,wS=t=>nr(t,"direction")==="rtl"?"rtl":"ltr",Vl=(t,s)=>{const a=ha(t,s);return a===void 0||a===""?[]:a.split(" ")},Vy=(t,s,a)=>{const d=Vl(t,s).concat([a]);return Hn(t,s,d.join(" ")),!0},p1=(t,s,a)=>{const i=ro(Vl(t,s),d=>d!==a);return i.length>0?Hn(t,s,i.join(" ")):tr(t,s),!1};var Ul=(t,s,a,i,d)=>t(a,i)?k.some(a):ze(d)&&d(a)?k.none():s(a,i,d);const db=(t,s,a)=>{let i=t.dom;const d=ze(a)?a:ut;for(;i.parentNode;){i=i.parentNode;const g=zt.fromDom(i);if(s(g))return k.some(g);if(d(g))break}return k.none()},Tf=(t,s,a)=>Ul((d,g)=>g(d),db,t,s,a),Cg=(t,s)=>{const a=t.dom;return a.parentNode?wg(zt.fromDom(a.parentNode),i=>!Ko(t,i)&&s(i)):k.none()},wg=(t,s)=>{const a=d=>s(zt.fromDom(d));return be(t.dom.childNodes,a).map(zt.fromDom)},b1=(t,s)=>{const a=i=>{for(let d=0;d<i.childNodes.length;d++){const g=zt.fromDom(i.childNodes[d]);if(s(g))return k.some(g);const h=a(i.childNodes[d]);if(h.isSome())return h}return k.none()};return a(t.dom)},mb=t=>Cc(t),yl=(t,s,a)=>db(t,i=>Rs(i,s),a),Uy=(t,s)=>Cg(t,a=>Rs(a,s)),qd=(t,s)=>wg(t,a=>Rs(a,s)),Bs=(t,s)=>Cc(s,t),uc=(t,s,a)=>Ul((d,g)=>Rs(d,g),yl,t,s,a),Au=(t,s)=>{t.dom.checked=s},v1=t=>t.dom.checked,Gd=t=>t.dom.classList!==void 0,y1=t=>Vl(t,"class"),fb=(t,s)=>Vy(t,"class",s),_u=(t,s)=>p1(t,"class",s),ku=(t,s)=>St(y1(t),s)?_u(t,s):fb(t,s),Ls=(t,s)=>{Gd(t)?t.dom.classList.add(s):fb(t,s)},gb=t=>{(Gd(t)?t.dom.classList:y1(t)).length===0&&tr(t,"class")},Sr=(t,s)=>{Gd(t)?t.dom.classList.remove(s):_u(t,s),gb(t)},Af=(t,s)=>{const a=Gd(t)?t.dom.classList.toggle(s):ku(t,s);return gb(t),a},Wr=(t,s)=>Gd(t)&&t.dom.classList.contains(s),Du=(t,s)=>{ft(s,a=>{Ls(t,a)})},dc=(t,s)=>{ft(s,a=>{Sr(t,a)})},id=(t,s)=>{ft(s,a=>{Af(t,a)})},Hh=(t,s)=>Re(s,a=>Wr(t,a)),C1=t=>{const s=t.dom.classList,a=new Array(s.length);for(let i=0;i<s.length;i++){const d=s.item(i);d!==null&&(a[i]=d)}return a},w1=t=>Gd(t)?C1(t):y1(t),Wy=t=>t.dom.textContent,di=t=>t.dom.value,Wl=(t,s)=>{if(s===void 0)throw new Error("Value.set was undefined");t.dom.value=s},Zr=(t,s,a)=>ro(bg(t,a),s),_a=(t,s)=>Fa(s,t),zh=(t,s,a)=>Tf(t,s,a).isSome(),Sg=(t,s,a)=>uc(t,s,a).isSome(),Vh=t=>ze(t)?t:ut,hb=(t,s,a)=>{let i=t.dom;const d=Vh(a);for(;i.parentNode;){i=i.parentNode;const g=zt.fromDom(i),h=s(g);if(h.isSome())return h;if(d(g))break}return k.none()},Cl=(t,s,a)=>{const i=s(t),d=Vh(a);return i.orThunk(()=>d(t)?k.none():hb(t,s,d))},E={create:(t,s,a,i)=>({start:t,soffset:s,finish:a,foffset:i})},_=da.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),V=(t,s,a,i)=>t.fold(s,a,i),ee=t=>t.fold(It,It,It),Ee=_.before,ot=_.on,Zt=_.after,Sn={before:Ee,on:ot,after:Zt,cata:V,getStart:ee},go=da.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Fo=t=>go.exact(t.start,t.soffset,t.finish,t.foffset),Ks=t=>t.match({domRange:s=>zt.fromDom(s.startContainer),relative:(s,a)=>Sn.getStart(s),exact:(s,a,i,d)=>s}),ur=go.domRange,na=go.relative,Vc=go.exact,ld=t=>{const s=Ks(t);return pg(s)},ud=E.create,wl={domRange:ur,relative:na,exact:Vc,exactFromRange:Fo,getWin:ld,range:ud},S1=t=>k.from(t.getSelection()),_f=t=>{if(t.rangeCount>0){const s=t.getRangeAt(0),a=t.getRangeAt(t.rangeCount-1);return k.some(E.create(zt.fromDom(s.startContainer),s.startOffset,zt.fromDom(a.endContainer),a.endOffset))}else return k.none()},Uh=t=>{if(t.anchorNode===null||t.focusNode===null)return _f(t);{const s=zt.fromDom(t.anchorNode),a=zt.fromDom(t.focusNode);return Oo(s,t.anchorOffset,a,t.focusOffset)?k.some(E.create(s,t.anchorOffset,a,t.focusOffset)):_f(t)}},Nm=t=>S1(t).filter(s=>s.rangeCount>0).bind(Uh),kf=(t,s)=>{const a=j(t,s);return ct(a)},Wh=(t,s)=>{const a=j(t,s);return Lt(a)},Zh={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},Zy=(()=>{const t="[0-9]+",a="[eE]"+("[+-]?"+t),i="\\.",d=C=>`(?:${C})?`,h=`[+-]?(?:${["Infinity",t+i+d(t)+d(a),i+t+d(a),t+d(a)].join("|")})`;return new RegExp(`^(${h})(.*)$`)})(),jy=(t,s)=>$n(s,a=>$n(Zh[a],i=>t===i)),ls=(t,s)=>k.from(Zy.exec(t)).bind(i=>{const d=Number(i[1]),g=i[2];return jy(g,s)?k.some({value:d,unit:g}):k.none()}),Zs=(t,s)=>ls(t,s).map(({value:a,unit:i})=>a+i),pa=t=>{const s=t===void 0?window:t;return Nr().browser.isFirefox()?k.none():k.from(s.visualViewport)},mi=(t,s,a,i)=>({x:t,y:s,width:a,height:i,right:t+a,bottom:s+i}),jh=t=>{const s=t===void 0?window:t,a=s.document,i=Pr(zt.fromDom(a));return pa(s).fold(()=>{const d=s.document.documentElement,g=d.clientWidth,h=d.clientHeight;return mi(i.left,i.top,g,h)},d=>mi(Math.max(d.pageLeft,i.left),Math.max(d.pageTop,i.top),d.width,d.height))},xg=(t,s)=>t.view(s).fold(K([]),i=>{const d=t.owner(i),g=xg(t,d);return[i].concat(g)}),qh=(t,s)=>{const a=s.owner(t),i=xg(s,a);return k.some(i)};var Pm=Object.freeze({__proto__:null,view:t=>{var s;return(t.dom===document?k.none():k.from((s=t.dom.defaultView)===null||s===void 0?void 0:s.frameElement)).map(zt.fromDom)},owner:t=>ci(t)});const Kd=t=>{const s=Na(),a=Pr(s);return qh(t,Pm).fold(vn(lc,t),d=>{const g=ui(t),h=Qn(d,(C,S)=>{const T=ui(S);return{left:C.left+T.left,top:C.top+T.top}},{left:0,top:0});return Ms(h.left+g.left+a.left,h.top+g.top+a.top)})},qy=(t,s,a)=>({point:t,width:s,height:a}),I_=(t,s,a,i)=>({x:t,y:s,width:a,height:i}),ba=(t,s,a,i)=>({x:t,y:s,width:a,height:i,right:t+a,bottom:s+i}),sa=t=>{const s=lc(t),a=ad(t),i=ta(t);return ba(s.left,s.top,a,i)},dd=t=>{const s=Kd(t),a=ad(t),i=ta(t);return ba(s.left,s.top,a,i)},Kh=(t,s)=>{const a=Math.max(t.x,s.x),i=Math.max(t.y,s.y),d=Math.min(t.right,s.right),g=Math.min(t.bottom,s.bottom),h=d-a,C=g-i;return ba(a,i,h,C)},pb=(t,s)=>_o(s,(a,i)=>Kh(a,i),t),Uc=()=>jh(window),Gy=(t,s)=>Ko(t.element,s.event.target),Df=t=>(Tn(lr(t,"position"),"fixed")?k.none():c1(t)).orThunk(()=>{const i=zt.fromTag("span");return ii(t).bind(d=>{Aa(d,i);const g=c1(i);return Gi(i),g})}),bb=t=>Df(t).map(lc).getOrThunk(()=>Ms(0,0)),Ji=(t,s)=>{const a=k.from(ha(t,"id")).getOrThunk(()=>{const i=G("aria");return Hn(s,"id",i),i});Hn(t,"aria-describedby",a)},vb=t=>{tr(t,"aria-describedby")};var Qs;(function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"})(Qs||(Qs={}));const Yh=(t,s,a)=>t.stype===Qs.Error?s(t.serror):a(t.svalue),$m=t=>{const s=[],a=[];return ft(t,i=>{Yh(i,d=>a.push(d),d=>s.push(d))}),{values:s,errors:a}},L_=(t,s)=>t.stype===Qs.Error?{stype:Qs.Error,serror:s(t.serror)}:t,ES=(t,s)=>t.stype===Qs.Value?{stype:Qs.Value,svalue:s(t.svalue)}:t,yb=(t,s)=>t.stype===Qs.Value?s(t.svalue):t,H_=(t,s)=>t.stype===Qs.Error?s(t.serror):t,Ky=t=>({stype:Qs.Value,svalue:t}),Im=t=>({stype:Qs.Error,serror:t}),dr={fromResult:t=>t.fold(Im,Ky),toResult:t=>Yh(t,gn.error,gn.value),svalue:Ky,partition:$m,serror:Im,bind:yb,bindError:H_,map:ES,mapError:L_,fold:Yh},Xh=t=>$e(t)&&eo(t).length>100?" removed due to size":JSON.stringify(t,null,2),Eg=t=>{const s=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:K("... (only showing first ten failures)")}]):t;return Ne(s,a=>"Failed path: ("+a.path.join(" > ")+`)
`+a.getErrorInfo())},Xa=(t,s)=>dr.serror([{path:t,getErrorInfo:s}]),Jh=(t,s,a)=>Xa(t,()=>'Could not find valid *required* value for "'+s+'" in '+Xh(a)),z_=(t,s)=>Xa(t,()=>'Choice schema did not contain choice key: "'+s+'"'),Tg=(t,s,a)=>Xa(t,()=>'The chosen schema: "'+a+'" did not exist in branches: '+Xh(s)),TS=(t,s)=>Xa(t,()=>"There are unsupported fields: ["+s.join(", ")+"] specified"),Yd=(t,s)=>Xa(t,K(s)),Of=t=>{const s=(i,d)=>dr.bindError(t(d),g=>Yd(i,g)),a=K("val");return{extract:s,toString:a}},Xy=Of(dr.svalue),kt=K(Xy),Jy=(t,s)=>Of(a=>{const i=typeof a;return t(a)?dr.svalue(a):dr.serror(`Expected type: ${s} but got: ${i}`)}),Qy=Jy(Gn,"number"),$r=Jy(pe,"string"),Io=Jy(Rt,"boolean"),Ag=Jy(ze,"function"),xr=t=>{if(Object(t)!==t)return!0;switch({}.toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(t).every(s=>xr(t[s]));default:return!1}},e2=Of(t=>xr(t)?dr.svalue(t):dr.serror("Expected value to be acceptable for sending via postMessage")),Ou=()=>({tag:"required",process:{}}),fi=t=>({tag:"defaultedThunk",process:t}),mr=t=>fi(K(t)),Cb=()=>({tag:"option",process:{}}),Xd=t=>({tag:"mergeWithThunk",process:t}),t2=t=>Xd(K(t)),wb=(t,s,a,i)=>({tag:"field",key:t,newKey:s,presence:a,prop:i}),Ru=(t,s)=>({tag:"custom",newKey:t,instantiator:s}),n2=(t,s,a)=>{switch(t.tag){case"field":return s(t.key,t.newKey,t.presence,t.prop);case"custom":return a(t.newKey,t.instantiator)}},Sb=(t,s)=>dr.svalue(At(s,Mn.apply(void 0,t))),o2=t=>Ro(dr.serror,Oe)(t),s2={consolidateObj:(t,s)=>{const a=dr.partition(t);return a.errors.length>0?o2(a.errors):Sb(a.values,s)},consolidateArr:t=>{const s=dr.partition(t);return s.errors.length>0?o2(s.errors):dr.svalue(s.values)}},_S=(t,s,a,i)=>dn(s,a).fold(()=>Jh(t,a,s),i),xb=(t,s,a,i)=>{const d=dn(t,s).getOrThunk(()=>a(t));return i(d)},U_=(t,s,a)=>a(dn(t,s)),W_=(t,s,a,i)=>{const d=dn(t,s).map(g=>g===!0?a(t):g);return i(d)},r2=(t,s,a,i,d)=>{const g=C=>d.extract(s.concat([i]),C),h=C=>C.fold(()=>dr.svalue(k.none()),S=>{const T=d.extract(s.concat([i]),S);return dr.map(T,k.some)});switch(t.tag){case"required":return _S(s,a,i,g);case"defaultedThunk":return xb(a,i,t.process,g);case"option":return U_(a,i,h);case"defaultedOptionThunk":return W_(a,i,t.process,h);case"mergeWithThunk":return xb(a,i,K({}),C=>{const S=At(t.process(a),C);return g(S)})}},a2=(t,s,a)=>{const i={},d=[];for(const g of a)n2(g,(h,C,S,T)=>{const O=r2(S,t,s,h,T);dr.fold(O,F=>{d.push(...F)},F=>{i[C]=F})},(h,C)=>{i[h]=C(s)});return d.length>0?dr.serror(d):dr.svalue(i)},Zl=t=>({extract:(i,d)=>t().extract(i,d),toString:()=>t().toString()}),gi=t=>eo(ts(t,Wn)),Sl=t=>{const s=Xn(t),a=Qn(t,(d,g)=>n2(g,h=>At(d,{[h]:!0}),K(d)),{});return{extract:(d,g)=>{const h=Rt(g)?[]:gi(g),C=ro(h,S=>!xo(a,S));return C.length===0?s.extract(d,g):TS(d,C)},toString:s.toString}},Xn=t=>({extract:(i,d)=>a2(i,d,t),toString:()=>`obj{
`+Ne(t,d=>n2(d,(g,h,C,S)=>g+" -> "+S.toString(),(g,h)=>"state("+g+")")).join(`
`)+"}"}),hi=t=>({extract:(i,d)=>{const g=Ne(d,(h,C)=>t.extract(i.concat(["["+C+"]"]),h));return s2.consolidateArr(g)},toString:()=>"array("+t.toString()+")"}),_g=(t,s)=>{const a=s!==void 0?s:It;return{extract:(g,h)=>{const C=[];for(const S of t){const T=S.extract(g,h);if(T.stype===Qs.Value)return{stype:Qs.Value,svalue:a(T.svalue)};C.push(T)}return s2.consolidateArr(C)},toString:()=>"oneOf("+Ne(t,g=>g.toString()).join(", ")+")"}},kS=(t,s)=>{const a=(g,h)=>hi(Of(t)).extract(g,h);return{extract:(g,h)=>{const C=eo(h),S=a(g,C);return dr.bind(S,T=>{const O=Ne(T,F=>wb(F,F,Ou(),s));return Xn(O).extract(g,h)})},toString:()=>"setOf("+s.toString()+")"}},Z_=(t,s)=>{const a=yc(s);return{extract:(g,h)=>a().extract(g,h),toString:()=>a().toString()}},Eb=Ro(hi,Xn),x1=(t,s,a,i)=>dn(a,i).fold(()=>Tg(t,a,i),g=>g.extract(t.concat(["branch: "+i]),s)),kg=(t,s)=>({extract:(d,g)=>dn(g,t).fold(()=>z_(d,t),C=>x1(d,g,s,C)),toString:()=>"chooseOn("+t+"). Possible values: "+eo(s)}),Tb=()=>hi(Xy),Rf=t=>Of(s=>t(s).fold(dr.serror,dr.svalue)),c2=(t,s)=>kS(a=>dr.fromResult(t(a)),s),DS=(t,s,a)=>{const i=s.extract([t],a);return dr.mapError(i,d=>({input:a,errors:d}))},Mr=(t,s,a)=>dr.toResult(DS(t,s,a)),Mu=t=>t.fold(s=>{throw new Error(Mf(s))},It),Ri=(t,s,a)=>Mu(Mr(t,s,a)),Mf=t=>`Errors: 
`+Eg(t.errors).join(`
`)+`

Input object: `+Xh(t.input),pi=(t,s)=>kg(t,mt(s,Xn)),Dg=(t,s)=>Z_(t,s),Ia=wb,Ac=Ru,Qh=t=>Rf(s=>St(t,s)?gn.value(s):gn.error(`Unsupported value: "${s}", choose one of "${t.join(", ")}".`)),yt=t=>Ia(t,t,Ou(),kt()),xl=(t,s)=>Ia(t,t,Ou(),s),E1=t=>xl(t,Qy),ka=t=>xl(t,$r),jl=(t,s)=>Ia(t,t,Ou(),Qh(s)),ql=t=>xl(t,Ag),OS=(t,s)=>Ia(t,t,Cb(),Of(a=>dr.serror("The field: "+t+" is forbidden. "+s))),Lm=(t,s)=>Ia(t,t,Ou(),Xn(s)),RS=(t,s)=>Ia(t,t,Ou(),Eb(s)),Mi=(t,s)=>Ia(t,t,Ou(),hi(s)),Hs=t=>Ia(t,t,Cb(),kt()),Bu=(t,s)=>Ia(t,t,Cb(),s),T1=t=>Bu(t,Qy),Lr=t=>Bu(t,$r),MS=(t,s)=>Bu(t,Qh(s)),Ab=t=>Bu(t,Io),md=t=>Bu(t,Ag),i2=(t,s)=>Bu(t,hi(s)),Qi=(t,s)=>Bu(t,Xn(s)),l2=(t,s)=>Bu(t,Sl(s)),We=(t,s)=>Ia(t,t,mr(s),kt()),bi=(t,s,a)=>Ia(t,t,mr(s),a),ep=(t,s)=>bi(t,s,Qy),Br=(t,s)=>bi(t,s,$r),El=(t,s,a)=>bi(t,s,Qh(a)),mc=(t,s)=>bi(t,s,Io),$s=(t,s)=>bi(t,s,Ag),BS=(t,s)=>bi(t,s,e2),Bf=(t,s,a)=>bi(t,s,hi(a)),u2=(t,s,a)=>bi(t,s,Xn(a)),Ff=(t,s)=>{const a={};return wo(t,(i,d)=>{St(s,d)||(a[d]=i)}),a},tp=(t,s)=>({[t]:s}),FS=t=>{const s={};return ft(t,a=>{s[a.key]=a.value}),s},NS=(t,s)=>Ff(t,s),Hm=(t,s)=>tp(t,s),A1=t=>FS(t),eM=(t,s)=>t.length===0?gn.value(s):gn.value(At(s,Mn.apply(void 0,t))),Og=t=>gn.error(Oe(t)),fc=(t,s)=>{const a=Os(t);return a.errors.length>0?Og(a.errors):eM(a.values,s)},Ja=K,zm=Ja("touchstart"),Vm=Ja("touchmove"),Rg=Ja("touchend"),np=Ja("touchcancel"),vi=Ja("mousedown"),Nf=Ja("mousemove"),Da=Ja("mouseout"),_b=Ja("mouseup"),Fu=Ja("mouseover"),Nu=Ja("focusin"),kb=Ja("focusout"),La=Ja("keydown"),op=Ja("keyup"),Um=Ja("input"),Mg=Ja("change"),Jd=Ja("click"),_1=Ja("transitioncancel"),Tl=Ja("transitionend"),Bg=Ja("transitionstart"),PS=Ja("selectstart"),jr=t=>K("alloy."+t),$S={tap:jr("tap")},Qd=jr("focus"),Pu=jr("blur.post"),d2=jr("paste.post"),Fg=jr("receive"),el=jr("execute"),Ng=jr("focus.item"),Pg=$S.tap,m2=jr("longpress"),Db=jr("sandbox.close"),Ob=jr("typeahead.cancel"),Rb=jr("system.init"),f2=jr("system.touchmove"),IS=jr("system.touchend"),$g=jr("system.scroll"),Ig=jr("system.resize"),fd=jr("system.attached"),Wm=jr("system.detached"),Lg=jr("system.dismissRequested"),LS=jr("system.repositionRequested"),k1=jr("focusmanager.shifted"),D1=jr("slotcontainer.visibility"),HS=jr("system.external.element.scroll"),zS=jr("change.tab"),Mb=jr("dismiss.tab"),Hg=jr("highlight"),Bb=jr("dehighlight"),Gl=t=>Ga(t),VS="unknown";var $u;(function(t){t[t.STOP=0]="STOP",t[t.NORMAL=1]="NORMAL",t[t.LOGGING=2]="LOGGING"})($u||($u={}));const O1=cn({}),US=(t,s)=>{const a=[],i=new Date().getTime();return{logEventCut:(d,g,h)=>{a.push({outcome:"cut",target:g,purpose:h})},logEventStopped:(d,g,h)=>{a.push({outcome:"stopped",target:g,purpose:h})},logNoParent:(d,g,h)=>{a.push({outcome:"no-parent",target:g,purpose:h})},logEventNoHandlers:(d,g)=>{a.push({outcome:"no-handlers-left",target:g})},logEventResponse:(d,g,h)=>{a.push({outcome:"response",purpose:h,target:g})},write:()=>{const d=new Date().getTime();St(["mousemove","mouseover","mouseout",Rb()],t)||console.log(t,{event:t,time:d-i,target:s.dom,sequence:Ne(a,g=>St(["cut","stopped","response"],g.outcome)?"{"+g.purpose+"} "+g.outcome+" at ("+Gl(g.target)+")":g.outcome)})}}},WS=(t,s,a)=>{switch(dn(O1.get(),t).orThunk(()=>{const d=eo(O1.get());return Wo(d,g=>t.indexOf(g)>-1?k.some(O1.get()[g]):k.none())}).getOr($u.NORMAL)){case $u.NORMAL:return a(j_());case $u.LOGGING:{const d=US(t,s),g=a(d);return d.write(),g}case $u.STOP:return!0}},tl=["alloy/data/Fields","alloy/debugging/Debugging"],R1=()=>{const t=new Error;if(t.stack!==void 0){const s=t.stack.split(`
`);return be(s,a=>a.indexOf("alloy")>0&&!$n(tl,i=>a.indexOf(i)>-1)).getOr(VS)}else return VS},ZS={logEventCut:ie,logEventStopped:ie,logNoParent:ie,logEventNoHandlers:ie,logEventResponse:ie,write:ie},Pf=(t,s,a)=>WS(t,s,a),j_=K(ZS),q_=K([yt("menu"),yt("selectedMenu")]),g2=K([yt("item"),yt("selectedItem")]);K(Xn(g2().concat(q_())));const G_=K(Xn(g2())),Is=Lm("initSize",[yt("numColumns"),yt("numRows")]),jS=()=>xl("markers",G_()),qS=()=>Lm("markers",[yt("backgroundMenu")].concat(q_()).concat(g2())),Kl=t=>Lm("markers",Ne(t,yt)),zg=(t,s,a)=>(R1(),Ia(s,s,a,Rf(i=>gn.value((...d)=>i.apply(void 0,d))))),as=t=>zg("onHandler",t,mr(ie)),va=t=>zg("onKeyboardHandler",t,mr(k.none)),M1=t=>zg("onHandler",t,Ou()),Fb=t=>zg("onKeyboardHandler",t,Ou()),fr=(t,s)=>Ac(t,K(s)),sp=t=>Ac(t,It),Nb=K(Is),GS=(t,s,a)=>{const i=a.toString(),d=i.indexOf(")")+1,g=i.indexOf("("),h=i.substring(g+1,d-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:KS(h.slice(0,1).concat(h.slice(3)))}),t},KS=t=>Ne(t,s=>ri(s,"/*")?s.substring(0,s.length-2):s),YS=(t,s)=>{const a=t.toString(),i=a.indexOf(")")+1,d=a.indexOf("("),g=a.substring(d+1,i-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:KS(g)}),t},tM=(t,s)=>{const a=s.toString(),i=a.indexOf(")")+1,d=a.indexOf("("),g=a.substring(d+1,i-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:KS(g.slice(1))}),t},K_=(t,s)=>{let a=null;return{cancel:()=>{a!==null&&(clearTimeout(a),a=null)},schedule:(...g)=>{a=setTimeout(()=>{t.apply(null,g),a=null},s)}}},Y_=5,XS=400,JS=t=>{const s=t.raw;return s.touches===void 0||s.touches.length!==1?k.none():k.some(s.touches[0])},Iu=(t,s)=>{const a=Math.abs(t.clientX-s.x),i=Math.abs(t.clientY-s.y);return a>Y_||i>Y_},_c=t=>{const s=jn(),a=cn(!1),i=K_(T=>{t.triggerEvent(m2(),T),a.set(!0)},XS),d=T=>(JS(T).each(O=>{i.cancel();const F={x:O.clientX,y:O.clientY,target:T.target};i.schedule(T),a.set(!1),s.set(F)}),k.none()),g=T=>(i.cancel(),JS(T).each(O=>{s.on(F=>{Iu(O,F)&&s.clear()})}),k.none()),h=T=>{i.cancel();const O=F=>Ko(F.target,T.target);return s.get().filter(O).map(F=>a.get()?(T.prevent(),!1):t.triggerEvent(Pg(),T))},C=A1([{key:zm(),value:d},{key:Vm(),value:g},{key:Rg(),value:h}]);return{fireIfReady:(T,O)=>dn(C,O).bind(F=>F(T))}};var Lu;(function(t){t.OnFocusMode="onFocus",t.OnEnterOrSpaceMode="onEnterOrSpace",t.OnApiMode="onApi"})(Lu||(Lu={}));const gd="placeholder",hd=da.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),$f=t=>ko(t,"uiType"),em=(t,s,a,i)=>t.exists(d=>d!==a.owner)?hd.single(!0,K(a)):dn(i,a.name).fold(()=>{throw new Error("Unknown placeholder component: "+a.name+`
Known: [`+eo(i)+`]
Namespace: `+t.getOr("none")+`
Spec: `+JSON.stringify(a,null,2))},d=>d.replace()),Zm=(t,s,a,i)=>$f(a)&&a.uiType===gd?em(t,s,a,i):hd.single(!1,K(a)),h2=(t,s,a,i)=>Zm(t,s,a,i).fold((g,h)=>{const C=$f(a)?h(s,a.config,a.validated):h(s),S=dn(C,"components").getOr([]),T=me(S,O=>h2(t,s,O,i));return[{...C,components:T}]},(g,h)=>{if($f(a)){const C=h(s,a.config,a.validated);return a.validated.preprocess.getOr(It)(C)}else return h(s)}),p2=(t,s,a,i)=>me(a,d=>h2(t,s,d,i)),nM=(t,s)=>{let a=!1;const i=()=>a,d=()=>{if(a)throw new Error("Trying to use the same placeholder more than once: "+t);return a=!0,s},g=()=>s.fold((h,C)=>h,(h,C)=>h);return{name:K(t),required:g,used:i,replace:d}},X_=(t,s,a,i)=>{const d=mt(i,(h,C)=>nM(C,h)),g=p2(t,s,a,d);return wo(d,h=>{if(h.used()===!1&&h.required())throw new Error("Placeholder: "+h.name()+` was not found in components list
Namespace: `+t.getOr("none")+`
Components: `+JSON.stringify(s.components,null,2))}),g},Pb=hd.single,$b=hd.multiple,QS=K(gd),Ib=da.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),If=We("factory",{sketch:It}),B1=We("schema",[]),pd=yt("name"),Lb=Ia("pname","pname",fi(t=>"<alloy."+G(t.name)+">"),kt()),J_=Ac("schema",()=>[Hs("preprocess")]),Hb=We("defaults",K({})),zb=We("overrides",K({})),ex=Xn([If,B1,pd,Lb,Hb,zb]),Q_=Xn([If,B1,pd,Hb,zb]),rp=Xn([If,B1,pd,Lb,Hb,zb]),tx=Xn([If,J_,pd,yt("unit"),Lb,Hb,zb]),tm=t=>t.fold(k.some,k.none,k.some,k.some),ap=t=>{const s=a=>a.name;return t.fold(s,s,s,s)},Vb=t=>t.fold(It,It,It,It),nm=(t,s)=>a=>{const i=Ri("Converting part type",s,a);return t(i)},yi=nm(Ib.required,ex),nl=nm(Ib.external,Q_),ol=nm(Ib.optional,rp),Ub=nm(Ib.group,tx),b2=K("entirety");var cp=Object.freeze({__proto__:null,required:yi,external:nl,optional:ol,group:Ub,asNamedPart:tm,name:ap,asCommon:Vb,original:b2});const om=(t,s,a,i)=>At(s.defaults(t,a,i),a,{uid:t.partUids[s.name]},s.overrides(t,a,i)),e4=(t,s,a)=>{const i={},d={};return ft(a,g=>{g.fold(h=>{i[h.pname]=Pb(!0,(C,S,T)=>h.factory.sketch(om(C,h,S,T)))},h=>{const C=s.parts[h.name];d[h.name]=K(h.factory.sketch(om(s,h,C[b2()]),C))},h=>{i[h.pname]=Pb(!1,(C,S,T)=>h.factory.sketch(om(C,h,S,T)))},h=>{i[h.pname]=$b(!0,(C,S,T)=>{const O=C[h.name];return Ne(O,F=>h.factory.sketch(At(h.defaults(C,F,T),F,h.overrides(C,F))))})})}),{internals:K(i),externals:K(d)}},ya=(t,s)=>{const a={};return ft(s,i=>{tm(i).each(d=>{const g=Wb(t,d.pname);a[d.name]=h=>{const C=Ri("Part: "+d.name+" in "+t,Xn(d.schema),h);return{...g,config:h,validated:C}}})}),a},Wb=(t,s)=>({uiType:QS(),owner:t,name:s}),Bi=(t,s,a)=>({uiType:QS(),owner:t,name:s,config:a,validated:{}}),nx=t=>me(t,s=>s.fold(k.none,k.some,k.none,k.none).map(a=>Lm(a.name,a.schema.concat([sp(b2())]))).toArray()),ox=t=>Ne(t,ap),Lf=(t,s,a)=>e4(t,s,a),jm=(t,s,a)=>X_(k.some(t),s,s.components,a),Es=(t,s,a)=>{const i=s.partUids[a];return t.getSystem().getByUid(i).toOptional()},Wc=(t,s,a)=>Es(t,s,a).getOrDie("Could not find part: "+a),F1=(t,s,a)=>{const i={},d=s.partUids,g=t.getSystem();return ft(a,h=>{i[h]=K(g.getByUid(d[h]))}),i},Zb=(t,s)=>{const a=t.getSystem();return mt(s.partUids,(i,d)=>K(a.getByUid(i)))},jb=t=>eo(t.partUids),N1=(t,s,a)=>{const i={},d=s.partUids,g=t.getSystem();return ft(a,h=>{i[h]=K(g.getByUid(d[h]).getOrDie())}),i},sx=(t,s)=>{const a=ox(s);return A1(Ne(a,i=>({key:i,value:t+"-"+i})))},sm=t=>Ia("partUids","partUids",Xd(s=>sx(s.uid,t)),kt());var Hf=Object.freeze({__proto__:null,generate:ya,generateOne:Bi,schemas:nx,names:ox,substitutes:Lf,components:jm,defaultUids:sx,defaultUidsSchema:sm,getAllParts:Zb,getAllPartNames:jb,getPart:Es,getPartOrDie:Wc,getParts:F1,getPartsOrDie:N1});const v2=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],Al=(t,s,a,i=1)=>{const d=t*i,g=s*i,h=S=>dn(a,S).getOr([]),C=(S,T,O)=>{const F=tt(v2,O);return{offset:Ms(S,T),classesOn:me(O,h),classesOff:me(F,h)}};return{southeast:()=>C(-t,s,["top","alignLeft"]),southwest:()=>C(t,s,["top","alignRight"]),south:()=>C(-t/2,s,["top","alignCentre"]),northeast:()=>C(-t,-s,["bottom","alignLeft"]),northwest:()=>C(t,-s,["bottom","alignRight"]),north:()=>C(-t/2,-s,["bottom","alignCentre"]),east:()=>C(t,-s/2,["valignCentre","left"]),west:()=>C(-t,-s/2,["valignCentre","right"]),insetNortheast:()=>C(d,g,["top","alignLeft","inset"]),insetNorthwest:()=>C(-d,g,["top","alignRight","inset"]),insetNorth:()=>C(-d/2,g,["top","alignCentre","inset"]),insetSoutheast:()=>C(d,-g,["bottom","alignLeft","inset"]),insetSouthwest:()=>C(-d,-g,["bottom","alignRight","inset"]),insetSouth:()=>C(-d/2,-g,["bottom","alignCentre","inset"]),insetEast:()=>C(-d,-g/2,["valignCentre","right","inset"]),insetWest:()=>C(d,-g/2,["valignCentre","left","inset"])}},ip=()=>Al(0,0,{}),ra=(t,s,a,i,d,g,h,C=!1)=>({x:t,y:s,bubble:a,direction:i,placement:d,restriction:g,label:`${h}-${d}`,alwaysFit:C}),Fi=da.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),qb=(t,s,a,i,d,g,h,C,S)=>t.fold(s,a,i,d,g,h,C,S),rx=(t,s,a,i)=>t.fold(s,s,i,i,s,i,a,a),y2=(t,s,a,i)=>t.fold(s,i,s,i,a,a,s,i),zf=Fi.southeast,Vg=Fi.southwest,C2=Fi.northeast,w2=Fi.northwest,P1=Fi.south,S2=Fi.north,Vf=Fi.east,qm=Fi.west,ax=(t,s)=>{switch(s){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}},gc=(t,s)=>In(["left","right","top","bottom"],a=>dn(s,a).map(i=>ax(t,i))),cx=(t,s,a)=>{const i=(S,T)=>s[S].map(O=>{const F=S==="top"||S==="bottom",z=F?a.top:a.left,Z=(S==="left"||S==="top"?Math.max:Math.min)(O,T)+z;return F?jo(Z,t.y,t.bottom):jo(Z,t.x,t.right)}).getOr(T),d=i("left",t.x),g=i("top",t.y),h=i("right",t.right),C=i("bottom",t.bottom);return ba(d,g,h-d,C-g)},Uf="layout",ix=t=>t.x,Gb=(t,s)=>t.x+t.width/2-s.width/2,x2=(t,s)=>t.x+t.width-s.width,$1=(t,s)=>t.y-s.height,E2=t=>t.y+t.height,lx=(t,s)=>t.y+t.height/2-s.height/2,ux=t=>t.x+t.width,I1=(t,s)=>t.x-s.width,Ca=(t,s,a)=>ra(ix(t),E2(t),a.southeast(),zf(),"southeast",gc(t,{left:1,top:3}),Uf),gr=(t,s,a)=>ra(x2(t,s),E2(t),a.southwest(),Vg(),"southwest",gc(t,{right:0,top:3}),Uf),hc=(t,s,a)=>ra(ix(t),$1(t,s),a.northeast(),C2(),"northeast",gc(t,{left:1,bottom:2}),Uf),Oa=(t,s,a)=>ra(x2(t,s),$1(t,s),a.northwest(),w2(),"northwest",gc(t,{right:0,bottom:2}),Uf),Ha=(t,s,a)=>ra(Gb(t,s),$1(t,s),a.north(),S2(),"north",gc(t,{bottom:2}),Uf),aa=(t,s,a)=>ra(Gb(t,s),E2(t),a.south(),P1(),"south",gc(t,{top:3}),Uf),Kb=(t,s,a)=>ra(ux(t),lx(t,s),a.east(),Vf(),"east",gc(t,{left:0}),Uf),Yb=(t,s,a)=>ra(I1(t,s),lx(t,s),a.west(),qm(),"west",gc(t,{right:1}),Uf),Xb=()=>[Ca,gr,hc,Oa,aa,Ha,Kb,Yb],dx=()=>[gr,Ca,Oa,hc,aa,Ha,Kb,Yb],Jb=()=>[hc,Oa,Ca,gr,Ha,aa],mx=()=>[Oa,hc,gr,Ca,Ha,aa],Ug=()=>[Ca,gr,hc,Oa,aa,Ha],T2=()=>[gr,Ca,Oa,hc,aa,Ha],Wg="data-alloy-placement",Qb=(t,s)=>{Hn(t,Wg,s)},A2=t=>Pa(t,Wg),ev=t=>tr(t,Wg),bd="layout-inset",L1=t=>t.x,_2=(t,s)=>t.x+t.width/2-s.width/2,lp=(t,s)=>t.x+t.width-s.width,H1=t=>t.y,tv=(t,s)=>t.y+t.height-s.height,k2=(t,s)=>t.y+t.height/2-s.height/2,Hu=(t,s,a)=>ra(lp(t,s),tv(t,s),a.insetSouthwest(),w2(),"southwest",gc(t,{right:0,bottom:3}),bd),rm=(t,s,a)=>ra(L1(t),tv(t,s),a.insetSoutheast(),C2(),"southeast",gc(t,{left:1,bottom:3}),bd),up=(t,s,a)=>ra(lp(t,s),H1(t),a.insetNorthwest(),Vg(),"northwest",gc(t,{right:0,top:2}),bd),nt=(t,s,a)=>ra(L1(t),H1(t),a.insetNortheast(),zf(),"northeast",gc(t,{left:1,top:2}),bd),Ni=(t,s,a)=>ra(_2(t,s),H1(t),a.insetNorth(),P1(),"north",gc(t,{top:2}),bd),dp=(t,s,a)=>ra(_2(t,s),tv(t,s),a.insetSouth(),S2(),"south",gc(t,{bottom:3}),bd),z1=(t,s,a)=>ra(lp(t,s),k2(t,s),a.insetEast(),qm(),"east",gc(t,{right:0}),bd),nv=(t,s,a)=>ra(L1(t),k2(t,s),a.insetWest(),Vf(),"west",gc(t,{left:1}),bd),vd=t=>{switch(t){case"north":return Ni;case"northeast":return nt;case"northwest":return up;case"south":return dp;case"southeast":return rm;case"southwest":return Hu;case"east":return z1;case"west":return nv}},Zc=(t,s,a,i,d)=>A2(i).map(vd).getOr(Ni)(t,s,a,i,d),V1=t=>{switch(t){case"north":return dp;case"northeast":return rm;case"northwest":return Hu;case"south":return Ni;case"southeast":return nt;case"southwest":return up;case"east":return nv;case"west":return z1}},fx=(t,s,a,i,d)=>A2(i).map(V1).getOr(Ni)(t,s,a,i,d),ov=(t,s)=>{Tu(t,Math.floor(s))},gx=K((t,s)=>{ov(t,s),Cr(t,{"overflow-x":"hidden","overflow-y":"auto"})}),Zg=K((t,s)=>{ov(t,s)}),D2=K((t,s)=>{zy(t,Math.floor(s))});var am;(function(t){t.TopToBottom="toptobottom",t.BottomToTop="bottomtotop"})(am||(am={}));const O2="data-alloy-vertical-dir",hx=t=>zh(t,s=>ai(s)&&ha(s,"data-alloy-vertical-dir")===am.BottomToTop);var jc;(function(t){t[t.HighlightMenuAndItem=0]="HighlightMenuAndItem",t[t.HighlightJustMenu=1]="HighlightJustMenu",t[t.HighlightNone=2]="HighlightNone"})(jc||(jc={}));const yd={init:()=>sl({readState:K("No State required")})},sl=t=>t,sv={can:Ct,abort:ut,run:ie},mp=t=>{if(!xo(t,"can")&&!xo(t,"abort")&&!xo(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return{...sv,...t}},px=(t,s)=>(...a)=>_o(t,(i,d)=>i&&s(d).apply(void 0,a),!0),t4=(t,s)=>(...a)=>_o(t,(i,d)=>i||s(d).apply(void 0,a),!1),R2=t=>ze(t)?{can:Ct,abort:ut,run:t}:t,bx=t=>{const s=px(t,d=>d.can),a=t4(t,d=>d.abort);return{can:s,abort:a,run:(...d)=>{ft(t,g=>{g.run.apply(void 0,d)})}}},$o=(t,s)=>{M2(t,t.element,s,{})},Nn=(t,s,a)=>{M2(t,t.element,s,a)},U1=t=>{$o(t,el())},rv=(t,s,a)=>{M2(t,s,a,{})},M2=(t,s,a,i)=>{const d={target:s,...i};t.getSystem().triggerEvent(a,s,d)},n4=(t,s,a,i)=>{const d={...i,target:s};t.getSystem().triggerEvent(a,s,d)},B2=(t,s,a,i)=>{t.getSystem().triggerEvent(a,s,i.event)},hr=t=>A1(t),av=(t,s)=>({key:t,value:mp({abort:s})}),W1=(t,s)=>({key:t,value:mp({can:s})}),jg=t=>({key:t,value:mp({run:(s,a)=>{a.event.prevent()}})}),rt=(t,s)=>({key:t,value:mp({run:s})}),cv=(t,s,a)=>({key:t,value:mp({run:(i,d)=>{s.apply(void 0,[i,d].concat(a))}})}),vx=t=>s=>rt(t,s),iv=t=>s=>({key:t,value:mp({run:(a,i)=>{Gy(a,i)&&s(a,i)}})}),yx=(t,s)=>rt(t,(a,i)=>{a.getSystem().getByUid(s).each(d=>{B2(d,d.element,t,i)})}),Gm=(t,s,a)=>{const i=s.partUids[a];return yx(t,i)},qg=(t,s)=>rt(t,(a,i)=>{const d=i.event,g=a.getSystem().getByDom(d.target).getOrThunk(()=>Cl(d.target,C=>a.getSystem().getByDom(C).toOptional(),ut).getOr(a));s(a,g,i)}),Gg=t=>rt(t,(s,a)=>{a.cut()}),F2=t=>rt(t,(s,a)=>{a.stop()}),Kg=(t,s)=>iv(t)(s),or=iv(fd()),Cd=iv(Wm()),Cx=iv(Rb()),Km=vx(el()),zu=t=>({classes:tn(t.classes)?[]:t.classes,attributes:tn(t.attributes)?{}:t.attributes,styles:tn(t.styles)?{}:t.styles}),o4=(t,s)=>({...t,attributes:{...t.attributes,...s.attributes},styles:{...t.styles,...s.styles},classes:t.classes.concat(s.classes)}),s4=(t,s,a)=>Km(i=>{a(i,t,s)}),N2=(t,s,a)=>Cx((i,d)=>{a(i,t,s)}),r4=(t,s,a,i,d,g)=>{const h=Sl(t),C=Qi(s,[l2("config",t)]);return P2(h,C,s,a,i,d,g)},a4=(t,s,a,i,d,g)=>{const h=t,C=Qi(s,[Bu("config",t)]);return P2(h,C,s,a,i,d,g)},c4=(t,s,a)=>GS((d,...g)=>{const h=[d].concat(g);return d.config({name:K(t)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+a)},C=>{const S=Array.prototype.slice.call(h,1);return s.apply(void 0,[d,C.config,C.state].concat(S))})},a,s),i4=t=>({key:t,value:void 0}),P2=(t,s,a,i,d,g,h)=>{const C=F=>xo(F,a)?F[a]():k.none(),S=mt(d,(F,z)=>c4(a,F,z)),O={...mt(g,(F,z)=>YS(F,z)),...S,revoke:vn(i4,a),config:F=>{const z=Ri(a+"-config",t,F);return{key:a,value:{config:z,me:O,configAsRaw:yc(()=>Ri(a+"-config",t,F)),initialConfig:F,state:h}}},schema:K(s),exhibit:(F,z)=>Qo(C(F),dn(i,"exhibit"),(q,Z)=>Z(z,q.config,q.state)).getOrThunk(()=>zu({})),name:K(a),handlers:F=>C(F).map(z=>dn(i,"events").getOr(()=>({}))(z.config,z.state)).getOr({})};return O},Ft=t=>A1(t),wx=Sl([yt("fields"),yt("name"),We("active",{}),We("apis",{}),We("state",yd),We("extra",{})]),Qa=t=>{const s=Ri("Creating behaviour: "+t.name,wx,t);return r4(s.fields,s.name,s.active,s.apis,s.extra,s.state)},Sx=Sl([yt("branchKey"),yt("branches"),yt("name"),We("active",{}),We("apis",{}),We("state",yd),We("extra",{})]),xx=t=>{const s=Ri("Creating behaviour: "+t.name,Sx,t);return a4(pi(s.branchKey,s.branches),s.name,s.active,s.apis,s.extra,s.state)},Ex=K(void 0),l4=(t,s)=>{const a=hr(s);return Qa({fields:[yt("enabled")],name:t,active:{events:K(a)}})},so=(t,s)=>{const a=l4(t,s);return{key:t,value:{config:{},me:a,configAsRaw:K({}),initialConfig:{},state:yd}}},$2=t=>({init:()=>{const a=cn(t);return{get:()=>a.get(),set:C=>a.set(C),clear:()=>a.set(t),readState:()=>a.get()}}}),Tx=(t,s)=>{s.ignore||(Ea(t.element),s.onFocus(t))};var Ax=Object.freeze({__proto__:null,focus:Tx,blur:(t,s)=>{s.ignore||wr(t.element)},isFocused:t=>pl(t.element)}),_x=Object.freeze({__proto__:null,exhibit:(t,s)=>{const a=s.ignore?{}:{attributes:{tabindex:"-1"}};return zu(a)},events:t=>hr([rt(Qd(),(s,a)=>{Tx(s,t),a.stop()})].concat(t.stopMousedown?[rt(vi(),(s,a)=>{a.event.prevent()})]:[]))}),I2=[as("onFocus"),We("stopMousedown",!1),We("ignore",!1)];const ao=Qa({fields:I2,name:"focusing",active:_x,apis:Ax}),L2=[8],Ym=[9],_l=[13],an=[27],qc=[32],Z1=[37],j1=[38],lv=[39],fp=[40],q1=K("tooltipping.close.all"),Xm=K("dismiss.popups"),kc=K("reposition.popups"),cm=K("mouse.released"),m4=(t,s,a)=>{const i=at(t.slice(0,s)),d=at(t.slice(s+1));return be(i.concat(d),a)},pc=(t,s,a)=>{const i=at(t.slice(0,s));return be(i,a)},gp=(t,s,a)=>{const i=t.slice(0,s),d=t.slice(s+1);return be(d.concat(i),a)},f4=(t,s,a)=>{const i=t.slice(s+1);return be(i,a)},ss=t=>s=>{const a=s.raw;return St(t,a.which)},wd=t=>s=>Re(t,a=>a(s)),Yg=t=>t.raw.shiftKey===!0,rM=t=>t.raw.ctrlKey===!0,Xg=Fe(Yg),cs=(t,s)=>({matches:t,classification:s}),aM=(t,s)=>be(t,i=>i.matches(s)).map(i=>i.classification),kx=(t,s,a,i)=>{const d=_a(t.element,"."+s.highlightClass);ft(d,g=>{$n(i,C=>Ko(C.element,g))||(Sr(g,s.highlightClass),t.getSystem().getByDom(g).each(C=>{s.onDehighlight(t,C),$o(C,Bb())}))})},cM=(t,s,a)=>kx(t,s,a,[]),iM=(t,s,a,i)=>{K1(t,s,a,i)&&(Sr(i.element,s.highlightClass),s.onDehighlight(t,i),$o(i,Bb()))},G1=(t,s,a,i)=>{kx(t,s,a,[i]),K1(t,s,a,i)||(Ls(i.element,s.highlightClass),s.onHighlight(t,i),$o(i,Hg()))},g4=(t,s,a)=>{Y1(t,s).each(i=>{G1(t,s,a,i)})},lM=(t,s,a)=>{z2(t,s).each(i=>{G1(t,s,a,i)})},uv=(t,s,a,i)=>{h4(t,s,a,i).fold(d=>{throw d},d=>{G1(t,s,a,d)})},H2=(t,s,a,i)=>{const d=Mx(t,s);be(d,i).each(h=>{G1(t,s,a,h)})},K1=(t,s,a,i)=>Wr(i.element,s.highlightClass),Dx=(t,s,a)=>Bs(t.element,"."+s.highlightClass).bind(i=>t.getSystem().getByDom(i).toOptional()),h4=(t,s,a,i)=>{const d=_a(t.element,"."+s.itemClass);return k.from(d[i]).fold(()=>gn.error(new Error("No element found with index "+i)),t.getSystem().getByDom)},Y1=(t,s,a)=>Bs(t.element,"."+s.itemClass).bind(i=>t.getSystem().getByDom(i).toOptional()),z2=(t,s,a)=>{const i=_a(t.element,"."+s.itemClass);return(i.length>0?k.some(i[i.length-1]):k.none()).bind(g=>t.getSystem().getByDom(g).toOptional())},V2=(t,s,a,i)=>{const d=_a(t.element,"."+s.itemClass);return ke(d,h=>Wr(h,s.highlightClass)).bind(h=>{const C=Ao(h,i,0,d.length-1);return t.getSystem().getByDom(d[C]).toOptional()})},Ox=(t,s,a)=>V2(t,s,a,-1),Rx=(t,s,a)=>V2(t,s,a,1),Mx=(t,s,a)=>{const i=_a(t.element,"."+s.itemClass);return bo(Ne(i,d=>t.getSystem().getByDom(d).toOptional()))};var U2=Object.freeze({__proto__:null,dehighlightAll:cM,dehighlight:iM,highlight:G1,highlightFirst:g4,highlightLast:lM,highlightAt:uv,highlightBy:H2,isHighlighted:K1,getHighlighted:Dx,getFirst:Y1,getLast:z2,getPrevious:Ox,getNext:Rx,getCandidates:Mx}),W2=[yt("highlightClass"),yt("itemClass"),as("onHighlight"),as("onDehighlight")];const vs=Qa({fields:W2,name:"highlighting",apis:U2}),Bx=(t,s,a)=>{s.exists(d=>a.exists(g=>Ko(g,d)))||Nn(t,k1(),{prevFocus:s,newFocus:a})},dv=()=>{const t=a=>Vr(a.element);return{get:t,set:(a,i)=>{const d=t(a);a.getSystem().triggerFocus(i,a.element);const g=t(a);Bx(a,d,g)}}},Z2=()=>{const t=a=>vs.getHighlighted(a).map(i=>i.element);return{get:t,set:(a,i)=>{const d=t(a);a.getSystem().getByDom(i).fold(ie,h=>{vs.highlight(a,h)});const g=t(a);Bx(a,d,g)}}},Yl=(t,s,a,i,d)=>{const g=()=>t.concat([We("focusManager",dv()),bi("focusInside","onFocus",Rf(T=>St(["onFocus","onEnterOrSpace","onApi"],T)?gn.value(T):gn.error("Invalid value for focusInside"))),fr("handler",S),fr("state",s),fr("sendFocusIn",d)]),h=(T,O,F,z,q)=>{const Z=F(T,O,z,q);return aM(Z,O.event).bind(ae=>ae(T,O,z,q))},S={schema:g,processKey:h,toEvents:(T,O)=>{const F=T.focusInside!==Lu.OnFocusMode?k.none():d(T).map(Z=>rt(Qd(),(ae,ye)=>{Z(ae,T,O),ye.stop()})),z=(Z,ae)=>{const ye=ss(qc.concat(_l))(ae.event);T.focusInside===Lu.OnEnterOrSpaceMode&&ye&&Gy(Z,ae)&&d(T).each(ce=>{ce(Z,T,O),ae.stop()})},q=[rt(La(),(Z,ae)=>{h(Z,ae,a,T,O).fold(()=>{z(Z,ae)},ye=>{ae.stop()})}),rt(op(),(Z,ae)=>{h(Z,ae,i,T,O).each(ye=>{ae.stop()})})];return hr(F.toArray().concat(q))}};return S},Fx=t=>{const s=[Hs("onEscape"),Hs("onEnter"),We("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),We("firstTabstop",0),We("useTabstopAt",Ct),Hs("visibilitySelector")].concat([t]),a=(ce,xe)=>{const De=ce.visibilitySelector.bind(Ke=>uc(xe,Ke)).getOr(xe);return ea(De)>0},i=(ce,xe)=>{const De=_a(ce.element,xe.selector),Ke=ro(De,Ye=>a(xe,Ye));return k.from(Ke[xe.firstTabstop])},d=(ce,xe)=>xe.focusManager.get(ce).bind(De=>uc(De,xe.selector)),g=(ce,xe)=>a(ce,xe)&&ce.useTabstopAt(xe),h=(ce,xe,De)=>{i(ce,xe).each(Ke=>{xe.focusManager.set(ce,Ke)})},C=(ce,xe,De,Ke,Ye)=>Ye(xe,De,Kt=>g(Ke,Kt)).fold(()=>Ke.cyclic?k.some(!0):k.none(),Kt=>(Ke.focusManager.set(ce,Kt),k.some(!0))),S=(ce,xe,De,Ke)=>{const Ye=ro(_a(ce.element,De.selector),Kt=>a(De,Kt));return d(ce,De).bind(Kt=>ke(Ye,vn(Ko,Kt)).bind(_t=>C(ce,Ye,_t,De,Ke)))},T=(ce,xe,De)=>{const Ke=De.cyclic?m4:pc;return S(ce,xe,De,Ke)},O=(ce,xe,De)=>{const Ke=De.cyclic?gp:f4;return S(ce,xe,De,Ke)},F=ce=>a1(ce).bind(Yo).exists(xe=>Ko(xe,ce)),z=(ce,xe,De)=>d(ce,De).filter(Ke=>!De.useTabstopAt(Ke)).bind(Ke=>(F(Ke)?T:O)(ce,xe,De)),q=(ce,xe,De)=>De.onEnter.bind(Ke=>Ke(ce,xe)),Z=(ce,xe,De)=>(ce.getSystem().broadcastOn([q1()],{closedTooltip:()=>{xe.stop()}}),xe.isStopped()?k.none():De.onEscape.bind(Ke=>Ke(ce,xe))),ae=K([cs(wd([Yg,ss(Ym)]),T),cs(ss(Ym),O),cs(wd([Xg,ss(_l)]),q)]),ye=K([cs(ss(an),Z),cs(ss(Ym),z)]);return Yl(s,yd.init,ae,ye,()=>k.some(h))};var j2=Fx(Ac("cyclic",ut)),p4=Fx(Ac("cyclic",Ct));const im=t=>cc("input")(t)&&ha(t,"type")!=="radio"||cc("textarea")(t),b4=(t,s,a)=>(rv(t,a,el()),k.some(!0)),X1=(t,s,a)=>im(a)&&ss(qc)(s.event)?k.none():b4(t,s,a),J1=(t,s)=>k.some(!0),v4=[We("execute",X1),We("useSpace",!1),We("useEnter",!0),We("useControlEnter",!1),We("useDown",!1)],Wf=(t,s,a)=>a.execute(t,s,t.element),mv=(t,s,a,i)=>{const d=a.useSpace&&!im(t.element)?qc:[],g=a.useEnter?_l:[],h=a.useDown?fp:[],C=d.concat(g).concat(h);return[cs(ss(C),Wf)].concat(a.useControlEnter?[cs(wd([rM,ss(_l)]),Wf)]:[])},Nx=(t,s,a,i)=>a.useSpace&&!im(t.element)?[cs(ss(qc),J1)]:[];var y4=Yl(v4,yd.init,mv,Nx,()=>k.none());const Px=()=>{const t=jn();return sl({readState:()=>t.get().map(d=>({numRows:String(d.numRows),numColumns:String(d.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(d,g)=>{t.set({numRows:d,numColumns:g})},getNumRows:()=>t.get().map(d=>d.numRows),getNumColumns:()=>t.get().map(d=>d.numColumns)})};var $x=Object.freeze({__proto__:null,flatgrid:Px,init:t=>t.state(t)});const Ix=t=>(s,a,i,d)=>{const g=t(s.element);return Jg(g,s,a,i,d)},Q1=(t,s)=>{const a=h1(t,s);return Ix(a)},e0=(t,s)=>{const a=h1(s,t);return Ix(a)},t0=t=>(s,a,i,d)=>Jg(t,s,a,i,d),Jg=(t,s,a,i,d)=>i.focusManager.get(s).bind(h=>t(s.element,h,i,d)).map(h=>(i.focusManager.set(s,h),!0)),fv=t0,n0=t0,Jm=t0,o0=(t,s)=>ke(t,s).map(a=>({index:a,candidates:t})),q2=(t,s,a)=>{const i=h=>Ko(h,s),d=_a(t,a),g=ro(d,rd);return o0(g,i)},gv=(t,s)=>ke(t,a=>Ko(s,a)),Lx=(t,s,a,i)=>{const d=Math.floor(s/a),g=s%a;return i(d,g).bind(h=>{const C=h.row*a+h.column;return C>=0&&C<t.length?k.some(t[C]):k.none()})},Hx=(t,s,a,i,d)=>Lx(t,s,i,(g,h)=>{const S=g===a-1?t.length-g*i:i,T=Ao(h,d,0,S-1);return k.some({row:g,column:T})}),zx=(t,s,a,i,d)=>Lx(t,s,i,(g,h)=>{const C=Ao(g,d,0,a-1),T=C===a-1?t.length-C*i:i,O=jo(h,0,T-1);return k.some({row:C,column:O})}),C4=(t,s,a,i)=>Hx(t,s,a,i,1),hv=(t,s,a,i)=>Hx(t,s,a,i,-1),hp=(t,s,a,i)=>zx(t,s,a,i,-1),Qg=(t,s,a,i)=>zx(t,s,a,i,1),eh=[yt("selector"),We("execute",X1),va("onEscape"),We("captureTab",!1),Nb()],Vx=(t,s,a)=>{Bs(t.element,s.selector).each(i=>{s.focusManager.set(t,i)})},Ux=(t,s)=>s.focusManager.get(t).bind(a=>uc(a,s.selector)),Wx=(t,s,a,i)=>Ux(t,a).bind(d=>a.execute(t,s,d)),pv=t=>(s,a,i,d)=>q2(s,a,i.selector).bind(g=>t(g.candidates,g.index,d.getNumRows().getOr(i.initSize.numRows),d.getNumColumns().getOr(i.initSize.numColumns))),Zx=(t,s,a)=>a.captureTab?k.some(!0):k.none(),w4=(t,s,a)=>a.onEscape(t,s),jx=pv(hv),bv=pv(C4),G2=pv(hp),vv=pv(Qg),K2=K([cs(ss(Z1),Q1(jx,bv)),cs(ss(lv),e0(jx,bv)),cs(ss(j1),fv(G2)),cs(ss(fp),n0(vv)),cs(wd([Yg,ss(Ym)]),Zx),cs(wd([Xg,ss(Ym)]),Zx),cs(ss(qc.concat(_l)),Wx)]),S4=K([cs(ss(an),w4),cs(ss(qc),J1)]);var Y2=Yl(eh,Px,K2,S4,()=>k.some(Vx));const qx=(t,s,a,i,d)=>{const g=C=>fl(C)==="button"&&ha(C,"disabled")==="disabled",h=(C,S,T)=>d(C,S,i,0,T.length-1,T[S],O=>g(T[O])?h(C,O,T):k.from(T[O]));return q2(t,a,s).bind(C=>{const S=C.index,T=C.candidates;return h(S,S,T)})},Gx=(t,s,a,i)=>qx(t,s,a,i,(d,g,h,C,S,T,O)=>{const F=jo(g+h,C,S);return F===d?k.from(T):O(F)}),s0=(t,s,a,i)=>qx(t,s,a,i,(d,g,h,C,S,T,O)=>{const F=Ao(g,h,C,S);return F===d?k.none():O(F)}),x4=[yt("selector"),We("getInitial",k.none),We("execute",X1),va("onEscape"),We("executeOnMove",!1),We("allowVertical",!0),We("allowHorizontal",!0),We("cycles",!0)],X2=(t,s)=>s.focusManager.get(t).bind(a=>uc(a,s.selector)),J2=(t,s,a)=>X2(t,a).bind(i=>a.execute(t,s,i)),E4=(t,s,a)=>{s.getInitial(t).orThunk(()=>Bs(t.element,s.selector)).each(i=>{s.focusManager.set(t,i)})},T4=(t,s,a)=>(a.cycles?s0:Gx)(t,a.selector,s,-1),th=(t,s,a)=>(a.cycles?s0:Gx)(t,a.selector,s,1),Kx=t=>(s,a,i,d)=>t(s,a,i,d).bind(()=>i.executeOnMove?J2(s,a,i):k.some(!0)),Yx=(t,s,a)=>a.onEscape(t,s),A4=(t,s,a,i)=>{const d=[...a.allowHorizontal?Z1:[]].concat(a.allowVertical?j1:[]),g=[...a.allowHorizontal?lv:[]].concat(a.allowVertical?fp:[]);return[cs(ss(d),Kx(Q1(T4,th))),cs(ss(g),Kx(e0(T4,th))),cs(ss(_l),J2),cs(ss(qc),J2)]},_4=K([cs(ss(qc),J1),cs(ss(an),Yx)]);var k4=Yl(x4,yd.init,A4,_4,()=>k.some(E4));const yv=(t,s,a)=>k.from(t[s]).bind(i=>k.from(i[a]).map(d=>({rowIndex:s,columnIndex:a,cell:d}))),r0=(t,s,a,i)=>{const g=t[s].length,h=Ao(a,i,0,g-1);return yv(t,s,h)},Q2=(t,s,a,i)=>{const d=Ao(a,i,0,t.length-1),g=t[d].length,h=jo(s,0,g-1);return yv(t,d,h)},a0=(t,s,a,i)=>{const g=t[s].length,h=jo(a+i,0,g-1);return yv(t,s,h)},Xx=(t,s,a,i)=>{const d=jo(a+i,0,t.length-1),g=t[d].length,h=jo(s,0,g-1);return yv(t,d,h)},c0=(t,s,a)=>r0(t,s,a,1),D4=(t,s,a)=>r0(t,s,a,-1),Cv=(t,s,a)=>Q2(t,a,s,-1),O4=(t,s,a)=>Q2(t,a,s,1),Jx=(t,s,a)=>a0(t,s,a,-1),dM=(t,s,a)=>a0(t,s,a,1),R4=(t,s,a)=>Xx(t,a,s,-1),nh=(t,s,a)=>Xx(t,a,s,1),wv=[Lm("selectors",[yt("row"),yt("cell")]),We("cycles",!0),We("previousSelector",k.none),We("execute",X1)],Sv=(t,s,a)=>{s.previousSelector(t).orThunk(()=>{const d=s.selectors;return Bs(t.element,d.cell)}).each(d=>{s.focusManager.set(t,d)})},Qx=(t,s,a)=>Vr(t.element).bind(i=>a.execute(t,s,i)),M4=(t,s)=>Ne(t,a=>_a(a,s.selectors.cell)),xv=(t,s)=>(a,i,d)=>{const g=d.cycles?t:s;return uc(i,d.selectors.row).bind(h=>{const C=_a(h,d.selectors.cell);return gv(C,i).bind(S=>{const T=_a(a,d.selectors.row);return gv(T,h).bind(O=>{const F=M4(T,d);return g(F,O,S).map(z=>z.cell)})})})},eE=xv(D4,Jx),tE=xv(c0,dM),Ev=xv(Cv,R4),lm=xv(O4,nh),nE=K([cs(ss(Z1),Q1(eE,tE)),cs(ss(lv),e0(eE,tE)),cs(ss(j1),fv(Ev)),cs(ss(fp),n0(lm)),cs(ss(qc.concat(_l)),Qx)]),B4=K([cs(ss(qc),J1)]);var F4=Yl(wv,yd.init,nE,B4,()=>k.some(Sv));const N4=[yt("selector"),We("execute",X1),We("moveOnTab",!1)],pp=(t,s,a)=>a.focusManager.get(t).bind(i=>a.execute(t,s,i)),oE=(t,s,a)=>{Bs(t.element,s.selector).each(i=>{s.focusManager.set(t,i)})},eC=(t,s,a)=>s0(t,a.selector,s,-1),Tv=(t,s,a)=>s0(t,a.selector,s,1),Sd=(t,s,a,i)=>a.moveOnTab?Jm(eC)(t,s,a,i):k.none(),i0=(t,s,a,i)=>a.moveOnTab?Jm(Tv)(t,s,a,i):k.none(),um=K([cs(ss(j1),Jm(eC)),cs(ss(fp),Jm(Tv)),cs(wd([Yg,ss(Ym)]),Sd),cs(wd([Xg,ss(Ym)]),i0),cs(ss(_l),pp),cs(ss(qc),pp)]),tC=K([cs(ss(qc),J1)]);var sE=Yl(N4,yd.init,um,tC,()=>k.some(oE));const rE=[va("onSpace"),va("onEnter"),va("onShiftEnter"),va("onLeft"),va("onRight"),va("onTab"),va("onShiftTab"),va("onUp"),va("onDown"),va("onEscape"),We("stopSpaceKeyup",!1),Hs("focusIn")],P4=(t,s,a)=>[cs(ss(qc),a.onSpace),cs(wd([Xg,ss(_l)]),a.onEnter),cs(wd([Yg,ss(_l)]),a.onShiftEnter),cs(wd([Yg,ss(Ym)]),a.onShiftTab),cs(wd([Xg,ss(Ym)]),a.onTab),cs(ss(j1),a.onUp),cs(ss(fp),a.onDown),cs(ss(Z1),a.onLeft),cs(ss(lv),a.onRight),cs(ss(qc),a.onSpace)],aE=(t,s,a)=>[...a.stopSpaceKeyup?[cs(ss(qc),J1)]:[],cs(ss(an),a.onEscape)];var $4=Yl(rE,yd.init,P4,aE,t=>t.focusIn);const I4=j2.schema(),L4=p4.schema(),bp=k4.schema(),l0=Y2.schema(),cE=F4.schema(),dm=y4.schema(),mm=sE.schema(),nC=$4.schema();var Av=Object.freeze({__proto__:null,acyclic:I4,cyclic:L4,flow:bp,flatgrid:l0,matrix:cE,execution:dm,menu:mm,special:nC});const iE=t=>xo(t,"setGridSize"),_n=xx({branchKey:"mode",branches:Av,name:"keying",active:{events:(t,s)=>t.handler.toEvents(t,s)},apis:{focusIn:(t,s,a)=>{s.sendFocusIn(s).fold(()=>{t.getSystem().triggerFocus(t.element,t.element)},i=>{i(t,s,a)})},setGridSize:(t,s,a,i,d)=>{iE(a)?a.setGridSize(i,d):console.error("Layout does not support setGridSize")}},state:$x}),Zf=G("alloy-premade"),vp=t=>(Object.defineProperty(t.element.dom,Zf,{value:t.uid,writable:!0}),Hm(Zf,t)),oC=t=>ko(t.dom,Zf),_v=t=>dn(t,Zf),Qm=t=>tM((s,...a)=>t(s.getApis(),s,...a),t),yp=t=>t.getSystem().isConnected(),u0=t=>{$o(t,Wm());const s=t.components();ft(s,u0)},jf=t=>{const s=t.components();ft(s,jf),$o(t,fd())},Cp=(t,s)=>{t.getSystem().addToWorld(s),ds(t.element)&&jf(s)},sC=t=>{u0(t),t.getSystem().removeFromWorld(t)},xd=(t,s)=>{Aa(t.element,s.element)},rC=t=>{ft(t.components(),s=>Gi(s.element)),Ih(t.element),t.syncComponents()},kv=(t,s,a)=>{const i=t.components();rC(t);const d=a(s),g=tt(i,d);ft(g,h=>{u0(h),t.getSystem().removeFromWorld(h)}),ft(d,h=>{yp(h)?xd(t,h):(t.getSystem().addToWorld(h),xd(t,h),ds(t.element)&&jf(h))}),t.syncComponents()},Ed=(t,s,a)=>{const i=t.components(),d=me(s,C=>_v(C).toArray());ft(i,C=>{St(d,C)||sC(C)});const g=a(s),h=tt(i,g);ft(h,C=>{yp(C)&&sC(C)}),ft(g,C=>{yp(C)||Cp(t,C)}),t.syncComponents()},fm=(t,s)=>{qf(t,s,Aa)},qf=(t,s,a)=>{t.getSystem().addToWorld(s),a(t.element,s.element),ds(t.element)&&jf(s),t.syncComponents()},oh=t=>{u0(t),Gi(t.element),t.getSystem().removeFromWorld(t)},gm=t=>{const s=ii(t.element).bind(a=>t.getSystem().getByDom(a).toOptional());oh(t),s.each(a=>{a.syncComponents()})},aC=t=>{const s=t.components();ft(s,oh),Ih(t.element),t.syncComponents()},d0=(t,s)=>{Ad(t,s,Aa)},Td=(t,s)=>{Ad(t,s,ib)},Ad=(t,s,a)=>{a(t,s.element);const i=$l(s.element);ft(i,d=>{s.getByDom(d).each(jf)})},lE=t=>{const s=$l(t.element);ft(s,a=>{t.getByDom(a).each(u0)}),Gi(t.element)},cC=(t,s,a)=>zd(t,s).map(d=>{if(a.exists(h=>!Ko(h,d))){const h=a.map(fl).getOr("span"),C=zt.fromTag(h);return Vd(d,C),C}else return d}),iC=(t,s,a)=>{a.fold(()=>Aa(t,s),i=>{Ko(i,s)||(Vd(i,s),Gi(i))})},lC=(t,s,a)=>{const i=Ne(s,a),d=$l(t);return ft(d.slice(i.length),Gi),i},uE=(t,s,a,i)=>{const d=zd(t,s),g=i(a,d),h=cC(t,s,d);return iC(t,g.element,h),g},mM=(t,s,a)=>lC(t,s,(i,d)=>uE(t,d,i,a)),H4=(t,s)=>lC(t,s,(a,i)=>{const d=zd(t,i);return iC(t,a,d),a}),Gc=(t,s)=>{const a=Xr(s),i=Ta(a).bind(g=>{const h=C=>Ko(g,C);return h(s)?k.some(s):b1(s,h)}),d=t(s);return i.each(g=>{Ta(a).filter(h=>Ko(h,g)).fold(()=>{Ea(g)},ie)}),d},sh=(t,s)=>{Gc(()=>{kv(t,s,()=>Ne(s,t.getSystem().build))},t.element)},uC=(t,s)=>{Gc(()=>{Ed(t,s,()=>mM(t.element,s,t.getSystem().buildOrPatch))},t.element)},Gf=(t,s,a,i)=>{sC(s);const d=uE(t.element,a,i,t.getSystem().buildOrPatch);Cp(t,d),t.syncComponents()},Kc=(t,s,a)=>{const i=t.getSystem().build(a);qf(t,i,s)},Ci=(t,s,a,i)=>{gm(s),Kc(t,(d,g)=>l1(d,g,a),i)},Yc=(t,s,a,i)=>(s.reuseDom?uC:sh)(t,i),Vu=(t,s,a,i)=>{Kc(t,Aa,i)},ef=(t,s,a,i)=>{Kc(t,$h,i)},Pi=(t,s,a,i)=>{const d=hm(t);be(d,h=>Ko(i.element,h.element)).each(gm)},hm=(t,s)=>t.components(),dE=(t,s,a,i,d)=>{const g=hm(t);return k.from(g[i]).map(h=>(d.fold(()=>gm(h),C=>{(s.reuseDom?Gf:Ci)(t,h,i,C)}),h))};var mE=Object.freeze({__proto__:null,append:Vu,prepend:ef,remove:Pi,replaceAt:dE,replaceBy:(t,s,a,i,d)=>{const g=hm(t);return ke(g,i).bind(h=>dE(t,s,a,h,d))},set:Yc,contents:hm});const co=Qa({fields:[mc("reuseDom",!0)],name:"replacing",apis:mE}),Dv=(t,s,a)=>Ko(s,t.element)&&!Ko(s,a),Xl=hr([W1(Qd(),(t,s)=>{const a=s.event,i=a.originator,d=a.target;return Dv(t,i,d)?(console.warn(Qd()+` did not get interpreted by the desired target. 
Originator: `+Gl(i)+`
Target: `+Gl(d)+`
Check the `+Qd()+" event handlers"),!1):!0})]);var fE=Object.freeze({__proto__:null,events:Xl});const z4=K("alloy-id-"),V4=K("data-alloy-id"),U4=z4(),gE=V4(),dC=(t,s)=>{const a=G(U4+t);return m0(s,a),a},m0=(t,s)=>{Object.defineProperty(t.dom,gE,{value:s,writable:!0})},Jl=t=>{const s=ai(t)?t.dom[gE]:null;return k.from(s)},rh=t=>G(t),W4=It,Ov=t=>{const s=d=>`The component must be in a context to execute: ${d}`+(t?`
`+Gl(t().element)+" is not in context.":""),a=d=>()=>{throw new Error(s(d))},i=d=>()=>{console.warn(s(d))};return{debugInfo:K("fake"),triggerEvent:i("triggerEvent"),triggerFocus:i("triggerFocus"),triggerEscape:i("triggerEscape"),broadcast:i("broadcast"),broadcastOn:i("broadcastOn"),broadcastEvent:i("broadcastEvent"),build:a("build"),buildOrPatch:a("buildOrPatch"),addToWorld:a("addToWorld"),removeFromWorld:a("removeFromWorld"),addToGui:a("addToGui"),removeFromGui:a("removeFromGui"),getByUid:a("getByUid"),getByDom:a("getByDom"),isConnected:ut}},Z4=Ov(),Rv=(t,s)=>{const a=Ne(s,d=>Qi(d.name(),[yt("config"),We("state",yd)])),i=Mr("component.behaviours",Xn(a),t.behaviours).fold(d=>{throw new Error(Mf(d)+`
Complete spec:
`+JSON.stringify(t,null,2))},It);return{list:s,data:mt(i,d=>{const g=d.map(h=>({config:h.config,state:h.state.init(h.config)}));return K(g)})}},ec=t=>t.list,j4=t=>t.data,rl=(t,s)=>{const a={};return wo(t,(i,d)=>{wo(i,(g,h)=>{const C=dn(a,h).getOr([]);a[h]=C.concat([s(d,g)])})}),a},gM=(t,s,a,i)=>{const d={...s};ft(a,O=>{d[O.name()]=O.exhibit(t,i)});const g=rl(d,(O,F)=>({name:O,modification:F})),h=O=>Qn(O,(F,z)=>({...z.modification,...F}),{}),C=Qn(g.classes,(O,F)=>F.modification.concat(O),[]),S=h(g.attributes),T=h(g.styles);return zu({classes:C,attributes:S,styles:T})},Mv=(t,s,a,i)=>{try{const d=st(a,(g,h)=>{const C=g[s],S=h[s],T=i.indexOf(C),O=i.indexOf(S);if(T===-1)throw new Error("The ordering for "+t+" does not have an entry for "+C+`.
Order specified: `+JSON.stringify(i,null,2));if(O===-1)throw new Error("The ordering for "+t+" does not have an entry for "+S+`.
Order specified: `+JSON.stringify(i,null,2));return T<O?-1:O<T?1:0});return gn.value(d)}catch(d){return gn.error([d])}},ah=(t,s)=>({handler:t,purpose:s}),mC=(t,s)=>({cHandler:t,purpose:s}),fC=(t,s)=>mC(vn.apply(void 0,[t.handler].concat(s)),t.purpose),gC=t=>t.cHandler,q4=(t,s)=>({name:t,handler:s}),Bv=(t,s)=>{const a={};return ft(t,i=>{a[i.name()]=i.handlers(s)}),a},hE=(t,s,a)=>{const i={...a,...Bv(s,t)};return rl(i,q4)},Fv=(t,s,a,i)=>{const d=hE(t,a,i);return pE(d,s)},Kf=t=>{const s=R2(t);return(a,i,...d)=>{const g=[a,i].concat(d);s.abort.apply(void 0,g)?i.stop():s.can.apply(void 0,g)&&s.run.apply(void 0,g)}},wp=(t,s)=>gn.error(["The event ("+t+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(Ne(s,a=>a.name),null,2)]),hC=(t,s,a)=>{const i=s[a];return i?Mv("Event: "+a,"name",t,i).map(d=>{const g=Ne(d,h=>h.handler);return bx(g)}):wp(a,t)},pE=(t,s)=>{const a=So(t,(i,d)=>(i.length===1?gn.value(i[0].handler):hC(i,s,d)).map(h=>{const C=Kf(h),S=i.length>1?ro(s[d],T=>$n(i,O=>O.name===T)).join(" > "):i[0].name;return Hm(d,ah(C,S))}));return fc(a,{})},tf="alloy.base.behaviour",Nv=Xn([Ia("dom","dom",Ou(),Xn([yt("tag"),We("styles",{}),We("classes",[]),We("attributes",{}),Hs("value"),Hs("innerHtml")])),yt("components"),yt("uid"),We("events",{}),We("apis",{}),Ia("eventOrder","eventOrder",t2({[el()]:["disabling",tf,"toggling","typeaheadevents"],[Qd()]:[tf,"focusing","keying"],[Rb()]:[tf,"disabling","toggling","representing","tooltipping"],[Um()]:[tf,"representing","streaming","invalidating"],[Wm()]:[tf,"representing","item-events","toolbar-button-events","tooltipping"],[vi()]:["focusing",tf,"item-type-events"],[zm()]:["focusing",tf,"item-type-events"],[Fu()]:["item-type-events","tooltipping"],[Fg()]:["receiving","reflecting","tooltipping"]}),kt()),Hs("domModification")]),pC=t=>Mr("custom.definition",Nv,t),Pv=t=>({...t.dom,uid:t.uid,domChildren:Ne(t.components,s=>s.element)}),f0=t=>t.domModification.fold(()=>zu({}),zu),bC=t=>t.events,g0=(t,s)=>{const a=eo(t),i=eo(s),d=tt(i,a),g=uo(t,(h,C)=>!ko(s,C)||h!==s[C]).t;return{toRemove:d,toSet:g}},vC=(t,s)=>{const{class:a,style:i,...d}=Ud(s),{toSet:g,toRemove:h}=g0(t.attributes,d),C=()=>{ft(h,De=>tr(s,De)),u1(s,g)},S=Qr(s),{toSet:T,toRemove:O}=g0(t.styles,S),F=()=>{ft(O,De=>Ho(s,De)),Cr(s,T)},z=w1(s),q=tt(z,t.classes),Z=tt(t.classes,z),ae=()=>{Du(s,Z),dc(s,q)},ye=De=>{bl(s,De)},ce=()=>{const De=t.domChildren;H4(s,De)},xe=()=>{const De=s,Ke=t.value.getOrUndefined();Ke!==di(De)&&Wl(De,Ke??"")};return C(),ae(),F(),t.innerHtml.fold(ce,ye),xe(),s},G4=t=>{const s=zt.fromTag(t.tag);u1(s,t.attributes),Du(s,t.classes),Cr(s,t.styles),t.innerHtml.each(i=>bl(s,i));const a=t.domChildren;return lb(s,a),t.value.each(i=>{Wl(s,i)}),s},K4=(t,s)=>{try{const a=vC(t,s);return k.some(a)}catch{return k.none()}},yC=t=>t.innerHtml.isSome()&&t.domChildren.length>0,h0=(t,s)=>{const a=d=>fl(d)===t.tag&&!yC(t)&&!oC(d),i=s.filter(a).bind(d=>K4(t,d)).getOrThunk(()=>G4(t));return m0(i,t.uid),i},CC=t=>{const s=dn(t,"behaviours").getOr({});return me(eo(s),a=>{const i=s[a];return Wn(i)?[i.me]:[]})},bE=(t,s)=>Rv(t,s),$v=t=>{const s=CC(t);return bE(t,s)},Y4=(t,s,a)=>{const i=Pv(t),d=f0(t),g={"alloy.base.modification":d},h=s.length>0?gM(a,g,s,i):d;return o4(i,h)},vE=(t,s,a)=>{const i={"alloy.base.behaviour":bC(t)};return Fv(a,t.eventOrder,s,i).getOrDie()},wC=(t,s)=>{const a=()=>De,i=cn(Z4),d=Mu(pC(t)),g=$v(t),h=ec(g),C=j4(g),S=Y4(d,h,C),T=h0(S,s),O=vE(d,h,C),F=cn(d.components),z=Ke=>{i.set(Ke)},q=()=>{i.set(Ov(a))},Z=()=>{const Ke=$l(T),Ye=me(Ke,Kt=>i.get().getByDom(Kt).fold(()=>[],qe));F.set(Ye)},ae=Ke=>{const Ye=C;return(ze(Ye[Ke.name()])?Ye[Ke.name()]:()=>{throw new Error("Could not find "+Ke.name()+" in "+JSON.stringify(t,null,2))})()},ye=Ke=>ze(C[Ke.name()]),ce=()=>d.apis,xe=Ke=>C[Ke]().map(Ye=>Ye.state.readState()).getOr("not enabled"),De={uid:t.uid,getSystem:i.get,config:ae,hasConfigured:ye,spec:t,readState:xe,getApis:ce,connect:z,disconnect:q,element:T,syncComponents:Z,components:F.get,events:O};return De},Sp=(t,s)=>{const a=dn(t,"components").getOr([]);return s.fold(()=>Ne(a,p),i=>Ne(a,(d,g)=>m(d,zd(i,g))))},SC=(t,s)=>{const{events:a,...i}=W4(t),d=Sp(i,s),g={...i,events:{...fE,...a},components:d};return gn.value(wC(g,s))},pr=t=>{const s=zt.fromText(t);return yE({element:s})},yE=t=>{const s=Ri("external.component",Sl([yt("element"),Hs("uid")]),t),a=cn(Ov()),i=C=>{a.set(C)},d=()=>{a.set(Ov(()=>h))},g=s.uid.getOrThunk(()=>rh("external"));m0(s.element,g);const h={uid:g,getSystem:a.get,config:k.none,hasConfigured:ut,connect:i,disconnect:d,getApis:()=>({}),element:s.element,spec:t,readState:K("No state"),syncComponents:ie,components:K([]),events:{}};return vp(h)},CE=rh,l=t=>ko(t,"uid"),m=(t,s)=>_v(t).getOrThunk(()=>{const a=l(t)?t:{uid:CE(""),...t};return SC(a,s).getOrDie()}),p=t=>m(t,k.none()),y=vp;var W=Object.freeze({__proto__:null,block:(t,s,a,i)=>{Hn(t.element,"aria-busy",!0);const d=s.getRoot(t).getOr(t),g=Ft([_n.config({mode:"special",onTab:()=>k.some(!0),onShiftTab:()=>k.some(!0)}),ao.config({})]),h=i(d,g),C=d.getSystem().build(h);co.append(d,y(C)),C.hasConfigured(_n)&&s.focus&&_n.focusIn(C),a.isBlocked()||s.onBlock(t),a.blockWith(()=>co.remove(d,C))},unblock:(t,s,a)=>{tr(t.element,"aria-busy"),a.isBlocked()&&s.onUnblock(t),a.clear()},isBlocked:(t,s,a)=>a.isBlocked()}),ne=[$s("getRoot",k.none),mc("focus",!0),as("onBlock"),as("onUnblock")],Le=Object.freeze({__proto__:null,init:()=>{const t=Vi(),s=a=>{t.set({destroy:a})};return sl({readState:t.isSet,blockWith:s,clear:t.clear,isBlocked:t.isSet})}});const xt=Qa({fields:ne,name:"blocking",apis:W,state:Le});var Pt=Object.freeze({__proto__:null,getCurrent:(t,s,a)=>s.find(t)});const Dn=[yt("find")],it=Qa({fields:Dn,name:"composing",apis:Pt});var ho=Object.freeze({__proto__:null,getCoupled:(t,s,a,i)=>a.getOrCreate(t,s,i),getExistingCoupled:(t,s,a,i)=>a.getExisting(t,s,i)}),un=[xl("others",c2(gn.value,kt()))],Ns=Object.freeze({__proto__:null,init:()=>{const t={},s=(g,h)=>{if(eo(g.others).length===0)throw new Error("Cannot find any known coupled components");return dn(t,h)},a=(g,h,C)=>s(h,C).getOrThunk(()=>{const T=dn(h.others,C).getOrDie("No information found for coupled component: "+C)(g),O=g.getSystem().build(T);return t[C]=O,O}),i=(g,h,C)=>s(h,C).orThunk(()=>(dn(h.others,C).getOrDie("No information found for coupled component: "+C),k.none())),d=K({});return sl({readState:d,getExisting:i,getOrCreate:a})}});const Co=Qa({fields:un,name:"coupling",apis:ho,state:Ns}),ca=["input","button","textarea","select"],kl=(t,s,a)=>{(s.disabled()?Qc:nf)(t,s)},pm=(t,s)=>s.useNative===!0&&St(ca,fl(t.element)),Yf=t=>$a(t.element,"disabled"),ch=t=>{Hn(t.element,"disabled","disabled")},Vs=t=>{tr(t.element,"disabled")},Xc=t=>ha(t.element,"aria-disabled")==="true",Jc=t=>{Hn(t.element,"aria-disabled","true")},Ql=t=>{Hn(t.element,"aria-disabled","false")},Qc=(t,s,a)=>{s.disableClass.each(d=>{Ls(t.element,d)}),(pm(t,s)?ch:Jc)(t),s.onDisabled(t)},nf=(t,s,a)=>{s.disableClass.each(d=>{Sr(t.element,d)}),(pm(t,s)?Vs:Ql)(t),s.onEnabled(t)},wa=(t,s)=>pm(t,s)?Yf(t):Xc(t);var p0=Object.freeze({__proto__:null,enable:nf,disable:Qc,isDisabled:wa,onLoad:kl,set:(t,s,a,i)=>{(i?Qc:nf)(t,s)}}),X4=Object.freeze({__proto__:null,exhibit:(t,s)=>zu({classes:s.disabled()?s.disableClass.toArray():[]}),events:(t,s)=>hr([av(el(),(a,i)=>wa(a,t)),N2(t,s,kl)])}),wE=[$s("disabled",ut),We("useNative",!0),Hs("disableClass"),as("onDisabled"),as("onEnabled")];const xn=Qa({fields:wE,name:"disabling",active:X4,apis:p0}),eu=(t,s,a,i,d)=>{const g=h=>h+"px";return{position:t,left:s.map(g),top:a.map(g),right:i.map(g),bottom:d.map(g)}},J4=t=>({...t,position:k.some(t.position)}),Iv=(t,s)=>{Ka(t,J4(s))},SE=(t,s)=>{const a=t.element;Ls(a,s.transitionClass),Sr(a,s.fadeOutClass),Ls(a,s.fadeInClass),s.onShow(t)},bm=(t,s)=>{const a=t.element;Ls(a,s.transitionClass),Sr(a,s.fadeInClass),Ls(a,s.fadeOutClass),s.onHide(t)},hM=(t,s)=>t.y<s.bottom&&t.bottom>s.y,Q4=(t,s)=>t.y>=s.y,pM=(t,s)=>t.bottom<=s.bottom,xE=(t,s,a)=>({location:"top",leftX:s,topY:a.bounds.y-t.y}),EE=(t,s,a)=>({location:"bottom",leftX:s,bottomY:t.bottom-a.bounds.bottom}),ek=t=>t.box.x-t.win.x,hL=(t,s,a)=>{const i=s.win,d=s.box,g=ek(s);return Wo(t,h=>{switch(h){case"bottom":return pM(d,a.bounds)?k.none():k.some(EE(i,g,a));case"top":return Q4(d,a.bounds)?k.none():k.some(xE(i,g,a));default:return k.none()}}).getOr({location:"no-dock"})},pL=(t,s,a)=>Re(t,i=>{switch(i){case"bottom":return pM(s,a.bounds);case"top":return Q4(s,a.bounds)}}),bL=(t,s)=>{const a=s.optScrollEnv.fold(K(t.bounds.y),i=>i.scrollElmTop+(t.bounds.y-i.currentScrollTop));return Ms(t.bounds.x,a)},vL=(t,s)=>{const a=s.optScrollEnv.fold(K(t.y),i=>t.y+i.currentScrollTop-i.scrollElmTop);return Ms(t.x,a)},tk=(t,s,a)=>a.getInitialPos().map(i=>{const d=bL(i,s);return{box:ba(d.left,d.top,Ya(t),ea(t)),location:i.location}}),xC=(t,s,a,i,d)=>{const g=vL(s,a),h=ba(g.left,g.top,s.width,s.height);i.setInitialPos({style:Qr(t),position:nr(t,"position")||"static",bounds:h,location:d.location})},nk=(t,s,a,i,d)=>{i.getInitialPos().fold(()=>xC(t,s,a,i,d),()=>ie)},bM=(t,s,a)=>a.getInitialPos().bind(i=>{var d;switch(a.clearInitialPos(),i.position){case"static":return k.some({morph:"static"});case"absolute":const g=Df(t).getOr(Oi()),h=sa(g),C=(d=g.dom.scrollTop)!==null&&d!==void 0?d:0;return k.some({morph:"absolute",positionCss:eu("absolute",dn(i.style,"left").map(S=>s.x-h.x),dn(i.style,"top").map(S=>s.y-h.y+C),dn(i.style,"right").map(S=>h.right-s.right),dn(i.style,"bottom").map(S=>h.bottom-s.bottom))});default:return k.none()}}),EX=(t,s,a)=>tk(t,s,a).filter(({box:i})=>pL(a.getModes(),i,s)).bind(({box:i})=>bM(t,i,a)),TE=t=>{switch(t.location){case"top":return k.some({morph:"fixed",positionCss:eu("fixed",k.some(t.leftX),k.some(t.topY),k.none(),k.none())});case"bottom":return k.some({morph:"fixed",positionCss:eu("fixed",k.some(t.leftX),k.none(),k.none(),k.some(t.bottomY))});default:return k.none()}},yL=(t,s,a)=>{const i=sa(t),d=Uc(),g=hL(a.getModes(),{win:d,box:i},s);return g.location==="top"||g.location==="bottom"?(xC(t,i,s,a,g),TE(g)):k.none()},CL=(t,s,a)=>EX(t,s,a).orThunk(()=>s.optScrollEnv.bind(i=>tk(t,s,a)).bind(({box:i,location:d})=>{const g=Uc(),h=ek({win:g,box:i}),C=d==="top"?xE(g,h,s):EE(g,h,s);return TE(C)})),_d=(t,s,a)=>{const i=t.element;return Tn(lr(i,"position"),"fixed")?CL(i,s,a):yL(i,s,a)},vM=(t,s,a)=>{const i=t.element;return tk(i,s,a).bind(({box:d})=>bM(i,d,a))},wL=(t,s,a,i)=>{const d=sa(t),g=Uc(),h=ek({win:g,box:d}),C=i(g,h,s);return C.location==="bottom"||C.location==="top"?(nk(t,d,s,a,C),TE(C)):k.none()},SL=(t,s,a)=>{a.setDocked(!1),ft(["left","right","top","bottom","position"],i=>Ho(t.element,i)),s.onUndocked(t)},yM=(t,s,a,i)=>{const d=i.position==="fixed";a.setDocked(d),Iv(t.element,i),(d?s.onDocked:s.onUndocked)(t)},CM=(t,s,a,i,d=!1)=>{s.contextual.each(g=>{g.lazyContext(t).each(h=>{const C=hM(h,i.bounds);C!==a.isVisible()&&(a.setVisible(C),d&&!C?(Du(t.element,[g.fadeOutClass]),g.onHide(t)):(C?SE:bm)(t,g))})})},ok=(t,s,a,i,d)=>{CM(t,s,a,i,!0),yM(t,s,a,d.positionCss)},xL=(t,s,a,i,d)=>{switch(d.morph){case"static":return SL(t,s,a);case"absolute":return yM(t,s,a,d.positionCss);case"fixed":return ok(t,s,a,i,d)}},EL=(t,s,a)=>{const i=s.lazyViewport(t);CM(t,s,a,i),_d(t,i,a).each(d=>{xL(t,s,a,i,d)})},TL=(t,s,a)=>{const i=t.element;a.setDocked(!1);const d=s.lazyViewport(t);vM(t,d,a).each(g=>{switch(g.morph){case"static":{SL(t,s,a);break}case"absolute":{yM(t,s,a,g.positionCss);break}}}),a.setVisible(!0),s.contextual.each(g=>{dc(i,[g.fadeInClass,g.fadeOutClass,g.transitionClass]),g.onShow(t)}),AE(t,s,a)},AE=(t,s,a)=>{t.getSystem().isConnected()&&EL(t,s,a)},wM=(t,s,a)=>{a.isDocked()&&TL(t,s,a)},b0=t=>(s,a,i)=>{const d=a.lazyViewport(s);wL(s.element,d,i,t).each(h=>{ok(s,a,i,d,h)})},sk=b0(xE),AL=b0(EE);var _L=Object.freeze({__proto__:null,refresh:AE,reset:wM,isDocked:(t,s,a)=>a.isDocked(),getModes:(t,s,a)=>a.getModes(),setModes:(t,s,a,i)=>a.setModes(i),forceDockToTop:sk,forceDockToBottom:AL}),kL=Object.freeze({__proto__:null,events:(t,s)=>hr([Kg(Tl(),(a,i)=>{t.contextual.each(d=>{Wr(a.element,d.transitionClass)&&(dc(a.element,[d.transitionClass,d.fadeInClass]),(s.isVisible()?d.onShown:d.onHidden)(a)),i.stop()})}),rt($g(),(a,i)=>{AE(a,t,s)}),rt(HS(),(a,i)=>{AE(a,t,s)}),rt(Ig(),(a,i)=>{wM(a,t,s)})])}),DL=[Qi("contextual",[ka("fadeInClass"),ka("fadeOutClass"),ka("transitionClass"),ql("lazyContext"),as("onShow"),as("onShown"),as("onHide"),as("onHidden")]),$s("lazyViewport",()=>({bounds:Uc(),optScrollEnv:k.none()})),Bf("modes",["top","bottom"],$r),as("onDocked"),as("onUndocked")],OL=Object.freeze({__proto__:null,init:t=>{const s=cn(!1),a=cn(!0),i=jn(),d=cn(t.modes),g=()=>`docked:  ${s.get()}, visible: ${a.get()}, modes: ${d.get().join(",")}`;return sl({isDocked:s.get,setDocked:s.set,getInitialPos:i.get,setInitialPos:i.set,clearInitialPos:i.clear,isVisible:a.get,setVisible:a.set,getModes:d.get,setModes:d.set,readState:g})}});const Ar=Qa({fields:DL,name:"docking",active:kL,apis:_L,state:OL}),_E=da.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),v0=t=>s=>s.translate(-t.left,-t.top),kE=t=>s=>s.translate(t.left,t.top),ih=t=>(s,a)=>_o(t,(i,d)=>d(i),Ms(s,a)),DE=(t,s,a)=>t.fold(ih([kE(a),v0(s)]),ih([v0(s)]),ih([])),Lv=(t,s,a)=>t.fold(ih([kE(a)]),ih([]),ih([kE(s)])),y0=(t,s,a)=>t.fold(ih([]),ih([v0(a)]),ih([kE(s),v0(a)])),ak=(t,s,a,i,d,g)=>{const h=Lv(t,d,g),C=Lv(s,d,g);return Math.abs(h.left-C.left)<=a&&Math.abs(h.top-C.top)<=i},RL=(t,s,a,i,d,g)=>{const h=Lv(t,d,g),C=Lv(s,d,g),S=Math.abs(h.left-C.left),T=Math.abs(h.top-C.top);return Ms(S,T)},OE=(t,s,a)=>{const i=t.fold((d,g)=>({position:k.some("absolute"),left:k.some(d+"px"),top:k.some(g+"px")}),(d,g)=>({position:k.some("absolute"),left:k.some(d-a.left+"px"),top:k.some(g-a.top+"px")}),(d,g)=>({position:k.some("fixed"),left:k.some(d+"px"),top:k.some(g+"px")}));return{right:k.none(),bottom:k.none(),...i}},ML=(t,s,a)=>t.fold((i,d)=>Xf(i+s,d+a),(i,d)=>Ep(i+s,d+a),(i,d)=>Tp(i+s,d+a)),Qt=(t,s,a,i)=>{const d=(g,h)=>(C,S)=>{const T=g(s,a,i);return h(C.getOr(T.left),S.getOr(T.top))};return t.fold(d(y0,Xf),d(Lv,Ep),d(DE,Tp))},Xf=_E.offset,Ep=_E.absolute,Tp=_E.fixed,EC=(t,s)=>{const a=ha(t,s);return tn(a)?NaN:parseInt(a,10)},ck=(t,s)=>{const a=t.element,i=EC(a,s.leftAttr),d=EC(a,s.topAttr);return isNaN(i)||isNaN(d)?k.none():k.some(Ms(i,d))},BL=(t,s,a)=>{const i=t.element;Hn(i,s.leftAttr,a.left+"px"),Hn(i,s.topAttr,a.top+"px")},EM=(t,s)=>{const a=t.element;tr(a,s.leftAttr),tr(a,s.topAttr)},TM=(t,s,a,i)=>ck(t,s).fold(()=>a,d=>Tp(d.left+i.left,d.top+i.top)),ik=(t,s,a,i,d,g)=>{const h=TM(t,s,a,i),C=s.mustSnap?NL(t,s,h,d,g):PL(t,s,h,d,g),S=DE(h,d,g);return BL(t,s,S),C.fold(()=>({coord:Tp(S.left,S.top),extra:k.none()}),T=>({coord:T.output,extra:T.extra}))},FL=(t,s)=>{EM(t,s)},lk=(t,s,a,i)=>Wo(t,d=>{const g=d.sensor;return ak(s,g,d.range.left,d.range.top,a,i)?k.some({output:Qt(d.output,s,a,i),extra:d.extra}):k.none()}),NL=(t,s,a,i,d)=>{const g=s.getSnapPoints(t);return lk(g,a,i,d).orThunk(()=>_o(g,(S,T)=>{const O=T.sensor,F=RL(a,O,T.range.left,T.range.top,i,d);return S.deltas.fold(()=>({deltas:k.some(F),snap:k.some(T)}),z=>{const q=(F.left+F.top)/2,Z=(z.left+z.top)/2;return q<=Z?{deltas:k.some(F),snap:k.some(T)}:S})},{deltas:k.none(),snap:k.none()}).snap.map(S=>({output:Qt(S.output,a,i,d),extra:S.extra})))},PL=(t,s,a,i,d)=>{const g=s.getSnapPoints(t);return lk(g,a,i,d)},AM=(t,s,a)=>({coord:Qt(t.output,t.output,s,a),extra:t.extra});var $L=Object.freeze({__proto__:null,snapTo:(t,s,a,i)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=ci(t.element),h=Pr(g),C=bb(d),S=AM(i,h,C),T=OE(S.coord,h,C);Ka(d,T)}}});const tc=(t,s)=>u2(t,{},Ne(s,a=>OS(a.name(),"Cannot configure "+a.name()+" for "+t)).concat([Ac("dump",It)])),TC=t=>t.dump,nc=(t,s)=>({...Ft(s),...t.dump}),tu={field:tc,augment:nc,get:TC},RE=(t,s)=>(t.length>0?[Lm("parts",t)]:[]).concat([yt("uid"),We("dom",{}),We("components",[]),sp("originalSpec"),We("debug.sketcher",{})]).concat(s),sf=(t,s,a,i,d)=>{const g=RE(i,d);return Ri(t+" [SpecSchema]",Sl(g.concat(s)),a)},uk=(t,s,a,i)=>{const d=_M(i),g=sf(t,s,d,[],[]);return a(g,d)},dk=(t,s,a,i,d)=>{const g=_M(d),h=nx(a),C=sm(a),S=sf(t,s,g,h,[C]),T=Lf(t,S,a),O=jm(t,S,T.internals());return i(S,O,g,T.externals())},IL=t=>ko(t,"uid"),_M=t=>IL(t)?t:{...t,uid:rh("uid")},kM=t=>t.uid!==void 0,LL=Sl([yt("name"),yt("factory"),yt("configFields"),We("apis",{}),We("extraApis",{})]),HL=Sl([yt("name"),yt("factory"),yt("configFields"),yt("partFields"),We("apis",{}),We("extraApis",{})]),nu=t=>{const s=Ri("Sketcher for "+t.name,LL,t),a=g=>uk(s.name,s.configFields,s.factory,g),i=mt(s.apis,Qm),d=mt(s.extraApis,(g,h)=>YS(g,h));return{name:s.name,configFields:s.configFields,sketch:a,...i,...d}},$i=t=>{const s=Ri("Sketcher for "+t.name,HL,t),a=h=>dk(s.name,s.configFields,s.partFields,s.factory,h),i=ya(s.name,s.partFields),d=mt(s.apis,Qm),g=mt(s.extraApis,(h,C)=>YS(h,C));return{name:s.name,partFields:s.partFields,configFields:s.configFields,sketch:a,parts:i,...d,...g}},vm=nu({name:"Container",factory:t=>{const{attributes:s,...a}=t.dom;return{uid:t.uid,dom:{tag:"div",attributes:{role:"presentation",...s},...a},components:t.components,behaviours:TC(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[We("components",[]),tc("containerBehaviours",[]),We("events",{}),We("domModification",{}),We("eventOrder",{})]}),mk="data-initial-z-index",fk=t=>{ii(t.element).filter(ai).each(s=>{Pa(s,mk).fold(()=>Ho(s,"z-index"),a=>Yn(s,"z-index",a)),tr(s,mk)})},DM=t=>{ii(t.element).filter(ai).each(s=>{lr(s,"z-index").each(a=>{Hn(s,mk,a)}),Yn(s,"z-index",nr(t.element,"z-index"))})},gk=(t,s)=>{t.getSystem().addToGui(s),DM(s)},OM=t=>{fk(t),t.getSystem().removeFromGui(t)},RM=(t,s,a)=>t.getSystem().build(vm.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[s]},events:a}));var zL=Qi("snaps",[yt("getSnapPoints"),as("onSensor"),yt("leftAttr"),yt("topAttr"),We("lazyViewport",Uc),We("mustSnap",!1)]);const hk=[We("useFixed",ut),yt("blockerClass"),We("getTarget",It),We("onDrag",ie),We("repositionTarget",!0),We("onDrop",ie),$s("getBounds",Uc),zL],VL=t=>bs(lr(t,"left"),lr(t,"top"),lr(t,"position"),(s,a,i)=>(i==="fixed"?Tp:Xf)(parseInt(s,10),parseInt(a,10))).getOrThunk(()=>{const s=lc(t);return Ep(s.left,s.top)}),UL=(t,s,a,i,d)=>{const g=d.bounds,h=Lv(s,a,i),C=jo(h.left,g.x,g.x+g.width-d.width),S=jo(h.top,g.y,g.y+g.height-d.height),T=Ep(C,S);return s.fold(()=>{const O=y0(T,a,i);return Xf(O.left,O.top)},K(T),()=>{const O=DE(T,a,i);return Tp(O.left,O.top)})},AC=(t,s,a,i,d,g,h)=>{const C=s.fold(()=>{const S=ML(a,g.left,g.top),T=DE(S,i,d);return Tp(T.left,T.top)},S=>{const T=ik(t,S,a,g,i,d);return T.extra.each(O=>{S.onSensor(t,O)}),T.coord});return UL(t,C,i,d,h)},MM=(t,s,a,i)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=ci(t.element),h=Pr(g),C=bb(d),S=VL(d),T=AC(t,s.snaps,S,h,C,i,a),O=OE(T,h,C);Ka(d,O)}s.onDrag(t,d,i)},pk=(t,s)=>({bounds:t.getBounds(),height:ta(s.element),width:ad(s.element)}),ME=(t,s,a,i,d)=>{const g=a.update(i,d),h=a.getStartData().getOrThunk(()=>pk(s,t));g.each(C=>{MM(t,s,h,C)})},bk=(t,s,a,i)=>{s.each(OM),a.snaps.each(g=>{FL(t,g)});const d=a.getTarget(t.element);i.reset(),a.onDrop(t,d)},BE=t=>(s,a)=>{const i=d=>{a.setStartData(pk(s,d))};return hr([rt($g(),d=>{a.getStartData().each(()=>i(d))}),...t(s,a,i)])},WL=t=>hr([rt(vi(),t.forceDrop),rt(_b(),t.drop),rt(Nf(),(s,a)=>{t.move(a.event)}),rt(Da(),t.delayDrop)]);var vk=Object.freeze({__proto__:null,getData:t=>k.from(Ms(t.x,t.y)),getDelta:(t,s)=>Ms(s.left-t.left,s.top-t.top)});const BM=(t,s,a)=>[rt(vi(),(i,d)=>{if(d.event.raw.button!==0)return;d.stop();const h=()=>bk(i,k.some(T),t,s),C=K_(h,200),S={drop:h,delayDrop:C.schedule,forceDrop:h,move:F=>{C.cancel(),ME(i,t,s,vk,F)}},T=RM(i,t.blockerClass,WL(S));(()=>{a(i),gk(i,T)})()})],FE=[...hk,fr("dragger",{handlers:BE(BM)})],ZL=t=>hr([rt(zm(),t.forceDrop),rt(Rg(),t.drop),rt(np(),t.drop),rt(Vm(),(s,a)=>{t.move(a.event)})]),FM=t=>{const s=t[0];return k.some(Ms(s.clientX,s.clientY))};var yk=Object.freeze({__proto__:null,getData:t=>{const a=t.raw.touches;return a.length===1?FM(a):k.none()},getDelta:(t,s)=>Ms(s.left-t.left,s.top-t.top)});const Ck=(t,s,a)=>{const i=jn(),d=g=>{bk(g,i.get(),t,s),i.clear()};return[rt(zm(),(g,h)=>{h.stop();const C=()=>d(g),S={drop:C,delayDrop:ie,forceDrop:C,move:F=>{ME(g,t,s,yk,F)}},T=RM(g,t.blockerClass,ZL(S));i.set(T),(()=>{a(g),gk(g,T)})()}),rt(Vm(),(g,h)=>{h.stop(),ME(g,t,s,yk,h.event)}),rt(Rg(),(g,h)=>{h.stop(),d(g)}),rt(np(),d)]},jL=[...hk,fr("dragger",{handlers:BE(Ck)})],NM=(t,s,a)=>[...BM(t,s,a),...Ck(t,s,a)],PM=[...hk,fr("dragger",{handlers:BE(NM)})];var qL=Object.freeze({__proto__:null,mouse:FE,touch:jL,mouseOrTouch:PM}),KL=Object.freeze({__proto__:null,init:()=>{let t=k.none(),s=k.none();const a=()=>{t=k.none(),s=k.none()},i=(S,T)=>{const O=t.map(F=>S.getDelta(F,T));return t=k.some(T),O},d=(S,T)=>S.getData(T).bind(O=>i(S,O)),g=S=>{s=k.some(S)},h=()=>s,C=K({});return sl({readState:C,reset:a,update:d,getStartData:h,setStartData:g})}});const C0=xx({branchKey:"mode",branches:qL,name:"dragging",active:{events:(t,s)=>t.dragger.handlers(t,s)},extra:{snap:t=>({sensor:t.sensor,range:t.range,output:t.output,extra:k.from(t.extra)})},state:KL,apis:$L}),$M=["input","textarea"],wk=t=>{const s=fl(t);return St($M,s)},Sk=(t,s)=>{const a=s.getRoot(t).getOr(t.element);Sr(a,s.invalidClass),s.notify.each(i=>{wk(t.element)&&Hn(t.element,"aria-invalid",!1),i.getContainer(t).each(d=>{bl(d,i.validHtml)}),i.onValid(t)})},IM=(t,s,a,i)=>{const d=s.getRoot(t).getOr(t.element);Ls(d,s.invalidClass),s.notify.each(g=>{wk(t.element)&&Hn(t.element,"aria-invalid",!0),g.getContainer(t).each(h=>{bl(h,i)}),g.onInvalid(t,i)})},LM=(t,s,a)=>s.validator.fold(()=>os.pure(gn.value(!0)),i=>i.validate(t)),xk=(t,s,a)=>(s.notify.each(i=>{i.onValidate(t)}),LM(t,s).map(i=>t.getSystem().isConnected()?i.fold(d=>(IM(t,s,a,d),gn.error(d)),d=>(Sk(t,s),gn.value(d))):gn.error("No longer in system")));var HM=Object.freeze({__proto__:null,markValid:Sk,markInvalid:IM,query:LM,run:xk,isInvalid:(t,s)=>{const a=s.getRoot(t).getOr(t.element);return Wr(a,s.invalidClass)}}),Ap=Object.freeze({__proto__:null,events:(t,s)=>t.validator.map(a=>hr([rt(a.onEvent,i=>{xk(i,t,s).get(It)})].concat(a.validateOnLoad?[or(i=>{xk(i,t,s).get(ie)})]:[]))).getOr({})}),zM=[yt("invalidClass"),We("getRoot",k.none),Qi("notify",[We("aria","alert"),We("getContainer",k.none),We("validHtml",""),as("onValid"),as("onInvalid"),as("onValidate")]),Qi("validator",[yt("validate"),We("onEvent","input"),We("validateOnLoad",!0)])];const NE=(t,s,a)=>{s.store.manager.onLoad(t,s,a)},Ek=(t,s,a)=>{s.store.manager.onUnload(t,s,a)};var XL=Object.freeze({__proto__:null,onLoad:NE,onUnload:Ek,setValue:(t,s,a,i)=>{s.store.manager.setValue(t,s,a,i)},getValue:(t,s,a)=>s.store.manager.getValue(t,s,a),getState:(t,s,a)=>a}),QL=Object.freeze({__proto__:null,events:(t,s)=>{const a=t.resetOnDom?[or((i,d)=>{NE(i,t,s)}),Cd((i,d)=>{Ek(i,t,s)})]:[N2(t,s,NE)];return hr(a)}});const VM=()=>{const t=cn(null),s=()=>({mode:"memory",value:t.get()}),a=()=>t.get()===null,i=()=>{t.set(null)};return sl({set:t.set,get:t.get,isNotSet:a,clear:i,readState:s})},e9=()=>sl({readState:ie}),Tk=()=>{const t=cn({}),s=cn({});return sl({readState:()=>({mode:"dataset",dataByValue:t.get(),dataByText:s.get()}),lookup:h=>dn(t.get(),h).orThunk(()=>dn(s.get(),h)),update:h=>{const C=t.get(),S=s.get(),T={},O={};ft(h,F=>{T[F.value]=F,dn(F,"meta").each(z=>{dn(z,"text").each(q=>{O[q]=F})})}),t.set({...C,...T}),s.set({...S,...O})},clear:()=>{t.set({}),s.set({})}})};var Ak=Object.freeze({__proto__:null,memory:VM,dataset:Tk,manual:e9,init:t=>t.store.manager.state(t)});const WM=(t,s,a,i)=>{const d=s.store;a.update([i]),d.setValue(t,i),s.onSetValue(t,i)},_p=(t,s,a)=>{const i=s.store,d=i.getDataKey(t);return a.lookup(d).getOrThunk(()=>i.getFallbackEntry(d))},ZM=(t,s,a)=>{s.store.initialValue.each(d=>{WM(t,s,a,d)})},jM=(t,s,a)=>{a.clear()};var t9=[Hs("initialValue"),yt("getFallbackEntry"),yt("getDataKey"),yt("setValue"),fr("manager",{setValue:WM,getValue:_p,onLoad:ZM,onUnload:jM,state:Tk})];const n9=(t,s,a)=>s.store.getValue(t),kC=(t,s,a,i)=>{s.store.setValue(t,i),s.onSetValue(t,i)},DC=(t,s,a)=>{s.store.initialValue.each(i=>{s.store.setValue(t,i)})};var qM=[yt("getValue"),We("setValue",ie),Hs("initialValue"),fr("manager",{setValue:kC,getValue:n9,onLoad:DC,onUnload:ie,state:yd.init})];const _k=(t,s,a,i)=>{a.set(i),s.onSetValue(t,i)},kp=(t,s,a)=>a.get(),Dp=(t,s,a)=>{s.store.initialValue.each(i=>{a.isNotSet()&&a.set(i)})},o9=(t,s,a)=>{a.clear()};var s9=[Hs("initialValue"),fr("manager",{setValue:_k,getValue:kp,onLoad:Dp,onUnload:o9,state:VM})],GM=[bi("store",{mode:"memory"},pi("mode",{memory:s9,manual:qM,dataset:t9})),as("onSetValue"),We("resetOnDom",!1)];const Xt=Qa({fields:GM,name:"representing",active:QL,apis:XL,extra:{setValueFrom:(t,s)=>{const a=Xt.getValue(s);Xt.setValue(t,a)}},state:Ak}),ym=Qa({fields:zM,name:"invalidating",active:Ap,apis:HM,extra:{validation:t=>s=>{const a=Xt.getValue(s);return os.pure(t(a))}}});var KM=Object.freeze({__proto__:null,exhibit:(t,s)=>zu({classes:[],styles:s.useFixed()?{}:{position:"relative"}})});const PE=da.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),kk=(t,s,a,i,d,g)=>{const h=s.rect,C=h.x-a,S=h.y-i,T=h.width,O=h.height,F=d-(C+T),z=g-(S+O),q=k.some(C),Z=k.some(S),ae=k.some(F),ye=k.some(z),ce=k.none();return qb(s.direction,()=>eu(t,q,Z,ce,ce),()=>eu(t,ce,Z,ae,ce),()=>eu(t,q,ce,ce,ye),()=>eu(t,ce,ce,ae,ye),()=>eu(t,q,Z,ce,ce),()=>eu(t,q,ce,ce,ye),()=>eu(t,q,Z,ce,ce),()=>eu(t,ce,Z,ae,ce))},$E=(t,s)=>t.fold(()=>{const a=s.rect;return eu("absolute",k.some(a.x),k.some(a.y),k.none(),k.none())},(a,i,d,g)=>kk("absolute",s,a,i,d,g),(a,i,d,g)=>kk("fixed",s,a,i,d,g)),IE=(t,s)=>{const a=vn(Kd,s),i=t.fold(a,a,()=>{const h=Pr();return Kd(s).translate(-h.left,-h.top)}),d=ad(s),g=ta(s);return ba(i.left,i.top,d,g)},r9=(t,s)=>s.fold(()=>t.fold(Uc,Uc,ba),a=>t.fold(K(a),K(a),()=>{const i=YM(t,a.x,a.y);return ba(i.left,i.top,a.width,a.height)})),YM=(t,s,a)=>{const i=Ms(s,a),d=()=>{const g=Pr();return i.translate(-g.left,-g.top)};return t.fold(K(i),K(i),d)},a9=(t,s,a,i)=>t.fold(s,a,i);PE.none;const LE=PE.relative,Dk=PE.fixed,HE=(t,s)=>({anchorBox:t,origin:s}),XM=(t,s)=>HE(t,s),zE=da.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),JM=(t,s)=>{const{x:a,y:i,right:d,bottom:g}=s,{x:h,y:C,right:S,bottom:T,width:O,height:F}=t,z=h>=a&&h<=d,q=C>=i&&C<=g,Z=z&&q,ae=S<=d&&S>=a,ye=T<=g&&T>=i,ce=ae&&ye,xe=Math.min(O,h>=a?d-h:S-a),De=Math.min(F,C>=i?g-C:T-i);return{originInBounds:Z,sizeInBounds:ce,visibleW:xe,visibleH:De}},QM=(t,s)=>{const{x:a,y:i,right:d,bottom:g}=s,{x:h,y:C,width:S,height:T}=t,O=Math.max(a,d-S),F=Math.max(i,g-T),z=jo(h,a,O),q=jo(C,i,F),Z=Math.min(z+S,d)-z,ae=Math.min(q+T,g)-q;return ba(z,q,Z,ae)},eB=(t,s,a)=>{const i=K(s.bottom-a.y),d=K(a.bottom-s.y),g=rx(t,d,d,i),h=K(s.right-a.x),C=K(a.right-s.x);return{maxWidth:y2(t,C,C,h),maxHeight:g}},tB=(t,s,a,i)=>{const d=t.bubble,g=d.offset,h=cx(i,t.restriction,g),C=t.x+g.left,S=t.y+g.top,T=ba(C,S,s,a),{originInBounds:O,sizeInBounds:F,visibleW:z,visibleH:q}=JM(T,h),Z=O&&F,ae=Z?T:QM(T,h),ye=ae.width>0&&ae.height>0,{maxWidth:ce,maxHeight:xe}=eB(t.direction,ae,i),De={rect:ae,maxHeight:xe,maxWidth:ce,direction:t.direction,placement:t.placement,classes:{on:d.classesOn,off:d.classesOff},layout:t.label,testY:S};return Z||t.alwaysFit?zE.fit(De):zE.nofit(De,z,q,ye)},c9=(t,s,a,i,d,g)=>{const h=i.width,C=i.height,S=(O,F,z,q,Z)=>{const ae=O(a,i,d,t,g),ye=tB(ae,h,C,g);return ye.fold(K(ye),(ce,xe,De,Ke)=>(Z===Ke?De>q||xe>z:!Z&&Ke)?ye:zE.nofit(F,z,q,Z))};return _o(s,(O,F)=>{const z=vn(S,F);return O.fold(K(O),z)},zE.nofit({rect:a,maxHeight:i.height,maxWidth:i.width,direction:zf(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:a.y},-1,-1,!1)).fold(It,It)},VE=["top","bottom","right","left"],UE="data-alloy-transition-timer",i9=(t,s)=>Hh(t,s.classes),l9=(t,s,a)=>a.exists(i=>{const d=t.mode;return d==="all"?!0:i[d]!==s[d]}),u9=(t,s)=>{const a=i=>parseFloat(i).toFixed(3);return ks(s,(i,d)=>{const g=t[d].map(a),h=i.map(a);return!nn(g,h)}).isSome()},nB=t=>{const s=g=>{const C=nr(t,g).split(/\s*,\s*/);return ro(C,Pc)},a=g=>{if(pe(g)&&/^[\d.]+/.test(g)){const h=parseFloat(g);return ri(g,"ms")?h:h*1e3}else return 0},i=s("transition-delay"),d=s("transition-duration");return _o(d,(g,h,C)=>{const S=a(i[C])+a(h);return Math.max(g,S)},0)},d9=(t,s)=>{const a=er(),i=er();let d;const g=T=>{var O;const F=(O=T.raw.pseudoElement)!==null&&O!==void 0?O:"";return Ko(T.target,t)&&Ba(F)&&St(VE,T.raw.propertyName)},h=T=>{if(fo(T)||g(T)){a.clear(),i.clear();const O=T==null?void 0:T.raw.type;(fo(O)||O===Tl())&&(clearTimeout(d),tr(t,UE),dc(t,s.classes))}},C=_s(t,Bg(),T=>{g(T)&&(C.unbind(),a.set(_s(t,Tl(),h)),i.set(_s(t,_1(),h)))}),S=nB(t);window.requestAnimationFrame(()=>{d=setTimeout(h,S+17),Hn(t,UE,d)})},m9=(t,s)=>{Du(t,s.classes),Pa(t,UE).each(a=>{clearTimeout(parseInt(a,10)),tr(t,UE)}),d9(t,s)},oB=(t,s,a,i,d,g)=>{const h=l9(i,d,g);if(h||i9(t,i)){Yn(t,"position",a.position);const C=IE(s,t),S=$E(s,{...d,rect:C}),T=In(VE,O=>S[O]);u9(a,T)&&(Ka(t,T),h&&m9(t,i),vl(t))}else dc(t,i.classes)},OC=t=>({width:Math.ceil(ad(t)),height:ta(t)}),f9=(t,s,a,i)=>{Ho(s,"max-height"),Ho(s,"max-width");const d=OC(s);return c9(s,i.preference,t,d,a,i.bounds)},RC=(t,s)=>{const a=s.classes;dc(t,a.off),Du(t,a.on)},Ok=(t,s,a)=>{const i=a.maxHeightFunction;i(t,s.maxHeight)},sB=(t,s,a)=>{const i=a.maxWidthFunction;i(t,s.maxWidth)},rB=(t,s,a)=>{const i=$E(a.origin,s);a.transition.each(d=>{oB(t,a.origin,i,d,s,a.lastPlacement)}),Iv(t,i)},g9=(t,s)=>{Qb(t,s.placement)},aB=(t,s,a)=>t[s]===void 0?a:t[s],cB=(t,s,a,i,d,g,h,C)=>{const S=aB(h,"maxHeightFunction",gx()),T=aB(h,"maxWidthFunction",ie),O=t.anchorBox,F=t.origin,z={bounds:r9(F,g),origin:F,preference:i,maxHeightFunction:S,maxWidthFunction:T,lastPlacement:d,transition:C};return h9(O,s,a,z)},h9=(t,s,a,i)=>{const d=f9(t,s,a,i);return rB(s,d,i),g9(s,d),RC(s,d),Ok(s,d,i),sB(s,d,i),{layout:d.layout,placement:d.placement}},MC=It,w0=()=>Qi("layouts",[yt("onLtr"),yt("onRtl"),Hs("onBottomLtr"),Hs("onBottomRtl")]),WE=(t,s,a,i,d,g,h)=>{const C=h.map(hx).getOr(!1),S=s.layouts.map(q=>q.onLtr(t)),T=s.layouts.map(q=>q.onRtl(t)),O=C?s.layouts.bind(q=>q.onBottomLtr.map(Z=>Z(t))).or(S).getOr(d):S.getOr(a),F=C?s.layouts.bind(q=>q.onBottomRtl.map(Z=>Z(t))).or(T).getOr(g):T.getOr(i);return h1(O,F)(t)},iB=(t,s,a)=>{const i=s.hotspot,d=IE(a,i.element),g=WE(t.element,s,Ug(),T2(),Jb(),mx(),k.some(s.hotspot.element));return k.some(MC({anchorBox:d,bubble:s.bubble.getOr(ip()),overrides:s.overrides,layouts:g}))};var ZE=[yt("hotspot"),Hs("bubble"),We("overrides",{}),w0(),fr("placement",iB)];const Rk=(t,s,a)=>{const i=YM(a,s.x,s.y),d=ba(i.left,i.top,s.width,s.height),g=WE(t.element,s,Xb(),dx(),Xb(),dx(),k.none());return k.some(MC({anchorBox:d,bubble:s.bubble,overrides:s.overrides,layouts:g}))};var Mk=[yt("x"),yt("y"),We("height",0),We("width",0),We("bubble",ip()),We("overrides",{}),w0(),fr("placement",Rk)];const lB=da.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),p9=t=>t.fold(It,(s,a,i)=>s.translate(-a,-i)),b9=t=>t.fold(It,It),uB=t=>_o(t,(s,a)=>s.translate(a.left,a.top),Ms(0,0)),dB=t=>{const s=Ne(t,p9);return uB(s)},Bk=t=>{const s=Ne(t,b9);return uB(s)},v9=lB.screen,y9=lB.absolute,C9=(t,s,a)=>{const i=pg(a.root).dom,d=g=>{const h=ci(g),C=ci(t.element);return Ko(h,C)};return k.from(i.frameElement).map(zt.fromDom).filter(d).map(lc)},mB=(t,s,a)=>{const i=ci(t.element),d=Pr(i),g=C9(t,s,a).getOr(d);return y9(g,d.left,d.top)},Fk=(t,s,a,i)=>{const d=v9(Ms(t,s));return k.some(qy(d,a,i))},fB=(t,s,a,i,d)=>t.map(g=>{const h=[s,g.point],C=a9(i,()=>Bk(h),()=>Bk(h),()=>dB(h)),S=I_(C.left,C.top,g.width,g.height),T=a.showAbove?Jb():Ug(),O=a.showAbove?mx():T2(),F=WE(d,a,T,O,T,O,k.none());return MC({anchorBox:S,bubble:a.bubble.getOr(ip()),overrides:a.overrides,layouts:F})}),gB=(t,s,a)=>{const i=mB(t,a,s);return s.node.filter(ds).bind(d=>{const g=d.dom.getBoundingClientRect(),h=Fk(g.left,g.top,g.width,g.height),C=s.node.getOr(t.element);return fB(h,i,s,a,C)})};var w9=[yt("node"),yt("root"),Hs("bubble"),w0(),We("overrides",{}),We("showAbove",!1),fr("placement",gB)];const jE=(t,s)=>({element:t,offset:s}),S9=(t,s)=>{const a=$l(t);if(a.length===0)return jE(t,s);if(s<a.length)return jE(a[s],0);{const i=a[a.length-1],d=Hd(i)?Lh(i).length:$l(i).length;return jE(i,d)}},hB=(t,s)=>Hd(t)?jE(t,s):S9(t,s),Nk=t=>t.foffset!==void 0,lh=(t,s)=>s.getSelection.getOrThunk(()=>()=>Nm(t))().map(i=>{if(Nk(i)){const d=hB(i.start,i.soffset),g=hB(i.finish,i.foffset);return wl.range(d.element,d.offset,g.element,g.offset)}else return i}),x9=(t,s,a)=>{const i=pg(s.root).dom,d=mB(t,a,s),g=lh(i,s).bind(S=>{if(Nk(S))return Wh(i,wl.exactFromRange(S)).orThunk(()=>{const O=zt.fromText(Bl);Vd(S.start,O);const F=kf(i,wl.exact(O,0,O,1));return Gi(O),F}).bind(O=>Fk(O.left,O.top,O.width,O.height));{const T=mt(S,F=>F.dom.getBoundingClientRect()),O={left:Math.min(T.firstCell.left,T.lastCell.left),right:Math.max(T.firstCell.right,T.lastCell.right),top:Math.min(T.firstCell.top,T.lastCell.top),bottom:Math.max(T.firstCell.bottom,T.lastCell.bottom)};return Fk(O.left,O.top,O.right-O.left,O.bottom-O.top)}}),C=lh(i,s).bind(S=>Nk(S)?ai(S.start)?k.some(S.start):Su(S.start):k.some(S.firstCell)).getOr(t.element);return fB(g,d,s,a,C)};var E9=[Hs("getSelection"),yt("root"),Hs("bubble"),w0(),We("overrides",{}),We("showAbove",!1),fr("placement",x9)];const Jf="link-layout",Pk=t=>t.x+t.width,pB=(t,s)=>t.x-s.width,uh=(t,s)=>t.y-s.height+t.height,bB=t=>t.y,vB=(t,s,a)=>ra(Pk(t),bB(t),a.southeast(),zf(),"southeast",gc(t,{left:0,top:2}),Jf),Uu=(t,s,a)=>ra(pB(t,s),bB(t),a.southwest(),Vg(),"southwest",gc(t,{right:1,top:2}),Jf),$k=(t,s,a)=>ra(Pk(t),uh(t,s),a.northeast(),C2(),"northeast",gc(t,{left:0,bottom:3}),Jf),Ik=(t,s,a)=>ra(pB(t,s),uh(t,s),a.northwest(),w2(),"northwest",gc(t,{right:1,bottom:3}),Jf),Lk=()=>[vB,Uu,$k,Ik],yB=()=>[Uu,vB,Ik,$k],qE=(t,s,a)=>{const i=IE(a,s.item.element),d=WE(t.element,s,Lk(),yB(),Lk(),yB(),k.none());return k.some(MC({anchorBox:i,bubble:ip(),overrides:s.overrides,layouts:d}))};var CB=[yt("item"),w0(),We("overrides",{}),fr("placement",qE)],T9=pi("type",{selection:E9,node:w9,hotspot:ZE,submenu:CB,makeshift:Mk});const A9=[Mi("classes",$r),El("mode","all",["all","layout","placement"])],GE=[We("useFixed",ut),Hs("getBounds")],Hk=[xl("anchor",T9),Qi("transition",A9)],wB=()=>{const t=document.documentElement;return Dk(0,0,t.clientWidth,t.clientHeight)},SB=t=>{const s=lc(t.element),a=t.element.dom.getBoundingClientRect();return LE(s.left,s.top,a.width,a.height)},xB=(t,s,a,i,d,g)=>{const h=XM(s.anchorBox,t);return cB(h,i.element,s.bubble,s.layouts,d,a,s.overrides,g)},_9=(t,s,a,i,d)=>{const g=k.none();KE(t,s,a,i,d,g)},KE=(t,s,a,i,d,g)=>{const h=Ri("placement.info",Xn(Hk),d),C=h.anchor,S=i.element,T=a.get(i.uid);Gc(()=>{Yn(S,"position","fixed");const O=lr(S,"visibility");Yn(S,"visibility","hidden");const F=s.useFixed()?wB():SB(t);C.placement(t,C,F).each(z=>{const q=g.orThunk(()=>s.getBounds.map(Cs)),Z=xB(F,z,q,i,T,h.transition);a.set(i.uid,Z)}),O.fold(()=>{Ho(S,"visibility")},z=>{Yn(S,"visibility",z)}),lr(S,"left").isNone()&&lr(S,"top").isNone()&&lr(S,"right").isNone()&&lr(S,"bottom").isNone()&&Tn(lr(S,"position"),"fixed")&&Ho(S,"position")},S)};var D9=Object.freeze({__proto__:null,position:_9,positionWithinBounds:KE,getMode:(t,s,a)=>s.useFixed()?"fixed":"absolute",reset:(t,s,a,i)=>{const d=i.element;ft(["position","left","right","top","bottom"],g=>Ho(d,g)),ev(d),a.clear(i.uid)}}),zk=Object.freeze({__proto__:null,init:()=>{let t={};return sl({readState:()=>t,clear:d=>{Wn(d)?delete t[d]:t={}},set:(d,g)=>{t[d]=g},get:d=>dn(t,d)})}});const wi=Qa({fields:GE,name:"positioning",active:KM,apis:D9,state:zk}),BC=(t,s)=>s.universal?t:ro(t,a=>St(s.channels,a));var EB=Object.freeze({__proto__:null,events:t=>hr([rt(Fg(),(s,a)=>{const i=t.channels,d=eo(i),g=a,h=BC(d,g);ft(h,C=>{const S=i[C],T=S.schema,O=Ri("channel["+C+`] data
Receiver: `+Gl(s.element),T,g.data);S.onReceive(s,O)})})])}),TB=[xl("channels",c2(gn.value,Sl([M1("onReceive"),We("schema",kt())])))];const ou=Qa({fields:TB,name:"receiving",active:EB});var O9=Object.freeze({__proto__:null,events:(t,s)=>{const a=(i,d)=>{t.updateState.each(g=>{const h=g(i,d);s.set(h)}),t.renderComponents.each(g=>{const h=g(d,s.get());(t.reuseDom?uC:sh)(i,h)})};return hr([rt(Fg(),(i,d)=>{const g=d;if(!g.universal){const h=t.channel;St(g.channels,h)&&a(i,g.data)}}),or((i,d)=>{t.initialData.each(g=>{a(i,g)})})])}}),Uk=Object.freeze({__proto__:null,getState:(t,s,a)=>a}),AB=[yt("channel"),Hs("renderComponents"),Hs("updateState"),Hs("initialData"),mc("reuseDom",!0)],Wk=Object.freeze({__proto__:null,init:()=>{const t=cn(k.none()),s=()=>t.set(k.none());return{readState:()=>t.get().getOr("none"),get:t.get,set:t.set,clear:s}}});const su=Qa({fields:AB,name:"reflecting",active:O9,apis:Uk,state:Wk}),Zk=(t,s,a,i)=>{a.get().each(h=>{aC(t)});const d=s.getAttachPoint(t);fm(d,t);const g=t.getSystem().build(i);return fm(t,g),a.set(g),g},_B=(t,s,a,i)=>{const d=Zk(t,s,a,i);return s.onOpen(t,d),d},M9=(t,s,a,i)=>a.get().map(()=>Zk(t,s,a,i)),B9=(t,s,a,i,d)=>{RB(t,s),_B(t,s,a,i),d(),MB(t,s)},jk=(t,s,a)=>{a.get().each(i=>{aC(t),gm(t),s.onClose(t,i),a.clear()})},kB=(t,s,a)=>a.isOpen(),F9=(t,s,a,i)=>kB(t,s,a)&&a.get().exists(d=>s.isPartOf(t,d,i)),qk=(t,s,a)=>a.get(),DB=(t,s,a,i)=>{lr(t.element,s).fold(()=>{tr(t.element,a)},d=>{Hn(t.element,a,d)}),Yn(t.element,s,i)},OB=(t,s,a)=>{Pa(t.element,a).fold(()=>Ho(t.element,s),i=>Yn(t.element,s,i))},RB=(t,s,a)=>{const i=s.getAttachPoint(t);Yn(t.element,"position",wi.getMode(i)),DB(t,"visibility",s.cloakVisibilityAttr,"hidden")},Gk=t=>$n(["top","left","right","bottom"],s=>lr(t,s).isSome()),MB=(t,s,a)=>{Gk(t.element)||Ho(t.element,"position"),OB(t,"visibility",s.cloakVisibilityAttr)};var N9=Object.freeze({__proto__:null,cloak:RB,decloak:MB,open:_B,openWhileCloaked:B9,close:jk,isOpen:kB,isPartOf:F9,getState:qk,setContent:M9}),P9=Object.freeze({__proto__:null,events:(t,s)=>hr([rt(Db(),(a,i)=>{jk(a,t,s)})])}),$9=[as("onOpen"),as("onClose"),yt("isPartOf"),yt("getAttachPoint"),We("cloakVisibilityAttr","data-precloak-visibility")],Kk=Object.freeze({__proto__:null,init:()=>{const t=jn(),s=K("not-implemented");return sl({readState:s,isOpen:t.isSet,clear:t.clear,set:t.set,get:t.get})}});const ms=Qa({fields:$9,name:"sandboxing",active:P9,apis:N9,state:Kk}),Op=(t,s)=>s.getAnimationRoot.fold(()=>t.element,a=>a(t)),dh=t=>t.dimension.property,S0=(t,s)=>t.dimension.getDimension(s),YE=(t,s)=>{const a=Op(t,s);dc(a,[s.shrinkingClass,s.growingClass])},Yk=(t,s)=>{Sr(t.element,s.openClass),Ls(t.element,s.closedClass),Yn(t.element,dh(s),"0px"),vl(t.element)},Xk=(t,s)=>{Sr(t.element,s.closedClass),Ls(t.element,s.openClass),Ho(t.element,dh(s))},BB=(t,s,a,i)=>{a.setCollapsed(),Yn(t.element,dh(s),S0(s,t.element)),YE(t,s),Yk(t,s),s.onStartShrink(t),s.onShrunk(t)},FB=(t,s,a,i)=>{const d=i.getOrThunk(()=>S0(s,t.element));a.setCollapsed(),Yn(t.element,dh(s),d),vl(t.element);const g=Op(t,s);Sr(g,s.growingClass),Ls(g,s.shrinkingClass),Yk(t,s),s.onStartShrink(t)},NB=(t,s,a)=>{const i=S0(s,t.element);(i==="0px"?BB:FB)(t,s,a,k.some(i))},PB=(t,s,a)=>{const i=Op(t,s),d=Wr(i,s.shrinkingClass),g=S0(s,t.element);Xk(t,s);const h=S0(s,t.element);(d?()=>{Yn(t.element,dh(s),g),vl(t.element)}:()=>{Yk(t,s)})(),Sr(i,s.shrinkingClass),Ls(i,s.growingClass),Xk(t,s),Yn(t.element,dh(s),h),a.setExpanded(),s.onStartGrow(t)},Jk=(t,s,a)=>{if(a.isExpanded()){Ho(t.element,dh(s));const i=S0(s,t.element);Yn(t.element,dh(s),i)}},x0=(t,s,a)=>{a.isExpanded()||PB(t,s,a)},L9=(t,s,a)=>{a.isExpanded()&&NB(t,s,a)},H9=(t,s,a)=>{a.isExpanded()&&BB(t,s,a)},Qk=(t,s,a)=>a.isExpanded(),$B=(t,s,a)=>a.isCollapsed(),IB=(t,s,a)=>{const i=Op(t,s);return Wr(i,s.growingClass)===!0},Hv=(t,s,a)=>{const i=Op(t,s);return Wr(i,s.shrinkingClass)===!0};var LB=Object.freeze({__proto__:null,refresh:Jk,grow:x0,shrink:L9,immediateShrink:H9,hasGrown:Qk,hasShrunk:$B,isGrowing:IB,isShrinking:Hv,isTransitioning:(t,s,a)=>IB(t,s)||Hv(t,s),toggleGrow:(t,s,a)=>{(a.isExpanded()?NB:PB)(t,s,a)},disableTransitions:YE,immediateGrow:(t,s,a)=>{a.isExpanded()||(Xk(t,s),Yn(t.element,dh(s),S0(s,t.element)),YE(t,s),a.setExpanded(),s.onStartGrow(t),s.onGrown(t))}}),HB=Object.freeze({__proto__:null,exhibit:(t,s,a)=>{const i=s.expanded;return zu(i?{classes:[s.openClass],styles:{}}:{classes:[s.closedClass],styles:Hm(s.dimension.property,"0px")})},events:(t,s)=>hr([Kg(Tl(),(a,i)=>{i.event.raw.propertyName===t.dimension.property&&(YE(a,t),s.isExpanded()&&Ho(a.element,t.dimension.property),(s.isExpanded()?t.onGrown:t.onShrunk)(a))})])}),zv=[yt("closedClass"),yt("openClass"),yt("shrinkingClass"),yt("growingClass"),Hs("getAnimationRoot"),as("onShrunk"),as("onStartShrink"),as("onGrown"),as("onStartGrow"),We("expanded",!1),xl("dimension",pi("property",{width:[fr("property","width"),fr("getDimension",t=>Ya(t)+"px")],height:[fr("property","height"),fr("getDimension",t=>ea(t)+"px")]}))],e3=Object.freeze({__proto__:null,init:t=>{const s=cn(t.expanded),a=()=>"expanded: "+s.get();return sl({isExpanded:()=>s.get()===!0,isCollapsed:()=>s.get()===!1,setCollapsed:vn(s.set,!1),setExpanded:vn(s.set,!0),readState:a})}});const al=Qa({fields:zv,name:"sliding",active:HB,apis:LB,state:e3});var XE=Object.freeze({__proto__:null,events:(t,s)=>{const i=t.stream.streams.setup(t,s);return hr([rt(t.event,i),Cd(()=>s.cancel())].concat(t.cancelEvent.map(d=>[rt(d,()=>s.cancel())]).getOr([])))}});const t3=t=>{const s=cn(null);return sl({readState:()=>({timer:s.get()!==null?"set":"unset"}),setTimer:g=>{s.set(g)},cancel:()=>{const g=s.get();g!==null&&g.cancel()}})};var n3=Object.freeze({__proto__:null,throttle:t3,init:t=>t.stream.streams.state(t)});const U9=(t,s)=>{const a=t.stream,i=qa(t.onStream,a.delay);return s.setTimer(i),(d,g)=>{i.throttle(d,g),a.stopEvent&&g.stop()}};var W9=[xl("stream",pi("mode",{throttle:[yt("delay"),We("stopEvent",!0),fr("streams",{setup:U9,state:t3})]})),We("event","input"),Hs("cancelEvent"),M1("onStream")];const o3=Qa({fields:W9,name:"streaming",active:XE,state:n3});var FC=Object.freeze({__proto__:null,exhibit:(t,s)=>zu({attributes:A1([{key:s.tabAttr,value:"true"}])})}),Z9=[We("tabAttr","data-alloy-tabstop")];const Ys=Qa({fields:Z9,name:"tabstopping",active:FC}),s3=(t,s,a)=>{const i=s.aria;i.update(t,i,a.get())},j9=(t,s,a)=>{s.toggleClass.each(i=>{a.get()?Ls(t.element,i):Sr(t.element,i)})},E0=(t,s,a,i)=>{const d=a.get();a.set(i),j9(t,s,a),s3(t,s,a),d!==i&&s.onToggled(t,i)},JE=(t,s,a)=>{E0(t,s,a,!a.get())},q9=(t,s,a)=>{E0(t,s,a,!0)},VB=(t,s,a)=>{E0(t,s,a,!1)},UB=(t,s,a)=>a.get(),WB=(t,s,a)=>{E0(t,s,a,s.selected)};var ZB=Object.freeze({__proto__:null,onLoad:WB,toggle:JE,isOn:UB,on:q9,off:VB,set:E0}),K9=Object.freeze({__proto__:null,exhibit:()=>zu({}),events:(t,s)=>{const a=s4(t,s,JE),i=N2(t,s,WB);return hr(Oe([t.toggleOnExecute?[a]:[],[i]]))}});const Y9=(t,s,a)=>{Hn(t.element,"aria-pressed",a),s.syncWithExpanded&&r3(t,s,a)},X9=(t,s,a)=>{Hn(t.element,"aria-selected",a)},J9=(t,s,a)=>{Hn(t.element,"aria-checked",a)},r3=(t,s,a)=>{Hn(t.element,"aria-expanded",a)};var jB=[We("selected",!1),Hs("toggleClass"),We("toggleOnExecute",!0),as("onToggled"),bi("aria",{mode:"none"},pi("mode",{pressed:[We("syncWithExpanded",!1),fr("update",Y9)],checked:[fr("update",J9)],expanded:[fr("update",r3)],selected:[fr("update",X9)],none:[fr("update",ie)]}))];const Jo=Qa({fields:jB,name:"toggling",active:K9,apis:ZB,state:$2(!1)}),a3=G("tooltip.exclusive"),Vv=G("tooltip.show"),NC=G("tooltip.hide"),PC=G("tooltip.immediateHide"),Uv=G("tooltip.immediateShow"),c3=(t,s,a)=>{t.getSystem().broadcastOn([a3],{})};var qB=Object.freeze({__proto__:null,hideAllExclusive:c3,immediateOpenClose:(t,s,a,i)=>$o(t,i?Uv:PC),isEnabled:(t,s,a)=>a.isEnabled(),setComponents:(t,s,a,i)=>{a.getTooltip().each(d=>{d.getSystem().isConnected()&&co.set(d,i)})},setEnabled:(t,s,a,i)=>a.setEnabled(i)}),i3=Object.freeze({__proto__:null,events:(t,s)=>{const a=h=>{s.getTooltip().each(C=>{C.getSystem().isConnected()&&(gm(C),t.onHide(h,C),s.clearTooltip())}),s.clearTimer()},i=h=>{if(!s.isShowing()&&s.isEnabled()){c3(h);const C=t.lazySink(h).getOrDie(),S=h.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:hr(t.mode==="normal"?[rt(Fu(),T=>{$o(h,Vv)}),rt(Da(),T=>{$o(h,NC)})]:[]),behaviours:Ft([co.config({})])});s.setTooltip(S),fm(C,S),t.onShow(h,S),wi.position(C,S,{anchor:t.anchor(h)})}},d=h=>{s.getTooltip().each(C=>{const S=t.lazySink(h).getOrDie();wi.position(S,C,{anchor:t.anchor(h)})})},g=()=>{switch(t.mode){case"normal":return[rt(Nu(),h=>{$o(h,Uv)}),rt(Pu(),h=>{$o(h,PC)}),rt(Fu(),h=>{$o(h,Vv)}),rt(Da(),h=>{$o(h,NC)})];case"follow-highlight":return[rt(Hg(),(h,C)=>{$o(h,Vv)}),rt(Bb(),h=>{$o(h,NC)})];case"children-normal":return[rt(Nu(),(h,C)=>{Vr(h.element).each(S=>{Rs(C.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{$o(h,Uv)},T=>{s.isShowing()&&(t.onShow(h,T),d(h))})})}),rt(Pu(),h=>{Vr(h.element).fold(()=>{$o(h,PC)},ie)}),rt(Fu(),h=>{Bs(h.element,"[data-mce-tooltip]:hover").each(C=>{s.getTooltip().fold(()=>{$o(h,Vv)},S=>{s.isShowing()&&(t.onShow(h,S),d(h))})})}),rt(Da(),h=>{Bs(h.element,"[data-mce-tooltip]:hover").fold(()=>{$o(h,NC)},ie)})];default:return[rt(Nu(),(h,C)=>{Vr(h.element).each(S=>{Rs(C.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{$o(h,Uv)},T=>{s.isShowing()&&(t.onShow(h,T),d(h))})})}),rt(Pu(),h=>{Vr(h.element).fold(()=>{$o(h,PC)},ie)})]}};return hr(Oe([[Cx(h=>{t.onSetup(h)}),rt(Vv,h=>{s.resetTimer(()=>{i(h)},t.delayForShow())}),rt(NC,h=>{s.resetTimer(()=>{a(h)},t.delayForHide())}),rt(Uv,h=>{s.resetTimer(()=>{i(h)},0)}),rt(PC,h=>{s.resetTimer(()=>{a(h)},0)}),rt(Fg(),(h,C)=>{const S=C;S.universal||(St(S.channels,a3)||St(S.channels,q1()))&&(S.data.closedTooltip&&s.isShowing()&&S.data.closedTooltip(),a(h))}),Cd(h=>{a(h)})],g()]))}}),KB=[yt("lazySink"),yt("tooltipDom"),We("exclusive",!0),We("tooltipComponents",[]),$s("delayForShow",K(300)),$s("delayForHide",K(100)),$s("onSetup",ie),El("mode","normal",["normal","follow-highlight","children-keyboard-focus","children-normal"]),We("anchor",t=>({type:"hotspot",hotspot:t,layouts:{onLtr:K([aa,Ha,Ca,hc,gr,Oa]),onRtl:K([aa,Ha,Ca,hc,gr,Oa])},bubble:Al(0,-2,{})})),as("onHide"),as("onShow")],YB=Object.freeze({__proto__:null,init:()=>{const t=cn(!0),s=jn(),a=jn(),i=()=>{s.on(clearTimeout)},d=(h,C)=>{i(),s.set(setTimeout(h,C))},g=K("not-implemented");return sl({getTooltip:a.get,isShowing:a.isSet,setTooltip:a.set,clearTooltip:a.clear,clearTimer:i,resetTimer:d,readState:g,isEnabled:()=>t.get(),setEnabled:h=>t.set(h)})}});const br=Qa({fields:KB,name:"tooltipping",active:i3,state:YB,apis:qB});var JB=Object.freeze({__proto__:null,events:()=>hr([av(PS(),Ct)]),exhibit:()=>zu({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})});const Wv=Qa({fields:[],name:"unselecting",active:JB}),T0=t=>{const s=t.dom.attributes!==void 0?t.dom.attributes:[];return _o(s,(a,i)=>i.name==="class"?a:{...a,[i.name]:i.value},{})},nH=t=>Array.prototype.slice.call(t.dom.classList,0),rf=t=>{const s=zt.fromHtml(t),a=$l(s),i=T0(s),d=nH(s),g=a.length===0?{}:{innerHtml:xu(s)};return{tag:fl(s),classes:d,attributes:i,...g}},fs=t=>{const s=kM(t)&&xo(t,"uid")?t.uid:rh("memento");return{get:g=>g.getSystem().getByUid(s).getOrDie(),getOpt:g=>g.getSystem().getByUid(s).toOptional(),asSpec:()=>({...t,uid:s})}},oc=Hf,af=cp,QB=(t,s)=>{const a=cn(!1),i=cn(!1);return{stop:()=>{a.set(!0)},cut:()=>{i.set(!0)},isStopped:a.get,isCut:i.get,event:t,setSource:s.set,getSource:s.get}},eF=t=>{const s=cn(!1);return{stop:()=>{s.set(!0)},cut:ie,isStopped:s.get,isCut:ut,event:t,setSource:he("Cannot set source of a broadcasted event"),getSource:he("Cannot get source of a broadcasted event")}},l3=t=>t.raw.which===L2[0]&&!St(["input","textarea"],fl(t.target))&&!Sg(t.target,'[contenteditable="true"]'),tF=(t,s)=>{const a={stopBackspace:!0,...s},i=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],d=_c(a),g=Ne(i.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),q=>_s(t,q,Z=>{d.fireIfReady(Z,q).each(ye=>{ye&&Z.kill()}),a.triggerEvent(q,Z)&&Z.kill()})),h=jn(),C=_s(t,"paste",q=>{d.fireIfReady(q,"paste").each(ae=>{ae&&q.kill()}),a.triggerEvent("paste",q)&&q.kill(),h.set(setTimeout(()=>{a.triggerEvent(d2(),q)},0))}),S=_s(t,"keydown",q=>{a.triggerEvent("keydown",q)?q.kill():a.stopBackspace&&l3(q)&&q.prevent()}),T=_s(t,"focusin",q=>{a.triggerEvent("focusin",q)&&q.kill()}),O=jn(),F=_s(t,"focusout",q=>{a.triggerEvent("focusout",q)&&q.kill(),O.set(setTimeout(()=>{a.triggerEvent(Pu(),q)},0))});return{unbind:()=>{ft(g,q=>{q.unbind()}),S.unbind(),T.unbind(),F.unbind(),C.unbind(),h.on(clearTimeout),O.on(clearTimeout)}}},nF=(t,s)=>{const a=dn(t,"target").getOr(s);return cn(a)},Zv=da.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),u3=(t,s,a,i,d,g)=>{const h=t(s,i),C=QB(a,d);return h.fold(()=>(g.logEventNoHandlers(s,i),Zv.complete()),S=>{const T=S.descHandler;return gC(T)(C),C.isStopped()?(g.logEventStopped(s,S.element,T.purpose),Zv.stopped()):C.isCut()?(g.logEventCut(s,S.element,T.purpose),Zv.complete()):ii(S.element).fold(()=>(g.logNoParent(s,S.element,T.purpose),Zv.complete()),F=>(g.logEventResponse(s,S.element,T.purpose),Zv.resume(F)))})},d3=(t,s,a,i,d,g)=>u3(t,s,a,i,d,g).fold(Ct,h=>d3(t,s,a,h,d,g),ut),oF=(t,s,a,i,d)=>{const g=nF(a,i);return u3(t,s,a,i,g,d)},oH=(t,s,a)=>{const i=eF(s);return ft(t,d=>{const g=d.descHandler;gC(g)(i)}),i.isStopped()},m3=(t,s,a,i)=>sF(t,s,a,a.target,i),sF=(t,s,a,i,d)=>{const g=nF(a,i);return d3(t,s,a,i,g,d)},sH=(t,s)=>({element:t,descHandler:s}),rH=(t,s)=>({id:t,descHandler:s}),aH=()=>{const t={},s=(h,C,S)=>{wo(S,(T,O)=>{const F=t[O]!==void 0?t[O]:{};F[C]=fC(T,h),t[O]=F})},a=(h,C)=>Jl(C).bind(S=>dn(h,S)).map(S=>sH(C,S));return{registerId:s,unregisterId:h=>{wo(t,(C,S)=>{ko(C,h)&&delete C[h]})},filterByType:h=>dn(t,h).map(C=>So(C,(S,T)=>rH(T,S))).getOr([]),find:(h,C,S)=>dn(t,C).bind(T=>Cl(S,O=>a(T,O),h))}},rF=()=>{const t=aH(),s={},a=T=>{const O=T.element;return Jl(O).getOrThunk(()=>dC("uid-",T.element))},i=(T,O)=>{const F=s[O];if(F===T)g(T);else throw new Error('The tagId "'+O+'" is already used by: '+Gl(F.element)+`
Cannot use it for: `+Gl(T.element)+`
The conflicting element is`+(ds(F.element)?" ":" not ")+"already in the DOM")},d=T=>{const O=a(T);xo(s,O)&&i(T,O);const F=[T];t.registerId(F,O,T.events),s[O]=T},g=T=>{Jl(T.element).each(O=>{delete s[O],t.unregisterId(O)})};return{find:(T,O,F)=>t.find(T,O,F),filter:T=>t.filterByType(T),register:d,unregister:g,getById:T=>dn(s,T)}},f3=t=>{const s=ce=>ii(t.element).fold(Ct,xe=>Ko(ce,xe)),a=rF(),i=(ce,xe)=>a.find(s,ce,xe),d=tF(t.element,{triggerEvent:(ce,xe)=>Pf(ce,xe.target,De=>m3(i,ce,xe,De))}),g={debugInfo:K("real"),triggerEvent:(ce,xe,De)=>{Pf(ce,xe,Ke=>sF(i,ce,De,xe,Ke))},triggerFocus:(ce,xe)=>{Jl(ce).fold(()=>{Ea(ce)},De=>{Pf(Qd(),ce,Ke=>(oF(i,Qd(),{originator:xe,kill:ie,prevent:ie,target:ce},ce,Ke),!1))})},triggerEscape:(ce,xe)=>{g.triggerEvent("keydown",ce.element,xe.event)},getByUid:ce=>ae(ce),getByDom:ce=>ye(ce),build:p,buildOrPatch:m,addToGui:ce=>{S(ce)},removeFromGui:ce=>{T(ce)},addToWorld:ce=>{h(ce)},removeFromWorld:ce=>{C(ce)},broadcast:ce=>{z(ce)},broadcastOn:(ce,xe)=>{q(ce,xe)},broadcastEvent:(ce,xe)=>{Z(ce,xe)},isConnected:Ct},h=ce=>{ce.connect(g),Hd(ce.element)||(a.register(ce),ft(ce.components(),h),g.triggerEvent(Rb(),ce.element,{target:ce.element}))},C=ce=>{Hd(ce.element)||(ft(ce.components(),C),a.unregister(ce)),ce.disconnect()},S=ce=>{fm(t,ce)},T=ce=>{gm(ce)},O=()=>{d.unbind(),Gi(t.element)},F=ce=>{const xe=a.filter(Fg());ft(xe,De=>{const Ke=De.descHandler;gC(Ke)(ce)})},z=ce=>{F({universal:!0,data:ce})},q=(ce,xe)=>{F({universal:!1,channels:ce,data:xe})},Z=(ce,xe)=>{const De=a.filter(ce);return oH(De,xe)},ae=ce=>a.getById(ce).fold(()=>gn.error(new Error('Could not find component with uid: "'+ce+'" in system.')),gn.value),ye=ce=>{const xe=Jl(ce).getOr("not found");return ae(xe)};return h(t),{root:t,element:t.element,destroy:O,add:S,remove:T,getByUid:ae,getByDom:ye,addToWorld:h,removeFromWorld:C,broadcast:z,broadcastOn:q,broadcastEvent:Z}},jv=()=>{const t=(s,a)=>{a.stop(),U1(s)};return[rt(Jd(),t),rt(Pg(),t),Gg(zm()),Gg(vi())]},QE=t=>{const s=a=>Km((i,d)=>{a(i),d.stop()});return hr(Oe([t.map(s).toArray(),jv()]))},ti=nu({name:"Button",factory:t=>{const s=QE(t.action),a=t.dom.tag,i=g=>dn(t.dom,"attributes").bind(h=>dn(h,g)),d=()=>{if(a==="button"){const g=i("type").getOr("button"),h=i("role").map(C=>({role:C})).getOr({});return{type:g,...h}}else return{role:t.role.getOr(i("role").getOr("button"))}};return{uid:t.uid,dom:t.dom,components:t.components,events:s,behaviours:tu.augment(t.buttonBehaviours,[ao.config({}),_n.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:d()},eventOrder:t.eventOrder}},configFields:[We("uid",void 0),yt("dom"),We("components",[]),tu.field("buttonBehaviours",[ao,_n]),Hs("action"),Hs("role"),We("eventOrder",{})]}),g3=K([We("shell",!1),yt("makeItem"),We("setupItem",ie),tu.field("listBehaviours",[co])]),cH=ol({name:"items",overrides:()=>({behaviours:Ft([co.config({})])})}),iH=K([cH]),lH=K("CustomList"),uH=(t,s,a,i)=>{const d=(C,S)=>{h(C).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},T=>{const O=co.contents(T),F=S.length,z=F-O.length,q=z>0?Xe(z,()=>t.makeItem()):[],Z=O.slice(F);ft(Z,ye=>co.remove(T,ye)),ft(q,ye=>co.append(T,ye));const ae=co.contents(T);ft(ae,(ye,ce)=>{t.setupItem(C,ye,S[ce],ce)})})},g=t.shell?{behaviours:[co.config({})],components:[]}:{behaviours:[],components:s},h=C=>t.shell?k.some(C):Es(C,t,"items");return{uid:t.uid,dom:t.dom,components:g.components,behaviours:nc(t.listBehaviours,g.behaviours),apis:{setItems:d}}},h3=$i({name:lH(),configFields:g3(),partFields:iH(),factory:uH,apis:{setItems:(t,s,a)=>{t.setItems(s,a)}}}),$C="aria-controls",dH=t=>Tf(t,a=>{if(!ai(a))return!1;const i=ha(a,"id");return i!==void 0&&i.indexOf($C)>-1}).bind(a=>{const i=ha(a,"id"),d=Xr(a);return Bs(d,`[${$C}="${i}"]`)}),aF=()=>{const t=G($C);return{id:t,link:i=>{Hn(i,$C,t)},unlink:i=>{tr(i,$C)}}},cF=(t,s)=>dH(s).exists(a=>A0(t,a)),A0=(t,s)=>zh(s,a=>Ko(a,t.element),ut)||cF(t,s),iF="alloy.item-hover",p3="alloy.item-focus",lF="alloy.item-toggled",b3=t=>{(Vr(t.element).isNone()||ao.isFocused(t))&&(ao.isFocused(t)||ao.focus(t),Nn(t,iF,{item:t}))},v3=t=>{Nn(t,p3,{item:t})},y3=(t,s)=>{Nn(t,lF,{item:t,state:s})},uF=K(iF),dF=K(p3),mH=K(lF),IC=t=>t.role.fold(()=>t.toggling.map(s=>s.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),It),fH=(t,s)=>({aria:{mode:s?"selected":"checked"},...ts(t,(a,i)=>i!=="exclusive"),onToggled:(a,i)=>{ze(t.onToggled)&&t.onToggled(a,i),y3(a,i)}}),gH=t=>({dom:t.dom,domModification:{...t.domModification,attributes:{role:IC(t),...t.domModification.attributes,"aria-haspopup":t.hasSubmenu,...t.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:tu.augment(t.itemBehaviours,[t.toggling.fold(Jo.revoke,s=>Jo.config(fH(s,t.role.exists(a=>a==="option")))),ao.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:s=>{v3(s)}}),_n.config({mode:"execution"}),Xt.config({store:{mode:"memory",initialValue:t.data}}),so("item-type-events",[...jv(),rt(Fu(),b3),rt(Ng(),ao.focus)])]),components:t.components,eventOrder:t.eventOrder});var C3=[yt("data"),yt("components"),yt("dom"),We("hasSubmenu",!1),Hs("toggling"),Hs("role"),tu.field("itemBehaviours",[Jo,ao,_n,Xt]),We("ignoreFocus",!1),We("domModification",{}),fr("builder",gH),We("eventOrder",{})];const mF=t=>({dom:t.dom,components:t.components,events:hr([F2(Ng())])});var w3=[yt("dom"),yt("components"),fr("builder",mF)];const S3=K("item-widget"),x3=K([yi({name:"widget",overrides:t=>({behaviours:Ft([Xt.config({store:{mode:"manual",getValue:s=>t.data,setValue:ie}})])})})]),eT=t=>{const s=Lf(S3(),t,x3()),a=jm(S3(),t,s.internals()),i=g=>Es(g,t,"widget").map(h=>(_n.focusIn(h),h)),d=(g,h)=>im(h.event.target)?k.none():(t.autofocus&&h.setSource(g.element),k.none());return{dom:t.dom,components:a,domModification:t.domModification,events:hr([Km((g,h)=>{i(g).each(C=>{h.stop()})}),rt(Fu(),b3),rt(Ng(),(g,h)=>{t.autofocus?i(g):ao.focus(g)})]),behaviours:tu.augment(t.widgetBehaviours,[Xt.config({store:{mode:"memory",initialValue:t.data}}),ao.config({ignore:t.ignoreFocus,onFocus:g=>{v3(g)}}),_n.config({mode:"special",focusIn:t.autofocus?g=>{i(g)}:Ex(),onLeft:d,onRight:d,onEscape:(g,h)=>!ao.isFocused(g)&&!t.autofocus?(ao.focus(g),k.some(!0)):(t.autofocus&&h.setSource(g.element),k.none())})])}};var fF=[yt("uid"),yt("data"),yt("components"),yt("dom"),We("autofocus",!1),We("ignoreFocus",!1),tu.field("widgetBehaviours",[Xt,ao,_n]),We("domModification",{}),sm(x3()),fr("builder",eT)];const pH=pi("type",{widget:fF,item:C3,separator:w3}),bH=(t,s)=>({mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:s.initSize.numColumns,numRows:s.initSize.numRows},focusManager:t.focusManager}),vH=(t,s)=>({mode:"matrix",selectors:{row:s.rowSelector,cell:"."+t.markers.item},previousSelector:s.previousSelector,focusManager:t.focusManager}),yH=(t,s)=>({mode:"menu",selector:"."+t.markers.item,moveOnTab:s.moveOnTab,focusManager:t.focusManager}),CH=K([Ub({factory:{sketch:t=>{const s=Ri("menu.spec item",pH,t);return s.builder(s)}},name:"items",unit:"item",defaults:(t,s)=>ko(s,"uid")?s:{...s,uid:rh("item")},overrides:(t,s)=>({type:s.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}})})]),wH=K([Lr("role"),yt("value"),yt("items"),yt("dom"),yt("components"),We("eventOrder",{}),tc("menuBehaviours",[vs,Xt,it,_n]),bi("movement",{mode:"menu",moveOnTab:!0},pi("mode",{grid:[Nb(),fr("config",bH)],matrix:[fr("config",vH),yt("rowSelector"),We("previousSelector",k.none)],menu:[We("moveOnTab",!0),fr("config",yH)]})),jS(),We("fakeFocus",!1),We("focusManager",dv()),as("onHighlight"),as("onDehighlight"),We("showMenuRole",!0)]),gF=K("alloy.menu-focus"),SH=(t,s)=>{const a=_a(t.element,'[role="menuitemradio"][aria-checked="true"]');ft(a,i=>{Ko(i,s.element)||t.getSystem().getByDom(i).each(d=>{Jo.off(d)})})},xH=(t,s,a,i)=>({uid:t.uid,dom:t.dom,markers:t.markers,behaviours:nc(t.menuBehaviours,[vs.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight,onDehighlight:t.onDehighlight}),Xt.config({store:{mode:"memory",initialValue:t.value}}),it.config({find:k.some}),_n.config(t.movement.config(t,t.movement))]),events:hr([rt(dF(),(d,g)=>{const h=g.event;d.getSystem().getByDom(h.target).each(C=>{vs.highlight(d,C),g.stop(),Nn(d,gF(),{menu:d,item:C})})}),rt(uF(),(d,g)=>{const h=g.event.item;vs.highlight(d,h)}),rt(mH(),(d,g)=>{const{item:h,state:C}=g.event;C&&ha(h.element,"role")==="menuitemradio"&&SH(d,h)})]),components:s,eventOrder:t.eventOrder,...t.showMenuRole?{domModification:{attributes:{role:t.role.getOr("menu")}}}:{}}),mh=$i({name:"Menu",configFields:wH(),partFields:CH(),factory:xH}),E3=t=>Nt(t,(s,a)=>({k:s,v:a})),T3=(t,s,a,i)=>dn(a,i).bind(d=>dn(t,d).bind(g=>{const h=T3(t,s,a,g);return k.some([g].concat(h))})).getOr([]),EH=(t,s)=>{const a={};wo(t,(h,C)=>{ft(h,S=>{a[S]=C})});const i=s,d=E3(s),g=mt(d,(h,C)=>[C].concat(T3(a,i,d,C)));return mt(a,h=>dn(g,h).getOr([h]))},TH=()=>{const t=cn({}),s=cn({}),a=cn({}),i=jn(),d=cn({}),g=()=>{t.set({}),s.set({}),a.set({}),i.clear()},h=()=>i.get().isNone(),C=(Ye,Kt)=>{s.set({...s.get(),[Ye]:{type:"prepared",menu:Kt}})},S=(Ye,Kt,Tt,_t)=>{i.set(Ye),t.set(Tt),s.set(Kt),d.set(_t);const wt=EH(_t,Tt);a.set(wt)},T=Ye=>ks(t.get(),(Kt,Tt)=>Kt===Ye),O=(Ye,Kt,Tt)=>ae(Ye).bind(_t=>T(Ye).bind(wt=>Kt(wt).map(Bn=>({triggeredMenu:_t,triggeringItem:Bn,triggeringPath:Tt})))),F=(Ye,Kt)=>{const Tt=ro(ce(Ye).toArray(),_t=>ae(_t).isSome());return dn(a.get(),Ye).bind(_t=>{const wt=at(Tt.concat(_t)),Bn=me(wt,(yn,Zo)=>O(yn,Kt,wt.slice(0,Zo+1)).fold(()=>Tn(i.get(),yn)?[]:[k.none()],Vn=>[k.some(Vn)]));return Lo(Bn)})},z=Ye=>dn(t.get(),Ye).map(Kt=>{const Tt=dn(a.get(),Ye).getOr([]);return[Kt].concat(Tt)}),q=Ye=>dn(a.get(),Ye).bind(Kt=>Kt.length>1?k.some(Kt.slice(1)):k.none()),Z=Ye=>dn(a.get(),Ye),ae=Ye=>ye(Ye).bind(A3),ye=Ye=>dn(s.get(),Ye),ce=Ye=>dn(t.get(),Ye);return{setMenuBuilt:C,setContents:S,expand:z,refresh:Z,collapse:q,lookupMenu:ye,lookupItem:ce,otherMenus:Ye=>{const Kt=d.get();return tt(eo(Kt),Ye)},getPrimary:()=>i.get().bind(ae),getMenus:()=>s.get(),clear:g,isClear:h,getTriggeringPath:F}},A3=t=>t.type==="prepared"?k.some(t.menu):k.none(),hF={init:TH,extractPreparedMenu:A3},pF=G("tiered-menu-item-highlight"),_3=G("tiered-menu-item-dehighlight"),bF=(t,s)=>{const a=jn(),i=(vt,Ut,qn)=>mt(qn,(vo,En)=>{const po=()=>mh.sketch({...vo,value:En,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:(ys,gs)=>{Nn(ys,pF,{menuComp:ys,itemComp:gs})},onDehighlight:(ys,gs)=>{Nn(ys,_3,{menuComp:ys,itemComp:gs})},focusManager:t.fakeFocus?Z2():dv()});return En===Ut?{type:"prepared",menu:vt.getSystem().build(po())}:{type:"notbuilt",nbMenu:po}}),d=hF.init(),g=vt=>{const Ut=i(vt,t.data.primary,t.data.menus),qn=S();return d.setContents(t.data.primary,Ut,t.data.expansions,qn),d.getPrimary()},h=vt=>Xt.getValue(vt).value,C=(vt,Ut,qn)=>Wo(Ut,vo=>{if(!vo.getSystem().isConnected())return k.none();const En=vs.getCandidates(vo);return be(En,po=>h(po)===qn)}),S=vt=>mt(t.data.menus,(Ut,qn)=>me(Ut.items,vo=>vo.type==="separator"?[]:[vo.data.value])),T=vs.highlight,O=(vt,Ut)=>{T(vt,Ut),vs.getHighlighted(Ut).orThunk(()=>vs.getFirst(Ut)).each(qn=>{t.fakeFocus?vs.highlight(Ut,qn):rv(vt,qn.element,Ng())})},F=(vt,Ut)=>bo(Ne(Ut,qn=>vt.lookupMenu(qn).bind(vo=>vo.type==="prepared"?k.some(vo.menu):k.none()))),z=(vt,Ut,qn)=>{const vo=F(Ut,Ut.otherMenus(qn));ft(vo,En=>{dc(En.element,[t.markers.backgroundMenu]),t.stayInDom||co.remove(vt,En)})},q=vt=>a.get().getOrThunk(()=>{const Ut={},qn=_a(vt.element,`.${t.markers.item}`),vo=ro(qn,En=>ha(En,"aria-haspopup")==="true");return ft(vo,En=>{vt.getSystem().getByDom(En).each(po=>{const ys=h(po);Ut[ys]=po})}),a.set(Ut),Ut}),Z=(vt,Ut)=>{const qn=q(vt);wo(qn,(vo,En)=>{const po=St(Ut,En);Hn(vo.element,"aria-expanded",po)})},ae=(vt,Ut,qn)=>k.from(qn[0]).bind(vo=>Ut.lookupMenu(vo).bind(En=>{if(En.type==="notbuilt")return k.none();{const po=En.menu,ys=F(Ut,qn.slice(1));return ft(ys,gs=>{Ls(gs.element,t.markers.backgroundMenu)}),ds(po.element)||co.append(vt,y(po)),dc(po.element,[t.markers.backgroundMenu]),O(vt,po),z(vt,Ut,qn),k.some(po)}}));let ye;(function(vt){vt[vt.HighlightSubmenu=0]="HighlightSubmenu",vt[vt.HighlightParent=1]="HighlightParent"})(ye||(ye={}));const ce=(vt,Ut,qn)=>{if(qn.type==="notbuilt"){const vo=vt.getSystem().build(qn.nbMenu());return d.setMenuBuilt(Ut,vo),vo}else return qn.menu},xe=(vt,Ut,qn=ye.HighlightSubmenu)=>{if(Ut.hasConfigured(xn)&&xn.isDisabled(Ut))return k.some(Ut);{const vo=h(Ut);return d.expand(vo).bind(En=>(Z(vt,En),k.from(En[0]).bind(po=>d.lookupMenu(po).bind(ys=>{const gs=ce(vt,po,ys);return ds(gs.element)||co.append(vt,y(gs)),t.onOpenSubmenu(vt,Ut,gs,at(En)),qn===ye.HighlightSubmenu?(vs.highlightFirst(gs),ae(vt,d,En)):(vs.dehighlightAll(gs),k.some(Ut))}))))}},De=(vt,Ut)=>{const qn=h(Ut);return d.collapse(qn).bind(vo=>(Z(vt,vo),ae(vt,d,vo).map(En=>(t.onCollapseMenu(vt,Ut,En),En))))},Ke=(vt,Ut)=>{const qn=h(Ut);return d.refresh(qn).bind(vo=>(Z(vt,vo),ae(vt,d,vo)))},Ye=(vt,Ut)=>im(Ut.element)?k.none():xe(vt,Ut,ye.HighlightSubmenu),Kt=(vt,Ut)=>im(Ut.element)?k.none():De(vt,Ut),Tt=(vt,Ut)=>De(vt,Ut).orThunk(()=>t.onEscape(vt,Ut).map(()=>vt)),_t=vt=>(Ut,qn)=>uc(qn.getSource(),`.${t.markers.item}`).bind(vo=>Ut.getSystem().getByDom(vo).toOptional().bind(En=>vt(Ut,En).map(Ct))),wt=hr([rt(gF(),(vt,Ut)=>{const qn=Ut.event.item;d.lookupItem(h(qn)).each(()=>{const vo=Ut.event.menu;vs.highlight(vt,vo);const En=h(Ut.event.item);d.refresh(En).each(po=>z(vt,d,po))})}),Km((vt,Ut)=>{const qn=Ut.event.target;vt.getSystem().getByDom(qn).each(vo=>{h(vo).indexOf("collapse-item")===0&&De(vt,vo),xe(vt,vo,ye.HighlightSubmenu).fold(()=>{t.onExecute(vt,vo)},ie)})}),or((vt,Ut)=>{g(vt).each(qn=>{co.append(vt,y(qn)),t.onOpenMenu(vt,qn),t.highlightOnOpen===jc.HighlightMenuAndItem?O(vt,qn):t.highlightOnOpen===jc.HighlightJustMenu&&T(vt,qn)})}),rt(pF,(vt,Ut)=>{t.onHighlightItem(vt,Ut.event.menuComp,Ut.event.itemComp)}),rt(_3,(vt,Ut)=>{t.onDehighlightItem(vt,Ut.event.menuComp,Ut.event.itemComp)}),...t.navigateOnHover?[rt(uF(),(vt,Ut)=>{const qn=Ut.event.item;Ke(vt,qn),xe(vt,qn,ye.HighlightParent),t.onHover(vt,qn)})]:[]]),Bn=vt=>vs.getHighlighted(vt).bind(vs.getHighlighted),yn=vt=>{Bn(vt).each(Ut=>{De(vt,Ut)})},Zo=vt=>{d.getPrimary().each(Ut=>{O(vt,Ut)})},Vn=vt=>k.from(vt.components()[0]).filter(Ut=>ha(Ut.element,"role")==="menu"),bn={collapseMenu:yn,highlightPrimary:Zo,repositionMenus:vt=>{d.getPrimary().bind(qn=>Bn(vt).bind(vo=>{const En=h(vo),po=Xs(d.getMenus()),ys=bo(Ne(po,hF.extractPreparedMenu));return d.getTriggeringPath(En,gs=>C(vt,ys,gs))}).map(vo=>({primary:qn,triggeringPath:vo}))).fold(()=>{Vn(vt).each(qn=>{t.onRepositionMenu(vt,qn,[])})},({primary:qn,triggeringPath:vo})=>{t.onRepositionMenu(vt,qn,vo)})}};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:nc(t.tmenuBehaviours,[_n.config({mode:"special",onRight:_t(Ye),onLeft:_t(Kt),onEscape:_t(Tt),focusIn:(vt,Ut)=>{d.getPrimary().each(qn=>{rv(vt,qn.element,Ng())})}}),vs.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),it.config({find:vt=>vs.getHighlighted(vt)}),co.config({})]),eventOrder:t.eventOrder,apis:bn,events:wt}},vF=K("collapse-item"),AH=(t,s,a)=>({primary:t,menus:s,expansions:a}),_H=(t,s)=>({primary:t,menus:Hm(t,s),expansions:{}}),kH=t=>({value:G(vF()),meta:{text:t}}),Bp=nu({name:"TieredMenu",configFields:[Fb("onExecute"),Fb("onEscape"),M1("onOpenMenu"),M1("onOpenSubmenu"),as("onRepositionMenu"),as("onCollapseMenu"),We("highlightOnOpen",jc.HighlightMenuAndItem),Lm("data",[yt("primary"),yt("menus"),yt("expansions")]),We("fakeFocus",!1),as("onHighlightItem"),as("onDehighlightItem"),as("onHover"),qS(),yt("dom"),We("navigateOnHover",!0),We("stayInDom",!1),tc("tmenuBehaviours",[_n,vs,it,co]),We("eventOrder",{})],apis:{collapseMenu:(t,s)=>{t.collapseMenu(s)},highlightPrimary:(t,s)=>{t.highlightPrimary(s)},repositionMenus:(t,s)=>{t.repositionMenus(s)}},factory:bF,extraApis:{tieredData:AH,singleData:_H,collapseItem:kH}}),tT=K("sink"),DH=K(ol({name:tT(),overrides:K({dom:{tag:"div"},behaviours:Ft([wi.config({useFixed:Ct})]),events:hr([Gg(La()),Gg(vi()),Gg(Jd())])})})),OH=Sl([We("isExtraPart",ut),Qi("fireEventInstead",[We("event",Lg())])]),k3=t=>{const s=Ri("Dismissal",OH,t);return{[Xm()]:{schema:Sl([yt("target")]),onReceive:(a,i)=>{ms.isOpen(a)&&(ms.isPartOf(a,i.target)||s.isExtraPart(a,i.target)||s.fireEventInstead.fold(()=>ms.close(a),g=>$o(a,g.event)))}}}},RH=Sl([Qi("fireEventInstead",[We("event",LS())]),ql("doReposition")]),D3=t=>{const s=Ri("Reposition",RH,t);return{[kc()]:{onReceive:a=>{ms.isOpen(a)&&s.fireEventInstead.fold(()=>s.doReposition(a),i=>$o(a,i.event))}}}},yF=(t,s)=>{const a=t.getHotspot(s).getOr(s),i="hotspot",d=t.getAnchorOverrides();return t.layouts.fold(()=>({type:i,hotspot:a,overrides:d}),g=>({type:i,hotspot:a,overrides:d,layouts:g}))},CF=(t,s,a)=>{const i=t.fetch;return i(a).map(s)},wF=(t,s,a,i,d,g,h)=>{const C=CF(t,s,i),S=kd(i,t);return C.map(T=>T.bind(O=>{const F=O.menus[O.primary];return k.from(F).each(z=>{t.listRole.each(q=>{z.role=q})}),k.from(Bp.sketch({...g.menu(),uid:rh(""),data:O,highlightOnOpen:h,onOpenMenu:(z,q)=>{const Z=S().getOrDie();wi.position(Z,q,{anchor:a}),ms.decloak(d)},onOpenSubmenu:(z,q,Z)=>{const ae=S().getOrDie();wi.position(ae,Z,{anchor:{type:"submenu",item:q}}),ms.decloak(d)},onRepositionMenu:(z,q,Z)=>{const ae=S().getOrDie();wi.position(ae,q,{anchor:a}),ft(Z,ye=>{wi.position(ae,ye.triggeredMenu,{anchor:{type:"submenu",item:ye.triggeringItem}})})},onEscape:()=>(ao.focus(i),ms.close(d),k.some(!0))}))}))},nT=(t,s,a,i,d,g,h)=>{const C=yF(t,a);return wF(t,s,C,a,i,d,h).map(T=>(T.fold(()=>{ms.isOpen(i)&&ms.close(i)},O=>{ms.cloak(i),ms.open(i,O),g(i)}),i))},MH=(t,s,a,i,d,g,h)=>(ms.close(i),os.pure(i)),SF=(t,s,a,i,d,g)=>{const h=Co.getCoupled(a,"sandbox");return(ms.isOpen(h)?MH:nT)(t,s,a,h,i,d,g)},ru=(t,s,a)=>{const i=it.getCurrent(s).getOr(s),d=Ya(t.element);a?Yn(i.element,"min-width",d+"px"):Zd(i.element,d)},kd=(t,s)=>t.getSystem().getByUid(s.uid+"-"+tT()).map(a=>()=>gn.value(a)).getOrThunk(()=>s.lazySink.fold(()=>()=>gn.error(new Error("No internal sink is specified, nor could an external sink be found")),a=>()=>a(t))),O3=t=>{ms.getState(t).each(s=>{Bp.repositionMenus(s)})},oT=(t,s,a)=>{const i=aF(),d=(C,S)=>{const T=yF(t,s);i.link(s.element),t.matchWidth&&ru(T.hotspot,S,t.useMinWidth),t.onOpen(T,C,S),a!==void 0&&a.onOpen!==void 0&&a.onOpen(C,S)},g=(C,S)=>{i.unlink(s.element),h().getOr(S).element.dom.dispatchEvent(new window.FocusEvent("focusout")),a!==void 0&&a.onClose!==void 0&&a.onClose(C,S)},h=kd(s,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:i.id}},behaviours:tu.augment(t.sandboxBehaviours,[Xt.config({store:{mode:"memory",initialValue:s}}),ms.config({onOpen:d,onClose:g,isPartOf:(C,S,T)=>A0(S,T)||A0(s,T),getAttachPoint:()=>h().getOrDie()}),it.config({find:C=>ms.getState(C).bind(S=>it.getCurrent(S))}),ou.config({channels:{...k3({isExtraPart:ut}),...D3({doReposition:O3})}})])}},R3=t=>{const s=Co.getCoupled(t,"sandbox");O3(s)},LC=()=>[We("sandboxClasses",[]),tu.field("sandboxBehaviours",[it,ou,ms,Xt])],BH=K([yt("dom"),yt("fetch"),as("onOpen"),va("onExecute"),We("getHotspot",k.some),We("getAnchorOverrides",K({})),w0(),tc("dropdownBehaviours",[Jo,Co,_n,ao]),yt("toggleClass"),We("eventOrder",{}),Hs("lazySink"),We("matchWidth",!1),We("useMinWidth",!1),Hs("role"),Hs("listRole")].concat(LC())),xF=K([nl({schema:[qS(),We("fakeFocus",!1)],name:"menu",defaults:t=>({onExecute:t.onExecute})}),DH()]),HC=(t,s,a,i)=>{const d=O=>dn(t.dom,"attributes").bind(F=>dn(F,O)),g=O=>{ms.getState(O).each(F=>{Bp.highlightPrimary(F)})},h=(O,F,z)=>SF(t,It,O,i,F,z),C=O=>{h(O,g,jc.HighlightMenuAndItem).get(ie)},S={expand:O=>{Jo.isOn(O)||h(O,ie,jc.HighlightNone).get(ie)},open:O=>{Jo.isOn(O)||h(O,ie,jc.HighlightMenuAndItem).get(ie)},refetch:O=>Co.getExistingCoupled(O,"sandbox").fold(()=>h(O,ie,jc.HighlightMenuAndItem).map(ie),z=>nT(t,It,O,z,i,ie,jc.HighlightMenuAndItem).map(ie)),isOpen:Jo.isOn,close:O=>{Jo.isOn(O)&&h(O,ie,jc.HighlightMenuAndItem).get(ie)},repositionMenus:O=>{Jo.isOn(O)&&R3(O)}},T=(O,F)=>(U1(O),k.some(!0));return{uid:t.uid,dom:t.dom,components:s,behaviours:nc(t.dropdownBehaviours,[Jo.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),Co.config({others:{sandbox:O=>oT(t,O,{onOpen:()=>Jo.on(O),onClose:()=>Jo.off(O)})}}),_n.config({mode:"special",onSpace:T,onEnter:T,onDown:(O,F)=>{if(au.isOpen(O)){const z=Co.getCoupled(O,"sandbox");g(z)}else au.open(O);return k.some(!0)},onEscape:(O,F)=>au.isOpen(O)?(au.close(O),k.some(!0)):k.none()}),ao.config({})]),events:QE(k.some(C)),eventOrder:{...t.eventOrder,[el()]:["disabling","toggling","alloy.base.behaviour"]},apis:S,domModification:{attributes:{"aria-haspopup":t.listRole.getOr("true"),...t.role.fold(()=>({}),O=>({role:O})),...t.dom.tag==="button"?{type:d("type").getOr("button")}:{}}}}},au=$i({name:"Dropdown",configFields:BH(),partFields:xF(),factory:HC,apis:{open:(t,s)=>t.open(s),refetch:(t,s)=>t.refetch(s),expand:(t,s)=>t.expand(s),close:(t,s)=>t.close(s),isOpen:(t,s)=>t.isOpen(s),repositionMenus:(t,s)=>t.repositionMenus(s)}}),zC="form",M3=[tc("formBehaviours",[Xt])],B3=t=>"<alloy.field."+t+">",VC=t=>{const s=(()=>{const g=[];return{field:(C,S)=>(g.push(C),Bi(zC,B3(C),S)),record:K(g)}})(),a=t(s),i=s.record(),d=Ne(i,g=>yi({name:g,pname:B3(g)}));return dk(zC,M3,d,NH,a)},FH=(t,s)=>t.fold(()=>gn.error(s),gn.value),NH=(t,s)=>({uid:t.uid,dom:t.dom,components:s,behaviours:nc(t.formBehaviours,[Xt.config({store:{mode:"manual",getValue:a=>{const i=Zb(a,t);return mt(i,(d,g)=>d().bind(h=>{const C=it.getCurrent(h);return FH(C,new Error(`Cannot find a current component to extract the value from for form part '${g}': `+Gl(h.element)))}).map(Xt.getValue))},setValue:(a,i)=>{wo(i,(d,g)=>{Es(a,t,g).each(h=>{it.getCurrent(h).each(C=>{Xt.setValue(C,d)})})})}}})]),apis:{getField:(a,i)=>Es(a,t,i).bind(it.getCurrent)}}),Dl={getField:Qm((t,s,a)=>t.getField(s,a)),sketch:VC},ni=K([yt("dom"),We("shell",!0),tc("toolbarBehaviours",[co])]),cu=K([ol({name:"groups",overrides:()=>({behaviours:Ft([co.config({})])})})]),PH=(t,s,a,i)=>{const d=(C,S)=>{g(C).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},T=>{co.set(T,S)})},g=C=>t.shell?k.some(C):Es(C,t,"groups"),h=t.shell?{behaviours:[co.config({})],components:[]}:{behaviours:[],components:s};return{uid:t.uid,dom:t.dom,components:h.components,behaviours:nc(t.toolbarBehaviours,h.behaviours),apis:{setGroups:d,refresh:ie},domModification:{attributes:{role:"group"}}}},Ts=$i({name:"Toolbar",configFields:ni(),partFields:cu(),factory:PH,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)}}}),$H=K([Kl(["toggledClass"]),yt("lazySink"),ql("fetch"),md("getBounds"),Qi("fireDismissalEventInstead",[We("event",Lg())]),w0(),as("onToggled")]),fh=K([nl({name:"button",overrides:t=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:Ft([Jo.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:t.onToggled})])})}),nl({factory:Ts,schema:ni(),name:"toolbar",overrides:t=>({toolbarBehaviours:Ft([_n.config({mode:"cyclic",onEscape:s=>(Es(s,t,"button").each(ao.focus),k.none())})])})})]),Fp=jn(),EF=(t,s)=>{Fp.set(!0),UC(t,s),Fp.clear()},UC=(t,s)=>{const a=Co.getCoupled(t,"toolbarSandbox");ms.isOpen(a)?ms.close(a):ms.open(a,s.toolbar())},WC=(t,s,a,i)=>{const d=a.getBounds.map(h=>h()),g=a.lazySink(t).getOrDie();wi.positionWithinBounds(g,s,{anchor:{type:"hotspot",hotspot:t,layouts:i,overrides:{maxWidthFunction:D2()}}},d)},TF=(t,s,a,i,d)=>{Ts.setGroups(s,d),WC(t,s,a,i),Jo.on(t)},F3=(t,s,a)=>{const i=aF(),d=(h,C)=>{const S=Fp.get().getOr(!1);a.fetch().get(T=>{TF(t,C,a,s.layouts,T),i.link(t.element),S||_n.focusIn(C)})},g=()=>{Jo.off(t),Fp.get().getOr(!1)||ao.focus(t),i.unlink(t.element)};return{dom:{tag:"div",attributes:{id:i.id}},behaviours:Ft([_n.config({mode:"special",onEscape:h=>(ms.close(h),k.some(!0))}),ms.config({onOpen:d,onClose:g,isPartOf:(h,C,S)=>A0(C,S)||A0(t,S),getAttachPoint:()=>a.lazySink(t).getOrDie()}),ou.config({channels:{...k3({isExtraPart:ut,...a.fireDismissalEventInstead.map(h=>({fireEventInstead:{event:h.event}})).getOr({})}),...D3({doReposition:()=>{ms.getState(Co.getCoupled(t,"toolbarSandbox")).each(h=>{WC(t,h,a,s.layouts)})}})}})])}},gh=$i({name:"FloatingToolbarButton",factory:(t,s,a,i)=>({...ti.sketch({...i.button(),action:d=>{UC(d,i)},buttonBehaviours:tu.augment({dump:i.button().buttonBehaviours},[Co.config({others:{toolbarSandbox:d=>F3(d,a,t)}})])}),apis:{setGroups:(d,g)=>{ms.getState(Co.getCoupled(d,"toolbarSandbox")).each(h=>{TF(d,h,t,a.layouts,g)})},reposition:d=>{ms.getState(Co.getCoupled(d,"toolbarSandbox")).each(g=>{WC(d,g,t,a.layouts)})},toggle:d=>{UC(d,i)},toggleWithoutFocusing:d=>{EF(d,i)},getToolbar:d=>ms.getState(Co.getCoupled(d,"toolbarSandbox")),isOpen:d=>ms.isOpen(Co.getCoupled(d,"toolbarSandbox"))}}),configFields:$H(),partFields:fh(),apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggleWithoutFocusing(s)},getToolbar:(t,s)=>t.getToolbar(s),isOpen:(t,s)=>t.isOpen(s)}}),AF=K([We("prefix","form-field"),tc("fieldBehaviours",[it,Xt])]),N3=K([ol({schema:[yt("dom")],name:"label"}),ol({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[yt("text")],name:"aria-descriptor"}),yi({factory:{sketch:t=>{const s=NS(t,["factory"]);return t.factory.sketch(s)}},schema:[yt("factory")],name:"field"})]),_F=(t,s,a,i)=>{const d=nc(t.fieldBehaviours,[it.config({find:C=>Es(C,t,"field")}),Xt.config({store:{mode:"manual",getValue:C=>it.getCurrent(C).bind(Xt.getValue),setValue:(C,S)=>{it.getCurrent(C).each(T=>{Xt.setValue(T,S)})}}})]),g=hr([or((C,S)=>{const T=F1(C,t,["label","field","aria-descriptor"]);T.field().each(O=>{const F=G(t.prefix);T.label().each(z=>{Hn(z.element,"for",F),Hn(O.element,"id",F)}),T["aria-descriptor"]().each(z=>{const q=G(t.prefix);Hn(z.element,"id",q),Hn(O.element,"aria-describedby",q)})})})]),h={getField:C=>Es(C,t,"field"),getLabel:C=>Es(C,t,"label")};return{uid:t.uid,dom:t.dom,components:s,behaviours:d,events:g,apis:h}},No=$i({name:"FormField",configFields:AF(),partFields:N3(),factory:_F,apis:{getField:(t,s)=>t.getField(s),getLabel:(t,s)=>t.getLabel(s)}}),IH=K([We("field1Name","field1"),We("field2Name","field2"),M1("onLockedChange"),Kl(["lockClass"]),We("locked",!1),tu.field("coupledFieldBehaviours",[it,Xt]),$s("onInput",ie)]),LH=(t,s,a)=>Es(t,s,a).bind(it.getCurrent),kF=(t,s)=>yi({factory:No,name:t,overrides:a=>({fieldBehaviours:Ft([so("coupled-input-behaviour",[rt(Um(),i=>{LH(i,a,s).each(d=>{Es(i,a,"lock").each(g=>{Jo.isOn(g)&&a.onLockedChange(i,d,g),a.onInput(i)})})})])])})}),HH=K([kF("field1","field2"),kF("field2","field1"),yi({factory:ti,schema:[yt("dom")],name:"lock",overrides:t=>({buttonBehaviours:Ft([Jo.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])})})]),zH=(t,s,a,i)=>({uid:t.uid,dom:t.dom,components:s,behaviours:tu.augment(t.coupledFieldBehaviours,[it.config({find:k.some}),Xt.config({store:{mode:"manual",getValue:d=>{const g=N1(d,t,["field1","field2"]);return{[t.field1Name]:Xt.getValue(g.field1()),[t.field2Name]:Xt.getValue(g.field2())}},setValue:(d,g)=>{const h=N1(d,t,["field1","field2"]);xo(g,t.field1Name)&&Xt.setValue(h.field1(),g[t.field1Name]),xo(g,t.field2Name)&&Xt.setValue(h.field2(),g[t.field2Name])}}})]),apis:{getField1:d=>Es(d,t,"field1"),getField2:d=>Es(d,t,"field2"),getLock:d=>Es(d,t,"lock")}}),qr=$i({name:"FormCoupledInputs",configFields:IH(),partFields:HH(),factory:zH,apis:{getField1:(t,s)=>t.getField1(s),getField2:(t,s)=>t.getField2(s),getLock:(t,s)=>t.getLock(s)}}),VH=(t,s)=>{const a=Ne(t.options,d=>({dom:{tag:"option",value:d.value,innerHtml:d.text}})),i=t.data.map(d=>Hm("initialValue",d)).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:a,behaviours:nc(t.selectBehaviours,[ao.config({}),Xt.config({store:{mode:"manual",getValue:d=>di(d.element),setValue:(d,g)=>{const h=rn(t.options);be(t.options,S=>S.value===g).isSome()?Wl(d.element,g):d.element.dom.selectedIndex===-1&&g===""&&h.each(S=>Wl(d.element,S.value))},...i}})])}},UH=nu({name:"HtmlSelect",configFields:[yt("options"),tc("selectBehaviours",[ao,Xt]),We("selectClasses",[]),We("selectAttributes",{}),Hs("data")],factory:VH}),DF=(t,s,a,i,d)=>{const g=()=>t.lazySink(s),h=i.type==="horizontal"?{layouts:{onLtr:()=>Ug(),onRtl:()=>T2()}}:{},C=T=>T.length===2,S=T=>C(T)?h:{};return Bp.sketch({dom:{tag:"div"},data:i.data,markers:i.menu.markers,highlightOnOpen:i.menu.highlightOnOpen,fakeFocus:i.menu.fakeFocus,onEscape:()=>(ms.close(s),t.onEscape.map(T=>T(s)),k.some(!0)),onExecute:()=>k.some(!0),onOpenMenu:(T,O)=>{wi.positionWithinBounds(g().getOrDie(),O,a,d())},onOpenSubmenu:(T,O,F,z)=>{const q=g().getOrDie();wi.position(q,F,{anchor:{type:"submenu",item:O,...S(z)}})},onRepositionMenu:(T,O,F)=>{const z=g().getOrDie();wi.positionWithinBounds(z,O,a,d()),ft(F,q=>{const Z=S(q.triggeringPath);wi.position(z,q.triggeredMenu,{anchor:{type:"submenu",item:q.triggeringItem,...Z}})})}})},WH=(t,s)=>{const a=(z,q)=>t.getRelated(z).exists(ae=>A0(ae,q)),i=(z,q)=>{ms.setContent(z,q)},d=(z,q,Z)=>{const ae=k.none;g(z,q,Z,ae)},g=(z,q,Z,ae)=>{const ye=t.lazySink(z).getOrDie();ms.openWhileCloaked(z,q,()=>wi.positionWithinBounds(ye,z,Z,ae())),Xt.setValue(z,k.some({mode:"position",config:Z,getBounds:ae}))},h=(z,q,Z)=>{C(z,q,Z,k.none)},C=(z,q,Z,ae)=>{const ye=DF(t,z,q,Z,ae);ms.open(z,ye),Xt.setValue(z,k.some({mode:"menu",menu:ye}))},S=z=>{ms.isOpen(z)&&(Xt.setValue(z,k.none()),ms.close(z))},T=z=>ms.getState(z),O=z=>{ms.isOpen(z)&&Xt.getValue(z).each(q=>{switch(q.mode){case"menu":ms.getState(z).each(Bp.repositionMenus);break;case"position":const Z=t.lazySink(z).getOrDie();wi.positionWithinBounds(Z,z,q.config,q.getBounds());break}})},F={setContent:i,showAt:d,showWithinBounds:g,showMenuAt:h,showMenuWithinBounds:C,hide:S,getContent:T,reposition:O,isOpen:ms.isOpen};return{uid:t.uid,dom:t.dom,behaviours:nc(t.inlineBehaviours,[ms.config({isPartOf:(z,q,Z)=>A0(q,Z)||a(z,Z),getAttachPoint:z=>t.lazySink(z).getOrDie(),onOpen:z=>{t.onShow(z)},onClose:z=>{t.onHide(z)}}),Xt.config({store:{mode:"memory",initialValue:k.none()}}),ou.config({channels:{...k3({isExtraPart:s.isExtraPart,...t.fireDismissalEventInstead.map(z=>({fireEventInstead:{event:z.event}})).getOr({})}),...D3({...t.fireRepositionEventInstead.map(z=>({fireEventInstead:{event:z.event}})).getOr({}),doReposition:O})}})]),eventOrder:t.eventOrder,apis:F}},_r=nu({name:"InlineView",configFields:[yt("lazySink"),as("onShow"),as("onHide"),md("onEscape"),tc("inlineBehaviours",[ms,Xt,ou]),Qi("fireDismissalEventInstead",[We("event",Lg())]),Qi("fireRepositionEventInstead",[We("event",LS())]),We("getRelated",k.none),We("isExtraPart",ut),We("eventOrder",k.none)],factory:WH,apis:{showAt:(t,s,a,i)=>{t.showAt(s,a,i)},showWithinBounds:(t,s,a,i,d)=>{t.showWithinBounds(s,a,i,d)},showMenuAt:(t,s,a,i)=>{t.showMenuAt(s,a,i)},showMenuWithinBounds:(t,s,a,i,d)=>{t.showMenuWithinBounds(s,a,i,d)},hide:(t,s)=>{t.hide(s)},isOpen:(t,s)=>t.isOpen(s),getContent:(t,s)=>t.getContent(s),setContent:(t,s,a)=>{t.setContent(s,a)},reposition:(t,s)=>{t.reposition(s)}}}),qv=K([Br("type","text"),Hs("data"),We("inputAttributes",{}),We("inputStyles",{}),We("tag","input"),We("inputClasses",[]),as("onSetValue"),$s("fromInputValue",It),$s("toInputValue",It),We("styles",{}),We("eventOrder",{}),tc("inputBehaviours",[Xt,ao]),We("selectOnFocus",!0)]),OF=t=>Ft([ao.config({onFocus:t.selectOnFocus?s=>{const a=s.element,i=di(a);t.type!=="range"&&a.dom.setSelectionRange(0,i.length)}:ie})]),ZH=t=>({...OF(t),...nc(t.inputBehaviours,[Xt.config({store:{mode:"manual",...t.data.map(s=>({initialValue:s})).getOr({}),getValue:s=>t.fromInputValue(di(s.element)),setValue:(s,a)=>{di(s.element)!==a&&Wl(s.element,t.toInputValue(a))}},onSetValue:t.onSetValue})])}),P3=t=>({tag:t.tag,attributes:{type:t.type,...t.inputAttributes},styles:t.inputStyles,classes:t.inputClasses}),RF=(t,s)=>({uid:t.uid,dom:P3(t),components:[],behaviours:ZH(t),eventOrder:t.eventOrder}),cf=nu({name:"Input",configFields:qv(),factory:RF}),rT=ya(S3(),x3()),jH=(t,s)=>{const a=Pa(t,"id").fold(()=>{const i=G("dialog-label");return Hn(s,"id",i),i},It);Hn(t,"aria-labelledby",a)},qH=K([yt("lazySink"),Hs("dragBlockClass"),$s("getBounds",Uc),We("useTabstopAt",Ct),We("firstTabstop",0),We("eventOrder",{}),tc("modalBehaviours",[_n]),va("onExecute"),Fb("onEscape")]),$3={sketch:It},GH=K([ol({name:"draghandle",overrides:(t,s)=>({behaviours:Ft([C0.config({mode:"mouse",getTarget:a=>yl(a,'[role="dialog"]').getOr(a),blockerClass:t.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(s,null,2)).message),getBounds:t.getDragBounds})])})}),yi({schema:[yt("dom")],name:"title"}),yi({factory:$3,schema:[yt("dom")],name:"close"}),yi({factory:$3,schema:[yt("dom")],name:"body"}),ol({factory:$3,schema:[yt("dom")],name:"footer"}),nl({factory:{sketch:(t,s)=>({...t,dom:s.dom,components:s.components})},schema:[We("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),We("components",[])],name:"blocker"})]),KH=(t,s,a,i)=>{const d=jn(),g=Z=>{d.set(Z);const ae=t.lazySink(Z).getOrDie(),ye=i.blocker(),ce=ae.getSystem().build({...ye,components:ye.components.concat([y(Z)]),behaviours:Ft([ao.config({}),so("dialog-blocker-events",[Kg(Nu(),()=>{xt.isBlocked(Z)?ie():_n.focusIn(Z)})])])});fm(ae,ce),_n.focusIn(Z)},h=Z=>{d.clear(),ii(Z.element).each(ae=>{Z.getSystem().getByDom(ae).each(ye=>{gm(ye)})})},C=Z=>Wc(Z,t,"body"),S=Z=>Es(Z,t,"footer"),T=(Z,ae)=>{xt.block(Z,ae)},O=Z=>{xt.unblock(Z)},F=G("modal-events"),z={...t.eventOrder,[fd()]:[F].concat(t.eventOrder["alloy.system.attached"]||[])},q=Nr();return{uid:t.uid,dom:t.dom,components:s,apis:{show:g,hide:h,getBody:C,getFooter:S,setIdle:O,setBusy:T},eventOrder:z,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:nc(t.modalBehaviours,[co.config({}),_n.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt,firstTabstop:t.firstTabstop}),xt.config({getRoot:d.get}),so(F,[or(Z=>{const ae=Wc(Z,t,"title").element,ye=Wy(ae);q.os.isMacOS()&&Wn(ye)?Hn(Z.element,"aria-label",ye):jH(Z.element,ae)})])])}},za=$i({name:"ModalDialog",configFields:qH(),partFields:GH(),factory:KH,apis:{show:(t,s)=>{t.show(s)},hide:(t,s)=>{t.hide(s)},getBody:(t,s)=>t.getBody(s),getFooter:(t,s)=>t.getFooter(s),setBusy:(t,s,a)=>{t.setBusy(s,a)},setIdle:(t,s)=>{t.setIdle(s)}}}),MF=ol({schema:[yt("dom")],name:"label"}),Si=t=>ol({name:""+t+"-edge",overrides:s=>s.model.manager.edgeActions[t].fold(()=>({}),i=>({events:hr([cv(zm(),(d,g,h)=>i(d,h),[s]),cv(vi(),(d,g,h)=>i(d,h),[s]),cv(Nf(),(d,g,h)=>{h.mouseIsDown.get()&&i(d,h)},[s])])}))}),YH=Si("top-left"),I3=Si("top"),BF=Si("top-right"),FF=Si("right"),XH=Si("bottom-right"),NF=Si("bottom"),PF=Si("bottom-left"),$F=Si("left"),JH=yi({name:"thumb",defaults:K({dom:{styles:{position:"absolute"}}}),overrides:t=>({events:hr([Gm(zm(),t,"spectrum"),Gm(Vm(),t,"spectrum"),Gm(Rg(),t,"spectrum"),Gm(vi(),t,"spectrum"),Gm(Nf(),t,"spectrum"),Gm(_b(),t,"spectrum")])})}),aT=t=>Yg(t.event),QH=yi({schema:[Ac("mouseIsDown",()=>cn(!1))],name:"spectrum",overrides:t=>{const a=t.model.manager,i=(d,g)=>a.getValueFromEvent(g).map(h=>a.setValueFrom(d,t,h));return{behaviours:Ft([_n.config({mode:"special",onLeft:(d,g)=>a.onLeft(d,t,aT(g)),onRight:(d,g)=>a.onRight(d,t,aT(g)),onUp:(d,g)=>a.onUp(d,t,aT(g)),onDown:(d,g)=>a.onDown(d,t,aT(g))}),Ys.config({}),ao.config({})]),events:hr([rt(zm(),i),rt(Vm(),i),rt(vi(),i),rt(Nf(),(d,g)=>{t.mouseIsDown.get()&&i(d,g)})])}}});var ez=[MF,$F,FF,I3,NF,YH,BF,PF,XH,JH,QH];const ZC=K("slider.change.value"),tz=t=>t.type.indexOf("touch")!==-1,cT=t=>{const s=t.event.raw;if(tz(s)){const a=s;return a.touches!==void 0&&a.touches.length===1?k.some(a.touches[0]).map(i=>Ms(i.clientX,i.clientY)):k.none()}else{const a=s;return a.clientX!==void 0?k.some(a).map(i=>Ms(i.clientX,i.clientY)):k.none()}},IF="top",LF="right",HF="bottom",nz="left",_0=t=>t.model.minX,k0=t=>t.model.minY,jC=t=>t.model.minX-1,hh=t=>t.model.minY-1,Qf=t=>t.model.maxX,D0=t=>t.model.maxY,qC=t=>t.model.maxX+1,GC=t=>t.model.maxY+1,L3=(t,s,a)=>s(t)-a(t),iT=t=>L3(t,Qf,_0),KC=t=>L3(t,D0,k0),lT=t=>iT(t)/2,zF=t=>KC(t)/2,Gv=(t,s)=>s?t.stepSize*t.speedMultiplier:t.stepSize,VF=t=>t.snapToGrid,H3=t=>t.snapStart,z3=t=>t.rounded,uT=(t,s)=>t[s+"-edge"]!==void 0,UF=t=>uT(t,nz),V3=t=>uT(t,LF),WF=t=>uT(t,IF),ZF=t=>uT(t,HF),ph=t=>t.model.value.get(),Np=(t,s)=>({x:t,y:s}),wm=(t,s)=>{Nn(t,ZC(),{value:s})},oz=(t,s)=>{wm(t,Np(jC(s),hh(s)))},sz=(t,s)=>{wm(t,hh(s))},jF=(t,s)=>{wm(t,Np(lT(s),hh(s)))},qF=(t,s)=>{wm(t,Np(qC(s),hh(s)))},rz=(t,s)=>{wm(t,qC(s))},az=(t,s)=>{wm(t,Np(qC(s),zF(s)))},cz=(t,s)=>{wm(t,Np(qC(s),GC(s)))},GF=(t,s)=>{wm(t,GC(s))},iz=(t,s)=>{wm(t,Np(lT(s),GC(s)))},lz=(t,s)=>{wm(t,Np(jC(s),GC(s)))},uz=(t,s)=>{wm(t,jC(s))},dT=(t,s)=>{wm(t,Np(jC(s),zF(s)))},U3=(t,s,a,i)=>t<s?t:t>a?a:t===s?s-1:Math.max(s,t-i),W3=(t,s,a,i)=>t>a?t:t<s?s:t===a?a+1:Math.min(a,t+i),KF=(t,s,a)=>Math.max(s,Math.min(a,t)),dz=(t,s,a,i,d)=>d.fold(()=>{const g=t-s,h=Math.round(g/i)*i;return KF(s+h,s-1,a+1)},g=>{const h=(t-g)%i,C=Math.round(h/i),S=Math.floor((t-g)/i),T=Math.floor((a-g)/i),O=Math.min(T,S+C),F=g+O*i;return Math.max(g,F)}),mz=(t,s,a)=>Math.min(a,Math.max(t,s))-s,YF=t=>{const{min:s,max:a,range:i,value:d,step:g,snap:h,snapStart:C,rounded:S,hasMinEdge:T,hasMaxEdge:O,minBound:F,maxBound:z,screenRange:q}=t,Z=T?s-1:s,ae=O?a+1:a;if(d<F)return Z;if(d>z)return ae;{const ye=mz(d,F,z),ce=KF(ye/q*i+s,Z,ae);return h&&ce>=s&&ce<=a?dz(ce,s,a,g,C):S?Math.round(ce):ce}},XF=t=>{const{min:s,max:a,range:i,value:d,hasMinEdge:g,hasMaxEdge:h,maxBound:C,maxOffset:S,centerMinEdge:T,centerMaxEdge:O}=t;return d<s?g?0:T:d>a?h?C:O:(d-s)/i*S},Z3="top",JF="right",QF="bottom",j3="left",fz="width",gz="height",Sm=t=>t.element.dom.getBoundingClientRect(),xm=(t,s)=>t[s],mT=t=>{const s=Sm(t);return xm(s,j3)},e6=t=>{const s=Sm(t);return xm(s,JF)},YC=t=>{const s=Sm(t);return xm(s,Z3)},t6=t=>{const s=Sm(t);return xm(s,QF)},n6=t=>{const s=Sm(t);return xm(s,fz)},o6=t=>{const s=Sm(t);return xm(s,gz)},s6=(t,s,a)=>(t+s)/2-a,r6=(t,s)=>{const a=Sm(t),i=Sm(s),d=xm(a,j3),g=xm(a,JF),h=xm(i,j3);return s6(d,g,h)},a6=(t,s)=>{const a=Sm(t),i=Sm(s),d=xm(a,Z3),g=xm(a,QF),h=xm(i,Z3);return s6(d,g,h)},Kv=(t,s)=>{Nn(t,ZC(),{value:s})},q3=(t,s,a)=>{const i={min:_0(s),max:Qf(s),range:iT(s),value:a,step:Gv(s),snap:VF(s),snapStart:H3(s),rounded:z3(s),hasMinEdge:UF(s),hasMaxEdge:V3(s),minBound:mT(t),maxBound:e6(t),screenRange:n6(t)};return YF(i)},hz=(t,s,a)=>{const i=q3(t,s,a);return Kv(t,i),i},pz=(t,s)=>{const a=_0(s);Kv(t,a)},bz=(t,s)=>{const a=Qf(s);Kv(t,a)},vz=(t,s,a,i)=>{const g=(t>0?W3:U3)(ph(a),_0(a),Qf(a),Gv(a,i));return Kv(s,g),k.some(g)},c6=t=>(s,a,i)=>vz(t,s,a,i).map(Ct),yz=t=>cT(t).map(a=>a.left),Cz=(t,s,a,i,d)=>{const h=n6(t),C=i.bind(O=>k.some(r6(O,t))).getOr(0),S=d.bind(O=>k.some(r6(O,t))).getOr(h),T={min:_0(s),max:Qf(s),range:iT(s),value:a,hasMinEdge:UF(s),hasMaxEdge:V3(s),minBound:mT(t),maxBound:e6(t),maxOffset:h,centerMinEdge:C,centerMaxEdge:S};return XF(T)},G3=(t,s,a,i,d,g)=>{const h=Cz(s,g,a,i,d);return mT(s)-mT(t)+h},wz=(t,s,a,i)=>{const d=ph(a),g=G3(t,i.getSpectrum(t),d,i.getLeftEdge(t),i.getRightEdge(t),a),h=Ya(s.element)/2;Yn(s.element,"left",g-h+"px")},Sz=c6(-1),xz=c6(1),Ez=k.none,Tz=k.none,Az={"top-left":k.none(),top:k.none(),"top-right":k.none(),right:k.some(rz),"bottom-right":k.none(),bottom:k.none(),"bottom-left":k.none(),left:k.some(uz)};var K3=Object.freeze({__proto__:null,setValueFrom:hz,setToMin:pz,setToMax:bz,findValueOfOffset:q3,getValueFromEvent:yz,findPositionOfValue:G3,setPositionFromValue:wz,onLeft:Sz,onRight:xz,onUp:Ez,onDown:Tz,edgeActions:Az});const fT=(t,s)=>{Nn(t,ZC(),{value:s})},Y3=(t,s,a)=>{const i={min:k0(s),max:D0(s),range:KC(s),value:a,step:Gv(s),snap:VF(s),snapStart:H3(s),rounded:z3(s),hasMinEdge:WF(s),hasMaxEdge:ZF(s),minBound:YC(t),maxBound:t6(t),screenRange:o6(t)};return YF(i)},_z=(t,s,a)=>{const i=Y3(t,s,a);return fT(t,i),i},XC=(t,s)=>{const a=k0(s);fT(t,a)},i6=(t,s)=>{const a=D0(s);fT(t,a)},kz=(t,s,a,i)=>{const g=(t>0?W3:U3)(ph(a),k0(a),D0(a),Gv(a,i));return fT(s,g),k.some(g)},l6=t=>(s,a,i)=>kz(t,s,a,i).map(Ct),u6=t=>cT(t).map(a=>a.top),Dz=(t,s,a,i,d)=>{const h=o6(t),C=i.bind(O=>k.some(a6(O,t))).getOr(0),S=d.bind(O=>k.some(a6(O,t))).getOr(h),T={min:k0(s),max:D0(s),range:KC(s),value:a,hasMinEdge:WF(s),hasMaxEdge:ZF(s),minBound:YC(t),maxBound:t6(t),maxOffset:h,centerMinEdge:C,centerMaxEdge:S};return XF(T)},X3=(t,s,a,i,d,g)=>{const h=Dz(s,g,a,i,d);return YC(s)-YC(t)+h},Oz=(t,s,a,i)=>{const d=ph(a),g=X3(t,i.getSpectrum(t),d,i.getTopEdge(t),i.getBottomEdge(t),a),h=ea(s.element)/2;Yn(s.element,"top",g-h+"px")},Rz=k.none,Mz=k.none,Bz=l6(-1),Fz=l6(1),Nz={"top-left":k.none(),top:k.some(sz),"top-right":k.none(),right:k.none(),"bottom-right":k.none(),bottom:k.some(GF),"bottom-left":k.none(),left:k.none()};var d6=Object.freeze({__proto__:null,setValueFrom:_z,setToMin:XC,setToMax:i6,findValueOfOffset:Y3,getValueFromEvent:u6,findPositionOfValue:X3,setPositionFromValue:Oz,onLeft:Rz,onRight:Mz,onUp:Bz,onDown:Fz,edgeActions:Nz});const JC=(t,s)=>{Nn(t,ZC(),{value:s})},gT=(t,s)=>({x:t,y:s}),m6=(t,s,a)=>{const i=q3(t,s,a.left),d=Y3(t,s,a.top),g=gT(i,d);return JC(t,g),g},f6=(t,s,a,i,d)=>{const g=t>0?W3:U3,h=s?ph(i).x:g(ph(i).x,_0(i),Qf(i),Gv(i,d)),C=s?g(ph(i).y,k0(i),D0(i),Gv(i,d)):ph(i).y;return JC(a,gT(h,C)),k.some(h)},QC=(t,s)=>(a,i,d)=>f6(t,s,a,i,d).map(Ct),g6=(t,s)=>{const a=_0(s),i=k0(s);JC(t,gT(a,i))},Pz=(t,s)=>{const a=Qf(s),i=D0(s);JC(t,gT(a,i))},$z=t=>cT(t),Iz=(t,s,a,i)=>{const d=ph(a),g=G3(t,i.getSpectrum(t),d.x,i.getLeftEdge(t),i.getRightEdge(t),a),h=X3(t,i.getSpectrum(t),d.y,i.getTopEdge(t),i.getBottomEdge(t),a),C=Ya(s.element)/2,S=ea(s.element)/2;Yn(s.element,"left",g-C+"px"),Yn(s.element,"top",h-S+"px")},Lz=QC(-1,!1),J3=QC(1,!1),h6=QC(-1,!0),Hz=QC(1,!0),p6={"top-left":k.some(oz),top:k.some(jF),"top-right":k.some(qF),right:k.some(az),"bottom-right":k.some(cz),bottom:k.some(iz),"bottom-left":k.some(lz),left:k.some(dT)};var zz=Object.freeze({__proto__:null,setValueFrom:m6,setToMin:g6,setToMax:Pz,getValueFromEvent:$z,setPositionFromValue:Iz,onLeft:Lz,onRight:J3,onUp:h6,onDown:Hz,edgeActions:p6});const Vz=[We("stepSize",1),We("speedMultiplier",10),We("onChange",ie),We("onChoose",ie),We("onInit",ie),We("onDragStart",ie),We("onDragEnd",ie),We("snapToGrid",!1),We("rounded",!0),Hs("snapStart"),xl("model",pi("mode",{x:[We("minX",0),We("maxX",100),Ac("value",t=>cn(t.mode.minX)),yt("getInitialValue"),fr("manager",K3)],y:[We("minY",0),We("maxY",100),Ac("value",t=>cn(t.mode.minY)),yt("getInitialValue"),fr("manager",d6)],xy:[We("minX",0),We("maxX",100),We("minY",0),We("maxY",100),Ac("value",t=>cn({x:t.mode.minX,y:t.mode.minY})),yt("getInitialValue"),fr("manager",zz)]})),tc("sliderBehaviours",[_n,Xt]),Ac("mouseIsDown",()=>cn(!1))],Dd=$i({name:"Slider",configFields:Vz,partFields:ez,factory:(t,s,a,i)=>{const d=Ye=>Wc(Ye,t,"thumb"),g=Ye=>Wc(Ye,t,"spectrum"),h=Ye=>Es(Ye,t,"left-edge"),C=Ye=>Es(Ye,t,"right-edge"),S=Ye=>Es(Ye,t,"top-edge"),T=Ye=>Es(Ye,t,"bottom-edge"),O=t.model,F=O.manager,z=(Ye,Kt)=>{F.setPositionFromValue(Ye,Kt,t,{getLeftEdge:h,getRightEdge:C,getTopEdge:S,getBottomEdge:T,getSpectrum:g})},q=(Ye,Kt)=>{O.value.set(Kt);const Tt=d(Ye);z(Ye,Tt)},Z=(Ye,Kt)=>{q(Ye,Kt);const Tt=d(Ye);return t.onChange(Ye,Tt,Kt),k.some(!0)},ae=Ye=>{F.setToMin(Ye,t)},ye=Ye=>{F.setToMax(Ye,t)},ce=Ye=>{const Kt=()=>{Es(Ye,t,"thumb").each(_t=>{const wt=O.value.get();t.onChoose(Ye,_t,wt)})},Tt=t.mouseIsDown.get();t.mouseIsDown.set(!1),Tt&&Kt()},xe=(Ye,Kt)=>{Kt.stop(),t.mouseIsDown.set(!0),t.onDragStart(Ye,d(Ye))},De=(Ye,Kt)=>{Kt.stop(),t.onDragEnd(Ye,d(Ye)),ce(Ye)},Ke=Ye=>{Es(Ye,t,"spectrum").map(_n.focusIn)};return{uid:t.uid,dom:t.dom,components:s,behaviours:nc(t.sliderBehaviours,[_n.config({mode:"special",focusIn:Ke}),Xt.config({store:{mode:"manual",getValue:Ye=>O.value.get(),setValue:q}}),ou.config({channels:{[cm()]:{onReceive:ce}}})]),events:hr([rt(ZC(),(Ye,Kt)=>{Z(Ye,Kt.event.value)}),or((Ye,Kt)=>{const Tt=O.getInitialValue();O.value.set(Tt);const _t=d(Ye);z(Ye,_t);const wt=g(Ye);t.onInit(Ye,_t,wt,O.value.get())}),rt(zm(),xe),rt(Rg(),De),rt(vi(),(Ye,Kt)=>{Ke(Ye),xe(Ye,Kt)}),rt(_b(),De)]),apis:{resetToMin:ae,resetToMax:ye,setValue:q,refresh:z},domModification:{styles:{position:"relative"}}}},apis:{setValue:(t,s,a)=>{t.setValue(s,a)},resetToMin:(t,s)=>{t.resetToMin(s)},resetToMax:(t,s)=>{t.resetToMax(s)},refresh:(t,s)=>{t.refresh(s)}}}),Q3="container",b6=[tc("slotBehaviours",[])],v6=t=>"<alloy.field."+t+">",Uz=t=>{const s=(()=>{const g=[];return{slot:(C,S)=>(g.push(C),Bi(Q3,v6(C),S)),record:K(g)}})(),a=t(s),i=s.record(),d=Ne(i,g=>yi({name:g,pname:v6(g)}));return dk(Q3,b6,d,Wz,a)},Wz=(t,s)=>{const a=ae=>jb(t),i=(ae,ye)=>Es(ae,t,ye),d=(ae,ye)=>(ce,xe)=>Es(ce,t,xe).map(De=>ae(De,xe)).getOr(ye),g=ae=>(ye,ce)=>{ft(ce,xe=>ae(ye,xe))},h=(ae,ye)=>ha(ae.element,"aria-hidden")!=="true",C=(ae,ye)=>{if(!h(ae)){const ce=ae.element;Ho(ce,"display"),tr(ce,"aria-hidden"),Nn(ae,D1(),{name:ye,visible:!0})}},S=(ae,ye)=>{if(h(ae)){const ce=ae.element;Yn(ce,"display","none"),Hn(ce,"aria-hidden","true"),Nn(ae,D1(),{name:ye,visible:!1})}},T=d(h,!1),O=d(S),F=g(O),z=ae=>F(ae,a()),q=d(C),Z={getSlotNames:a,getSlot:i,isShowing:T,hideSlot:O,hideAllSlots:z,showSlot:q};return{uid:t.uid,dom:t.dom,components:s,behaviours:TC(t.slotBehaviours),apis:Z}},xi={...mt({getSlotNames:(t,s)=>t.getSlotNames(s),getSlot:(t,s,a)=>t.getSlot(s,a),isShowing:(t,s,a)=>t.isShowing(s,a),hideSlot:(t,s,a)=>t.hideSlot(s,a),hideAllSlots:(t,s)=>t.hideAllSlots(s),showSlot:(t,s,a)=>t.showSlot(s,a)},t=>Qm(t)),sketch:Uz},Zz=(t,s)=>_o(t,(d,g)=>s(g,d.len).fold(K(d),C=>({len:C.finish,list:d.list.concat([C])})),{len:0,list:[]}).list,eD=(t,s,a)=>({within:t,extra:s,withinWidth:a}),y6=(t,s,a)=>{const i=Zz(t,(C,S)=>{const T=a(C);return k.some({element:C,start:S,finish:S+T,width:T})}),d=ro(i,C=>C.finish<=s),g=Qn(d,(C,S)=>C+S.width,0),h=i.slice(d.length);return{within:d,extra:h,withinWidth:g}},hT=t=>Ne(t,s=>s.element),jz=(t,s,a)=>{const i=hT(t.concat(s));return eD(i,[],a)},qz=(t,s,a,i)=>{const d=hT(t).concat([a]);return eD(d,hT(s),i)},C6=(t,s,a)=>eD(hT(t),[],a),Gz=(t,s,a)=>{const i=y6(s,t,a);return i.extra.length===0?k.some(i):k.none()},Kz=(t,s,a,i)=>{const d=Gz(t,s,a).getOrThunk(()=>y6(s,t-a(i),a)),g=d.within,h=d.extra,C=d.withinWidth;return h.length===1&&h[0].width<=a(i)?jz(g,h,C):h.length>=1?qz(g,h,i,C):C6(g,h,C)},w6=(t,s)=>{const a=Ne(s,i=>y(i));Ts.setGroups(t,a)},Yz=t=>Wo(t,s=>Vr(s.element).bind(a=>s.getSystem().getByDom(a).toOptional())),S6=(t,s,a)=>{const i=s.builtGroups.get();if(i.length===0)return;const d=Wc(t,s,"primary"),g=Co.getCoupled(t,"overflowGroup");Yn(d.element,"visibility","hidden");const h=i.concat([g]),C=Yz(h);a([]),w6(d,h);const S=Ya(d.element),T=Kz(S,s.builtGroups.get(),O=>Math.ceil(O.element.dom.getBoundingClientRect().width),g);T.extra.length===0?(co.remove(d,g),a([])):(w6(d,T.within),a(T.extra)),Ho(d.element,"visibility"),vl(d.element),C.each(ao.focus)},ew=K([tc("splitToolbarBehaviours",[Co]),Ac("builtGroups",()=>cn([]))]),x6=K([Kl(["overflowToggledClass"]),md("getOverflowBounds"),yt("lazySink"),Ac("overflowGroups",()=>cn([])),as("onOpened"),as("onClosed")].concat(ew())),Xz=K([yi({factory:Ts,schema:ni(),name:"primary"}),nl({schema:ni(),name:"overflow"}),nl({name:"overflow-button"}),nl({name:"overflow-group"})]),Jz=K([yt("items"),Kl(["itemSelector"]),tc("tgroupBehaviours",[_n])]),Qz=K([Ub({name:"items",unit:"item"})]),eV=(t,s,a,i)=>({uid:t.uid,dom:t.dom,components:s,behaviours:nc(t.tgroupBehaviours,[_n.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),pT=$i({name:"ToolbarGroup",configFields:Jz(),partFields:Qz(),factory:eV}),E6=t=>Ne(t,s=>y(s)),bT=(t,s,a)=>{S6(t,a,i=>{a.overflowGroups.set(i),s.getOpt(t).each(d=>{gh.setGroups(d,E6(i))})})},T6=(t,s,a,i)=>{const d=fs(gh.sketch({fetch:()=>os.nu(g=>{g(E6(t.overflowGroups.get()))}),layouts:{onLtr:()=>[gr,Ca],onRtl:()=>[Ca,gr],onBottomLtr:()=>[Oa,hc],onBottomRtl:()=>[hc,Oa]},getBounds:a.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:i["overflow-button"](),toolbar:i.overflow()},onToggled:(g,h)=>t[h?"onOpened":"onClosed"](g)}));return{uid:t.uid,dom:t.dom,components:s,behaviours:nc(t.splitToolbarBehaviours,[Co.config({others:{overflowGroup:()=>pT.sketch({...i["overflow-group"](),items:[d.asSpec()]})}})]),apis:{setGroups:(g,h)=>{t.builtGroups.set(Ne(h,g.getSystem().build)),bT(g,d,t)},refresh:g=>bT(g,d,t),toggle:g=>{d.getOpt(g).each(h=>{gh.toggle(h)})},toggleWithoutFocusing:g=>{d.getOpt(g).each(gh.toggleWithoutFocusing)},isOpen:g=>d.getOpt(g).map(gh.isOpen).getOr(!1),reposition:g=>{d.getOpt(g).each(h=>{gh.reposition(h)})},getOverflow:g=>d.getOpt(g).bind(gh.getToolbar)},domModification:{attributes:{role:"group"}}}},tD=$i({name:"SplitFloatingToolbar",configFields:x6(),partFields:Xz(),factory:T6,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s),getOverflow:(t,s)=>t.getOverflow(s)}}),tV=K([Kl(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),as("onOpened"),as("onClosed")].concat(ew())),A6=K([yi({factory:Ts,schema:ni(),name:"primary"}),yi({factory:Ts,schema:ni(),name:"overflow",overrides:t=>({toolbarBehaviours:Ft([al.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:s=>{Es(s,t,"overflow-button").each(a=>{Jo.off(a)}),t.onClosed(s)},onGrown:s=>{t.onOpened(s)},onStartGrow:s=>{Es(s,t,"overflow-button").each(Jo.on)}}),_n.config({mode:"acyclic",onEscape:s=>(Es(s,t,"overflow-button").each(ao.focus),k.some(!0))})])})}),nl({name:"overflow-button",overrides:t=>({buttonBehaviours:Ft([Jo.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])})}),nl({name:"overflow-group"})]),nV=(t,s)=>Es(t,s,"overflow").map(al.hasGrown).getOr(!1),nD=(t,s,a)=>{Es(t,s,"overflow-button").each(i=>{Es(t,s,"overflow").each(d=>{if(oD(t,s),al.hasShrunk(d)){const g=s.onOpened;s.onOpened=h=>{a||_n.focusIn(d),g(h),s.onOpened=g}}else{const g=s.onClosed;s.onClosed=h=>{a||ao.focus(i),g(h),s.onClosed=g}}al.toggleGrow(d)})})},oD=(t,s)=>{Es(t,s,"overflow").each(a=>{S6(t,s,i=>{const d=Ne(i,g=>y(g));Ts.setGroups(a,d)}),Es(t,s,"overflow-button").each(i=>{al.hasGrown(a)&&Jo.on(i)}),al.refresh(a)})},oV=(t,s,a,i)=>{const d="alloy.toolbar.toggle",g=(h,C)=>{const S=Ne(C,h.getSystem().build);t.builtGroups.set(S)};return{uid:t.uid,dom:t.dom,components:s,behaviours:nc(t.splitToolbarBehaviours,[Co.config({others:{overflowGroup:h=>pT.sketch({...i["overflow-group"](),items:[ti.sketch({...i["overflow-button"](),action:C=>{$o(h,d)}})]})}}),so("toolbar-toggle-events",[rt(d,h=>{nD(h,t,!1)})])]),apis:{setGroups:(h,C)=>{g(h,C),oD(h,t)},refresh:h=>oD(h,t),toggle:h=>{nD(h,t,!1)},toggleWithoutFocusing:h=>{nD(h,t,!0)},isOpen:h=>nV(h,t)},domModification:{attributes:{role:"group"}}}},sD=$i({name:"SplitSlidingToolbar",configFields:tV(),partFields:A6(),factory:oV,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},toggle:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s)}}),sV=(t,s)=>({uid:t.uid,dom:t.dom,components:t.components,events:QE(t.action),behaviours:nc(t.tabButtonBehaviours,[ao.config({}),_n.config({mode:"execution",useSpace:!0,useEnter:!0}),Xt.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}),rV=nu({name:"TabButton",configFields:[We("uid",void 0),yt("value"),Ia("dom","dom",Xd(()=>({attributes:{role:"tab",id:G("aria"),"aria-selected":"false"}})),kt()),Hs("action"),We("domModification",{}),tc("tabButtonBehaviours",[ao,_n,Xt]),yt("view")],factory:sV}),aV=K([yt("tabs"),yt("dom"),We("clickToDismiss",!1),tc("tabbarBehaviours",[vs,_n]),Kl(["tabClass","selectedClass"])]),cV=Ub({factory:rV,name:"tabs",unit:"tab",overrides:t=>{const s=(i,d)=>{vs.dehighlight(i,d),Nn(i,Mb(),{tabbar:i,button:d})},a=(i,d)=>{vs.highlight(i,d),Nn(i,zS(),{tabbar:i,button:d})};return{action:i=>{const d=i.getSystem().getByUid(t.uid).getOrDie(),g=vs.isHighlighted(d,i);(g&&t.clickToDismiss?s:g?ie:a)(d,i)},domModification:{classes:[t.markers.tabClass]}}}}),iV=K([cV]),vT=(t,s,a,i)=>({uid:t.uid,dom:t.dom,components:s,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:nc(t.tabbarBehaviours,[vs.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:(d,g)=>{Hn(g.element,"aria-selected","true")},onDehighlight:(d,g)=>{Hn(g.element,"aria-selected","false")}}),_n.config({mode:"flow",getInitial:d=>vs.getHighlighted(d).map(g=>g.element),selector:"."+t.markers.tabClass,executeOnMove:!0})])}),yT=$i({name:"Tabbar",configFields:aV(),partFields:iV(),factory:vT}),rD=(t,s)=>({uid:t.uid,dom:t.dom,behaviours:nc(t.tabviewBehaviours,[co.config({})]),domModification:{attributes:{role:"tabpanel"}}}),_6=nu({name:"Tabview",configFields:[tc("tabviewBehaviours",[co])],factory:rD}),lV=K([We("selectFirst",!0),as("onChangeTab"),as("onDismissTab"),We("tabs",[]),tc("tabSectionBehaviours",[])]),uV=yi({factory:yT,schema:[yt("dom"),Lm("markers",[yt("tabClass"),yt("selectedClass")])],name:"tabbar",defaults:t=>({tabs:t.tabs})}),aD=yi({factory:_6,name:"tabview"}),cD=K([uV,aD]),CT=(t,s,a,i)=>{const d=h=>{const C=Xt.getValue(h);Es(h,t,"tabview").each(S=>{be(t.tabs,O=>O.value===C).each(O=>{const F=O.view();Pa(h.element,"id").each(z=>{Hn(S.element,"aria-labelledby",z)}),co.set(S,F),t.onChangeTab(S,h,F)})})},g=(h,C)=>{Es(h,t,"tabbar").each(S=>{C(S).each(U1)})};return{uid:t.uid,dom:t.dom,components:s,behaviours:TC(t.tabSectionBehaviours),events:hr(Oe([t.selectFirst?[or((h,C)=>{g(h,vs.getFirst)})]:[],[rt(zS(),(h,C)=>{const S=C.event.button;d(S)}),rt(Mb(),(h,C)=>{const S=C.event.button;t.onDismissTab(h,S)})]])),apis:{getViewItems:h=>Es(h,t,"tabview").map(C=>co.contents(C)).getOr([]),showTab:(h,C)=>{g(h,T=>{const O=vs.getCandidates(T);return be(O,z=>Xt.getValue(z)===C).filter(z=>!vs.isHighlighted(T,z))})}}}},O0=$i({name:"TabSection",configFields:lV(),partFields:cD(),factory:CT,apis:{getViewItems:(t,s)=>t.getViewItems(s),showTab:(t,s,a)=>{t.showTab(s,a)}}}),wT=(t,s,a)=>{const i=Xt.getValue(a);Xt.setValue(s,i),D6(s)},k6=(t,s)=>{const a=t.element,i=di(a),d=a.dom;ha(a,"type")!=="number"&&s(d,i)},D6=t=>{k6(t,(s,a)=>s.setSelectionRange(a.length,a.length))},dV=(t,s)=>{k6(t,(a,i)=>a.setSelectionRange(s,i.length))},mV=(t,s,a)=>{if(t.selectsOver){const i=Xt.getValue(s),d=t.getDisplayText(i),g=Xt.getValue(a);return t.getDisplayText(g).indexOf(d)===0?k.some(()=>{wT(t,s,a),dV(s,d.length)}):k.none()}else return k.none()},iD=K("alloy.typeahead.itemexecute"),fV=(t,s,a,i)=>{const d=(F,z,q)=>{t.previewing.set(!1);const Z=Co.getCoupled(F,"sandbox");if(ms.isOpen(Z))it.getCurrent(Z).each(ae=>{vs.getHighlighted(ae).fold(()=>{q(ae)},()=>{B2(Z,ae.element,"keydown",z)})});else{const ae=ye=>{it.getCurrent(ye).each(q)};nT(t,h(F),F,Z,i,ae,jc.HighlightMenuAndItem).get(ie)}},g=OF(t),h=F=>z=>z.map(q=>{const Z=Xs(q.menus),ae=me(Z,ce=>ro(ce.items,xe=>xe.type==="item"));return Xt.getState(F).update(Ne(ae,ce=>ce.data)),q}),C=F=>it.getCurrent(F),S="typeaheadevents",T=[ao.config({}),Xt.config({onSetValue:t.onSetValue,store:{mode:"dataset",getDataKey:F=>di(F.element),getFallbackEntry:F=>({value:F,meta:{}}),setValue:(F,z)=>{Wl(F.element,t.model.getDisplayText(z))},...t.initialData.map(F=>Hm("initialValue",F)).getOr({})}}),o3.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:(F,z)=>{const q=Co.getCoupled(F,"sandbox");if(ao.isFocused(F)&&di(F.element).length>=t.minChars){const ae=C(q).bind(ce=>vs.getHighlighted(ce).map(Xt.getValue));t.previewing.set(!0);const ye=ce=>{C(q).each(xe=>{ae.fold(()=>{t.model.selectsOver&&vs.highlightFirst(xe)},De=>{vs.highlightBy(xe,Ke=>Xt.getValue(Ke).value===De.value),vs.getHighlighted(xe).orThunk(()=>(vs.highlightFirst(xe),k.none()))})})};nT(t,h(F),F,q,i,ye,jc.HighlightJustMenu).get(ie)}},cancelEvent:Ob()}),_n.config({mode:"special",onDown:(F,z)=>(d(F,z,vs.highlightFirst),k.some(!0)),onEscape:F=>{const z=Co.getCoupled(F,"sandbox");return ms.isOpen(z)?(ms.close(z),k.some(!0)):k.none()},onUp:(F,z)=>(d(F,z,vs.highlightLast),k.some(!0)),onEnter:F=>{const z=Co.getCoupled(F,"sandbox"),q=ms.isOpen(z);if(q&&!t.previewing.get())return C(z).bind(Z=>vs.getHighlighted(Z)).map(Z=>(Nn(F,iD(),{item:Z}),!0));{const Z=Xt.getValue(F);return $o(F,Ob()),t.onExecute(z,F,Z),q&&ms.close(z),k.some(!0)}}}),Jo.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),Co.config({others:{sandbox:F=>oT(t,F,{onOpen:()=>Jo.on(F),onClose:()=>{t.lazyTypeaheadComp.get().each(z=>tr(z.element,"aria-activedescendant")),Jo.off(F)}})}}),so(S,[or(F=>{t.lazyTypeaheadComp.set(k.some(F))}),Cd(F=>{t.lazyTypeaheadComp.set(k.none())}),Km(F=>{const z=ie;SF(t,h(F),F,i,z,jc.HighlightMenuAndItem).get(ie)}),rt(iD(),(F,z)=>{const q=Co.getCoupled(F,"sandbox");wT(t.model,F,z.event.item),$o(F,Ob()),t.onItemExecute(F,q,z.event.item,Xt.getValue(F)),ms.close(q),D6(F)})].concat(t.dismissOnBlur?[rt(Pu(),F=>{const z=Co.getCoupled(F,"sandbox");Vr(z.element).isNone()&&ms.close(z)})]:[]))],O={[Wm()]:[Xt.name(),o3.name(),S],...t.eventOrder};return{uid:t.uid,dom:P3(At(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...g,...nc(t.typeaheadBehaviours,T)},eventOrder:O}},gV=K([Hs("lazySink"),yt("fetch"),We("minChars",5),We("responseTime",1e3),as("onOpen"),We("getHotspot",k.some),We("getAnchorOverrides",K({})),We("layouts",k.none()),We("eventOrder",{}),u2("model",{},[We("getDisplayText",t=>t.meta!==void 0&&t.meta.text!==void 0?t.meta.text:t.value),We("selectsOver",!0),We("populateFromBrowse",!0)]),as("onSetValue"),va("onExecute"),as("onItemExecute"),We("inputClasses",[]),We("inputAttributes",{}),We("inputStyles",{}),We("matchWidth",!0),We("useMinWidth",!1),We("dismissOnBlur",!0),Kl(["openClass"]),Hs("initialData"),Hs("listRole"),tc("typeaheadBehaviours",[ao,Xt,o3,_n,Jo,Co]),Ac("lazyTypeaheadComp",()=>cn(k.none)),Ac("previewing",()=>cn(!0))].concat(qv()).concat(LC())),hV=K([nl({schema:[qS()],name:"menu",overrides:t=>({fakeFocus:!0,onHighlightItem:(s,a,i)=>{t.previewing.get()?t.lazyTypeaheadComp.get().each(d=>{mV(t.model,d,i).fold(()=>{t.model.selectsOver?(vs.dehighlight(a,i),t.previewing.set(!0)):t.previewing.set(!1)},(g=>{g(),t.previewing.set(!1)}))}):t.lazyTypeaheadComp.get().each(d=>{t.model.populateFromBrowse&&wT(t.model,d,i),Pa(i.element,"id").each(g=>Hn(d.element,"aria-activedescendant",g))})},onExecute:(s,a)=>t.lazyTypeaheadComp.get().map(i=>(Nn(i,iD(),{item:a}),!0)),onHover:(s,a)=>{t.previewing.set(!1),t.lazyTypeaheadComp.get().each(i=>{t.model.populateFromBrowse&&wT(t.model,i,a)})}})})]),pV=$i({name:"Typeahead",configFields:gV(),partFields:hV(),factory:fV});var bV=tinymce.util.Tools.resolve("tinymce.ThemeManager"),ST=tinymce.util.Tools.resolve("tinymce.util.Delay"),tw=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),O6=tinymce.util.Tools.resolve("tinymce.EditorManager"),Yv=tinymce.util.Tools.resolve("tinymce.Env"),Wu;(function(t){t.default="wrap",t.floating="floating",t.sliding="sliding",t.scrolling="scrolling"})(Wu||(Wu={}));var Zu;(function(t){t.auto="auto",t.top="top",t.bottom="bottom"})(Zu||(Zu={}));const js=t=>s=>s.options.get(t),nw=t=>s=>k.from(t(s)),xT=t=>{const s=Yv.deviceType.isPhone(),a=Yv.deviceType.isTablet()||s,i=t.options.register,d=h=>pe(h)||h===!1,g=h=>pe(h)||Gn(h);i("skin",{processor:h=>pe(h)||h===!1,default:"oxide"}),i("skin_url",{processor:"string"}),i("height",{processor:g,default:Math.max(t.getElement().offsetHeight,400)}),i("width",{processor:g,default:tw.DOM.getStyle(t.getElement(),"width")}),i("min_height",{processor:"number",default:100}),i("min_width",{processor:"number"}),i("max_height",{processor:"number"}),i("max_width",{processor:"number"}),i("style_formats",{processor:"object[]"}),i("style_formats_merge",{processor:"boolean",default:!1}),i("style_formats_autohide",{processor:"boolean",default:!1}),i("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),i("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),i("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),i("font_size_input_default_unit",{processor:"string",default:"pt"}),i("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),i("content_langs",{processor:"object[]"}),i("removed_menuitems",{processor:"string",default:""}),i("menubar",{processor:h=>pe(h)||Rt(h),default:!s}),i("menu",{processor:"object",default:{}}),i("toolbar",{processor:h=>Rt(h)||pe(h)||sn(h)?{value:h,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),Xe(9,h=>{i("toolbar"+(h+1),{processor:"string"})}),i("toolbar_mode",{processor:"string",default:a?"scrolling":"floating"}),i("toolbar_groups",{processor:"object",default:{}}),i("toolbar_location",{processor:"string",default:Zu.auto}),i("toolbar_persist",{processor:"boolean",default:!1}),i("toolbar_sticky",{processor:"boolean",default:t.inline}),i("toolbar_sticky_offset",{processor:"number",default:0}),i("fixed_toolbar_container",{processor:"string",default:""}),i("fixed_toolbar_container_target",{processor:"object"}),i("ui_mode",{processor:"string",default:"combined"}),i("file_picker_callback",{processor:"function"}),i("file_picker_validator_handler",{processor:"function"}),i("file_picker_types",{processor:"string"}),i("typeahead_urls",{processor:"boolean",default:!0}),i("anchor_top",{processor:d,default:"#top"}),i("anchor_bottom",{processor:d,default:"#bottom"}),i("draggable_modal",{processor:"boolean",default:!1}),i("statusbar",{processor:"boolean",default:!0}),i("elementpath",{processor:"boolean",default:!0}),i("branding",{processor:"boolean",default:!0}),i("promotion",{processor:"boolean",default:!0}),i("resize",{processor:h=>h==="both"||Rt(h),default:!Yv.deviceType.isTouch()}),i("sidebar_show",{processor:"string"}),i("help_accessibility",{processor:"boolean",default:t.hasPlugin("help")}),i("default_font_stack",{processor:"string[]",default:[]})},Va=js("readonly"),ET=js("disabled"),lD=js("height"),uD=js("width"),dD=nw(js("min_width")),mD=nw(js("min_height")),TT=nw(js("max_width")),fD=nw(js("max_height")),R6=nw(js("style_formats")),M6=js("style_formats_merge"),B6=js("style_formats_autohide"),F6=js("content_langs"),N6=js("removed_menuitems"),R0=js("toolbar_mode"),P6=js("toolbar_groups"),gD=js("toolbar_location"),vV=js("fixed_toolbar_container"),yV=js("fixed_toolbar_container_target"),$6=js("toolbar_persist"),I6=js("toolbar_sticky_offset"),L6=js("menubar"),AT=js("toolbar"),H6=js("file_picker_callback"),z6=js("file_picker_validator_handler"),V6=js("font_size_input_default_unit"),U6=js("file_picker_types"),hD=js("typeahead_urls"),W6=js("anchor_top"),pD=js("anchor_bottom"),Z6=js("draggable_modal"),bD=js("statusbar"),j6=js("elementpath"),_T=js("branding"),q6=js("resize"),G6=js("paste_as_text"),K6=js("sidebar_show"),Y6=js("promotion"),X6=js("help_accessibility"),J6=js("default_font_stack"),Q6=js("skin"),vD=t=>t.options.get("skin")===!1,kT=t=>t.options.get("menubar")!==!1,eN=t=>{const s=t.options.get("skin_url");if(vD(t))return s;if(s)return t.documentBaseURI.toAbsolute(s);{const a=t.options.get("skin");return O6.baseURL+"/skins/ui/"+a}},CV=t=>k.from(t.options.get("skin_url")),tN=t=>t.options.get("line_height_formats").split(" "),DT=t=>{const s=AT(t),a=pe(s),i=sn(s)&&s.length>0;return!ow(t)&&(i||a||s===!0)},OT=t=>{const s=Xe(9,i=>t.options.get("toolbar"+(i+1))),a=ro(s,pe);return Er(a.length>0,a)},ow=t=>OT(t).fold(()=>{const s=AT(t);return Bt(s,pe)&&s.length>0},Ct),yD=t=>gD(t)===Zu.bottom,nN=t=>{var s;if(!t.inline)return k.none();const a=(s=vV(t))!==null&&s!==void 0?s:"";if(a.length>0)return Bs(Oi(),a);const i=yV(t);return Wn(i)?k.some(zt.fromDom(i)):k.none()},Xv=t=>t.inline&&nN(t).isSome(),CD=t=>nN(t).getOrThunk(()=>Il(Xr(zt.fromDom(t.getElement())))),sw=t=>t.inline&&!kT(t)&&!DT(t)&&!ow(t),bh=t=>(t.options.get("toolbar_sticky")||t.inline)&&!Xv(t)&&!sw(t),Pp=t=>!Xv(t)&&t.options.get("ui_mode")==="split",rw=t=>{const s=t.options.get("menu");return mt(s,a=>({...a,items:a.items}))};var wV=Object.freeze({__proto__:null,get ToolbarMode(){return Wu},get ToolbarLocation(){return Zu},register:xT,getSkinUrl:eN,getSkinUrlOption:CV,isReadOnly:Va,isDisabled:ET,getSkin:Q6,isSkinDisabled:vD,getHeightOption:lD,getWidthOption:uD,getMinWidthOption:dD,getMinHeightOption:mD,getMaxWidthOption:TT,getMaxHeightOption:fD,getUserStyleFormats:R6,shouldMergeStyleFormats:M6,shouldAutoHideStyleFormats:B6,getLineHeightFormats:tN,getContentLanguages:F6,getRemovedMenuItems:N6,isMenubarEnabled:kT,isMultipleToolbars:ow,isToolbarEnabled:DT,isToolbarPersist:$6,getMultipleToolbarsOption:OT,getUiContainer:CD,useFixedContainer:Xv,isSplitUiMode:Pp,getToolbarMode:R0,isDraggableModal:Z6,isDistractionFree:sw,isStickyToolbar:bh,getStickyToolbarOffset:I6,getToolbarLocation:gD,isToolbarLocationBottom:yD,getToolbarGroups:P6,getMenus:rw,getMenubar:L6,getToolbar:AT,getFilePickerCallback:H6,getFilePickerTypes:U6,useTypeaheadUrls:hD,getAnchorTop:W6,getAnchorBottom:pD,getFilePickerValidatorHandler:z6,getFontSizeInputDefaultUnit:V6,useStatusBar:bD,useElementPath:j6,promotionEnabled:Y6,useBranding:_T,getResize:q6,getPasteAsText:G6,getSidebarShow:K6,useHelpAccessibility:X6,getDefaultFontStack:J6});const SV=["visible","hidden","clip"],oN=t=>Gt(t).length>0&&!St(SV,t),sN=t=>{if(re(t)){const s=nr(t,"overflow-x"),a=nr(t,"overflow-y");return oN(s)||oN(a)}else return!1},xV=t=>t.plugins.fullscreen&&t.plugins.fullscreen.isFullscreen(),RT=(t,s)=>{const a=Zr(s,sN),i=a.length===0?Tr(s).map(xs).map(d=>Zr(d,sN)).getOr([]):a;return rn(i).map(d=>({element:d,others:i.slice(1),isFullscreen:()=>xV(t)}))},Od=(t,s)=>Pp(t)?RT(t,s):k.none(),$p=t=>{const s=[...Ne(t.others,sa),Uc()];return t.isFullscreen()?Uc():pb(sa(t.element),s)};/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:wD,setPrototypeOf:rN,isFrozen:EV,getPrototypeOf:TV,getOwnPropertyDescriptor:AV}=Object;let{freeze:iu,seal:Em,create:aN}=Object,{apply:SD,construct:xD}=typeof Reflect<"u"&&Reflect;iu||(iu=function(s){return s}),Em||(Em=function(s){return s}),SD||(SD=function(s,a,i){return s.apply(a,i)}),xD||(xD=function(s,a){return new s(...a)});const MT=uu(Array.prototype.forEach),_V=uu(Array.prototype.lastIndexOf),ED=uu(Array.prototype.pop),eg=uu(Array.prototype.push),M0=uu(Array.prototype.splice),BT=uu(String.prototype.toLowerCase),FT=uu(String.prototype.toString),TD=uu(String.prototype.match),Ip=uu(String.prototype.replace),kV=uu(String.prototype.indexOf),Jv=uu(String.prototype.trim),Ol=uu(Object.prototype.hasOwnProperty),lu=uu(RegExp.prototype.test),aw=DV(TypeError);function uu(t){return function(s){s instanceof RegExp&&(s.lastIndex=0);for(var a=arguments.length,i=new Array(a>1?a-1:0),d=1;d<a;d++)i[d-1]=arguments[d];return SD(t,s,i)}}function DV(t){return function(){for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return xD(t,a)}}function sr(t,s){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:BT;rN&&rN(t,null);let i=s.length;for(;i--;){let d=s[i];if(typeof d=="string"){const g=a(d);g!==d&&(EV(s)||(s[i]=g),d=g)}t[d]=!0}return t}function OV(t){for(let s=0;s<t.length;s++)Ol(t,s)||(t[s]=null);return t}function vh(t){const s=aN(null);for(const[a,i]of wD(t))Ol(t,a)&&(Array.isArray(i)?s[a]=OV(i):i&&typeof i=="object"&&i.constructor===Object?s[a]=vh(i):s[a]=i);return s}function Lp(t,s){for(;t!==null;){const i=AV(t,s);if(i){if(i.get)return uu(i.get);if(typeof i.value=="function")return uu(i.value)}t=TV(t)}function a(){return null}return a}const AD=iu(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),_D=iu(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),NT=iu(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),RV=iu(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),kD=iu(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),DD=iu(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),MV=iu(["#text"]),PT=iu(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),OD=iu(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),cN=iu(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),$T=iu(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),iN=Em(/\{\{[\w\W]*|[\w\W]*\}\}/gm),lN=Em(/<%[\w\W]*|[\w\W]*%>/gm),BV=Em(/\$\{[\w\W]*/gm),FV=Em(/^data-[\-\w.\u00B7-\uFFFF]+$/),uN=Em(/^aria-[\-\w]+$/),dN=Em(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),NV=Em(/^(?:\w+script|data):/i),IT=Em(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),mN=Em(/^html$/i),rJ=Em(/^[a-z][.\w]*(-[.\w]+)+$/i);var LT=Object.freeze({__proto__:null,ARIA_ATTR:uN,ATTR_WHITESPACE:IT,CUSTOM_ELEMENT:rJ,DATA_ATTR:FV,DOCTYPE_NAME:mN,ERB_EXPR:lN,IS_ALLOWED_URI:dN,IS_SCRIPT_OR_DATA:NV,MUSTACHE_EXPR:iN,TMPLIT_EXPR:BV});const cw={element:1,text:3,progressingInstruction:7,comment:8,document:9},RD=function(){return typeof window>"u"?null:window},PV=function(s,a){if(typeof s!="object"||typeof s.createPolicy!="function")return null;let i=null;const d="data-tt-policy-suffix";a&&a.hasAttribute(d)&&(i=a.getAttribute(d));const g="dompurify"+(i?"#"+i:"");try{return s.createPolicy(g,{createHTML(h){return h},createScriptURL(h){return h}})}catch{return console.warn("TrustedTypes policy "+g+" could not be created."),null}},fN=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function MD(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:RD();const s=Be=>MD(Be);if(s.version="3.2.6",s.removed=[],!t||!t.document||t.document.nodeType!==cw.document||!t.Element)return s.isSupported=!1,s;let{document:a}=t;const i=a,d=i.currentScript,{DocumentFragment:g,HTMLTemplateElement:h,Node:C,Element:S,NodeFilter:T,NamedNodeMap:O=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:F,DOMParser:z,trustedTypes:q}=t,Z=S.prototype,ae=Lp(Z,"cloneNode"),ye=Lp(Z,"remove"),ce=Lp(Z,"nextSibling"),xe=Lp(Z,"childNodes"),De=Lp(Z,"parentNode");if(typeof h=="function"){const Be=a.createElement("template");Be.content&&Be.content.ownerDocument&&(a=Be.content.ownerDocument)}let Ke,Ye="";const{implementation:Kt,createNodeIterator:Tt,createDocumentFragment:_t,getElementsByTagName:wt}=a,{importNode:Bn}=i;let yn=fN();s.isSupported=typeof wD=="function"&&typeof De=="function"&&Kt&&Kt.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Zo,ERB_EXPR:Vn,TMPLIT_EXPR:mo,DATA_ATTR:bn,ARIA_ATTR:vt,IS_SCRIPT_OR_DATA:Ut,ATTR_WHITESPACE:qn,CUSTOM_ELEMENT:vo}=LT;let{IS_ALLOWED_URI:En}=LT,po=null;const ys=sr({},[...AD,..._D,...NT,...kD,...MV]);let gs=null;const Hi=sr({},[...PT,...OD,...cN,...$T]);let rr=Object.seal(aN(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Dc=null,Ra=null,ll=!0,Ei=!0,Gr=!1,ag=!0,Pd=!1,eb=!0,_h=!1,rS=!1,cg=!1,aS=!1,S_=!1,cS=!1,tb=!0,iS=!1;const G7="user-content-";let P5=!0,lS=!1,ky={},Dy=null;const nb=sr({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let DY=null;const K7=sr({},["audio","video","img","source","image","track"]);let $5=null;const OY=sr({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),x_="http://www.w3.org/1998/Math/MathML",E_="http://www.w3.org/2000/svg",$d="http://www.w3.org/1999/xhtml";let Oy=$d,I5=!1,T_=null;const RY=sr({},[x_,E_,$d],FT);let L5=sr({},["mi","mo","mn","ms","mtext"]),e=sr({},["annotation-xml"]);const n=sr({},["title","style","font","a","script"]);let o=null;const r=["application/xhtml+xml","text/html"],c="text/html";let u=null,f=null;const b=a.createElement("form"),v=function(oe){return oe instanceof RegExp||oe instanceof Function},x=function(){let oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(f&&f===oe)){if((!oe||typeof oe!="object")&&(oe={}),oe=vh(oe),o=r.indexOf(oe.PARSER_MEDIA_TYPE)===-1?c:oe.PARSER_MEDIA_TYPE,u=o==="application/xhtml+xml"?FT:BT,po=Ol(oe,"ALLOWED_TAGS")?sr({},oe.ALLOWED_TAGS,u):ys,gs=Ol(oe,"ALLOWED_ATTR")?sr({},oe.ALLOWED_ATTR,u):Hi,T_=Ol(oe,"ALLOWED_NAMESPACES")?sr({},oe.ALLOWED_NAMESPACES,FT):RY,$5=Ol(oe,"ADD_URI_SAFE_ATTR")?sr(vh(OY),oe.ADD_URI_SAFE_ATTR,u):OY,DY=Ol(oe,"ADD_DATA_URI_TAGS")?sr(vh(K7),oe.ADD_DATA_URI_TAGS,u):K7,Dy=Ol(oe,"FORBID_CONTENTS")?sr({},oe.FORBID_CONTENTS,u):nb,Dc=Ol(oe,"FORBID_TAGS")?sr({},oe.FORBID_TAGS,u):vh({}),Ra=Ol(oe,"FORBID_ATTR")?sr({},oe.FORBID_ATTR,u):vh({}),ky=Ol(oe,"USE_PROFILES")?oe.USE_PROFILES:!1,ll=oe.ALLOW_ARIA_ATTR!==!1,Ei=oe.ALLOW_DATA_ATTR!==!1,Gr=oe.ALLOW_UNKNOWN_PROTOCOLS||!1,ag=oe.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Pd=oe.SAFE_FOR_TEMPLATES||!1,eb=oe.SAFE_FOR_XML!==!1,_h=oe.WHOLE_DOCUMENT||!1,aS=oe.RETURN_DOM||!1,S_=oe.RETURN_DOM_FRAGMENT||!1,cS=oe.RETURN_TRUSTED_TYPE||!1,cg=oe.FORCE_BODY||!1,tb=oe.SANITIZE_DOM!==!1,iS=oe.SANITIZE_NAMED_PROPS||!1,P5=oe.KEEP_CONTENT!==!1,lS=oe.IN_PLACE||!1,En=oe.ALLOWED_URI_REGEXP||dN,Oy=oe.NAMESPACE||$d,L5=oe.MATHML_TEXT_INTEGRATION_POINTS||L5,e=oe.HTML_INTEGRATION_POINTS||e,rr=oe.CUSTOM_ELEMENT_HANDLING||{},oe.CUSTOM_ELEMENT_HANDLING&&v(oe.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(rr.tagNameCheck=oe.CUSTOM_ELEMENT_HANDLING.tagNameCheck),oe.CUSTOM_ELEMENT_HANDLING&&v(oe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(rr.attributeNameCheck=oe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),oe.CUSTOM_ELEMENT_HANDLING&&typeof oe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(rr.allowCustomizedBuiltInElements=oe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Pd&&(Ei=!1),S_&&(aS=!0),ky&&(po=sr({},MV),gs=[],ky.html===!0&&(sr(po,AD),sr(gs,PT)),ky.svg===!0&&(sr(po,_D),sr(gs,OD),sr(gs,$T)),ky.svgFilters===!0&&(sr(po,NT),sr(gs,OD),sr(gs,$T)),ky.mathMl===!0&&(sr(po,kD),sr(gs,cN),sr(gs,$T))),oe.ADD_TAGS&&(po===ys&&(po=vh(po)),sr(po,oe.ADD_TAGS,u)),oe.ADD_ATTR&&(gs===Hi&&(gs=vh(gs)),sr(gs,oe.ADD_ATTR,u)),oe.ADD_URI_SAFE_ATTR&&sr($5,oe.ADD_URI_SAFE_ATTR,u),oe.FORBID_CONTENTS&&(Dy===nb&&(Dy=vh(Dy)),sr(Dy,oe.FORBID_CONTENTS,u)),P5&&(po["#text"]=!0),_h&&sr(po,["html","head","body"]),po.table&&(sr(po,["tbody"]),delete Dc.tbody),oe.TRUSTED_TYPES_POLICY){if(typeof oe.TRUSTED_TYPES_POLICY.createHTML!="function")throw aw('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof oe.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw aw('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Ke=oe.TRUSTED_TYPES_POLICY,Ye=Ke.createHTML("")}else Ke===void 0&&(Ke=PV(q,d)),Ke!==null&&typeof Ye=="string"&&(Ye=Ke.createHTML(""));iu&&iu(oe),f=oe}},D=sr({},[..._D,...NT,...RV]),B=sr({},[...kD,...DD]),N=function(oe){let je=De(oe);(!je||!je.tagName)&&(je={namespaceURI:Oy,tagName:"template"});const Dt=BT(oe.tagName),kn=BT(je.tagName);return T_[oe.namespaceURI]?oe.namespaceURI===E_?je.namespaceURI===$d?Dt==="svg":je.namespaceURI===x_?Dt==="svg"&&(kn==="annotation-xml"||L5[kn]):!!D[Dt]:oe.namespaceURI===x_?je.namespaceURI===$d?Dt==="math":je.namespaceURI===E_?Dt==="math"&&e[kn]:!!B[Dt]:oe.namespaceURI===$d?je.namespaceURI===E_&&!e[kn]||je.namespaceURI===x_&&!L5[kn]?!1:!B[Dt]&&(n[Dt]||!D[Dt]):!!(o==="application/xhtml+xml"&&T_[oe.namespaceURI]):!1},H=function(oe){eg(s.removed,{element:oe});try{De(oe).removeChild(oe)}catch{ye(oe)}},te=function(oe,je){try{eg(s.removed,{attribute:je.getAttributeNode(oe),from:je})}catch{eg(s.removed,{attribute:null,from:je})}if(je.removeAttribute(oe),oe==="is")if(aS||S_)try{H(je)}catch{}else try{je.setAttribute(oe,"")}catch{}},Q=function(oe){let je=null,Dt=null;if(cg)oe="<remove></remove>"+oe;else{const zo=TD(oe,/^[\r\n\t ]+/);Dt=zo&&zo[0]}o==="application/xhtml+xml"&&Oy===$d&&(oe='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+oe+"</body></html>");const kn=Ke?Ke.createHTML(oe):oe;if(Oy===$d)try{je=new z().parseFromString(kn,o)}catch{}if(!je||!je.documentElement){je=Kt.createDocument(Oy,"template",null);try{je.documentElement.innerHTML=I5?Ye:kn}catch{}}const io=je.body||je.documentElement;return oe&&Dt&&io.insertBefore(a.createTextNode(Dt),io.childNodes[0]||null),Oy===$d?wt.call(je,_h?"html":"body")[0]:_h?je.documentElement:io},Y=function(oe){return Tt.call(oe.ownerDocument||oe,oe,T.SHOW_ELEMENT|T.SHOW_COMMENT|T.SHOW_TEXT|T.SHOW_PROCESSING_INSTRUCTION|T.SHOW_CDATA_SECTION,null)},Ae=function(oe){return oe instanceof F&&(typeof oe.nodeName!="string"||typeof oe.textContent!="string"||typeof oe.removeChild!="function"||!(oe.attributes instanceof O)||typeof oe.removeAttribute!="function"||typeof oe.setAttribute!="function"||typeof oe.namespaceURI!="string"||typeof oe.insertBefore!="function"||typeof oe.hasChildNodes!="function")},_e=function(oe){return typeof C=="function"&&oe instanceof C};function Pe(Be,oe,je){MT(Be,Dt=>{Dt.call(s,oe,je,f)})}const Ze=function(oe){let je=null;if(Pe(yn.beforeSanitizeElements,oe,null),Ae(oe))return H(oe),!0;const Dt=u(oe.nodeName);if(Pe(yn.uponSanitizeElement,oe,{tagName:Dt,allowedTags:po}),eb&&oe.hasChildNodes()&&!_e(oe.firstElementChild)&&lu(/<[/\w!]/g,oe.innerHTML)&&lu(/<[/\w!]/g,oe.textContent)||oe.nodeType===cw.progressingInstruction||eb&&oe.nodeType===cw.comment&&lu(/<[/\w]/g,oe.data))return H(oe),!0;if(!po[Dt]||Dc[Dt]){if(!Dc[Dt]&&Vt(Dt)&&(rr.tagNameCheck instanceof RegExp&&lu(rr.tagNameCheck,Dt)||rr.tagNameCheck instanceof Function&&rr.tagNameCheck(Dt)))return!1;if(P5&&!Dy[Dt]){const kn=De(oe)||oe.parentNode,io=xe(oe)||oe.childNodes;if(io&&kn){const zo=io.length;for(let is=zo-1;is>=0;--is){const kr=ae(io[is],!0);kr.__removalCount=(oe.__removalCount||0)+1,kn.insertBefore(kr,ce(oe))}}}return H(oe),!0}return oe instanceof S&&!N(oe)||(Dt==="noscript"||Dt==="noembed"||Dt==="noframes")&&lu(/<\/no(script|embed|frames)/i,oe.innerHTML)?(H(oe),!0):(Pd&&oe.nodeType===cw.text&&(je=oe.textContent,MT([Zo,Vn,mo],kn=>{je=Ip(je,kn," ")}),oe.textContent!==je&&(eg(s.removed,{element:oe.cloneNode()}),oe.textContent=je)),Pe(yn.afterSanitizeElements,oe,null),!1)},ht=function(oe,je,Dt){if(tb&&(je==="id"||je==="name")&&(Dt in a||Dt in b))return!1;if(!(Ei&&!Ra[je]&&lu(bn,je))){if(!(ll&&lu(vt,je))){if(!gs[je]||Ra[je]){if(!(Vt(oe)&&(rr.tagNameCheck instanceof RegExp&&lu(rr.tagNameCheck,oe)||rr.tagNameCheck instanceof Function&&rr.tagNameCheck(oe))&&(rr.attributeNameCheck instanceof RegExp&&lu(rr.attributeNameCheck,je)||rr.attributeNameCheck instanceof Function&&rr.attributeNameCheck(je))||je==="is"&&rr.allowCustomizedBuiltInElements&&(rr.tagNameCheck instanceof RegExp&&lu(rr.tagNameCheck,Dt)||rr.tagNameCheck instanceof Function&&rr.tagNameCheck(Dt))))return!1}else if(!$5[je]){if(!lu(En,Ip(Dt,qn,""))){if(!((je==="src"||je==="xlink:href"||je==="href")&&oe!=="script"&&kV(Dt,"data:")===0&&DY[oe])){if(!(Gr&&!lu(Ut,Ip(Dt,qn,"")))){if(Dt)return!1}}}}}}return!0},Vt=function(oe){return oe!=="annotation-xml"&&TD(oe,vo)},Ot=function(oe){Pe(yn.beforeSanitizeAttributes,oe,null);const{attributes:je}=oe;if(!je||Ae(oe))return;const Dt={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:gs,forceKeepAttr:void 0};let kn=je.length;for(;kn--;){const io=je[kn],{name:zo,namespaceURI:is,value:kr}=io,Dr=u(zo),Oc=kr;let $t=zo==="value"?Oc:Jv(Oc);if(Dt.attrName=Dr,Dt.attrValue=$t,Dt.keepAttr=!0,Dt.forceKeepAttr=void 0,Pe(yn.uponSanitizeAttribute,oe,Dt),$t=Dt.attrValue,iS&&(Dr==="id"||Dr==="name")&&(te(zo,oe),$t=G7+$t),eb&&lu(/((--!?|])>)|<\/(style|title)/i,$t)){te(zo,oe);continue}if(Dt.forceKeepAttr)continue;if(!Dt.keepAttr){te(zo,oe);continue}if(!ag&&lu(/\/>/i,$t)){te(zo,oe);continue}Pd&&MT([Zo,Vn,mo],hs=>{$t=Ip($t,hs," ")});const On=u(oe.nodeName);if(!ht(On,Dr,$t)){te(zo,oe);continue}if(Ke&&typeof q=="object"&&typeof q.getAttributeType=="function"&&!is)switch(q.getAttributeType(On,Dr)){case"TrustedHTML":{$t=Ke.createHTML($t);break}case"TrustedScriptURL":{$t=Ke.createScriptURL($t);break}}if($t!==Oc)try{is?oe.setAttributeNS(is,zo,$t):oe.setAttribute(zo,$t),Ae(oe)?H(oe):ED(s.removed)}catch{te(zo,oe)}}Pe(yn.afterSanitizeAttributes,oe,null)},lt=function Be(oe){let je=null;const Dt=Y(oe);for(Pe(yn.beforeSanitizeShadowDOM,oe,null);je=Dt.nextNode();)Pe(yn.uponSanitizeShadowNode,je,null),Ze(je),Ot(je),je.content instanceof g&&Be(je.content);Pe(yn.afterSanitizeShadowDOM,oe,null)};return s.sanitize=function(Be){let oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},je=null,Dt=null,kn=null,io=null;if(I5=!Be,I5&&(Be="<!-->"),typeof Be!="string"&&!_e(Be))if(typeof Be.toString=="function"){if(Be=Be.toString(),typeof Be!="string")throw aw("dirty is not a string, aborting")}else throw aw("toString is not a function");if(!s.isSupported)return Be;if(rS||x(oe),s.removed=[],typeof Be=="string"&&(lS=!1),lS){if(Be.nodeName){const kr=u(Be.nodeName);if(!po[kr]||Dc[kr])throw aw("root node is forbidden and cannot be sanitized in-place")}}else if(Be instanceof C)je=Q("<!---->"),Dt=je.ownerDocument.importNode(Be,!0),Dt.nodeType===cw.element&&Dt.nodeName==="BODY"||Dt.nodeName==="HTML"?je=Dt:je.appendChild(Dt);else{if(!aS&&!Pd&&!_h&&Be.indexOf("<")===-1)return Ke&&cS?Ke.createHTML(Be):Be;if(je=Q(Be),!je)return aS?null:cS?Ye:""}je&&cg&&H(je.firstChild);const zo=Y(lS?Be:je);for(;kn=zo.nextNode();)Ze(kn),Ot(kn),kn.content instanceof g&&lt(kn.content);if(lS)return Be;if(aS){if(S_)for(io=_t.call(je.ownerDocument);je.firstChild;)io.appendChild(je.firstChild);else io=je;return(gs.shadowroot||gs.shadowrootmode)&&(io=Bn.call(i,io,!0)),io}let is=_h?je.outerHTML:je.innerHTML;return _h&&po["!doctype"]&&je.ownerDocument&&je.ownerDocument.doctype&&je.ownerDocument.doctype.name&&lu(mN,je.ownerDocument.doctype.name)&&(is="<!DOCTYPE "+je.ownerDocument.doctype.name+`>
`+is),Pd&&MT([Zo,Vn,mo],kr=>{is=Ip(is,kr," ")}),Ke&&cS?Ke.createHTML(is):is},s.setConfig=function(){let Be=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};x(Be),rS=!0},s.clearConfig=function(){f=null,rS=!1},s.isValidAttribute=function(Be,oe,je){f||x({});const Dt=u(Be),kn=u(oe);return ht(Dt,kn,je)},s.addHook=function(Be,oe){typeof oe=="function"&&eg(yn[Be],oe)},s.removeHook=function(Be,oe){if(oe!==void 0){const je=_V(yn[Be],oe);return je===-1?void 0:M0(yn[Be],je,1)[0]}return ED(yn[Be])},s.removeHooks=function(Be){yn[Be]=[]},s.removeAllHooks=function(){yn=fN()},s}var gN=MD();const BD=t=>gN().sanitize(t);var ia=tinymce.util.Tools.resolve("tinymce.util.I18n");const B0={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-disc":!0,"list-bull-default":!0,"list-bull-square":!0},hN="temporary-placeholder",FD=t=>()=>dn(t,hN).getOr("!not found!"),HT=(t,s)=>{const a=t.toLowerCase();if(ia.isRtl()){const i=bu(a,"-rtl");return ko(s,i)?i:a}else return a},pN=(t,s)=>dn(s,HT(t,s)),ND=(t,s)=>{const a=s();return pN(t,a).getOrThunk(FD(a))},$V=(t,s,a)=>{const i=s();return pN(t,i).or(a).getOrThunk(FD(i))},IV=t=>ia.isRtl()?ko(B0,t):!1,bN=()=>so("add-focusable",[or(t=>{qd(t.element,"svg").each(s=>Hn(s,"focusable","false"))})]),vN=(t,s,a,i)=>{var d,g,h;const C=IV(s)?["tox-icon--flip"]:[],S=dn(a,HT(s,a)).or(i).getOrThunk(FD(a));return{dom:{tag:t.tag,attributes:(d=t.attributes)!==null&&d!==void 0?d:{},classes:t.classes.concat(C),innerHtml:S},behaviours:Ft([...(g=t.behaviours)!==null&&g!==void 0?g:[],bN()]),eventOrder:(h=t.eventOrder)!==null&&h!==void 0?h:{}}},ju=(t,s,a,i=k.none())=>vN(s,t,a(),i),LV=(t,s,a)=>{const i=a(),d=be(t,g=>ko(i,HT(g,i)));return vN(s,d.getOr(hN),i,k.none())},HV={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},iw=nu({name:"Notification",factory:t=>{const s=G("notification-text"),a=fs({dom:rf(`<p id=${s}>${BD(t.backstageProvider.translate(t.text))}</p>`),behaviours:Ft([co.config({})])}),i=Z=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${Z}%`}}}),d=Z=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${Z}%`}}),g=fs({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[i(0)]},d(0)],behaviours:Ft([co.config({})])}),S={updateProgress:(Z,ae)=>{Z.getSystem().isConnected()&&g.getOpt(Z).each(ye=>{co.set(ye,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[i(ae)]},d(ae)])})},updateText:(Z,ae)=>{if(Z.getSystem().isConnected()){const ye=a.get(Z);co.set(ye,[pr(ae)])}}},T=Oe([t.icon.toArray(),[t.level],k.from(HV[t.level]).toArray()]),O=fs(ti.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":t.backstageProvider.translate("Close")}},components:[ju("close",{tag:"span",classes:["tox-icon"]},t.iconProvider)],buttonBehaviours:Ft([Ys.config({}),br.config({...t.backstageProvider.tooltips.getConfig({tooltipText:t.backstageProvider.translate("Close")})})]),action:Z=>{t.onAction(Z)}})),F=LV(T,{tag:"div",classes:["tox-notification__icon"]},t.iconProvider),z={dom:{tag:"div",classes:["tox-notification__body"]},components:[a.asSpec()],behaviours:Ft([co.config({})])},q=[F,z];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert","aria-labelledby":s},classes:["tox-notification","tox-notification--in",`tox-notification--${t.level}`]},behaviours:Ft([Ys.config({}),ao.config({}),_n.config({mode:"special",onEscape:Z=>(t.onAction(Z),k.some(!0))})]),components:q.concat(t.progress?[g.asSpec()]:[]).concat([O.asSpec()]),apis:S}},configFields:[El("level","info",["success","error","warning","warn","info"]),yt("progress"),Hs("icon"),yt("onAction"),yt("text"),yt("iconProvider"),yt("backstageProvider")],apis:{updateProgress:(t,s,a)=>{t.updateProgress(s,a)},updateText:(t,s,a)=>{t.updateText(s,a)}}});var zV=(t,s,a,i)=>{const d=s.backstage.shared,g=()=>zt.fromDom(t.queryCommandValue("ToggleView")===""?t.getContentAreaContainer():t.getContainer()),h=()=>{const F=sa(g());return k.some(F)},C=F=>{h().each(z=>{ft(F,q=>{Ho(q.element,"width"),Ya(q.element)>z.width&&Yn(q.element,"width",z.width+"px")})})};return{open:(F,z,q)=>{const Z=()=>{const De=Tt=>{co.remove(Tt,ye),ce()},Ke=(Tt,_t)=>{$l(Tt.element).length===0?Ye(Tt,_t):Kt(Tt,_t)},Ye=(Tt,_t)=>{_r.hide(Tt),i.clear(),_t&&t.focus()},Kt=(Tt,_t)=>{_t&&_n.focusIn(Tt)};i.on(Tt=>{z();const _t=q();De(Tt),Ke(Tt,_t)})},ae=()=>!bh(t)||!d.header.isPositionedAtTop(),ye=p(iw.sketch({text:F.text,level:St(["success","error","warning","warn","info"],F.type)?F.type:void 0,progress:F.progressBar===!0,icon:F.icon,onAction:Z,iconProvider:d.providers.icons,backstageProvider:d.providers}));if(i.isSet()){const De=y(ye);i.on(Ke=>{co.append(Ke,De),_r.reposition(Ke),ye.hasConfigured(Ar)&&Ar.refresh(Ke),C(Ke.components())})}else{const De=p(_r.sketch({dom:{tag:"div",classes:["tox-notifications-container"],attributes:{"aria-label":"Notifications",role:"region"}},lazySink:d.getSink,fireDismissalEventInstead:{},...d.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Ft([_n.config({mode:"cyclic",selector:".tox-notification, .tox-notification a, .tox-notification button"}),co.config({}),...ae()?[Ar.config({contextual:{lazyContext:()=>k.some(sa(g())),fadeInClass:"tox-notification-container-dock-fadein",fadeOutClass:"tox-notification-container-dock-fadeout",transitionClass:"tox-notification-container-dock-transition"},modes:["top"],lazyViewport:Tt=>Od(t,Tt.element).map(wt=>({bounds:$p(wt),optScrollEnv:k.some({currentScrollTop:wt.element.dom.scrollTop,scrollElmTop:lc(wt.element).top})})).getOrThunk(()=>({bounds:Uc(),optScrollEnv:k.none()}))})]:[]])})),Ke=y(ye),Ye={maxHeightFunction:Zg()},Kt={...d.anchors.banner(),overrides:Ye};i.set(De),a.add(De),_r.showWithinBounds(De,Ke,{anchor:Kt},h)}Gn(F.timeout)&&F.timeout>0&&ST.setEditorTimeout(t,()=>{Z()},F.timeout);const ce=()=>{i.on(De=>{_r.reposition(De),De.hasConfigured(Ar)&&Ar.refresh(De),C(De.components())})};return{close:Z,reposition:ce,text:De=>{iw.updateText(ye,De)},settings:F,getEl:()=>ye.element.dom,progressBar:{value:De=>{iw.updateProgress(ye,De)}}}},close:F=>{F.close()},getArgs:F=>F.settings}};const VV={setup:(t,s)=>{const a=(d,g)=>{Nn(d,La(),{raw:g})},i=()=>t.getMenu().bind(vs.getHighlighted);s.on("keydown",d=>{const g=d.which;t.isActive()&&(t.isMenuOpen()?g===13?(i().each(U1),d.preventDefault()):g===40?(i().fold(()=>{t.getMenu().each(vs.highlightFirst)},h=>{a(h,d)}),d.preventDefault(),d.stopImmediatePropagation()):(g===37||g===38||g===39)&&i().each(h=>{a(h,d),d.preventDefault(),d.stopImmediatePropagation()}):(g===13||g===38||g===40)&&t.cancelIfNecessary())}),s.on("NodeChange",()=>{t.isActive()&&!t.isProcessingAction()&&!s.queryCommandState("mceAutoCompleterInRange")&&t.cancelIfNecessary()})}};var zT;(function(t){t[t.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",t[t.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(zT||(zT={}));var Tm=zT;const PD="tox-menu-nav__js",VT="tox-collection__item",UT="tox-swatch",UV={normal:PD,color:UT},$D="tox-collection__item--enabled",WV="tox-collection__group-heading",yN="tox-collection__item-icon",ZV="tox-collection__item-image",CN="tox-collection__item-image-selector",WT="tox-collection__item-label",jV="tox-collection__item-accessory",wN="tox-collection__item-caret",qV="tox-collection__item-checkmark",F0="tox-collection__item--active",SN="tox-collection__item-container",xN="tox-collection__item-container--column",N0="tox-collection__item-container--row",GV="tox-collection__item-container--align-right",KV="tox-collection__item-container--align-left",YV="tox-collection__item-container--valign-top",ZT="tox-collection__item-container--valign-middle",Rd="tox-collection__item-container--valign-bottom",jT=t=>dn(UV,t).getOr(PD),EN=t=>t==="color"?"tox-swatches":"tox-menu",ID=t=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:EN(t),tieredMenu:"tox-tiered-menu"}),Hp=t=>{const s=ID(t);return{backgroundMenu:s.backgroundMenu,selectedMenu:s.selectedMenu,menu:s.menu,selectedItem:s.selectedItem,item:jT(t)}},XV=(t,s,a)=>{const i=ID(a);return{tag:"div",classes:Oe([[i.menu,`tox-menu-${s}-column`],t?[i.hasIcons]:[]])}},JV=[mh.parts.items({})],Qv=(t,s,a)=>{const i=ID(a);return{dom:{tag:"div",classes:Oe([[i.tieredMenu]])},markers:Hp(a)}},LD=G("refetch-trigger-event"),TN=G("redirect-menu-item-interaction"),AN="tox-menu__searcher",lw=t=>Bs(t.element,`.${AN}`).bind(s=>t.getSystem().getByDom(s).toOptional()),_N=lw,kN=(t,s)=>{Xt.setValue(t,s.fetchPattern),t.element.dom.selectionStart=s.selectionStart,t.element.dom.selectionEnd=s.selectionEnd},HD=t=>{const s=Xt.getValue(t),a=t.element.dom.selectionStart,i=t.element.dom.selectionEnd;return{fetchPattern:s,selectionStart:a,selectionEnd:i}},DN=(t,s)=>{Pa(s.element,"id").each(a=>Hn(t.element,"aria-activedescendant",a))},QV=t=>{const s=(d,g)=>(g.cut(),k.none()),a=(d,g)=>{const h={interactionEvent:g.event,eventType:g.event.raw.type};return Nn(d,TN,h),k.some(!0)},i="searcher-events";return{dom:{tag:"div",classes:[VT]},components:[cf.sketch({inputClasses:[AN,"tox-textfield"],inputAttributes:{...t.placeholder.map(d=>({placeholder:t.i18n(d)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:Ft([so(i,[rt(Um(),d=>{$o(d,LD)}),rt(La(),(d,g)=>{g.event.raw.key==="Escape"&&g.stop()})]),_n.config({mode:"special",onLeft:s,onRight:s,onSpace:s,onEnter:a,onEscape:a,onUp:a,onDown:a})]),eventOrder:{keydown:[i,_n.name()]}})]}},qT="tox-collection--results__js",ON=t=>{var s;return t.dom?{...t,dom:{...t.dom,attributes:{...(s=t.dom.attributes)!==null&&s!==void 0?s:{},id:G("aria-item-search-result-id"),"aria-selected":"false"}}}:t},RN="Use arrow keys to navigate.",GT=(t,s)=>a=>{const i=qt(a,s);return Ne(i,d=>({dom:t,components:d}))},KT=t=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"],attributes:{"aria-label":ia.translate(RN)}},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[mh.parts.items({preprocess:t!=="auto"?GT({tag:"div",classes:["tox-swatches__row"]},t):It})]}]}),tg=t=>({dom:{tag:"div",classes:["tox-menu","tox-image-selector-menu"]},components:[{dom:{tag:"div",classes:["tox-image-selector"]},components:[mh.parts.items({preprocess:t!=="auto"?GT({tag:"div",classes:["tox-image-selector__row"]},t):It})]}]}),MN=t=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[mh.parts.items({preprocess:GT({tag:"div",classes:["tox-collection__group"]},t)})]}),qu=(t,s)=>{const a=[];let i=[];return ft(t,(d,g)=>{s(d,g)?(i.length>0&&a.push(i),i=[],(ko(d.dom,"innerHtml")||d.components&&d.components.length>0)&&i.push(d)):i.push(d)}),i.length>0&&a.push(i),Ne(a,d=>({dom:{tag:"div",classes:["tox-collection__group"]},components:d}))},zD=(t,s,a)=>mh.parts.items({preprocess:i=>{const d=Ne(i,a);return t!=="auto"&&t>1?GT({tag:"div",classes:["tox-collection__group"]},t)(d):qu(d,(g,h)=>s[h].type==="separator")}}),YT=t=>$n(t,s=>s.type==="widget"),BN=(t,s,a=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{...YT(s)?{"aria-label":ia.translate(RN)}:{}}},components:[zD(t,s,It)]}),P0=(t,s,a=!0)=>{const i=G("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",qT].concat(t===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:i}},components:[zD(t,s,ON)]}},eU=(t,s,a)=>{const i=G("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[QV({i18n:ia.translate,placeholder:a.placeholder}),{dom:{tag:"div",classes:[...t===1?["tox-collection--list"]:["tox-collection--grid"],qT],attributes:{id:i}},components:[zD(t,s,ON)]}]}},VD=(t,s=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[mh.parts.items({preprocess:a=>qu(a,(i,d)=>t[d].type==="separator")})]}),$0=t=>$n(t,s=>"icon"in s&&s.icon!==void 0),lf=t=>(console.error(Mf(t)),console.log(t),k.none()),tU=(t,s,a,i,d)=>{const g=VD(a);return{value:t,dom:g.dom,components:g.components,items:a}},yh=(t,s,a,i,d)=>{const g=()=>d.menuType!=="searchable"?BN(i,a):d.searchMode.searchMode==="search-with-field"?eU(i,a,d.searchMode):P0(i,a);if(d.menuType==="color"){const h=KT(i);return{value:t,dom:h.dom,components:h.components,items:a}}else if(d.menuType==="imageselector"&&i!=="auto"){const h=tg(i);return{value:t,dom:h.dom,components:h.components,items:a}}else if(d.menuType==="normal"&&i==="auto"){const h=BN(i,a);return{value:t,dom:h.dom,components:h.components,items:a}}else if(d.menuType==="normal"||d.menuType==="searchable"){const h=g();return{value:t,dom:h.dom,components:h.components,items:a}}else if(d.menuType==="listpreview"&&i!=="auto"){const h=MN(i);return{value:t,dom:h.dom,components:h.components,items:a}}else return{value:t,dom:XV(s,i,d.menuType),components:JV,items:a}},Hr=ka("type"),XT=ka("name"),JT=ka("label"),uf=ka("text"),UD=ka("title"),uw=ka("icon"),FN=ka("url"),I0=ka("value"),dw=ql("fetch"),nU=ql("getSubmenuItems"),ey=ql("onAction"),oU=ql("onItemAction"),L0=$s("onSetup",()=>ie),WD=Lr("name"),zp=Lr("text"),ZD=Lr("role"),Md=Lr("icon"),df=Lr("tooltip"),sU=Lr("chevronTooltip"),ty=Lr("label"),jD=Lr("shortcut"),rU=md("select"),ny=mc("active",!1),aU=mc("borderless",!1),du=mc("enabled",!0),mw=mc("primary",!1),NN=t=>We("columns",t),fw=We("meta",{}),Ch=$s("onAction",ie),Vp=t=>Br("type",t),H0=t=>Ia("name","name",fi(()=>G(`${t}-name`)),$r),cU=t=>Ia("value","value",fi(()=>G(`${t}-value`)),kt()),PN=[Hr,uf,jl("level",["info","warn","error","success"]),uw,We("url","")],iU=Xn(PN),lU=t=>[Hr,t],z0=[Hr,uf,du,H0("button"),Md,aU,MS("buttonType",["primary","secondary","toolbar"]),mw,Br("context","mode:design")],$N=Xn(z0),oy=[Hr,XT],Am=oy.concat([ty]),uU=oy.concat([JT,du,Br("context","mode:design")]),dU=Xn(uU),mU=Io,IN=Am.concat([NN("auto"),Br("context","mode:design")]),fU=Xn(IN),gU=Eb([I0,uf,uw]),hU=Am.concat([Br("storageKey","default"),Br("context","mode:design")]),pU=Xn(hU),bU=$r,vU=Xn(Am),yU=$r,LN=oy.concat([Br("tag","textarea"),ka("scriptId"),ka("scriptUrl"),md("onFocus"),BS("settings",void 0)]),CU=oy.concat([Br("tag","textarea"),ql("init")]),wU=Rf(t=>Mr("customeditor.old",Sl(CU),t).orThunk(()=>Mr("customeditor.new",Sl(LN),t))),SU=$r,Up=[du,zp,ZD,jD,cU("menuitem"),fw,Br("context","mode:design")],xU=Xn([Hr,XT].concat(Up)),EU=Io,QT=[H0("button"),Md,El("align","end",["start","end"]),mw,du,MS("buttonType",["primary","secondary"]),Br("context","mode:design")],qD=[...QT,uf],GD=[jl("type",["submit","cancel","custom"]),...qD],eA=[jl("type",["menu"]),zp,df,Md,Mi("items",xU),...QT],TU=[...QT,jl("type",["togglebutton"]),df,Md,zp,mc("active",!1)],AU=pi("type",{submit:GD,cancel:GD,custom:GD,menu:eA,togglebutton:TU}),_U=Am.concat([Br("context","mode:design")]),kU=Xn(_U),DU=Tb(),OU=t=>[Hr,E1("columns"),t],RU=[Hr,ka("html"),El("presets","presentation",["presentation","document"]),$s("onInit",ie),mc("stretched",!1)],MU=Xn(RU),Wp=Am.concat([mc("border",!1),mc("sandboxed",!0),mc("streamContent",!1),mc("transparent",!0)]),BU=Xn(Wp),FU=$r,HN=Xn(oy.concat([Lr("height")])),NU=Xn([ka("url"),T1("zoom"),T1("cachedWidth"),T1("cachedHeight")]),PU=Am.concat([Lr("inputMode"),Lr("placeholder"),mc("maximized",!1),du,Br("context","mode:design")]),$U=Xn(PU),IU=$r,KD=t=>[Hr,JT,t,El("align","start",["start","center","end"]),Lr("for")],zN=[uf,I0],YD=[uf,Mi("items",Dg("items",()=>gw))],gw=_g([Xn(zN),Xn(YD)]),sy=Am.concat([Mi("items",gw),du,Br("context","mode:design")]),LU=Xn(sy),VN=$r,HU=Am.concat([RS("items",[uf,I0]),ep("size",1),du,Br("context","mode:design")]),ry=Xn(HU),zU=$r,tA=Am.concat([mc("constrain",!0),du,Br("context","mode:design")]),XD=Xn(tA),UN=Xn([ka("width"),ka("height")]),VU=oy.concat([JT,ep("min",0),ep("max",0)]),UU=Xn(VU),JD=Qy,WU=[Hr,Mi("header",$r),Mi("cells",hi($r))],ZU=Xn(WU),jU=Am.concat([Lr("placeholder"),mc("maximized",!1),du,Br("context","mode:design"),Ab("spellcheck")]),WN=Xn(jU),QD=$r,qU=[Br("buttonType","default"),Lr("text"),Lr("tooltip"),Lr("icon"),bi("search",!1,_g([Io,Xn([Lr("placeholder")])],t=>Rt(t)?t?k.some({placeholder:k.none()}):k.none():k.some(t))),ql("fetch"),$s("onSetup",()=>ie),Br("context","mode:design")],ZN=Xn([Hr,...qU]),jN=t=>Mr("menubutton",ZN,t),eO=[jl("type",["directory","leaf"]),UD,ka("id"),Bu("menu",ZN),Lr("customStateIcon"),Lr("customStateIconTooltip")],nA=Xn(eO),qN=eO.concat([Mi("children",Dg("children",()=>kg("type",{directory:tO,leaf:nA})))]),tO=Xn(qN),GU=kg("type",{directory:tO,leaf:nA}),KU=[Hr,Mi("items",GU),md("onLeafAction"),md("onToggleExpand"),Bf("defaultExpandedIds",[],$r),Lr("defaultSelectedId")],GN=Xn(KU),nO=Am.concat([El("filetype","file",["image","media","file"]),du,Lr("picker_text"),Br("context","mode:design")]),YU=Xn(nO),XU=Xn([I0,fw]),oO=t=>Ia("items","items",Ou(),hi(Rf(s=>Mr(`Checking item of ${t}`,sO,s).fold(a=>gn.error(Mf(a)),a=>gn.value(a))))),sO=Zl(()=>kg("type",{alertbanner:iU,bar:Xn(lU(oO("bar"))),button:$N,checkbox:dU,colorinput:pU,colorpicker:vU,dropzone:kU,grid:Xn(OU(oO("grid"))),iframe:BU,input:$U,listbox:LU,selectbox:ry,sizeinput:XD,slider:UU,textarea:WN,urlinput:YU,customeditor:wU,htmlpanel:MU,imagepreview:HN,collection:fU,label:Xn(KD(oO("label"))),table:ZU,tree:GN,panel:KN})),JU=[Hr,We("classes",[]),Mi("items",sO)],KN=Xn(JU),QU=[H0("tab"),UD,Mi("items",sO)],rO=[Hr,RS("tabs",QU)],eW=Xn(rO),aO=qD,tW=AU,nW=Xn([ka("title"),xl("body",kg("type",{panel:KN,tabpanel:eW})),Br("size","normal"),Bf("buttons",[],tW),We("initialData",{}),$s("onAction",ie),$s("onChange",ie),$s("onSubmit",ie),$s("onClose",ie),$s("onCancel",ie),$s("onTabChange",ie)]),cO=t=>Mr("dialog",nW,t),oW=Xn([jl("type",["cancel","custom"]),...aO]),sW=Xn([ka("title"),ka("url"),T1("height"),T1("width"),i2("buttons",oW),$s("onAction",ie),$s("onCancel",ie),$s("onClose",ie),$s("onMessage",ie)]),YN=t=>Mr("dialog",sW,t),iO=t=>$e(t)?[t].concat(me(Xs(t),iO)):sn(t)?me(t,iO):[],rW=t=>pe(t.type)&&pe(t.name),aW={checkbox:mU,colorinput:bU,colorpicker:yU,dropzone:DU,input:IU,iframe:FU,imagepreview:NU,selectbox:zU,sizeinput:UN,slider:JD,listbox:VN,size:UN,textarea:QD,urlinput:XU,customeditor:SU,collection:gU,togglemenuitem:EU},cW=t=>k.from(aW[t.type]),iW=t=>ro(iO(t),rW),lW=t=>{const s=iW(t),a=me(s,i=>cW(i).fold(()=>[],d=>[xl(i.name,d)]));return Xn(a)},XN=t=>{var s;const a=Mu(cO(t)),i=lW(t),d=(s=t.initialData)!==null&&s!==void 0?s:{};return{internalDialog:a,dataValidator:i,initialData:d}},Zp={open:(t,s)=>{const a=XN(s);return t(a.internalDialog,a.initialData,a.dataValidator)},openUrl:(t,s)=>{const a=Mu(YN(s));return t(a)},redial:t=>XN(t)},lO=Xn([Hr,zp]),uW=t=>Mr("separatormenuitem",lO,t),dW=Xn([Vp("autocompleteitem"),ny,du,fw,I0,zp,Md]),mW=t=>Mr("Autocompleter.Separator",lO,t),fW=t=>Mr("Autocompleter.Item",dW,t),ay=[du,df,Md,zp,L0,Br("context","mode:design")],gW=Xn([Hr,ey,jD].concat(ay)),oA=t=>Mr("toolbarbutton",gW,t),sA=[ny].concat(ay),JN=Xn(sA.concat([Hr,ey,jD])),rA=t=>Mr("ToggleButton",JN,t),aA=[$s("predicate",ut),El("scope","node",["node","editor"]),El("position","selection",["node","selection","line"])],QN=ay.concat([Vp("contextformbutton"),Br("align","end"),mw,ey,Ac("original",It)]),hW=sA.concat([Vp("contextformbutton"),Br("align","end"),mw,ey,Ac("original",It)]),pW=ay.concat([Vp("contextformbutton")]),bW=sA.concat([Vp("contextformtogglebutton")]),vW=pi("type",{contextformbutton:QN,contextformtogglebutton:hW}),hw=[ty,Mi("commands",vW),Bu("launch",pi("type",{contextformbutton:pW,contextformtogglebutton:bW})),$s("onInput",ie),$s("onSetup",ie)],wh=[...aA,...hw,jl("type",["contextform"]),$s("initValue",K("")),Lr("placeholder")],yW=[...aA,...hw,jl("type",["contextsliderform"]),$s("initValue",K(0)),$s("min",K(0)),$s("max",K(100))],pw=[...aA,...hw,jl("type",["contextsizeinputform"]),$s("initValue",K({width:"",height:""}))],CW=pi("type",{contextform:wh,contextsliderform:yW,contextsizeinputform:pw}),uO=t=>Mr("ContextForm",CW,t),wW=ay.concat([Vp("contexttoolbarbutton")]),SW=Xn([Vp("contexttoolbar"),Qi("launch",wW),xl("items",_g([$r,Eb([Lr("name"),Lr("label"),Mi("items",$r)])]))].concat(aA)),xW=t=>({name:t.name.getOrUndefined(),label:t.label.getOrUndefined(),items:t.items}),eP=t=>({...t,launch:t.launch.getOrUndefined(),items:pe(t.items)?t.items:Ne(t.items,xW)}),EW=t=>Mr("ContextToolbar",SW,t),dO=[Hr,ka("src"),Lr("alt"),Bf("classes",[],$r)],mO=Xn(dO),fO=[Hr,uf,WD,Bf("classes",["tox-collection__item-label"],$r)],TW=Xn(fO),mu=Zl(()=>kg("type",{cardimage:mO,cardtext:TW,cardcontainer:AW})),AW=Xn([Hr,Br("direction","horizontal"),Br("align","left"),Br("valign","middle"),Mi("items",mu)]),_W=Xn([Hr,ty,Mi("items",mu),L0,Ch].concat(Up)),tP=t=>Mr("cardmenuitem",_W,t),nP=Xn([Hr,ny,Md,ty].concat(Up)),kW=t=>Mr("choicemenuitem",nP,t),gO=[Hr,ka("fancytype"),Ch],DW=[We("initData",{})].concat(gO),OW=[md("select"),u2("initData",{},[mc("allowCustomColors",!0),Br("storageKey","default"),i2("colors",kt())])].concat(gO),RW=[md("select"),Lm("initData",[E1("columns"),Bf("items",[],kt())])].concat(gO),MW=pi("fancytype",{inserttable:DW,colorswatch:OW,imageselect:RW}),BW=t=>Mr("fancymenuitem",MW,t),oP=Xn([Hr,ny,FN,ty,df].concat(Up)),FW=Xn([Hr,ny,uw,JT,df,I0].concat(Up)),NW=t=>Mr("imagemenuitem",oP,t),PW=t=>Mr("resetimageitem",FW,t),sP=Xn([Hr,L0,Ch,Md].concat(Up)),hO=t=>Mr("menuitem",sP,t),pO=Xn([Hr,nU,L0,Md].concat(Up)),$W=t=>Mr("nestedmenuitem",pO,t),bO=Xn([Hr,Md,ny,L0,ey].concat(Up)),cy=t=>Mr("togglemenuitem",bO,t),rP=Xn([Md,df,$s("onShow",ie),$s("onHide",ie),L0]),aP=t=>Mr("sidebar",rP,t),cP=Xn([Hr,xl("items",_g([Eb([XT,Mi("items",$r)]),$r]))].concat(ay)),IW=t=>Mr("GroupToolbarButton",cP,t),LW=Xn([Hr,df,sU,Md,zp,rU,dw,L0,El("presets","normal",["normal","color","listpreview"]),NN(1),ey,oU,Br("context","mode:design")]),cA=t=>Mr("SplitButton",LW,t),iP=[zp,Md,Lr("tooltip"),El("buttonType","secondary",["primary","secondary"]),mc("borderless",!1),ql("onAction"),Br("context","mode:design")],HW=[...iP,uf,jl("type",["button"])],lP=[...iP,mc("active",!1),jl("type",["togglebutton"])],vO={button:HW,togglebutton:lP},yO=[jl("type",["group"]),Bf("buttons",[],pi("type",vO))],uP=pi("type",{...vO,group:yO}),cl=Xn([Bf("buttons",[],uP),ql("onShow"),ql("onHide")]),dP=t=>Mr("view",cl,t),CO=(t,s,a)=>{const i=_a(t.element,"."+a);if(i.length>0){const d=ke(i,g=>{const h=g.dom.getBoundingClientRect().top,C=i[0].dom.getBoundingClientRect().top;return Math.abs(h-C)>s}).getOr(i.length);return k.some({numColumns:d,numRows:Math.ceil(i.length/d)})}else return k.none()},mP=(t,s)=>Ft([so(t,s)]),bw={namedEvents:mP,unnamedEvents:t=>mP(G("unnamed-events"),t)},Gu={item:t=>xn.config({disabled:t,disableClass:"tox-collection__item--state-disabled"}),button:t=>xn.config({disabled:t}),splitButton:t=>xn.config({disabled:t,disableClass:"tox-tbtn--disabled"}),toolbarButton:t=>xn.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},iy=(t,s)=>{const a=t.getApi(s);return i=>{i(a)}},Ku=(t,s)=>or(a=>{ze(t.onBeforeSetup)&&t.onBeforeSetup(a),iy(t,a)(d=>{const g=t.onSetup(d);ze(g)&&s.set(g)})}),xh=(t,s)=>Cd(a=>iy(t,a)(s.get())),wO=(t,s,a)=>Cd(i=>(a.set(Xt.getValue(i)),iy(t,i)(s.get()))),fP="silver.uistate",vw="setDisabled",UW="setEnabled",gP="init",WW=["switchmode",gP],ly=(t,s)=>{const a=t.mainUi.outerContainer,i=[t.mainUi.mothership,...t.uiMotherships];s===vw&&ft(i,d=>{d.broadcastOn([Xm()],{target:a.element})}),ft(i,d=>{d.broadcastOn([fP],s)})},hP=(t,s)=>{t.on("init SwitchMode",a=>{ly(s,a.type)}),t.on("DisabledStateChange",a=>{if(!a.isDefaultPrevented()){const i=a.state?vw:gP;ly(s,i),a.state||t.nodeChanged()}}),t.on("NodeChange",a=>{const i=t.ui.isEnabled()?a.type:vw;ly(s,i)}),Va(t)&&t.mode.set("readonly")},vr=t=>ou.config({channels:{[fP]:{onReceive:(s,a)=>{if(a===vw||a===UW){xn.set(s,a===vw);return}const{contextType:i,shouldDisable:d}=t();i==="mode"&&!St(WW,a)||xn.set(s,d)}}}}),iA=(t,s)=>Km((a,i)=>{iy(t,a)(t.onAction),!t.triggersSubmenu&&s===Tm.CLOSE_ON_EXECUTE&&(a.getSystem().isConnected()&&$o(a,Db()),i.stop())}),ZW={[el()]:["disabling","alloy.base.behaviour","toggling","item-events"]},uy=bo,jp=(t,s,a,i)=>{const d=cn(ie);return{type:"item",dom:s.dom,components:uy(s.optComponents),data:t.data,eventOrder:ZW,hasSubmenu:t.triggersSubmenu,itemBehaviours:Ft([so("item-events",[iA(t,a),Ku(t,d),xh(t,d)]),Gu.item(()=>!t.enabled||i.checkUiComponentContext(t.context).shouldDisable),vr(()=>i.checkUiComponentContext(t.context)),co.config({})].concat(t.itemBehaviours))}},qp=t=>({value:t.value,meta:{text:t.text.getOr(""),...t.meta}}),SO=(t,s)=>{var a,i;const d=zt.fromTag("div");Ls(d,"tox-image-selector-loading-spinner");const g=C=>{Ls(C,"tox-image-selector-loading-spinner-wrapper"),Aa(C,d)},h=C=>{Sr(C,"tox-image-selector-loading-spinner-wrapper"),Gi(d)};return{dom:{tag:t.tag,attributes:(a=t.attributes)!==null&&a!==void 0?a:{},classes:t.classes},components:[{dom:{tag:"div",classes:["tox-image-selector-image-wrapper"]},components:[{dom:{tag:"img",attributes:{src:s},classes:["tox-image-selector-image-img"]}}]},...t.checkMark.toArray()],behaviours:Ft([...(i=t.behaviours)!==null&&i!==void 0?i:[],so("render-image-events",[or(C=>{g(C.element),Bs(C.element,"img").each(S=>{Ki(S).catch(T=>{console.error(T)}).finally(()=>{h(C.element)})})})])])}},lA=(t,s)=>SO(s,t),V0=t=>{const s=Yv.os.isMacOS()||Yv.os.isiOS(),d=s?{alt:"",ctrl:"",shift:"",meta:"",access:""}:{meta:"Ctrl",access:"Shift+Alt"},g=t.split("+"),h=Ne(g,C=>{const S=C.toLowerCase().trim();return ko(d,S)?d[S]:C});return s?h.join(""):h.join("+")},U0=(t,s,a=[yN])=>ju(t,{tag:"div",classes:a},s),xO=t=>({dom:{tag:"div",classes:[WT]},components:[pr(ia.translate(t))]}),EO=(t,s)=>({dom:{tag:"div",classes:s,innerHtml:t}}),TO=(t,s)=>({dom:{tag:"div",classes:[WT]},components:[{dom:{tag:t.tag,styles:t.styles},components:[pr(ia.translate(s))]}]}),AO=t=>({dom:{tag:"div",classes:[jV]},components:[pr(V0(t))]}),_O=t=>U0("checkmark",t,[qV]),jW=t=>U0("chevron-right",t,[wN]),pP=t=>U0("chevron-down",t,[wN]),bP=(t,s)=>{const a=t.direction==="vertical"?xN:N0,i=t.align==="left"?KV:GV;return{dom:{tag:"div",classes:[SN,a,i,(()=>{switch(t.valign){case"top":return YV;case"middle":return ZT;case"bottom":return Rd}})()]},components:s}},qW=(t,s,a)=>({dom:{tag:"img",classes:s,attributes:{src:t,alt:a.getOr("")}}}),vP=(t,s,a)=>{const i="custom",d="remove",g=t.value,h=t.iconContent.map(T=>$V(T,s.icons,a)),C=t.ariaLabel.map(T=>({"aria-label":s.translate(T),"data-mce-name":T})).getOr({});return{dom:(()=>{const T=UT,O=h.getOr(""),F={tag:"div",attributes:C,classes:[T]};return g===i?{...F,tag:"button",classes:[...F.classes,"tox-swatches__picker-btn"],innerHtml:O}:g===d?{...F,classes:[...F.classes,"tox-swatch--remove"],innerHtml:O}:Wn(g)?{...F,attributes:{...F.attributes,"data-mce-color":g},styles:{"background-color":g},innerHtml:O}:F})(),optComponents:[]}},uA=(t,s)=>{const a=t.map(i=>({attributes:{id:G("menu-item"),"aria-label":ia.translate(i)}})).getOr({});return{tag:"div",classes:[PD,VT].concat(s),...a}},yP=t=>({dom:{tag:"label"},components:[pr(t)]}),CP=(t,s,a,i)=>{const d={tag:"div",classes:[yN]},g=z=>ju(z,d,s.icons,i),h=()=>k.some({dom:d}),C=a?t.iconContent.map(g).orThunk(h):k.none(),S=t.checkMark,T=k.from(t.meta).fold(()=>xO,z=>ko(z,"style")?vn(TO,z.style):xO),O=t.htmlContent.fold(()=>t.textContent.map(T),z=>k.some(EO(z,[WT])));return{dom:uA(t.ariaLabel,[]),optComponents:[C,O,t.shortcutContent.map(AO),S,t.caret,t.labelContent.map(yP)]}},GW=t=>({dom:uA(t.ariaLabel,[CN]),optComponents:[k.some(lA(t.iconContent.getOrDie(),{tag:"div",classes:[ZV],checkMark:t.checkMark})),t.labelContent.map(yP)]}),W0=(t,s,a,i=k.none())=>t.presets==="color"?vP(t,s,i):t.presets==="img"?GW(t):CP(t,s,a,i),Gp=(t,s,a)=>dn(t,"tooltipWorker").map(i=>[br.config({lazySink:s.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:d=>({type:"submenu",item:d,overrides:{maxHeightFunction:Zg}}),mode:"follow-highlight",onShow:(d,g)=>{i(h=>{br.setComponents(d,[yE({element:zt.fromDom(h)})])})}})]).getOrThunk(()=>a.map(i=>[br.config({...s.providers.tooltips.getConfig({tooltipText:i}),mode:"follow-highlight"})]).getOr([])),KW=t=>tw.DOM.encode(t),kO=(t,s)=>{const a=ia.translate(t),i=KW(a);if(s.length>0){const d=new RegExp(Ml(s),"gi");return i.replace(d,g=>`<span class="tox-autocompleter-highlight">${g}</span>`)}else return i},YW=(t,s,a,i,d,g,h,C=!0)=>{const S=W0({presets:i,textContent:k.none(),htmlContent:a?t.text.map(O=>kO(O,s)):k.none(),ariaLabel:t.text,labelContent:k.none(),iconContent:t.icon,shortcutContent:k.none(),checkMark:k.none(),caret:k.none(),value:t.value},h.providers,C,t.icon),T=t.text.filter(O=>!a&&O!=="");return jp({context:"mode:design",data:qp(t),enabled:t.enabled,getApi:K({}),onAction:O=>d(t.value,t.meta),onSetup:K(ie),triggersSubmenu:!1,itemBehaviours:Gp(t,h,T)},S,g,h.providers)},wP=(t,s)=>Ne(t,a=>{switch(a.type){case"cardcontainer":return bP(a,wP(a.items,s));case"cardimage":return qW(a.src,a.classes,a.alt);case"cardtext":const d=a.name.exists(g=>St(s.cardText.highlightOn,g))?k.from(s.cardText.matchText).getOr(""):"";return EO(kO(a.text,d),a.classes)}}),XW=(t,s,a,i)=>{const d=h=>({isEnabled:()=>!xn.isDisabled(h),setEnabled:C=>{xn.set(h,!C),ft(_a(h.element,"*"),S=>{h.getSystem().getByDom(S).each(T=>{T.hasConfigured(xn)&&xn.set(T,!C)})})}}),g={dom:uA(t.label,[]),optComponents:[k.some({dom:{tag:"div",classes:[SN,N0]},components:wP(t.items,i)})]};return jp({context:"mode:design",data:qp({text:k.none(),...t}),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:k.from(i.itemBehaviours).getOr([])},g,s,a.providers)},SP=(t,s,a,i,d,g,h,C=!0)=>{const S=F=>({setActive:z=>{Jo.set(F,z)},isActive:()=>Jo.isOn(F),isEnabled:()=>!xn.isDisabled(F),setEnabled:z=>xn.set(F,!z)}),T=W0({presets:a,textContent:s?t.text:k.none(),htmlContent:k.none(),labelContent:t.label,ariaLabel:t.text,iconContent:t.icon,shortcutContent:s?t.shortcut:k.none(),checkMark:s?k.some(_O(h.icons)):k.none(),caret:k.none(),value:t.value},h,C),O=t.text.filter(K(!s)).map(F=>br.config(h.tooltips.getConfig({tooltipText:h.translate(F)})));return At(jp({context:t.context,data:qp(t),enabled:t.enabled,getApi:S,onAction:F=>i(t.value),onSetup:F=>(F.setActive(d),ie),triggersSubmenu:!1,itemBehaviours:[...O.toArray()]},T,g,h),{toggling:{toggleClass:$D,toggleOnExecute:!1,selected:t.active,exclusive:!0}})},DO=t=>({value:mf(t)}),xP=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,OO=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,dA=t=>xP.test(t)||OO.test(t),mf=t=>Ju(t,"#").toUpperCase(),RO=t=>dA(t)?k.some({value:mf(t)}):k.none(),EP=t=>({value:t.value.replace(xP,(a,i,d,g)=>i+i+d+d+g+g)}),TP=t=>{const s=EP(t),a=OO.exec(s.value);return a===null?["FFFFFF","FF","FF","FF"]:a},yw=t=>{const s=t.toString(16);return(s.length===1?"0"+s:s).toUpperCase()},dy=t=>{const s=yw(t.red)+yw(t.green)+yw(t.blue);return DO(s)},Kp=(t,s,a)=>({hue:t,saturation:s,value:a}),mA=t=>{let s=0,a=0,i=0;const d=t.red/255,g=t.green/255,h=t.blue/255,C=Math.min(d,Math.min(g,h)),S=Math.max(d,Math.max(g,h));if(C===S)return i=C,Kp(0,0,i*100);const T=d===C?g-h:h===C?d-g:h-d;return s=d===C?3:h===C?1:5,s=60*(s-T/(S-C)),a=(S-C)/S,i=S,Kp(Math.round(s),Math.round(a*100),Math.round(i*100))},MO=Math.min,AP=Math.max,fA=Math.round,JW=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,QW=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,Z0=(t,s,a,i)=>({red:t,green:s,blue:a,alpha:i}),gA=t=>{const s=parseInt(t,10);return s.toString()===t&&s>=0&&s<=255},BO=t=>{let s,a,i;const d=(t.hue||0)%360;let g=t.saturation/100,h=t.value/100;if(g=AP(0,MO(g,1)),h=AP(0,MO(h,1)),g===0)return s=a=i=fA(255*h),Z0(s,a,i,1);const C=d/60,S=h*g,T=S*(1-Math.abs(C%2-1)),O=h-S;switch(Math.floor(C)){case 0:s=S,a=T,i=0;break;case 1:s=T,a=S,i=0;break;case 2:s=0,a=S,i=T;break;case 3:s=0,a=T,i=S;break;case 4:s=T,a=0,i=S;break;case 5:s=S,a=0,i=T;break;default:s=a=i=0}return s=fA(255*(s+O)),a=fA(255*(a+O)),i=fA(255*(i+O)),Z0(s,a,i,1)},Cw=t=>{const s=TP(t),a=parseInt(s[1],16),i=parseInt(s[2],16),d=parseInt(s[3],16);return Z0(a,i,d,1)},_P=(t,s,a,i)=>{const d=parseInt(t,10),g=parseInt(s,10),h=parseInt(a,10),C=parseFloat(i);return Z0(d,g,h,C)},FO=t=>{const s=JW.exec(t);if(s!==null)return k.some(_P(s[1],s[2],s[3],"1"));const a=QW.exec(t);return a!==null?k.some(_P(a[1],a[2],a[3],a[4])):k.none()},ww=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,kP=Z0(255,0,0,1),eZ=t=>mA(Cw(t)),NO=t=>dy(BO(t)),DP=t=>RO(t).orThunk(()=>FO(t).map(dy)).getOrThunk(()=>{const s=document.createElement("canvas");s.height=1,s.width=1;const a=s.getContext("2d");a.clearRect(0,0,s.width,s.height),a.fillStyle="#FFFFFF",a.fillStyle=t,a.fillRect(0,0,1,1);const i=a.getImageData(0,0,1,1).data,d=i[0],g=i[1],h=i[2],C=i[3];return dy(Z0(d,g,h,C))}),tZ=t=>{t.dispatch("SkinLoaded")},nZ=(t,s)=>{t.dispatch("SkinLoadError",s)},PO=t=>{t.dispatch("ResizeEditor")},$O=(t,s)=>{t.dispatch("ResizeContent",s)},OP=(t,s)=>{t.dispatch("ScrollContent",s)},RP=(t,s)=>{t.dispatch("TextColorChange",s)},oZ=(t,s)=>{t.dispatch("AfterProgressState",{state:s})},sZ=(t,s)=>t.dispatch("ResolveName",{name:s.nodeName.toLowerCase(),target:s}),MP=(t,s)=>{t.dispatch("ToggleToolbarDrawer",{state:s})},IO=(t,s)=>{t.dispatch("StylesTextUpdate",s)},rZ=(t,s)=>{t.dispatch("AlignTextUpdate",s)},aZ=(t,s)=>{t.dispatch("FontSizeTextUpdate",s)},cZ=(t,s)=>{t.dispatch("FontSizeInputTextUpdate",s)},iZ=(t,s)=>{t.dispatch("BlocksTextUpdate",s)},BP=(t,s)=>{t.dispatch("FontFamilyTextUpdate",s)},FP=t=>{t.dispatch("ToggleSidebar")},NP=t=>{t.dispatch("ToggleView")},PP=t=>{t.dispatch("ContextToolbarClose")},lZ=t=>{t.dispatch("ContextFormSlideBack")},hA=(t,s)=>()=>{t(),s()},Li=(t,s=Ct)=>j0(t,"NodeChange",a=>{a.setEnabled(t.selection.isEditable()&&s())}),uZ=(t,s)=>a=>{const i=er(),d=()=>{a.setActive(t.formatter.match(s));const g=t.formatter.formatChanged(s,a.setActive);i.set(g)};return t.initialized?d():t.once("init",d),()=>{t.off("init",d),i.clear()}},pA=(t,s)=>a=>{const i=Li(t)(a),d=uZ(t,s)(a);return()=>{i(),d()}},j0=(t,s,a)=>i=>{const d=()=>a(i),g=()=>{a(i),t.on(s,d)};return t.initialized?g():t.once("init",g),()=>{t.off("init",g),t.off(s,d)}},$P=t=>s=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("mceToggleFormat",!1,s.format)})},fu=(t,s)=>()=>t.execCommand(s);var Eh=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const IP={},dZ=(t,s=10)=>{const a=Eh.getItem(t),i=pe(a)?JSON.parse(a):[],g=(T=>s-T.length<0?T.slice(0,s):T)(i),h=T=>{Te(g,T).each(C),g.unshift(T),g.length>s&&g.pop(),Eh.setItem(t,JSON.stringify(g))},C=T=>{g.splice(T,1)};return{add:h,state:()=>g.slice(0)}},LP=t=>dn(IP,t).getOrThunk(()=>{const s=`tinymce-custom-colors-${t}`,a=Eh.getItem(s);if(fo(a)){const d=Eh.getItem("tinymce-custom-colors");Eh.setItem(s,Wn(d)?d:"[]")}const i=dZ(s,10);return IP[t]=i,i}),Sw=t=>Ne(LP(t).state(),s=>({type:"choiceitem",text:s,icon:"checkmark",value:s})),bA=(t,s)=>{LP(t).add(s)},LO="forecolor",HO="hilitecolor",zO=5,mZ=t=>vA(t.map((s,a)=>a%2===0?"#"+DP(s).value:s)),vA=t=>{const s=[];for(let a=0;a<t.length;a+=2)s.push({text:t[a+1],value:t[a],icon:"checkmark",type:"choiceitem"});return s},_m=t=>s=>s.options.get(t),VO="#000000",fZ=t=>{const s=t.options.register,a=g=>Bt(g,pe)?{value:mZ(g),valid:!0}:{valid:!1,message:"Must be an array of strings."},i=g=>Bt(g,pe)?{value:vA(g),valid:!0}:{valid:!1,message:"Must be an array of strings."},d=g=>Gn(g)&&g>0?{value:g,valid:!0}:{valid:!1,message:"Must be a positive number."};s("color_map",{processor:a,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),s("color_map_raw",{processor:i}),s("color_map_background",{processor:a}),s("color_map_foreground",{processor:a}),s("color_cols",{processor:d,default:UO(t)}),s("color_cols_foreground",{processor:d,default:WO(t,LO)}),s("color_cols_background",{processor:d,default:WO(t,HO)}),s("custom_colors",{processor:"boolean",default:!0}),s("color_default_foreground",{processor:"string",default:VO}),s("color_default_background",{processor:"string",default:VO})},xw=(t,s)=>s===LO&&t.options.isSet("color_map_foreground")?_m("color_map_foreground")(t):s===HO&&t.options.isSet("color_map_background")?_m("color_map_background")(t):t.options.isSet("color_map_raw")?_m("color_map_raw")(t):_m("color_map")(t),UO=(t,s="default")=>Math.max(zO,Math.ceil(Math.sqrt(xw(t,s).length))),WO=(t,s)=>{const a=_m("color_cols")(t),i=UO(t,s);return a===UO(t)?i:a},HP=(t,s="default")=>Math.round(s===LO?_m("color_cols_foreground")(t):s===HO?_m("color_cols_background")(t):_m("color_cols")(t)),ZO=_m("custom_colors"),zP=_m("color_default_foreground"),gZ=_m("color_default_background"),VP="rgba(0, 0, 0, 0)",UP=t=>FO(t).exists(s=>s.alpha!==0),hZ=t=>Cl(t,s=>{if(ai(s)){const a=nr(s,"background-color");return Er(UP(a),a)}else return k.none()}).getOr(VP),yA=(t,s)=>{const a=zt.fromDom(t.selection.getStart()),i=s==="hilitecolor"?hZ(a):nr(a,"color");return FO(i).map(d=>"#"+dy(d).value)},WP=(t,s,a)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.apply(s,{value:a}),t.nodeChanged()})},jO=(t,s)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.remove(s,{value:null},void 0,!0),t.nodeChanged()})},pZ=t=>{t.addCommand("mceApplyTextcolor",(s,a)=>{WP(t,s,a)}),t.addCommand("mceRemoveTextcolor",s=>{jO(t,s)})},ZP=t=>{const s="choiceitem",a={type:s,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return t?[a,{type:s,text:"Custom color",icon:"color-picker",value:"custom"}]:[a]},CA=(t,s,a,i)=>{a==="custom"?SA(t)(g=>{g.each(h=>{bA(s,h),t.execCommand("mceApplyTextcolor",s,h),i(h)})},yA(t,s).getOr(VO)):a==="remove"?(i(""),t.execCommand("mceRemoveTextcolor",s)):(i(a),t.execCommand("mceApplyTextcolor",s,a))},qO=(t,s,a)=>t.concat(Sw(s).concat(ZP(a))),GO=(t,s,a)=>i=>{i(qO(t,s,a))},KO=(t,s,a)=>{const i=s==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";t.setIconFill(i,a)},jP=(t,s)=>{t.setTooltip(s)},wA=(t,s)=>a=>{const i=yA(t,s);return Tn(i,a.toUpperCase())},YO=(t,s,a)=>{if(Ba(a))return s==="forecolor"?"Text color":"Background color";const i=s==="forecolor"?"Text color {0}":"Background color {0}",d=qO(xw(t,s),s,!1),g=be(d,h=>h.value===a).getOr({text:""}).text;return t.translate([i,t.translate(g)])},qP=(t,s,a,i)=>{t.ui.registry.addSplitButton(s,{tooltip:YO(t,a,i.get()),chevronTooltip:s==="forecolor"?"Text color menu":"Background color menu",presets:"color",icon:s==="forecolor"?"text-color":"highlight-bg-color",select:wA(t,a),columns:HP(t,a),fetch:GO(xw(t,a),a,ZO(t)),onAction:d=>{CA(t,a,i.get(),ie)},onItemAction:(d,g)=>{CA(t,a,g,h=>{i.set(h),RP(t,{name:s,color:h})})},onSetup:d=>{KO(d,s,i.get());const g=h=>{h.name===s&&(KO(d,h.name,h.color),jP(d,YO(t,a,h.color)))};return t.on("TextColorChange",g),hA(Li(t)(d),()=>{t.off("TextColorChange",g)})}})},GP=(t,s,a,i,d)=>{t.ui.registry.addNestedMenuItem(s,{text:i,icon:s==="forecolor"?"text-color":"highlight-bg-color",onSetup:g=>(jP(g,YO(t,a,d.get())),KO(g,s,d.get()),Li(t)(g)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:wA(t,a),initData:{storageKey:a},onAction:g=>{CA(t,a,g.value,h=>{d.set(h),RP(t,{name:s,color:h})})}}]})},SA=t=>(s,a)=>{let i=!1;const d=C=>{const T=C.getData().colorpicker;i?(s(k.from(T)),C.close()):t.windowManager.alert(t.translate(["Invalid hex color code: {0}",T]))},g=(C,S)=>{S.name==="hex-valid"&&(i=S.value)},h={colorpicker:a};t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:h,onAction:g,onSubmit:d,onClose:ie,onCancel:()=>{s(k.none())}})},bZ=t=>{pZ(t);const s=zP(t),a=gZ(t),i=cn(s),d=cn(a);qP(t,"forecolor","forecolor",i),qP(t,"backcolor","hilitecolor",d),GP(t,"forecolor","forecolor","Text color",i),GP(t,"backcolor","hilitecolor","Background color",d)},KP=(t,s,a,i,d)=>{const g=S=>({setActive:T=>{Jo.set(S,T)},isActive:()=>Jo.isOn(S),isEnabled:()=>!xn.isDisabled(S),setEnabled:T=>xn.set(S,!T)}),h=W0({presets:"img",textContent:k.none(),htmlContent:k.none(),ariaLabel:t.tooltip,iconContent:k.some(t.url),labelContent:t.label,shortcutContent:k.none(),checkMark:k.some(_O(d.icons)),caret:k.none(),value:t.value},d,!0),C=t.tooltip.map(S=>br.config(d.tooltips.getConfig({tooltipText:d.translate(S)})));return At(jp({context:t.context,data:qp(t),enabled:t.enabled,getApi:g,onAction:S=>{s(t.value),S.setActive(!0)},onSetup:S=>(S.setActive(a),ie),triggersSubmenu:!1,itemBehaviours:[...C.toArray()]},h,i,d),{toggling:{toggleClass:$D,toggleOnExecute:!1,selected:t.active,exclusive:!0}})},xA=(t,s,a,i,d,g,h,C)=>{const S=$0(s),O=YP(s,a,i,d!=="color"?"normal":"color",g,h,C);return yh(t,S,O,i,{menuType:d})},YP=(t,s,a,i,d,g,h)=>bo(Ne(t,C=>C.type==="choiceitem"?kW(C).fold(lf,S=>k.some(SP(S,a===1,i,s,g(S.value),d,h,$0(t)))):C.type==="imageitem"?NW(C).fold(lf,S=>k.some(KP(S,s,g(S.value),d,h))):C.type==="resetimage"?PW(C).fold(lf,S=>k.some(SP({...S,text:S.tooltip,icon:k.some(S.icon),label:k.some(S.label)},a===1,i,s,g(S.value),d,h,$0(t)))):k.none())),Ew=(t,s)=>{const a=Hp(s);return t===1?{mode:"menu",moveOnTab:!0}:t==="auto"?{mode:"grid",selector:"."+a.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+{color:"tox-swatches__row",imageselector:"tox-image-selector__row",listpreview:"tox-collection__group",normal:"tox-collection__group"}[s],previousSelector:d=>s==="color"?Bs(d.element,"[aria-checked=true]"):k.none()}},vZ=(t,s)=>t===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:t==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:s==="color"?".tox-swatches__row":".tox-collection__group",cell:s==="color"?`.${UT}`:`.${VT}`}},yZ=(t,s)=>{const a=CZ(t,s),i=s.colorinput.getColorCols(t.initData.storageKey),d="color",h={...xA(G("menu-value"),a,C=>{t.onAction({value:C})},i,d,Tm.CLOSE_ON_EXECUTE,t.select.getOr(ut),s.shared.providers),markers:Hp(d),movement:Ew(i,d),showMenuRole:!1};return{type:"widget",data:{value:G("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[rT.widget(mh.sketch(h))]}},CZ=(t,s)=>{const a=t.initData.allowCustomColors&&s.colorinput.hasCustomColors();return t.initData.colors.fold(()=>qO(s.colorinput.getColors(t.initData.storageKey),t.initData.storageKey,a),i=>i.concat(ZP(a)))},wZ=(t,s)=>{const a="imageselector",i=t.initData.columns,g={...xA(G("menu-value"),t.initData.items,h=>{t.onAction({value:h})},i,a,Tm.CLOSE_ON_EXECUTE,t.select.getOr(ut),s.shared.providers),markers:Hp(a),movement:Ew(i,a),showMenuRole:!1};return{type:"widget",data:{value:G("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem","tox-collection--toolbar"]},autofocus:!0,components:[rT.widget(mh.sketch(g))]}},XO=G("cell-over"),XP=G("cell-execute"),SZ=t=>(s,a)=>t.shared.providers.translate(["{0} columns, {1} rows",a,s]),JP=(t,s,a)=>{const i=h=>Nn(h,XO,{row:t,col:s}),d=h=>Nn(h,XP,{row:t,col:s}),g=(h,C)=>{C.stop(),d(h)};return p({dom:{tag:"div",attributes:{role:"button","aria-label":a}},behaviours:Ft([so("insert-table-picker-cell",[rt(Fu(),ao.focus),rt(el(),d),rt(Jd(),g),rt(Pg(),g)]),Jo.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),ao.config({onFocus:i})])})},xZ=(t,s,a)=>{const i=[];for(let d=0;d<s;d++){const g=[];for(let h=0;h<a;h++){const C=t(d+1,h+1);g.push(JP(d,h,C))}i.push(g)}return i},EZ=(t,s,a,i,d)=>{for(let g=0;g<i;g++)for(let h=0;h<d;h++)Jo.set(t[g][h],g<=s&&h<=a)},TZ=t=>me(t,s=>Ne(s,y)),JO=(t,s)=>pr(`${s}x${t}`),AZ={inserttable:(t,s)=>{const d=SZ(s),g=xZ(d,10,10),h=JO(0,0),C=fs({dom:{tag:"span",classes:["tox-insert-table-picker__label"]},components:[h],behaviours:Ft([co.config({})])});return{type:"widget",data:{value:G("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[rT.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:TZ(g).concat(C.asSpec()),behaviours:Ft([so("insert-table-picker",[or(S=>{co.set(C.get(S),[h])}),qg(XO,(S,T,O)=>{const{row:F,col:z}=O.event;EZ(g,F,z,10,10),co.set(C.get(S),[JO(F+1,z+1)])}),qg(XP,(S,T,O)=>{const{row:F,col:z}=O.event;$o(S,Db()),t.onAction({numRows:F+1,numColumns:z+1})})]),_n.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:yZ,imageselect:wZ},_Z=(t,s)=>dn(AZ,t.fancytype).map(a=>a(t,s)),QP=(t,s,a,i=!0,d=!1)=>{const g=d?pP(a.icons):jW(a.icons),h=S=>({isEnabled:()=>!xn.isDisabled(S),setEnabled:T=>xn.set(S,!T),setIconFill:(T,O)=>{Bs(S.element,`svg path[class="${T}"], rect[class="${T}"]`).each(F=>{Hn(F,"fill",O)})},setTooltip:T=>{const O=a.translate(T);Hn(S.element,"aria-label",O)}}),C=W0({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:k.none(),ariaLabel:t.text,labelContent:k.none(),caret:k.some(g),checkMark:k.none(),shortcutContent:t.shortcut},a,i);return jp({context:t.context,data:qp(t),getApi:h,enabled:t.enabled,onAction:ie,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},C,s,a)},e8=(t,s,a,i=!0)=>{const d=h=>({isEnabled:()=>!xn.isDisabled(h),setEnabled:C=>xn.set(h,!C)}),g=W0({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:k.none(),labelContent:k.none(),ariaLabel:t.text,caret:k.none(),checkMark:k.none(),shortcutContent:t.shortcut},a,i);return jp({context:t.context,data:qp(t),getApi:d,enabled:t.enabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,a)},t8=t=>({type:"separator",dom:{tag:"div",classes:[VT,WV]},components:t.text.map(pr).toArray()}),EA=(t,s,a,i=!0)=>{const d=h=>({setActive:C=>{Jo.set(h,C)},isActive:()=>Jo.isOn(h),isEnabled:()=>!xn.isDisabled(h),setEnabled:C=>xn.set(h,!C)}),g=W0({iconContent:t.icon,textContent:t.text,htmlContent:k.none(),labelContent:k.none(),ariaLabel:t.text,checkMark:k.some(_O(a.icons)),caret:k.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},a,i);return At(jp({context:t.context,data:qp(t),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,a),{toggling:{toggleClass:$D,toggleOnExecute:!1,selected:t.active},role:t.role.getOrUndefined()})},n8=YW,o8=t8,kZ=e8,s8=QP,DZ=EA,OZ=_Z,RZ=XW,MZ=t=>{switch(t.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:t}}},r8=t=>{const s=Xt.getValue(t),a=lw(t).map(HD);au.refetch(s).get(()=>{const i=Co.getCoupled(s,"sandbox");a.each(d=>lw(i).each(g=>kN(g,d)))})},BZ=(t,s)=>{FZ(t).each(a=>{n4(t,a.element,s.event.eventType,s.event.interactionEvent)})},FZ=t=>ms.getState(t).bind(vs.getHighlighted).bind(vs.getHighlighted),NZ=t=>Wr(t.element,qT)?k.some(t.element):Bs(t.element,"."+qT),QO=(t,s,a)=>{_N(t).each(i=>{DN(i,a),NZ(s).each(g=>{Pa(g,"id").each(h=>Hn(i.element,"aria-controls",h))})}),Hn(a.element,"aria-selected","true")},a8=(t,s,a)=>{Hn(a.element,"aria-selected","false")},PZ=t=>{_N(t).each(s=>ao.focus(s))},$Z=t=>Co.getExistingCoupled(t,"sandbox").bind(lw).map(HD).map(a=>a.fetchPattern).getOr("");var Tw;(function(t){t[t.ContentFocus=0]="ContentFocus",t[t.UiFocus=1]="UiFocus"})(Tw||(Tw={}));const IZ=(t,s,a,i,d)=>{const g=a.shared.providers,h=C=>d?{...C,shortcut:k.none(),icon:C.text.isSome()?k.none():C.icon}:C;switch(t.type){case"menuitem":return hO(t).fold(lf,C=>k.some(kZ(h(C),s,g,i)));case"nestedmenuitem":return $W(t).fold(lf,C=>k.some(s8(h(C),s,g,i,d)));case"togglemenuitem":return cy(t).fold(lf,C=>k.some(DZ(h(C),s,g,i)));case"separator":return uW(t).fold(lf,C=>k.some(o8(C)));case"fancymenuitem":return BW(t).fold(lf,C=>OZ(C,a));default:return console.error("Unknown item in general menu",t),k.none()}},LZ=(t,s,a,i,d,g,h)=>{const C=i===1,S=!C||$0(t);return bo(Ne(t,T=>{switch(T.type){case"separator":return mW(T).fold(lf,O=>k.some(o8(O)));case"cardmenuitem":return tP(T).fold(lf,O=>k.some(RZ({...O,onAction:F=>{O.onAction(F),a(O.value,O.meta)}},d,g,{itemBehaviours:Gp(O.meta,g,k.none()),cardText:{matchText:s,highlightOn:h}})));case"autocompleteitem":default:return fW(T).fold(lf,O=>k.some(n8(O,s,C,"normal",a,d,g,S)))}}))},oo=(t,s,a,i,d,g)=>{const h=$0(s),C=bo(Ne(s,O=>{const F=q=>d?!ko(q,"text"):h,z=q=>IZ(q,a,i,F(q),d);return O.type==="nestedmenuitem"&&O.getSubmenuItems().length<=0?z({...O,enabled:!1}):z(O)})),S=MZ(g);return(d?tU:yh)(t,h,C,1,S)},q0=t=>Bp.singleData(t.value,t),c8=(t,s,a,i)=>{const d=Ew(s,i),g=Hp(i);return{data:q0({...t,movement:d,menuBehaviours:bw.unnamedEvents(s!=="auto"?[]:[or((h,C)=>{CO(h,4,g.item).each(({numColumns:S,numRows:T})=>{_n.setGridSize(h,T,S)})})])}),menu:{markers:Hp(i),fakeFocus:a===Tw.ContentFocus}}},i8=t=>E.create(zt.fromDom(t.startContainer),t.startOffset,zt.fromDom(t.endContainer),t.endOffset),l8={register:(t,s)=>{const a=G("autocompleter"),i=cn(!1),d=cn(!1),g=jn(),h=p(_r.sketch({dom:{tag:"div",classes:["tox-autocompleter"],attributes:{id:a}},components:[],fireDismissalEventInstead:{},inlineBehaviours:Ft([so("dismissAutocompleter",[rt(Lg(),()=>F()),rt(Hg(),(ce,xe)=>{Pa(xe.event.target,"id").each(De=>Hn(zt.fromDom(t.getBody()),"aria-activedescendant",De))})])]),lazySink:s.getSink})),C=()=>_r.isOpen(h),S=d.get,T=()=>{if(C()){_r.hide(h),t.dom.remove(a,!1);const ce=zt.fromDom(t.getBody());Pa(ce,"aria-owns").filter(xe=>xe===a).each(()=>{tr(ce,"aria-owns"),tr(ce,"aria-activedescendant")})}},O=()=>_r.getContent(h).bind(ce=>Fn(ce.components(),0)),F=()=>t.execCommand("mceAutocompleterClose"),z=ce=>{const xe=Wo(ce,De=>k.from(De.columns)).getOr(1);return me(ce,De=>{const Ke=De.items;return LZ(Ke,De.matchText,(Ye,Kt)=>{const Tt={hide:()=>F(),reload:_t=>{T(),t.execCommand("mceAutocompleterReload",!1,{fetchOptions:_t})}};t.execCommand("mceAutocompleterRefreshActiveRange"),g.get().each(_t=>{i.set(!0),De.onAction(Tt,_t,Ye,Kt),i.set(!1)})},xe,Tm.BUBBLE_TO_SANDBOX,s,De.highlightOn)})},q=(ce,xe)=>{const De=Wo(ce,Ke=>k.from(Ke.columns)).getOr(1);_r.showMenuAt(h,{anchor:{type:"selection",getSelection:()=>g.get().map(i8),root:zt.fromDom(t.getBody())}},c8(yh("autocompleter-value",!0,xe,De,{menuType:"normal"}),De,Tw.ContentFocus,"normal")),O().each(vs.highlightFirst)},Z=ce=>{const xe=z(ce);xe.length>0?(q(ce,xe),Hn(zt.fromDom(t.getBody()),"aria-owns",a),t.inline||ae()):T()},ae=()=>{t.dom.get(a)&&t.dom.remove(a,!1);const ce=t.getDoc().documentElement,xe=t.selection.getNode(),De=m1(h.element);Cr(De,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",top:`${xe.offsetTop}px`,left:`${xe.offsetLeft}px`}),t.dom.add(ce,De.dom),Bs(De,'[role="menu"]').each(Ke=>{Ho(Ke,"position"),Ho(Ke,"max-height")})};t.on("AutocompleterStart",({lookupData:ce})=>{d.set(!0),i.set(!1),Z(ce)}),t.on("AutocompleterUpdate",({lookupData:ce})=>Z(ce)),t.on("AutocompleterUpdateActiveRange",({range:ce})=>g.set(ce)),t.on("AutocompleterEnd",()=>{T(),d.set(!1),i.set(!1),g.clear()});const ye={cancelIfNecessary:F,isMenuOpen:C,isActive:S,isProcessingAction:i.get,getMenu:O};VV.setup(ye,t)}},zZ=(t,s)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:Ne(t.items,s.interpreter)});var u8=tinymce.util.Tools.resolve("tinymce.html.Entities");const Aw=(t,s,a,i)=>{const d=UZ(t,s,a,i);return No.sketch(d)},VZ=(t,s)=>Aw(t,s,[],[]),UZ=(t,s,a,i)=>({dom:eR(a),components:t.toArray().concat([s]),fieldBehaviours:Ft(i)}),d8=()=>eR([]),eR=t=>({tag:"div",classes:["tox-form__group"].concat(t)}),G0=(t,s)=>No.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[pr(s.translate(t))]}),oi=G("form-component-change"),TA=G("form-component-input"),my=G("form-close"),Yp=G("form-cancel"),ng=G("form-action"),_w=G("form-submit"),tR=G("form-block"),kw=G("form-unblock"),nR=G("form-tabchange"),oR=G("form-resize"),WZ=(t,s,a)=>{const i=t.label.map(q=>G0(q,s)),d=s.icons(),g=q=>{var Z;return(Z=d[q])!==null&&Z!==void 0?Z:q},h=q=>(Z,ae)=>{uc(ae.event.target,"[data-collection-item-value]").each(ye=>{q(Z,ae,ye,ha(ye,"data-collection-item-value"))})},C=(q,Z)=>{const ye=s.checkUiComponentContext("mode:design").shouldDisable||s.isDisabled()?" tox-collection__item--state-disabled":"",ce=Ne(Z,Ke=>{const Ye=ia.translate(Ke.text),Kt=t.columns===1?`<div class="tox-collection__item-label">${Ye}</div>`:"",Tt=`<div class="tox-collection__item-icon">${g(Ke.icon)}</div>`,_t={_:" "," - ":" ","-":" "},wt=Ye.replace(/\_| \- |\-/g,Bn=>_t[Bn]);return`<div data-mce-tooltip="${wt}" class="tox-collection__item${ye}" tabindex="-1" data-collection-item-value="${u8.encodeAllRaw(Ke.value)}" aria-label="${wt}">${Tt}${Kt}</div>`}),xe=t.columns!=="auto"&&t.columns>1?qt(ce,t.columns):[ce],De=Ne(xe,Ke=>`<div class="tox-collection__group">${Ke.join("")}</div>`);bl(q.element,De.join(""))},S=h((q,Z,ae,ye)=>{Z.stop(),s.checkUiComponentContext("mode:design").shouldDisable||s.isDisabled()||Nn(q,ng,{name:t.name,value:ye})}),T=[rt(Fu(),h((q,Z,ae)=>{Ea(ae,!0)})),rt(Jd(),S),rt(Pg(),S),rt(Nu(),h((q,Z,ae)=>{Bs(q.element,"."+F0).each(ye=>{Sr(ye,F0)}),Ls(ae,F0)})),rt(kb(),h(q=>{Bs(q.element,"."+F0).each(Z=>{Sr(Z,F0),wr(Z)})})),Km(h((q,Z,ae,ye)=>{Nn(q,ng,{name:t.name,value:ye})}))],O=(q,Z)=>Ne(_a(q.element,".tox-collection__item"),Z),F=No.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(t.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:It},behaviours:Ft([xn.config({disabled:()=>s.checkUiComponentContext(t.context).shouldDisable,onDisabled:q=>{O(q,Z=>{Ls(Z,"tox-collection__item--state-disabled"),Hn(Z,"aria-disabled",!0)})},onEnabled:q=>{O(q,Z=>{Sr(Z,"tox-collection__item--state-disabled"),tr(Z,"aria-disabled")})}}),vr(()=>s.checkUiComponentContext(t.context)),co.config({}),br.config({...s.tooltips.getConfig({tooltipText:"",onShow:q=>{Bs(q.element,"."+F0+"[data-mce-tooltip]").each(Z=>{Pa(Z,"data-mce-tooltip").each(ae=>{br.setComponents(q,s.tooltips.getComponents({tooltipText:ae}))})})}}),mode:"children-keyboard-focus",anchor:q=>({type:"node",node:Bs(q.element,"."+F0).orThunk(()=>mb(".tox-collection__item")),root:q.element,layouts:{onLtr:K([aa,Ha,Ca,hc,gr,Oa]),onRtl:K([aa,Ha,Ca,hc,gr,Oa])},bubble:Al(0,-2,{})})}),Xt.config({store:{mode:"memory",initialValue:a.getOr([])},onSetValue:(q,Z)=>{C(q,Z),t.columns==="auto"&&CO(q,5,"tox-collection__item").each(({numRows:ae,numColumns:ye})=>{_n.setGridSize(q,ae,ye)}),$o(q,oR)}}),Ys.config({}),_n.config(vZ(t.columns,"normal")),so("collection-events",T)]),eventOrder:{[el()]:["disabling","alloy.base.behaviour","collection-events"],[Nu()]:["collection-events","tooltipping"]}});return Aw(i,F,["tox-form__group--collection"],[])},ZZ=(t,s)=>au.sketch({dom:t.dom,components:t.components,toggleClass:"mce-active",dropdownBehaviours:Ft([Gu.button(()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(t.context).shouldDisable),vr(()=>s.providers.checkUiComponentContext(t.context)),Wv.config({}),Ys.config({})]),layouts:t.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:s.getSink,fetch:a=>os.nu(i=>t.fetch(i)).map(i=>k.from(q0(At(xA(G("menu-value"),i,d=>{t.onItemAction(a,d)},t.columns,t.presets,Tm.CLOSE_ON_EXECUTE,ut,s.providers),{movement:Ew(t.columns,t.presets)})))),parts:{menu:Qv(!1,1,t.presets)}}),m8=G("color-input-change"),sR=G("color-swatch-change"),f8=G("color-picker-cancel"),jZ=(t,s,a,i)=>{const d=No.parts.field({factory:cf,inputClasses:["tox-textfield"],data:i,onSetValue:T=>ym.run(T).get(ie),inputBehaviours:Ft([xn.config({disabled:()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(t.context).shouldDisable}),vr(()=>s.providers.checkUiComponentContext(t.context)),Ys.config({}),ym.config({invalidClass:"tox-textbox-field-invalid",getRoot:T=>Su(T.element),notify:{onValid:T=>{const O=Xt.getValue(T);Nn(T,m8,{color:O})}},validator:{validateOnLoad:!1,validate:T=>{const O=Xt.getValue(T);if(O.length===0)return os.pure(gn.value(!0));{const F=zt.fromTag("span");Yn(F,"background-color",O);const z=lr(F,"background-color").fold(()=>gn.error("blah"),q=>gn.value(O));return os.pure(z)}}}})]),selectOnFocus:!1}),g=t.label.map(T=>G0(T,s.providers)),h=(T,O)=>{Nn(T,sR,{value:O})},C=(T,O)=>{S.getOpt(T).each(F=>{O==="custom"?a.colorPicker(z=>{z.fold(()=>$o(F,f8),q=>{h(F,q),bA(t.storageKey,q)})},"#ffffff"):O==="remove"?h(F,""):h(F,O)})},S=fs(ZZ({dom:{tag:"span",attributes:{"aria-label":s.providers.translate("Color swatch")}},layouts:{onRtl:()=>[gr,Ca,aa],onLtr:()=>[Ca,gr,aa]},components:[],fetch:GO(a.getColors(t.storageKey),t.storageKey,a.hasCustomColors()),columns:a.getColorCols(t.storageKey),presets:"color",onItemAction:C,context:t.context},s));return No.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:g.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[d,S.asSpec()]}]),fieldBehaviours:Ft([so("form-field-events",[rt(m8,(T,O)=>{S.getOpt(T).each(F=>{Yn(F.element,"background-color",O.event.color)}),Nn(T,oi,{name:t.name})}),rt(sR,(T,O)=>{No.getField(T).each(F=>{Xt.setValue(F,O.event.value),it.getCurrent(T).each(ao.focus)})}),rt(f8,(T,O)=>{No.getField(T).each(F=>{it.getCurrent(T).each(ao.focus)})})])])})},km={self:()=>it.config({find:k.some}),memento:t=>it.config({find:t.getOpt}),childAt:t=>it.config({find:s=>zd(s.element,t).bind(a=>s.getSystem().getByDom(a).toOptional())})},h8=Xn([We("preprocess",It),We("postprocess",It)]),qZ=(t,s)=>{const a=Ri("RepresentingConfigs.memento processors",h8,s);return Xt.config({store:{mode:"manual",getValue:i=>{const d=t.get(i),g=Xt.getValue(d);return a.postprocess(g)},setValue:(i,d)=>{const g=a.preprocess(d),h=t.get(i);Xt.setValue(h,g)}}})},K0=(t,s,a)=>Xt.config({store:{mode:"manual",...t.map(i=>({initialValue:i})).getOr({}),getValue:s,setValue:a}}),GZ=(t,s,a)=>K0(t,i=>s(i.element),(i,d)=>a(i.element,d)),KZ=t=>GZ(t,xu,bl),AA=t=>Xt.config({store:{mode:"memory",initialValue:t}}),Dw=G("rgb-hex-update"),p8=G("slider-update"),Ow=G("palette-update"),b8=(t,s)=>{const a=Dd.parts.spectrum({dom:{tag:"div",classes:[s("hue-slider-spectrum")],attributes:{role:"presentation"}}}),i=Dd.parts.thumb({dom:{tag:"div",classes:[s("hue-slider-thumb")],attributes:{role:"presentation"}}});return Dd.sketch({dom:{tag:"div",classes:[s("hue-slider")],attributes:{role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":120}},rounded:!1,model:{mode:"y",getInitialValue:K(0)},components:[a,i],sliderBehaviours:Ft([ao.config({})]),onChange:(d,g,h)=>{Hn(d.element,"aria-valuenow",Math.floor(360-h*3.6)),Nn(d,p8,{value:h})}})},aR=G("valid-input"),_A=G("invalid-input"),v8=G("validating-input"),kA="colorcustom.rgb.",fy={isEnabled:Ct,setEnabled:ie,immediatelyShow:ie,immediatelyHide:ie},y8=(t,s,a,i,d,g)=>{const h=(ae,ye)=>{const ce=ye.get();ae!==ce.isEnabled()&&(ce.setEnabled(ae),ae?ce.immediatelyShow():ce.immediatelyHide())},C=(ae,ye,ce)=>ym.config({invalidClass:s("invalid"),notify:{onValidate:xe=>{Nn(xe,v8,{type:ae})},onValid:xe=>{h(!1,ce),Nn(xe,aR,{type:ae,value:Xt.getValue(xe)})},onInvalid:xe=>{h(!0,ce),Nn(xe,_A,{type:ae,value:Xt.getValue(xe)})}},validator:{validate:xe=>{const De=Xt.getValue(xe),Ke=ye(De)?gn.value(!0):gn.error(t("aria.input.invalid"));return os.pure(Ke)},validateOnLoad:!1}}),S=(ae,ye,ce,xe,De)=>{const Ke=cn(fy),Ye=t(kA+"range"),Kt=No.parts.label({dom:{tag:"label"},components:[pr(ce)]}),Tt=No.parts.field({data:De,factory:cf,inputAttributes:{type:"text","aria-label":xe,...ye==="hex"?{"aria-live":"polite"}:{}},inputClasses:[s("textfield")],inputBehaviours:Ft([C(ye,ae,Ke),Ys.config({}),br.config({...d({tooltipText:"",onSetup:mo=>{Ke.set({isEnabled:()=>br.isEnabled(mo),setEnabled:bn=>br.setEnabled(mo,bn),immediatelyShow:()=>br.immediateOpenClose(mo,!0),immediatelyHide:()=>br.immediateOpenClose(mo,!1)}),br.setEnabled(mo,!1)},onShow:(mo,bn)=>{br.setComponents(mo,[{dom:{tag:"p",classes:[s("rgb-warning-note")]},components:[pr(t(ye==="hex"?"colorcustom.rgb.invalidHex":"colorcustom.rgb.invalid"))]}])}})})]),onSetValue:mo=>{ym.isInvalid(mo)&&ym.run(mo).get(ie)}}),_t=G("aria-invalid"),wt=fs(g("invalid",k.some(_t),"warning")),Bn=fs({dom:{tag:"div",classes:[s("invalid-icon")]},components:[wt.asSpec()]}),yn=[Kt,Tt,Bn.asSpec()],Zo=ye!=="hex"?[No.parts["aria-descriptor"]({text:Ye})]:[],Vn=yn.concat(Zo);return{dom:{tag:"div",attributes:{role:"presentation"},classes:[s("rgb-container")]},components:Vn}},T=(ae,ye)=>{const ce=dy(ye);return Dl.getField(ae,"hex").each(xe=>{ao.isFocused(xe)||Xt.setValue(ae,{hex:ce.value})}),ce},O=(ae,ye)=>{const ce=ye.red,xe=ye.green,De=ye.blue;Xt.setValue(ae,{red:ce,green:xe,blue:De})},F=fs({dom:{tag:"div",classes:[s("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),z=(ae,ye)=>{F.getOpt(ae).each(ce=>{Yn(ce.element,"background-color","#"+ye.value)})};return nu({factory:()=>{const ae={red:cn(k.some(255)),green:cn(k.some(255)),blue:cn(k.some(255)),hex:cn(k.some("ffffff"))},ye=(bn,vt)=>{const Ut=Cw(vt);O(bn,Ut),Ke(Ut)},ce=bn=>ae[bn].get(),xe=(bn,vt)=>{ae[bn].set(vt)},De=()=>ce("red").bind(bn=>ce("green").bind(vt=>ce("blue").map(Ut=>Z0(bn,vt,Ut,1)))),Ke=bn=>{const vt=bn.red,Ut=bn.green,qn=bn.blue;xe("red",k.some(vt)),xe("green",k.some(Ut)),xe("blue",k.some(qn))},Ye=(bn,vt)=>{const Ut=vt.event;Ut.type!=="hex"?xe(Ut.type,k.none()):i(bn)},Kt=(bn,vt)=>{a(bn);const Ut=DO(vt);xe("hex",k.some(Ut.value));const qn=Cw(Ut);O(bn,qn),Ke(qn),Nn(bn,Dw,{hex:Ut}),z(bn,Ut)},Tt=(bn,vt,Ut)=>{const qn=parseInt(Ut,10);xe(vt,k.some(qn)),De().each(vo=>{const En=T(bn,vo);Nn(bn,Dw,{hex:En}),z(bn,En)})},_t=bn=>bn.type==="hex",wt=(bn,vt)=>{const Ut=vt.event;_t(Ut)?Kt(bn,Ut.value):Tt(bn,Ut.type,Ut.value)},Bn=bn=>({label:t(kA+bn+".label"),description:t(kA+bn+".description")}),yn=Bn("red"),Zo=Bn("green"),Vn=Bn("blue"),mo=Bn("hex");return At(Dl.sketch(bn=>({dom:{tag:"form",classes:[s("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[bn.field("red",No.sketch(S(gA,"red",yn.label,yn.description,255))),bn.field("green",No.sketch(S(gA,"green",Zo.label,Zo.description,255))),bn.field("blue",No.sketch(S(gA,"blue",Vn.label,Vn.description,255))),bn.field("hex",No.sketch(S(dA,"hex",mo.label,mo.description,"ffffff"))),F.asSpec()],formBehaviours:Ft([ym.config({invalidClass:s("form-invalid")}),so("rgb-form-events",[rt(aR,wt),rt(_A,Ye),rt(v8,Ye)])])})),{apis:{updateHex:(bn,vt)=>{Xt.setValue(bn,{hex:vt.value}),ye(bn,vt),z(bn,vt)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(ae,ye,ce)=>{ae.updateHex(ye,ce)}},extraApis:{}})},YZ=(t,s)=>{const a=Dd.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[s("sv-palette-spectrum")]}}),i=Dd.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette-thumb")],innerHtml:`<div class=${s("sv-palette-inner-thumb")} role="presentation"></div>`}}),d=(T,O)=>{const{width:F,height:z}=T,q=T.getContext("2d");if(q===null)return;q.fillStyle=O,q.fillRect(0,0,F,z);const Z=q.createLinearGradient(0,0,F,0);Z.addColorStop(0,"rgba(255,255,255,1)"),Z.addColorStop(1,"rgba(255,255,255,0)"),q.fillStyle=Z,q.fillRect(0,0,F,z);const ae=q.createLinearGradient(0,0,0,z);ae.addColorStop(0,"rgba(0,0,0,0)"),ae.addColorStop(1,"rgba(0,0,0,1)"),q.fillStyle=ae,q.fillRect(0,0,F,z)},g=(T,O)=>{const F=T.components()[0].element.dom,z=Kp(O,100,100),q=BO(z);d(F,ww(q))},h=(T,O)=>{const F=mA(Cw(O));Dd.setValue(T,{x:F.saturation,y:100-F.value}),Hn(T.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",F.saturation,F.value]))};return nu({factory:T=>{const O=K({x:0,y:0}),F=(Z,ae,ye)=>{Gn(ye)||Hn(Z.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",Math.floor(ye.x),Math.floor(100-ye.y)])),Nn(Z,Ow,{value:ye})},z=(Z,ae,ye,ce)=>{d(ye.element.dom,ww(kP))},q=Ft([it.config({find:k.some}),ao.config({})]);return Dd.sketch({dom:{tag:"div",attributes:{role:"slider","aria-valuetext":t(["Saturation {0}%, Brightness {1}%",0,0])},classes:[s("sv-palette")]},model:{mode:"xy",getInitialValue:O},rounded:!1,components:[a,i],onChange:F,onInit:z,sliderBehaviours:q})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(T,O,F)=>{g(O,F)},setThumb:(T,O,F)=>{h(O,F)}},extraApis:{}})},XZ=(t,s,a,i)=>{const d=h=>{const C=y8(t,s,h.onValidHex,h.onInvalidHex,a,i),S=YZ(t,s),T=_t=>(100-_t)/100*360,O=_t=>100-_t/360*100,F={paletteRgba:cn(kP),paletteHue:cn(0)},z=fs(b8(t,s)),q=fs(S.sketch({})),Z=fs(C.sketch({})),ae=(_t,wt,Bn)=>{q.getOpt(_t).each(yn=>{S.setHue(yn,Bn)})},ye=(_t,wt)=>{Z.getOpt(_t).each(Bn=>{C.updateHex(Bn,wt)})},ce=(_t,wt,Bn)=>{z.getOpt(_t).each(yn=>{Dd.setValue(yn,O(Bn))})},xe=(_t,wt)=>{q.getOpt(_t).each(Bn=>{S.setThumb(Bn,wt)})},De=(_t,wt)=>{const Bn=Cw(_t);F.paletteRgba.set(Bn),F.paletteHue.set(wt)},Ke=(_t,wt,Bn,yn)=>{De(wt,Bn),ft(yn,Zo=>{Zo(_t,wt,Bn)})},Ye=()=>{const _t=[ye];return(wt,Bn)=>{const yn=Bn.event.value,Zo=F.paletteHue.get(),Vn=Kp(Zo,yn.x,100-yn.y),mo=NO(Vn);Ke(wt,mo,Zo,_t)}},Kt=()=>{const _t=[ae,ye];return(wt,Bn)=>{const yn=T(Bn.event.value),Zo=F.paletteRgba.get(),Vn=mA(Zo),mo=Kp(yn,Vn.saturation,Vn.value),bn=NO(mo);Ke(wt,bn,yn,_t)}},Tt=()=>{const _t=[ae,ce,xe];return(wt,Bn)=>{const yn=Bn.event.hex,Zo=eZ(yn);Ke(wt,yn,Zo.hue,_t)}};return{uid:h.uid,dom:h.dom,components:[q.asSpec(),z.asSpec(),Z.asSpec()],behaviours:Ft([so("colour-picker-events",[rt(Dw,Tt()),rt(Ow,Ye()),rt(p8,Kt())]),it.config({find:_t=>Z.getOpt(_t)}),_n.config({mode:"acyclic"})])}};return nu({name:"ColourPicker",configFields:[yt("dom"),We("onValidHex",ie),We("onInvalidHex",ie)],factory:d})},JZ={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red channel","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green channel","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue channel","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.rgb.invalid":"Numbers only, 0 to 255","colorcustom.rgb.invalidHex":"Hexadecimal only, 000000 to FFFFFF","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},cR=t=>s=>pe(s)?t.translate(JZ[s]):t.translate(s),QZ=(t,s,a)=>{const i=T=>"tox-"+T,d=(T,O,F=T,z=T)=>ju(F,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+T],attributes:{title:s.translate(z),"aria-live":"polite",...O.fold(()=>({}),q=>({id:q}))}},s.icons),g=XZ(cR(s),i,s.tooltips.getConfig,d),h=T=>{Nn(T,ng,{name:"hex-valid",value:!0})},C=T=>{Nn(T,ng,{name:"hex-valid",value:!1})},S=fs(g.sketch({dom:{tag:"div",classes:[i("color-picker-container")],attributes:{role:"presentation"}},onValidHex:h,onInvalidHex:C}));return{dom:{tag:"div"},components:[S.asSpec()],behaviours:Ft([K0(a,T=>{const O=S.get(T);return it.getCurrent(O).bind(q=>Xt.getValue(q).hex).map(q=>"#"+Ju(q,"#")).getOr("")},(T,O)=>{const F=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,z=k.from(F.exec(O)).bind(ae=>Fn(ae,1)),q=S.get(T);it.getCurrent(q).fold(()=>{console.log("Can not find form")},ae=>{Xt.setValue(ae,{hex:z.getOr("")}),Dl.getField(ae,"hex").each(ye=>{$o(ye,Um())})})}),km.self()])}};var ej=tinymce.util.Tools.resolve("tinymce.Resource");const iR=t=>ko(t,"init"),tj=t=>{const s=jn(),a=fs({dom:{tag:t.tag}}),i=jn(),d=!iR(t)&&t.onFocus.isSome()?[ao.config({onFocus:g=>{t.onFocus.each(h=>{h(g.element.dom)})}}),Ys.config({})]:[];return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:Ft([so("custom-editor-events",[or(g=>{a.getOpt(g).each(h=>{(iR(t)?t.init(h.element.dom):ej.load(t.scriptId,t.scriptUrl).then(C=>C(h.element.dom,t.settings))).then(C=>{i.on(S=>{C.setValue(S)}),i.clear(),s.set(C)})})})]),K0(k.none(),()=>s.get().fold(()=>i.get().getOr(""),g=>g.getValue()),(g,h)=>{s.get().fold(()=>i.set(h),C=>C.setValue(h))}),km.self()].concat(d)),components:[a.asSpec()]}};var Th=tinymce.util.Tools.resolve("tinymce.util.Tools");const lR=G("browse.files.event"),C8=(t,s)=>{const a=Th.explode(s.getOption("images_file_types")),i=d=>$n(a,g=>ri(d.name.toLowerCase(),`.${g.toLowerCase()}`));return ro(es(t),i)},nj=(t,s,a)=>{const i=(z,q)=>{q.stop()},d=z=>(q,Z)=>{ft(z,ae=>{ae(q,Z)})},g=(z,q)=>{var Z;if(!xn.isDisabled(z)){const ae=q.event.raw;Nn(z,lR,{files:(Z=ae.dataTransfer)===null||Z===void 0?void 0:Z.files})}},h=(z,q)=>{const Z=q.event.raw.target;Nn(z,lR,{files:Z.files})},C=(z,q)=>{q&&(Xt.setValue(z,C8(q,s)),Nn(z,oi,{name:t.name}))},S=fs({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:Ft([so("input-file-events",[Gg(Jd()),Gg(Pg())])])}),T=t.label.map(z=>G0(z,s)),O=No.parts.field({factory:ti,dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[pr(s.translate("Browse for an image")),S.asSpec()],action:z=>{S.get(z).element.dom.click()},buttonBehaviours:Ft([km.self(),AA(a.getOr([])),Ys.config({}),Gu.button(()=>s.checkUiComponentContext(t.context).shouldDisable),vr(()=>s.checkUiComponentContext(t.context))])}),F={dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:Ft([xn.config({disabled:()=>s.checkUiComponentContext(t.context).shouldDisable}),vr(()=>s.checkUiComponentContext(t.context)),Jo.config({toggleClass:"dragenter",toggleOnExecute:!1}),so("dropzone-events",[rt("dragenter",d([i,Jo.toggle])),rt("dragleave",d([i,Jo.toggle])),rt("dragover",i),rt("drop",d([i,g])),rt(Mg(),h)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[pr(s.translate("Drop an image here"))]},O]}]};return Aw(T,F,["tox-form__group--stretched"],[so("handle-files",[rt(lR,(z,q)=>{No.getField(z).each(Z=>{C(Z,q.event.files)})})])])},oj=(t,s)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${t.columns}col`]},components:Ne(t.items,s.interpreter)}),uR=G("alloy-fake-before-tabstop"),dR=G("alloy-fake-after-tabstop"),w8=t=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:Ft([ao.config({ignore:!0}),Ys.config({})])}),S8=(t,s)=>({dom:{tag:"div",classes:["tox-navobj",...t.getOr([])]},components:[w8([uR]),s,w8([dR])],behaviours:Ft([km.childAt(1)])}),x8=(t,s)=>{Nn(t,La(),{raw:{which:9,shiftKey:s}})},sj=(t,s)=>{const a=s.element;Wr(a,uR)?x8(t,!0):Wr(a,dR)&&x8(t,!1)},Rw=t=>Sg(t,["."+uR,"."+dR].join(","),ut),DA=G("update-dialog"),E8=G("update-title"),mR=G("update-body"),T8=G("update-footer"),A8=G("body-send-message"),OA=G("dialog-focus-shifted"),fR=Nr().browser,Mw=fR.isSafari(),rj=fR.isFirefox(),gR=Mw||rj,aj=fR.isChromium(),_8=({scrollTop:t,scrollHeight:s,clientHeight:a})=>Math.ceil(t)+a>=s,k8=(t,s)=>t.scrollTo(0,s==="bottom"?99999999:s),D8=(t,s)=>{const a=t.body;return k.from(!/^<!DOCTYPE (html|HTML)/.test(s)&&(!aj&&!Mw||Wn(a)&&(a.scrollTop!==0||Math.abs(a.scrollHeight-a.clientHeight)>1))?a:t.documentElement)},hR=(t,s,a)=>{const i=t.dom;k.from(i.contentDocument).fold(a,d=>{let g=0;const h=D8(d,s).map(S=>(g=S.scrollTop,S)).forall(_8),C=()=>{const S=i.contentWindow;Wn(S)&&(h?k8(S,"bottom"):!h&&gR&&g!==0&&k8(S,g))};Mw&&i.addEventListener("load",C,{once:!0}),d.open(),d.write(s),d.close(),Mw||C()})},cj=Er(gR,Mw?500:200).map(t=>ir(hR,t)),ij=(t,s)=>{const a=cn(t.getOr(""));return{getValue:i=>a.get(),setValue:(i,d)=>{if(a.get()!==d){const g=i.element,h=()=>Hn(g,"srcdoc",d);s?cj.fold(K(hR),C=>C.throttle)(g,d,h):h()}a.set(d)}}},R8=(t,s,a)=>{const i="tox-dialog__iframe",d=t.transparent?[]:[`${i}--opaque`],g=t.border?["tox-navobj-bordered"]:[],h={...t.label.map(F=>({title:F})).getOr({}),...a.map(F=>({srcdoc:F})).getOr({}),...t.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}},C=ij(a,t.streamContent),S=t.label.map(F=>G0(F,s)),T=F=>S8(k.from(g),{uid:F.uid,dom:{tag:"iframe",attributes:h,classes:[i,...d]},behaviours:Ft([Ys.config({}),ao.config({}),K0(a,C.getValue,C.setValue),ou.config({channels:{[OA]:{onReceive:(z,q)=>{q.newFocus.each(Z=>{Su(z.element).each(ae=>{(Ko(z.element,Z)?Ls:Sr)(ae,"tox-navobj-bordered-focus")})})}}}})])}),O=No.parts.field({factory:{sketch:T}});return Aw(S,O,["tox-form__group--stretched"],[])},lj=(t,s,a,i,d)=>{const g=a*d,h=i*d,C=Math.max(0,t/2-g/2),S=Math.max(0,s/2-h/2);return{left:C.toString()+"px",top:S.toString()+"px",width:g.toString()+"px",height:h.toString()+"px"}},M8=(t,s,a)=>{const i=Ya(t),d=ea(t);return Math.min(i/s,d/a,1)},uj=(t,s)=>{const a=cn(s.getOr({url:""})),i=fs({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:s.map(S=>({src:S.url})).getOr({})}}),d=fs({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[i.asSpec()]}),g=(S,T)=>{const O={url:T.url};T.zoom.each(z=>O.zoom=z),T.cachedWidth.each(z=>O.cachedWidth=z),T.cachedHeight.each(z=>O.cachedHeight=z),a.set(O);const F=()=>{const{cachedWidth:z,cachedHeight:q,zoom:Z}=O;if(!tn(z)&&!tn(q)){if(tn(Z)){const ye=M8(S.element,z,q);O.zoom=ye}const ae=lj(Ya(S.element),ea(S.element),z,q,O.zoom);d.getOpt(S).each(ye=>{Cr(ye.element,ae)})}};i.getOpt(S).each(z=>{const q=z.element;T.url!==ha(q,"src")&&(Hn(q,"src",T.url),Sr(S.element,"tox-imagepreview__loaded")),F(),Ki(q).then(Z=>{S.getSystem().isConnected()&&(Ls(S.element,"tox-imagepreview__loaded"),O.cachedWidth=Z.dom.naturalWidth,O.cachedHeight=Z.dom.naturalHeight,F())})})},h={};t.height.each(S=>h.height=S);const C=s.map(S=>({url:S.url,zoom:k.from(S.zoom),cachedWidth:k.from(S.cachedWidth),cachedHeight:k.from(S.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:h,attributes:{role:"presentation"}},components:[d.asSpec()],behaviours:Ft([km.self(),K0(C,()=>a.get(),g)])}},RA=(t,s,a)=>{const i="tox-label",d=t.align==="center"?[`${i}--center`]:[],g=t.align==="end"?[`${i}--end`]:[],h=fs({dom:{tag:"label",classes:[i,...d,...g]},components:[pr(s.providers.translate(t.label))]}),C=Ne(t.items,s.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[h.asSpec(),...C],behaviours:Ft([km.self(),co.config({}),KZ(k.none()),_n.config({mode:"acyclic"}),so("label",[or(S=>{t.for.each(T=>{a(T).each(O=>{h.getOpt(S).each(F=>{var z;const q=(z=ha(O.element,"id"))!==null&&z!==void 0?z:G("form-field");Hn(O.element,"id",q),Hn(F.element,"for",q)})})})})])])}},pR=G("toolbar.button.execute"),B8=t=>Km((s,a)=>{iy(t,s)(i=>{Nn(s,pR,{buttonApi:i}),t.onAction(i)})}),Xp=G("common-button-display-events"),F8={[el()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events","tooltipping"],[fd()]:["toolbar-button-events",Xp],[Wm()]:["toolbar-button-events","dropdown-events","tooltipping"],[vi()]:["focusing","alloy.base.behaviour",Xp]},Bd=t=>Yn(t.element,"width",nr(t.element,"width")),Bw=(t,s,a)=>ju(t,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:a},s),gy=(t,s)=>Bw(t,s,[]),Jp=(t,s)=>Bw(t,s,[co.config({})]),MA=(t,s,a)=>({dom:{tag:"span",classes:[`${s}__select-label`]},components:[pr(a.translate(t))],behaviours:Ft([co.config({})])}),Fd=G("update-menu-text"),Ah=G("update-menu-icon"),bR=G("update-tooltip-text"),Fw=(t,s,a,i)=>{const d=cn(ie),g=cn(t.tooltip),h=t.text.map(ye=>fs(MA(ye,s,a.providers))),C=t.icon.map(ye=>fs(Jp(ye,a.providers.icons))),S=(ye,ce)=>{const xe=Xt.getValue(ye);return ao.focus(xe),Nn(xe,"keydown",{raw:ce.event.raw}),au.close(xe),k.some(!0)},T=t.role.fold(()=>({}),ye=>({role:ye})),O=k.from(t.listRole).map(ye=>({listRole:ye})).getOr({}),F=t.ariaLabel.fold(()=>({}),ye=>({"aria-label":a.providers.translate(ye)})),z=ju("chevron-down",{tag:"div",classes:[`${s}__select-chevron`]},a.providers.icons),q=G("common-button-display-events"),Z="dropdown-events";return fs(au.sketch({...t.uid?{uid:t.uid}:{},...T,...O,dom:{tag:"button",classes:[s,`${s}--select`].concat(Ne(t.classes,ye=>`${s}--${ye}`)),attributes:{...F,...Wn(i)?{"data-mce-name":i}:{}}},components:uy([C.map(ye=>ye.asSpec()),h.map(ye=>ye.asSpec()),k.some(z)]),matchWidth:!0,useMinWidth:!0,onOpen:(ye,ce,xe)=>{t.searchable&&PZ(xe)},dropdownBehaviours:Ft([...t.dropdownBehaviours,Gu.button(()=>t.disabled||a.providers.checkUiComponentContext(t.context).shouldDisable),vr(()=>a.providers.checkUiComponentContext(t.context)),Wv.config({}),co.config({}),...t.tooltip.map(ye=>br.config(a.providers.tooltips.getConfig({tooltipText:a.providers.translate(ye),onShow:ce=>{if(Qo(g.get(),t.tooltip,(xe,De)=>De!==xe).getOr(!1)){const xe=a.providers.translate(g.get().getOr(""));br.setComponents(ce,a.providers.tooltips.getComponents({tooltipText:xe}))}}}))).toArray(),so(Z,[Ku(t,d),xh(t,d)]),so(q,[or((ye,ce)=>{t.listRole!=="listbox"&&Bd(ye)})]),so("update-dropdown-width-variable",[rt(Ig(),(ye,ce)=>au.close(ye))]),so("menubutton-update-display-text",[rt(Fd,(ye,ce)=>{h.bind(xe=>xe.getOpt(ye)).each(xe=>{co.set(xe,[pr(a.providers.translate(ce.event.text))])})}),rt(Ah,(ye,ce)=>{C.bind(xe=>xe.getOpt(ye)).each(xe=>{co.set(xe,[Jp(ce.event.icon,a.providers.icons)])})}),rt(bR,(ye,ce)=>{const xe=a.providers.translate(ce.event.text);Hn(ye.element,"aria-label",xe),g.set(k.some(ce.event.text))})])]),eventOrder:At(F8,{[vi()]:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[fd()]:["toolbar-button-events",br.name(),Z,q]}),sandboxBehaviours:Ft([_n.config({mode:"special",onLeft:S,onRight:S}),so("dropdown-sandbox-events",[rt(LD,(ye,ce)=>{r8(ye),ce.stop()}),rt(TN,(ye,ce)=>{BZ(ye,ce),ce.stop()})])]),lazySink:a.getSink,toggleClass:`${s}--active`,parts:{menu:{...Qv(!1,t.columns,t.presets),fakeFocus:t.searchable,...t.listRole==="listbox"?{}:{onHighlightItem:QO,onCollapseMenu:(ye,ce,xe)=>{vs.getHighlighted(xe).each(De=>{QO(ye,xe,De)})},onDehighlightItem:a8}}},getAnchorOverrides:()=>({maxHeightFunction:(ye,ce)=>{gx()(ye,ce-10)}}),fetch:ye=>os.nu(vn(t.fetch,ye))})).asSpec()},dj=t=>pe(t),N8=t=>t.type==="separator",P8=t=>ko(t,"getSubmenuItems"),mj={type:"separator"},fj=(t,s)=>{const a=_o(t,(i,d)=>dj(d)?d===""?i:d==="|"?i.length>0&&!N8(i[i.length-1])?i.concat([mj]):i:ko(s,d.toLowerCase())?i.concat([s[d.toLowerCase()]]):i:i.concat([d]),[]);return a.length>0&&N8(a[a.length-1])&&a.pop(),a},vR=(t,s)=>{const a=t.getSubmenuItems(),i=$8(a,s),d=At(i.menus,{[t.value]:i.items}),g=At(i.expansions,{[t.value]:t.value});return{item:t,menus:d,expansions:g}},gj=t=>{const s=dn(t,"value").getOrThunk(()=>G("generated-menu-item"));return At({value:s},t)},$8=(t,s)=>{const a=fj(pe(t)?t.split(" "):t,s);return Qn(a,(i,d)=>{if(P8(d)){const g=gj(d),h=vR(g,s);return{menus:At(i.menus,h.menus),items:[h.item,...i.items],expansions:At(i.expansions,h.expansions)}}else return{...i,items:[d,...i.items]}},{menus:{},expansions:{},items:[]})},I8=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-field",placeholder:s.placeholder})),L8=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-results"})),hy=(t,s,a,i)=>{const d=G("primary-menu"),g=$8(t,a.shared.providers.menuItems());if(g.items.length===0)return k.none();const h=I8(i),C=oo(d,g.items,s,a,i.isHorizontalMenu,h),S=L8(i),T=mt(g.menus,(F,z)=>oo(z,F,s,a,!1,S)),O=At(T,Hm(d,C));return k.from(Bp.tieredData(d,O,g.expansions))},BA=t=>!ko(t,"items"),H8="data-value",z8=(t,s,a,i,d)=>Ne(a,g=>BA(g)?{type:"togglemenuitem",...d?{}:{role:"option"},text:g.text,value:g.value,active:g.value===i,onAction:()=>{Xt.setValue(t,g.value),Nn(t,oi,{name:s}),ao.focus(t)}}:{type:"nestedmenuitem",text:g.text,getSubmenuItems:()=>z8(t,s,g.items,i,d)}),FA=(t,s)=>Wo(t,a=>BA(a)?Er(a.value===s,a):FA(a.items,s)),ff=(t,s,a)=>{const i=$n(t.items,T=>!BA(T)),d=s.shared.providers,g=a.bind(T=>FA(t.items,T)).orThunk(()=>rn(t.items).filter(BA)),h=t.label.map(T=>G0(T,d)),C=No.parts.field({dom:{},factory:{sketch:T=>Fw({context:t.context,uid:T.uid,text:g.map(O=>O.text),icon:k.none(),tooltip:k.none(),role:Er(!i,"combobox"),...i?{}:{listRole:"listbox"},ariaLabel:t.label,fetch:(O,F)=>{const z=z8(O,t.name,t.items,Xt.getValue(O),i);F(hy(z,Tm.CLOSE_ON_EXECUTE,s,{isHorizontalMenu:!1,search:k.none()}))},onSetup:K(ie),getApi:K({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[Ys.config({}),K0(g.map(O=>O.value),O=>ha(O.element,H8),(O,F)=>{FA(t.items,F).each(z=>{Hn(O.element,H8,z.value),Nn(O,Fd,{text:z.text})})})]},"tox-listbox",s.shared)}}),S={dom:{tag:"div",classes:["tox-listboxfield"]},components:[C]};return No.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Oe([h.toArray(),[S]]),fieldBehaviours:Ft([xn.config({disabled:()=>!t.enabled||d.checkUiComponentContext(t.context).shouldDisable,onDisabled:T=>{No.getField(T).each(xn.disable)},onEnabled:T=>{No.getField(T).each(xn.enable)}})])})},yR=(t,s)=>({dom:{tag:"div",classes:t.classes},components:Ne(t.items,s.shared.interpreter)}),hj=(t,s,a)=>{const i=Ne(t.items,S=>({text:s.translate(S.text),value:S.value})),d=t.label.map(S=>G0(S,s)),g=No.parts.field({dom:{},...a.map(S=>({data:S})).getOr({}),selectAttributes:{size:t.size},options:i,factory:UH,selectBehaviours:Ft([xn.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable}),Ys.config({}),so("selectbox-change",[rt(Mg(),(S,T)=>{Nn(S,oi,{name:t.name})})])])}),h=t.size>1?k.none():k.some(ju("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},s.icons)),C={dom:{tag:"div",classes:["tox-selectfield"]},components:Oe([[g],h.toArray()])};return No.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Oe([d.toArray(),[C]]),fieldBehaviours:Ft([xn.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable,onDisabled:S=>{No.getField(S).each(xn.disable)},onEnabled:S=>{No.getField(S).each(xn.enable)}}),vr(()=>s.checkUiComponentContext(t.context))])})},V8=t=>{const s={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},a=d=>d in s?s[d]:1;let i=t.value.toFixed(a(t.unit));return i.indexOf(".")!==-1&&(i=i.replace(/\.?0*$/,"")),i+t.unit},NA=t=>{const a=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(a!==null){const i=parseFloat(a[1]),d=a[2];return gn.value({value:i,unit:d})}else return gn.error(t)},U8=(t,s)=>{const a={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},i=d=>ko(a,d);return t.unit===s?k.some(t.value):i(t.unit)&&i(s)?a[t.unit]===a[s]?k.some(t.value):k.some(t.value/a[t.unit]*a[s]):k.none()},PA=t=>k.none(),W8=(t,s)=>a=>U8(a,s).map(i=>({value:i*t,unit:s})),CR=(t,s)=>{const a=NA(t).toOptional(),i=NA(s).toOptional();return Qo(a,i,(d,g)=>U8(d,g.unit).map(h=>g.value/h).map(h=>W8(h,g.unit)).getOr(PA)).getOr(PA)},hJ=(t,s)=>{let a=PA;const i=G("ratio-event"),d=ae=>ju(ae,{tag:"span",classes:["tox-icon","tox-lock-icon__"+ae]},s.icons),g=()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable,h=vr(()=>s.checkUiComponentContext(t.context)),C=t.label.getOr("Constrain proportions"),S=s.translate(C),T=qr.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":S,"data-mce-name":C}},components:[d("lock"),d("unlock")],buttonBehaviours:Ft([xn.config({disabled:g}),h,Ys.config({}),br.config(s.tooltips.getConfig({tooltipText:S}))])}),O=ae=>({dom:{tag:"div",classes:["tox-form__group"]},components:ae}),F=ae=>No.parts.field({factory:cf,inputClasses:["tox-textfield"],inputBehaviours:Ft([xn.config({disabled:g}),h,Ys.config({}),so("size-input-events",[rt(Nu(),(ye,ce)=>{Nn(ye,i,{isField1:ae})}),rt(Mg(),(ye,ce)=>{Nn(ye,oi,{name:t.name})})])]),selectOnFocus:!1}),z=ae=>({dom:{tag:"label",classes:["tox-label"]},components:[pr(s.translate(ae))]}),q=qr.parts.field1(O([No.parts.label(z("Width")),F(!0)])),Z=qr.parts.field2(O([No.parts.label(z("Height")),F(!1)]));return qr.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[q,Z,O([z(ed),T])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(ae,ye,ce)=>{NA(Xt.getValue(ae)).each(xe=>{a(xe).each(De=>{Xt.setValue(ye,V8(De))})})},coupledFieldBehaviours:Ft([xn.config({disabled:g,onDisabled:ae=>{qr.getField1(ae).bind(No.getField).each(xn.disable),qr.getField2(ae).bind(No.getField).each(xn.disable),qr.getLock(ae).each(xn.disable)},onEnabled:ae=>{qr.getField1(ae).bind(No.getField).each(xn.enable),qr.getField2(ae).bind(No.getField).each(xn.enable),qr.getLock(ae).each(xn.enable)}}),vr(()=>s.checkUiComponentContext("mode:design")),so("size-input-events2",[rt(i,(ae,ye)=>{const ce=ye.event.isField1,xe=ce?qr.getField1(ae):qr.getField2(ae),De=ce?qr.getField2(ae):qr.getField1(ae),Ke=xe.map(Xt.getValue).getOr(""),Ye=De.map(Xt.getValue).getOr("");a=CR(Ke,Ye)})])])})},pJ=(t,s,a)=>{const i=Dd.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[pr(s.translate(t.label))]}),d=Dd.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),g=Dd.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return Dd.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:t.min,maxX:t.max,getInitialValue:K(a.getOrThunk(()=>(Math.abs(t.max)-Math.abs(t.min))/2))},components:[i,d,g],sliderBehaviours:Ft([km.self(),ao.config({})]),onChoose:(h,C,S)=>{Nn(h,oi,{name:t.name,value:S})},onChange:(h,C,S)=>{Nn(h,oi,{name:t.name,value:S})}})},il=(t,s)=>{const a=C=>({dom:{tag:"th",innerHtml:s.translate(C)}}),i=C=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:Ne(C,a)}]}),d=C=>({dom:{tag:"td",innerHtml:s.translate(C)}}),g=C=>({dom:{tag:"tr"},components:Ne(C,d)}),h=C=>({dom:{tag:"tbody"},components:Ne(C,g)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[i(t.header),h(t.cells)],behaviours:Ft([Ys.config({}),ao.config({})])}},wR=(t,s)=>{const a=t.label.map(Z=>G0(Z,s)),i=[xn.config({disabled:()=>t.disabled||s.checkUiComponentContext(t.context).shouldDisable}),vr(()=>s.checkUiComponentContext(t.context)),_n.config({mode:"execution",useEnter:t.multiline!==!0,useControlEnter:t.multiline===!0,execute:Z=>($o(Z,_w),k.some(!0))}),so("textfield-change",[rt(Um(),(Z,ae)=>{Nn(Z,oi,{name:t.name})}),rt(d2(),(Z,ae)=>{Nn(Z,oi,{name:t.name})})]),Ys.config({})],d=t.validation.map(Z=>ym.config({getRoot:ae=>Su(ae.element),invalidClass:"tox-invalid",validator:{validate:ae=>{const ye=Xt.getValue(ae),ce=Z.validator(ye);return os.pure(ce===!0?gn.value(ye):gn.error(ce))},validateOnLoad:Z.validateOnLoad}})).toArray(),g=t.placeholder.fold(K({}),Z=>({placeholder:s.translate(Z)})),h=t.inputMode.fold(K({}),Z=>({inputmode:Z})),S={...t.spellcheck.fold(K({}),Z=>({spellcheck:Z})),...g,...h,"data-mce-name":t.name},T=No.parts.field({tag:t.multiline===!0?"textarea":"input",...t.data.map(Z=>({data:Z})).getOr({}),inputAttributes:S,inputClasses:[t.classname],inputBehaviours:Ft(Oe([i,d])),selectOnFocus:!1,factory:cf}),O=t.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[T]}:T,z=(t.flex?["tox-form__group--stretched"]:[]).concat(t.maximized?["tox-form-group--maximize"]:[]),q=[xn.config({disabled:()=>t.disabled||s.checkUiComponentContext(t.context).shouldDisable,onDisabled:Z=>{No.getField(Z).each(xn.disable)},onEnabled:Z=>{No.getField(Z).each(xn.enable)}}),vr(()=>s.checkUiComponentContext(t.context))];return Aw(a,O,z,q)},pj=(t,s,a)=>wR({name:t.name,multiline:!1,label:t.label,inputMode:t.inputMode,placeholder:t.placeholder,flex:!1,disabled:!t.enabled,classname:"tox-textfield",validation:k.none(),maximized:t.maximized,data:a,context:t.context,spellcheck:k.none()},s),Z8=(t,s,a)=>wR({name:t.name,multiline:!0,label:t.label,inputMode:k.none(),placeholder:t.placeholder,flex:!0,disabled:!t.enabled,classname:"tox-textarea",validation:k.none(),maximized:t.maximized,data:a,context:t.context,spellcheck:t.spellcheck},s),j8=t=>({isEnabled:()=>!xn.isDisabled(t),setEnabled:s=>xn.set(t,!s),setActive:s=>{const a=t.element;s?(Ls(a,"tox-tbtn--enabled"),Hn(a,"aria-pressed",!0)):(Sr(a,"tox-tbtn--enabled"),tr(a,"aria-pressed"))},isActive:()=>Wr(t.element,"tox-tbtn--enabled"),setTooltip:s=>{Nn(t,bR,{text:s})},setText:s=>{Nn(t,Fd,{text:s})},setIcon:s=>Nn(t,Ah,{icon:s})}),Nw=(t,s,a,i,d=!0,g)=>{const h=t.buttonType==="bordered"?["bordered"]:[];return Fw({text:t.text,icon:t.icon,tooltip:t.tooltip,ariaLabel:t.tooltip,searchable:t.search.isSome(),role:i,fetch:(C,S)=>{const T={pattern:t.search.isSome()?$Z(C):""};t.fetch(O=>{S(hy(O,Tm.CLOSE_ON_EXECUTE,a,{isHorizontalMenu:!1,search:t.search}))},T,j8(C))},onSetup:t.onSetup,getApi:C=>j8(C),columns:1,presets:"normal",classes:h,dropdownBehaviours:[...d?[Ys.config({})]:[]],context:t.context},s,a.shared,g)},q8=(t,s,a)=>{const i=g=>h=>{const C=!h.isActive();h.setActive(C),g.storage.set(C),a.shared.getSink().each(S=>{s().getOpt(S).each(T=>{Ea(T.element),Nn(T,ng,{name:g.name,value:g.storage.get()})})})},d=g=>h=>{h.setActive(g.storage.get())};return g=>{g(Ne(t,h=>{const C=h.text.fold(()=>({}),S=>({text:S}));return{type:h.type,active:!1,...C,context:h.context,onAction:i(h),onSetup:d(h)}}))}},G8=t=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{"aria-label":t}},components:[pr(t)]}),$A=(t,s,a)=>{t.customStateIcon.each(i=>s.push(LA(i,a.shared.providers.icons,t.customStateIconTooltip.fold(()=>[],d=>[br.config(a.shared.providers.tooltips.getConfig({tooltipText:d}))]),["tox-icon-custom-state"])))},IA=G("leaf-label-event-id"),SR=({leaf:t,onLeafAction:s,visible:a,treeId:i,selectedId:d,backstage:g})=>{const h=t.menu.map(S=>Nw(S,"tox-mbtn",g,k.none(),a)),C=[G8(t.title)];return $A(t,C,g),h.each(S=>C.push(S)),ti.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(a?["tox-tree--leaf__label--visible"]:[])},components:C,role:"treeitem",action:S=>{s(t.id),S.getSystem().broadcastOn([`update-active-item-${i}`],{value:t.id})},eventOrder:{[La()]:[IA,"keying"]},buttonBehaviours:Ft([...a?[Ys.config({})]:[],Jo.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),ou.config({channels:{[`update-active-item-${i}`]:{onReceive:(S,T)=>{(T.value===t.id?Jo.on:Jo.off)(S)}}}}),so(IA,[or((S,T)=>{d.each(O=>{(O===t.id?Jo.on:Jo.off)(S)})}),rt(La(),(S,T)=>{const O=T.event.raw.code==="ArrowLeft",F=T.event.raw.code==="ArrowRight";O?(yl(S.element,".tox-tree--directory").each(z=>{S.getSystem().getByDom(z).each(q=>{qd(z,".tox-tree--directory__label").each(Z=>{q.getSystem().getByDom(Z).each(ao.focus)})})}),T.stop()):F&&T.stop()})])])})},LA=(t,s,a,i,d)=>ju(t,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"].concat(i||[]),behaviours:a,attributes:d},s),K8=(t,s)=>LA(t,s,[]),xR=G("directory-label-event-id"),bj=({directory:t,visible:s,noChildren:a,backstage:i})=>{const d=t.menu.map(C=>Nw(C,"tox-mbtn",i,k.none())),g=[{dom:{tag:"div",classes:["tox-chevron"]},components:[K8("chevron-right",i.shared.providers.icons)]},G8(t.title)];$A(t,g,i),d.each(C=>{g.push(C)});const h=C=>{yl(C.element,".tox-tree--directory").each(S=>{C.getSystem().getByDom(S).each(T=>{const O=!Jo.isOn(T);Jo.toggle(T),Nn(C,"expand-tree-node",{expanded:O,node:t.id})})})};return ti.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(s?["tox-tree--directory__label--visible"]:[])},components:g,action:h,eventOrder:{[La()]:[xR,"keying"]},buttonBehaviours:Ft([...s?[Ys.config({})]:[],so(xR,[rt(La(),(C,S)=>{const T=S.event.raw.code==="ArrowRight",O=S.event.raw.code==="ArrowLeft";T&&a&&S.stop(),(T||O)&&yl(C.element,".tox-tree--directory").each(F=>{C.getSystem().getByDom(F).each(z=>{!Jo.isOn(z)&&T||Jo.isOn(z)&&O?(h(C),S.stop()):O&&!Jo.isOn(z)&&(yl(z.element,".tox-tree--directory").each(q=>{qd(q,".tox-tree--directory__label").each(Z=>{z.getSystem().getByDom(Z).each(ao.focus)})}),S.stop())})})})])])})},Y8=({children:t,onLeafAction:s,visible:a,treeId:i,expandedIds:d,selectedId:g,backstage:h})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:t.map(C=>C.type==="leaf"?SR({leaf:C,selectedId:g,onLeafAction:s,visible:a,treeId:i,backstage:h}):ER({directory:C,expandedIds:d,selectedId:g,onLeafAction:s,labelTabstopping:a,treeId:i,backstage:h})),behaviours:Ft([al.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:a}),co.config({})])}),X8=G("directory-event-id"),ER=({directory:t,onLeafAction:s,labelTabstopping:a,treeId:i,backstage:d,expandedIds:g,selectedId:h})=>{const{children:C}=t,S=cn(g),T=F=>C.map(z=>z.type==="leaf"?SR({leaf:z,selectedId:h,onLeafAction:s,visible:F,treeId:i,backstage:d}):ER({directory:z,expandedIds:S.get(),selectedId:h,onLeafAction:s,labelTabstopping:F,treeId:i,backstage:d})),O=g.includes(t.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[bj({directory:t,visible:a,noChildren:t.children.length===0,backstage:d}),Y8({children:C,expandedIds:g,selectedId:h,onLeafAction:s,visible:O,treeId:i,backstage:d})],behaviours:Ft([so(X8,[or((F,z)=>{Jo.set(F,O)}),rt("expand-tree-node",(F,z)=>{const{expanded:q,node:Z}=z.event;S.set(q?[...S.get(),Z]:S.get().filter(ae=>ae!==Z))})]),Jo.config({...t.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:(F,z)=>{const q=F.components()[1],Z=T(z);z?al.grow(q):al.shrink(q),co.set(q,Z)}})])}},J8=G("tree-event-id"),vj=(t,s)=>{const a=t.onLeafAction.getOr(ie),i=t.onToggleExpand.getOr(ie),d=t.defaultExpandedIds,g=cn(d),h=cn(t.defaultSelectedId),C=G("tree-id"),S=(T,O)=>t.items.map(F=>F.type==="leaf"?SR({leaf:F,selectedId:T,onLeafAction:a,visible:!0,treeId:C,backstage:s}):ER({directory:F,selectedId:T,onLeafAction:a,expandedIds:O,labelTabstopping:!0,treeId:C,backstage:s}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:S(h.get(),g.get()),behaviours:Ft([_n.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),so(J8,[rt("expand-tree-node",(T,O)=>{const{expanded:F,node:z}=O.event;g.set(F?[...g.get(),z]:g.get().filter(q=>q!==z)),i(g.get(),{expanded:F,node:z})})]),ou.config({channels:{[`update-active-item-${C}`]:{onReceive:(T,O)=>{h.set(k.some(O.value)),co.set(T,S(k.some(O.value),g.get()))}}}}),co.config({})])}},Pw=(t,s,a=[],i,d,g,h)=>{const C=s.fold(()=>({}),O=>({action:O})),S={buttonBehaviours:Ft([Gu.item(()=>!t.enabled||h.checkUiComponentContext(t.context).shouldDisable),vr(()=>h.checkUiComponentContext(t.context)),Ys.config({}),...g.map(O=>br.config(h.tooltips.getConfig({tooltipText:h.translate(O)}))).toArray(),so("button press",[jg("click")])].concat(a)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...C},T=At(S,{dom:i});return At(T,{components:d})},bJ=(t,s,a,i=[],d)=>{const g=t.tooltip.map(T=>({"aria-label":a.translate(T)})).getOr({}),h={tag:"button",classes:["tox-tbtn"],attributes:{...g,"data-mce-name":d}},C=t.icon.map(T=>gy(T,a.icons)),S=uy([C]);return Pw(t,s,i,h,S,t.tooltip,a)},Q8=t=>{switch(t){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},e$=(t,s,a,i=[],d=[])=>{const g=a.translate(t.text),h=t.icon.map(q=>gy(q,a.icons)),C=[h.getOrThunk(()=>pr(g))],S=t.buttonType.getOr(!t.primary&&!t.borderless?"secondary":"primary"),F={tag:"button",classes:[...Q8(S),...h.isSome()?["tox-button--icon"]:[],...t.borderless?["tox-button--naked"]:[],...d],attributes:{"aria-label":g,"data-mce-name":t.text}},z=t.icon.map(K(g));return Pw(t,s,i,F,C,z,a)},t$=(t,s,a,i=[],d=[])=>{const g=e$(t,k.some(s),a,i,d);return ti.sketch(g)},TR=(t,s)=>a=>{s==="custom"?Nn(a,ng,{name:t,value:{}}):s==="submit"?$o(a,_w):s==="cancel"?$o(a,Yp):console.error("Unknown button type: ",s)},yj=(t,s)=>s==="menu",Cj=(t,s)=>s==="custom"||s==="cancel"||s==="submit",wj=(t,s)=>s==="togglebutton",Sj=(t,s,a)=>{var i,d;const g=t.icon.map(De=>Jp(De,s.icons)).map(fs),h=De=>{Nn(De,ng,{name:t.name,value:{setIcon:Ke=>{g.map(Ye=>Ye.getOpt(De).each(Kt=>{co.set(Kt,[Jp(Ke,s.icons)])}))}}})},C=t.buttonType.getOr(t.primary?"primary":"secondary"),S={...t,name:(i=t.name)!==null&&i!==void 0?i:"",tooltip:t.tooltip,enabled:(d=t.enabled)!==null&&d!==void 0?d:!1},T=S.tooltip.or(t.text).map(De=>({"aria-label":s.translate(De)})).getOr({}),O=Q8(C??"secondary"),F=t.icon.isSome()&&t.text.isSome(),z={tag:"button",classes:[...O.concat(t.icon.isSome()?["tox-button--icon"]:[]),...t.active?["tox-button--enabled"]:[],...F?["tox-button--icon-and-text"]:[]],attributes:{...T,...Wn(a)?{"data-mce-name":a}:{}}},q=[],Z=s.translate(t.text.getOr("")),ae=pr(Z),ce=[...uy([g.map(De=>De.asSpec())]),...t.text.isSome()?[ae]:[]],xe=Pw(S,k.some(h),q,z,ce,t.tooltip,s);return ti.sketch(xe)},$w=(t,s,a)=>{if(yj(t,s)){const i=()=>h,d=t,g={...t,buttonType:"default",type:"menubutton",search:k.none(),onSetup:C=>(C.setEnabled(t.enabled),ie),fetch:q8(d.items,i,a)},h=fs(Nw(g,"tox-tbtn",a,k.none(),!0,t.text.or(t.tooltip).getOrUndefined()));return h.asSpec()}else if(Cj(t,s)){const i=TR(t.name,s),d={...t,context:s==="cancel"?"any":t.context,borderless:!1};return t$(d,i,a.shared.providers,[])}else{if(wj(t,s))return Sj(t,a.shared.providers,t.text.or(t.tooltip).getOrUndefined());throw console.error("Unknown footer button type: ",s),new Error("Unknown footer button type")}},xj=(t,s)=>{const a=TR(t.name,"custom");return VZ(k.none(),No.parts.field({factory:ti,...e$(t,k.some(a),s,[AA(""),km.self()])}))},Ej={type:"separator"},n$=t=>({type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:ie}),HA=(t,s)=>({type:"menuitem",value:s,text:t,meta:{attach:void 0},onAction:ie}),py=t=>Ne(t,n$),Tj=(t,s)=>ro(s,a=>a.type===t),AR=(t,s)=>py(Tj(t,s)),o$=t=>AR("header",t.targets),s$=t=>AR("anchor",t.targets),Aj=t=>k.from(t.anchorTop).map(s=>HA("<top>",s)).toArray(),r$=t=>k.from(t.anchorBottom).map(s=>HA("<bottom>",s)).toArray(),a$=t=>Ne(t,s=>HA(s,s)),_j=t=>_o(t,(s,a)=>s.length===0||a.length===0?s.concat(a):s.concat(Ej,a),[]),_R=(t,s)=>{const a=t.toLowerCase();return ro(s,i=>{var d;const g=i.meta!==void 0&&i.meta.text!==void 0?i.meta.text:i.text,h=(d=i.value)!==null&&d!==void 0?d:"";return Js(g.toLowerCase(),a)||Js(h.toLowerCase(),a)})},c$=(t,s,a)=>{var i,d;const g=Xt.getValue(s),h=(d=(i=g==null?void 0:g.meta)===null||i===void 0?void 0:i.text)!==null&&d!==void 0?d:g.value;return a.getLinkInformation().fold(()=>[],S=>{const T=_R(h,a$(a.getHistory(t)));return t==="file"?_j([T,_R(h,o$(S)),_R(h,Oe([Aj(S),s$(S),r$(S)]))]):T})},kR=G("aria-invalid"),kj=(t,s,a,i)=>{const d=s.shared.providers,g=xe=>{const De=Xt.getValue(xe);a.addToHistory(De.value,t.filetype)},h={...i.map(xe=>({initialData:xe})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{type:"url"},minChars:0,responseTime:0,fetch:xe=>{const De=c$(t.filetype,xe,a),Ke=hy(De,Tm.BUBBLE_TO_SANDBOX,s,{isHorizontalMenu:!1,search:k.none()});return os.pure(Ke)},getHotspot:xe=>Z.getOpt(xe),onSetValue:(xe,De)=>{xe.hasConfigured(ym)&&ym.run(xe).get(ie)},typeaheadBehaviours:Ft([...a.getValidationHandler().map(xe=>ym.config({getRoot:De=>Su(De.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(De,Ke)=>{O.getOpt(De).each(Ye=>{Hn(Ye.element,"title",d.translate(Ke))})}},validator:{validate:De=>{const Ke=Xt.getValue(De);return Rn.nu(Ye=>{xe({type:t.filetype,url:Ke.value},Kt=>{if(Kt.status==="invalid"){Hn(De.element,"aria-errormessage",kR);const Tt=gn.error(Kt.message);Ye(Tt)}else{tr(De.element,"aria-errormessage");const Tt=gn.value(Kt.message);Ye(Tt)}})})},validateOnLoad:!1}})).toArray(),xn.config({disabled:()=>!t.enabled||d.checkUiComponentContext(t.context).shouldDisable}),Ys.config({}),so("urlinput-events",[rt(Um(),xe=>{const De=di(xe.element),Ke=De.trim();Ke!==De&&Wl(xe.element,Ke),t.filetype==="file"&&Nn(xe,oi,{name:t.name})}),rt(Mg(),xe=>{Nn(xe,oi,{name:t.name}),g(xe)}),rt(d2(),xe=>{Nn(xe,oi,{name:t.name}),g(xe)})])]),eventOrder:{[Um()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:xe=>xe.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:s.shared.getSink,parts:{menu:Qv(!1,1,"normal")},onExecute:(xe,De,Ke)=>{Nn(De,_w,{})},onItemExecute:(xe,De,Ke,Ye)=>{g(xe),Nn(xe,oi,{name:t.name})}},C=No.parts.field({...h,factory:pV}),S=t.label.map(xe=>G0(xe,d)),O=fs(((xe,De,Ke=xe,Ye=xe)=>ju(Ke,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+xe],attributes:{title:d.translate(Ye),"aria-live":"polite",...De.fold(()=>({}),Kt=>({id:Kt}))}},d.icons))("invalid",k.some(kR),"warning")),F=fs({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[O.asSpec()]}),z=a.getUrlPicker(t.filetype),q=G("browser.url.event"),Z=fs({dom:{tag:"div",classes:["tox-control-wrap"]},components:[C,F.asSpec()],behaviours:Ft([xn.config({disabled:()=>!t.enabled||d.checkUiComponentContext(t.context).shouldDisable})])}),ae=fs(t$({context:t.context,name:t.name,icon:k.some("browse"),text:t.picker_text.or(t.label).getOr(""),enabled:t.enabled,primary:!1,buttonType:k.none(),borderless:!0},xe=>$o(xe,q),d,[],["tox-browse-url"])),ye=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:Oe([[Z.asSpec()],z.map(()=>ae.asSpec()).toArray()])}),ce=xe=>{it.getCurrent(xe).each(De=>{const Ke=Xt.getValue(De),Ye={fieldname:t.name,...Ke};z.each(Kt=>{Kt(Ye).get(Tt=>{Xt.setValue(De,Tt),Nn(xe,oi,{name:t.name})})})})};return No.sketch({dom:d8(),components:S.toArray().concat([ye()]),fieldBehaviours:Ft([xn.config({disabled:()=>!t.enabled||d.checkUiComponentContext(t.context).shouldDisable,onDisabled:xe=>{No.getField(xe).each(xn.disable),ae.getOpt(xe).each(xn.disable)},onEnabled:xe=>{No.getField(xe).each(xn.enable),ae.getOpt(xe).each(xn.enable)}}),vr(()=>d.checkUiComponentContext(t.context)),so("url-input-events",[rt(q,ce)])])})},Dj=(t,s)=>{const a=ND(t.icon,s.icons);return vm.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${t.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:t.url?void 0:a},components:t.url?[ti.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:a,attributes:{title:s.translate(t.iconTooltip)}},action:i=>Nn(i,ng,{name:"alert-banner",value:t.url}),buttonBehaviours:Ft([bN()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:s.translate(t.text)}}]})},Oj=(t,s,a)=>{const i=S=>(S.element.dom.click(),k.some(!0)),d=No.parts.field({factory:{sketch:It},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:Ft([km.self(),xn.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable,onDisabled:S=>{Su(S.element).each(T=>Ls(T,"tox-checkbox--disabled"))},onEnabled:S=>{Su(S.element).each(T=>Sr(T,"tox-checkbox--disabled"))}}),Ys.config({}),ao.config({}),GZ(a,v1,Au),_n.config({mode:"special",onEnter:i,onSpace:i,stopSpaceKeyup:!0}),so("checkbox-events",[rt(Mg(),(S,T)=>{Nn(S,oi,{name:t.name})})])])}),g=No.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[pr(s.translate(t.label))],behaviours:Ft([Wv.config({})])}),h=S=>ju(S==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+S]},s.icons),C=fs({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[h("checked"),h("unchecked")]});return No.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[d,C.asSpec(),g],fieldBehaviours:Ft([xn.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable}),vr(()=>s.checkUiComponentContext(t.context))])})},Rj=(t,s)=>{const a=["tox-form__group",...t.stretched?["tox-form__group--stretched"]:[]],i=so("htmlpanel",[or(d=>{t.onInit(d.element.dom)})]);return t.presets==="presentation"?vm.sketch({dom:{tag:"div",classes:a,innerHtml:t.html},containerBehaviours:Ft([br.config({...s.tooltips.getConfig({tooltipText:"",onShow:d=>{Bs(d.element,"[data-mce-tooltip]:hover").orThunk(()=>Vr(d.element)).each(g=>{Pa(g,"data-mce-tooltip").each(h=>{br.setComponents(d,s.tooltips.getComponents({tooltipText:h}))})})}}),mode:"children-normal",anchor:d=>({type:"node",node:Bs(d.element,"[data-mce-tooltip]:hover").orThunk(()=>Vr(d.element).filter(g=>Pa(g,"data-mce-tooltip").isSome())),root:d.element,layouts:{onLtr:K([aa,Ha,Ca,hc,gr,Oa]),onRtl:K([aa,Ha,Ca,hc,gr,Oa])},bubble:Al(0,-2,{})})}),i])}):vm.sketch({dom:{tag:"div",classes:a,innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:Ft([Ys.config({}),ao.config({}),i])})},Ua=t=>(s,a,i,d,g)=>dn(a,"name").fold(()=>t(a,d,k.none(),g),h=>s.field(h,t(a,d,dn(i,h),g))),Mj=t=>(s,a,i,d,g)=>{const h=At(a,{source:"dynamic"});return Ua(t)(s,h,i,d,g)},Bj={bar:Ua((t,s)=>zZ(t,s.shared)),collection:Ua((t,s,a)=>WZ(t,s.shared.providers,a)),alertbanner:Ua((t,s)=>Dj(t,s.shared.providers)),input:Ua((t,s,a)=>pj(t,s.shared.providers,a)),textarea:Ua((t,s,a)=>Z8(t,s.shared.providers,a)),label:Ua((t,s,a,i)=>RA(t,s.shared,i)),iframe:Mj((t,s,a)=>R8(t,s.shared.providers,a)),button:Ua((t,s)=>xj(t,s.shared.providers)),checkbox:Ua((t,s,a)=>Oj(t,s.shared.providers,a)),colorinput:Ua((t,s,a)=>jZ(t,s.shared,s.colorinput,a)),colorpicker:Ua((t,s,a)=>QZ(t,s.shared.providers,a)),dropzone:Ua((t,s,a)=>nj(t,s.shared.providers,a)),grid:Ua((t,s)=>oj(t,s.shared)),listbox:Ua((t,s,a)=>ff(t,s,a)),selectbox:Ua((t,s,a)=>hj(t,s.shared.providers,a)),sizeinput:Ua((t,s)=>hJ(t,s.shared.providers)),slider:Ua((t,s,a)=>pJ(t,s.shared.providers,a)),urlinput:Ua((t,s,a)=>kj(t,s,s.urlinput,a)),customeditor:Ua(tj),htmlpanel:Ua((t,s)=>Rj(t,s.shared.providers)),imagepreview:Ua((t,s,a)=>uj(t,a)),table:Ua((t,s)=>il(t,s.shared.providers)),tree:Ua((t,s)=>vj(t,s)),panel:Ua((t,s)=>yR(t,s))},Fj={field:(t,s)=>s,record:K([])},i$=(t,s,a,i,d)=>{const g=At(i,{shared:{interpreter:h=>DR(t,h,a,g,d)}});return DR(t,s,a,g,d)},DR=(t,s,a,i,d)=>dn(Bj,s.type).fold(()=>(console.error(`Unknown factory type "${s.type}", defaulting to container: `,s),s),g=>g(t,s,a,i,d)),l$=(t,s,a,i)=>DR(Fj,t,s,a,i),zA={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},Nj=(t,s,a)=>{const d={maxHeightFunction:Zg()},g=()=>({type:"node",root:Il(Xr(t())),node:k.from(t()),bubble:Al(12,12,zA),layouts:{onRtl:()=>[nt],onLtr:()=>[up]},overrides:d}),h=()=>({type:"hotspot",hotspot:s(),bubble:Al(-12,12,zA),layouts:{onRtl:()=>[Ca,gr,aa],onLtr:()=>[gr,Ca,aa]},overrides:d});return()=>a()?g():h()},u$=(t,s,a,i)=>{const g={maxHeightFunction:Zg()},h=()=>({type:"node",root:Il(Xr(s())),node:k.from(s()),bubble:Al(12,12,zA),layouts:{onRtl:()=>[Ni],onLtr:()=>[Ni]},overrides:g}),C=()=>t?{type:"node",root:Il(Xr(s())),node:k.from(s()),bubble:Al(0,-ta(s()),zA),layouts:{onRtl:()=>[Ha],onLtr:()=>[Ha]},overrides:g}:{type:"hotspot",hotspot:a(),bubble:Al(0,0,zA),layouts:{onRtl:()=>[Ha],onLtr:()=>[Ha]},overrides:g};return()=>i()?h():C()},d$=(t,s,a)=>{const i=()=>({type:"node",root:Il(Xr(t())),node:k.from(t()),layouts:{onRtl:()=>[Ni],onLtr:()=>[Ni]}}),d=()=>({type:"hotspot",hotspot:s(),layouts:{onRtl:()=>[aa],onLtr:()=>[aa]}});return()=>a()?i():d()},VA=(t,s)=>()=>({type:"selection",root:s(),getSelection:()=>{const a=t.selection.getRng(),i=t.model.table.getSelectedCells();if(i.length>1){const d=i[0],g=i[i.length-1],h={firstCell:zt.fromDom(d),lastCell:zt.fromDom(g)};return k.some(h)}return k.some(wl.range(zt.fromDom(a.startContainer),a.startOffset,zt.fromDom(a.endContainer),a.endOffset))}}),m$=t=>s=>({type:"node",root:t(),node:s}),Pj=(t,s,a,i)=>{const d=Xv(t),g=()=>zt.fromDom(t.getBody()),h=()=>zt.fromDom(t.getContentAreaContainer()),C=()=>d||!i();return{inlineDialog:Nj(h,s,C),inlineBottomDialog:u$(t.inline,h,a,C),banner:d$(h,s,C),cursor:VA(t,g),node:m$(g)}},$j=t=>(s,a)=>{SA(t)(s,a)},Ij=t=>()=>ZO(t),Lj=t=>s=>xw(t,s),Hj=t=>s=>HP(t,s),zj=t=>({colorPicker:$j(t),hasCustomColors:Ij(t),getColors:Lj(t),getColorCols:Hj(t)}),Vj=t=>()=>Z6(t),f$=t=>({isDraggableModal:Vj(t)}),g$=t=>{const s=cn(yD(t)?"bottom":"top");return{isPositionedAtTop:()=>s.get()==="top",getDockingMode:s.get,setDockingMode:s.set}},h$=t=>xo(t,"items"),OR=t=>xo(t,"format"),p$=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],Uj=t=>ko(t,"items"),Wj=t=>ko(t,"block"),Y0=t=>ko(t,"inline"),b$=t=>ko(t,"selector"),by=t=>_o(t,(s,a)=>{if(Uj(a)){const i=by(a.items);return{customFormats:s.customFormats.concat(i.customFormats),formats:s.formats.concat([{title:a.title,items:i.formats}])}}else if(Y0(a)||Wj(a)||b$(a)){const d=`custom-${pe(a.name)?a.name:a.title.toLowerCase()}`;return{customFormats:s.customFormats.concat([{name:d,format:a}]),formats:s.formats.concat([{title:a.title,format:d,icon:a.icon}])}}else return{...s,formats:s.formats.concat(a)}},{customFormats:[],formats:[]}),UA=(t,s)=>{const a=by(s),i=d=>{ft(d,g=>{t.formatter.has(g.name)||t.formatter.register(g.name,g.format)})};return t.formatter?i(a.customFormats):t.on("init",()=>{i(a.customFormats)}),a.formats},RR=t=>R6(t).map(s=>{const a=UA(t,s);return M6(t)?p$.concat(a):a}).getOr(p$),v$=t=>{const s=eo(t);return s.length===1&&St(s,"title")},MR=(t,s,a)=>({...t,type:"formatter",isSelected:s(t.format),getStylePreview:a(t.format)}),Zj=(t,s,a,i)=>{const d=S=>MR(S,a,i),g=S=>{const T=C(S.items);return{...S,type:"submenu",getStyleItems:K(T)}},h=S=>{const T=pe(S.name)?S.name:G(S.title),O=`custom-${T}`,F={...S,type:"formatter",format:O,isSelected:a(O),getStylePreview:i(O)};return t.formatter.register(T,F),F},C=S=>Ne(S,T=>h$(T)?g(T):OR(T)?d(T):v$(T)?{...T,type:"separator"}:h(T));return C(s)},jj=t=>{const s=C=>()=>t.formatter.match(C),a=C=>()=>{const S=t.formatter.get(C);return S!==void 0?k.some({tag:S.length>0&&(S[0].inline||S[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(C))}):k.none()},i=cn([]),d=cn([]),g=cn(!1);return t.on("PreInit",C=>{const S=RR(t),T=Zj(t,S,s,a);i.set(T)}),t.on("addStyleModifications",C=>{const S=Zj(t,C.items,s,a);d.set(S),g.set(C.replace)}),{getData:()=>{const C=g.get()?[]:i.get(),S=d.get();return C.concat(S)}}},qj=t=>{let i=0;const d=()=>i>0,g=C=>[{dom:{tag:"div",classes:["tox-tooltip__body"]},components:[pr(C.tooltipText)]}];return{getConfig:C=>({delayForShow:()=>d()?60:300,delayForHide:K(300),exclusive:!0,lazySink:t,tooltipDom:{tag:"div",classes:["tox-tooltip","tox-tooltip--up"]},tooltipComponents:g(C),onShow:(S,T)=>{i++,C.onShow&&C.onShow(S,T)},onHide:(S,T)=>{i--,C.onHide&&C.onHide(S,T)},onSetup:C.onSetup}),getComponents:g}},Gj=t=>Wn(t)&&t.nodeType===1,Kj=Th.trim,y$=t=>s=>!!(Gj(s)&&(s.contentEditable===t||s.getAttribute("data-mce-contenteditable")===t)),Yj=y$("true"),vy=y$("false"),yy=(t,s,a,i,d)=>({type:t,title:s,url:a,level:i,attach:d}),BR=t=>{let s=t;for(;s=s.parentNode;){const a=s.contentEditable;if(a&&a!=="inherit")return Yj(s)}return!1},Xj=(t,s)=>Ne(_a(zt.fromDom(s),t),a=>a.dom),C$=t=>t.innerText||t.textContent,FR=t=>t.id?t.id:G("h"),Jj=t=>t&&t.nodeName==="A"&&(t.id||t.name)!==void 0,Iw=t=>Jj(t)&&w$(t),NR=t=>t&&/^(H[1-6])$/.test(t.nodeName),w$=t=>BR(t)&&!vy(t),Qj=t=>NR(t)&&w$(t),eq=t=>NR(t)?parseInt(t.nodeName.substr(1),10):0,tq=t=>{var s;const a=FR(t),i=()=>{t.id=a};return yy("header",(s=C$(t))!==null&&s!==void 0?s:"","#"+a,eq(t),i)},nq=t=>{const s=t.id||t.name,a=C$(t);return yy("anchor",a||"#"+s,"#"+s,0,ie)},oq=t=>Ne(ro(t,Qj),tq),S$=t=>Ne(ro(t,Iw),nq),x$=t=>Xj("h1,h2,h3,h4,h5,h6,a:not([href])",t),PR=t=>Kj(t.title).length>0,WA={find:t=>{const s=x$(t);return ro(oq(s).concat(S$(s)),PR)}},X0="tinymce-url-history",$R=5,E$=t=>pe(t)&&/^https?/.test(t),sq=t=>sn(t)&&t.length<=$R&&Re(t,E$),T$=t=>$e(t)&&ks(t,s=>!sq(s)).isNone(),A$=()=>{const t=Eh.getItem(X0);if(t===null)return{};let s;try{s=JSON.parse(t)}catch(a){if(a instanceof SyntaxError)return console.log("Local storage "+X0+" was not valid JSON",a),{};throw a}return T$(s)?s:(console.log("Local storage "+X0+" was not valid format",s),{})},IR=t=>{if(!T$(t))throw new Error(`Bad format for history:
`+JSON.stringify(t));Eh.setItem(X0,JSON.stringify(t))},rq=t=>{const s=A$();return dn(s,t).getOr([])},LR=(t,s)=>{if(!E$(t))return;const a=A$(),i=dn(a,s).getOr([]),d=ro(i,g=>g!==t);a[s]=[t].concat(d).slice(0,$R),IR(a)},_$=t=>!!t,HR=t=>mt(Th.makeMap(t,/[, ]/),_$),zR=t=>k.from(H6(t)),aq=t=>{const s=k.from(U6(t)).filter(_$).map(HR);return zR(t).fold(ut,a=>s.fold(Ct,i=>eo(i).length>0?i:!1))},cq=(t,s)=>{const a=aq(t);return Rt(a)?a?zR(t):k.none():a[s]?zR(t):k.none()},iq=(t,s)=>cq(t,s).map(a=>i=>os.nu(d=>{const g=(C,S)=>{if(!pe(C))throw new Error("Expected value to be string");if(S!==void 0&&!$e(S))throw new Error("Expected meta to be a object");d({value:C,meta:S})},h={filetype:s,fieldname:i.fieldname,...k.from(i.meta).getOr({})};a.call(t,g,i.value,h)})),k$=t=>k.from(t).filter(pe).getOrUndefined(),yJ=t=>hD(t)?k.some({targets:WA.find(t.getBody()),anchorTop:k$(W6(t)),anchorBottom:k$(pD(t))}):k.none(),CJ=t=>k.from(z6(t)),D$=t=>({getHistory:rq,addToHistory:LR,getLinkInformation:()=>yJ(t),getValidationHandler:()=>CJ(t),getUrlPicker:s=>iq(t,s)}),lq=(t,s,a,i)=>{const d=cn(!1),g=g$(s),h={icons:()=>s.ui.registry.getAll().icons,menuItems:()=>s.ui.registry.getAll().menuItems,translate:ia.translate,isDisabled:()=>!s.ui.isEnabled(),getOption:s.options.get,tooltips:qj(t.dialog),checkUiComponentContext:ce=>{if(ET(s))return{contextType:"disabled",shouldDisable:!0};const[xe,De=""]=ce.split(":"),Ke=s.ui.registry.getAll().contexts,Ye=dn(Ke,xe).fold(()=>dn(Ke,"mode").map(Kt=>Kt("design")).getOr(!1),Kt=>De.charAt(0)==="!"?!Kt(De.slice(1)):Kt(De));return{contextType:xe,shouldDisable:!Ye}}},C=D$(s),S=jj(s),T=zj(s),O=f$(s),F=()=>d.get(),z=ce=>d.set(ce),q={shared:{providers:h,anchors:Pj(s,a,i,g.isPositionedAtTop),header:g},urlinput:C,styles:S,colorinput:T,dialog:O,isContextMenuOpen:F,setContextMenuState:z},Z=ce=>k.none(),ae={...q,shared:{...q.shared,interpreter:ce=>l$(ce,{},ae,Z),getSink:t.popup}},ye={...q,shared:{...q.shared,interpreter:ce=>l$(ce,{},ye,Z),getSink:t.dialog}};return{popup:ae,dialog:ye}},dq={skipFocus:"ToggleToolbarDrawer skipFocus is deprecated see migration guide: https://www.tiny.cloud/docs/tinymce/latest/migration-from-7x/"},mq=t=>{console.warn(dq[t],new Error().stack)},fq=(t,s,a)=>{const i=(wt,Bn)=>{ft([s,...a],yn=>{yn.broadcastEvent(wt,Bn)})},d=(wt,Bn)=>{ft([s,...a],yn=>{yn.broadcastOn([wt],Bn)})},g=wt=>d(Xm(),{target:wt.target}),h=wt=>{d(q1(),{closedTooltip:()=>{wt.preventDefault()}})},C=Na(),S=_s(C,"touchstart",g),T=_s(C,"touchmove",wt=>i(f2(),wt)),O=_s(C,"touchend",wt=>i(IS(),wt)),F=_s(C,"mousedown",g),z=_s(C,"mouseup",wt=>{wt.raw.button===0&&d(cm(),{target:wt.target})}),q=wt=>d(Xm(),{target:zt.fromDom(wt.target)}),Z=wt=>{wt.button===0&&d(cm(),{target:zt.fromDom(wt.target)})},ae=()=>{ft(t.editorManager.get(),wt=>{t!==wt&&wt.dispatch("DismissPopups",{relatedTarget:t})})},ye=wt=>i($g(),zc(wt)),ce=wt=>{d(kc(),{}),i(Ig(),zc(wt))},xe=Xr(zt.fromDom(t.getElement())),De=qi(xe,"scroll",wt=>{requestAnimationFrame(()=>{const Bn=t.getContainer();if(Bn!=null){const Zo=Od(t,s.element).map(Vn=>[Vn.element,...Vn.others]).getOr([]);$n(Zo,Vn=>Ko(Vn,wt.target))&&(t.dispatch("ElementScroll",{target:wt.target.dom}),i(HS(),wt))}})}),Ke=()=>d(kc(),{}),Ye=wt=>{wt.state&&d(Xm(),{target:zt.fromDom(t.getContainer())})},Kt=wt=>{d(Xm(),{target:zt.fromDom(wt.relatedTarget.getContainer())})},Tt=wt=>t.dispatch("focusin",wt),_t=wt=>t.dispatch("focusout",wt);t.on("PostRender",()=>{t.on("click",q),t.on("tap",q),t.on("mouseup",Z),t.on("mousedown",ae),t.on("ScrollWindow",ye),t.on("ResizeWindow",ce),t.on("ResizeEditor",Ke),t.on("AfterProgressState",Ye),t.on("DismissPopups",Kt),t.on("CloseActiveTooltips",h),ft([s,...a],wt=>{wt.element.dom.addEventListener("focusin",Tt),wt.element.dom.addEventListener("focusout",_t)})}),t.on("remove",()=>{t.off("click",q),t.off("tap",q),t.off("mouseup",Z),t.off("mousedown",ae),t.off("ScrollWindow",ye),t.off("ResizeWindow",ce),t.off("ResizeEditor",Ke),t.off("AfterProgressState",Ye),t.off("DismissPopups",Kt),t.off("CloseActiveTooltips",h),ft([s,...a],wt=>{wt.element.dom.removeEventListener("focusin",Tt),wt.element.dom.removeEventListener("focusout",_t)}),F.unbind(),S.unbind(),T.unbind(),O.unbind(),z.unbind(),De.unbind()}),t.on("detach",()=>{ft([s,...a],lE),ft([s,...a],wt=>wt.destroy())})},gq=ie,hq=ut,VR=K([]);var pq=Object.freeze({__proto__:null,setup:gq,isDocked:hq,getBehaviours:VR});const UR=K(G("toolbar-height-change")),og={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},bq="tox-tinymce--toolbar-sticky-on",vq="tox-tinymce--toolbar-sticky-off",O$=(t,s)=>{const a=ci(s),d=pg(s).dom.innerHeight,g=Pr(a),h=zt.fromDom(t.elm),C=dd(h),S=ea(h),T=C.y,O=T+S,F=lc(s),z=ea(s),q=F.top,Z=q+z,ae=Math.abs(q-g.top)<2,ye=Math.abs(Z-(g.top+d))<2;if(ae&&T<Z)cd(g.left,T-z,a);else if(ye&&O>q){const ce=T-d+S+z;cd(g.left,ce,a)}},Lw=(t,s)=>St(Ar.getModes(t),s),WR=t=>{const s=i=>ta(i)+(parseInt(nr(i,"margin-top"),10)||0)+(parseInt(nr(i,"margin-bottom"),10)||0),a=t.element;Su(a).each(i=>{const d="padding-"+Ar.getModes(t)[0];if(Ar.isDocked(t)){const g=Ya(i);Yn(a,"width",g+"px"),Yn(i,d,s(a)+"px")}else Ho(a,"width"),Ho(i,d)})},R$=(t,s)=>{s?(Sr(t,og.fadeOutClass),Du(t,[og.transitionClass,og.fadeInClass])):(Sr(t,og.fadeInClass),Du(t,[og.fadeOutClass,og.transitionClass]))},gu=(t,s)=>{const a=zt.fromDom(t.getContainer());s?(Ls(a,bq),Sr(a,vq)):(Ls(a,vq),Sr(a,bq))},yq=(t,s)=>{const a=ci(s);Ta(a).filter(i=>!Ko(s,i)).filter(i=>Ko(i,zt.fromDom(a.dom.body))||ml(t,i)).each(()=>Ea(s))},M$=(t,s)=>Vr(t).orThunk(()=>s().toOptional().bind(a=>Vr(a.element))),B$=(t,s,a)=>{t.inline||(s.header.isPositionedAtTop()||t.on("ResizeEditor",()=>{a().each(Ar.reset)}),t.on("ResizeWindow ResizeEditor",()=>{a().each(WR)}),t.on("SkinLoaded",()=>{a().each(i=>{Ar.isDocked(i)?Ar.reset(i):Ar.refresh(i)})}),t.on("FullscreenStateChanged",()=>{a().each(Ar.reset)})),t.on("AfterScrollIntoView",i=>{a().each(d=>{Ar.refresh(d);const g=d.element;rd(g)&&O$(i,g)})}),t.on("PostRender",()=>{gu(t,!1)})},Cq=t=>t().map(Ar.isDocked).getOr(!1),Hw=()=>[ou.config({channels:{[UR()]:{onReceive:WR}}})],F$=(t,s)=>{const a=jn(),i=s.getSink,d=C=>{i().each(S=>C(S.element))},g=C=>{t.inline||WR(C),gu(t,Ar.isDocked(C)),C.getSystem().broadcastOn([kc()],{}),i().each(S=>S.getSystem().broadcastOn([kc()],{}))},h=t.inline?[]:Hw();return[ao.config({}),Ar.config({contextual:{lazyContext:C=>{const S=ta(C.element),T=t.inline?t.getContentAreaContainer():t.getContainer();return k.from(T).map(O=>{const F=sa(zt.fromDom(O));return Od(t,C.element).fold(()=>{const q=F.height-S,Z=F.y+(Lw(C,"top")?0:S);return ba(F.x,Z,F.width,q)},q=>{const Z=Kh(F,$p(q)),ae=Lw(C,"top")?Z.y:Z.y+S;return ba(Z.x,ae,Z.width,Z.height-S)})})},onShow:()=>{d(C=>R$(C,!0))},onShown:C=>{d(S=>dc(S,[og.transitionClass,og.fadeInClass])),a.get().each(S=>{yq(C.element,S),a.clear()})},onHide:C=>{M$(C.element,i).fold(a.clear,a.set),d(S=>R$(S,!1))},onHidden:()=>{d(C=>dc(C,[og.transitionClass]))},...og},lazyViewport:C=>Od(t,C.element).fold(()=>{const T=Uc(),O=I6(t),F=T.y+(Lw(C,"top")&&!xV(t)?O:0),z=T.height-(Lw(C,"bottom")?O:0);return{bounds:ba(T.x,F,T.width,z),optScrollEnv:k.none()}},T=>({bounds:$p(T),optScrollEnv:k.some({currentScrollTop:T.element.dom.scrollTop,scrollElmTop:lc(T.element).top})})),modes:[s.header.getDockingMode()],onDocked:g,onUndocked:g}),...h]};var ZA=Object.freeze({__proto__:null,setup:B$,isDocked:Cq,getBehaviours:F$});const wq=t=>{const s=t.editor,a=t.sticky?F$:VR;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:Ft(a(s,t.sharedBackstage))}};var jR=nu({factory:(t,s)=>{const a=(d,g)=>{const h=Ne(g,C=>{const S={type:"menubutton",text:C.text,fetch:O=>{O(C.getItems())},context:"any"},T=jN(S).mapError(O=>Mf(O)).getOrDie();return Nw(T,"tox-mbtn",s.backstage,k.some("menuitem"))});co.set(d,h)},i={focus:_n.focusIn,setMenus:a};return{uid:t.uid,dom:t.dom,components:[],behaviours:Ft([co.config({}),so("menubar-events",[or(d=>{t.onSetup(d)}),rt(Fu(),(d,g)=>{Bs(d.element,".tox-mbtn--active").each(h=>{uc(g.event.target,".tox-mbtn").each(C=>{Ko(h,C)||d.getSystem().getByDom(h).each(S=>{d.getSystem().getByDom(C).each(T=>{au.expand(T),au.close(S),ao.focus(T)})})})})}),rt(k1(),(d,g)=>{g.event.prevFocus.bind(h=>d.getSystem().getByDom(h).toOptional()).each(h=>{g.event.newFocus.bind(C=>d.getSystem().getByDom(C).toOptional()).each(C=>{au.isOpen(h)&&(au.expand(C),au.close(h))})})})]),_n.config({mode:"flow",selector:".tox-mbtn",onEscape:d=>(t.onEscape(d),k.some(!0))}),Ys.config({})]),apis:i,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[yt("dom"),yt("uid"),yt("onEscape"),yt("backstage"),We("onSetup",ie)],apis:{focus:(t,s)=>{t.focus(s)},setMenus:(t,s,a)=>{t.setMenus(s,a)}}});const Sq=" Get all features",Nd="https://www.tiny.cloud/tinymce-upgrade-to-cloud/?utm_campaign=self_hosted_upgrade_promo&utm_source=tiny&utm_medium=referral",xq=t=>{const s=t.promotionLink?[{dom:{tag:"a",attributes:{href:Nd,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:Sq}}]:[];return{uid:t.uid,dom:t.dom,components:s}},jA=t=>{const{sidebars:s}=t.ui.registry.getAll();ft(eo(s),a=>{const i=s[a],d=()=>Tn(k.from(t.queryCommandValue("ToggleSidebar")),a);t.ui.registry.addToggleButton(a,{icon:i.icon,tooltip:i.tooltip,onAction:g=>{t.execCommand("ToggleSidebar",!1,a),g.setActive(d())},onSetup:g=>{g.setActive(d());const h=()=>g.setActive(d());return t.on("ToggleSidebar",h),()=>{t.off("ToggleSidebar",h)}},context:"any"})})},N$=t=>({element:()=>t.element.dom}),P$=(t,s)=>{const a=Ne(eo(s),i=>{const d=s[i],g=Mu(aP(d));return{name:i,getApi:N$,onSetup:g.onSetup,onShow:g.onShow,onHide:g.onHide}});return Ne(a,i=>{const d=cn(ie);return t.slot(i.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:bw.unnamedEvents([Ku(i,d),xh(i,d),rt(D1(),(g,h)=>{const C=h.event;be(a,T=>T.name===C.name).each(T=>{(C.visible?T.onShow:T.onHide)(T.getApi(g))})})])})})},Eq=t=>xi.sketch(s=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:P$(s,t),slotBehaviours:bw.unnamedEvents([or(a=>xi.hideAllSlots(a))])})),$$=(t,s,a)=>{it.getCurrent(t).each(d=>{co.set(d,[Eq(s)]);const g=a==null?void 0:a.toLowerCase();pe(g)&&ko(s,g)&&it.getCurrent(d).each(h=>{xi.showSlot(h,g),al.immediateGrow(d),Ho(d.element,"width"),qA(t.element,"region")})})},qA=(t,s)=>{Hn(t,"role",s)},Tq=(t,s)=>{it.getCurrent(t).each(i=>{it.getCurrent(i).each(g=>{al.hasGrown(i)?xi.isShowing(g,s)?(al.shrink(i),qA(t.element,"presentation")):(xi.hideAllSlots(g),xi.showSlot(g,s),qA(t.element,"region")):(xi.hideAllSlots(g),xi.showSlot(g,s),al.grow(i),qA(t.element,"region"))})})},Aq=t=>it.getCurrent(t).bind(a=>al.isGrowing(a)||al.hasGrown(a)?it.getCurrent(a).bind(g=>be(xi.getSlotNames(g),h=>xi.isShowing(g,h))):k.none()),qR=G("FixSizeEvent"),GR=G("AutoSizeEvent"),_q=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:Ft([Ys.config({}),ao.config({}),al.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:s=>{it.getCurrent(s).each(xi.hideAllSlots),$o(s,GR)},onGrown:s=>{$o(s,GR)},onStartGrow:s=>{Nn(s,qR,{width:lr(s.element,"width").getOr("")})},onStartShrink:s=>{Nn(s,qR,{width:Ya(s.element)+"px"})}}),co.config({}),it.config({find:s=>{const a=co.contents(s);return rn(a)}})])}],behaviours:Ft([km.childAt(0),so("sidebar-sliding-events",[rt(qR,(s,a)=>{Yn(s.element,"width",a.event.width)}),rt(GR,(s,a)=>{Ho(s.element,"width")})])])}),kq=t=>(s,a)=>({dom:{tag:"div",attributes:{"aria-label":t.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:rf('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),KR=t=>it.getCurrent(t).each(s=>Ea(s.element,!0)),I$=(t,s)=>{const a="tabindex",i=`data-mce-${a}`;k.from(t.iframeElement).map(zt.fromDom).each(d=>{s?(Pa(d,a).each(g=>Hn(d,i,g)),Hn(d,a,-1)):(tr(d,a),Pa(d,i).each(g=>{Hn(d,a,g),tr(d,i)}))})},L$=(t,s,a,i)=>{const d=s.element;if(I$(t,a),a)xt.block(s,kq(i)),Ho(d,"display"),tr(d,"aria-hidden"),t.hasFocus()&&KR(s);else{const g=it.getCurrent(s).exists(h=>pl(h.element));xt.unblock(s),Yn(d,"display","none"),Hn(d,"aria-hidden","true"),g&&t.focus()}},Dq=t=>({uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:Ft([co.config({}),xt.config({focus:!1}),it.config({find:s=>rn(s.components())})]),components:[]}),H$=t=>t.type==="focusin",Oq=t=>H$(t)?(t.composed?rn(t.composedPath()):k.from(t.target)).map(zt.fromDom).filter(ai).exists(a=>Wr(a,"mce-pastebin")):!1,Rq=(t,s,a)=>{const i=cn(!1),d=jn(),g=C=>{i.get()&&!Oq(C)&&(C.preventDefault(),KR(s()),t.editorManager.setActive(t))};t.inline||t.on("PreInit",()=>{t.dom.bind(t.getWin(),"focusin",g),t.on("BeforeExecCommand",C=>{C.command.toLowerCase()==="mcefocus"&&C.value!==!0&&g(C)})});const h=C=>{C!==i.get()&&(i.set(C),L$(t,s(),C,a.providers),oZ(t,C))};t.on("ProgressState",C=>{if(d.on(clearTimeout),Gn(C.time)){const S=ST.setEditorTimeout(t,()=>h(C.state),C.time);d.set(S)}else h(C.state),d.clear()})},YR=t=>{const s=t.label.isNone()?t.title.fold(()=>({}),a=>({attributes:{"aria-label":a}})):t.label.fold(()=>({}),a=>({attributes:{"aria-label":a}}));return{dom:{tag:"div",classes:["tox-toolbar__group"].concat(t.label.isSome()?["tox-toolbar__group_with_label"]:[]),...s},components:[...t.label.map(a=>({dom:{tag:"span",classes:["tox-label","tox-label--context-toolbar"]},components:[pr(a)]})).toArray(),pT.parts.items({})],items:t.items,markers:{itemSelector:".tox-tbtn:not([disabled]), .tox-toolbar-nav-item:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:Ft([Ys.config({}),ao.config({ignore:!0})])}},zw=t=>pT.sketch(YR(t)),XR=(t,s)=>{const a=or(i=>{const d=Ne(t.initGroups,zw);Ts.setGroups(i,d)});return Ft([Gu.toolbarButton(()=>t.providers.checkUiComponentContext("any").shouldDisable),vr(()=>t.providers.checkUiComponentContext("any")),_n.config({mode:s,onEscape:t.onEscape,visibilitySelector:".tox-toolbar__overflow",selector:".tox-toolbar__group"}),so("toolbar-events",[a])])},z$=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":YR({title:k.none(),label:k.none(),items:[]}),"overflow-button":bJ({context:"any",icon:k.some("more-drawer"),enabled:!0,tooltip:k.some("Reveal or hide additional toolbar items")},k.none(),t.providers,[],"overflow-button")},splitToolbarBehaviours:XR(t,s)}},Mq=t=>{const s=z$(t),a=4,i=tD.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return tD.sketch({...s,lazySink:t.getSink,getOverflowBounds:()=>{const d=t.moreDrawerData.lazyHeader().element,g=dd(d),h=r1(d),C=dd(h),S=Math.max(h.dom.scrollHeight,C.height);return ba(g.x+a,C.y,g.width-a*2,S)},parts:{...s.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}},components:[i],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>t.onToggled(d,!0),onClosed:d=>t.onToggled(d,!1)})},Bq=t=>{const s=sD.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),a=sD.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),i=z$(t);return sD.sketch({...i,components:[s,a],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>{d.getSystem().broadcastOn([UR()],{type:"opened"}),t.onToggled(d,!0)},onClosed:d=>{d.getSystem().broadcastOn([UR()],{type:"closed"}),t.onToggled(d,!1)}})},Vw=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return Ts.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===Wu.scrolling?["tox-toolbar--scrolling"]:[])},components:[Ts.parts.groups({})],toolbarBehaviours:XR(t,s)})},Fq=(t,s)=>{var a,i;const d=t.type==="togglebutton",g=t.icon.map(De=>Jp(De,s.icons)).map(fs),C=De=>{const Ke=_t=>{g.map(wt=>wt.getOpt(De).each(Bn=>{co.set(Bn,[Jp(_t,s.icons)])}))},Ye=_t=>{const wt=De.element;_t?(Ls(wt,"tox-button--enabled"),Hn(wt,"aria-pressed",!0)):(Sr(wt,"tox-button--enabled"),tr(wt,"aria-pressed"))},Kt=()=>Wr(De.element,"tox-button--enabled"),Tt=()=>Ea(De.element);if(d)return t.onAction({setIcon:Ke,setActive:Ye,isActive:Kt,focus:Tt});if(t.type==="button")return t.onAction({setIcon:Ke})},S={...t,name:d?t.text.getOr(t.icon.getOr("")):(a=t.text)!==null&&a!==void 0?a:t.icon.getOr(""),primary:t.buttonType==="primary",buttonType:k.from(t.buttonType),tooltip:t.tooltip,icon:t.icon,enabled:!0,borderless:t.borderless},T=Q8((i=t.buttonType)!==null&&i!==void 0?i:"secondary"),O=d?t.text.map(s.translate):k.some(s.translate(t.text)),F=O.map(pr),z=S.tooltip.or(O).map(De=>({"aria-label":s.translate(De)})).getOr({}),q=g.map(De=>De.asSpec()),Z=uy([q,F]),ae=t.icon.isSome()&&F.isSome(),ye={tag:"button",classes:T.concat(...t.icon.isSome()&&!ae?["tox-button--icon"]:[]).concat(...ae?["tox-button--icon-and-text"]:[]).concat(...t.borderless?["tox-button--naked"]:[]).concat(...t.type==="togglebutton"&&t.active?["tox-button--enabled"]:[]),attributes:z},ce=[],xe=Pw(S,k.some(C),ce,ye,Z,t.tooltip,s);return ti.sketch(xe)},V$=(t,s)=>Fq(t,s),Nq=(t,s)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:Ne(t.buttons,a=>V$(a,s))}),U$=Nr().deviceType,Pq=U$.isPhone(),$q=U$.isTablet(),Iq=t=>{let s=!1;const a=Ne(t.buttons,i=>i.type==="group"?(s=!0,Nq(i,t.providers)):V$(i,t.providers));return{uid:t.uid,dom:{tag:"div",classes:[s?"tox-view__toolbar":"tox-view__header",...Pq||$q?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:Ft([ao.config({}),_n.config({mode:"flow",selector:"button, .tox-button",focusInside:Lu.OnEnterOrSpaceMode})]),components:s?a:[vm.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),vm.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:a})]}},Lq=t=>({uid:t.uid,behaviours:Ft([ao.config({}),Ys.config({})]),dom:{tag:"div",classes:["tox-view__pane"]}}),Hq=(t,s,a,i)=>{const d={getPane:g=>oc.getPart(g,t,"pane"),getOnShow:g=>t.viewConfig.onShow,getOnHide:g=>t.viewConfig.onHide};return{uid:t.uid,dom:t.dom,components:s,behaviours:Ft([ao.config({}),_n.config({mode:"cyclic",focusInside:Lu.OnEnterOrSpaceMode})]),apis:d}};var Cy=$i({name:"silver.View",configFields:[yt("viewConfig")],partFields:[ol({factory:{sketch:Iq},schema:[yt("buttons"),yt("providers")],name:"header"}),ol({factory:{sketch:Lq},schema:[],name:"pane"})],factory:Hq,apis:{getPane:(t,s)=>t.getPane(s),getOnShow:(t,s)=>t.getOnShow(s),getOnHide:(t,s)=>t.getOnHide(s)}});const JR=(t,s,a)=>So(s,(i,d)=>{const g=Mu(dP(i));return t.slot(d,Cy.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:g,components:[...g.buttons.length>0?[Cy.parts.header({buttons:g.buttons,providers:a})]:[],Cy.parts.pane({})]}))}),zq=(t,s)=>xi.sketch(a=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:JR(a,t,s),slotBehaviours:bw.unnamedEvents([or(i=>xi.hideAllSlots(i))])})),W$=t=>be(xi.getSlotNames(t),s=>xi.isShowing(t,s)),Z$=t=>{const s=t.element;Yn(s,"display","none"),Hn(s,"aria-hidden","true")},j$=t=>{const s=t.element;Ho(s,"display"),tr(s,"aria-hidden")},Vq=t=>({getContainer:K(t)}),q$=(t,s,a)=>{xi.getSlot(t,s).each(i=>{Cy.getPane(i).each(d=>{a(i)(Vq(d.element.dom))})})},Uq=(t,s)=>q$(t,s,Cy.getOnShow),Wq=(t,s)=>q$(t,s,Cy.getOnHide);var GA=nu({factory:(t,s)=>{const g={setViews:(h,C)=>{co.set(h,[zq(C,s.backstage.shared.providers)])},whichView:h=>it.getCurrent(h).bind(W$),toggleView:(h,C,S,T)=>it.getCurrent(h).exists(O=>{const F=W$(O),z=F.exists(Z=>T===Z),q=xi.getSlot(O,T).isSome();return q&&(xi.hideAllSlots(O),z?(Z$(h),C()):(S(),j$(h),xi.showSlot(O,T),Uq(O,T)),F.each(Z=>Wq(O,Z))),q})};return{uid:t.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:Ft([co.config({}),it.config({find:h=>{const C=co.contents(h);return rn(C)}})]),apis:g}},name:"silver.ViewWrapper",configFields:[yt("backstage")],apis:{setViews:(t,s,a)=>t.setViews(s,a),toggleView:(t,s,a,i,d)=>t.toggleView(s,a,i,d),whichView:(t,s)=>t.whichView(s)}});const G$=(t,s,a)=>{let i=!1;const d=h=>{Uy(h,".tox-statusbar").each(C=>{nr(C,"display")==="none"&&ha(C,"aria-hidden")==="true"?(Ho(C,"display"),tr(C,"aria-hidden")):(Yn(C,"display","none"),Hn(C,"aria-hidden","true"))})},g={getSocket:h=>oc.getPart(h,t,"socket"),setSidebar:(h,C,S)=>{oc.getPart(h,t,"sidebar").each(T=>$$(T,C,S))},toggleSidebar:(h,C)=>{oc.getPart(h,t,"sidebar").each(S=>Tq(S,C))},whichSidebar:h=>oc.getPart(h,t,"sidebar").bind(Aq).getOrNull(),getHeader:h=>oc.getPart(h,t,"header"),getToolbar:h=>oc.getPart(h,t,"toolbar"),setToolbar:(h,C)=>{oc.getPart(h,t,"toolbar").each(S=>{const T=Ne(C,zw);S.getApis().setGroups(S,T)})},setToolbars:(h,C)=>{oc.getPart(h,t,"multiple-toolbar").each(S=>{const T=Ne(C,O=>Ne(O,zw));h3.setItems(S,T)})},refreshToolbar:h=>{oc.getPart(h,t,"toolbar").each(S=>S.getApis().refresh(S))},toggleToolbarDrawer:h=>{oc.getPart(h,t,"toolbar").each(C=>{Sa(C.getApis().toggle,S=>S(C))})},toggleToolbarDrawerWithoutFocusing:h=>{oc.getPart(h,t,"toolbar").each(C=>{Sa(C.getApis().toggleWithoutFocusing,S=>S(C))})},isToolbarDrawerToggled:h=>oc.getPart(h,t,"toolbar").bind(C=>k.from(C.getApis().isOpen).map(S=>S(C))).getOr(!1),getThrobber:h=>oc.getPart(h,t,"throbber"),focusToolbar:h=>{oc.getPart(h,t,"toolbar").orThunk(()=>oc.getPart(h,t,"multiple-toolbar")).each(S=>{_n.focusIn(S)})},setMenubar:(h,C)=>{oc.getPart(h,t,"menubar").each(S=>{jR.setMenus(S,C)})},focusMenubar:h=>{oc.getPart(h,t,"menubar").each(C=>{jR.focus(C)})},setViews:(h,C)=>{oc.getPart(h,t,"viewWrapper").each(S=>{GA.setViews(S,C)})},toggleView:(h,C)=>oc.getPart(h,t,"viewWrapper").exists(S=>GA.toggleView(S,()=>g.showMainView(h),()=>g.hideMainView(h),C)),whichView:h=>oc.getPart(h,t,"viewWrapper").bind(GA.whichView).getOrNull(),hideMainView:h=>{i=g.isToolbarDrawerToggled(h),i&&g.toggleToolbarDrawer(h),oc.getPart(h,t,"editorContainer").each(C=>{const S=C.element;d(S),Yn(S,"display","none"),Hn(S,"aria-hidden","true")})},showMainView:h=>{i&&g.toggleToolbarDrawer(h),oc.getPart(h,t,"editorContainer").each(C=>{const S=C.element;d(S),Ho(S,"display"),tr(S,"aria-hidden")})}};return{uid:t.uid,dom:t.dom,components:s,apis:g,behaviours:t.behaviours}},KA=af.optional({factory:jR,name:"menubar",schema:[yt("backstage")]}),QR=t=>t.type===Wu.sliding?Bq:t.type===Wu.floating?Mq:Vw,Zq=af.optional({factory:{sketch:t=>h3.sketch({uid:t.uid,dom:t.dom,listBehaviours:Ft([_n.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>Vw({type:t.type,uid:G("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:()=>(t.onEscape(),k.some(!0))}),setupItem:(s,a,i,d)=>{Ts.setGroups(a,i)},shell:!0})},name:"multiple-toolbar",schema:[yt("dom"),yt("onEscape")]}),jq=af.optional({factory:{sketch:t=>{const s=QR(t),a={type:t.type,uid:t.uid,onEscape:()=>(t.onEscape(),k.some(!0)),onToggled:(i,d)=>t.onToolbarToggled(d),cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes};return s(a)}},name:"toolbar",schema:[yt("dom"),yt("onEscape"),yt("getSink")]}),K$=af.optional({factory:{sketch:wq},name:"header",schema:[yt("dom")]}),qq=af.optional({factory:{sketch:xq},name:"promotion",schema:[yt("dom"),yt("promotionLink")]}),Gq=af.optional({name:"socket",schema:[yt("dom")]}),Kq=af.optional({factory:{sketch:_q},name:"sidebar",schema:[yt("dom")]}),Y$=af.optional({factory:{sketch:Dq},name:"throbber",schema:[yt("dom")]}),Yq=af.optional({factory:GA,name:"viewWrapper",schema:[yt("backstage")]}),Xq=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:t.components}),e5=af.optional({factory:{sketch:Xq},name:"editorContainer",schema:[]});var qs=$i({name:"OuterContainer",factory:G$,configFields:[yt("dom"),yt("behaviours")],partFields:[K$,KA,jq,Zq,Gq,Kq,qq,Y$,Yq,e5],apis:{getSocket:(t,s)=>t.getSocket(s),setSidebar:(t,s,a,i)=>{t.setSidebar(s,a,i)},toggleSidebar:(t,s,a)=>{t.toggleSidebar(s,a)},whichSidebar:(t,s)=>t.whichSidebar(s),getHeader:(t,s)=>t.getHeader(s),getToolbar:(t,s)=>t.getToolbar(s),setToolbar:(t,s,a)=>{t.setToolbar(s,a)},setToolbars:(t,s,a)=>{t.setToolbars(s,a)},refreshToolbar:(t,s)=>t.refreshToolbar(s),toggleToolbarDrawer:(t,s)=>{t.toggleToolbarDrawer(s)},toggleToolbarDrawerWithoutFocusing:(t,s)=>{t.toggleToolbarDrawerWithoutFocusing(s)},isToolbarDrawerToggled:(t,s)=>t.isToolbarDrawerToggled(s),getThrobber:(t,s)=>t.getThrobber(s),setMenubar:(t,s,a)=>{t.setMenubar(s,a)},focusMenubar:(t,s)=>{t.focusMenubar(s)},focusToolbar:(t,s)=>{t.focusToolbar(s)},setViews:(t,s,a)=>{t.setViews(s,a)},toggleView:(t,s,a)=>t.toggleView(s,a),whichView:(t,s)=>t.whichView(s)}});const Jq="file edit view insert format tools table help",t5={file:{title:"File",items:"newdocument restoredraft | preview | importword exportpdf exportword | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code suggestededits revisionhistory | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed inserttemplate codesample inserttable accordion math | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},Qq=(t,s,a)=>{const i=N6(a).split(/[ ,]/);return{text:t.title,getItems:()=>me(t.items,d=>{const g=d.toLowerCase();return g.trim().length===0?[]:$n(i,h=>h===g)?[]:g==="separator"||g==="|"?[{type:"separator"}]:s.menuItems[g]?[s.menuItems[g]]:[]})}},YA=t=>t.split(" "),X$=(t,s)=>{const a={...t5,...s.menus},i=eo(s.menus).length>0,d=s.menubar===void 0||s.menubar===!0?YA(Jq):YA(s.menubar===!1?"":s.menubar),g=ro(d,C=>{const S=ko(t5,C);return i?S||dn(s.menus,C).exists(T=>ko(T,"items")):S}),h=Ne(g,C=>{const S=a[C];return Qq({title:S.title,items:YA(S.items)},s,t)});return ro(h,C=>{const S=T=>pe(T)||T.type!=="separator";return C.getItems().length>0&&$n(C.getItems(),S)})},J$=t=>{const s=()=>{t._skinLoaded=!0,tZ(t)};return()=>{t.initialized?s():t.on("init",s)}},eG=(t,s)=>()=>nZ(t,{message:s}),tG=t=>{const s=Q6(t);return s?k.from(s):k.none()},Q$=(t,s,a)=>(t.on("remove",()=>a.unload(s)),a.load(s)),Uw=(t,s,a,i)=>(t.on("remove",()=>i.unloadRawCss(s)),i.loadRawCss(s,a)),nG=(t,s)=>"ui/"+t+"/"+s,oG=t=>k.from(tinymce.Resource.get(t)).filter(pe),n5=(t,s,a="")=>{const i=tG(t).map(g=>nG(g,`${s}.css`)),d=i.bind(oG);return Qo(i,d,(g,h)=>({_kind:"load-raw",key:g,css:h})).getOrThunk(()=>{const g=t.editorManager.suffix;return{_kind:"load-stylesheet",url:a+`/${s}${g}.css`}})},o5=(t,s)=>{const a=t.ui.styleSheetLoader,i=n5(t,"skin",s);switch(i._kind){case"load-raw":const{key:d,css:g}=i;return Uw(t,d,g,a),Promise.resolve();case"load-stylesheet":const{url:h}=i;return Q$(t,h,a);default:return Promise.resolve()}},s5=(t,s)=>{if(Ll(zt.fromDom(t.getElement()))){const i=tw.DOM.styleSheetLoader,d=n5(t,"skin.shadowdom",s);switch(d._kind){case"load-raw":const{key:g,css:h}=d;return Uw(t,g,h,i),Promise.resolve();case"load-stylesheet":const{url:C}=d;return Q$(t,C,i);default:return Promise.resolve()}}else return Promise.resolve()},sG=(t,s,a)=>{const d=n5(t,s?"content.inline":"content",a);switch(d._kind){case"load-raw":const{key:g,css:h}=d;return s?Uw(t,g,h,t.ui.styleSheetLoader):t.on("PostRender",()=>{Uw(t,g,h,t.dom.styleSheetLoader)}),Promise.resolve();case"load-stylesheet":const{url:C}=d;return a&&t.contentCSS.push(C),Promise.resolve();default:return Promise.resolve()}},rG=async(t,s)=>{const a=eN(s);if(await sG(s,t,a),!vD(s)&&pe(a))return Promise.all([o5(s,a),s5(s,a)]).then()},eI=(t,s)=>rG(t,s).then(J$(s),eG(s,"Skin could not be loaded")),aG=vn(eI,!1),cG=vn(eI,!0),tI=t=>({isEnabled:()=>!xn.isDisabled(t),setEnabled:s=>xn.set(t,!s),setText:s=>Nn(t,Fd,{text:s}),setIcon:s=>Nn(t,Ah,{icon:s})}),iG=t=>({setActive:s=>{Jo.set(t,s)},isActive:()=>Jo.isOn(t),isEnabled:()=>!xn.isDisabled(t),setEnabled:s=>xn.set(t,!s),setText:s=>Nn(t,Fd,{text:s}),setIcon:s=>Nn(t,Ah,{icon:s})}),lG=(t,s)=>t.map(a=>({"aria-label":s.translate(a)})).getOr({}),uG=G("focus-button"),Ww=(t,s,a,i,d,g,h)=>{const C=s.map(T=>fs(MA(T,"tox-tbtn",d))),S=t.map(T=>fs(Jp(T,d.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(s.isSome()?["tox-tbtn--select"]:[]),attributes:{...lG(a,d),...Wn(h)?{"data-mce-name":h}:{}}},components:uy([S.map(T=>T.asSpec()),C.map(T=>T.asSpec())]),eventOrder:{[vi()]:["focusing","alloy.base.behaviour",Xp],[fd()]:[Xp,"toolbar-group-button-events"],[Wm()]:[Xp,"toolbar-group-button-events","tooltipping"]},buttonBehaviours:Ft([Gu.toolbarButton(()=>d.checkUiComponentContext(g).shouldDisable),vr(()=>d.checkUiComponentContext(g)),so(Xp,[or((T,O)=>Bd(T)),rt(Fd,(T,O)=>{C.bind(F=>F.getOpt(T)).each(F=>{co.set(F,[pr(d.translate(O.event.text))])})}),rt(Ah,(T,O)=>{S.bind(F=>F.getOpt(T)).each(F=>{co.set(F,[Jp(O.event.icon,d.icons)])})}),rt(vi(),(T,O)=>{O.event.prevent(),$o(T,uG)})])].concat(i.getOr([])))}},XA=(t,s,a,i,d)=>{const g=s.shared,h=cn(ie),C={toolbarButtonBehaviours:[],getApi:tI,onSetup:t.onSetup},S=[so("toolbar-group-button-events",[Ku(C,h),xh(C,h)]),...t.tooltip.map(T=>br.config(s.shared.providers.tooltips.getConfig({tooltipText:s.shared.providers.translate(T)}))).toArray()];return gh.sketch({lazySink:g.getSink,fetch:()=>os.nu(T=>{T(Ne(a(t.items),zw))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:Ww(t.icon,t.text,t.tooltip,k.some(S),g.providers,t.context,d),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:i}}}})},JA=(t,s,a,i)=>{var d;const g=cn(ie),h=Ww(t.icon,t.text,t.tooltip,k.none(),a,t.context,i);return ti.sketch({dom:h.dom,components:h.components,eventOrder:F8,buttonBehaviours:{...Ft([so("toolbar-button-events",[B8({onAction:t.onAction,getApi:s.getApi}),Ku(s,g),xh(s,g)]),...t.tooltip.map(C=>br.config(a.tooltips.getConfig({tooltipText:a.translate(C)+t.shortcut.map(S=>` (${V0(S)})`).getOr("")}))).toArray(),Gu.toolbarButton(()=>!t.enabled||a.checkUiComponentContext(t.context).shouldDisable),vr(()=>a.checkUiComponentContext(t.context))].concat(s.toolbarButtonBehaviours)),[Xp]:(d=h.buttonBehaviours)===null||d===void 0?void 0:d[Xp]}})},nI=(t,s,a)=>sg(t,s,[],a),sg=(t,s,a,i)=>JA(t,{toolbarButtonBehaviours:a.length>0?[so("toolbarButtonWith",a)]:[],getApi:tI,onSetup:t.onSetup},s,i),oI=(t,s,a)=>sI(t,s,[],a),sI=(t,s,a,i)=>JA(t,{toolbarButtonBehaviours:[co.config({}),Jo.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(a.length>0?[so("toolbarToggleButtonWith",a)]:[]),getApi:iG,onSetup:t.onSetup},s,i),dG=(t,s,a)=>i=>os.nu(d=>s.fetch(d)).map(d=>k.from(q0(At(xA(G("menu-value"),d,g=>{s.onItemAction(t(i),g)},s.columns,s.presets,Tm.CLOSE_ON_EXECUTE,s.select.getOr(ut),a),{movement:Ew(s.columns,s.presets),menuBehaviours:bw.unnamedEvents(s.columns!=="auto"?[]:[or((g,h)=>{CO(g,4,jT(s.presets)).each(({numRows:C,numColumns:S})=>{_n.setGridSize(g,C,S)})})])})))),mG=(t,s,a)=>i=>{const d=i.getSystem(),g=i.element,h=()=>{const S=Wr(g,"tox-split-button__chevron"),T=S?ki(g).bind(F=>d.getByDom(F).toOptional()):k.some(i),O=S?k.some(i):i1(g).bind(F=>d.getByDom(F).toOptional().filter(z=>Wr(z.element,"tox-split-button__chevron")));return{mainOpt:T,chevronOpt:O}},C=S=>{const{mainOpt:T,chevronOpt:O}=h();T.each(S),O.each(S)};return{isEnabled:()=>{const{mainOpt:S}=h();return S.exists(T=>!xn.isDisabled(T))},setEnabled:S=>C(T=>xn.set(T,!S)),setText:S=>{const{mainOpt:T}=h();T.each(O=>Nn(O,Fd,{text:S}))},setIcon:S=>{const{mainOpt:T}=h();T.each(O=>Nn(O,Ah,{icon:S}))},setIconFill:(S,T)=>C(O=>{Bs(O.element,`svg path[class="${S}"], rect[class="${S}"]`).each(F=>{Hn(F,"fill",T)})}),isActive:()=>{const{mainOpt:S}=h();return S.exists(T=>Jo.isOn(T))},setActive:S=>{const{mainOpt:T}=h();T.each(O=>Jo.set(O,S))},setTooltip:S=>{t.set(S);const{mainOpt:T,chevronOpt:O}=h();T.each(z=>Hn(z.element,"aria-label",s.providers.translate(S)));const F=a.chevronTooltip.map(z=>s.providers.translate(z)).getOr(s.providers.translate(`${S} menu`));O.each(z=>Hn(z.element,"aria-label",F))}}},fG=(t,s,a)=>{const i=cn(ie),d=cn(t.tooltip.getOr("")),g=mG(d,s,t),h=G("tox-split-menu"),C=cn(!1),S=()=>({"aria-haspopup":"menu","aria-expanded":String(C.get()),"aria-controls":h}),T=()=>t.tooltip.map(Z=>s.providers.translate(Z)).getOr(s.providers.translate("Text color")),O=()=>t.chevronTooltip.map(Z=>s.providers.translate(Z)).getOrThunk(()=>{const Z=T();return s.providers.translate(["{0} menu",Z])}),F=(Z,ae)=>{C.set(Z),Hn(ae.element,"aria-expanded",String(Z))},z=au.sketch({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:ND("chevron-down",s.providers.icons),attributes:{"aria-label":O(),...Wn(a)?{"data-mce-name":a+"-chevron"}:{},...S()}},components:[],toggleClass:"tox-tbtn--enabled",dropdownBehaviours:Ft([so("split-dropdown-events",[or((Z,ae)=>Bd(Z)),Ku({getApi:g,onSetup:t.onSetup},i),rt("alloy-dropdown-open",Z=>F(!0,Z)),rt("alloy-dropdown-close",Z=>F(!1,Z))]),Gu.toolbarButton(()=>s.providers.checkUiComponentContext(t.context).shouldDisable),vr(()=>s.providers.checkUiComponentContext(t.context)),Wv.config({}),br.config(s.providers.tooltips.getConfig({tooltipText:O(),onShow:Z=>{if(d.get()!==t.tooltip.getOr("")){const ae=t.chevronTooltip.map(ye=>s.providers.translate(ye)).getOr(`${s.providers.translate(d.get())} menu`);br.setComponents(Z,s.providers.tooltips.getComponents({tooltipText:ae}))}}}))]),lazySink:s.getSink,fetch:dG(g,t,s.providers),getHotspot:Z=>ki(Z.element).bind(ae=>Z.getSystem().getByDom(ae).toOptional()),onOpen:(Z,ae,ye)=>{vs.highlightBy(ye,ce=>Wr(ce.element,"tox-collection__item--active")),vs.getHighlighted(ye).each(_n.focusIn)},parts:{menu:{...Qv(!1,t.columns,t.presets),dom:{...Qv(!1,t.columns,t.presets).dom,tag:"div",attributes:{id:h}}}}});return[ti.sketch({...Ww(t.icon,t.text,k.none(),k.some([Jo.config({toggleClass:"tox-tbtn--enabled",aria:t.presets==="color"?{mode:"none"}:{mode:"pressed"},toggleOnExecute:!1}),Gu.toolbarButton(()=>s.providers.checkUiComponentContext(t.context).shouldDisable),vr(()=>s.providers.checkUiComponentContext(t.context)),so("split-main-aria-events",[]),...t.tooltip.isSome()?[br.config(s.providers.tooltips.getConfig({tooltipText:s.providers.translate(t.tooltip.getOr("")),onShow:Z=>{if(d.get()!==t.tooltip.getOr("")){const ae=s.providers.translate(d.get());br.setComponents(Z,s.providers.tooltips.getComponents({tooltipText:ae}))}}}))]:[]]),s.providers,t.context,a),dom:{...Ww(t.icon,t.text,k.none(),k.none(),s.providers,t.context,a).dom,classes:["tox-tbtn","tox-split-button__main"],attributes:{"aria-label":T(),...Wn(a)?{"data-mce-name":a}:{}}},action:Z=>{if(t.onAction){const ae=g(Z);ae.isEnabled()&&t.onAction(ae)}}}),z]},gG=".tox-toolbar-slider__input,.tox-toolbar-textfield",rI=t=>{_r.getContent(t).each(s=>{Bs(s.element,gG).fold(()=>_n.focusIn(s),Ea)})},hG=t=>Vr(t.element).each(s=>{yl(s,'[tabindex="-1"]').each(a=>{Ea(a)})}),r5=G("forward-slide"),QA=G("backward-slide"),a5=G("change-slide-event"),Zw="tox-pop--resizing",pG=t=>{const s=cn([]);return{sketch:_r.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:i=>{s.set([]),_r.getContent(i).each(d=>{Ho(d.element,"visibility")}),Sr(i.element,Zw),Ho(i.element,"width")},onHide:()=>{s.set([]),t.onHide()},inlineBehaviours:Ft([so("context-toolbar-events",[Kg(Tl(),(i,d)=>{d.event.raw.propertyName==="width"&&(Sr(i.element,Zw),Ho(i.element,"width"))}),rt(a5,(i,d)=>{const g=i.element;Ho(g,"width");const h=Ya(g),C=Vr(i.element).isSome();Ho(g,"left"),Ho(g,"right"),Ho(g,"max-width"),_r.setContent(i,d.event.contents),Ls(g,Zw);const S=Ya(g);Yn(g,"transition","none"),_r.reposition(i),Ho(g,"transition"),Yn(g,"width",h+"px"),d.event.focus.fold(()=>{C&&rI(i)},T=>{Ta(Xr(i.element)).fold(()=>Ea(T),O=>{Ko(O,T)||t.focusElement(T)})}),setTimeout(()=>{Yn(i.element,"width",S+"px")},0)}),rt(r5,(i,d)=>{_r.getContent(i).each(g=>{s.set(s.get().concat([{bar:g,focus:Ta(Xr(i.element))}]))}),Nn(i,a5,{contents:d.event.forwardContents,focus:k.none()})}),rt(QA,(i,d)=>{t.onBack(),To(s.get()).each(g=>{s.set(s.get().slice(0,s.get().length-1)),Nn(i,a5,{contents:y(g.bar),focus:g.focus})})})]),_n.config({mode:"special",onEscape:i=>To(s.get()).fold(()=>t.onEscape(),d=>($o(i,QA),k.some(!0)))})]),lazySink:()=>gn.value(t.sink)}),inSubtoolbar:()=>s.get().length>0}},bG=(t,s)=>{const a=Mu(oA({type:"button",icon:"chevron-left",tooltip:"Back",onAction:ie}));return sg(a,s.shared.providers,[rt(pR,i=>{$o(i,QA)})])},wy=(t,s,a)=>Ba(a)?t.translate(s):t.translate([s,t.translate(a)]),vG=(t,s)=>{const a=(h,C,S,T)=>{const O=t.shared.providers.translate(h.title);if(h.type==="separator")return k.some({type:"separator",text:O});if(h.type==="submenu"){const F=me(h.getStyleItems(),z=>i(z,C,T));return C===0&&F.length<=0?k.none():k.some({type:"nestedmenuitem",text:O,enabled:F.length>0,getSubmenuItems:()=>me(h.getStyleItems(),z=>i(z,C,T))})}else return k.some({type:"togglemenuitem",text:O,icon:h.icon,active:h.isSelected(T),enabled:!S,onAction:s.onAction(h),...h.getStylePreview().fold(()=>({}),F=>({meta:{style:F}}))})},i=(h,C,S)=>{const T=h.type==="formatter"&&s.isInvalid(h);return C===0?T?[]:a(h,C,!1,S).toArray():a(h,C,T,S).toArray()},d=h=>{const C=s.getCurrentValue(),S=s.shouldHide?0:1;return me(h,T=>i(T,S,C))};return{validateItems:d,getFetch:(h,C)=>(S,T)=>{const O=C(),F=d(O),z=hy(F,Tm.CLOSE_ON_EXECUTE,h,{isHorizontalMenu:!1,search:k.none()});T(z)}}},Sy=(t,s)=>{const a=s.dataset,i=a.type==="basic"?()=>Ne(a.data,d=>MR(d,s.isSelectedFor,s.getPreviewFor)):a.getData;return{items:vG(t,s),getStyleItems:i}},jw=(t,s,a,i,d,g)=>{const{items:h,getStyleItems:C}=Sy(s,a),S=cn(a.tooltip),T=F=>({getComponent:K(F),setTooltip:z=>{const q=s.shared.providers.translate(z);Hn(F.element,"aria-label",q),S.set(z)}}),O=F=>{const z=q=>F.setTooltip(wy(t,i(q.value),q.value));return t.on(d,z),hA(j0(t,"NodeChange",q=>{const Z=q.getComponent();a.updateText(Z),xn.set(q.getComponent(),!t.selection.isEditable()||C().length===0)})(F),()=>t.off(d,z))};return Fw({context:"mode:design",text:a.icon.isSome()?k.none():a.text,icon:a.icon,ariaLabel:k.some(a.tooltip),tooltip:k.none(),role:k.none(),fetch:h.getFetch(s,C),onSetup:O,getApi:T,columns:1,presets:"normal",classes:a.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[br.config({...s.shared.providers.tooltips.getConfig({tooltipText:s.shared.providers.translate(a.tooltip),onShow:F=>{if(a.tooltip!==S.get()){const z=s.shared.providers.translate(S.get());br.setComponents(F,s.shared.providers.tooltips.getComponents({tooltipText:z}))}}})})]},"tox-tbtn",s.shared,g)},aI=t=>Ne(t,s=>{let a=s,i=s;const d=s.split("=");return d.length>1&&(a=d[0],i=d[1]),{title:a,format:i}}),cI=t=>({type:"basic",data:t});var J0;(function(t){t[t.SemiColon=0]="SemiColon",t[t.Space=1]="Space"})(J0||(J0={}));const yG=(t,s)=>s===J0.SemiColon?t.replace(/;$/,"").split(";"):t.split(" "),e_=(t,s,a)=>{const i=t.options.get(s);return{type:"basic",data:aI(yG(i,a))}},CG="Align",iI=K("Alignment {0}"),lI="left",t_=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],uI=t=>{const s=()=>be(t_,C=>t.formatter.match(C.format)),a=C=>()=>t.formatter.match(C),i=C=>k.none,d=C=>{const T=s().fold(K(lI),O=>O.title.toLowerCase());Nn(C,Ah,{icon:`align-${T}`}),rZ(t,{value:T})},g=cI(t_),h=C=>()=>be(t_,S=>S.format===C.format).each(S=>t.execCommand(S.command));return{tooltip:wy(t,iI(),lI),text:k.none(),icon:k.some("align-left"),isSelectedFor:a,getCurrentValue:k.none,getPreviewFor:i,onAction:h,updateText:d,dataset:g,shouldHide:!1,isInvalid:C=>!t.formatter.canApply(C.format)}},dI=(t,s)=>jw(t,s,uI(t),iI,"AlignTextUpdate","align"),wG=(t,s)=>{const a=Sy(s,uI(t));t.ui.registry.addNestedMenuItem("align",{text:s.shared.providers.translate(CG),onSetup:Li(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},mI=(t,s)=>{const a=s(),i=Ne(a,d=>d.format);return k.from(t.formatter.closest(i)).bind(d=>be(a,g=>g.format===d))},SG="Blocks",fI=K("Block {0}"),c5="Paragraph",gI=t=>{const s=g=>()=>t.formatter.match(g),a=g=>()=>{const h=t.formatter.get(g);return h?k.some({tag:h.length>0&&(h[0].inline||h[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(g))}):k.none()},i=g=>{const C=mI(t,()=>d.data).fold(K(c5),S=>S.title);Nn(g,Fd,{text:C}),iZ(t,{value:C})},d=e_(t,"block_formats",J0.SemiColon);return{tooltip:wy(t,fI(),c5),text:k.some(c5),icon:k.none(),isSelectedFor:s,getCurrentValue:k.none,getPreviewFor:a,onAction:$P(t),updateText:i,dataset:d,shouldHide:!1,isInvalid:g=>!t.formatter.canApply(g.format)}},xG=(t,s)=>jw(t,s,gI(t),fI,"BlocksTextUpdate","blocks"),hI=(t,s)=>{const a=Sy(s,gI(t));t.ui.registry.addNestedMenuItem("blocks",{text:SG,onSetup:Li(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},EG="Fonts",pI=K("Font {0}"),i5="System Font",TG=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],bI=t=>{const s=t.split(/\s*,\s*/);return Ne(s,a=>a.replace(/^['"]+|['"]+$/g,""))},vI=(t,s)=>s.length>0&&Re(s,a=>t.indexOf(a.toLowerCase())>-1),AG=(t,s)=>{if(t.indexOf("-apple-system")===0||s.length>0){const a=bI(t.toLowerCase());return vI(a,TG)||vI(a,s)}else return!1},l5=t=>{const s=()=>{const S=Z=>Z?bI(Z)[0]:"",T=t.queryCommandValue("FontName"),O=C.data,F=T?T.toLowerCase():"",z=J6(t);return{matchOpt:be(O,Z=>{const ae=Z.format;return ae.toLowerCase()===F||S(ae).toLowerCase()===S(F).toLowerCase()}).orThunk(()=>Er(AG(F,z),{title:i5,format:F})),font:T}},a=S=>T=>T.exists(O=>O.format===S),i=()=>{const{matchOpt:S}=s();return S},d=S=>()=>k.some({tag:"div",styles:S.indexOf("dings")===-1?{"font-family":S}:{}}),g=S=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontName",!1,S.format)})},h=S=>{const{matchOpt:T,font:O}=s(),F=T.fold(K(O),z=>z.title);Nn(S,Fd,{text:F}),BP(t,{value:F})},C=e_(t,"font_family_formats",J0.SemiColon);return{tooltip:wy(t,pI(),i5),text:k.some(i5),icon:k.none(),isSelectedFor:a,getCurrentValue:i,getPreviewFor:d,onAction:g,updateText:h,dataset:C,shouldHide:!1,isInvalid:ut}},_G=(t,s)=>jw(t,s,l5(t),pI,"FontFamilyTextUpdate","fontfamily"),kG=(t,s)=>{const a=Sy(s,l5(t));t.ui.registry.addNestedMenuItem("fontfamily",{text:s.shared.providers.translate(EG),onSetup:Li(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})};var qw=tinymce.util.Tools.resolve("tinymce.util.VK");const DG=(t,s,a,i)=>{let d=k.none();const g=De=>De.map(Ke=>Xt.getValue(Ke)).getOr(""),h=j0(t,"NodeChange SwitchMode DisabledStateChange",De=>{const Ke=De.getComponent();d=k.some(Ke),a.updateInputValue(Ke),xn.set(Ke,!t.selection.isEditable()||ET(t))}),C=De=>({getComponent:K(De)}),S=cn(ie),T=G("custom-number-input-events"),O=(De,Ke,Ye)=>{const Kt=g(d),Tt=a.getNewValue(Kt,De),_t=Kt.length-`${Tt}`.length,wt=d.map(yn=>yn.element.dom.selectionStart-_t),Bn=d.map(yn=>yn.element.dom.selectionEnd-_t);a.onAction(Tt,Ye),d.each(yn=>{Xt.setValue(yn,Tt),Ke&&(wt.each(Zo=>yn.element.dom.selectionStart=Zo),Bn.each(Zo=>yn.element.dom.selectionEnd=Zo))})},F=(De,Ke)=>O((Ye,Kt)=>Ye-Kt,De,Ke),z=(De,Ke)=>O((Ye,Kt)=>Ye+Kt,De,Ke),q=De=>Su(De.element).fold(k.none,Ke=>(Ea(Ke),k.some(!0))),Z=De=>pl(De.element)?(Yo(De.element).each(Ke=>Ea(Ke)),k.some(!0)):k.none(),ae=(De,Ke,Ye,Kt)=>{const Tt=cn(ie),_t=s.shared.providers.translate(Ye),wt=G("altExecuting"),Bn=j0(t,"NodeChange SwitchMode DisabledStateChange",Zo=>{xn.set(Zo.getComponent(),!t.selection.isEditable()||ET(t))}),yn=Zo=>{xn.isDisabled(Zo)||De(!0)};return ti.sketch({dom:{tag:"button",attributes:{"aria-label":_t,"data-mce-name":Ke},classes:Kt.concat(Ke)},components:[gy(Ke,s.shared.providers.icons)],buttonBehaviours:Ft([xn.config({}),br.config(s.shared.providers.tooltips.getConfig({tooltipText:_t})),so(wt,[Ku({onSetup:Bn,getApi:C},Tt),xh({getApi:C},Tt),rt(La(),(Zo,Vn)=>{(Vn.event.raw.keyCode===qw.SPACEBAR||Vn.event.raw.keyCode===qw.ENTER)&&(xn.isDisabled(Zo)||De(!1))}),rt(Jd(),yn),rt(Rg(),yn)])]),eventOrder:{[La()]:[wt,"keying"],[Jd()]:[wt,"alloy.base.behaviour"],[Rg()]:[wt,"alloy.base.behaviour"],[fd()]:["alloy.base.behaviour",wt,"tooltipping"],[Wm()]:[wt,"tooltipping"]}})},ye=fs(ae(De=>F(!1,De),"minus","Decrease font size",[])),ce=fs(ae(De=>z(!1,De),"plus","Increase font size",[])),xe=fs({dom:{tag:"div",classes:["tox-input-wrapper"]},components:[cf.sketch({inputBehaviours:Ft([xn.config({}),so(T,[Ku({onSetup:h,getApi:C},S),xh({getApi:C},S)]),so("input-update-display-text",[rt(Fd,(De,Ke)=>{Xt.setValue(De,Ke.event.text)}),rt(kb(),De=>{a.onAction(Xt.getValue(De))}),rt(Mg(),De=>{a.onAction(Xt.getValue(De))})]),_n.config({mode:"special",onEnter:De=>(O(It,!0,!0),k.some(!0)),onEscape:q,onUp:De=>(z(!0,!1),k.some(!0)),onDown:De=>(F(!0,!1),k.some(!0)),onLeft:(De,Ke)=>(Ke.cut(),k.none()),onRight:(De,Ke)=>(Ke.cut(),k.none())})])})],behaviours:Ft([ao.config({}),_n.config({mode:"special",onEnter:Z,onSpace:Z,onEscape:q}),so("input-wrapper-events",[rt(Fu(),De=>{ft([ye,ce],Ke=>{const Ye=zt.fromDom(Ke.get(De).element.dom);pl(Ye)&&wr(Ye)})})])])});return{dom:{tag:"div",classes:["tox-number-input"],attributes:{...Wn(i)?{"data-mce-name":i}:{}}},components:[ye.asSpec(),xe.asSpec(),ce.asSpec()],behaviours:Ft([ao.config({}),_n.config({mode:"flow",focusInside:Lu.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:De=>pl(De.element)?k.none():(Ea(De.element),k.some(!0))})])}},yI="Font sizes",u5=K("Font size {0}"),CI="12pt",OG={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},RG={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},xy=(t,s)=>{const a=Math.pow(10,s);return Math.round(t*a)/a},MG=(t,s)=>/[0-9.]+px$/.test(t)?xy(parseInt(t,10)*72/96,s||0)+"pt":dn(RG,t).getOr(t),BG=t=>dn(OG,t).getOr(""),wI=t=>{const s=()=>{let S=k.none();const T=C.data,O=t.queryCommandValue("FontSize");if(O)for(let F=3;S.isNone()&&F>=0;F--){const z=MG(O,F),q=BG(z);S=be(T,Z=>Z.format===O||Z.format===z||Z.format===q)}return{matchOpt:S,size:O}},a=S=>T=>T.exists(O=>O.format===S),i=()=>{const{matchOpt:S}=s();return S},d=K(k.none),g=S=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontSize",!1,S.format)})},h=S=>{const{matchOpt:T,size:O}=s(),F=T.fold(K(O),z=>z.title);Nn(S,Fd,{text:F}),aZ(t,{value:F})},C=e_(t,"font_size_formats",J0.Space);return{tooltip:wy(t,u5(),CI),text:k.some(CI),icon:k.none(),isSelectedFor:a,getPreviewFor:d,getCurrentValue:i,onAction:g,updateText:h,dataset:C,shouldHide:!1,isInvalid:ut}},FG=(t,s)=>jw(t,s,wI(t),u5,"FontSizeTextUpdate","fontsize"),NG=t=>{var s;const a={step:1};return(s={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[t])!==null&&s!==void 0?s:a},PG=16,$G=t=>t>=0,IG=t=>{const s=()=>t.queryCommandValue("FontSize");return{updateInputValue:i=>Nn(i,Fd,{text:s()}),onAction:(i,d)=>t.execCommand("FontSize",!1,i,{skip_focus:!d}),getNewValue:(i,d)=>{ls(i,["unsupportedLength","empty"]);const g=s(),h=ls(i,["unsupportedLength","empty"]).or(ls(g,["unsupportedLength","empty"])),C=h.map(z=>z.value).getOr(PG),S=V6(t),T=h.map(z=>z.unit).filter(z=>z!=="").getOr(S),O=d(C,NG(T).step),F=`${$G(O)?O:C}${T}`;return F!==g&&cZ(t,{value:F}),F}}},d5=(t,s)=>DG(t,s,IG(t),"fontsizeinput"),LG=(t,s)=>{const a=Sy(s,wI(t));t.ui.registry.addNestedMenuItem("fontsize",{text:yI,onSetup:Li(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},HG="Formats",m5=t=>Ba(t)?"Formats":"Format {0}",f5=(t,s)=>{const a="Formats",i=h=>()=>t.formatter.match(h),d=h=>()=>{const C=t.formatter.get(h);return C!==void 0?k.some({tag:C.length>0&&(C[0].inline||C[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(h))}):k.none()},g=h=>{const C=F=>h$(F)?me(F.items,C):OR(F)?[{title:F.title,format:F.format}]:[],S=me(RR(t),C),O=mI(t,K(S)).fold(K({title:a,tooltipLabel:""}),F=>({title:F.title,tooltipLabel:F.title}));Nn(h,Fd,{text:O.title}),IO(t,{value:O.tooltipLabel})};return{tooltip:wy(t,m5(""),""),text:k.some(a),icon:k.none(),isSelectedFor:i,getCurrentValue:k.none,getPreviewFor:d,onAction:$P(t),updateText:g,shouldHide:B6(t),isInvalid:h=>!t.formatter.canApply(h.format),dataset:s}},zG=(t,s)=>{const a={type:"advanced",...s.styles};return jw(t,s,f5(t,a),m5,"StylesTextUpdate","styles")},VG=(t,s)=>{const a={type:"advanced",...s.styles},i=Sy(s,f5(t,a));t.ui.registry.addNestedMenuItem("styles",{text:HG,onSetup:Li(t,()=>i.getStyleItems().length>0),getSubmenuItems:()=>i.items.validateItems(i.getStyleItems())})},UG=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],Gw=(t,s)=>(a,i,d,g)=>{const h=t(a).mapError(C=>Mf(C)).getOrDie();return s(h,i,d,g)},WG={button:Gw(oA,(t,s,a,i)=>nI(t,s.shared.providers,i)),togglebutton:Gw(rA,(t,s,a,i)=>oI(t,s.shared.providers,i)),menubutton:Gw(jN,(t,s,a,i)=>Nw(t,"tox-tbtn",s,k.none(),!1,i)),splitbutton:Gw(cA,(t,s,a,i)=>fG(t,s.shared,i)),grouptoolbarbutton:Gw(IW,(t,s,a,i)=>{const d=a.ui.registry.getAll().buttons,g=C=>o_(a,{buttons:d,toolbar:C,allowToolbarGroups:!1},s,k.none()),h={[O2]:s.shared.header.isPositionedAtTop()?am.TopToBottom:am.BottomToTop};switch(R0(a)){case Wu.floating:return XA(t,s,g,h,i);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})},ZG=(t,s,a,i)=>dn(WG,t.type).fold(()=>(console.error("skipping button defined by",t),k.none()),d=>k.some(d(t,s,a,i))),g5={styles:zG,fontsize:FG,fontsizeinput:d5,fontfamily:_G,blocks:xG,align:dI,navigateback:bG},jG=t=>{const s=Ne(UG,a=>{const i=ro(a.items,d=>ko(t,d)||ko(g5,d));return{name:a.name,items:i}});return ro(s,a=>a.items.length>0)},qG=t=>{const s=t.split("|");return Ne(s,a=>({items:a.trim().split(" ")}))},GG=t=>Bt(t,s=>(ko(s,"name")||ko(s,"label"))&&ko(s,"items")),KG=t=>{const s=t.toolbar,a=t.buttons;return s===!1?[]:s===void 0||s===!0?jG(a):pe(s)?qG(s):GG(s)?s:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},n_=(t,s,a,i,d,g)=>dn(s,a.toLowerCase()).orThunk(()=>g.bind(h=>Wo(h,C=>dn(s,C+a.toLowerCase())))).fold(()=>dn(g5,a.toLowerCase()).map(h=>h(t,d)),h=>h.type==="grouptoolbarbutton"&&!i?(console.warn(`Ignoring the '${a}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),k.none()):ZG(h,d,t,a.toLowerCase())),o_=(t,s,a,i)=>{const d=KG(s),g=Ne(d,h=>{const C=me(h.items,S=>S.trim().length===0?[]:n_(t,s.buttons,S,s.allowToolbarGroups,a,i).map(T=>Array.isArray(T)?T:[T]).getOr([]));return{title:k.from(t.translate(h.name)),label:Er(h.label!==void 0,t.translate(h.label)),items:C}});return ro(g,h=>h.items.length>0)},Kw=(t,s,a,i)=>{const d=s.mainUi.outerContainer,g=a.toolbar,h=a.buttons;if(Bt(g,pe)){const C=g.map(S=>{const T={toolbar:S,buttons:h,allowToolbarGroups:a.allowToolbarGroups};return o_(t,T,i,k.none())});qs.setToolbars(d,C)}else qs.setToolbar(d,o_(t,a,i,k.none()))},Yw=Nr(),SI=Yw.os.isiOS()&&Yw.os.version.major<=12,YG=(t,s)=>{const{uiMotherships:a}=s,i=t.dom;let d=t.getWin();const g=t.getDoc().documentElement,h=cn(Ms(d.innerWidth,d.innerHeight)),C=cn(Ms(g.offsetWidth,g.offsetHeight)),S=()=>{const z=h.get();(z.left!==d.innerWidth||z.top!==d.innerHeight)&&(h.set(Ms(d.innerWidth,d.innerHeight)),$O(t))},T=()=>{const z=t.getDoc().documentElement,q=C.get();(q.left!==z.offsetWidth||q.top!==z.offsetHeight)&&(C.set(Ms(z.offsetWidth,z.offsetHeight)),$O(t))},O=z=>{OP(t,z)};i.bind(d,"resize",S),i.bind(d,"scroll",O);const F=qi(zt.fromDom(t.getBody()),"load",T);t.on("hide",()=>{ft(a,z=>{Yn(z.element,"display","none")})}),t.on("show",()=>{ft(a,z=>{Ho(z.element,"display")})}),t.on("NodeChange",T),t.on("remove",()=>{F.unbind(),i.unbind(d,"resize",S),i.unbind(d,"scroll",O),d=null})},XG=(t,s,a)=>{Pp(t)&&Td(a.mainUi.mothership.element,a.popupUi.mothership),d0(s,a.dialogUi.mothership)};var JG=Object.freeze({__proto__:null,render:(t,s,a,i,d)=>{const{mainUi:g,uiMotherships:h}=s,C=cn(0),S=g.outerContainer;aG(t);const T=zt.fromDom(d.targetNode),O=Il(Xr(T));Td(T,g.mothership),XG(t,O,s),t.on("PostRender",()=>{qs.setSidebar(S,a.sidebar,K6(t))}),t.on("SkinLoaded",()=>{Kw(t,s,a,i),C.set(t.getWin().innerWidth),qs.setMenubar(S,X$(t,a)),qs.setViews(S,a.views),YG(t,s)});const F=qs.getSocket(S).getOrDie("Could not find expected socket element");if(SI){Cr(F.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const ae=vu(()=>{t.dispatch("ScrollContent")},20),ye=_s(F.element,"scroll",ae.throttle);t.on("remove",ye.unbind)}hP(t,s),t.addCommand("ToggleSidebar",(ae,ye)=>{qs.toggleSidebar(S,ye),FP(t)}),t.addQueryValueHandler("ToggleSidebar",()=>{var ae;return(ae=qs.whichSidebar(S))!==null&&ae!==void 0?ae:""}),t.addCommand("ToggleView",(ae,ye)=>{if(qs.toggleView(S,ye)){const ce=S.element;g.mothership.broadcastOn([Xm()],{target:ce}),ft(h,xe=>{xe.broadcastOn([Xm()],{target:ce})}),hn(qs.whichView(S))&&(t.focus(),t.nodeChanged(),qs.refreshToolbar(S)),NP(t)}}),t.addQueryValueHandler("ToggleView",()=>{var ae;return(ae=qs.whichView(S))!==null&&ae!==void 0?ae:""});const z=R0(t),q=()=>{qs.refreshToolbar(s.mainUi.outerContainer)};(z===Wu.sliding||z===Wu.floating)&&t.on("ResizeWindow ResizeEditor ResizeContent",()=>{const ae=t.getWin().innerWidth;ae!==C.get()&&(q(),C.set(ae))});const Z={setEnabled:ae=>{ly(s,ae?"setEnabled":"setDisabled")},isEnabled:()=>!xn.isDisabled(S)};return{iframeContainer:F.element.dom,editorContainer:S.element.dom,api:Z}}});const QG=t=>/^[0-9\.]+(|px)$/i.test(""+t)?k.some(parseInt(""+t,10)):k.none(),Ey=t=>Gn(t)?t+"px":t,Xw=(t,s,a)=>{const i=s.filter(g=>t<g),d=a.filter(g=>t>g);return i.or(d).getOr(t)},xI=(t,s)=>{if(typeof s=="number")return k.from(s);const a=/^([0-9.]+)(pt|em|px)$/.exec(s.trim());if(a){const i=a[2],d=Number.parseFloat(a[1]);if(Number.isNaN(d)||d<0)return k.none();if(i==="em")return k.from(d*Number.parseFloat(window.getComputedStyle(t.dom).fontSize));if(i==="pt")return k.from(d*(72/96));if(i==="px")return k.from(d)}return k.none()},EI=t=>{const s=xI(zt.fromDom(t.targetElm),lD(t)),a=mD(t),i=fD(t);return s.map(d=>Xw(d,a,i))},TI=t=>EI(t).getOr(lD(t)),AI=t=>{const s=uD(t),a=dD(t),i=TT(t);return QG(s).map(d=>Xw(d,a,i))},_I=t=>AI(t).getOr(uD(t)),{ToolbarLocation:h5,ToolbarMode:kI}=wV,eK=40,tK=(t,s,a,i,d)=>{const{mainUi:g,uiMotherships:h}=a,C=tw.DOM,S=Xv(t),T=bh(t),O=TT(t).or(AI(t)),F=i.shared.header,z=F.isPositionedAtTop,q=150,Z=R0(t),ae=Z===kI.sliding||Z===kI.floating,ye=cn(!1),ce=()=>ye.get()&&!t.removed,xe=bn=>ae?bn.fold(K(0),vt=>vt.components().length>1?ea(vt.components()[1].element):0):0,De=bn=>{switch(gD(t)){case h5.auto:const vt=qs.getToolbar(g.outerContainer),Ut=xe(vt),qn=ea(bn.element)-Ut,vo=sa(s);if(vo.y>qn)return"top";{const po=r1(s),ys=Math.max(po.dom.scrollHeight,ea(po));return vo.bottom<ys-qn||Uc().bottom<vo.bottom-qn?"bottom":"top"}case h5.bottom:return"bottom";case h5.top:default:return"top"}},Ke=bn=>{d.on(vt=>{Ar.setModes(vt,[bn]),F.setDockingMode(bn);const Ut=z()?am.TopToBottom:am.BottomToTop;Hn(vt.element,O2,Ut)})},Ye=()=>{d.on(bn=>{const vt=O.getOrThunk(()=>jh().width-ui(s).left-10);Yn(bn.element,"max-width",vt+"px")})},Kt=(bn,vt)=>{d.on(Ut=>{const qn=qs.getToolbar(g.outerContainer),vo=xe(qn),En=sa(s),po=Tt(t,g.outerContainer.element),ys=()=>po.fold(()=>En.x,Ra=>{const ll=sa(Ra);return Ko(Ra,Oi())?En.x:En.x-ll.x}),gs=()=>po.fold(()=>z()?Math.max(En.y-ea(Ut.element)+vo,0):En.bottom,Ra=>{var ll;const Ei=sa(Ra),Gr=(ll=Ra.dom.scrollTop)!==null&&ll!==void 0?ll:0,Pd=Ko(Ra,Oi())?Math.max(En.y-ea(Ut.element)+vo,0):En.y-Ei.y+Gr-ea(Ut.element)+vo;return z()?Pd:En.bottom}),Hi=ys(),rr=Er(bn,Math.ceil(g.outerContainer.element.dom.getBoundingClientRect().width)).filter(Ra=>Ra>q).map(Ra=>{const ll=vt.getOr(Pr()),Ei=window.innerWidth-(Hi-ll.left),Gr=Math.max(Math.min(Ra,Ei),q);return Ei<Ra&&Yn(g.outerContainer.element,"width",Gr+"px"),{width:Gr+"px"}}).getOr({width:"max-content"}),Dc={position:"absolute",left:Math.round(Hi)+"px",top:gs()+"px"};Cr(g.outerContainer.element,{...Dc,...rr})})},Tt=(bn,vt)=>Pp(bn)?Df(vt):k.none(),_t=()=>{ft(h,bn=>{bn.broadcastOn([kc()],{})})},wt=()=>!S&&(lc(g.outerContainer.element).left+ad(g.outerContainer.element)>=window.innerWidth-eK||lr(g.outerContainer.element,"width").isSome())?(Yn(g.outerContainer.element,"position","absolute"),Yn(g.outerContainer.element,"left","0px"),Ho(g.outerContainer.element,"width"),!0):!1,Bn=bn=>{if(!ce())return;S||Ye();const vt=Pr(),Ut=S?!1:wt();if(ae&&qs.refreshToolbar(g.outerContainer),!S){const qn=Pr(),vo=Er(vt.left!==qn.left,vt);Kt(Ut,vo),vo.each(En=>{cd(En.left,qn.top)})}T&&d.on(bn),_t()},yn=()=>S||!T||!ce()?!1:d.get().exists(bn=>{const vt=F.getDockingMode(),Ut=De(bn);return Ut!==vt?(Ke(Ut),!0):!1});return{isVisible:ce,isPositionedAtTop:z,show:()=>{ye.set(!0),Yn(g.outerContainer.element,"display","flex"),C.addClass(t.getBody(),"mce-edit-focus"),ft(h,bn=>{Ho(bn.element,"display")}),yn(),Pp(t)?Bn(bn=>Ar.isDocked(bn)?Ar.reset(bn):Ar.refresh(bn)):Bn(Ar.refresh)},hide:()=>{ye.set(!1),Yn(g.outerContainer.element,"display","none"),C.removeClass(t.getBody(),"mce-edit-focus"),ft(h,bn=>{Yn(bn.element,"display","none")})},update:Bn,updateMode:()=>{yn()&&Bn(Ar.reset)},repositionPopups:_t}},DI=(t,s)=>{const a=sa(t);return{pos:s?a.y:a.bottom,bounds:a}},Jw=(t,s,a,i)=>{const d=cn(DI(s,a.isPositionedAtTop())),g=T=>{const{pos:O,bounds:F}=DI(s,a.isPositionedAtTop()),{pos:z,bounds:q}=d.get(),Z=F.height!==q.height||F.width!==q.width;d.set({pos:O,bounds:F}),Z&&$O(t,T),a.isVisible()&&(z!==O?a.update(Ar.reset):Z&&(a.updateMode(),a.repositionPopups()))};i||(t.on("activate",a.show),t.on("deactivate",a.hide)),t.on("SkinLoaded ResizeWindow",()=>a.update(Ar.reset)),t.on("NodeChange keydown",T=>{requestAnimationFrame(()=>g(T))});let h=0;const C=qa(()=>a.update(Ar.refresh),33);t.on("ScrollWindow",()=>{const T=Pr().left;T!==h&&(h=T,C.throttle()),a.updateMode()}),Pp(t)&&t.on("ElementScroll",T=>{a.update(Ar.refresh)});const S=er();S.set(qi(zt.fromDom(t.getBody()),"load",T=>g(T.raw))),t.on("remove",()=>{S.clear()})};var nK=Object.freeze({__proto__:null,render:(t,s,a,i,d)=>{const{mainUi:g}=s,h=jn(),C=zt.fromDom(d.targetNode),S=tK(t,C,s,i,h),T=$6(t);cG(t);const O=()=>{if(h.isSet()){S.show();return}h.set(qs.getHeader(g.outerContainer).getOrDie());const z=CD(t);Pp(t)?(Td(C,g.mothership),Td(C,s.popupUi.mothership)):d0(z,g.mothership),d0(z,s.dialogUi.mothership);const q=()=>{Kw(t,s,a,i),qs.setMenubar(g.outerContainer,X$(t,a)),S.show(),Jw(t,C,S,T),t.nodeChanged()};T?t.once("SkinLoaded",q):q()};t.on("show",O),t.on("hide",S.hide),T||(t.on("focus",O),t.on("blur",S.hide)),t.on("init",()=>{(t.hasFocus()||T)&&O()}),hP(t,s);const F={show:O,hide:S.hide,setEnabled:z=>{ly(s,z?"setEnabled":"setDisabled")},isEnabled:()=>!xn.isDisabled(g.outerContainer)};return{editorContainer:g.outerContainer.element.dom,api:F}}});const oK=()=>{const t=jn(),s=jn(),a=jn();return{dialogUi:t,popupUi:s,mainUi:a,getUiMotherships:()=>{const g=t.get().map(C=>C.mothership),h=s.get().map(C=>C.mothership);return g.fold(()=>h.toArray(),C=>h.fold(()=>[C],S=>Ko(C.element,S.element)?[C]:[C,S]))},lazyGetInOuterOrDie:(g,h)=>()=>a.get().bind(C=>h(C.outerContainer)).getOrDie(`Could not find ${g} element in OuterContainer`)}},OI="contexttoolbar-show",RI="contexttoolbar-hide",s_=(t,s,a)=>({setInputEnabled:i=>{!i&&a&&Ea(a),xn.set(t,!i)},isInputEnabled:()=>!xn.isDisabled(t),hide:()=>{$o(t,Db())},back:()=>{$o(t,QA)},getValue:()=>s.get().getOrThunk(()=>Xt.getValue(t)),setValue:i=>{t.getSystem().isConnected()?Xt.setValue(t,i):s.set(i)}}),r_=(t,s,a)=>{const d=ii(t.element).bind(g=>t.getSystem().getByDom(g).toOptional());return s_(d.getOr(t),s,a)},MI=(t,s,a)=>rt(pR,(i,d)=>{const g=t.get(i),h=s_(g,a,i.element);s.onAction(h,d.event.buttonApi)}),sK=(t,s,a,i)=>{const{primary:d,...g}=s.original,h=Mu(oA({...g,type:"button",onAction:ie}));return sg(h,a,[MI(t,s,i)])},rK=(t,s,a,i)=>{const{primary:d,...g}=s.original,h=Mu(rA({...g,type:"togglebutton",onAction:ie}));return sI(h,a,[MI(t,s,i)])},aK=t=>t.type==="contextformtogglebutton",Qw=(t,s,a,i)=>aK(s)?rK(t,s,a,i):sK(t,s,a,i),p5=(t,s,a,i)=>{const d=Ne(s,C=>fs(Qw(t,C,a,i)));return{asSpecs:()=>Ne(d,C=>C.asSpec()),findPrimary:C=>Wo(s,(S,T)=>S.primary?k.from(d[T]).bind(O=>O.getOpt(C)).filter(Fe(xn.isDisabled)):k.none())}},cK=(t,s,a,i)=>{const{width:d,height:g}=t.initValue();let h=PA;const C=G("ratio-event"),S=Tt=>s_(Tt,i),T=Tt=>ju(Tt,{tag:"span",classes:["tox-icon","tox-lock-icon__"+Tt]},s.icons),O=()=>!1,F=t.label.getOr("Constrain proportions"),z=s.translate(F),q=qr.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-lock-context-form-size-input","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":z,"data-mce-name":F}},components:[T("lock"),T("unlock")],buttonBehaviours:Ft([xn.config({disabled:O}),Ys.config({}),br.config(s.tooltips.getConfig({tooltipText:z}))])}),Z=Tt=>({dom:{tag:"div",classes:["tox-context-form__group"]},components:Tt}),ae=Tt=>yl(Tt.element,"div.tox-focusable-wrapper").fold(k.none,wt=>(Ea(wt),k.some(!0))),ye=Tt=>No.parts.field({factory:cf,inputClasses:["tox-textfield","tox-toolbar-textfield","tox-textfield-size"],data:Tt?d:g,inputBehaviours:Ft([xn.config({disabled:O}),Ys.config({}),so("size-input-toolbar-events",[rt(Nu(),(_t,wt)=>{Nn(_t,C,{isField1:Tt})})]),_n.config({mode:"special",onEnter:a,onEscape:ae})]),selectOnFocus:!1}),ce=Tt=>({dom:{tag:"label",classes:["tox-label"]},components:[pr(s.translate(Tt))]}),xe=Tt=>({dom:{tag:"div",classes:["tox-focusable-wrapper","tox-toolbar-nav-item"]},components:[Tt],behaviours:Ft([Ys.config({}),ao.config({}),_n.config({mode:"special",onEnter:_t=>Bs(_t.element,"input").fold(k.none,Bn=>(Ea(Bn),k.some(!0)))})])}),De=xe(qr.parts.field1(Z([No.parts.label(ce("Width:")),ye(!0)]))),Ke=xe(qr.parts.field2(Z([No.parts.label(ce("Height:")),ye(!1)]))),Ye=cn(ie),Kt=[Ku({onBeforeSetup:Tt=>Bs(Tt.element,"input").each(Ea),onSetup:t.onSetup,getApi:S},Ye),wO({getApi:S},Ye,i)];return qr.sketch({dom:{tag:"div",classes:["tox-context-form__group"]},components:[De,Z([q]),Ke],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(Tt,_t,wt)=>{NA(Xt.getValue(Tt)).each(Bn=>{h(Bn).each(yn=>{Xt.setValue(_t,V8(yn))})})},onInput:Tt=>$o(Tt,TA),coupledFieldBehaviours:Ft([ao.config({}),_n.config({mode:"flow",focusInside:Lu.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-focusable-wrapper"}),xn.config({disabled:O,onDisabled:Tt=>{qr.getField1(Tt).bind(No.getField).each(xn.disable),qr.getField2(Tt).bind(No.getField).each(xn.disable),qr.getLock(Tt).each(xn.disable)},onEnabled:Tt=>{qr.getField1(Tt).bind(No.getField).each(xn.enable),qr.getField2(Tt).bind(No.getField).each(xn.enable),qr.getLock(Tt).each(xn.enable)}}),vr(()=>s.checkUiComponentContext("mode:design")),so("size-input-toolbar-events2",[rt(C,(Tt,_t)=>{const wt=_t.event.isField1,Bn=wt?qr.getField1(Tt):qr.getField2(Tt),yn=wt?qr.getField2(Tt):qr.getField1(Tt),Zo=Bn.map(Xt.getValue).getOr(""),Vn=yn.map(Xt.getValue).getOr("");h=CR(Zo,Vn)}),rt(TA,Tt=>t.onInput(S(Tt))),...Kt])])})},BI=(t,s,a)=>No.sketch({dom:{tag:"div",classes:["tox-context-form__group"]},components:[...t.toArray(),s],fieldBehaviours:Ft([xn.config({disabled:()=>a.checkUiComponentContext("mode:design").shouldDisable,onDisabled:i=>{hG(i),No.getField(i).each(xn.disable)},onEnabled:i=>{No.getField(i).each(xn.enable)}})])}),FI=(t,s,a,i)=>{const d=cn(ie),g=S=>r_(S,i),h=t.label.map(S=>No.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[pr(s.translate(S))]})),C=No.parts.field({factory:cf,type:"range",inputClasses:["tox-toolbar-slider__input","tox-toolbar-nav-item"],inputAttributes:{min:String(t.min()),max:String(t.max())},data:t.initValue().toString(),fromInputValue:S=>ja(S).getOr(t.min()),toInputValue:S=>String(S),inputBehaviours:Ft([xn.config({disabled:()=>s.checkUiComponentContext("mode:design").shouldDisable}),vr(()=>s.checkUiComponentContext("mode:design")),_n.config({mode:"special",onEnter:a,onLeft:(S,T)=>(T.cut(),k.none()),onRight:(S,T)=>(T.cut(),k.none())}),so("slider-events",[Ku({onSetup:t.onSetup,getApi:g,onBeforeSetup:_n.focusIn},d),wO({getApi:g},d,i),rt(Um(),S=>{t.onInput(g(S))})])])});return BI(h,C,s)},b5=(t,s,a,i)=>{const d=cn(ie),g=O=>r_(O,i),h=t.label.map(O=>No.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[pr(s.translate(O))]})),S={...t.placeholder.map(O=>({placeholder:s.translate(O)})).getOr({})},T=No.parts.field({factory:cf,inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-item"],inputAttributes:S,data:t.initValue(),selectOnFocus:!0,inputBehaviours:Ft([xn.config({disabled:()=>s.checkUiComponentContext("mode:design").shouldDisable}),vr(()=>s.checkUiComponentContext("mode:design")),_n.config({mode:"special",onEnter:a,onLeft:(O,F)=>(F.cut(),k.none()),onRight:(O,F)=>(F.cut(),k.none())}),so("input-events",[Ku({onSetup:t.onSetup,getApi:O=>yl(O.element,".tox-toolbar").bind(z=>Bs(z,"button:enabled")).fold(()=>r_(O,i),z=>r_(O,i,z)),onBeforeSetup:_n.focusIn},d),wO({getApi:g},d,i),rt(Um(),O=>{t.onInput(g(O))})])])});return BI(h,T,s)},a_=(t,s,a)=>{const i=jn(),g=fs(t(a,T=>C.findPrimary(T).orThunk(()=>S.findPrimary(T)).map(O=>(U1(O),!0)),i)),h=Xo(s.commands,T=>T.align==="start"),C=p5(g,h.pass,a,i),S=p5(g,h.fail,a,i);return ro([{title:k.none(),label:k.none(),items:C.asSpecs()},{title:k.none(),label:k.none(),items:[g.asSpec()]},{title:k.none(),label:k.none(),items:S.asSpecs()}],T=>T.items.length>0)},v5=(t,s)=>{switch(t.type){case"contextform":return a_(vn(b5,t),t,s);case"contextsliderform":return a_(vn(FI,t),t,s);case"contextsizeinputform":return a_(vn(cK,t),t,s)}},Ty={renderContextForm:(t,s,a)=>Vw({type:t,uid:G("context-toolbar"),initGroups:v5(s,a),onEscape:k.none,cyclicKeying:!0,providers:a}),buildInitGroups:v5},eS=(t,s,a)=>s.bottom-t.y>=a&&t.bottom-s.y>=a,c_=t=>{const s=t.getBoundingClientRect();if(s.height<=0&&s.width<=0){const a=Cf(zt.fromDom(t.startContainer),t.startOffset).element;return(Hd(a)?ii(a):k.some(a)).filter(ai).map(d=>d.dom.getBoundingClientRect()).getOr(s)}else return s},tS=t=>{const s=t.selection.getRng(),a=c_(s);if(t.inline){const i=Pr();return ba(i.left+a.left,i.top+a.top,a.width,a.height)}else{const i=dd(zt.fromDom(t.getBody()));return ba(i.x+a.left,i.y+a.top,a.width,a.height)}},y5=(t,s)=>s.filter(a=>ds(a)&&re(a)).map(dd).getOrThunk(()=>tS(t)),NI=(t,s,a)=>{const i=Math.max(t.x+a,s.x),d=Math.min(t.right-a,s.right);return{x:i,width:d-i}},i_=(t,s,a,i,d,g)=>{const h=zt.fromDom(t.getContainer()),C=Bs(h,".tox-editor-header").getOr(h),S=sa(C),T=S.y>=s.bottom,O=i&&!T;if(t.inline&&O)return{y:Math.max(S.bottom+g,a.y),bottom:a.bottom};if(t.inline&&!O)return{y:a.y,bottom:Math.min(S.y-g,a.bottom)};const F=d==="line"?sa(h):s;return O?{y:Math.max(S.bottom+g,a.y),bottom:Math.min(F.bottom-g,a.bottom)}:{y:Math.max(F.y+g,a.y),bottom:Math.min(S.y-g,a.bottom)}},C5=(t,s,a,i=0)=>{const d=jh(window),g=sa(zt.fromDom(t.getContentAreaContainer())),h=kT(t)||DT(t)||ow(t),{x:C,width:S}=NI(g,d,i);if(t.inline&&!h)return ba(C,d.y,S,d.height);{const T=s.header.isPositionedAtTop(),{y:O,bottom:F}=i_(t,g,d,T,a,i);return ba(C,O,S,F-O)}},nS=12,l_={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},PI={maxHeightFunction:Zg(),maxWidthFunction:D2()},$I=(t,s)=>{const a=t.selection.getRng(),i=Cf(zt.fromDom(a.startContainer),a.startOffset);return a.startContainer===a.endContainer&&a.startOffset===a.endOffset-1&&Ko(i.element,s)},iK=(t,s,a)=>{const i=lr(t,"position");Yn(t,"position",s);const d=a(t);return i.each(g=>Yn(t,"position",g)),d},II=t=>t==="node",u_=(t,s,a,i,d)=>{const g=tS(t),h=i.lastElement().exists(C=>Ko(a,C));if($I(t,a))return h?Zc:Ni;if(h)return iK(s,i.getMode(),()=>eS(g,sa(s),-20)&&!i.isReposition()?fx:Zc);{const C=i.getMode()==="fixed"?d.y+Pr().top:d.y,S=ea(s)+nS;return C+S<=g.y?Ni:dp}},LI=(t,s,a,i)=>{const d=S=>(T,O,F,z,q)=>{const Z=u_(t,z,S,a,q),ae={...T,y:q.y,height:q.height};return{...Z(ae,O,F,z,q),alwaysFit:!0}},g=S=>II(i)?[d(S)]:[];return s?{onLtr:S=>[aa,Ca,gr,hc,Oa,Ha].concat(g(S)),onRtl:S=>[aa,gr,Ca,Oa,hc,Ha].concat(g(S))}:{onLtr:S=>[Ha,aa,hc,Ca,Oa,gr].concat(g(S)),onRtl:S=>[Ha,aa,Oa,gr,hc,Ca].concat(g(S))}},lK=(t,s,a,i)=>s==="line"?{bubble:Al(nS,0,l_),layouts:{onLtr:()=>[Kb],onRtl:()=>[Yb]},overrides:PI}:{bubble:Al(0,nS,l_,1/nS),layouts:LI(t,a,i,s),overrides:PI},w5=(t,s)=>{const a=ro(s,g=>g.predicate(t.dom)),{pass:i,fail:d}=Xo(a,g=>g.type==="contexttoolbar");return{contextToolbars:i,contextForms:d}},uK=t=>{if(t.length<=1)return t;{const s=g=>$n(t,h=>h.position===g),a=g=>ro(t,h=>h.position===g),i=s("selection"),d=s("node");if(i||d)if(d&&i){const g=a("node"),h=Ne(a("selection"),C=>({...C,position:"node"}));return g.concat(h)}else return a(i?"selection":"node");else return a("line")}},dK=t=>{if(t.length<=1)return t;{const s=i=>be(t,d=>d.position===i);return s("selection").orThunk(()=>s("node")).orThunk(()=>s("line")).map(i=>i.position).fold(()=>[],i=>ro(t,d=>d.position===i))}},mK=(t,s,a)=>{const i=w5(t,s);if(i.contextForms.length>0)return k.some({elem:t,toolbars:[i.contextForms[0]]});{const d=w5(t,a);if(d.contextForms.length>0)return k.some({elem:t,toolbars:[d.contextForms[0]]});if(i.contextToolbars.length>0||d.contextToolbars.length>0){const g=uK(i.contextToolbars.concat(d.contextToolbars));return k.some({elem:t,toolbars:g})}else return k.none()}},HI=(t,s,a)=>t(s)?k.none():hb(s,i=>{if(ai(i)){const{contextToolbars:d,contextForms:g}=w5(i,a.inNodeScope),h=g.length>0?g:dK(d);return h.length>0?k.some({elem:i,toolbars:h}):k.none()}else return k.none()},t),zI=(t,s)=>{const a=zt.fromDom(s.getBody()),i=h=>Ko(h,a),d=h=>!i(h)&&!ml(a,h),g=zt.fromDom(s.selection.getNode());return d(g)?k.none():mK(g,t.inNodeScope,t.inEditorScope).orThunk(()=>HI(i,g,t))},VI=(t,s)=>{const a={},i=[],d=[],g={},h={},C=(O,F)=>{const z=Mu(uO(F));a[O]=z,z.launch.map(q=>{g["form:"+O]={...F.launch,type:q.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{s(z)}}}),z.scope==="editor"?d.push(z):i.push(z),h[O]=z},S=(O,F)=>{EW(F).each(z=>{z.launch.isSome()&&(g["toolbar:"+O]={...F.launch,type:"button",onAction:()=>{s(z)}}),F.scope==="editor"?d.push(z):i.push(z),h[O]=z})},T=eo(t);return ft(T,O=>{const F=t[O];F.type==="contextform"||F.type==="contextsliderform"||F.type==="contextsizeinputform"?C(O,F):F.type==="contexttoolbar"&&S(O,F)}),{forms:a,inNodeScope:i,inEditorScope:d,lookupTable:h,formNavigators:g}},d_="tox-pop--transition",fK=t=>t===qw.ENTER||t===qw.SPACEBAR,UI=(t,s,a,i)=>{const d=i.backstage,g=d.shared,h=Nr().deviceType.isTouch,C=jn(),S=jn(),T=jn(),O=pG({sink:a,onEscape:()=>(t.focus(),PP(t),k.some(!0)),onHide:()=>{PP(t)},onBack:()=>{lZ(t)},focusElement:Vn=>{t.getBody().contains(Vn.dom)?t.focus():Ea(Vn)}}),F=p(O.sketch),z=()=>{const Vn=T.get().getOr("node"),mo=II(Vn)?1:0;return C5(t,g,Vn,mo)},q=()=>!t.removed&&!(h()&&d.isContextMenuOpen()),Z=Vn=>Tn(Qo(Vn,C.get(),Ko),!0),ae=()=>{if(q()){const Vn=z(),mo=Tn(T.get(),"node")?y5(t,C.get()):tS(t);return Vn.height<=0||!eS(mo,Vn,.01)}else return!0},ye=()=>{C.clear(),S.clear(),T.clear(),_r.hide(F)},ce=()=>{if(_r.isOpen(F)){const Vn=F.element;Ho(Vn,"display"),ae()?Yn(Vn,"display","none"):(S.set(0),_r.reposition(F))}},xe=Vn=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[Vn],behaviours:Ft([_n.config({mode:"acyclic"}),so("pop-dialog-wrap-events",[or(mo=>{t.shortcuts.add("ctrl+F9","focus statusbar",()=>_n.focusIn(mo))}),Cd(mo=>{t.shortcuts.remove("ctrl+F9")})])])}),De=Vn=>{const mo=Tt([Vn]);Nn(F,r5,{forwardContents:xe(mo)})},Ke=yc(()=>VI(s,De)),Ye=(Vn,mo)=>o_(t,{buttons:Vn,toolbar:mo.items,allowToolbarGroups:!1},i.backstage,k.some(["form:","toolbar:"])),Kt=(Vn,mo)=>Ty.buildInitGroups(Vn,mo),Tt=Vn=>{const{buttons:mo}=t.ui.registry.getAll(),bn=Ke(),vt={...mo,...bn.formNavigators},Ut=R0(t)===Wu.scrolling?Wu.scrolling:Wu.default,qn=Oe(Ne(Vn,vo=>vo.type==="contexttoolbar"?Ye(vt,eP(vo)):Kt(vo,g.providers)));return Vw({type:Ut,uid:G("context-toolbar"),initGroups:qn,onEscape:k.none,cyclicKeying:!0,providers:g.providers})},_t=(Vn,mo)=>{const bn=Vn==="node"?g.anchors.node(mo):g.anchors.cursor(),vt=lK(t,Vn,h(),{lastElement:C.get,isReposition:()=>Tn(S.get(),0),getMode:()=>wi.getMode(a)});return At(bn,vt)},wt=(Vn,mo)=>{if(Zo.cancel(),!q())return;const bn=Tt(Vn),vt=Vn[0].position,Ut=_t(vt,mo);T.set(vt),S.set(1);const qn=F.element;Ho(qn,"display"),Z(mo)||(Sr(qn,d_),wi.reset(a,F)),_r.showWithinBounds(F,xe(bn),{anchor:Ut,transition:{classes:[d_],mode:"placement"}},()=>k.some(z())),mo.fold(C.clear,C.set),ae()&&Yn(qn,"display","none")},Bn=()=>{Yn(F.element,"transition","none"),ce(),Ho(F.element,"transition")};let yn=!1;const Zo=qa(()=>{if(!(!t.hasFocus()||t.removed||yn))if(Wr(F.element,d_))Zo.throttle();else{const Vn=Ke();zI(Vn,t).fold(ye,mo=>{wt(mo.toolbars,k.some(mo.elem))})}},17);t.on("init",()=>{t.on("remove",ye),t.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",ce),t.on("click focus SetContent",Zo.throttle),t.on("keyup",Vn=>{(!fK(Vn.keyCode)||!O.inSubtoolbar())&&Zo.throttle()}),t.on(RI,ye),t.on(OI,Vn=>{const mo=Ke();dn(mo.lookupTable,Vn.toolbarKey).each(bn=>{wt([bn],Er(Vn.target!==t,Vn.target)),rI(F)})}),t.on("focusout",Vn=>{ST.setEditorTimeout(t,()=>{Vr(a.element).isNone()&&Vr(F.element).isNone()&&!t.hasFocus()&&ye()},0)}),t.on("SwitchMode",()=>{t.mode.isReadOnly()&&ye()}),t.on("DisabledStateChange",Vn=>{Vn.state&&ye()}),t.on("ExecCommand",({command:Vn})=>{Vn.toLowerCase()==="toggleview"&&ye()}),t.on("AfterProgressState",Vn=>{Vn.state?ye():t.hasFocus()&&Zo.throttle()}),t.on("dragstart",()=>{yn=!0}),t.on("dragend drop",()=>{yn=!1}),t.on("NodeChange",Vn=>{O.inSubtoolbar()?Bn():Vr(F.element).fold(Zo.throttle,ie)})})},WI=t=>{ft([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],a=>{t.ui.registry.addToggleButton(a.name,{tooltip:a.text,icon:a.icon,onAction:fu(t,a.cmd),onSetup:pA(t,a.name)})}),t.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:Li(t),onAction:fu(t,"JustifyNone")})},ZI=(t,s)=>{const a=()=>{const i=s.getOptions(t),d=s.getCurrent(t).map(s.hash),g=jn();return Ne(i,h=>({type:"togglemenuitem",text:s.display(h),onSetup:C=>{const S=O=>{O&&(g.on(F=>F.setActive(!1)),g.set(C)),C.setActive(O)};S(Tn(d,s.hash(h)));const T=s.watcher(t,h,S);return()=>{g.clear(),T()}},onAction:()=>s.setCurrent(t,h)}))};t.ui.registry.addMenuButton(s.name,{tooltip:s.text,icon:s.icon,fetch:i=>i(a()),onSetup:s.onToolbarSetup}),t.ui.registry.addNestedMenuItem(s.name,{type:"nestedmenuitem",text:s.text,getSubmenuItems:a,onSetup:s.onMenuSetup})},TJ=t=>({name:"lineheight",text:"Line height",icon:"line-height",getOptions:tN,hash:s=>Zs(s,["fixed","relative","empty"]).getOr(s),display:It,watcher:(s,a,i)=>s.formatter.formatChanged("lineheight",i,!1,{value:a}).unbind,getCurrent:s=>k.from(s.queryCommandValue("LineHeight")),setCurrent:(s,a)=>s.execCommand("LineHeight",!1,a),onToolbarSetup:Li(t),onMenuSetup:Li(t)}),gK=t=>k.from(F6(t)).map(a=>({name:"language",text:"Language",icon:"language",getOptions:K(a),hash:i=>tn(i.customCode)?i.code:`${i.code}/${i.customCode}`,display:i=>i.title,watcher:(i,d,g)=>{var h;return i.formatter.formatChanged("lang",g,!1,{value:d.code,customValue:(h=d.customCode)!==null&&h!==void 0?h:null}).unbind},getCurrent:i=>{const d=zt.fromDom(i.selection.getNode());return Cl(d,g=>k.some(g).filter(ai).bind(h=>Pa(h,"lang").map(S=>{const T=Pa(h,"data-mce-lang").getOrUndefined();return{code:S,customCode:T,title:""}})))},setCurrent:(i,d)=>i.execCommand("Lang",!1,d),onToolbarSetup:i=>{const d=er();return i.setActive(t.formatter.match("lang",{},void 0,!0)),d.set(t.formatter.formatChanged("lang",i.setActive,!0)),hA(d.clear,Li(t)(i))},onMenuSetup:Li(t)})),hK=t=>{ZI(t,TJ(t)),gK(t).each(s=>ZI(t,s))},pK=(t,s)=>{wG(t,s),kG(t,s),VG(t,s),hI(t,s),LG(t,s)},bK=t=>{t.ui.registry.addContext("editable",()=>t.selection.isEditable()),t.ui.registry.addContext("mode",s=>t.mode.get()===s),t.ui.registry.addContext("any",Ct),t.ui.registry.addContext("formatting",s=>t.formatter.canApply(s)),t.ui.registry.addContext("insert",s=>t.schema.isValidChild(t.selection.getNode().tagName,s))},vK=t=>j0(t,"NodeChange",s=>{s.setEnabled(t.queryCommandState("outdent")&&t.selection.isEditable())}),yK=t=>{t.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:vK(t),onAction:fu(t,"outdent")}),t.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:Li(t,()=>t.queryCommandState("indent")),onAction:fu(t,"indent")})},CK=t=>{yK(t)},jI=(t,s)=>a=>{a.setActive(s.get());const i=d=>{s.set(d.state),a.setActive(d.state)};return t.on("PastePlainTextToggle",i),hA(()=>t.off("PastePlainTextToggle",i),Li(t)(a))},wK=t=>{const s=cn(G6(t)),a=()=>t.execCommand("mceTogglePlainTextPaste");t.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:a,onSetup:jI(t,s)}),t.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:a,onSetup:jI(t,s)})},S5=(t,s)=>()=>{t.execCommand("mceToggleFormat",!1,s)},SK=t=>{Th.each([{name:"bold",text:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(s,a)=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:pA(t,s.name),onAction:S5(t,s.name),shortcut:s.shortcut})});for(let s=1;s<=6;s++){const a="h"+s,i=`Access+${s}`;t.ui.registry.addToggleButton(a,{text:a.toUpperCase(),tooltip:"Heading "+s,onSetup:pA(t,a),onAction:S5(t,a),shortcut:i})}},xK=t=>{Th.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy",context:"any"},{name:"help",text:"Help",action:"mceHelp",icon:"help",shortcut:"Alt+0",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onAction:fu(t,s.action),shortcut:s.shortcut,context:s.context})}),Th.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:Li(t),onAction:fu(t,s.action)})})},EK=t=>{Th.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],s=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onAction:fu(t,s.action),onSetup:pA(t,s.name)})})},qI=t=>{SK(t),xK(t),EK(t)},TK=t=>{Th.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onAction:fu(t,s.action),context:s.context})}),Th.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onSetup:Li(t),onAction:fu(t,s.action)})}),t.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:Li(t),onAction:S5(t,"code")})},AK=t=>{qI(t),TK(t)},m_=(t,s)=>j0(t,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",a=>{a.setEnabled(!t.mode.isReadOnly()&&t.undoManager[s]())}),_K=t=>{t.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:m_(t,"hasUndo"),onAction:fu(t,"undo")}),t.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:m_(t,"hasRedo"),onAction:fu(t,"redo")})},kK=t=>{t.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:m_(t,"hasUndo"),onAction:fu(t,"undo"),shortcut:"Meta+Z"}),t.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:m_(t,"hasRedo"),onAction:fu(t,"redo"),shortcut:"Meta+Y"})},x5=t=>{_K(t),kK(t)},DK=t=>j0(t,"VisualAid",s=>{s.setActive(t.hasVisual)}),OK=t=>{t.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:DK(t),onAction:fu(t,"mceToggleVisualAid"),context:"any"})},E5=t=>{t.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:fu(t,"mceToggleVisualAid"),context:"any"})},GI=t=>{E5(t),OK(t)},KI=(t,s)=>{WI(t),AK(t),pK(t,s),x5(t),bZ(t),GI(t),CK(t),hK(t),wK(t),bK(t)},RK=t=>pe(t)?t.split(/[ ,]/):t,YI=t=>s=>s.options.get(t),MK=t=>{const s=t.options.register;s("contextmenu_avoid_overlap",{processor:"string",default:""}),s("contextmenu_never_use_native",{processor:"boolean",default:!1}),s("contextmenu",{processor:a=>a===!1?{value:[],valid:!0}:pe(a)||Bt(a,pe)?{value:RK(a),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},XI=YI("contextmenu_never_use_native"),BK=YI("contextmenu_avoid_overlap"),T5=t=>JI(t).length===0,JI=t=>{const s=t.ui.registry.getAll().contextMenus,a=t.options.get("contextmenu");return t.options.isSet("contextmenu")?a:ro(a,i=>ko(s,i))},Ay=(t,s)=>({type:"makeshift",x:t,y:s}),FK=(t,s,a)=>Ay(t.x+s,t.y+a),QI=t=>t.type==="longpress"||t.type.indexOf("touch")===0,A5=t=>{if(QI(t)){const s=t.touches[0];return Ay(s.pageX,s.pageY)}else return Ay(t.pageX,t.pageY)},NK=t=>{if(QI(t)){const s=t.touches[0];return Ay(s.clientX,s.clientY)}else return Ay(t.clientX,t.clientY)},e7=(t,s)=>{const a=tw.DOM.getPos(t);return FK(s,a.x,a.y)},_5=(t,s)=>s.type==="contextmenu"||s.type==="longpress"?t.inline?A5(s):e7(t.getContentAreaContainer(),NK(s)):t7(t),t7=t=>({type:"selection",root:zt.fromDom(t.selection.getNode())}),PK=t=>({type:"node",node:k.some(zt.fromDom(t.selection.getNode())),root:zt.fromDom(t.getBody())}),n7=(t,s,a)=>{switch(a){case"node":return PK(t);case"point":return _5(t,s);case"selection":return t7(t)}},$K=(t,s,a,i,d,g)=>{const h=a(),C=n7(t,s,g);hy(h,Tm.CLOSE_ON_EXECUTE,i,{isHorizontalMenu:!1,search:k.none()}).map(S=>{s.preventDefault(),_r.showMenuAt(d,{anchor:C},{menu:{markers:Hp("normal")},data:S})})},IK={onLtr:()=>[aa,Ca,gr,hc,Oa,Ha,Ni,dp,nt,rm,up,Hu],onRtl:()=>[aa,gr,Ca,Oa,hc,Ha,Ni,dp,up,Hu,nt,rm]},o7=12,LK={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},HK=(t,s)=>{const a=t.selection;if(a.isCollapsed()||s.touches.length<1)return!1;{const i=s.touches[0],d=a.getRng();return kf(t.getWin(),wl.domRange(d)).exists(h=>h.left<=i.clientX&&h.right>=i.clientX&&h.top<=i.clientY&&h.bottom>=i.clientY)}},zK=t=>{const s=t.selection.getRng(),a=()=>{ST.setEditorTimeout(t,()=>{t.selection.setRng(s)},10),g()};t.once("touchend",a);const i=h=>{h.preventDefault(),h.stopImmediatePropagation()};t.on("mousedown",i,!0);const d=()=>g();t.once("longpresscancel",d);const g=()=>{t.off("touchend",a),t.off("longpresscancel",d),t.off("mousedown",i)}},VK=(t,s,a)=>{const i=n7(t,s,a);return{bubble:Al(0,a==="point"?o7:0,LK),layouts:IK,overrides:{maxWidthFunction:D2(),maxHeightFunction:Zg()},...i}},UK=(t,s,a,i,d,g,h)=>{const C=VK(t,s,g);hy(a,Tm.CLOSE_ON_EXECUTE,i,{isHorizontalMenu:!0,search:k.none()}).map(S=>{s.preventDefault();const T=h?jc.HighlightMenuAndItem:jc.HighlightNone;_r.showMenuWithinBounds(d,{anchor:C},{menu:{markers:Hp("normal"),highlightOnOpen:T},data:S,type:"horizontal"},()=>k.some(C5(t,i.shared,g==="node"?"node":"selection"))),t.dispatch(RI)})},WK=(t,s,a,i,d,g)=>{const h=Nr(),C=h.os.isiOS(),S=h.os.isMacOS(),T=h.os.isAndroid(),O=h.deviceType.isTouch(),F=()=>!(T||C||S&&O),z=()=>{const q=a();UK(t,s,q,i,d,g,F())};if((S||C)&&g!=="node"){const q=()=>{zK(t),z()};HK(t,s)?q():(t.once("selectionchange",q),t.once("touchend",()=>t.off("selectionchange",q)))}else z()},s7=t=>pe(t)?t==="|":t.type==="separator",k5={type:"separator"},r7=t=>{const s=a=>({text:a.text,icon:a.icon,enabled:a.enabled,shortcut:a.shortcut});if(pe(t))return t;switch(t.type){case"separator":return k5;case"submenu":return{type:"nestedmenuitem",...s(t),getSubmenuItems:()=>{const i=t.getSubmenuItems();return pe(i)?i:Ne(i,r7)}};default:const a=t;return{type:"menuitem",...s(a),onAction:en(a.onAction)}}},a7=(t,s)=>{if(s.length===0)return t;const i=To(t).filter(d=>!s7(d)).fold(()=>[],d=>[k5]);return t.concat(i).concat(s).concat([k5])},c7=(t,s,a)=>{const i=_o(s,(d,g)=>dn(t,g.toLowerCase()).map(h=>{const C=h.update(a);if(pe(C)&&Pc(Gt(C)))return a7(d,C.split(" "));if(sn(C)&&C.length>0){const S=Ne(C,r7);return a7(d,S)}else return d}).getOrThunk(()=>d.concat([g])),[]);return i.length>0&&s7(i[i.length-1])&&i.pop(),i},ZK=(t,s)=>s.ctrlKey&&!XI(t),i7=t=>t.type==="longpress"||ko(t,"touches"),l7=(t,s)=>!i7(s)&&(s.button!==2||s.target===t.getBody()&&s.pointerType===""),u7=(t,s)=>l7(t,s)?t.selection.getStart(!0):s.target,jK=(t,s)=>{const a=BK(t),i=l7(t,s)?"selection":"point";if(Pc(a)){const d=u7(t,s);return Sg(zt.fromDom(d),a)?"node":i}else return i},Q0=(t,s,a)=>{const d=Nr().deviceType.isTouch,g=p(_r.sketch({dom:{tag:"div"},lazySink:s,onEscape:()=>t.focus(),onShow:()=>a.setContextMenuState(!0),onHide:()=>a.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:Ft([so("dismissContextMenu",[rt(Lg(),(S,T)=>{ms.close(S),t.focus()})])])})),h=()=>_r.hide(g),C=S=>{if(XI(t)&&S.preventDefault(),ZK(t,S)||T5(t))return;const T=jK(t,S),O=()=>{const z=u7(t,S),q=t.ui.registry.getAll(),Z=JI(t);return c7(q.contextMenus,Z,z)};(d()?WK:$K)(t,S,O,a,g,T)};t.on("init",()=>{const S="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(d()?"":" ResizeWindow");t.on(S,h),t.on("longpress contextmenu",C)})},f_=40,g_=f_/2,d7=(t,s,a,i,d,g)=>t.fold(()=>C0.snap({sensor:Ep(a-g_,i-g_),range:Ms(d,g),output:Ep(k.some(a),k.some(i)),extra:{td:s}}),h=>{const C=a-g_,S=i-g_,T=f_,O=f_,F=h.element.dom.getBoundingClientRect();return C0.snap({sensor:Ep(C,S),range:Ms(T,O),output:Ep(k.some(a-F.width/2),k.some(i-F.height/2)),extra:{td:s}})}),m7=(t,s,a)=>{const i=(d,g)=>d.exists(h=>Ko(h,g));return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(d,g)=>{const h=g.td;i(s.get(),h)||(s.set(h),a(h))},mustSnap:!0}},f7=t=>fs(ti.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:Ft([C0.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),Wv.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),qK=(t,s)=>{const a=cn([]),i=cn([]),d=cn(!1),g=jn(),h=jn(),C=Tt=>{const _t=dd(Tt);return d7(q.getOpt(s),Tt,_t.x,_t.y,_t.width,_t.height)},S=()=>Ne(a.get(),Tt=>C(Tt)),T=Tt=>{const _t=dd(Tt);return d7(Z.getOpt(s),Tt,_t.right,_t.bottom,_t.width,_t.height)},O=()=>Ne(i.get(),Tt=>T(Tt)),F=m7(S,g,Tt=>{h.get().each(_t=>{t.dispatch("TableSelectorChange",{start:Tt,finish:_t})})}),z=m7(O,h,Tt=>{g.get().each(_t=>{t.dispatch("TableSelectorChange",{start:_t,finish:Tt})})}),q=f7(F),Z=f7(z),ae=p(q.asSpec()),ye=p(Z.asSpec()),ce=(Tt,_t,wt,Bn)=>{const yn=_t.dom.getBoundingClientRect();Ho(Tt.element,"display");const Zo=pg(zt.fromDom(t.getBody())).dom.innerHeight,Vn=wt(yn),mo=Bn(yn,Zo);(Vn||mo)&&Yn(Tt.element,"display","none")},xe=(Tt,_t,wt,Bn)=>{const yn=wt(_t);C0.snapTo(Tt,yn),ce(Tt,_t,mo=>mo[Bn]<0,(mo,bn)=>mo[Bn]>bn)},De=Tt=>xe(ae,Tt,C,"top"),Ke=()=>g.get().each(De),Ye=Tt=>xe(ye,Tt,T,"bottom"),Kt=()=>h.get().each(Ye);if(Nr().deviceType.isTouch()){const Tt=_t=>Ne(_t,zt.fromDom);t.on("TableSelectionChange",_t=>{d.get()||(fm(s,ae),fm(s,ye),d.set(!0));const wt=zt.fromDom(_t.start),Bn=zt.fromDom(_t.finish);g.set(wt),h.set(Bn),k.from(_t.otherCells).each(yn=>{a.set(Tt(yn.upOrLeftCells)),i.set(Tt(yn.downOrRightCells)),De(wt),Ye(Bn)})}),t.on("ResizeEditor ResizeWindow ScrollContent",()=>{Ke(),Kt()}),t.on("TableSelectionClear",()=>{d.get()&&(gm(ae),gm(ye),d.set(!1)),g.clear(),h.clear()})}};var g7=`<svg height="16" viewBox="0 0 80 16" width="80" xmlns="http://www.w3.org/2000/svg"><g opacity=".8"><path d="m80 3.537v-2.202h-7.976v11.585h7.976v-2.25h-5.474v-2.621h4.812v-2.069h-4.812v-2.443zm-10.647 6.929c-.493.217-1.13.337-1.864.337s-1.276-.156-1.805-.47a3.732 3.732 0 0 1 -1.3-1.298c-.324-.554-.48-1.191-.48-1.877s.156-1.335.48-1.877a3.635 3.635 0 0 1 1.3-1.299 3.466 3.466 0 0 1 1.805-.481c.65 0 .914.06 1.263.18.36.12.698.277.986.47.289.192.578.384.842.6l.12.085v-2.586l-.023-.024c-.385-.35-.855-.614-1.384-.818-.53-.205-1.155-.313-1.877-.313-.721 0-1.6.144-2.333.445a5.773 5.773 0 0 0 -1.937 1.251 5.929 5.929 0 0 0 -1.324 1.9c-.324.735-.48 1.565-.48 2.455s.156 1.72.48 2.454c.325.734.758 1.383 1.324 1.913.553.53 1.215.938 1.937 1.25a6.286 6.286 0 0 0 2.333.434c.819 0 1.384-.108 1.961-.313.59-.216 1.083-.505 1.468-.866l.024-.024v-2.49l-.12.096c-.41.337-.878.626-1.396.866zm-14.869-4.15-4.8-5.04-.024-.025h-.902v11.67h2.502v-6.847l2.827 3.08.385.409.397-.41 2.791-3.067v6.845h2.502v-11.679h-.902l-4.788 5.052z"/><path clip-rule="evenodd" d="m15.543 5.137c0-3.032-2.466-5.113-4.957-5.137-.36 0-.745.024-1.094.096-.157.024-3.85.758-3.85.758-3.032.602-4.62 2.466-4.704 4.788-.024.89-.024 4.27-.024 4.27.036 3.165 2.406 5.138 5.017 5.126.337 0 1.119-.109 1.287-.145.144-.024.385-.084.746-.144.661-.12 1.684-.325 3.067-.602 2.37-.409 4.103-2.009 4.44-4.33.156-1.023.084-4.692.084-4.692zm-3.213 3.308-2.346.457v2.31l-5.859 1.143v-5.75l2.346-.458v3.441l3.513-.686v-3.44l-3.513.685v-2.297l5.859-1.143v5.75zm20.09-3.296-.083-1.023h-2.13v8.794h2.346v-4.884c0-1.107.95-1.985 2.057-1.997 1.095 0 1.901.89 1.901 1.997v4.884h2.346v-5.245c-.012-2.105-1.588-3.777-3.67-3.765a3.764 3.764 0 0 0 -2.778 1.25l.012-.011zm-6.014-4.102 2.346-.458v2.298l-2.346.457z" fill-rule="evenodd"/><path d="m28.752 4.126h-2.346v8.794h2.346z"/><path clip-rule="evenodd" d="m43.777 15.483 4.043-11.357h-2.418l-1.54 4.355-.445 1.324-.36-1.324-1.54-4.355h-2.418l3.151 8.794-1.083 3.08zm-21.028-5.51c0 .722.541 1.034.878 1.034s.638-.048.95-.144l.518 1.708c-.217.145-.879.518-2.13.518a2.565 2.565 0 0 1 -2.562-2.587c-.024-1.082-.024-2.49 0-4.21h-1.54v-2.142h1.54v-1.912l2.346-.458v2.37h2.201v2.142h-2.2v3.693-.012z" fill-rule="evenodd"/></g></svg>
`;const GK=t=>t.nodeName==="BR"||!!t.getAttribute("data-mce-bogus")||t.getAttribute("data-mce-type")==="bookmark",KK=(t,s,a)=>{var i;const d=(i=s.delimiter)!==null&&i!==void 0?i:"",g=(T,O,F)=>ti.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":F}},components:[pr(T)],action:z=>{t.focus(),t.selection.select(O),t.nodeChanged()},buttonBehaviours:Ft([br.config({...a.tooltips.getConfig({tooltipText:a.translate(["Select the {0} element",O.nodeName.toLowerCase()]),onShow:(z,q)=>{Ji(z.element,q.element)},onHide:z=>{vb(z.element)}})}),Gu.button(a.isDisabled),vr(()=>a.checkUiComponentContext("any"))])}),h=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[pr(` ${d} `)]}),C=T=>_o(T,(O,F,z)=>{const q=g(F.name,F.element,z);return z===0?O.concat([q]):O.concat([h(),q])},[]),S=T=>{const O=[];let F=T.length;for(;F-- >0;){const z=T[F];if(z.nodeType===1&&!GK(z)){const q=sZ(t,z);if(q.isDefaultPrevented()||O.push({name:q.name,element:z}),q.isPropagationStopped())break}}return O};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:Ft([_n.config({mode:"flow",selector:"div[role=button]"}),xn.config({disabled:a.isDisabled}),vr(()=>a.checkUiComponentContext("any")),Ys.config({}),co.config({}),so("elementPathEvents",[or((T,O)=>{t.shortcuts.add("alt+F11","focus statusbar elementpath",()=>_n.focusIn(T)),t.on("NodeChange",F=>{const z=S(F.parents),q=z.length>0?C(z):[];co.set(T,q)})})])]),components:[]}};var rg;(function(t){t[t.None=0]="None",t[t.Both=1]="Both",t[t.Vertical=2]="Vertical"})(rg||(rg={}));const h7=t=>{const s=zt.fromDom(t.getContainer()),a=ea(s),i=Ya(s);return{height:a,width:i}},YK=(t,s,a,i)=>({height:Xw(i.height+s.top,mD(t),fD(t)),width:a===rg.Both?Xw(i.width+s.left,dD(t),TT(t)):i.width}),p7=(t,s,a)=>{const i=zt.fromDom(t.getContainer()),d=h7(t),g=YK(t,s,a,d);return wo(g,(h,C)=>{Gn(h)&&Yn(i,C,Ey(h))}),PO(t),g},XK=t=>{const s=q6(t);return s===!1?rg.None:s==="both"?rg.Both:rg.Vertical},b7=(t,s)=>s===rg.Both?ia.translate(["Editor's height: {0} pixels, Editor's width: {1} pixels",t.height,t.width]):ia.translate(["Editor's height: {0} pixels",t.height]),D5=(t,s,a)=>{Hn(t.element,"aria-valuetext",b7(s,a))},h_=(t,s,a,i,d)=>{const h=Ms(i*20,d*20),C=p7(t,h,a);return D5(s,C,a),k.some(!0)},JK=(t,s)=>{const a=XK(t);if(a===rg.None)return k.none();const i=a===rg.Both?ia.translate("Press the arrow keys to resize the editor."):ia.translate("Press the Up and Down arrow keys to resize the editor."),d=a===rg.Both?"tox-statusbar__resize-cursor-both":"tox-statusbar__resize-cursor-default";return k.some(ju("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle",d],attributes:{"aria-label":s.translate(i),"data-mce-name":"resize-handle",role:"separator"},behaviours:[C0.config({mode:"mouse",repositionTarget:!1,onDrag:(g,h,C)=>{const S=p7(t,C,a);D5(g,S,a)},blockerClass:"tox-blocker"}),_n.config({mode:"special",onLeft:g=>h_(t,g,a,-1,0),onRight:g=>h_(t,g,a,1,0),onUp:g=>h_(t,g,a,0,-1),onDown:g=>h_(t,g,a,0,1)}),Ys.config({}),ao.config({}),br.config(s.tooltips.getConfig({tooltipText:s.translate("Resize")})),so("set-aria-valuetext",[or(g=>{const h=()=>{D5(g,h7(t),a)};t._skinLoaded?h():t.once("SkinLoaded",h)})])],eventOrder:{[fd()]:["add-focusable","set-aria-valuetext"]}},s.icons))},QK=(t,s)=>{const a=(i,d,g)=>co.set(i,[pr(s.translate(["{0} "+g,d[g]]))]);return ti.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:Ft([Gu.button(s.isDisabled),vr(()=>s.checkUiComponentContext("any")),Ys.config({}),co.config({}),Xt.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),so("wordcount-events",[Km(i=>{const d=Xt.getValue(i),g=d.mode==="words"?"characters":"words";Xt.setValue(i,{mode:g,count:d.count}),a(i,d.count,g)}),or(i=>{t.on("wordCountUpdate",d=>{const{mode:g}=Xt.getValue(i);Xt.setValue(i,{mode:g,count:d.wordCount}),a(i,d.wordCount,g)})})])]),eventOrder:{[el()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},eY=(t,s)=>{const a=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=poweredby&utm_source=tiny&utm_medium=referral&utm_content=v7",rel:"noopener",target:"_blank","aria-label":t.translate(["Build with {0}","TinyMCE"])},innerHtml:t.translate(["Build with {0}",g7.trim()])},behaviours:Ft([ao.config({})])}]}),i=()=>{const C=V0("Alt+0");return{dom:{tag:"div",classes:["tox-statusbar__help-text"]},components:[pr(ia.translate(["Press {0} for help",C]))]}},d=()=>{const C=[];return t.hasPlugin("wordcount")&&C.push(QK(t,s)),_T(t)&&C.push(a()),{dom:{tag:"div",classes:["tox-statusbar__right-container"]},components:C}},g=()=>{const C=[],S=X6(t),T=j6(t),O=_T(t)||t.hasPlugin("wordcount"),F=()=>{const z="tox-statusbar__text-container--flex-start",q="tox-statusbar__text-container--flex-end",Z="tox-statusbar__text-container--space-around";if(S){const ae="tox-statusbar__text-container-3-cols";return!O&&!T?[ae,Z]:O&&!T?[ae,q]:[ae,z]}return[O&&!T?q:z]};return T&&C.push(KK(t,{},s)),S&&C.push(i()),O&&C.push(d()),C.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container",...F()]},components:C}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const C=g(),S=JK(t,s);return C.concat(S.toArray())})()}},p_=(t,s)=>s.get().getOrDie(`UI for ${t} has not been rendered`),tY=(t,s)=>{const a=t.inline,i=a?nK:JG,d=bh(t)?ZA:pq,g=oK(),h=jn(),C=jn(),S=jn(),z=Nr().deviceType.isTouch()?["tox-platform-touch"]:[],q=yD(t),Z=R0(t),ae=fs({dom:{tag:"div",classes:["tox-anchorbar"]}}),ye=fs({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),ce=()=>g.mainUi.get().map(En=>En.outerContainer).bind(qs.getHeader),xe=()=>gn.fromOption(g.dialogUi.get().map(En=>En.sink),"UI has not been rendered"),De=()=>gn.fromOption(g.popupUi.get().map(En=>En.sink),"(popup) UI has not been rendered"),Ke=g.lazyGetInOuterOrDie("anchor bar",ae.getOpt),Ye=g.lazyGetInOuterOrDie("bottom anchor bar",ye.getOpt),Kt=g.lazyGetInOuterOrDie("toolbar",qs.getToolbar),Tt=g.lazyGetInOuterOrDie("throbber",qs.getThrobber),_t=lq({popup:De,dialog:xe},t,Ke,Ye),wt=()=>{const En={attributes:{[O2]:q?am.BottomToTop:am.TopToBottom}},po=qs.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:_t.popup,onEscape:()=>{t.focus()}}),ys=qs.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:_t.popup.shared.getSink,providers:_t.popup.shared.providers,onEscape:()=>{t.focus()},onToolbarToggled:Pd=>{MP(t,Pd)},type:Z,lazyToolbar:Kt,lazyHeader:()=>ce().getOrDie("Could not find header element"),...En}),gs=qs.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:_t.popup.shared.providers,onEscape:()=>{t.focus()},type:Z}),Hi=ow(t),rr=DT(t),Dc=kT(t),Ra=Y6(t),ll=Bn(Ra),Ei=Hi||rr||Dc,Gr=()=>Hi?[gs]:rr?[ys]:[],ag=[ll,po];return qs.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(Ei?[]:["tox-editor-header--empty"]),...En},components:Oe([Dc?ag:[],Gr(),Xv(t)?[]:[ae.asSpec()]]),sticky:bh(t),editor:t,sharedBackstage:_t.popup.shared})},Bn=En=>qs.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]},promotionLink:En}),yn=()=>{const En=qs.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),po=qs.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[En,po]}},Zo=()=>{const En=CD(t),po=Ko(Oi(),En)&&nr(En,"display")==="grid",ys={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(z),attributes:{...ia.isRtl()?{dir:"rtl"}:{}}},behaviours:Ft([wi.config({useFixed:()=>d.isDocked(ce)})])},gs={dom:{styles:{width:document.body.clientWidth+"px"}},events:hr([rt(Ig(),Dc=>{Yn(Dc.element,"width",document.body.clientWidth+"px")})])},Hi=p(At(ys,po?gs:{})),rr=f3(Hi);return C.set(rr),{sink:Hi,mothership:rr}},Vn=()=>{const En={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(z),attributes:{...ia.isRtl()?{dir:"rtl"}:{}}},behaviours:Ft([wi.config({useFixed:()=>d.isDocked(ce),getBounds:()=>s.getPopupSinkBounds()})])},po=p(En),ys=f3(po);return S.set(ys),{sink:po,mothership:ys}},mo=()=>{const En=wt(),po=yn(),ys=qs.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:_t.popup}),gs=qs.parts.viewWrapper({backstage:_t.popup}),Hi=bD(t)&&!a?k.some(eY(t,_t.popup.shared.providers)):k.none(),rr=Oe([q?[]:[En],a?[]:[po],q?[En]:[]]),Dc=qs.parts.editorContainer({components:Oe([rr,a?[]:[ye.asSpec()]])}),Ra=sw(t),ll={role:"application",...ia.isRtl()?{dir:"rtl"}:{},...Ra?{"aria-hidden":"true"}:{}},Ei=p(qs.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(a?["tox-tinymce-inline"]:[]).concat(q?["tox-tinymce--toolbar-bottom"]:[]).concat(z),styles:{visibility:"hidden",...Ra?{opacity:"0",border:"0"}:{}},attributes:ll},components:[Dc,...a?[]:[gs,...Hi.toArray()],ys],behaviours:Ft([vr(()=>_t.popup.shared.providers.checkUiComponentContext("any")),xn.config({disableClass:"tox-tinymce--disabled"}),_n.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),Gr=f3(Ei);return h.set(Gr),{mothership:Gr,outerContainer:Ei}},bn=En=>{const po=Ey(TI(t)),ys=Ey(_I(t));return t.inline||(wf("div","width",ys)&&Yn(En.element,"width",ys),wf("div","height",po)?Yn(En.element,"height",po):Yn(En.element,"height","400px")),po},vt=En=>{t.addShortcut("alt+F9","focus menubar",()=>{qs.focusMenubar(En)}),t.addShortcut("alt+F10","focus toolbar",()=>{qs.focusToolbar(En)}),t.addCommand("ToggleToolbarDrawer",(po,ys,gs)=>{ys!=null&&ys.skipFocus?(mq("skipFocus"),qs.toggleToolbarDrawerWithoutFocusing(En)):gs!=null&&gs.skip_focus?qs.toggleToolbarDrawerWithoutFocusing(En):qs.toggleToolbarDrawer(En)}),t.addQueryStateHandler("ToggleToolbarDrawer",()=>qs.isToolbarDrawerToggled(En)),t.on("blur",()=>{R0(t)===Wu.floating&&qs.isToolbarDrawerToggled(En)&&qs.toggleToolbarDrawerWithoutFocusing(En)})},Ut=En=>{const{mainUi:po,popupUi:ys,uiMotherships:gs}=En;mt(P6(t),(_h,rS)=>{t.ui.registry.addGroupToolbarButton(rS,_h)});const{buttons:Hi,menuItems:rr,contextToolbars:Dc,sidebars:Ra,views:ll}=t.ui.registry.getAll(),Ei=OT(t),Gr={menuItems:rr,menus:rw(t),menubar:L6(t),toolbar:Ei.getOrThunk(()=>AT(t)),allowToolbarGroups:Z===Wu.floating,buttons:Hi,sidebar:Ra,views:ll};vt(po.outerContainer),fq(t,po.mothership,gs),d.setup(t,_t.popup.shared,ce),KI(t,_t.popup),Q0(t,_t.popup.shared.getSink,_t.popup),jA(t),Rq(t,Tt,_t.popup.shared),UI(t,Dc,ys.sink,{backstage:_t.popup}),qK(t,ys.sink);const ag=t.getElement(),Pd=bn(po.outerContainer),eb={targetNode:ag,height:Pd};return i.render(t,En,Gr,_t.popup,eb)},qn=En=>(S.set(En.mothership),En),vo=()=>{const En=mo(),po=Zo(),ys=Pp(t)?Vn():qn(po);g.dialogUi.set(po),g.popupUi.set(ys),g.mainUi.set(En);const gs={popupUi:ys,dialogUi:po,mainUi:En,uiMotherships:g.getUiMotherships()};return Ut(gs)};return{popups:{backstage:_t.popup,getMothership:()=>p_("popups",S)},dialogs:{backstage:_t.dialog,getMothership:()=>p_("dialogs",C)},renderUI:vo}},v7=t=>{const s=[],a={};return wo(t,(i,d)=>{i.fold(()=>{s.push(d)},g=>{a[d]=g})}),s.length>0?gn.error(s):gn.value(a)},nY=(t,s,a,i)=>{const d=fs(Dl.sketch(g=>({dom:{tag:"div",classes:["tox-form"].concat(t.classes)},components:Ne(t.items,h=>i$(g,h,s,a,i))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[d.asSpec()]}],behaviours:Ft([_n.config({mode:"acyclic",useTabstopAt:Fe(Rw)}),km.memento(d),qZ(d,{postprocess:g=>v7(g).fold(h=>(console.error(h),{}),It)}),so("dialog-body-panel",[rt(Nu(),(g,h)=>{g.getSystem().broadcastOn([OA],{newFocus:k.some(h.event.target)})})])])}},oY=(t,s,a)=>Ne(t,(i,d)=>{co.set(a,t[d].view());const g=s.dom.getBoundingClientRect();return co.set(a,[]),g.height}),sY=t=>rn(st(t,(s,a)=>s>a?-1:s<a?1:0)),rY=(t,s,a)=>{const i=r1(t).dom,d=yl(t,".tox-dialog-wrap").getOr(t),g=nr(d,"position")==="fixed";let h;g?h=Math.max(i.clientHeight,window.innerHeight):h=Math.max(i.offsetHeight,i.scrollHeight);const C=ea(s),T=s.dom.offsetLeft>=a.dom.offsetLeft+Ya(a)?Math.max(ea(a),C):C,O=parseInt(nr(t,"margin-top"),10)||0,F=parseInt(nr(t,"margin-bottom"),10)||0,q=ea(t)+O+F-T;return h-q},aY=(t,s)=>{rn(t).each(a=>O0.showTab(s,a.value))},y7=(t,s)=>{Yn(t,"height",s+"px"),Yn(t,"flex-basis",s+"px")},oS=(t,s,a)=>{yl(t,'[role="dialog"]').each(i=>{Bs(i,'[role="tablist"]').each(d=>{a.get().map(g=>(Yn(s,"height","0"),Yn(s,"flex-basis","0"),Math.min(g,rY(i,s,d)))).each(g=>{y7(s,g)})})})},b_=t=>Bs(t,'[role="tabpanel"]'),cY=t=>{const s=jn();return{extraEvents:[or(d=>{const g=d.element;b_(g).each(h=>{Yn(h,"visibility","hidden"),d.getSystem().getByDom(h).toOptional().each(C=>{const S=oY(t,h,C);sY(S).fold(s.clear,s.set)}),oS(g,h,s),Ho(h,"visibility"),aY(t,d),requestAnimationFrame(()=>{oS(g,h,s)})})}),rt(Ig(),d=>{const g=d.element;b_(g).each(h=>{oS(g,h,s)})}),rt(oR,(d,g)=>{const h=d.element;b_(h).each(C=>{const S=Ta(Xr(C));Yn(C,"visibility","hidden");const T=lr(C,"height").map(z=>parseInt(z,10));Ho(C,"height"),Ho(C,"flex-basis");const O=C.dom.getBoundingClientRect().height;T.forall(z=>O>z)?(s.set(O),oS(h,C,s)):T.each(z=>{y7(C,z)}),Ho(C,"visibility"),S.each(Ea)})})],selectFirst:!1}},_y="send-data-to-section",C7="send-data-to-view",iY=(t,s,a,i)=>{const d=cn({}),g=O=>{const F=Xt.getValue(O),z=v7(F).getOr({}),q=d.get(),Z=At(q,z);d.set(Z)},h=O=>{const F=d.get();Xt.setValue(O,F)},C=cn(null),S=Ne(t.tabs,O=>({value:O.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[pr(a.shared.providers.translate(O.title))],view:()=>[Dl.sketch(F=>({dom:{tag:"div",classes:["tox-form"]},components:Ne(O.items,z=>i$(F,z,s,a,i)),formBehaviours:Ft([_n.config({mode:"acyclic",useTabstopAt:Fe(Rw)}),so("TabView.form.events",[or(h),Cd(g)]),ou.config({channels:A1([{key:_y,value:{onReceive:g}},{key:C7,value:{onReceive:h}}])})])}))]})),T=cY(S);return O0.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(O,F,z)=>{const q=Xt.getValue(F);Nn(O,nR,{name:q,oldName:C.get()}),C.set(q)},tabs:S,components:[O0.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[yT.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:Ft([Ys.config({})])}),O0.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:T.selectFirst,tabSectionBehaviours:Ft([so("tabpanel",T.extraEvents),_n.config({mode:"acyclic"}),it.config({find:O=>rn(O0.getViewItems(O))}),K0(k.none(),O=>(O.getSystem().broadcastOn([_y],{}),d.get()),(O,F)=>{d.set(F),O.getSystem().broadcastOn([C7],{})})])})},v_=(t,s,a,i,d,g)=>{const h=T=>{const O=T.body;switch(O.type){case"tabpanel":return[iY(O,T.initialData,i,g)];default:return[nY(O,T.initialData,i,g)]}},C=(T,O)=>k.some({isTabPanel:()=>O.body.type==="tabpanel"}),S={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...a.map(T=>({id:T})).getOr({}),...d?S:{}}},components:[],behaviours:Ft([km.childAt(0),su.config({channel:`${mR}-${s}`,updateState:C,renderComponents:h,initialData:t})])}},lY=(t,s,a,i,d,g)=>v_(t,s,k.some(a),i,d,g),uY=(t,s,a,i)=>{const d=v_(t,s,k.none(),a,!1,i);return za.parts.body(d)},dY=t=>{const s={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[S8(k.none(),{dom:{tag:"iframe",attributes:{src:t.url}},behaviours:Ft([Ys.config({}),ao.config({})])})]}],behaviours:Ft([_n.config({mode:"acyclic",useTabstopAt:Fe(Rw)})])};return za.parts.body(s)},mY=Yv.deviceType.isTouch(),w7=(t,s)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,s]}),S7=(t,s)=>za.parts.close(ti.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":s.translate("Close")}},action:t,buttonBehaviours:Ft([Ys.config({})])})),x7=()=>za.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),E7=(t,s)=>za.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:rf(`<p>${BD(s.translate(t))}</p>`)}]}]}),T7=t=>za.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t}),A7=(t,s)=>[vm.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),vm.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:s})],O5=t=>{const s="tox-dialog",a=s+"-wrap",i=a+"__backdrop",d=s+"__disable-scroll";return za.sketch({lazySink:t.lazySink,onEscape:g=>(t.onEscape(g),k.some(!0)),useTabstopAt:g=>!Rw(g),firstTabstop:t.firstTabstop,dom:{tag:"div",classes:[s].concat(t.extraClasses),styles:{position:"relative",...t.extraStyles}},components:[t.header,t.body,...t.footer.toArray()],parts:{blocker:{dom:rf(`<div class="${a}"></div>`),components:[{dom:{tag:"div",classes:mY?[i,i+"--opaque"]:[i]}}]}},dragBlockClass:a,modalBehaviours:Ft([ao.config({}),so("dialog-events",t.dialogEvents.concat([Kg(Nu(),(g,h)=>{xt.isBlocked(g)?ie():_n.focusIn(g)}),rt(k1(),(g,h)=>{g.getSystem().broadcastOn([OA],{newFocus:h.event.newFocus})})])),so("scroll-lock",[or(()=>{Ls(Oi(),d)}),Cd(()=>{Sr(Oi(),d)})]),...t.extraBehaviours]),eventOrder:{[el()]:["dialog-events"],[fd()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[Wm()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...t.eventOrder}})},_7=t=>ti.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),"data-mce-name":"close"}},buttonBehaviours:Ft([Ys.config({}),br.config(t.tooltips.getConfig({tooltipText:t.translate("Close")}))]),components:[ju("close",{tag:"span",classes:["tox-icon"]},t.icons)],action:s=>{$o(s,Yp)}}),k7=(t,s,a,i)=>{const d=g=>[pr(i.translate(g.title))];return{dom:{tag:"h1",classes:["tox-dialog__title"],attributes:{...a.map(g=>({id:g})).getOr({})}},components:[],behaviours:Ft([su.config({channel:`${E8}-${s}`,initialData:t,renderComponents:d})])}},D7=()=>({dom:rf('<div class="tox-dialog__draghandle"></div>')}),fY=(t,s,a,i)=>vm.sketch({dom:rf('<div class="tox-dialog__header"></div>'),components:[k7(t,s,k.some(a),i),D7(),_7(i)],containerBehaviours:Ft([C0.config({mode:"mouse",blockerClass:"blocker",getTarget:d=>uc(d,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"},onDrag:(d,g)=>{d.getSystem().broadcastOn([kc()],{target:g})}})])}),gY=(t,s,a)=>{const i=za.parts.title(k7(t,s,k.none(),a)),d=za.parts.draghandle(D7()),g=za.parts.close(_7(a)),h=[i].concat(t.draggable?[d]:[]).concat([g]);return vm.sketch({dom:rf('<div class="tox-dialog__header"></div>'),components:h})},O7=(t,s,a)=>gY({title:a.shared.providers.translate(t),draggable:a.dialog.isDraggableModal()},s,a.shared.providers),sS=(t,s,a,i)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":a.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:`${i.getOr(0)}px`,position:"absolute"}},behaviours:s,components:[{dom:rf('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),R7=(t,s,a)=>({onClose:()=>a.closeWindow(),onBlock:i=>{const d=Bs(t().element,".tox-dialog__header").map(g=>ea(g));za.setBusy(t(),(g,h)=>sS(i.message,h,s,d))},onUnblock:()=>{za.setIdle(t())}}),M7="tox-dialog--fullscreen",R5="tox-dialog--width-lg",M5="tox-dialog--width-md",y_=t=>{switch(t){case"large":return k.some(R5);case"medium":return k.some(M5);default:return k.none()}},B7=(t,s)=>{const a=zt.fromDom(s.element.dom);Wr(a,M7)||(dc(a,[R5,M5]),y_(t).each(i=>Ls(a,i)))},B5=(t,s)=>{const a=zt.fromDom(t.element.dom),i=w1(a),d=be(i,g=>g===R5||g===M5).or(y_(s));id(a,[M7,...d.toArray()])},F7=(t,s,a)=>p(O5({...t,firstTabstop:1,lazySink:a.shared.getSink,extraBehaviours:[AA({}),...t.extraBehaviours],onEscape:i=>{$o(i,Yp)},dialogEvents:s,eventOrder:{[Fg()]:[su.name(),ou.name()],[fd()]:["scroll-lock",su.name(),"messages","dialog-events","alloy.base.behaviour"],[Wm()]:["alloy.base.behaviour","dialog-events","messages",su.name(),"scroll-lock"]}})),F5=(t,s={})=>{const a=i=>{const d=Ne(i.items,g=>{const h=dn(s,g.name).getOr(cn(!1));return{...g,storage:h}});return{...i,items:d}};return Ne(t,i=>i.type==="menu"?a(i):i)},N7=t=>_o(t,(s,a)=>a.type==="menu"?_o(a.items,(d,g)=>(d[g.name]=g.storage,d),s):s,{}),P7=(t,s)=>[qg(Nu(),sj),t(my,(a,i,d,g)=>{pl(g.element)&&Ta(Xr(g.element)).each(wr),s.onClose(),i.onClose()}),t(Yp,(a,i,d,g)=>{i.onCancel(a),$o(g,my)}),rt(kw,(a,i)=>s.onUnblock()),rt(tR,(a,i)=>s.onBlock(i.event))],hY=(t,s)=>{const a=(d,g)=>rt(d,(h,C)=>{i(h,(S,T)=>{g(t(),S,C.event,h)})}),i=(d,g)=>{su.getState(d).get().each(h=>{g(h,d)})};return[...P7(a,s),a(ng,(d,g,h)=>{g.onAction(d,{name:h.name})})]},C_=(t,s,a)=>{const i=(g,h)=>rt(g,(C,S)=>{d(C,(T,O)=>{h(t(),T,S.event,C)})}),d=(g,h)=>{su.getState(g).get().each(C=>{h(C.internalDialog,g)})};return[...P7(i,s),i(_w,(g,h)=>h.onSubmit(g)),i(oi,(g,h,C)=>{h.onChange(g,{name:C.name})}),i(ng,(g,h,C,S)=>{const T=()=>S.getSystem().isConnected()?_n.focusIn(S):void 0,O=q=>$a(q,"disabled")||Pa(q,"aria-disabled").exists(Z=>Z==="true"),F=Xr(S.element),z=Ta(F);h.onAction(g,{name:C.name,value:C.value}),Ta(F).fold(T,q=>{O(q)||z.exists(Z=>ml(q,Z)&&O(Z))?T():a().toOptional().filter(Z=>!ml(Z.element,q)).each(T)})}),i(nR,(g,h,C)=>{h.onTabChange(g,{newTabName:C.name,oldTabName:C.oldName})}),Cd(g=>{const h=t();Xt.setValue(g,h.getData())})]},$7=(t,s)=>$w(t,t.type,s),pY=(t,s,a)=>be(s,i=>i.name===a).bind(i=>i.memento.getOpt(t)),bY=(t,s)=>{const a=s.map(C=>C.footerButtons).getOr([]),i=Xo(a,C=>C.align==="start"),d=(C,S)=>vm.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${C}`]},components:Ne(S,T=>T.memento.asSpec())}),g=d("start",i.pass),h=d("end",i.fail);return[g,h]},I7=(t,s,a)=>{const i=(d,g)=>{const h=Ne(g.buttons,S=>{const T=fs($7(S,a));return{name:S.name,align:S.align,memento:T}}),C=S=>pY(d,h,S);return k.some({lookupByName:C,footerButtons:h})};return{dom:rf('<div class="tox-dialog__footer"></div>'),components:[],behaviours:Ft([su.config({channel:`${T8}-${s}`,initialData:t,updateState:i,renderComponents:bY})])}},vY=(t,s,a)=>I7(t,s,a),L7=(t,s,a)=>za.parts.footer(I7(t,s,a)),w_=(t,s)=>{if(t.getRoot().getSystem().isConnected()){const i=it.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return Dl.getField(i,s).orThunk(()=>t.getFooter().bind(h=>su.getState(h).get()).bind(h=>h.lookupByName(s)))}else return k.none()},yY=(t,s)=>{const a=t.getRoot();return su.getState(a).get().map(i=>Mu(Mr("data",i.dataValidator,s))).getOr(s)},H7=(t,s,a)=>{const i=Z=>{const ae=t.getRoot();ae.getSystem().isConnected()&&Z(ae)},q={getData:()=>{const Z=t.getRoot(),ae=Z.getSystem().isConnected()?t.getFormWrapper():Z,ye=Xt.getValue(ae),ce=mt(a,xe=>xe.get());return{...ye,...ce}},setData:Z=>{i(ae=>{const ye=q.getData(),ce=At(ye,Z),xe=yY(t,ce),De=t.getFormWrapper();Xt.setValue(De,xe),wo(a,(Ke,Ye)=>{ko(ce,Ye)&&Ke.set(ce[Ye])})})},setEnabled:(Z,ae)=>{w_(t,Z).each(ae?xn.enable:xn.disable)},focus:Z=>{w_(t,Z).each(ao.focus)},block:Z=>{if(!pe(Z))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");i(ae=>{Nn(ae,tR,{message:Z})})},unblock:()=>{i(Z=>{$o(Z,kw)})},showTab:Z=>{i(ae=>{const ye=t.getBody();su.getState(ye).get().exists(xe=>xe.isTabPanel())&&it.getCurrent(ye).each(xe=>{O0.showTab(xe,Z)})})},redial:Z=>{i(ae=>{const ye=t.getId(),ce=s(Z),xe=F5(ce.internalDialog.buttons,a);ae.getSystem().broadcastOn([`${DA}-${ye}`],ce),ae.getSystem().broadcastOn([`${E8}-${ye}`],ce.internalDialog),ae.getSystem().broadcastOn([`${mR}-${ye}`],ce.internalDialog),ae.getSystem().broadcastOn([`${T8}-${ye}`],{...ce.internalDialog,buttons:xe}),q.setData(ce.initialData)})},close:()=>{i(Z=>{$o(Z,my)})},toggleFullscreen:t.toggleFullscreen};return q},CY=(t,s,a)=>{const i=G("dialog"),d=t.internalDialog,g=O7(d.title,i,a),h=cn(d.size),C=De=>w_(ce,De),S=y_(h.get()).toArray(),T=(De,Ke)=>(h.set(Ke.internalDialog.size),B7(Ke.internalDialog.size,De),k.some(Ke)),O=uY({body:d.body,initialData:d.initialData},i,a,C),F=F5(d.buttons),z=N7(F),q=Er(F.length!==0,L7({buttons:F},i,a)),Z=C_(()=>xe,R7(()=>ye,a.shared.providers,s),a.shared.getSink),ae={id:i,header:g,body:O,footer:q,extraClasses:S,extraBehaviours:[su.config({channel:`${DA}-${i}`,updateState:T,initialData:t})],extraStyles:{}},ye=F7(ae,Z,a),ce=(()=>{const De=()=>{const Ye=za.getBody(ye);return it.getCurrent(Ye).getOr(Ye)},Ke=()=>{B5(ye,h.get())};return{getId:K(i),getRoot:K(ye),getBody:()=>za.getBody(ye),getFooter:()=>za.getFooter(ye),getFormWrapper:De,toggleFullscreen:Ke}})(),xe=H7(ce,s.redial,z);return{dialog:ye,instanceApi:xe}},z7=(t,s,a,i=!1,d)=>{const g=G("dialog"),h=G("dialog-label"),C=G("dialog-content"),S=t.internalDialog,T=wt=>w_(Tt,wt),O=cn(S.size),F=y_(O.get()).toArray(),z=(wt,Bn)=>(O.set(Bn.internalDialog.size),B7(Bn.internalDialog.size,wt),d(),k.some(Bn)),q=fs(fY({title:S.title,draggable:!0},g,h,a.shared.providers)),Z=fs(lY({body:S.body,initialData:S.initialData},g,C,a,i,T)),ae=F5(S.buttons),ye=N7(ae),ce=Er(ae.length!==0,fs(vY({buttons:ae},g,a))),xe=C_(()=>_t,{onBlock:wt=>{xt.block(Ye,(Bn,yn)=>{const Zo=q.getOpt(Ye).map(Vn=>ea(Vn.element));return sS(wt.message,yn,a.shared.providers,Zo)})},onUnblock:()=>{xt.unblock(Ye)},onClose:()=>s.closeWindow()},a.shared.getSink),De="tox-dialog-inline",Ke=Nr().os,Ye=p({dom:{tag:"div",classes:["tox-dialog",De,...F],attributes:{role:"dialog",...Ke.isMacOS()?{"aria-label":S.title}:{"aria-labelledby":h}}},eventOrder:{[Fg()]:[su.name(),ou.name()],[el()]:["execute-on-form"],[fd()]:["reflecting","execute-on-form"]},behaviours:Ft([_n.config({mode:"cyclic",onEscape:wt=>($o(wt,my),k.some(!0)),useTabstopAt:wt=>!Rw(wt)&&(fl(wt)!=="button"||ha(wt,"disabled")!=="disabled"),firstTabstop:1}),su.config({channel:`${DA}-${g}`,updateState:z,initialData:t}),ao.config({}),so("execute-on-form",xe.concat([Kg(Nu(),(wt,Bn)=>{_n.focusIn(wt)}),rt(k1(),(wt,Bn)=>{wt.getSystem().broadcastOn([OA],{newFocus:Bn.event.newFocus})})])),xt.config({getRoot:()=>k.some(Ye)}),co.config({}),AA({})]),components:[q.asSpec(),Z.asSpec(),...ce.map(wt=>wt.asSpec()).toArray()]}),Kt=()=>{B5(Ye,O.get())},Tt={getId:K(g),getRoot:K(Ye),getFooter:()=>ce.map(wt=>wt.get(Ye)),getBody:()=>Z.get(Ye),getFormWrapper:()=>{const wt=Z.get(Ye);return it.getCurrent(wt).getOr(wt)},toggleFullscreen:Kt},_t=H7(Tt,s.redial,ye);return{dialog:Ye,instanceApi:_t}};var N5=tinymce.util.Tools.resolve("tinymce.util.URI");const wY=t=>{const s=h=>{t.getSystem().isConnected()&&h(t)};return{block:h=>{if(!pe(h))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");s(C=>{Nn(C,tR,{message:h})})},unblock:()=>{s(h=>{$o(h,kw)})},close:()=>{s(h=>{$o(h,my)})},sendMessage:h=>{s(C=>{C.getSystem().broadcastOn([A8],h)})}}},SY=["insertContent","setContent","execCommand","close","block","unblock"],V7=t=>$e(t)&&SY.indexOf(t.mceAction)!==-1,U7=t=>!V7(t)&&$e(t)&&ko(t,"mceAction"),xY=(t,s,a)=>{switch(a.mceAction){case"insertContent":t.insertContent(a.content);break;case"setContent":t.setContent(a.content);break;case"execCommand":const i=Rt(a.ui)?a.ui:!1;t.execCommand(a.cmd,i,a.value);break;case"close":s.close();break;case"block":s.block(a.message);break;case"unblock":s.unblock();break}},EY=(t,s,a,i)=>{const d=G("dialog"),g=O7(t.title,d,i),h=dY(t),C=t.buttons.bind(De=>De.length===0?k.none():k.some(L7({buttons:De},d,i))),S=hY(()=>xe,R7(()=>ce,i.shared.providers,s)),T={...t.height.fold(()=>({}),De=>({height:De+"px","max-height":De+"px"})),...t.width.fold(()=>({}),De=>({width:De+"px","max-width":De+"px"}))},O=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],F=new N5(t.url,{base_uri:new N5(window.location.href)}),z=`${F.protocol}://${F.host}${F.port?":"+F.port:""}`,q=er(),Z=(De,Ke)=>k.some(Ke),ae=[su.config({channel:`${DA}-${d}`,updateState:Z,initialData:t}),so("messages",[or(()=>{const De=_s(zt.fromDom(window),"message",Ke=>{if(F.isSameOrigin(new N5(Ke.raw.origin))){const Ye=Ke.raw.data;V7(Ye)?xY(a,xe,Ye):U7(Ye)&&t.onMessage(xe,Ye)}});q.set(De)}),Cd(q.clear)]),ou.config({channels:{[A8]:{onReceive:(De,Ke)=>{Bs(De.element,"iframe").each(Ye=>{const Kt=Ye.dom.contentWindow;Wn(Kt)&&Kt.postMessage(Ke,z)})}}}})],ce=F7({id:d,header:g,body:h,footer:C,extraClasses:O,extraBehaviours:ae,extraStyles:T},S,i),xe=wY(ce);return{dialog:ce,instanceApi:xe}},TY=t=>{const s=t.shared;return{open:(i,d)=>{const g=()=>{za.hide(T),d()},h=fs($w({context:"any",name:"close-alert",text:"OK",primary:!0,buttonType:k.some("primary"),align:"end",enabled:!0,icon:k.none()},"cancel",t)),C=x7(),S=S7(g,s.providers),T=p(O5({lazySink:()=>s.getSink(),header:w7(C,S),body:E7(i,s.providers),footer:k.some(T7(A7([],[h.asSpec()]))),onEscape:g,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[rt(Yp,g)],eventOrder:{}}));za.show(T);const O=h.get(T);ao.focus(O)}}},AY=t=>{const s=t.shared;return{open:(i,d)=>{const g=z=>{za.hide(O),d(z)},h=fs($w({context:"any",name:"yes",text:"Yes",primary:!0,buttonType:k.some("primary"),align:"end",enabled:!0,icon:k.none()},"submit",t)),C=$w({context:"any",name:"no",text:"No",primary:!1,buttonType:k.some("secondary"),align:"end",enabled:!0,icon:k.none()},"cancel",t),S=x7(),T=S7(()=>g(!1),s.providers),O=p(O5({lazySink:()=>s.getSink(),header:w7(S,T),body:E7(i,s.providers),footer:k.some(T7(A7([],[C,h.asSpec()]))),onEscape:()=>g(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[rt(Yp,()=>g(!1)),rt(_w,()=>g(!0))],eventOrder:{}}));za.show(O);const F=h.get(O);ao.focus(F)}}},W7=(t,s)=>Mu(Mr("data",s,t)),Z7=t=>Sg(t,".tox-alert-dialog")||Sg(t,".tox-confirm-dialog"),_Y=(t,s,a,i)=>s&&a?[]:[Ar.config({contextual:{lazyContext:()=>k.some(sa(zt.fromDom(t.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition",onHide:i},modes:["top"],lazyViewport:d=>Od(t,d.element).map(h=>({bounds:$p(h),optScrollEnv:k.some({currentScrollTop:h.element.dom.scrollTop,scrollElmTop:lc(h.element).top})})).getOrThunk(()=>({bounds:Uc(),optScrollEnv:k.none()}))})],kY=t=>{const s=t.editor,a=bh(s),i=TY(t.backstages.dialog),d=AY(t.backstages.dialog),g=(Z,ae,ye)=>{if(!tn(ae)){if(ae.inline==="toolbar")return T(Z,t.backstages.popup.shared.anchors.inlineDialog(),ye,ae);if(ae.inline==="bottom")return O(Z,t.backstages.popup.shared.anchors.inlineBottomDialog(),ye,ae);if(ae.inline==="cursor")return T(Z,t.backstages.popup.shared.anchors.cursor(),ye,ae)}return S(Z,ye)},h=(Z,ae)=>C(Z,ae),C=(Z,ae)=>{const ye=ce=>{const xe=EY(ce,{closeWindow:()=>{za.hide(xe.dialog),ae(xe.instanceApi)}},s,t.backstages.dialog);return za.show(xe.dialog),xe.instanceApi};return Zp.openUrl(ye,Z)},S=(Z,ae)=>{const ye=(ce,xe,De)=>{const Ke=xe,Kt=CY({dataValidator:De,initialData:Ke,internalDialog:ce},{redial:Zp.redial,closeWindow:()=>{za.hide(Kt.dialog),ae(Kt.instanceApi)}},t.backstages.dialog);return za.show(Kt.dialog),Kt.instanceApi.setData(Ke),Kt.instanceApi};return Zp.open(ye,Z)},T=(Z,ae,ye,ce)=>{const xe=(De,Ke,Ye)=>{const Kt=W7(Ke,Ye),Tt=jn(),_t=t.backstages.popup.shared.header.isPositionedAtTop(),wt={dataValidator:Ye,initialData:Kt,internalDialog:De},Bn=()=>Tt.on(vt=>{_r.reposition(vt),(!a||!_t)&&Ar.refresh(vt)}),yn=z7(wt,{redial:Zp.redial,closeWindow:()=>{Tt.on(_r.hide),s.off("ResizeEditor",Bn),s.off("ScrollWindow",Zo),Tt.clear(),ye(yn.instanceApi)}},t.backstages.popup,ce.ariaAttrs,Bn),Zo=()=>yn.dialog.getSystem().broadcastOn([kc()],{target:yn.dialog.element}),Vn=()=>yn.dialog.getSystem().broadcastOn([Xm()],{target:yn.dialog.element}),mo=p(_r.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:ce.persistent?{event:"doNotDismissYet"}:{},..._t?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Ft([so("window-manager-inline-events",[rt(Lg(),(vt,Ut)=>{$o(yn.dialog,Yp)})]),..._Y(s,a,_t,Vn)]),isExtraPart:(vt,Ut)=>Z7(Ut)}));Tt.set(mo);const bn=()=>{const vt=s.inline?Oi():zt.fromDom(s.getContainer()),Ut=sa(vt);return k.some(Ut)};return _r.showWithinBounds(mo,y(yn.dialog),{anchor:ae},bn),(!a||!_t)&&(Ar.refresh(mo),s.on("ResizeEditor",Bn)),s.on("ScrollWindow",Zo),yn.instanceApi.setData(Kt),_n.focusIn(yn.dialog),yn.instanceApi};return Zp.open(xe,Z)},O=(Z,ae,ye,ce)=>{const xe=(De,Ke,Ye)=>{const Kt=W7(Ke,Ye),Tt=jn(),_t=t.backstages.popup.shared.header.isPositionedAtTop(),wt={dataValidator:Ye,initialData:Kt,internalDialog:De},Bn=()=>Tt.on(mo=>{_r.reposition(mo),Ar.refresh(mo)}),yn=z7(wt,{redial:Zp.redial,closeWindow:()=>{Tt.on(_r.hide),s.off("ResizeEditor ScrollWindow ElementScroll",Bn),Tt.clear(),ye(yn.instanceApi)}},t.backstages.popup,ce.ariaAttrs,Bn),Zo=p(_r.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:ce.persistent?{event:"doNotDismissYet"}:{},..._t?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Ft([so("window-manager-inline-events",[rt(Lg(),(mo,bn)=>{$o(yn.dialog,Yp)})]),Ar.config({contextual:{lazyContext:()=>k.some(sa(zt.fromDom(s.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:mo=>Od(s,mo.element).map(vt=>({bounds:$p(vt),optScrollEnv:k.some({currentScrollTop:vt.element.dom.scrollTop,scrollElmTop:lc(vt.element).top})})).getOrThunk(()=>({bounds:Uc(),optScrollEnv:k.none()}))})]),isExtraPart:(mo,bn)=>Z7(bn)}));Tt.set(Zo);const Vn=()=>t.backstages.popup.shared.getSink().toOptional().bind(mo=>{const bn=Od(s,mo.element),vt=15,Ut=bn.map(En=>$p(En)).getOr(Uc()),qn=sa(zt.fromDom(s.getContentAreaContainer())),vo=Kh(qn,Ut);return k.some(ba(vo.x,vo.y,vo.width,vo.height-vt))});return _r.showWithinBounds(Zo,y(yn.dialog),{anchor:ae},Vn),Ar.refresh(Zo),s.on("ResizeEditor ScrollWindow ElementScroll ResizeWindow",Bn),yn.instanceApi.setData(Kt),_n.focusIn(yn.dialog),yn.instanceApi};return Zp.open(xe,Z)};return{open:g,openUrl:h,alert:(Z,ae)=>{i.open(Z,ae)},close:Z=>{Z.close()},confirm:(Z,ae)=>{d.open(Z,ae)}}},j7=t=>{xT(t),fZ(t),MK(t)};var q7=()=>{bV.add("silver",t=>{j7(t);let s=()=>Uc();const{dialogs:a,popups:i,renderUI:d}=tY(t,{getPopupSinkBounds:()=>s()}),g=()=>{const O=d();return Od(t,i.getMothership().element).each(z=>{s=()=>$p(z)}),O};l8.register(t,i.backstage.shared);const h=kY({editor:t,backstages:{popup:i.backstage,dialog:a.backstage}}),C=jn(),S=()=>zV(t,{backstage:i.backstage},i.getMothership(),C),T=()=>Bs(zt.fromDom(t.getContainer()),".tox-promotion").map(O=>O.dom).getOrNull();return{renderUI:g,getWindowManagerImpl:K(h),getNotificationManagerImpl:S,getPromotionElement:T}})};q7()})()),QJ}var tQ;function Xoe(){return tQ||(tQ=1,Yoe()),JJ}Xoe();var nQ={},oQ={},sQ;function Joe(){return sQ||(sQ=1,tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"accordion-toggle":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>',accordion:'<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"ai-prompt":'<svg width="24" height="24"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.7a1 1 0 0 0-1.4 0l-9.9 10a1 1 0 0 0 0 1.3l2.1 2.1c.4.4 1 .4 1.4 0l10-9.9c.3-.3.3-1 0-1.4l-2.2-2Zm1.4 2.8-2-2-3 2.7 2.2 2.2 2.8-2.9Z"/><path d="m18.5 7.3-.7-1.5-1.5-.8 1.5-.7.7-1.5.7 1.5 1.5.7-1.5.8-.7 1.5ZM18.5 16.5l-.7-1.6-1.5-.7 1.5-.7.7-1.6.7 1.6 1.5.7-1.5.7-.7 1.6ZM9.7 7.3 9 5.8 7.5 5 9 4.3l.7-1.5.7 1.5L12 5l-1.5.8-.7 1.5Z"/></g><defs><clipPath id="a"><path d="M0 0h24v24H0z"/></clipPath></defs></svg>',ai:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5Zm6.8 11.5.5 1.2a68.3 68.3 0 0 0 .7 1.1l.4.1c.3 0 .5 0 .7-.3.2-.1.3-.3.3-.6l-.3-1-2.6-6.2a20.4 20.4 0 0 0-.5-1.3l-.5-.4-.7-.2c-.2 0-.5 0-.6.2-.2 0-.4.2-.5.4l-.3.6-.3.7L5.7 15l-.2.6-.1.4c0 .3 0 .5.3.7l.6.2c.3 0 .5 0 .7-.2l.4-1 .5-1.2h3.9ZM9.8 9l1.5 4h-3l1.5-4Zm5.6-.9v7.6c0 .4 0 .7.2 1l.7.2c.3 0 .6 0 .8-.3l.2-.9V8.1c0-.4 0-.7-.2-.9a1 1 0 0 0-.8-.3c-.2 0-.5.1-.7.3l-.2 1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12.7 18.3a1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v1a1 1 0 0 0 .3.7 1 1 0 0 0 .7.3 1 1 0 0 0 .7-.3 1 1 0 0 0 .3-.7v-1a1 1 0 0 0-.3-.7ZM11.3 5.7a1 1 0 0 0 .7.3 1 1 0 0 0 .7-.3A1 1 0 0 0 13 5V4a1 1 0 0 0-.3-.7A1 1 0 0 0 12 3a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v1a1 1 0 0 0 .3.7Zm9.4 5.6a1 1 0 0 0-.7-.3h-1a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 .3.7 1 1 0 0 0 .7.3h1a1 1 0 0 0 .7-.3 1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7Zm-15 1.4A1 1 0 0 0 6 12a1 1 0 0 0-.3-.7A1 1 0 0 0 5 11H4a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 .3.7 1 1 0 0 0 .7.3h1a1 1 0 0 0 .7-.3Zm13 4.6-.7-.8a1 1 0 0 0-.8-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 .3.8l.7.7a1 1 0 0 0 .7.3 1 1 0 0 0 .8-.3 1 1 0 0 0 .3-.8 1 1 0 0 0-.3-.7ZM5.3 6.7l.7.8a1 1 0 0 0 .8.3 1 1 0 0 0 .7-.3 1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.8l-.7-.7A1 1 0 0 0 6 5a1 1 0 0 0-.8.3 1 1 0 0 0-.3.8 1 1 0 0 0 .3.6Zm12 1a1 1 0 0 0 .7-.2l.7-.7A1 1 0 0 0 19 6a1 1 0 0 0-.3-.8 1 1 0 0 0-.8-.3 1 1 0 0 0-.7.3l-.7.7a1 1 0 0 0-.3.8 1 1 0 0 0 .3.7 1 1 0 0 0 .7.2ZM6.7 16.4a1 1 0 0 0-.8.2l-.7.7a1 1 0 0 0-.3.7 1 1 0 0 0 .3.8 1 1 0 0 0 .8.3 1 1 0 0 0 .7-.3l.7-.7a1 1 0 0 0 .3-.8 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3Z"/><path fill-rule="evenodd" d="M13.6 8.3A4 4 0 0 0 12 8a4 4 0 0 0-1.6.3A4 4 0 0 0 9 9.5a4 4 0 0 0-.6 1A4 4 0 0 0 8 12c0 .6.1 1 .3 1.6a4 4 0 0 0 2.1 2 4 4 0 0 0 1.6.4 4 4 0 0 0 1.6-.3 4 4 0 0 0 2-2.1A4 4 0 0 0 16 12a4 4 0 0 0-.3-1.6 4 4 0 0 0-2.1-2ZM14 12a2 2 0 1 1-4 0 2 2 0 0 1 4 0Z"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',"checkmark-filled":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 2a10 10 0 1 1 0 20 10 10 0 0 1 0-20Zm4.8 5a1 1 0 0 0-1.4.3l-5.4 8-2-2.1a1 1 0 1 0-1.5 1.4l3 3a1 1 0 0 0 1.5-.2l6-9a1 1 0 0 0-.2-1.4Z"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',"close-filled":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 2a10 10 0 1 1 0 20 10 10 0 0 1 0-20Zm4.7 5.3a1 1 0 0 0-1.3 0L12 10.6 8.6 7.3a1 1 0 0 0-1.3 1.3l3.3 3.4-3.3 3.4a1 1 0 0 0 1.3 1.3l3.4-3.3 3.4 3.3a1 1 0 0 0 1.3-1.3L13.4 12l3.3-3.4a1 1 0 0 0 0-1.3Z"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24" class="color-swatch-remove-color"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 0 1 19.4 9c.4 1 .6 2 .6 3.1s-.2 2.1-.6 3.1a8 8 0 0 1-1.7 2.6 8 8 0 0 1-2.6 1.7 7.8 7.8 0 0 1-3.1.6 7.8 7.8 0 0 1-3.1-.6 8 8 0 0 1-2.6-1.7A8 8 0 0 1 4.6 15 7.8 7.8 0 0 1 4 12c0-1.1.2-2.1.6-3.1a8 8 0 0 1 1.7-2.6A8 8 0 0 1 9 4.6 7.8 7.8 0 0 1 12 4Zm-6 8a6 6 0 0 0 1.8 4.2 6 6 0 0 0 1.9 1.3 5.8 5.8 0 0 0 2.3.5V6c-.8 0-1.6.2-2.3.5a6 6 0 0 0-2 1.3 6 6 0 0 0-1.2 1.9A5.8 5.8 0 0 0 6 12Z"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-gear-properties":'<svg height="24" width="24"><path d="M17.3 14.5a7.1 7.1 0 0 1 1.2.6l1.5-.5 1 1.8-1.2 1V18.7l1.2 1-1 1.6-1.5-.4a4.5 4.5 0 0 1-.6.3 7.1 7.1 0 0 1-.6.3L17 23h-2l-.3-1.5a7.4 7.4 0 0 1-.6-.3 4.5 4.5 0 0 1-.6-.3l-1.5.5-1-1.8 1.2-1a3.9 3.9 0 0 1 0-.6v-.7l-1.2-1 1-1.6 1.5.4a4.5 4.5 0 0 1 1.2-.6L15 13h2zM16 16a2 2 0 0 0-1.5.6A1.9 1.9 0 0 0 14 18c0 .6.2 1 .6 1.4s1 .6 1.5.6 1-.2 1.5-.6.6-.8.6-1.4-.2-1-.6-1.4A2 2 0 0 0 16 16z" fill-rule="evenodd"/><path d="M19 7.6V12h-2V9h-4V5H7v14h3v2H7a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h7.4z"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',feedback:'<svg width="24" height="24"><path fill-rule="evenodd" d="M16 6c1 0 2 1 2 2v5c0 1-1 2-2 2h-3l-4 3v-3H8c-1 0-2-1-2-2V8c0-1 1-2 2-2h8Zm-7 5v1h4v-1H9Zm0-2v1h6V9H9Z"/></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-code":'<svg width="24" height="24"><path d="m10 22 2-7H6l9-13h2l-2 8h7L12 22h-2ZM6 2h7l-1.4 2H6V2Zm4.2 4H4v2h4.8l1.4-2Zm-2.7 4H2v2h4l1.5-2Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg height="24" width="24"><path d="M11.5 16.3a.7.7 0 1 0 1.4 0V14l2.7-6a.7.7 0 1 0-1.2-.6l-2.2 5-2.3-4.9C9.6 7 8.7 7 8 7.2v1.1c.8-.2.9 0 1.2 1l2.3 4.7z"/><path d="M4 3h16a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1zm1 2h14v14H5z" fill-rule="evenodd"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg height="24" width="24"><path d="M5 4 3.6 5.4l3.9 4C6.6 10.7 6 12.3 6 14a6 6 0 0 0 10.3 4.2l1.9 1.8 1.4-1.4z" fill-rule="evenodd"/><path d="M13.4 8.4c.9 1 1.6 2.1 2 3.2l2.6 2.6V14c0-5-6-10-6-10s-1 .8-2.1 2l1.4 1.5.7-.7 1.4 1.6z"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg height="48" width="48"><path d="M8 14a3 3 0 1 0 6 0 3 3 0 0 0-6 0zm5 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0zM8 24a3 3 0 1 0 6 0 3 3 0 0 0-6 0zm5 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0zM8 34a3 3 0 1 0 6 0 3 3 0 0 0-6 0zm5 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0z" fill-rule="evenodd"/><path d="M18 12h22v4H18zm0 10h22v4H18zm0 10h22v4H18z" opacity=".2"/></svg>',"list-bull-default":'<svg height="48" width="48"><path d="M14 14a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/><path d="M12 24a3 3 0 1 0 6 0 3 3 0 0 0-6 0zm5 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0z" fill-rule="evenodd"/><path d="M16 31h6v6h-6z"/><path d="M16 31h6v6h-6z"/><path d="M18 12h22v4H18zm4 10h18v4H22zm4 10h14v4H26z" opacity=".2"/></svg>',"list-bull-disc":'<svg height="48" width="48"><path d="M14 14a3 3 0 1 1-6 0 3 3 0 0 1 6 0zm0 10a3 3 0 1 1-6 0 3 3 0 0 1 6 0zm0 10a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/><path d="M18 12h22v4H18zm0 10h22v4H18zm0 10h22v4H18z" opacity=".2"/></svg>',"list-bull-square":'<svg height="48" width="48"><path d="M8 21h6v6H8zm0 10h6v6H8zm0-20h6v6H8z"/><path d="M18 12h22v4H18zm0 10h22v4H18zm0 10h22v4H18z" opacity=".2"/></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',"math-equation":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 4.8c.1-.5.5-.8 1-.8h10a1 1 0 1 1 0 2h-9.2L8.3 19.2a1 1 0 0 1-1.7.4l-3.4-4.2a1 1 0 0 1 1.6-1.2l2 2.5L9 4.8Zm9.7 5.5c.4.4.4 1 0 1.4L17 13.5l1.8 1.8a1 1 0 1 1-1.4 1.4L15.5 15l-1.8 1.8a1 1 0 0 1-1.4-1.4l1.8-1.8-1.8-1.8a1 1 0 0 1 1.4-1.4l1.8 1.8 1.8-1.8a1 1 0 0 1 1.4 0Z"/></svg>',mentions:'<svg height="24" width="24"><path d="M12 21a8.8 8.8 0 0 1-3.5-.7 9 9 0 0 1-2.9-2 9 9 0 0 1-1.9-2.8A8.8 8.8 0 0 1 3 12c0-1.3.2-2.4.7-3.5a9 9 0 0 1 4.8-4.8A8.8 8.8 0 0 1 12 3c1.3 0 2.4.2 3.5.7a9.1 9.1 0 0 1 4.8 4.8A8.7 8.7 0 0 1 21 12v1.4a3 3 0 0 1-.9 2.2 3 3 0 0 1-2.2.9c-.5 0-1-.1-1.5-.4a3.8 3.8 0 0 1-1.1-1 4.8 4.8 0 0 1-1.5 1 4.3 4.3 0 0 1-1.8.4c-1.2 0-2.3-.4-3.2-1.3-.9-.9-1.3-2-1.3-3.2s.4-2.3 1.3-3.2c.9-.9 2-1.3 3.2-1.3s2.3.4 3.2 1.3c.9.9 1.3 2 1.3 3.2v1.4c0 .4.1.7.4 1 .3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1V12c0-2-.7-3.8-2.1-5.2S14 4.7 12 4.7s-3.8.7-5.2 2.1S4.7 10 4.7 12s.7 3.8 2.1 5.2 3.2 2.1 5.2 2.1h4.5V21zm0-6.2c.8 0 1.4-.3 2-.8a2.7 2.7 0 0 0 .8-2c0-.8-.3-1.4-.8-2a2.7 2.7 0 0 0-2-.8c-.8 0-1.4.3-2 .8a2.7 2.7 0 0 0-.8 2c0 .8.3 1.4.8 2a2.7 2.7 0 0 0 2 .8z"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"export-pdf":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H7v3H5V5c0-1.1.9-2 2-2Z"/><path d="M2.6 15.2v-1.9h1c.6 0 1-.2 1.4-.5.3-.3.5-.7.5-1.2s-.2-.9-.5-1.2a2 2 0 0 0-1.3-.4H1v5.2h1.6Zm.4-3h-.4v-1.1h.5l.6.1.2.5c0 .1 0 .3-.2.4l-.7.1Zm5.7 3 1-.1c.3 0 .5-.2.7-.4l.5-.8c.2-.3.2-.7.2-1.3v-1l-.5-.8c-.2-.3-.4-.5-.7-.6L8.7 10H6.3v5.2h2.4Zm-.4-1.1H8v-3h.4c.5 0 .8.2 1 .4l.2 1.1-.1 1-.3.3-.8.2Zm5.3 1.2V13h2v-1h-2v-1H16V10h-4v5.2h1.6Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"export-word":'<svg width="24" height="24"><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H5c0-1.1.9-2 2-2ZM15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"import-word":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V15h-2V9h-4V5H5c0-1.1.9-2 2-2Z"/><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M11.4 18.2a1 1 0 0 0 1.2 1.6l1.4-1V22a1 1 0 1 0 2 0v-3.1l1.4 1a1 1 0 0 0 1.2-1.7L15 15.8l-3.6 2.4Z"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"revision-history":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',send:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.3 22 7-18.3-18.3 7L9 15l4.3 7ZM18 6.8l-.7-.7L9.4 14l.7.7L18 6.8Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path fill-rule="evenodd" d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',"suggestededits-badge":'<svg height="24" width="24"><path d="M11 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V9.7a6 6 0 0 1-2 .3v9H7V5h4a6 6 0 0 1 0-2z"/><path d="M15 13v-2h-4v2zm-3 2H9v2h3zm-1-8H9v2h2zm4 10v-2h-2v2z"/><path d="M21 4a4 4 0 1 1-8 0 4 4 0 0 1 8 0z" class="tox-icon--badge"/></svg>',suggestededits:'<svg width="24" height="24"><path d="M7 3h7.4L19 7.6V19a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2Zm0 16h10V9h-3V5H7v14Z" clip-rule="evenodd"/><path d="M9 7h2v2H9V7Zm2 4h4v2h-4v-2Zm-2 4h3v2H9v-2Z"/><path d="M9 7h2v2H9V7Zm4 8h2v2h-2v-2Z"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',"add-file":'<svg height="24" width="24"><path d="M2 7h2V4h3V2H4a2 2 0 0 0-2 2zm20 0h-2V4h-3V2h3a2 2 0 0 1 2 2zm0 2h-2v6h2zm0 8h-2v3h-3v2h3a2 2 0 0 0 2-2zM2 9h2v6H2zm0 8h2v3h3v2H4a2 2 0 0 1-2-2zm7 5v-2h6v2zm6-20v2H9V2zM6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M2 7h2V4h3V2H4a2 2 0 0 0-2 2zm20 0h-2V4h-3V2h3a2 2 0 0 1 2 2zm0 2h-2v6h2zm0 8h-2v3h-3v2h3a2 2 0 0 0 2-2zM2 9h2v6H2zm0 8h2v3h3v2H4a2 2 0 0 1-2-2zm7 5v-2h6v2zm6-20v2H9V2zM6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/></svg>',adjustments:'<svg width="24" height="24"><path d="M16 11a3 3 0 1 1 2.8-4H21v2h-2.2a3 3 0 0 1-2.8 2Zm0-2a1 1 0 1 1 0-2 1 1 0 0 1 0 2ZM3 9h8V7H3v2Zm5 10a3 3 0 1 0-2.8-4H3v2h2.2A3 3 0 0 0 8 19Zm0-2a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm13 0h-8v-2h8v2Z"/></svg>',"alt-text":'<svg width="24" height="24"><path d="M3 20a2 2 0 0 1-1.4-.6A2 2 0 0 1 1 18V6c0-.6.2-1 .6-1.4A2 2 0 0 1 3 4h18c.6 0 1 .2 1.4.6.4.4.6.9.6 1.4v12c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6H3Zm0-2h18V6H3v12Zm1.5-3H6v-1.5h1.5V15H9v-5a1 1 0 0 0-.3-.7A1 1 0 0 0 8 9H5.5a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v5ZM6 12v-1.5h1.5V12H6Z"/><path d="M11 15V9h1.3v4.5h2V15H11Zm5.8-4.5V15h1.4v-4.5h1.3V9h-4v1.5h1.3Z"/></svg>',"auto-image-enhancement":'<svg width="24" height="24"><path d="M7.7 10.6a5.8 5.8 0 0 0 5.7 5.7A5.8 5.8 0 0 0 7.7 22 5.8 5.8 0 0 0 2 16.3a5.8 5.8 0 0 0 5.7-5.7ZM15.5 2c.3 3 3.3 6 6.5 6.4-3.2.5-6.2 3.4-6.5 6.5-.3-3.4-3-6-6.4-6.5 3.3-.5 6.1-3 6.4-6.4Z"/></svg>',blur:'<svg width="24" height="24"><path d="M19.3 9.3a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7A1 1 0 0 0 20 9a1 1 0 0 0-.7.3Zm-16 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3A1 1 0 0 0 5 10a1 1 0 0 0-.3-.7A1 1 0 0 0 4 9a1 1 0 0 0-.7.3Zm16 6a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3Zm-16 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3A1 1 0 0 0 5 16a1 1 0 0 0-.3-.7A1 1 0 0 0 4 15a1 1 0 0 0-.7.3Zm5-11A1 1 0 0 0 8 5a1 1 0 0 0 1 1c.3 0 .5-.1.7-.3A1 1 0 0 0 10 5a1 1 0 0 0-.3-.7A1 1 0 0 0 9 4a1 1 0 0 0-.7.3Zm6 0a1 1 0 0 0-.3.7 1 1 0 0 0 1 1c.3 0 .5-.1.7-.3A1 1 0 0 0 16 5a1 1 0 0 0-.3-.7A1 1 0 0 0 15 4a1 1 0 0 0-.7.3Zm-6 16a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7A1 1 0 0 0 9 20a1 1 0 0 0-.7.3Zm6 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3ZM7.6 8.6A2 2 0 0 0 7 10c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 9 8a2 2 0 0 0-1.4.6Zm0 6A2 2 0 0 0 7 16c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 9 14a2 2 0 0 0-1.4.6Zm6-6A2 2 0 0 0 13 10c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 15 8a2 2 0 0 0-1.4.6Zm0 6A2 2 0 0 0 13 16c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 15 14a2 2 0 0 0-1.4.6Z"/></svg>',box:'<svg width="24" height="24"><path d="M3.8 7a1 1 0 0 0-.7.6l-.1 3V13.8a3.5 3.5 0 0 0 4 2.7c.8-.2 1.4-.5 2-1l.3-.3.3.2c.7.7 1.4 1 2.4 1.1 1.2 0 2.4-.6 3-1.6.9-1.2.8-2.8 0-4a3.7 3.7 0 0 0-2-1.2c-.4-.1-1.2-.1-1.6 0a3.4 3.4 0 0 0-1.7 1l-.3.2-.2-.1c-.4-.5-1.2-1-2-1.1-.6-.2-1.5 0-2 .2H5V9c0-1.3 0-1.3-.3-1.6a1 1 0 0 0-1-.3Zm12 2.6c-.3.2-.5.4-.6.8v.6l.9 1 .7 1v.1l-.8 1-.7 1a1 1 0 0 0 0 .7 1 1 0 0 0 1.3.6c.2 0 .3-.2 1-1l.5-.7.6.8.7.8c.4.3 1 .3 1.3 0l.2-.3a1 1 0 0 0 0-.8l-.8-1.2-.7-1a26 26 0 0 0 1.5-2 .8.8 0 0 0 .1-.4c0-.4-.1-.7-.5-.9H20c-.4 0-.5 0-1.2.8l-.7.8-.6-.7-.7-.9a1 1 0 0 0-1 0Zm-9 2 .4.1c.3.1.6.5.7.8l.1.6v.6c-.6 1-2 1.2-2.7.3-.3-.3-.3-.5-.3-1v-.5c.3-.5.7-.8 1.1-1a1.5 1.5 0 0 1 .7 0Zm5.7 0c.4 0 .8.4 1 .8l.2.6-.1.7c-.5.9-1.6 1.1-2.4.6a1.4 1.4 0 0 1-.6-1.1 1.4 1.4 0 0 1 .5-1.2 1.5 1.5 0 0 1 1.4-.4Z"/></svg>',camera:'<svg height="24" width="24"><g clip-rule="evenodd" fill-rule="evenodd"><path d="M10 5.4a1 1 0 0 1 .8-.4h4.4a1 1 0 0 1 .8.4l1.2 1.8h2.3A2.5 2.5 0 0 1 22 9.6v8a2.5 2.5 0 0 1-2.5 2.5h-13A2.5 2.5 0 0 1 4 17.6v-8a2.5 2.5 0 0 1 2.5-2.4h2.3zM11.4 7l-1.2 1.7a1 1 0 0 1-.8.5h-3a.5.5 0 0 0-.4.4v8a.5.5 0 0 0 .5.5h13a.5.5 0 0 0 .5-.5v-8a.5.5 0 0 0-.5-.4h-2.9a1 1 0 0 1-.8-.5L14.6 7z"/><path d="M13 11.4a2 2 0 1 0 0 3.8 2 2 0 0 0 0-3.8zm-4 1.9a4 4 0 1 1 8 0 4 4 0 0 1-8 0z"/></g></svg>',caption:'<svg height="24" width="24"><path d="M6 16h8v-2H6zm10 0h2v-2h-2zM4 20a2 2 0 0 1-1.5-.6A2 2 0 0 1 2 18V6c0-.6.2-1 .6-1.4A2 2 0 0 1 4 4h16c.6 0 1 .2 1.4.6.4.4.6.9.6 1.4v12c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6zm0-2h16V6H4z"/></svg>',dropbox:'<svg height="24" width="24"><path clip-rule="evenodd" d="m6.4 9.3-3-2a1 1 0 0 1 0-1.6l4-2.5a1 1 0 0 1 1 0L12 5.5l3.6-2.3a1 1 0 0 1 1 0l4 2.5a1 1 0 0 1 0 1.7l-3 1.9 3 1.9a1 1 0 0 1 0 1.6l-2.9 1.9V16c0 .3-.1.6-.4.8l-4.5 3a1 1 0 0 1-1.2 0l-4.4-3a1 1 0 0 1-.5-.9v-1l-3.2-2.2a1 1 0 0 1 0-1.6zm3 0L12 7.5l2.6 1.8L12 11zM8.9 15v.4l3.3 2.3 3.4-2.3v-.2L12 13l-3.1 2zm-1-10-2 1.4 2 1.3 2-1.3zm8.2 0-2 1.4 2 1.3 2-1.3zm-2 6.9 2-1.3 2 1.3-2 1.3-2-1.3zm-8.3 0 2-1.3L10 12l-2 1.3-2-1.3z" fill-rule="evenodd"/></svg>',evernote:'<svg width="24" height="24"><path fill-rule="evenodd" d="m9.5 3-.3.1-2.6 2.6C3.8 8.5 4 8.2 4 8.7c0 1.3.3 3 .6 4.3.5 2 1.1 3.2 2 3.7l1.2.3c1 .2 1.5.2 2.2.2 1.3 0 1.7 0 2.2-.4.3-.2.3-.4.4-1a38.4 38.4 0 0 1 .3-.4l.3.1 1.8.1h1.6v-1.8H14l-.1-.2a6.8 6.8 0 0 1-.5-1c-.2-.4-.3-.6-.5-.7a.8.8 0 0 0-.5-.1.9.9 0 0 0-.8.5l-.4 1.6-.3 1.5H9.4l-2-.3a1 1 0 0 1-.1-.2A10.1 10.1 0 0 1 6 9.7v-.2h4l.5-.5V5H12c.4.2.7.7.8 1.1a1 1 0 0 0 .2.6c.2.2.3.2 1 .3 1.2 0 2 .2 2.5.6.4.2.8.7 1 1.2.3 1.2.5 4 .3 6.4 0 1.8-.4 3.4-.8 4h-.7a8 8 0 0 1-.8 0c-.2 0-.3-.3-.2-.5a.5.5 0 0 1 .4-.3h.9v-1.8H16c-.7 0-.9 0-1.2.2-.9.4-1.4 1.2-1.4 2.1l.1.4.1.2a1 1 0 0 1 .1.2c.3.7.8 1.2 1.4 1.3l1.2.1h1.2a2 2 0 0 0 1-.8 9 9 0 0 0 1.1-4.3c.2-3 0-6.3-.4-7.7A4.3 4.3 0 0 0 16 5.3a7 7 0 0 0-1.3-.2 7.2 7.2 0 0 1-.4 0 5.5 5.5 0 0 1 0-.3c-.2-.5-.6-1-1.2-1.4a3 3 0 0 0-.5-.2c-.4-.2-.5-.2-1.8-.2a26.5 26.5 0 0 0-1.3 0Zm-.8 4v.7H7.2l.7-.8.8-.7v.7Zm7 3.5c-.4 0-.7.5-.9 1v.7h.3c.7 0 1.1.2 1.5.6l.3.2.3-.6V11a1 1 0 0 0-.6-.4 2 2 0 0 0-.8 0Z" clip-rule="evenodd"/></svg>',exposure:'<svg width="24" height="24"><path d="M5 21a2 2 0 0 1-1.4-.6A2 2 0 0 1 3 19V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5 3h14c.6 0 1 .2 1.4.6.4.4.6.8.6 1.4v14c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6H5Zm0-2h14V5L5 19Zm9.5-1v-2h-2v-1.5h2v-2H16v2h2V16h-2v2h-1.5ZM6 8.5h5V7H6v1.5Z"/></svg>',fb:'<svg width="24" height="24"><path fill-rule="evenodd" d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-11 6.7V14H8.1v-2.5h2v-1C10 8.2 11.5 7 12.8 7H16v2.5h-2.4c-.8 0-1 .7-1 1.3v.7h3.2l-1 2.5h-2v5a7 7 0 1 0-2.8-.2Z" clip-rule="evenodd"/></svg>',flickr:'<svg width="24" height="24"><path d="M8.2 15.3c1.7 0 3.1-1.4 3.1-3.1A3.2 3.2 0 0 0 8.1 9 3.2 3.2 0 0 0 5 12.2c0 1.7 1.4 3 3.2 3Zm7.6 0c1.7 0 3.2-1.4 3.2-3.1a3.2 3.2 0 0 0-6.3 0c0 1.7 1.4 3 3.1 3Z"/></svg>',folder:'<svg width="24" height="24"><path fill-rule="evenodd" d="M5.6 6a.6.6 0 0 0-.6.6v11.2a.6.6 0 0 0 .6.6h12.8a.6.6 0 0 0 .6-.6V9a.6.6 0 0 0-.6-.6h-7.2a1 1 0 0 1-.8-.4L9 6H5.6ZM3.8 4.8A2.6 2.6 0 0 1 5.6 4h4a1 1 0 0 1 .8.4l1.3 2h6.7A2.6 2.6 0 0 1 21 9v8.8a2.6 2.6 0 0 1-2.6 2.6H5.6A2.6 2.6 0 0 1 3 17.8V6.6c0-.7.3-1.4.8-1.8Z" clip-rule="evenodd"/></svg>',"google-drive":'<svg height="24" width="24"><path clip-rule="evenodd" d="M8.7 4.5a1 1 0 0 1 .9-.5h4.8a1 1 0 0 1 .9.5l5.6 9.7a1 1 0 0 1 0 1l-2.4 4.2a1 1 0 0 1-.9.5H6.4a1 1 0 0 1-.9-.5l-2.4-4.2a1 1 0 0 1 0-1zM10.2 6l-4.5 7.7h2.5L12.7 6h-2.5zm4.2 1 4.4 7.7-1.2 2.2-4.4-7.7zM12 11.2l-1.5 2.5h3zm2.6 4.5H5.7L7 17.9h8.9l-1.3-2.2z" fill-rule="evenodd"/></svg>',"google-photos":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12.4 3c-.8 0-1.4.7-1.4 1.4v3.2a5 5 0 0 0-8 4c0 .8.6 1.4 1.4 1.4h3.2a5 5 0 0 0-1 3 5 5 0 0 0 5 5c.8 0 1.4-.6 1.4-1.4v-3.2a5 5 0 0 0 8-4c0-.8-.7-1.4-1.4-1.4h-3.2a5 5 0 0 0-4-8Zm.6 8V5a3 3 0 0 1 2.4 3 3 3 0 0 1-2.4 3Zm-2 0H5a3 3 0 0 1 3-2.4 3 3 0 0 1 3 2.4Zm2 2a3 3 0 0 0 3 2.4 3 3 0 0 0 3-2.4h-6Zm-4.4 3a3 3 0 0 1 2.4-3v6a3 3 0 0 1-2.4-3Z" clip-rule="evenodd"/></svg>',grayscale:'<svg height="24" width="24"><path d="M3 5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2zm12.4 0H19v3.6zm-2.8 0h-2.2l8.6 8.6v-2.2zm-5 0H5l14 14v-2.6z" fill-rule="evenodd"/></svg>',huddle:'<svg height="24" width="24"><path d="M10.3 5.6V8h.8v-2l3.5 2 4.3-2.5L14.6 3l-4.3 2.6zM14.6 8v5.2l4.3-2.6V5.6L14.6 8zM6 13.3v2.5h.9v-2l3.4 2 4.3-2.5-4.3-2.6zm4.3 2.6V21l4.3-2.6v-5.1l-4.3 2.6z"/></svg>',"image-decorative":'<svg width="24" height="24"><path d="M12 10c.3 0 .5-.1.7-.3A1 1 0 0 0 13 9a1 1 0 0 0-.3-.7A1 1 0 0 0 12 8a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 1 1Zm0 6a3 3 0 0 1-1.8-.5A3 3 0 0 1 9.1 14a2 2 0 0 0-.2 0 3 3 0 0 1-2.5-1 3 3 0 0 1-.9-2.2A3 3 0 0 1 6.2 9a3.4 3.4 0 0 1-.5-1 3 3 0 0 1-.2-1 3 3 0 0 1 1-2.2A3 3 0 0 1 8.8 4H9a3 3 0 0 1 1.1-1.4A3 3 0 0 1 12 2a3 3 0 0 1 1.8.5c.5.4.9.9 1.1 1.5h.2a3 3 0 0 1 2.5.8 3 3 0 0 1 .9 2.3c0 .3 0 .7-.2 1a2.8 2.8 0 0 1-.5.9l.5 1 .2 1a3 3 0 0 1-1 2.2 3 3 0 0 1-2.4.9 1.8 1.8 0 0 0-.2 0 3 3 0 0 1-1.1 1.4 3 3 0 0 1-1.8.5Zm0 7a8.7 8.7 0 0 1 .7-3.5 9.2 9.2 0 0 1 2-2.8 9.2 9.2 0 0 1 2.8-2A8.6 8.6 0 0 1 21 14a8.6 8.6 0 0 1-.7 3.5 9.2 9.2 0 0 1-2 2.8 9.2 9.2 0 0 1-2.8 2 8.6 8.6 0 0 1-3.5.7Zm2.5-2.5a6.8 6.8 0 0 0 2.4-1.5 6.8 6.8 0 0 0 1.7-2.6c-1 .4-1.8 1-2.6 1.7a6.8 6.8 0 0 0-1.5 2.4ZM12 23a8.6 8.6 0 0 0-.7-3.5 9.2 9.2 0 0 0-2-2.9 9.2 9.2 0 0 0-2.8-1.9A8.6 8.6 0 0 0 3 14a8.7 8.7 0 0 0 .7 3.5 9.2 9.2 0 0 0 2 2.9 9.2 9.2 0 0 0 2.8 1.9 8.6 8.6 0 0 0 3.5.7Zm-2.5-2.5A6.8 6.8 0 0 1 7.2 19a6.8 6.8 0 0 1-1.6-2.6c.9.4 1.7 1 2.5 1.7a6.8 6.8 0 0 1 1.6 2.4Zm5.9-8.4c.3 0 .5-.1.8-.4.2-.2.3-.5.3-.8 0-.2 0-.4-.2-.6a1.3 1.3 0 0 0-.5-.4l-.8-.4a3 3 0 0 1-.2.5 3.8 3.8 0 0 1-.2.5 2.5 2.5 0 0 1-.3.4 4 4 0 0 1-.4.4l.8.6a.8.8 0 0 0 .3.1h.4ZM15 8.5l.8-.4.5-.4.2-.6a1.1 1.1 0 0 0-.3-.8 1 1 0 0 0-.8-.4 1.1 1.1 0 0 0-.7.2l-.8.6.4.4.3.4a3.9 3.9 0 0 1 .4 1Zm-4-2.3a2.7 2.7 0 0 1 1-.2 2.7 2.7 0 0 1 1 .2l.2-1.1c0-.3-.1-.6-.4-.8A1.2 1.2 0 0 0 12 4c-.3 0-.6.1-.8.3-.3.2-.4.5-.3.8v1.1Zm1 7.8c.3 0 .6-.1.8-.3.3-.2.4-.5.3-.8v-1.1a2.7 2.7 0 0 1-1.1.2 2.7 2.7 0 0 1-1-.2l-.2 1.1c0 .3.1.6.4.8.2.2.5.3.8.3ZM9 8.5a3 3 0 0 1 .4-1l.3-.4.4-.4-.8-.6A.9.9 0 0 0 9 6a1.2 1.2 0 0 0-.3 0c-.4 0-.6 0-.9.3a1.1 1.1 0 0 0-.3.8c0 .2 0 .4.2.6l.5.4.9.4Zm-.3 3.6H9l.3-.2.8-.6a5.5 5.5 0 0 1-.4-.4 2.1 2.1 0 0 1-.3-.4 3.8 3.8 0 0 1-.2-.5 3 3 0 0 1-.1-.5l-1 .4-.4.4a1.1 1.1 0 0 0-.2.6c0 .3.2.6.4.8.2.2.4.4.7.4Z"/></svg>',"image-enhancements":'<svg height="24" width="24"><path d="M5.3 21a2 2 0 0 1-1.5-.6 2 2 0 0 1-.6-1.4V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5.2 3H13v2H5.2v14h14v-8h2v8c0 .6-.1 1-.5 1.4a2 2 0 0 1-1.4.6z"/><path d="M11 9a4 4 0 0 0 4 4 4 4 0 0 0-4 4 4 4 0 0 0-4-4 4 4 0 0 0 4-4zm5.5-6c.2 2.1 2.2 4.1 4.5 4.5-2.3.4-4.3 2.4-4.5 4.5A5.2 5.2 0 0 0 12 7.5 5.2 5.2 0 0 0 16.5 3z"/></svg>',instagram:'<svg height="24" width="24"><path clip-rule="evenodd" d="M10.1 9a4 4 0 1 1 4.4 6.6A4 4 0 0 1 10.1 9zm2.2 1.3a2 2 0 1 0 0 4 2 2 0 0 0 0-4z" fill-rule="evenodd"/><path d="M16 9.3a1.3 1.3 0 1 0 0-2.6 1.3 1.3 0 0 0 0 2.6z"/><path clip-rule="evenodd" d="M3 6a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v12a3 3 0 0 1-3 3H6a3 3 0 0 1-3-3zm3-1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1z" fill-rule="evenodd"/></svg>',onedrive:'<svg height="24" width="24"><path d="M4 13.7h1zm16 .7h-1zm-11.7-4A4.4 4.4 0 0 1 12.1 8V6a6.4 6.4 0 0 0-5.6 3.4l1.8 1zM12.1 8c2 0 3.6 1.4 4 2.8l2-.5A6.3 6.3 0 0 0 12 6v2zm8.1 6.8-9.8-5.5-1 1.8 9.8 5.5 1-1.8zm-9.8-5.5A5 5 0 0 0 3 13.7h2A3 3 0 0 1 9.5 11l1-1.8zM3 13.7a5 5 0 0 0 1 2.8l1.5-1.1a3 3 0 0 1-.5-1.7zm15.8 1.6a2.3 2.3 0 0 1-2 1.4v2a4.3 4.3 0 0 0 3.9-2.6zm-2 1.4H8v2h8.7zm-8.8 0a3 3 0 0 1-2.5-1.3L4 16.5a5 5 0 0 0 4 2.2v-2zm12.7-.6c.2-.6.3-1.1.3-1.7h-2c0 .3 0 .6-.2.9zm.3-1.7c0-3-3.1-5.1-6-4l.8 1.9a2.3 2.3 0 0 1 3.2 2h2zm-6-4L4.4 15l.8 1.9 10.7-4.6-.7-1.8z"/></svg>',"photo-filter":'<svg height="24" width="24"><path d="M4.4 21c-.3 0-.6-.2-.9-.5-.3-.3-.4-.6-.5-.9L19.6 3c.3 0 .6.3.9.5l.5.9zM3 14.7v-2.8L11.9 3h2.8zM3 7V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5 3h2zm14 14 4-4v2c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6zm-7.7 0L21 9.3v2.8L12 21z"/></svg>',"revert-changes":'<svg height="24" width="24"><path d="m8.9 18.8.4 3.2H13v-2h-2v-2.6a4.6 4.6 0 0 1-1.6-.6 5.9 5.9 0 0 1-1.3-1l-2.5 1-1-1.7 2.2-1.6a4 4 0 0 1-.2-.7 5.9 5.9 0 0 1 0-.8v-.8l.2-.8-2.2-1.6 1-1.7 2.5 1a6 6 0 0 1 1.2-.9l1.4-.6.4-2.6h2l.3 2.6A5.6 5.6 0 0 1 16 8.2l2.5-1 1 1.6-2.2 1.7.2.7v.8a5 5 0 0 1 0 1h2a2.6 2.6 0 0 0 0-.5V11.3l2.6-2-2.8-4.7-3 1.3a8.2 8.2 0 0 0-.5-.4 3.8 3.8 0 0 0-.6-.3L14.8 2H9.3l-.4 3.2a5 5 0 0 0-1.2.7l-3-1.3L2 9.4l2.6 2V12.6l-2.6 2 2.7 4.7 3-1.3a8 8 0 0 0 1.2.7z"/><path d="m14.5 20.3 2.1-2-2.1-2.2 1.4-1.4 2.1 2.1 2.1-2 1.4 1.3-2 2.1 2 2.1-1.4 1.4-2.1-2-2.1 2zM12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"/></svg>',saturation:'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 20.5a6 6 0 1 1-5.9-10.2 6 6 0 1 1 11.8 0A6 6 0 1 1 12 20.5Zm-1.1-7.7a6 6 0 0 0-.2.3 4.3 4.3 0 0 1-2-1.3c.9.1 1.6.5 2.2 1Zm2.4.3a6 6 0 0 0-.2-.3 4.3 4.3 0 0 1 2.2-1 4.3 4.3 0 0 1-2 1.3ZM12.2 15a6.3 6.3 0 0 1-.4 0 4.3 4.3 0 0 0 .2 2.5 4.3 4.3 0 0 0 .2-2.5Zm.9 4.2a6 6 0 0 0 .8-4.5 6 6 0 0 0 3.4-2.8 4.3 4.3 0 0 1-1.3 8.4 4.3 4.3 0 0 1-2.9-1.1Zm-2.2 0a4.3 4.3 0 1 1-4.2-7.3 6 6 0 0 0 3.4 2.8 6 6 0 0 0 .8 4.5Zm-3-9.2a4.3 4.3 0 1 1 8.3 0 6 6 0 0 0-4.2 1.5A6 6 0 0 0 7.8 10Z"/></svg>',"transform-image":'<svg height="24" width="24"><path d="M3 21v-6h2V9H3V3h6v2h6V3h6v6h-2v6h2v6h-6v-2H9v2zm6-4h6v-2h2V9h-2V7H9v2H7v6h2zM5 7h2V5H5zm12 0h2V5h-2zm0 12h2v-2h-2zM5 19h2v-2H5z"/></svg>',vibrance:'<svg height="24" width="24"><path d="M12 20 22 4H2zm2.6-8 1.3-2H8l1.3 2h5.2zm-1.2 2h-2.8l1.4 2.2zm5-8L17 8H7L5.6 6h12.8z" fill-rule="evenodd"/></svg>',vk:'<svg width="24" height="24"><path fill-rule="evenodd" d="M14.8 17.4a2 2 0 0 1-1.3.7 8 8 0 0 1-7.7-3.6c-1.4-2-2.2-4.4-2.6-5.7L3 8.6A2 2 0 0 1 5 6h2.5c.4 0 .8.1 1.2.4A2 2 0 0 1 9.8 6h3.5a2 2 0 0 1 1.4.6 2 2 0 0 1 1.5-.6h2.4a2 2 0 0 1 2 2.5c-.5 1.5-1.2 2.6-1.8 3.6a12.5 12.5 0 0 1 2 3.2A2 2 0 0 1 19 18h-2.6a2 2 0 0 1-1.3-.5 6.9 6.9 0 0 1-.3-.2Zm.5-2.5-1.2-1a3 3 0 0 0-.8-.2v2.4h-1.7a5.6 5.6 0 0 1-.3 0c-3-.7-4.7-3.7-5.6-6.1A38.1 38.1 0 0 1 5 8.1V8h2.5a80.5 80.5 0 0 1 1.2 2.5c.6 1.2 1.2 2 2 2.1V9l-.9-1h3.5v4.1a5 5 0 0 0 .4-.3c.7-.7 1.2-1.4 1.6-2.2l.2-.3.7-1.3h2.4a8.5 8.5 0 0 1-.8 2l-1.3 2-.3.3a10.5 10.5 0 0 1 2.8 3.8h-2.6l-.8-.9a20.6 20.6 0 0 0-.3-.3Z" clip-rule="evenodd"/></svg>',warmth:'<svg height="24" width="24"><path d="M12 21.1c-1.4 0-2.6-.5-3.6-1.5s-1.5-2.1-1.5-3.5c0-.8.2-1.6.6-2.2A5 5 0 0 1 8.9 12v-6c0-.8.3-1.5 1-2.1a2.9 2.9 0 0 1 2-.9c.9 0 1.6.3 2.2.9.5.6.8 1.3.8 2.1v6a5 5 0 0 1 1.5 1.8A4.9 4.9 0 0 1 17 16c0 1.4-.5 2.6-1.4 3.5s-2.2 1.5-3.6 1.5zm-3-5h6c0-.5-.2-1-.4-1.4a3 3 0 0 0-.9-1l-.8-.6v-7a1 1 0 0 0-.3-.7A1 1 0 0 0 12 5a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v7l-.8.6a2.9 2.9 0 0 0-.9 1 3 3 0 0 0-.3 1.4z"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}})),oQ}var rQ;function Qoe(){return rQ||(rQ=1,Joe()),nQ}Qoe();var aQ={},cQ={},iQ;function ese(){return iQ||(iQ=1,(function(){var w=tinymce.util.Tools.resolve("tinymce.PluginManager");const M=(Te,St,$n)=>{const Xe=St==="UL"?"InsertUnorderedList":"InsertOrderedList";Te.execCommand(Xe,!1,$n===!1?null:{"list-style-type":$n})},L=Te=>{Te.addCommand("ApplyUnorderedListStyle",(St,$n)=>{M(Te,"UL",$n["list-style-type"])}),Te.addCommand("ApplyOrderedListStyle",(St,$n)=>{M(Te,"OL",$n["list-style-type"])})},X=Te=>St=>St.options.get(Te),se=Te=>{const St=Te.options.register;St("advlist_number_styles",{processor:"string[]",default:"default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman".split(",")}),St("advlist_bullet_styles",{processor:"string[]",default:"default,disc,circle,square".split(",")})},le=X("advlist_number_styles"),Se=X("advlist_bullet_styles"),pe=Te=>Te==null,$e=Te=>!pe(Te);class Ue{constructor(St,$n){this.tag=St,this.value=$n}static some(St){return new Ue(!0,St)}static none(){return Ue.singletonNone}fold(St,$n){return this.tag?$n(this.value):St()}isSome(){return this.tag}isNone(){return!this.tag}map(St){return this.tag?Ue.some(St(this.value)):Ue.none()}bind(St){return this.tag?St(this.value):Ue.none()}exists(St){return this.tag&&St(this.value)}forall(St){return!this.tag||St(this.value)}filter(St){return!this.tag||St(this.value)?this:Ue.none()}getOr(St){return this.tag?this.value:St}or(St){return this.tag?this:St}getOrThunk(St){return this.tag?this.value:St()}orThunk(St){return this.tag?this:St()}getOrDie(St){if(this.tag)return this.value;throw new Error(St??"Called getOrDie on None")}static from(St){return $e(St)?Ue.some(St):Ue.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(St){this.tag&&St(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Ue.singletonNone=new Ue(!1);const sn=Array.prototype.indexOf,hn=(Te,St)=>sn.call(Te,St),Rt=(Te,St)=>hn(Te,St)>-1,tn=(Te,St,$n)=>{for(let Xe=0,qt=Te.length;Xe<qt;Xe++){const Ne=Te[Xe];if(St(Ne,Xe))return Ue.some(Ne);if($n(Ne,Xe))break}return Ue.none()},fo=Object.keys,Wn=(Te,St)=>{const $n=fo(Te);for(let Xe=0,qt=$n.length;Xe<qt;Xe++){const Ne=$n[Xe],ft=Te[Ne];St(ft,Ne)}},ze=(Te,St)=>Gn(Te,($n,Xe)=>({k:Xe,v:St($n,Xe)})),Gn=(Te,St)=>{const $n={};return Wn(Te,(Xe,qt)=>{const Ne=St(Xe,qt);$n[Ne.k]=Ne.v}),$n};var Bt=tinymce.util.Tools.resolve("tinymce.util.Tools");const ie=Te=>/\btox\-/.test(Te.className),en=(Te,St)=>Te.dom.isChildOf(St,Te.getBody()),Ro=Te=>St=>$e(St)&&Te.test(St.nodeName),Qe=Ro(/^(OL|UL|DL)$/),K=Ro(/^(TH|TD)$/),It=(Te,St,$n)=>tn(St,Xe=>Qe(Xe)&&!ie(Xe),K).exists(Xe=>Xe.nodeName===$n&&en(Te,Xe)),Kn=Te=>{const St=Te.dom.getParent(Te.selection.getNode(),"ol,ul"),$n=Te.dom.getStyle(St,"listStyleType");return Ue.from($n)},vn=(Te,St)=>St!==null&&!Te.dom.isEditable(St),Fe=(Te,St)=>{const $n=Te.dom.getParent(St,"ol,ul,dl");return vn(Te,$n)||!Te.selection.isEditable()},he=(Te,St)=>{const $n=Te.selection.getNode();return St({parents:Te.dom.getParents($n),element:$n}),Te.on("NodeChange",St),()=>Te.off("NodeChange",St)},Cs=Te=>Te.replace(/\-/g," ").replace(/\b\w/g,St=>St.toUpperCase()),ut=Te=>pe(Te)||Te==="default"?"":Te,Ct=(Te,St)=>$n=>{const Xe=(Ne,ft)=>{const P=Ne.selection.getStart(!0);$n.setActive(It(Ne,ft,St)),$n.setEnabled(!Fe(Ne,P))};return he(Te,Ne=>Xe(Te,Ne.parents))},k=(Te,St,$n,Xe,qt,Ne)=>{const ft={"lower-latin":"lower-alpha","upper-latin":"upper-alpha","lower-alpha":"lower-latin","upper-alpha":"upper-latin"},P=ze(ft,Xo=>Rt(Ne,Xo));Te.ui.registry.addSplitButton(St,{tooltip:$n,chevronTooltip:`${$n} menu`,icon:qt==="OL"?"ordered-list":"unordered-list",presets:"listpreview",columns:qt==="OL"?3:4,fetch:Xo=>{const ro=Bt.map(Ne,Qn=>{const _o=qt==="OL"?"num":"bull",ws=Qn==="decimal"?"default":Qn,be=ut(Qn),ke=Cs(Qn);return{type:"choiceitem",value:be,icon:"list-"+_o+"-"+ws,text:ke}});Xo(ro)},onAction:()=>Te.execCommand(Xe),onItemAction:(Xo,ro)=>{M(Te,qt,ro)},select:Xo=>Kn(Te).exists(Qn=>Xo===Qn||ft[Qn]===Xo&&!P[Xo]),onSetup:Ct(Te,qt)})},Eo=(Te,St,$n,Xe,qt,Ne)=>{Te.ui.registry.addToggleButton(St,{active:!1,tooltip:$n,icon:qt==="OL"?"ordered-list":"unordered-list",onSetup:Ct(Te,qt),onAction:()=>Te.queryCommandState(Xe)||Ne===""?Te.execCommand(Xe):M(Te,qt,Ne)})},bt=(Te,St,$n,Xe,qt,Ne)=>{Ne.length>1?k(Te,St,$n,Xe,qt,Ne):Eo(Te,St,$n,Xe,qt,ut(Ne[0]))},Uo=Te=>{bt(Te,"numlist","Numbered list","InsertOrderedList","OL",le(Te)),bt(Te,"bullist","Bullet list","InsertUnorderedList","UL",Se(Te))};var pn=()=>{w.add("advlist",Te=>{Te.hasPlugin("lists")?(se(Te),Uo(Te),L(Te)):console.error("Please use the Lists plugin together with the List Styles plugin.")})};pn()})()),cQ}var lQ;function tse(){return lQ||(lQ=1,ese()),aQ}tse();var uQ={},dQ={},mQ;function nse(){return mQ||(mQ=1,(function(){var w=tinymce.util.Tools.resolve("tinymce.PluginManager");const M=(Xe,qt,Ne)=>{var ft;return Ne(Xe,qt.prototype)?!0:((ft=Xe.constructor)===null||ft===void 0?void 0:ft.name)===qt.name},L=Xe=>{const qt=typeof Xe;return Xe===null?"null":qt==="object"&&Array.isArray(Xe)?"array":qt==="object"&&M(Xe,String,(Ne,ft)=>ft.isPrototypeOf(Ne))?"string":qt},X=Xe=>qt=>L(qt)===Xe,se=Xe=>qt=>Xe===qt,le=X("string"),Se=se(void 0),pe=Xe=>Xe==null,$e=Xe=>!pe(Xe),Ue=Xe=>qt=>!Xe(qt),sn=Object.hasOwnProperty,hn=(Xe,qt)=>sn.call(Xe,qt),Rt=(Xe,qt,Ne)=>Xe.length>=qt.length&&Xe.substr(Ne,Ne+qt.length)===qt,tn=(Xe,qt,Ne=0,ft)=>{const P=Xe.indexOf(qt,Ne);return P!==-1?Se(ft)?!0:P+qt.length<=ft:!1},fo=(Xe,qt)=>Rt(Xe,qt,0),Wn="\uFEFF",ze=Xe=>Xe===Wn,Gn=Xe=>Xe.replace(/\uFEFF/g,""),Bt=()=>/(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)[A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?/g,ie=Xe=>qt=>qt.options.get(Xe),en=Xe=>{const qt=Xe.options.register;qt("autolink_pattern",{processor:"regexp",default:new RegExp("^"+Bt().source+"$","i")}),qt("link_default_target",{processor:"string"}),qt("link_default_protocol",{processor:"string",default:"https"})},Ro=ie("autolink_pattern"),Qe=ie("link_default_target"),K=ie("link_default_protocol"),It=ie("allow_unsafe_link_target");var Kn=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker");const vn=Xe=>Xe.nodeType===3,Fe=Xe=>Xe.nodeType===1,he=Xe=>/^[(\[{ \u00a0]$/.test(Xe),Cs=Xe=>/^([A-Za-z][A-Za-z\d.+-]*:\/\/)|mailto:/.test(Xe),ut=Xe=>/[?!,.;:]/.test(Xe),Ct=(Xe,qt,Ne)=>{for(let ft=qt-1;ft>=0;ft--){const P=Xe.charAt(ft);if(!ze(P)&&Ne(P))return ft}return-1},k=(Xe,qt)=>{let Ne=Xe,ft=qt;for(;Fe(Ne)&&Ne.childNodes[ft];)Ne=Ne.childNodes[ft],ft=vn(Ne)?Ne.data.length:Ne.childNodes.length;return{container:Ne,offset:ft}},Eo=(Xe,qt)=>{var Ne;const ft=Xe.schema.getVoidElements(),P=Ro(Xe),{dom:Xo,selection:ro}=Xe;if(Xo.getParent(ro.getNode(),"a[href]")!==null||Xe.mode.isReadOnly())return null;const Qn=ro.getRng(),_o=Kn(Xo,qe=>Xo.isBlock(qe)||hn(ft,qe.nodeName.toLowerCase())||Xo.getContentEditable(qe)==="false"||Xo.getParent(qe,"a[href]")!==null),{container:ws,offset:be}=k(Qn.endContainer,Qn.endOffset),ke=(Ne=Xo.getParent(ws,Xo.isBlock))!==null&&Ne!==void 0?Ne:Xo.getRoot(),Oe=_o.backwards(ws,be+qt,(qe,st)=>{const Fn=qe.data,rn=Ct(Fn,st,Ue(he));return rn===-1||ut(Fn[rn])?rn:rn+1},ke);if(!Oe)return null;let me=Oe.container;const Re=_o.backwards(Oe.container,Oe.offset,(qe,st)=>{me=qe;const Fn=Ct(qe.data,st,he);return Fn===-1?Fn:Fn+1},ke),at=Xo.createRng();Re?at.setStart(Re.container,Re.offset):at.setStart(me,0),at.setEnd(Oe.container,Oe.offset);const In=Gn(at.toString()).match(P);if(In){let qe=In[0];return fo(qe,"www.")?qe=K(Xe)+"://"+qe:tn(qe,"@")&&!Cs(qe)&&(qe="mailto:"+qe),{rng:at,url:qe}}else return null},bt=(Xe,qt)=>{const{dom:Ne,selection:ft}=Xe,{rng:P,url:Xo}=qt,ro=ft.getBookmark();ft.setRng(P);const Qn="createlink",_o={command:Qn,ui:!1,value:Xo};if(!Xe.dispatch("BeforeExecCommand",_o).isDefaultPrevented()){Xe.getDoc().execCommand(Qn,!1,Xo),Xe.dispatch("ExecCommand",_o);const be=Qe(Xe);if(le(be)){const ke=ft.getNode();Ne.setAttrib(ke,"target",be),be==="_blank"&&!It(Xe)&&Ne.setAttrib(ke,"rel","noopener")}}ft.moveToBookmark(ro),Xe.nodeChanged()},Uo=Xe=>{const qt=Eo(Xe,-1);$e(qt)&&bt(Xe,qt)},pn=Uo,Te=Xe=>{const qt=Eo(Xe,0);$e(qt)&&bt(Xe,qt)},St=Xe=>{Xe.on("keydown",qt=>{qt.keyCode===13&&!qt.isDefaultPrevented()&&Te(Xe)}),Xe.on("keyup",qt=>{qt.keyCode===32?Uo(Xe):(qt.keyCode===48&&qt.shiftKey||qt.keyCode===221)&&pn(Xe)})};var $n=()=>{w.add("autolink",Xe=>{en(Xe),St(Xe)})};$n()})()),dQ}var fQ;function ose(){return fQ||(fQ=1,nse()),uQ}ose();var gQ={},hQ={},pQ;function sse(){return pQ||(pQ=1,(function(){var w=tinymce.util.Tools.resolve("tinymce.PluginManager");const M=Re=>({backspaceDelete:at=>{Re.execCommand("mceListBackspaceDelete",!1,at)}}),L=Re=>Re==null,X=Re=>!L(Re),se=Re=>()=>Re,le=(Re,at)=>Re===at,Se=se(!1);class pe{constructor(at,tt){this.tag=at,this.value=tt}static some(at){return new pe(!0,at)}static none(){return pe.singletonNone}fold(at,tt){return this.tag?tt(this.value):at()}isSome(){return this.tag}isNone(){return!this.tag}map(at){return this.tag?pe.some(at(this.value)):pe.none()}bind(at){return this.tag?at(this.value):pe.none()}exists(at){return this.tag&&at(this.value)}forall(at){return!this.tag||at(this.value)}filter(at){return!this.tag||at(this.value)?this:pe.none()}getOr(at){return this.tag?this.value:at}or(at){return this.tag?this:at}getOrThunk(at){return this.tag?this.value:at()}orThunk(at){return this.tag?this:at()}getOrDie(at){if(this.tag)return this.value;throw new Error(at??"Called getOrDie on None")}static from(at){return X(at)?pe.some(at):pe.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(at){this.tag&&at(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}pe.singletonNone=new pe(!1);const $e=Array.prototype.slice,Ue=(Re,at)=>{for(let tt=0,In=Re.length;tt<In;tt++){const qe=Re[tt];if(at(qe,tt))return!0}return!1},sn=(Re,at)=>{const tt=Re.length,In=new Array(tt);for(let qe=0;qe<tt;qe++){const st=Re[qe];In[qe]=at(st,qe)}return In},hn=(Re,at)=>{for(let tt=0,In=Re.length;tt<In;tt++){const qe=Re[tt];at(qe,tt)}},Rt=(Re,at,tt)=>(hn(Re,(In,qe)=>{tt=at(tt,In,qe)}),tt),tn=(Re,at,tt)=>{for(let In=0,qe=Re.length;In<qe;In++){const st=Re[In];if(at(st,In))return pe.some(st);if(tt(st,In))break}return pe.none()},fo=(Re,at)=>tn(Re,at,Se),Wn=Re=>{const at=$e.call(Re,0);return at.reverse(),at},ze=(Re,at,tt=le)=>Re.exists(In=>tt(In,at)),Bt=(Re=>at=>at.replace(Re,""))(/^\s+|\s+$/g),ie=Re=>Re.length>0,en=Re=>!ie(Re),Ro=Re=>{const at=Wn(Bt(Re).split("")),tt=sn(at,(In,qe)=>{const st=In.toUpperCase().charCodeAt(0)-65+1;return Math.pow(26,qe)*st});return Rt(tt,(In,qe)=>In+qe,0)},Qe=Re=>{if(Re--,Re<0)return"";{const at=Re%26,tt=Math.floor(Re/26),In=Qe(tt),qe=String.fromCharCode(65+at);return In+qe}},K=Re=>/^[A-Z]+$/.test(Re),It=Re=>/^[a-z]+$/.test(Re),Kn=Re=>/^[0-9]+$/.test(Re),vn=Re=>Kn(Re)?2:K(Re)?0:It(Re)?1:en(Re)?3:4,Fe=Re=>{switch(vn(Re)){case 2:return pe.some({listStyleType:pe.none(),start:Re});case 0:return pe.some({listStyleType:pe.some("upper-alpha"),start:Ro(Re).toString()});case 1:return pe.some({listStyleType:pe.some("lower-alpha"),start:Ro(Re).toString()});case 3:return pe.some({listStyleType:pe.none(),start:""});case 4:return pe.none()}},he=Re=>{const at=parseInt(Re.start,10);return ze(Re.listStyleType,"upper-alpha")?Qe(at):ze(Re.listStyleType,"lower-alpha")?Qe(at).toLowerCase():Re.start},ut=(Re=>at=>at.options.get(Re))("forced_root_block"),Ct=Re=>/\btox\-/.test(Re.className),k=Re=>at=>X(at)&&Re.test(at.nodeName),Eo=Re=>at=>X(at)&&at.nodeName.toLowerCase()===Re,bt=k(/^(OL|UL|DL)$/),Uo=k(/^(TH|TD)$/),pn=k(/^(LI|DT|DD)$/),Te=(Re,at)=>tn(Re,bt,Uo).exists(tt=>tt.nodeName===at&&!Ct(tt)),St=(Re,at)=>{const tt=Re.selection.getNode();return at({parents:Re.dom.getParents(tt),element:tt}),Re.on("NodeChange",at),()=>Re.off("NodeChange",at)},$n=(Re,at)=>at!==null&&!Re.dom.isEditable(at),Xe=(Re,at)=>{const tt=Re.dom.getParent(at,"ol,ul,dl");return $n(Re,tt)||!Re.selection.isEditable()},qt=Eo("ol"),Ne=["OL","UL","DL"],ft=Ne.join(","),P=(Re,at)=>{const tt=at||Re.selection.getStart(!0);return Re.dom.getParent(tt,ft,Xo(Re,tt))},Xo=(Re,at)=>{const tt=Re.dom.getParents(at,Re.dom.isBlock),In=st=>st.nodeName.toLowerCase()!==ut(Re);return fo(tt,st=>In(st)&&ro(Re.schema,st)).getOr(Re.getBody())},ro=(Re,at)=>!bt(at)&&!pn(at)&&Ue(Ne,tt=>Re.isValidChild(at.nodeName,tt)),Qn=Re=>{const at=P(Re);!qt(at)||Xe(Re,at)||Re.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:he({start:Re.dom.getAttrib(at,"start","1"),listStyleType:pe.from(Re.dom.getStyle(at,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:tt=>{const In=tt.getData();Fe(In.start).each(qe=>{Re.execCommand("mceListUpdate",!1,{attrs:{start:qe.start==="1"?"":qe.start},styles:{"list-style-type":qe.listStyleType.getOr("")}})}),tt.close()}})},_o=Re=>{Re.addCommand("mceListProps",()=>{Qn(Re)})},ws=(Re,at)=>tt=>{const In=qe=>{tt.setActive(Te(qe.parents,at)),tt.setEnabled(!Xe(Re,qe.element)&&Re.selection.isEditable())};return tt.setEnabled(Re.selection.isEditable()),St(Re,In)},be=Re=>{const at=tt=>()=>Re.execCommand(tt);Re.hasPlugin("advlist")||(Re.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:at("InsertOrderedList"),onSetup:ws(Re,"OL")}),Re.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:at("InsertUnorderedList"),onSetup:ws(Re,"UL")}))},ke=(Re,at)=>tt=>St(Re,qe=>tt.setEnabled(Te(qe.parents,at)&&!Xe(Re,qe.element))),Oe=Re=>{const at={text:"List properties...",icon:"ordered-list",onAction:()=>Re.execCommand("mceListProps"),onSetup:ke(Re,"OL")};Re.ui.registry.addMenuItem("listprops",at),Re.ui.registry.addContextMenu("lists",{update:tt=>{const In=P(Re,tt);return qt(In)?["listprops"]:[]}})};var me=()=>{w.add("lists",Re=>(_o(Re),be(Re),Oe(Re),M(Re)))};me()})()),hQ}var bQ;function rse(){return bQ||(bQ=1,sse()),gQ}rse();var vQ={},yQ={},CQ;function ase(){return CQ||(CQ=1,(function(){var w=tinymce.util.Tools.resolve("tinymce.PluginManager");const M=(U,ue,Me)=>{var ct;return Me(U,ue.prototype)?!0:((ct=U.constructor)===null||ct===void 0?void 0:ct.name)===ue.name},L=U=>{const ue=typeof U;return U===null?"null":ue==="object"&&Array.isArray(U)?"array":ue==="object"&&M(U,String,(Me,ct)=>ct.isPrototypeOf(Me))?"string":ue},X=U=>ue=>L(ue)===U,se=U=>ue=>typeof ue===U,le=U=>ue=>U===ue,Se=X("string"),pe=X("object"),$e=X("array"),Ue=le(null),sn=se("boolean"),hn=U=>U==null,Rt=U=>!hn(U),tn=se("function"),fo=(U,ue)=>{if($e(U)){for(let Me=0,ct=U.length;Me<ct;++Me)if(!ue(U[Me]))return!1;return!0}return!1},Wn=()=>{},ze=U=>()=>U,Gn=(U,ue)=>U===ue;class Bt{constructor(ue,Me){this.tag=ue,this.value=Me}static some(ue){return new Bt(!0,ue)}static none(){return Bt.singletonNone}fold(ue,Me){return this.tag?Me(this.value):ue()}isSome(){return this.tag}isNone(){return!this.tag}map(ue){return this.tag?Bt.some(ue(this.value)):Bt.none()}bind(ue){return this.tag?ue(this.value):Bt.none()}exists(ue){return this.tag&&ue(this.value)}forall(ue){return!this.tag||ue(this.value)}filter(ue){return!this.tag||ue(this.value)?this:Bt.none()}getOr(ue){return this.tag?this.value:ue}or(ue){return this.tag?this:ue}getOrThunk(ue){return this.tag?this.value:ue()}orThunk(ue){return this.tag?this:ue()}getOrDie(ue){if(this.tag)return this.value;throw new Error(ue??"Called getOrDie on None")}static from(ue){return Rt(ue)?Bt.some(ue):Bt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(ue){this.tag&&ue(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Bt.singletonNone=new Bt(!1);const ie=Array.prototype.indexOf,en=Array.prototype.push,Ro=(U,ue)=>ie.call(U,ue),Qe=(U,ue)=>Ro(U,ue)>-1,K=(U,ue)=>{const Me=U.length,ct=new Array(Me);for(let Lt=0;Lt<Me;Lt++){const mn=U[Lt];ct[Lt]=ue(mn,Lt)}return ct},It=(U,ue)=>{for(let Me=0,ct=U.length;Me<ct;Me++){const Lt=U[Me];ue(Lt,Me)}},Kn=(U,ue,Me)=>(It(U,(ct,Lt)=>{Me=ue(Me,ct,Lt)}),Me),vn=U=>{const ue=[];for(let Me=0,ct=U.length;Me<ct;++Me){if(!$e(U[Me]))throw new Error("Arr.flatten item "+Me+" was not an array, input: "+U);en.apply(ue,U[Me])}return ue},Fe=(U,ue)=>vn(K(U,ue)),he=(U,ue)=>{for(let Me=0;Me<U.length;Me++){const ct=ue(U[Me],Me);if(ct.isSome())return ct}return Bt.none()},Cs=Object.keys,ut=Object.hasOwnProperty,Ct=(U,ue)=>{const Me=Cs(U);for(let ct=0,Lt=Me.length;ct<Lt;ct++){const mn=Me[ct],Bo=U[mn];ue(Bo,mn)}},k=U=>(ue,Me)=>{U[Me]=ue},Eo=(U,ue,Me,ct)=>{Ct(U,(Lt,mn)=>{(ue(Lt,mn)?Me:ct)(Lt,mn)})},bt=(U,ue)=>{const Me={};return Eo(U,ue,k(Me),Wn),Me},Uo=(U,ue)=>ut.call(U,ue),pn=(U,ue)=>Uo(U,ue)&&U[ue]!==void 0&&U[ue]!==null,Te=U=>{let ue=U;return{get:()=>ue,set:Lt=>{ue=Lt}}},St=(U,ue,Me=Gn)=>U.exists(ct=>Me(ct,ue)),$n=U=>{const ue=[],Me=ct=>{ue.push(ct)};for(let ct=0;ct<U.length;ct++)U[ct].each(Me);return ue},Xe=(U,ue)=>U?Bt.some(ue):Bt.none(),qt=U=>{const ue=Te(Bt.none()),Me=()=>ue.get().each(U);return{clear:()=>{Me(),ue.set(Bt.none())},isSet:()=>ue.get().isSome(),get:()=>ue.get(),set:yo=>{Me(),ue.set(Bt.some(yo))}}},Ne=()=>{const U=qt(Wn);return{...U,on:Me=>U.get().each(Me)}},ft=(U,ue)=>U.substring(ue),P=(U,ue,Me)=>ue===""||U.length>=ue.length&&U.substr(Me,Me+ue.length)===ue,Xo=(U,ue)=>ro(U,ue)?ft(U,ue.length):U,ro=(U,ue)=>P(U,ue,0),Qn=U=>ue=>ue.options.get(U),_o=U=>{const ue=U.options.register;ue("link_assume_external_targets",{processor:Me=>{const ct=Se(Me)||sn(Me);return ct?Me===!0?{value:1,valid:ct}:Me==="http"||Me==="https"?{value:Me,valid:ct}:{value:0,valid:ct}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),ue("link_context_toolbar",{processor:"boolean",default:!1}),ue("link_list",{processor:Me=>Se(Me)||tn(Me)||fo(Me,pe)}),ue("link_default_target",{processor:"string"}),ue("link_default_protocol",{processor:"string",default:"https"}),ue("link_target_list",{processor:Me=>sn(Me)||fo(Me,pe),default:!0}),ue("link_rel_list",{processor:"object[]",default:[]}),ue("link_class_list",{processor:"object[]",default:[]}),ue("link_title",{processor:"boolean",default:!0}),ue("allow_unsafe_link_target",{processor:"boolean",default:!1}),ue("link_quicklink",{processor:"boolean",default:!1}),ue("link_attributes_postprocess",{processor:"function"})},ws=Qn("link_assume_external_targets"),be=Qn("link_context_toolbar"),ke=Qn("link_list"),Oe=Qn("link_default_target"),me=Qn("link_default_protocol"),Re=Qn("link_target_list"),at=Qn("link_rel_list"),tt=Qn("link_class_list"),In=Qn("link_title"),qe=Qn("allow_unsafe_link_target"),st=Qn("link_quicklink"),Fn=Qn("link_attributes_postprocess");var rn=tinymce.util.Tools.resolve("tinymce.util.URI"),To=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),es=tinymce.util.Tools.resolve("tinymce.util.Tools");const Wo=U=>Rt(U)&&U.nodeName.toLowerCase()==="a",eo=U=>Wo(U)&&!!mt(U),zs=(U,ue)=>{if(U.collapsed)return[];{const Me=U.cloneContents(),ct=Me.firstChild,Lt=new To(ct,Me),mn=[];let Bo=ct;do ue(Bo)&&mn.push(Bo);while(Bo=Lt.next());return mn}},wo=U=>/^\w+:/i.test(U),mt=U=>{var ue,Me;return(Me=(ue=U.getAttribute("data-mce-href"))!==null&&ue!==void 0?ue:U.getAttribute("href"))!==null&&Me!==void 0?Me:""},Nt=(U,ue)=>{const Me=["noopener"],ct=U?U.split(/\s+/):[],Lt=us=>es.trim(us.sort().join(" ")),mn=us=>(us=Bo(us),us.length>0?us.concat(Me):Me),Bo=us=>us.filter($=>es.inArray(Me,$)===-1),yo=ue?mn(ct):Bo(ct);return yo.length>0?Lt(yo):""},wn=U=>U.replace(/\uFEFF/g,""),fn=(U,ue)=>(ue=ue||So(U.selection.getRng())[0]||U.selection.getNode(),xo(ue)?Bt.from(U.dom.select("a[href]",ue)[0]):Bt.from(U.dom.getParent(ue,"a[href]"))),uo=(U,ue)=>fn(U,ue).isSome(),ts=(U,ue)=>{const Me=ue.fold(()=>U.getContent({format:"text"}),ct=>ct.innerText||ct.textContent||"");return wn(Me)},So=U=>zs(U,eo),ks=U=>es.grep(U,eo),Xs=U=>ks(U).length>0,dn=U=>So(U).length>0,ko=U=>{const ue=U.schema.getTextInlineElements(),Me=mn=>mn.nodeType===1&&!Wo(mn)&&!Uo(ue,mn.nodeName.toLowerCase());if(fn(U).exists(mn=>mn.hasAttribute("data-mce-block")))return!1;const Lt=U.selection.getRng();return Lt.collapsed?!0:zs(Lt,Me).length===0},xo=U=>Rt(U)&&U.nodeName==="FIGURE"&&/\bimage\b/i.test(U.className),ac=U=>Kn(["title","rel","class","target"],(Me,ct)=>(U[ct].each(Lt=>{Me[ct]=Lt.length>0?Lt:null}),Me),{href:U.href}),da=(U,ue)=>(ue==="http"||ue==="https")&&!wo(U)?ue+"://"+U:U,cn=(U,ue)=>{const Me={...ue};if(at(U).length===0&&!qe(U)){const ct=Nt(Me.rel,Me.target==="_blank");Me.rel=ct||null}return Bt.from(Me.target).isNone()&&Re(U)===!1&&(Me.target=Oe(U)),Me.href=da(Me.href,ws(U)),Me},Bc=(U,ue,Me,ct)=>{Me.each(mn=>{Uo(ue,"innerText")?ue.innerText=mn:ue.textContent=mn}),U.dom.setAttribs(ue,ct);const Lt=U.dom.createRng();Lt.setStartAfter(ue),Lt.setEndAfter(ue),U.selection.setRng(Lt)},Ds=(U,ue,Me,ct)=>{const Lt=U.dom;xo(ue)?Za(Lt,ue,ct):Me.fold(()=>{U.execCommand("mceInsertLink",!1,ct);const mn=U.selection.getEnd(),Bo=Lt.createRng();Bo.setStartAfter(mn),Bo.setEndAfter(mn),U.selection.setRng(Bo)},mn=>{U.insertContent(Lt.createHTML("a",ct,Lt.encode(mn)))})},Fc=(U,ue,Me)=>{const ct=U.selection.getNode(),Lt=fn(U,ct),mn=cn(U,ac(Me)),Bo=Fn(U);Rt(Bo)&&Bo(mn),U.undoManager.transact(()=>{Me.href===ue.href&&ue.attach(),Lt.fold(()=>{Ds(U,ct,Me.text,mn)},yo=>{U.focus(),Bc(U,yo,Me.text,mn)})})},Ma=U=>{const ue=U.dom,Me=U.selection,ct=Me.getBookmark(),Lt=Me.getRng().cloneRange(),mn=ue.getParent(Lt.startContainer,"a[href]",U.getBody()),Bo=ue.getParent(Lt.endContainer,"a[href]",U.getBody());mn&&Lt.setStartBefore(mn),Bo&&Lt.setEndAfter(Bo),Me.setRng(Lt),U.execCommand("unlink"),Me.moveToBookmark(ct)},zr=U=>{U.undoManager.transact(()=>{const ue=U.selection.getNode();xo(ue)?Nc(U,ue):Ma(U),U.focus()})},Ss=U=>{const{class:ue,href:Me,rel:ct,target:Lt,text:mn,title:Bo}=U;return bt({class:ue.getOrNull(),href:Me,rel:ct.getOrNull(),target:Lt.getOrNull(),text:mn.getOrNull(),title:Bo.getOrNull()},(yo,us)=>Ue(yo)===!1)},to=(U,ue)=>{const Me=U.options.get,ct={allow_html_data_urls:Me("allow_html_data_urls"),allow_script_urls:Me("allow_script_urls"),allow_svg_data_urls:Me("allow_svg_data_urls")},Lt=ue.href;return{...ue,href:rn.isDomSafe(Lt,"a",ct)?Lt:""}},os=(U,ue,Me)=>{const ct=to(U,Me);U.hasPlugin("rtc",!0)?U.execCommand("createlink",!1,Ss(ct)):Fc(U,ue,ct)},Wa=U=>{U.hasPlugin("rtc",!0)?U.execCommand("unlink"):zr(U)},Nc=(U,ue)=>{var Me;const ct=U.dom.select("img",ue)[0];if(ct){const Lt=U.dom.getParents(ct,"a[href]",ue)[0];Lt&&((Me=Lt.parentNode)===null||Me===void 0||Me.insertBefore(ct,Lt),U.dom.remove(Lt))}},Za=(U,ue,Me)=>{var ct;const Lt=U.select("img",ue)[0];if(Lt){const mn=U.create("a",Me);(ct=Lt.parentNode)===null||ct===void 0||ct.insertBefore(mn,Lt),mn.appendChild(Lt)}},gn=U=>Se(U.value)?U.value:"",Fr=U=>Se(U.text)?U.text:Se(U.title)?U.title:"",yr=(U,ue)=>{const Me=[];return es.each(U,ct=>{const Lt=Fr(ct);if(ct.menu!==void 0){const mn=yr(ct.menu,ue);Me.push({text:Lt,items:mn})}else{const mn=ue(ct);Me.push({text:Lt,value:mn})}}),Me},Ti=(U=gn)=>ue=>Bt.from(ue).map(Me=>yr(Me,U)),Ie={sanitize:U=>Ti(gn)(U),sanitizeWith:Ti,createUi:(U,ue)=>Me=>({name:U,type:"listbox",label:ue,items:Me}),getValue:gn},dt=U=>pn(U,"items"),Rn=(U,ue)=>he(ue,Me=>dt(Me)?Rn(U,Me.items):Xe(Me.value===U,Me)),Zn=(U,ue,Me,ct)=>{const Lt=ct[ue],mn=U.length>0;return Lt!==void 0?Rn(Lt,Me).map(Bo=>({url:{value:Bo.value,meta:{text:mn?U:Bo.text,attach:Wn}},text:mn?U:Bo.text})):Bt.none()},Ao=(U,ue)=>ue==="link"?U.link:ue==="anchor"?U.anchor:Bt.none(),qo={init:(U,ue)=>{const Me={text:U.text,title:U.title},ct=us=>{var $;return Xe(Me.title.length<=0,Bt.from(($=us.meta)===null||$===void 0?void 0:$.title).getOr(""))},Lt=us=>{var $;return Xe(Me.text.length<=0,Bt.from(($=us.meta)===null||$===void 0?void 0:$.text).getOr(us.value))},mn=us=>{const $=Lt(us.url),j=ct(us.url);return $.isSome()||j.isSome()?Bt.some({...$.map(fe=>({text:fe})).getOr({}),...j.map(fe=>({title:fe})).getOr({})}):Bt.none()},Bo=(us,$)=>{const j=Ao(ue,$).getOr([]);return Zn(Me.text,$,j,us)};return{onChange:(us,$)=>{const j=$.name;return j==="url"?mn(us()):Qe(["anchor","link"],j)?Bo(us(),j):((j==="text"||j==="title")&&(Me[j]=us()[j]),Bt.none())}}},getDelta:Zn};var Mo=tinymce.util.Tools.resolve("tinymce.util.Delay");const G=(U,ue,Me)=>{const ct=U.selection.getRng();Mo.setEditorTimeout(U,()=>{U.windowManager.confirm(ue,Lt=>{U.selection.setRng(ct),Me(Lt)})})},we=U=>{const ue=U.href;return ue.indexOf("@")>0&&ue.indexOf("/")===-1&&ue.indexOf("mailto:")===-1?Bt.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:ct=>({...ct,href:"mailto:"+ue})}):Bt.none()},gt=(U,ue)=>Me=>{const ct=Me.href;return U===1&&!wo(ct)||U===0&&/^\s*www(\.|\d\.)/i.test(ct)?Bt.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${ue}:// prefix?`,preprocess:mn=>({...mn,href:ue+"://"+ct})}):Bt.none()},At={preprocess:(U,ue)=>he([we,gt(ws(U),me(U))],Me=>Me(ue)).fold(()=>Promise.resolve(ue),Me=>new Promise(ct=>{G(U,Me.message,Lt=>{ct(Lt?Me.preprocess(ue):ue)})}))},Tn={getAnchors:U=>{const ue=U.dom.select("a:not([href])"),Me=Fe(ue,ct=>{const Lt=ct.name||ct.id;return Lt?[{text:Lt,value:"#"+Lt}]:[]});return Me.length>0?Bt.some([{text:"None",value:""}].concat(Me)):Bt.none()}},bo={getClasses:U=>{const ue=tt(U);return ue.length>0?Ie.sanitize(ue):Bt.none()}},Lo=U=>{try{return Bt.some(JSON.parse(U))}catch{return Bt.none()}},bs={getLinks:U=>{const ue=ct=>U.convertURL(ct.value||ct.url||"","href"),Me=ke(U);return new Promise(ct=>{Se(Me)?fetch(Me).then(Lt=>Lt.ok?Lt.text().then(Lo):Promise.reject()).then(ct,()=>ct(Bt.none())):tn(Me)?Me(Lt=>ct(Bt.some(Lt))):ct(Bt.from(Me))}).then(ct=>ct.bind(Ie.sanitizeWith(ue)).map(Lt=>Lt.length>0?[{text:"None",value:""}].concat(Lt):Lt))}},Er={getRels:(U,ue)=>{const Me=at(U);if(Me.length>0){const ct=St(ue,"_blank"),Lt=qe(U)===!1,mn=yo=>Nt(Ie.getValue(yo),ct);return(Lt?Ie.sanitizeWith(mn):Ie.sanitize)(Me)}return Bt.none()}},Ml=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],rs={getTargets:U=>{const ue=Re(U);return $e(ue)?Ie.sanitize(ue).orThunk(()=>Bt.some(Ml)):ue===!1?Bt.none():Bt.some(Ml)}},Os=(U,ue,Me)=>{const ct=U.getAttrib(ue,Me);return ct!==null&&ct.length>0?Bt.some(ct):Bt.none()},ma=(U,ue)=>{const Me=U.dom,Lt=ko(U)?Bt.some(ts(U.selection,ue)):Bt.none(),mn=ue.bind(j=>Bt.from(Me.getAttrib(j,"href"))),Bo=ue.bind(j=>Bt.from(Me.getAttrib(j,"target"))),yo=ue.bind(j=>Os(Me,j,"rel")),us=ue.bind(j=>Os(Me,j,"class")),$=ue.bind(j=>Os(Me,j,"title"));return{url:mn,text:Lt,title:$,target:Bo,rel:yo,linkClass:us}},er={collect:(U,ue)=>bs.getLinks(U).then(Me=>{const ct=ma(U,ue);return{anchor:ct,catalogs:{targets:rs.getTargets(U),rels:Er.getRels(U,ct.target),classes:bo.getClasses(U),anchor:Tn.getAnchors(U),link:Me},optNode:ue,flags:{titleEnabled:In(U)}}})},jn=(U,ue)=>Me=>{const ct=Me.getData();if(!ct.url.value){Wa(U),Me.close();return}const Lt=yo=>Bt.from(ct[yo]).filter(us=>!St(ue.anchor[yo],us)),mn={href:ct.url.value,text:Lt("text"),target:Lt("target"),rel:Lt("rel"),class:Lt("linkClass"),title:Lt("title")},Bo={href:ct.url.value,attach:ct.url.meta!==void 0&&ct.url.meta.attach?ct.url.meta.attach:Wn};At.preprocess(U,mn).then(yo=>{os(U,Bo,yo)}),Me.close()},fa=U=>{const ue=fn(U);return er.collect(U,ue)},xa=(U,ue)=>{const Me=U.anchor,ct=Me.url.getOr("");return{url:{value:ct,meta:{original:{value:ct}}},text:Me.text.getOr(""),title:Me.title.getOr(""),anchor:ct,link:ct,rel:Me.rel.getOr(""),target:Me.target.or(ue).getOr(""),linkClass:Me.linkClass.getOr("")}},cr=(U,ue,Me)=>{const ct=[{name:"url",type:"urlinput",filetype:"file",label:"URL",picker_text:"Browse links"}],Lt=U.anchor.text.map(()=>({name:"text",type:"input",label:"Text to display"})).toArray(),mn=U.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],Bo=Bt.from(Oe(Me)),yo=xa(U,Bo),us=U.catalogs,$=qo.init(yo,us);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:vn([ct,Lt,mn,$n([us.anchor.map(Ie.createUi("anchor","Anchors")),us.rels.map(Ie.createUi("rel","Rel")),us.targets.map(Ie.createUi("target","Open link in...")),us.link.map(Ie.createUi("link","Link list")),us.classes.map(Ie.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:yo,onChange:(fe,{name:Ge})=>{$.onChange(fe.getData,{name:Ge}).each(ln=>{fe.setData(ln)})},onSubmit:ue}},Ju=U=>{fa(U).then(Me=>{const ct=jn(U,Me);return cr(Me,ct,U)}).then(Me=>{U.windowManager.open(Me)})},bu=U=>{U.addCommand("mceLink",(ue,Me)=>{(Me==null?void 0:Me.dialog)===!0||!st(U)?Ju(U):U.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"})})},Js=U=>{U.addShortcut("Meta+K","",()=>{U.execCommand("mceLink")})};var Ai=tinymce.util.Tools.resolve("tinymce.util.VK");const ri=(U,ue)=>{document.body.appendChild(U),U.dispatchEvent(ue),document.body.removeChild(U)},Qu=U=>{const ue=document.createElement("a");ue.target="_blank",ue.href=U,ue.rel="noreferrer noopener";const Me=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});document.dispatchEvent(Me),ri(ue,Me)},Gt=U=>U.altKey===!0&&U.shiftKey===!1&&U.ctrlKey===!1&&U.metaKey===!1,Pc=(U,ue)=>{if(ue){const Me=mt(ue);if(/^#/.test(Me)){const ct=U.dom.select(`${Me},[name="${Xo(Me,"#")}"]`);ct.length&&U.selection.scrollIntoView(ct[0],!0)}else Qu(ue.href)}},Ba=U=>{const ue=U.selection.getRng(),Me=ue.startContainer;return eo(Me)&&ue.startContainer===ue.endContainer&&U.dom.select("img",Me).length===1},ja=(U,ue)=>{const Me=ks(U.dom.getParents(ue));return Xe(Me.length===1,Me[0])},ir=U=>{const ue=So(U.selection.getRng());return Xe(ue.length>0,ue[0]).or(ja(U,U.selection.getNode()))},vu=U=>U.selection.isCollapsed()||Ba(U)?ja(U,U.selection.getStart()):ir(U),qa=U=>{const ue=Ne(),Me=()=>ue.get().or(vu(U)),ct=()=>Me().each(Lt=>Pc(U,Lt));return U.on("contextmenu",Lt=>{ja(U,Lt.target).each(ue.set)}),U.on("SelectionChange",()=>{ue.isSet()||vu(U).each(ue.set)}),U.on("click",Lt=>{ue.clear();const mn=ks(U.dom.getParents(Lt.target));mn.length===1&&Ai.metaKeyPressed(Lt)&&(Lt.preventDefault(),Pc(U,mn[0]))}),U.on("keydown",Lt=>{ue.clear(),!Lt.isDefaultPrevented()&&Lt.keyCode===13&&Gt(Lt)&&Me().each(mn=>{Lt.preventDefault(),Pc(U,mn)})}),{gotoSelectedLink:ct}},yc=U=>()=>{U.execCommand("mceLink",!1,{dialog:!0})},Bl=(U,ue)=>(U.on("NodeChange",ue),()=>U.off("NodeChange",ue)),ed=U=>ue=>{const Me=()=>{ue.setActive(!U.mode.isReadOnly()&&uo(U,U.selection.getNode())),ue.setEnabled(U.selection.isEditable())};return Me(),Bl(U,Me)},Ui=U=>ue=>{const Me=()=>{ue.setEnabled(U.selection.isEditable())};return Me(),Bl(U,Me)},yu=U=>ue=>{const Me=mn=>Xs(mn)||dn(U.selection.getRng()),ct=U.dom.getParents(U.selection.getStart()),Lt=mn=>{ue.setEnabled(Me(mn)&&U.selection.isEditable())};return Lt(ct),Bl(U,mn=>Lt(mn.parents))},Fl=(U,ue)=>{U.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",shortcut:"Meta+K",onAction:yc(U),onSetup:ed(U)}),U.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:ue.gotoSelectedLink,onSetup:yu(U)}),U.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>Wa(U),onSetup:yu(U)})},Wi=(U,ue)=>{U.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:ue.gotoSelectedLink,onSetup:yu(U)}),U.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:yc(U),onSetup:Ui(U)}),U.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>Wa(U),onSetup:yu(U)})},Nl=U=>{const ue="link unlink openlink",Me="link";U.ui.registry.addContextMenu("link",{update:ct=>U.dom.isEditable(ct)?Xs(U.dom.getParents(ct,"a"))?ue:Me:""})},zt=(U,ue)=>{const Me=mn=>{mn.selection.collapse(!1)},ct=mn=>{const Bo=U.selection.getNode();return mn.setEnabled(uo(U,Bo)&&U.selection.isEditable()),Wn},Lt=mn=>{const Bo=fn(U),yo=ko(U);if(Bo.isNone()&&yo){const us=ts(U.selection,Bo);return Xe(us.length===0,mn)}else return Bt.none()};U.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:ed(U)},label:"Link",predicate:mn=>be(U)&&uo(U,mn),initValue:()=>fn(U).fold(ze(""),mt),commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:mn=>{const Bo=U.selection.getNode();return mn.setActive(uo(U,Bo)),ed(U)(mn)},onAction:mn=>{const Bo=mn.getValue(),yo=Lt(Bo);os(U,{href:Bo,attach:Wn},{href:Bo,text:yo,title:Bt.none(),rel:Bt.none(),target:Bt.from(Oe(U)),class:Bt.none()}),Me(U),mn.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:ct,onAction:mn=>{Wa(U),mn.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:ct,onAction:mn=>{ue.gotoSelectedLink(),mn.hide()}}]})},dl=U=>{const ue=qa(U);Fl(U,ue),Wi(U,ue),Nl(U),zt(U,ue)};var td=()=>{w.add("link",U=>{_o(U),bu(U),dl(U),Js(U)})};td()})()),yQ}var wQ;function cse(){return wQ||(wQ=1,ase()),vQ}cse();var SQ={},xQ={},EQ;function ise(){return EQ||(EQ=1,(function(){var w=tinymce.util.Tools.resolve("tinymce.PluginManager");const M=Object.getPrototypeOf,L=($,j,fe)=>{var Ge;return fe($,j.prototype)?!0:((Ge=$.constructor)===null||Ge===void 0?void 0:Ge.name)===j.name},X=$=>{const j=typeof $;return $===null?"null":j==="object"&&Array.isArray($)?"array":j==="object"&&L($,String,(fe,Ge)=>Ge.isPrototypeOf(fe))?"string":j},se=$=>j=>X(j)===$,le=$=>j=>typeof j===$,Se=$=>j=>$===j,pe=($,j)=>Ue($)&&L($,j,(fe,Ge)=>M(fe)===Ge),$e=se("string"),Ue=se("object"),sn=$=>pe($,Object),hn=se("array"),Rt=Se(null),tn=le("boolean"),fo=$=>$==null,Wn=$=>!fo($),ze=le("function"),Gn=le("number"),Bt=($,j)=>{if(hn($)){for(let fe=0,Ge=$.length;fe<Ge;++fe)if(!j($[fe]))return!1;return!0}return!1},ie=()=>{};class en{constructor(j,fe){this.tag=j,this.value=fe}static some(j){return new en(!0,j)}static none(){return en.singletonNone}fold(j,fe){return this.tag?fe(this.value):j()}isSome(){return this.tag}isNone(){return!this.tag}map(j){return this.tag?en.some(j(this.value)):en.none()}bind(j){return this.tag?j(this.value):en.none()}exists(j){return this.tag&&j(this.value)}forall(j){return!this.tag||j(this.value)}filter(j){return!this.tag||j(this.value)?this:en.none()}getOr(j){return this.tag?this.value:j}or(j){return this.tag?this:j}getOrThunk(j){return this.tag?this.value:j()}orThunk(j){return this.tag?this:j()}getOrDie(j){if(this.tag)return this.value;throw new Error(j??"Called getOrDie on None")}static from(j){return Wn(j)?en.some(j):en.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(j){this.tag&&j(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}en.singletonNone=new en(!1);const Ro=Array.prototype.push,Qe=$=>{const j=[];for(let fe=0,Ge=$.length;fe<Ge;++fe){if(!hn($[fe]))throw new Error("Arr.flatten item "+fe+" was not an array, input: "+$);Ro.apply(j,$[fe])}return j},K=($,j)=>j>=0&&j<$.length?en.some($[j]):en.none(),It=$=>K($,0),Kn=($,j)=>{for(let fe=0;fe<$.length;fe++){const Ge=j($[fe],fe);if(Ge.isSome())return Ge}return en.none()},vn=Object.keys,Fe=Object.hasOwnProperty,he=($,j)=>{const fe=vn($);for(let Ge=0,ln=fe.length;Ge<ln;Ge++){const Go=fe[Ge],Rs=$[Go];j(Rs,Go)}},Cs=$=>(j,fe)=>{$[fe]=j},ut=($,j,fe,Ge)=>{he($,(ln,Go)=>{(j(ln,Go)?fe:Ge)(ln,Go)})},Ct=($,j)=>{const fe={};return ut($,j,Cs(fe),ie),fe},k=($,j)=>Fe.call($,j),Eo=($,j)=>k($,j)&&$[j]!==void 0&&$[j]!==null,pn=($=>(...j)=>{if(j.length===0)throw new Error("Can't merge zero objects");const fe={};for(let Ge=0;Ge<j.length;Ge++){const ln=j[Ge];for(const Go in ln)k(ln,Go)&&(fe[Go]=$(fe[Go],ln[Go]))}return fe})(($,j)=>sn($)&&sn(j)?pn($,j):j),Te=$=>$.length>0,St=($,j)=>{const Ge=(j||document).createElement("div");if(Ge.innerHTML=$,!Ge.hasChildNodes()||Ge.childNodes.length>1){const ln="HTML does not have a single root node";throw console.error(ln,$),new Error(ln)}return qt(Ge.childNodes[0])},$n=($,j)=>{const Ge=(j||document).createElement($);return qt(Ge)},Xe=($,j)=>{const Ge=(j||document).createTextNode($);return qt(Ge)},qt=$=>{if($==null)throw new Error("Node cannot be null or undefined");return{dom:$}},ft={fromHtml:St,fromTag:$n,fromText:Xe,fromDom:qt,fromPoint:($,j,fe)=>en.from($.dom.elementFromPoint(j,fe)).map(qt)},P=($,j,fe)=>{if($e(fe)||tn(fe)||Gn(fe))$.setAttribute(j,fe+"");else throw console.error("Invalid call to Attribute.set. Key ",j,":: Value ",fe,":: Element ",$),new Error("Attribute value was not simple")},Xo=($,j,fe)=>{P($.dom,j,fe)},ro=($,j)=>{$.dom.removeAttribute(j)};var Qn=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),_o=tinymce.util.Tools.resolve("tinymce.util.URI");const ws=$=>j=>j.options.get($),be=$=>{const j=$.options.register;j("image_dimensions",{processor:"boolean",default:!0}),j("image_advtab",{processor:"boolean",default:!1}),j("image_uploadtab",{processor:"boolean",default:!0}),j("image_prepend_url",{processor:"string",default:""}),j("image_class_list",{processor:"object[]"}),j("image_description",{processor:"boolean",default:!0}),j("image_title",{processor:"boolean",default:!1}),j("image_caption",{processor:"boolean",default:!1}),j("image_list",{processor:fe=>{const Ge=fe===!1||$e(fe)||Bt(fe,Ue)||ze(fe);return Ge?{value:fe,valid:Ge}:{valid:!1,message:"Must be false, a string, an array or a function."}},default:!1})},ke=ws("image_dimensions"),Oe=ws("image_advtab"),me=ws("image_uploadtab"),Re=ws("image_prepend_url"),at=ws("image_class_list"),tt=ws("image_description"),In=ws("image_title"),qe=ws("image_caption"),st=ws("image_list"),Fn=ws("a11y_advanced_options"),rn=ws("automatic_uploads"),To=$=>Te($.options.get("images_upload_url")),es=$=>Wn($.options.get("images_upload_handler")),Wo=($,j)=>Math.max(parseInt($,10),parseInt(j,10)),eo=$=>new Promise(j=>{const fe=document.createElement("img"),Ge=Go=>{fe.parentNode&&fe.parentNode.removeChild(fe),j(Go)};fe.addEventListener("load",()=>{const Go=Wo(fe.width,fe.clientWidth),Rs=Wo(fe.height,fe.clientHeight),Or={width:Go,height:Rs};Ge(Promise.resolve(Or))}),fe.addEventListener("error",()=>{Ge(Promise.reject(`Failed to get image dimensions for: ${$}`))});const ln=fe.style;ln.visibility="hidden",ln.position="fixed",ln.bottom=ln.left="0px",ln.width=ln.height="auto",document.body.appendChild(fe),fe.src=$}),zs=$=>($&&($=$.replace(/px$/,"")),$),wo=$=>($.length>0&&/^[0-9]+$/.test($)&&($+="px"),$),mt=$=>{if($.margin){const j=String($.margin).split(" ");switch(j.length){case 1:$["margin-top"]=$["margin-top"]||j[0],$["margin-right"]=$["margin-right"]||j[0],$["margin-bottom"]=$["margin-bottom"]||j[0],$["margin-left"]=$["margin-left"]||j[0];break;case 2:$["margin-top"]=$["margin-top"]||j[0],$["margin-right"]=$["margin-right"]||j[1],$["margin-bottom"]=$["margin-bottom"]||j[0],$["margin-left"]=$["margin-left"]||j[1];break;case 3:$["margin-top"]=$["margin-top"]||j[0],$["margin-right"]=$["margin-right"]||j[1],$["margin-bottom"]=$["margin-bottom"]||j[2],$["margin-left"]=$["margin-left"]||j[1];break;case 4:$["margin-top"]=$["margin-top"]||j[0],$["margin-right"]=$["margin-right"]||j[1],$["margin-bottom"]=$["margin-bottom"]||j[2],$["margin-left"]=$["margin-left"]||j[3]}delete $.margin}return $},Nt=($,j)=>{const fe=st($);$e(fe)?fetch(fe).then(Ge=>{Ge.ok&&Ge.json().then(j)}):ze(fe)?fe(j):j(fe)},wn=($,j,fe)=>{const Ge=()=>{fe.onload=fe.onerror=null,$.selection&&($.selection.select(fe),$.nodeChanged())};fe.onload=()=>{!j.width&&!j.height&&ke($)&&$.dom.setAttribs(fe,{width:String(fe.clientWidth),height:String(fe.clientHeight)}),Ge()},fe.onerror=Ge},fn=$=>new Promise((j,fe)=>{const Ge=new FileReader;Ge.onload=()=>{j(Ge.result)},Ge.onerror=()=>{var ln;fe((ln=Ge.error)===null||ln===void 0?void 0:ln.message)},Ge.readAsDataURL($)}),uo=$=>$.nodeName==="IMG"&&($.hasAttribute("data-mce-object")||$.hasAttribute("data-mce-placeholder")),ts=($,j)=>{const fe=$.options.get;return _o.isDomSafe(j,"img",{allow_html_data_urls:fe("allow_html_data_urls"),allow_script_urls:fe("allow_script_urls"),allow_svg_data_urls:fe("allow_svg_data_urls")})},So=Qn.DOM,ks=$=>$.style.marginLeft&&$.style.marginRight&&$.style.marginLeft===$.style.marginRight?zs($.style.marginLeft):"",Xs=$=>$.style.marginTop&&$.style.marginBottom&&$.style.marginTop===$.style.marginBottom?zs($.style.marginTop):"",dn=$=>$.style.borderWidth?zs($.style.borderWidth):"",ko=($,j)=>{var fe;return $.hasAttribute(j)&&(fe=$.getAttribute(j))!==null&&fe!==void 0?fe:""},xo=$=>$.parentNode!==null&&$.parentNode.nodeName==="FIGURE",ac=($,j,fe)=>{fe===""||fe===null?$.removeAttribute(j):$.setAttribute(j,fe)},da=$=>{const j=So.create("figure",{class:"image"});So.insertAfter(j,$),j.appendChild($),j.appendChild(So.create("figcaption",{contentEditable:"true"},"Caption")),j.contentEditable="false"},cn=$=>{const j=$.parentNode;Wn(j)&&(So.insertAfter($,j),So.remove(j))},Bc=$=>{xo($)?cn($):da($)},Ds=($,j)=>{const fe=$.getAttribute("style"),Ge=j(fe!==null?fe:"");Ge.length>0?($.setAttribute("style",Ge),$.setAttribute("data-mce-style",Ge)):$.removeAttribute("style")},Fc=($,j)=>(fe,Ge,ln)=>{const Go=fe.style;Go[Ge]?(Go[Ge]=wo(ln),Ds(fe,j)):ac(fe,Ge,ln)},Ma=($,j)=>$.style[j]?zs($.style[j]):ko($,j),zr=($,j)=>{const fe=wo(j);$.style.marginLeft=fe,$.style.marginRight=fe},Ss=($,j)=>{const fe=wo(j);$.style.marginTop=fe,$.style.marginBottom=fe},to=($,j)=>{const fe=wo(j);$.style.borderWidth=fe},os=($,j)=>{$.style.borderStyle=j},Wa=$=>{var j;return(j=$.style.borderStyle)!==null&&j!==void 0?j:""},Nc=$=>Wn($)&&$.nodeName==="FIGURE",Za=$=>$.nodeName==="IMG",gn=$=>{const j=So.getAttrib($,"alt"),fe=So.getAttrib($,"role");return $.hasAttribute("alt")&&j.length===0||fe==="presentation"||fe==="none"},Fr=$=>gn($)?"":ko($,"alt"),yr=()=>({src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}),Ti=($,j)=>{var fe;const Ge=document.createElement("img");return ac(Ge,"style",j.style),(ks(Ge)||j.hspace!=="")&&zr(Ge,j.hspace),(Xs(Ge)||j.vspace!=="")&&Ss(Ge,j.vspace),(dn(Ge)||j.border!=="")&&to(Ge,j.border),(Wa(Ge)||j.borderStyle!=="")&&os(Ge,j.borderStyle),$((fe=Ge.getAttribute("style"))!==null&&fe!==void 0?fe:"")},ge=($,j)=>{const fe=document.createElement("img");if(Ao($,{...j,caption:!1},fe),dt(fe,j.alt,j.isDecorative),j.caption){const Ge=So.create("figure",{class:"image"});return Ge.appendChild(fe),Ge.appendChild(So.create("figcaption",{contentEditable:"true"},"Caption")),Ge.contentEditable="false",Ge}else return fe},Ce=($,j)=>({src:ko(j,"src"),alt:Fr(j),title:ko(j,"title"),width:Ma(j,"width"),height:Ma(j,"height"),class:ko(j,"class"),style:$(ko(j,"style")),caption:xo(j),hspace:ks(j),vspace:Xs(j),border:dn(j),borderStyle:Wa(j),isDecorative:gn(j)}),Ie=($,j,fe,Ge,ln)=>{fe[Ge]!==j[Ge]&&ln($,Ge,String(fe[Ge]))},dt=($,j,fe)=>{if(fe){So.setAttrib($,"role","presentation");const Ge=ft.fromDom($);Xo(Ge,"alt","")}else{if(Rt(j)){const Ge=ft.fromDom($);ro(Ge,"alt")}else{const Ge=ft.fromDom($);Xo(Ge,"alt",j)}So.getAttrib($,"role")==="presentation"&&So.setAttrib($,"role","")}},Rn=($,j,fe)=>{(fe.alt!==j.alt||fe.isDecorative!==j.isDecorative)&&dt($,fe.alt,fe.isDecorative)},Zn=($,j)=>(fe,Ge,ln)=>{$(fe,ln),Ds(fe,j)},Ao=($,j,fe)=>{const Ge=Ce($,fe);Ie(fe,Ge,j,"caption",(ln,Go,Rs)=>Bc(ln)),Ie(fe,Ge,j,"src",ac),Ie(fe,Ge,j,"title",ac),Ie(fe,Ge,j,"width",Fc("width",$)),Ie(fe,Ge,j,"height",Fc("height",$)),Ie(fe,Ge,j,"class",ac),Ie(fe,Ge,j,"style",Zn((ln,Go)=>ac(ln,"style",Go),$)),Ie(fe,Ge,j,"hspace",Zn(zr,$)),Ie(fe,Ge,j,"vspace",Zn(Ss,$)),Ie(fe,Ge,j,"border",Zn(to,$)),Ie(fe,Ge,j,"borderStyle",Zn(os,$)),Rn(fe,Ge,j)},jo=($,j)=>{const fe=$.dom.styles.parse(j),Ge=mt(fe),ln=$.dom.styles.parse($.dom.styles.serialize(Ge));return $.dom.styles.serialize(ln)},qo=$=>{const j=$.selection.getNode(),fe=$.dom.getParent(j,"figure.image");return fe?$.dom.select("img",fe)[0]:j&&(j.nodeName!=="IMG"||uo(j))?null:j},Mo=($,j)=>{var fe;const Ge=$.dom,ln=Ct($.schema.getTextBlockElements(),(Rs,Or)=>!$.schema.isValidChild(Or,"figure")),Go=Ge.getParent(j.parentNode,Rs=>Eo(ln,Rs.nodeName),$.getBody());return Go&&(fe=Ge.split(Go,j))!==null&&fe!==void 0?fe:j},G=$=>{const j=qo($);return j?Ce(fe=>jo($,fe),j):yr()},we=($,j)=>{const fe=ge(ln=>jo($,ln),j);$.dom.setAttrib(fe,"data-mce-id","__mcenew"),$.focus(),$.insertContent(fe.outerHTML);const Ge=$.dom.select('*[data-mce-id="__mcenew"]')[0];if($.dom.setAttrib(Ge,"data-mce-id",null),Nc(Ge)){const ln=Mo($,Ge);$.selection.select(ln)}else $.selection.select(Ge)},gt=($,j)=>{$.dom.setAttrib(j,"src",j.getAttribute("src"))},Yt=($,j)=>{if(j){const fe=$.dom.is(j.parentNode,"figure.image")?j.parentNode:j;$.dom.remove(fe),$.focus(),$.nodeChanged(),$.dom.isEmpty($.getBody())&&($.setContent(""),$.selection.setCursorLocation())}},At=($,j)=>{const fe=qo($);if(fe)if(Ao(Ge=>jo($,Ge),j,fe),gt($,fe),Nc(fe.parentNode)){$.dom.setStyle(fe,"float","");const Ge=fe.parentNode;Mo($,Ge),$.selection.select(fe.parentNode)}else $.selection.select(fe),wn($,j,fe)},Mn=($,j)=>{const fe=j.src;return{...j,src:ts($,fe)?fe:""}},Tn=($,j)=>{const fe=qo($);if(fe){const ln={...Ce(Rs=>jo($,Rs),fe),...j},Go=Mn($,ln);ln.src?At($,Go):Yt($,fe)}else j.src&&we($,{...yr(),...j})};var nn=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),bo=tinymce.util.Tools.resolve("tinymce.util.Tools");const Lo=$=>$e($.value)?$.value:"",Qo=$=>$e($.text)?$.text:$e($.title)?$.title:"",bs=($,j)=>{const fe=[];return bo.each($,Ge=>{const ln=Qo(Ge);if(Ge.menu!==void 0){const Go=bs(Ge.menu,j);fe.push({text:ln,items:Go})}else{const Go=j(Ge);fe.push({text:ln,value:Go})}}),fe},Sa=($=Lo)=>j=>j?en.from(j).map(fe=>bs(fe,$)):en.none(),Er=$=>Sa(Lo)($),Ml=$=>k($,"items"),Gs=($,j)=>Kn($,fe=>Ml(fe)?Gs(fe.items,j):fe.value===j?en.some(fe):en.none()),Os={sanitizer:Sa,sanitize:Er,findEntry:($,j)=>$.bind(fe=>Gs(fe,j))},Vi={makeTab:$=>({title:"Advanced",name:"advanced",items:[{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]})},er=$=>{const j=Os.sanitizer(wc=>$.convertURL(wc.value||wc.url||"","src")),fe=new Promise(wc=>{Nt($,nd=>{wc(j(nd).map(od=>Qe([[{text:"None",value:""}],od])))})}),Ge=Os.sanitize(at($)),ln=Oe($),Go=me($),Rs=To($),Or=es($),Fa=G($),Cc=tt($),Ko=In($),ml=ke($),Rm=qe($),Zi=Fn($),mg=rn($),Mm=en.some(Re($)).filter(wc=>$e(wc)&&wc.length>0);return fe.then(wc=>({image:Fa,imageList:wc,classList:Ge,hasAdvTab:ln,hasUploadTab:Go,hasUploadUrl:Rs,hasUploadHandler:Or,hasDescription:Cc,hasImageTitle:Ko,hasDimensions:ml,hasImageCaption:Rm,prependURL:Mm,hasAccessibilityOptions:Zi,automaticUploads:mg}))},jn=$=>{const j={name:"src",type:"urlinput",filetype:"image",label:"Source",picker_text:"Browse files"},fe=$.imageList.map(Ko=>({name:"images",type:"listbox",label:"Image list",items:Ko})),Ge={name:"alt",type:"input",label:"Alternative description",enabled:!($.hasAccessibilityOptions&&$.image.isDecorative)},ln={name:"title",type:"input",label:"Image title"},Go={name:"dimensions",type:"sizeinput"},Rs={type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]},Or=$.classList.map(Ko=>({name:"classes",type:"listbox",label:"Class",items:Ko})),Fa={type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]},Cc=Ko=>Ko?{type:"grid",columns:2}:{type:"panel"};return Qe([[j],fe.toArray(),$.hasAccessibilityOptions&&$.hasDescription?[Rs]:[],$.hasDescription?[Ge]:[],$.hasImageTitle?[ln]:[],$.hasDimensions?[Go]:[],[{...Cc($.classList.isSome()&&$.hasImageCaption),items:Qe([Or.toArray(),$.hasImageCaption?[Fa]:[]])}]])},xa={makeTab:$=>({title:"General",name:"general",items:jn($)}),makeItems:jn},Ju={makeTab:$=>({title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput"}]})},bu=$=>({prevImage:Os.findEntry($.imageList,$.image.src),prevAlt:$.image.alt,open:!0}),Js=$=>({src:{value:$.src,meta:{}},images:$.src,alt:$.alt,title:$.title,dimensions:{width:$.width,height:$.height},classes:$.class,caption:$.caption,style:$.style,vspace:$.vspace,border:$.border,hspace:$.hspace,borderstyle:$.borderStyle,fileinput:[],isDecorative:$.isDecorative}),Ai=($,j)=>({src:$.src.value,alt:($.alt===null||$.alt.length===0)&&j?null:$.alt,title:$.title,width:$.dimensions.width,height:$.dimensions.height,class:$.classes,style:$.style,caption:$.caption,hspace:$.hspace,vspace:$.vspace,border:$.border,borderStyle:$.borderstyle,isDecorative:$.isDecorative}),ri=($,j)=>/^(?:[a-zA-Z]+:)?\/\//.test(j)?en.none():$.prependURL.bind(fe=>j.substring(0,fe.length)!==fe?en.some(fe+j):en.none()),Qu=($,j)=>{const fe=j.getData();ri($,fe.src.value).each(Ge=>{j.setData({src:{value:Ge,meta:fe.src.meta}})})},Gt=($,j,fe)=>{$.hasDescription&&$e(fe.alt)&&(j.alt=fe.alt),$.hasAccessibilityOptions&&(j.isDecorative=fe.isDecorative||j.isDecorative||!1),$.hasImageTitle&&$e(fe.title)&&(j.title=fe.title),$.hasDimensions&&($e(fe.width)&&(j.dimensions.width=fe.width),$e(fe.height)&&(j.dimensions.height=fe.height)),$e(fe.class)&&Os.findEntry($.classList,fe.class).each(Ge=>{j.classes=Ge.value}),$.hasImageCaption&&tn(fe.caption)&&(j.caption=fe.caption),$.hasAdvTab&&($e(fe.style)&&(j.style=fe.style),$e(fe.vspace)&&(j.vspace=fe.vspace),$e(fe.border)&&(j.border=fe.border),$e(fe.hspace)&&(j.hspace=fe.hspace),$e(fe.borderstyle)&&(j.borderstyle=fe.borderstyle))},Pc=($,j)=>{const fe=j.getData(),Ge=fe.src.meta;if(Ge!==void 0){const ln=pn({},fe);Gt($,ln,Ge),j.setData(ln)}},Ba=($,j,fe,Ge)=>{const ln=Ge.getData(),Go=ln.src.value,Rs=ln.src.meta||{};!Rs.width&&!Rs.height&&j.hasDimensions&&(Te(Go)?$.imageSize(Go).then(Or=>{fe.open&&Ge.setData({dimensions:Or})}).catch(Or=>console.error(Or)):Ge.setData({dimensions:{width:"",height:""}}))},ja=($,j,fe)=>{const Ge=fe.getData(),ln=Os.findEntry($.imageList,Ge.src.value);j.prevImage=ln,fe.setData({images:ln.map(Go=>Go.value).getOr("")})},ir=($,j,fe,Ge)=>{Qu(j,Ge),Pc(j,Ge),Ba($,j,fe,Ge),ja(j,fe,Ge)},vu=($,j,fe,Ge)=>{const ln=Ge.getData(),Go=Os.findEntry(j.imageList,ln.images);Go.each(Rs=>{ln.alt===""||fe.prevImage.map(Fa=>Fa.text===ln.alt).getOr(!1)?Rs.value===""?Ge.setData({src:Rs,alt:fe.prevAlt}):Ge.setData({src:Rs,alt:Rs.text}):Ge.setData({src:Rs})}),fe.prevImage=Go,ir($,j,fe,Ge)},qa=($,j,fe,Ge)=>{const ln=Ge.getData();Ge.block("Uploading image"),It(ln.fileinput).fold(()=>{Ge.unblock()},Go=>{const Rs=URL.createObjectURL(Go),Or=()=>{Ge.unblock(),URL.revokeObjectURL(Rs)},Fa=Cc=>{Ge.setData({src:{value:Cc,meta:{}}}),Ge.showTab("general"),ir($,j,fe,Ge),Ge.focus("src")};fn(Go).then(Cc=>{const Ko=$.createBlobCache(Go,Rs,Cc);j.automaticUploads?$.uploadImage(Ko).then(ml=>{Fa(ml.url),Or()}).catch(ml=>{Or(),$.alertErr(ml,()=>{Ge.focus("fileinput")})}):($.addToBlobCache(Ko),Fa(Ko.blobUri()),Ge.unblock())})})},yc=($,j,fe)=>(Ge,ln)=>{ln.name==="src"?ir($,j,fe,Ge):ln.name==="images"?vu($,j,fe,Ge):ln.name==="alt"?fe.prevAlt=Ge.getData().alt:ln.name==="fileinput"?qa($,j,fe,Ge):ln.name==="isDecorative"&&Ge.setEnabled("alt",!Ge.getData().isDecorative)},Bl=$=>()=>{$.open=!1},ed=$=>$.hasAdvTab||$.hasUploadUrl||$.hasUploadHandler?{type:"tabpanel",tabs:Qe([[xa.makeTab($)],$.hasAdvTab?[Vi.makeTab($)]:[],$.hasUploadTab&&($.hasUploadUrl||$.hasUploadHandler)?[Ju.makeTab($)]:[]])}:{type:"panel",items:xa.makeItems($)},Ui=($,j,fe)=>Ge=>{const ln=pn(Js(j.image),Ge.getData()),Go={...ln,style:Ti(fe.normalizeCss,Ai(ln,!1))};$.execCommand("mceUpdateImage",!1,Ai(Go,j.hasAccessibilityOptions)),$.editorUpload.uploadImagesAuto(),Ge.close()},yu=$=>j=>ts($,j)?eo($.documentBaseURI.toAbsolute(j)).then(fe=>({width:String(fe.width),height:String(fe.height)})):Promise.resolve({width:"",height:""}),Fl=$=>(j,fe,Ge)=>{var ln;return $.editorUpload.blobCache.create({blob:j,blobUri:fe,name:(ln=j.name)===null||ln===void 0?void 0:ln.replace(/\.[^\.]+$/,""),filename:j.name,base64:Ge.split(",")[1]})},Wi=$=>j=>{$.editorUpload.blobCache.add(j)},Nl=$=>(j,fe)=>{$.windowManager.alert(j,fe)},zt=$=>j=>jo($,j),dl=$=>j=>$.dom.parseStyle(j),td=$=>(j,fe)=>$.dom.serializeStyle(j,fe),U=$=>j=>nn($).upload([j],!1).then(fe=>{var Ge;return fe.length===0?Promise.reject("Failed to upload image"):fe[0].status===!1?Promise.reject((Ge=fe[0].error)===null||Ge===void 0?void 0:Ge.message):fe[0]}),ue=$=>{const j={imageSize:yu($),addToBlobCache:Wi($),createBlobCache:Fl($),alertErr:Nl($),normalizeCss:zt($),parseStyle:dl($),serializeStyle:td($),uploadImage:U($)};return{open:()=>{er($).then(Ge=>{const ln=bu(Ge);return{title:"Insert/Edit Image",size:"normal",body:ed(Ge),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Js(Ge.image),onSubmit:Ui($,Ge,j),onChange:yc(j,Ge,ln),onClose:Bl(ln)}}).then($.windowManager.open)}}},Me=$=>{$.addCommand("mceImage",ue($).open),$.addCommand("mceUpdateImage",(j,fe)=>{$.undoManager.transact(()=>Tn($,fe))})},ct=$=>{const j=$.attr("class");return Wn(j)&&/\bimage\b/.test(j)},Lt=$=>j=>{let fe=j.length;const Ge=ln=>{ln.attr("contenteditable",$?"true":null)};for(;fe--;){const ln=j[fe];ct(ln)&&(ln.attr("contenteditable",$?"false":null),bo.each(ln.getAll("figcaption"),Ge))}},mn=$=>{$.on("PreInit",()=>{$.parser.addNodeFilter("figure",Lt(!0)),$.serializer.addNodeFilter("figure",Lt(!1))})},Bo=$=>j=>{const fe=()=>{j.setEnabled($.selection.isEditable())};return $.on("NodeChange",fe),fe(),()=>{$.off("NodeChange",fe)}},yo=$=>{$.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:ue($).open,onSetup:j=>{j.setActive(Wn(qo($)));const fe=$.selection.selectorChangedWithUnbind("img:not([data-mce-object]):not([data-mce-placeholder]),figure.image",j.setActive).unbind,Ge=Bo($)(j);return()=>{fe(),Ge()}}}),$.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:ue($).open,onSetup:Bo($)}),$.ui.registry.addContextMenu("image",{update:j=>$.selection.isEditable()&&(Nc(j)||Za(j)&&!uo(j))?["image"]:[]})};var us=()=>{w.add("image",$=>{be($),mn($),yo($),Me($)})};us()})()),xQ}var TQ;function lse(){return TQ||(TQ=1,ise()),SQ}lse();var AQ={},_Q={},kQ;function use(){return kQ||(kQ=1,(function(){var w=tinymce.util.Tools.resolve("tinymce.PluginManager");const M=(be,ke)=>be.dispatch("insertCustomChar",{chr:ke}),L=(be,ke)=>{const Oe=M(be,ke).chr;be.execCommand("mceInsertContent",!1,Oe)},X=(be,ke,Oe)=>{var me;return Oe(be,ke.prototype)?!0:((me=be.constructor)===null||me===void 0?void 0:me.name)===ke.name},se=be=>{const ke=typeof be;return be===null?"null":ke==="object"&&Array.isArray(be)?"array":ke==="object"&&X(be,String,(Oe,me)=>me.isPrototypeOf(Oe))?"string":ke},le=be=>ke=>se(ke)===be,Se=be=>ke=>typeof ke===be,pe=be=>ke=>be===ke,$e=le("array"),Ue=pe(null),sn=pe(void 0),hn=be=>be==null,Rt=be=>!hn(be),tn=Se("function"),Wn=(be=>()=>be)(!1);class ze{constructor(ke,Oe){this.tag=ke,this.value=Oe}static some(ke){return new ze(!0,ke)}static none(){return ze.singletonNone}fold(ke,Oe){return this.tag?Oe(this.value):ke()}isSome(){return this.tag}isNone(){return!this.tag}map(ke){return this.tag?ze.some(ke(this.value)):ze.none()}bind(ke){return this.tag?ke(this.value):ze.none()}exists(ke){return this.tag&&ke(this.value)}forall(ke){return!this.tag||ke(this.value)}filter(ke){return!this.tag||ke(this.value)?this:ze.none()}getOr(ke){return this.tag?this.value:ke}or(ke){return this.tag?this:ke}getOrThunk(ke){return this.tag?this.value:ke()}orThunk(ke){return this.tag?this:ke()}getOrDie(ke){if(this.tag)return this.value;throw new Error(ke??"Called getOrDie on None")}static from(ke){return Rt(ke)?ze.some(ke):ze.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(ke){this.tag&&ke(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}ze.singletonNone=new ze(!1);const Gn=Array.prototype.push,Bt=(be,ke)=>{const Oe=be.length,me=new Array(Oe);for(let Re=0;Re<Oe;Re++){const at=be[Re];me[Re]=ke(at,Re)}return me},ie=(be,ke)=>{for(let Oe=0,me=be.length;Oe<me;Oe++){const Re=be[Oe];ke(Re,Oe)}},en=(be,ke,Oe)=>{for(let me=0,Re=be.length;me<Re;me++){const at=be[me];if(ke(at,me))return ze.some(at);if(Oe(at,me))break}return ze.none()},Ro=(be,ke)=>en(be,ke,Wn),Qe=be=>{const ke=[];for(let Oe=0,me=be.length;Oe<me;++Oe){if(!$e(be[Oe]))throw new Error("Arr.flatten item "+Oe+" was not an array, input: "+be);Gn.apply(ke,be[Oe])}return ke},K=(be,ke)=>Qe(Bt(be,ke)),It=be=>{let ke=be;return{get:()=>ke,set:Re=>{ke=Re}}},Kn=(be,ke,Oe=0,me)=>{const Re=be.indexOf(ke,Oe);return Re!==-1?sn(me)?!0:Re+ke.length<=me:!1},vn=String.fromCodePoint,Fe=(be,ke)=>{let Oe=null;const me=()=>{Ue(Oe)||(clearTimeout(Oe),Oe=null)};return{cancel:me,throttle:(...at)=>{me(),Oe=setTimeout(()=>{Oe=null,be.apply(null,at)},ke)}}};var he=tinymce.util.Tools.resolve("tinymce.util.Tools");const Cs=be=>ke=>ke.options.get(be),ut=be=>{const ke=be.options.register,Oe=me=>tn(me)||$e(me);ke("charmap",{processor:Oe}),ke("charmap_append",{processor:Oe})},Ct=Cs("charmap"),k=Cs("charmap_append"),Eo=he.isArray,bt="User Defined",Uo=()=>[{name:"Currency",characters:[[36,"dollar sign"],[162,"cent sign"],[8364,"euro sign"],[163,"pound sign"],[165,"yen sign"],[164,"currency sign"],[8352,"euro-currency sign"],[8353,"colon sign"],[8354,"cruzeiro sign"],[8355,"french franc sign"],[8356,"lira sign"],[8357,"mill sign"],[8358,"naira sign"],[8359,"peseta sign"],[8360,"rupee sign"],[8361,"won sign"],[8362,"new sheqel sign"],[8363,"dong sign"],[8365,"kip sign"],[8366,"tugrik sign"],[8367,"drachma sign"],[8368,"german penny symbol"],[8369,"peso sign"],[8370,"guarani sign"],[8371,"austral sign"],[8372,"hryvnia sign"],[8373,"cedi sign"],[8374,"livre tournois sign"],[8375,"spesmilo sign"],[8376,"tenge sign"],[8377,"indian rupee sign"],[8378,"turkish lira sign"],[8379,"nordic mark sign"],[8380,"manat sign"],[8381,"ruble sign"],[20870,"yen character"],[20803,"yuan character"],[22291,"yuan character, in hong kong and taiwan"],[22278,"yen/yuan character variant one"]]},{name:"Text",characters:[[169,"copyright sign"],[174,"registered sign"],[8482,"trade mark sign"],[8240,"per mille sign"],[181,"micro sign"],[183,"middle dot"],[8226,"bullet"],[8230,"three dot leader"],[8242,"minutes / feet"],[8243,"seconds / inches"],[167,"section sign"],[182,"paragraph sign"],[223,"sharp s / ess-zed"]]},{name:"Quotations",characters:[[8249,"single left-pointing angle quotation mark"],[8250,"single right-pointing angle quotation mark"],[171,"left pointing guillemet"],[187,"right pointing guillemet"],[8216,"left single quotation mark"],[8217,"right single quotation mark"],[8220,"left double quotation mark"],[8221,"right double quotation mark"],[8218,"single low-9 quotation mark"],[8222,"double low-9 quotation mark"],[60,"less-than sign"],[62,"greater-than sign"],[8804,"less-than or equal to"],[8805,"greater-than or equal to"],[8211,"en dash"],[8212,"em dash"],[175,"macron"],[8254,"overline"],[164,"currency sign"],[166,"broken bar"],[168,"diaeresis"],[161,"inverted exclamation mark"],[191,"turned question mark"],[710,"circumflex accent"],[732,"small tilde"],[176,"degree sign"],[8722,"minus sign"],[177,"plus-minus sign"],[247,"division sign"],[8260,"fraction slash"],[215,"multiplication sign"],[185,"superscript one"],[178,"superscript two"],[179,"superscript three"],[188,"fraction one quarter"],[189,"fraction one half"],[190,"fraction three quarters"]]},{name:"Mathematical",characters:[[402,"function / florin"],[8747,"integral"],[8721,"n-ary sumation"],[8734,"infinity"],[8730,"square root"],[8764,"similar to"],[8773,"approximately equal to"],[8776,"almost equal to"],[8800,"not equal to"],[8801,"identical to"],[8712,"element of"],[8713,"not an element of"],[8715,"contains as member"],[8719,"n-ary product"],[8743,"logical and"],[8744,"logical or"],[172,"not sign"],[8745,"intersection"],[8746,"union"],[8706,"partial differential"],[8704,"for all"],[8707,"there exists"],[8709,"diameter"],[8711,"backward difference"],[8727,"asterisk operator"],[8733,"proportional to"],[8736,"angle"]]},{name:"Extended Latin",characters:[[192,"A - grave"],[193,"A - acute"],[194,"A - circumflex"],[195,"A - tilde"],[196,"A - diaeresis"],[197,"A - ring above"],[256,"A - macron"],[198,"ligature AE"],[199,"C - cedilla"],[200,"E - grave"],[201,"E - acute"],[202,"E - circumflex"],[203,"E - diaeresis"],[274,"E - macron"],[204,"I - grave"],[205,"I - acute"],[206,"I - circumflex"],[207,"I - diaeresis"],[298,"I - macron"],[208,"ETH"],[209,"N - tilde"],[210,"O - grave"],[211,"O - acute"],[212,"O - circumflex"],[213,"O - tilde"],[214,"O - diaeresis"],[216,"O - slash"],[332,"O - macron"],[338,"ligature OE"],[352,"S - caron"],[217,"U - grave"],[218,"U - acute"],[219,"U - circumflex"],[220,"U - diaeresis"],[362,"U - macron"],[221,"Y - acute"],[376,"Y - diaeresis"],[562,"Y - macron"],[222,"THORN"],[224,"a - grave"],[225,"a - acute"],[226,"a - circumflex"],[227,"a - tilde"],[228,"a - diaeresis"],[229,"a - ring above"],[257,"a - macron"],[230,"ligature ae"],[231,"c - cedilla"],[232,"e - grave"],[233,"e - acute"],[234,"e - circumflex"],[235,"e - diaeresis"],[275,"e - macron"],[236,"i - grave"],[237,"i - acute"],[238,"i - circumflex"],[239,"i - diaeresis"],[299,"i - macron"],[240,"eth"],[241,"n - tilde"],[242,"o - grave"],[243,"o - acute"],[244,"o - circumflex"],[245,"o - tilde"],[246,"o - diaeresis"],[248,"o slash"],[333,"o macron"],[339,"ligature oe"],[353,"s - caron"],[249,"u - grave"],[250,"u - acute"],[251,"u - circumflex"],[252,"u - diaeresis"],[363,"u - macron"],[253,"y - acute"],[254,"thorn"],[255,"y - diaeresis"],[563,"y - macron"],[913,"Alpha"],[914,"Beta"],[915,"Gamma"],[916,"Delta"],[917,"Epsilon"],[918,"Zeta"],[919,"Eta"],[920,"Theta"],[921,"Iota"],[922,"Kappa"],[923,"Lambda"],[924,"Mu"],[925,"Nu"],[926,"Xi"],[927,"Omicron"],[928,"Pi"],[929,"Rho"],[931,"Sigma"],[932,"Tau"],[933,"Upsilon"],[934,"Phi"],[935,"Chi"],[936,"Psi"],[937,"Omega"],[945,"alpha"],[946,"beta"],[947,"gamma"],[948,"delta"],[949,"epsilon"],[950,"zeta"],[951,"eta"],[952,"theta"],[953,"iota"],[954,"kappa"],[955,"lambda"],[956,"mu"],[957,"nu"],[958,"xi"],[959,"omicron"],[960,"pi"],[961,"rho"],[962,"final sigma"],[963,"sigma"],[964,"tau"],[965,"upsilon"],[966,"phi"],[967,"chi"],[968,"psi"],[969,"omega"]]},{name:"Symbols",characters:[[8501,"alef symbol"],[982,"pi symbol"],[8476,"real part symbol"],[978,"upsilon - hook symbol"],[8472,"Weierstrass p"],[8465,"imaginary part"]]},{name:"Arrows",characters:[[8592,"leftwards arrow"],[8593,"upwards arrow"],[8594,"rightwards arrow"],[8595,"downwards arrow"],[8596,"left right arrow"],[8629,"carriage return"],[8656,"leftwards double arrow"],[8657,"upwards double arrow"],[8658,"rightwards double arrow"],[8659,"downwards double arrow"],[8660,"left right double arrow"],[8756,"therefore"],[8834,"subset of"],[8835,"superset of"],[8836,"not a subset of"],[8838,"subset of or equal to"],[8839,"superset of or equal to"],[8853,"circled plus"],[8855,"circled times"],[8869,"perpendicular"],[8901,"dot operator"],[8968,"left ceiling"],[8969,"right ceiling"],[8970,"left floor"],[8971,"right floor"],[9001,"left-pointing angle bracket"],[9002,"right-pointing angle bracket"],[9674,"lozenge"],[9824,"black spade suit"],[9827,"black club suit"],[9829,"black heart suit"],[9830,"black diamond suit"],[8194,"en space"],[8195,"em space"],[8201,"thin space"],[8204,"zero width non-joiner"],[8205,"zero width joiner"],[8206,"left-to-right mark"],[8207,"right-to-left mark"]]}],pn=be=>he.grep(be,ke=>Eo(ke)&&ke.length===2),Te=be=>Eo(be)?pn(be):typeof be=="function"?be():[],St=(be,ke)=>{const Oe=Ct(be);Oe&&(ke=[{name:bt,characters:Te(Oe)}]);const me=k(be);if(me){const Re=he.grep(ke,at=>at.name===bt);return Re.length?(Re[0].characters=[...Re[0].characters,...Te(me)],ke):ke.concat({name:bt,characters:Te(me)})}return ke},$n=be=>{const ke=St(be,Uo());return ke.length>1?[{name:"All",characters:K(ke,Oe=>Oe.characters)}].concat(ke):ke},Xe=be=>({getCharMap:()=>$n(be),insertChar:me=>{L(be,me)}}),qt=(be,ke,Oe)=>Kn(vn(be).toLowerCase(),Oe)?!0:Kn(ke.toLowerCase(),Oe)||Kn(ke.toLowerCase().replace(/\s+/g,""),Oe),Ne=(be,ke)=>{const Oe=[],me=ke.toLowerCase();return ie(be.characters,Re=>{qt(Re[0],Re[1],me)&&Oe.push(Re)}),Bt(Oe,Re=>({text:Re[1],value:vn(Re[0]),icon:vn(Re[0])}))},ft="pattern",P=(be,ke)=>{const Oe=()=>[{label:"Search",type:"input",name:ft},{type:"collection",name:"results"}],me=()=>Bt(ke,Wo=>({title:Wo.name,name:Wo.name,items:Oe()})),Re=()=>({type:"panel",items:Oe()}),at=()=>({type:"tabpanel",tabs:me()}),tt=ke.length===1?It(bt):It("All"),In=(Wo,eo)=>{Ro(ke,zs=>zs.name===tt.get()).each(zs=>{const wo=Ne(zs,eo);Wo.setData({results:wo})})},st=Fe(Wo=>{const eo=Wo.getData().pattern;In(Wo,eo)},40),Fn=ke.length===1?Re():at(),rn={pattern:"",results:Ne(ke[0],"")},To={title:"Special Character",size:"normal",body:Fn,buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:rn,onAction:(Wo,eo)=>{eo.name==="results"&&(L(be,eo.value),Wo.close())},onTabChange:(Wo,eo)=>{tt.set(eo.newTabName),st.throttle(Wo)},onChange:(Wo,eo)=>{eo.name===ft&&st.throttle(Wo)}};be.windowManager.open(To).focus(ft)},Xo=(be,ke)=>{be.addCommand("mceShowCharmap",()=>{P(be,ke)})},ro=(be,ke)=>{be.ui.registry.addAutocompleter("charmap",{trigger:":",columns:"auto",minChars:2,fetch:(Oe,me)=>new Promise((Re,at)=>{Re(Ne(ke,Oe))}),onAction:(Oe,me,Re)=>{be.selection.setRng(me),be.insertContent(Re),Oe.hide()}})},Qn=be=>ke=>{const Oe=()=>{ke.setEnabled(be.selection.isEditable())};return be.on("NodeChange",Oe),Oe(),()=>{be.off("NodeChange",Oe)}},_o=be=>{const ke=()=>be.execCommand("mceShowCharmap");be.ui.registry.addButton("charmap",{icon:"insert-character",tooltip:"Special character",onAction:ke,onSetup:Qn(be)}),be.ui.registry.addMenuItem("charmap",{icon:"insert-character",text:"Special character...",onAction:ke,onSetup:Qn(be)})};var ws=()=>{w.add("charmap",be=>{ut(be);const ke=$n(be);return Xo(be,ke),_o(be),ro(be,ke[0]),Xe(be)})};ws()})()),_Q}var DQ;function dse(){return DQ||(DQ=1,use()),AQ}dse();var OQ={},RQ={},MQ;function mse(){return MQ||(MQ=1,(function(){var w=tinymce.util.Tools.resolve("tinymce.PluginManager");const L=(mt=>Nt=>mt===Nt)(void 0),X=mt=>mt==null,se=mt=>!X(mt),le=mt=>()=>mt,Se=le(!1);class pe{constructor(Nt,wn){this.tag=Nt,this.value=wn}static some(Nt){return new pe(!0,Nt)}static none(){return pe.singletonNone}fold(Nt,wn){return this.tag?wn(this.value):Nt()}isSome(){return this.tag}isNone(){return!this.tag}map(Nt){return this.tag?pe.some(Nt(this.value)):pe.none()}bind(Nt){return this.tag?Nt(this.value):pe.none()}exists(Nt){return this.tag&&Nt(this.value)}forall(Nt){return!this.tag||Nt(this.value)}filter(Nt){return!this.tag||Nt(this.value)?this:pe.none()}getOr(Nt){return this.tag?this.value:Nt}or(Nt){return this.tag?this:Nt}getOrThunk(Nt){return this.tag?this.value:Nt()}orThunk(Nt){return this.tag?this:Nt()}getOrDie(Nt){if(this.tag)return this.value;throw new Error(Nt??"Called getOrDie on None")}static from(Nt){return se(Nt)?pe.some(Nt):pe.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Nt){this.tag&&Nt(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}pe.singletonNone=new pe(!1);const $e=(mt,Nt,wn)=>{for(let fn=0,uo=mt.length;fn<uo;fn++){const ts=mt[fn];if(Nt(ts,fn))return pe.some(ts);if(wn(ts,fn))break}return pe.none()},Ue=(mt,Nt)=>$e(mt,Nt,Se),sn=(mt,Nt)=>{for(let wn=0;wn<mt.length;wn++){const fn=Nt(mt[wn],wn);if(fn.isSome())return fn}return pe.none()},hn=(mt,Nt,wn=0,fn)=>{const uo=mt.indexOf(Nt,wn);return uo!==-1?L(fn)?!0:uo+Nt.length<=fn:!1},Rt=mt=>{let Nt=!1,wn;return(...fn)=>(Nt||(Nt=!0,wn=mt.apply(null,fn)),wn)},tn=(mt,Nt,wn,fn)=>{const uo=mt.isiOS()&&/ipad/i.test(wn)===!0,ts=mt.isiOS()&&!uo,So=mt.isiOS()||mt.isAndroid(),ks=So||fn("(pointer:coarse)"),Xs=uo||!ts&&So&&fn("(min-device-width:768px)"),dn=ts||So&&!Xs,ko=Nt.isSafari()&&mt.isiOS()&&/safari/i.test(wn)===!1,xo=!dn&&!Xs&&!ko;return{isiPad:le(uo),isiPhone:le(ts),isTablet:le(Xs),isPhone:le(dn),isTouch:le(ks),isAndroid:mt.isAndroid,isiOS:mt.isiOS,isWebView:le(ko),isDesktop:le(xo)}},fo=(mt,Nt)=>{for(let wn=0;wn<mt.length;wn++){const fn=mt[wn];if(fn.test(Nt))return fn}},Wn=(mt,Nt)=>{const wn=fo(mt,Nt);if(!wn)return{major:0,minor:0};const fn=uo=>Number(Nt.replace(wn,"$"+uo));return Bt(fn(1),fn(2))},ze=(mt,Nt)=>{const wn=String(Nt).toLowerCase();return mt.length===0?Gn():Wn(mt,wn)},Gn=()=>Bt(0,0),Bt=(mt,Nt)=>({major:mt,minor:Nt}),ie={nu:Bt,detect:ze,unknown:Gn},en=(mt,Nt)=>sn(Nt.brands,wn=>{const fn=wn.brand.toLowerCase();return Ue(mt,uo=>{var ts;return fn===((ts=uo.brand)===null||ts===void 0?void 0:ts.toLowerCase())}).map(uo=>({current:uo.name,version:ie.nu(parseInt(wn.version,10),0)}))}),Ro=(mt,Nt)=>{const wn=String(Nt).toLowerCase();return Ue(mt,fn=>fn.search(wn))},Qe=(mt,Nt)=>Ro(mt,Nt).map(wn=>{const fn=ie.detect(wn.versionRegexes,Nt);return{current:wn.name,version:fn}}),K=(mt,Nt)=>Ro(mt,Nt).map(wn=>{const fn=ie.detect(wn.versionRegexes,Nt);return{current:wn.name,version:fn}}),It=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Kn=mt=>Nt=>hn(Nt,mt),vn=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:mt=>hn(mt,"edge/")&&hn(mt,"chrome")&&hn(mt,"safari")&&hn(mt,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,It],search:mt=>hn(mt,"chrome")&&!hn(mt,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:mt=>hn(mt,"msie")||hn(mt,"trident")},{name:"Opera",versionRegexes:[It,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Kn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Kn("firefox")},{name:"Safari",versionRegexes:[It,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:mt=>(hn(mt,"safari")||hn(mt,"mobile/"))&&hn(mt,"applewebkit")}],Fe=[{name:"Windows",search:Kn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:mt=>hn(mt,"iphone")||hn(mt,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Kn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Kn("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Kn("linux"),versionRegexes:[]},{name:"Solaris",search:Kn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Kn("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Kn("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],he={browsers:le(vn),oses:le(Fe)},Cs="Edge",ut="Chromium",Ct="IE",k="Opera",Eo="Firefox",bt="Safari",Uo=()=>pn({current:void 0,version:ie.unknown()}),pn=mt=>{const Nt=mt.current,wn=mt.version,fn=uo=>()=>Nt===uo;return{current:Nt,version:wn,isEdge:fn(Cs),isChromium:fn(ut),isIE:fn(Ct),isOpera:fn(k),isFirefox:fn(Eo),isSafari:fn(bt)}},Te={unknown:Uo,nu:pn},St="Windows",$n="iOS",Xe="Android",qt="Linux",Ne="macOS",ft="Solaris",P="FreeBSD",Xo="ChromeOS",ro=()=>Qn({current:void 0,version:ie.unknown()}),Qn=mt=>{const Nt=mt.current,wn=mt.version,fn=uo=>()=>Nt===uo;return{current:Nt,version:wn,isWindows:fn(St),isiOS:fn($n),isAndroid:fn(Xe),isMacOS:fn(Ne),isLinux:fn(qt),isSolaris:fn(ft),isFreeBSD:fn(P),isChromeOS:fn(Xo)}},_o={unknown:ro,nu:Qn},be={detect:(mt,Nt,wn)=>{const fn=he.browsers(),uo=he.oses(),ts=Nt.bind(Xs=>en(fn,Xs)).orThunk(()=>Qe(fn,mt)).fold(Te.unknown,Te.nu),So=K(uo,mt).fold(_o.unknown,_o.nu),ks=tn(So,ts,mt,wn);return{browser:ts,os:So,deviceType:ks}}},ke=mt=>window.matchMedia(mt).matches;let Oe=Rt(()=>be.detect(window.navigator.userAgent,pe.from(window.navigator.userAgentData),ke));const me=()=>Oe(),Re=()=>me().os.isMacOS(),at=()=>me().os.isiOS(),tt=()=>{const mt=Re()||at();return`<script>(${(wn=>{document.addEventListener("click",fn=>{for(let uo=fn.target;uo;uo=uo.parentNode)if(uo.nodeName==="A"){const So=uo.getAttribute("href");if(So&&So.startsWith("#")){fn.preventDefault();const Xs=document.getElementById(So.substring(1));Xs&&Xs.scrollIntoView({behavior:"smooth"});return}(wn?fn.metaKey:fn.ctrlKey&&!fn.altKey)||fn.preventDefault()}},!1)}).toString()})(${mt})<\/script>`};var In=tinymce.util.Tools.resolve("tinymce.util.Tools");const qe=mt=>Nt=>Nt.options.get(mt),st=qe("content_style"),Fn=qe("content_css_cors"),rn=qe("body_class"),To=qe("body_id"),es=mt=>{var Nt;let wn="";const fn=mt.dom.encode,uo=(Nt=st(mt))!==null&&Nt!==void 0?Nt:"";wn+=`<base href="${fn(mt.documentBaseURI.getURI())}">`;const ts=Fn(mt)?' crossorigin="anonymous"':"";In.each(mt.contentCSS,xo=>{wn+='<link type="text/css" rel="stylesheet" href="'+fn(mt.documentBaseURI.toAbsolute(xo))+'"'+ts+">"}),uo&&(wn+='<style type="text/css">'+uo+"</style>");const So=To(mt),ks=rn(mt),Xs=mt.getBody().dir,dn=Xs?' dir="'+fn(Xs)+'"':"";return"<!DOCTYPE html><html><head>"+wn+'</head><body id="'+fn(So)+'" class="mce-content-body '+fn(ks)+'"'+dn+">"+mt.getContent()+tt()+"</body></html>"},Wo=mt=>{const Nt=es(mt);mt.windowManager.open({title:"Preview",size:"large",body:{type:"panel",items:[{name:"preview",type:"iframe",sandboxed:!0,transparent:!1}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{preview:Nt}}).focus("close")},eo=mt=>{mt.addCommand("mcePreview",()=>{Wo(mt)})},zs=mt=>{const Nt=()=>mt.execCommand("mcePreview");mt.ui.registry.addButton("preview",{icon:"preview",tooltip:"Preview",onAction:Nt,context:"any"}),mt.ui.registry.addMenuItem("preview",{icon:"preview",text:"Preview",onAction:Nt,context:"any"})};var wo=()=>{w.add("preview",mt=>{eo(mt),zs(mt)})};wo()})()),RQ}var BQ;function fse(){return BQ||(BQ=1,mse()),OQ}fse();var FQ={},NQ={},PQ;function gse(){return PQ||(PQ=1,(function(){var w=tinymce.util.Tools.resolve("tinymce.PluginManager"),M=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),L=tinymce.util.Tools.resolve("tinymce.util.Tools");const X=ut=>Ct=>Ct.options.get(ut),se=ut=>{const Ct=ut.options.register;Ct("allow_html_in_named_anchor",{processor:"boolean",default:!1})},le=X("allow_html_in_named_anchor"),Se="a:not([href])",pe=ut=>!ut,$e=ut=>ut.getAttribute("id")||ut.getAttribute("name")||"",Ue=ut=>ut.nodeName.toLowerCase()==="a",sn=ut=>Ue(ut)&&!ut.getAttribute("href")&&$e(ut)!=="",hn=ut=>sn(ut)&&!ut.firstChild,Rt=ut=>{const Ct=ut.dom;M(Ct).walk(ut.selection.getRng(),k=>{L.each(k,Eo=>{hn(Eo)&&Ct.remove(Eo,!1)})})},tn=ut=>/^[A-Za-z][A-Za-z0-9\-:._]*$/.test(ut),fo=ut=>ut.dom.getParent(ut.selection.getStart(),Se),Wn=ut=>{const Ct=fo(ut);return Ct?$e(Ct):""},ze=(ut,Ct)=>{ut.undoManager.transact(()=>{le(ut)||ut.selection.collapse(!0),ut.selection.isCollapsed()?ut.insertContent(ut.dom.createHTML("a",{id:Ct})):(Rt(ut),ut.formatter.remove("namedAnchor",void 0,void 0,!0),ut.formatter.apply("namedAnchor",{value:Ct}),ut.addVisual())})},Gn=(ut,Ct,k)=>{k.removeAttribute("name"),k.id=Ct,ut.addVisual(),ut.undoManager.add()},Bt=(ut,Ct)=>{const k=fo(ut);k?Gn(ut,Ct,k):ze(ut,Ct),ut.focus()},ie=(ut,Ct)=>tn(Ct)?(Bt(ut,Ct),!0):(ut.windowManager.alert("ID should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores."),!1),en=ut=>{const Ct=Wn(ut);ut.windowManager.open({title:"Anchor",size:"normal",body:{type:"panel",items:[{name:"id",type:"input",label:"ID",placeholder:"example"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{id:Ct},onSubmit:k=>{ie(ut,k.getData().id)&&k.close()}})},Ro=ut=>{ut.addCommand("mceAnchor",()=>{en(ut)})},Qe=ut=>pe(ut.attr("href"))&&!pe(ut.attr("id")||ut.attr("name")),K=ut=>Qe(ut)&&!ut.firstChild,It=ut=>Ct=>{for(let k=0;k<Ct.length;k++){const Eo=Ct[k];K(Eo)&&Eo.attr("contenteditable",ut)}},Kn=ut=>{ut.on("PreInit",()=>{ut.parser.addNodeFilter("a",It("false")),ut.serializer.addNodeFilter("a",It(null))})},vn=ut=>{ut.formatter.register("namedAnchor",{inline:"a",selector:Se,remove:"all",split:!0,deep:!0,attributes:{id:"%value"},onmatch:(Ct,k,Eo)=>sn(Ct)})},Fe=ut=>Ct=>{const k=()=>{Ct.setEnabled(ut.selection.isEditable())};return ut.on("NodeChange",k),k(),()=>{ut.off("NodeChange",k)}},he=ut=>{const Ct=()=>ut.execCommand("mceAnchor");ut.ui.registry.addToggleButton("anchor",{icon:"bookmark",tooltip:"Anchor",onAction:Ct,onSetup:k=>{const Eo=ut.selection.selectorChangedWithUnbind("a:not([href])",k.setActive).unbind,bt=Fe(ut)(k);return()=>{Eo(),bt()}}}),ut.ui.registry.addMenuItem("anchor",{icon:"bookmark",text:"Anchor...",onAction:Ct,onSetup:Fe(ut)})};var Cs=()=>{w.add("anchor",ut=>{se(ut),Kn(ut),Ro(ut),he(ut),ut.on("PreInit",()=>{vn(ut)})})};Cs()})()),NQ}var $Q;function hse(){return $Q||($Q=1,gse()),FQ}hse();var IQ={},LQ={},HQ;function pse(){return HQ||(HQ=1,(function(){const w=(G,we,gt)=>{var Yt;return gt(G,we.prototype)?!0:((Yt=G.constructor)===null||Yt===void 0?void 0:Yt.name)===we.name},M=G=>{const we=typeof G;return G===null?"null":we==="object"&&Array.isArray(G)?"array":we==="object"&&w(G,String,(gt,Yt)=>Yt.isPrototypeOf(gt))?"string":we},L=G=>we=>M(we)===G,X=G=>we=>typeof we===G,se=L("string"),le=L("array"),Se=X("boolean"),pe=G=>G==null,$e=G=>!pe(G),Ue=X("number"),sn=()=>{},hn=G=>()=>G,Rt=hn(!0);class tn{constructor(we,gt){this.tag=we,this.value=gt}static some(we){return new tn(!0,we)}static none(){return tn.singletonNone}fold(we,gt){return this.tag?gt(this.value):we()}isSome(){return this.tag}isNone(){return!this.tag}map(we){return this.tag?tn.some(we(this.value)):tn.none()}bind(we){return this.tag?we(this.value):tn.none()}exists(we){return this.tag&&we(this.value)}forall(we){return!this.tag||we(this.value)}filter(we){return!this.tag||we(this.value)?this:tn.none()}getOr(we){return this.tag?this.value:we}or(we){return this.tag?this:we}getOrThunk(we){return this.tag?this.value:we()}orThunk(we){return this.tag?this:we()}getOrDie(we){if(this.tag)return this.value;throw new Error(we??"Called getOrDie on None")}static from(we){return $e(we)?tn.some(we):tn.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(we){this.tag&&we(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}tn.singletonNone=new tn(!1);const fo=Array.prototype.slice,Wn=Array.prototype.push,ze=(G,we)=>{const gt=G.length,Yt=new Array(gt);for(let At=0;At<gt;At++){const Mn=G[At];Yt[At]=we(Mn,At)}return Yt},Gn=(G,we)=>{for(let gt=0,Yt=G.length;gt<Yt;gt++){const At=G[gt];we(At,gt)}},Bt=(G,we)=>{for(let gt=G.length-1;gt>=0;gt--){const Yt=G[gt];we(Yt,gt)}},ie=(G,we)=>{if(G.length===0)return[];{let gt=we(G[0]);const Yt=[];let At=[];for(let Mn=0,Tn=G.length;Mn<Tn;Mn++){const nn=G[Mn],bo=we(nn);bo!==gt&&(Yt.push(At),At=[]),gt=bo,At.push(nn)}return At.length!==0&&Yt.push(At),Yt}},en=(G,we,gt)=>(Gn(G,(Yt,At)=>{gt=we(gt,Yt,At)}),gt),Ro=G=>{const we=[];for(let gt=0,Yt=G.length;gt<Yt;++gt){if(!le(G[gt]))throw new Error("Arr.flatten item "+gt+" was not an array, input: "+G);Wn.apply(we,G[gt])}return we},Qe=(G,we)=>Ro(ze(G,we)),K=(G,we)=>{const gt=fo.call(G,0);return gt.sort(we),gt},It=Object.hasOwnProperty,Kn=(G,we)=>It.call(G,we),vn=G=>{let we=G;return{get:()=>we,set:At=>{we=At}}},Fe=G=>{const we=vn(tn.none()),gt=()=>we.get().each(G);return{clear:()=>{gt(),we.set(tn.none())},isSet:()=>we.get().isSome(),get:()=>we.get(),set:nn=>{gt(),we.set(tn.some(nn))}}},he=()=>{const G=Fe(sn);return{...G,on:gt=>G.get().each(gt)}};var Cs=tinymce.util.Tools.resolve("tinymce.PluginManager");const k=hn("[~|!-*+-\\/:;?@\\[-`{};----------------------------------------------]");var Eo=tinymce.util.Tools.resolve("tinymce.Env"),bt=tinymce.util.Tools.resolve("tinymce.util.Tools");const Uo=(G,we)=>{const Yt=(we||document).createElement("div");if(Yt.innerHTML=G,!Yt.hasChildNodes()||Yt.childNodes.length>1){const At="HTML does not have a single root node";throw console.error(At,G),new Error(At)}return St(Yt.childNodes[0])},pn=(G,we)=>{const Yt=(we||document).createElement(G);return St(Yt)},Te=(G,we)=>{const Yt=(we||document).createTextNode(G);return St(Yt)},St=G=>{if(G==null)throw new Error("Node cannot be null or undefined");return{dom:G}},Xe={fromHtml:Uo,fromTag:pn,fromText:Te,fromDom:St,fromPoint:(G,we,gt)=>tn.from(G.dom.elementFromPoint(we,gt)).map(St)},qt=9,Ne=11,ft=1,P=3,Xo=G=>G.nodeType!==ft&&G.nodeType!==qt&&G.nodeType!==Ne||G.childElementCount===0,ro=(G,we)=>{const gt=we===void 0?document:we.dom;return Xo(gt)?[]:ze(gt.querySelectorAll(G),Xe.fromDom)},Qn=(G,we,gt)=>(G.compareDocumentPosition(we)&gt)!==0,_o=(G,we)=>Qn(G,we,Node.DOCUMENT_POSITION_PRECEDING),ws=G=>G.dom.nodeType,ke=(G=>we=>ws(we)===G)(P),Oe=G=>tn.from(G.dom.parentNode).map(Xe.fromDom),me=G=>ze(G.dom.childNodes,Xe.fromDom),Re=(G,we)=>({element:G,offset:we}),at=(G,we)=>{const gt=me(G);return gt.length>0&&we<gt.length?Re(gt[we],0):Re(G,we)},tt=(G,we)=>{Oe(G).each(Yt=>{Yt.dom.insertBefore(we.dom,G.dom)})},In=(G,we)=>{G.dom.appendChild(we.dom)},qe=(G,we)=>{tt(G,we),In(we,G)},st=(G,we,gt)=>{if(se(gt)||Se(gt)||Ue(gt))G.setAttribute(we,gt+"");else throw console.error("Invalid call to Attribute.set. Key ",we,":: Value ",gt,":: Element ",G),new Error("Attribute value was not simple")},Fn=(G,we,gt)=>{st(G.dom,we,gt)},To=((G,we)=>{const gt=Mn=>{if(!G(Mn))throw new Error("Can only get "+we+" value of a "+we+" node");return Yt(Mn).getOr("")},Yt=Mn=>G(Mn)?tn.from(Mn.dom.nodeValue):tn.none();return{get:gt,getOption:Yt,set:(Mn,Tn)=>{if(!G(Mn))throw new Error("Can only set raw "+we+" value of a "+we+" node");Mn.dom.nodeValue=Tn}}})(ke,"text"),es=G=>To.get(G),Wo=(G,we)=>ro(we,G);var eo=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker");const zs=(G,we)=>G.isBlock(we)||Kn(G.schema.getVoidElements(),we.nodeName),wo=(G,we)=>!G.isEditable(we),mt=(G,we)=>G.getContentEditable(we)==="true"&&we.parentNode&&!G.isEditable(we.parentNode),Nt=(G,we)=>!G.isBlock(we)&&Kn(G.schema.getWhitespaceElements(),we.nodeName),wn=(G,we)=>zs(G,we)||wo(G,we)||Nt(G,we)||mt(G,we),fn=G=>G.nodeType===3,uo=()=>({sOffset:0,fOffset:0,elements:[]}),ts=(G,we)=>at(Xe.fromDom(G),we),So=(G,we,gt,Yt,At,Mn=!0)=>{let Tn=Mn?we(!1):gt;for(;Tn;){const nn=wo(G,Tn);if(nn||Nt(G,Tn)){if(nn?Yt.cef(Tn):Yt.boundary(Tn))break;Tn=we(!0);continue}else if(zs(G,Tn)){if(Yt.boundary(Tn))break}else fn(Tn)&&Yt.text(Tn);if(Tn===At)break;Tn=we(!1)}},ks=(G,we,gt,Yt,At)=>{var Mn;if(wn(G,gt))return;const Tn=(Mn=G.getParent(Yt,G.isBlock))!==null&&Mn!==void 0?Mn:G.getRoot(),nn=new eo(gt,Tn),bo=At?nn.next.bind(nn):nn.prev.bind(nn);So(G,bo,gt,{boundary:Rt,cef:Rt,text:Lo=>{At?we.fOffset+=Lo.length:we.sOffset+=Lo.length,we.elements.push(Xe.fromDom(Lo))}})},Xs=(G,we,gt,Yt,At,Mn=!0)=>{const Tn=new eo(gt,we),nn=[];let bo=uo();ks(G,bo,gt,we,!1);const Lo=()=>(bo.elements.length>0&&(nn.push(bo),bo=uo()),!1);return So(G,Tn.next.bind(Tn),gt,{boundary:Lo,cef:Qo=>(Lo(),At&&nn.push(...At.cef(Qo)),!1),text:Qo=>{bo.elements.push(Xe.fromDom(Qo)),At&&At.text(Qo,bo)}},Yt,Mn),Yt&&ks(G,bo,Yt,we,!0),Lo(),nn},dn=(G,we)=>{const gt=ts(we.startContainer,we.startOffset),Yt=gt.element.dom,At=ts(we.endContainer,we.endOffset),Mn=At.element.dom;return Xs(G,we.commonAncestorContainer,Yt,Mn,{text:(Tn,nn)=>{Tn===Mn?nn.fOffset+=Tn.length-At.offset:Tn===Yt&&(nn.sOffset+=gt.offset)},cef:Tn=>{const nn=Qe(Wo(Xe.fromDom(Tn),"*[contenteditable=true]"),bo=>{const Lo=bo.dom;return Xs(G,Lo,Lo)});return K(nn,(bo,Lo)=>_o(bo.elements[0].dom,Lo.elements[0].dom)?1:-1)}},!1)},ko=(G,we)=>we.collapsed?[]:dn(G,we),xo=(G,we)=>{const gt=G.createRng();return gt.selectNode(we),ko(G,gt)},ac=(G,we)=>Qe(we,gt=>xo(G,gt)),da=(G,we,gt=0,Yt=G.length)=>{const At=we.regex;At.lastIndex=gt;const Mn=[];let Tn;for(;Tn=At.exec(G);){const nn=Tn[we.matchIndex],bo=Tn.index+Tn[0].indexOf(nn),Lo=bo+nn.length;if(Lo>Yt)break;Mn.push({start:bo,finish:Lo}),At.lastIndex=Lo}return Mn},cn=(G,we)=>{const gt=en(G,(Yt,At)=>{const Mn=es(At),Tn=Yt.last,nn=Tn+Mn.length,bo=Qe(we,(Lo,Qo)=>Lo.start<nn&&Lo.finish>Tn?[{element:At,start:Math.max(Tn,Lo.start)-Tn,finish:Math.min(nn,Lo.finish)-Tn,matchId:Qo}]:[]);return{results:Yt.results.concat(bo),last:nn}},{results:[],last:0}).results;return ie(gt,Yt=>Yt.matchId)},Bc=(G,we)=>Qe(we,gt=>{const Yt=gt.elements,At=ze(Yt,es).join(""),Mn=da(At,G,gt.sOffset,At.length-gt.fOffset);return cn(Yt,Mn)}),Ds=(G,we)=>{Bt(G,(gt,Yt)=>{Bt(gt,At=>{const Mn=Xe.fromDom(we.cloneNode(!1));Fn(Mn,"data-mce-index",Yt);const Tn=At.element.dom;if(Tn.length===At.finish&&At.start===0)qe(At.element,Mn);else{Tn.length!==At.finish&&Tn.splitText(At.finish);const nn=Tn.splitText(At.start);qe(Xe.fromDom(nn),Mn)}})})},Fc=(G,we,gt,Yt)=>{const At=xo(G,gt),Mn=Bc(we,At);return Ds(Mn,Yt),Mn.length},Ma=(G,we,gt,Yt)=>{const At=gt.getBookmark(),Mn=G.select("td[data-mce-selected],th[data-mce-selected]"),Tn=Mn.length>0?ac(G,Mn):ko(G,gt.getRng()),nn=Bc(we,Tn);return Ds(nn,Yt),gt.moveToBookmark(At),nn.length},zr=G=>G.getAttribute("data-mce-index"),Ss=(G,we,gt,Yt)=>{const At=G.dom.create("span",{"data-mce-bogus":1});At.className="mce-match-marker";const Mn=G.getBody();return Ce(G,we,!1),Yt?Ma(G.dom,gt,G.selection,At):Fc(G.dom,gt,Mn,At)},to=G=>{var we;const gt=G.parentNode;G.firstChild&&gt.insertBefore(G.firstChild,G),(we=G.parentNode)===null||we===void 0||we.removeChild(G)},os=(G,we)=>{const gt=[],Yt=bt.toArray(G.getBody().getElementsByTagName("span"));if(Yt.length)for(let At=0;At<Yt.length;At++){const Mn=zr(Yt[At]);Mn===null||!Mn.length||Mn===we.toString()&&gt.push(Yt[At])}return gt},Wa=(G,we,gt)=>{const Yt=we.get();let At=Yt.index;const Mn=G.dom;gt?At+1===Yt.count?At=0:At++:At-1===-1?At=Yt.count-1:At--,Mn.removeClass(os(G,Yt.index),"mce-match-marker-selected");const Tn=os(G,At);return Tn.length?(Mn.addClass(os(G,At),"mce-match-marker-selected"),G.selection.scrollIntoView(Tn[0]),At):-1},Nc=(G,we)=>{const gt=we.parentNode;G.remove(we),gt&&G.isEmpty(gt)&&G.remove(gt)},Za=(G,we)=>{const Yt="("+G.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&").replace(/\s/g,"[^\\S\\r\\n\\uFEFF]")+")";return we?`(?:^|\\s|${k()})`+Yt+`(?=$|\\s|${k()})`:Yt},gn=(G,we,gt,Yt,At,Mn)=>{const Tn=G.selection,nn=Za(gt,At),bo=Tn.isForward(),Lo={regex:new RegExp(nn,Yt?"g":"gi"),matchIndex:1},Qo=Ss(G,we,Lo,Mn);if(Eo.browser.isSafari()&&Tn.setRng(Tn.getRng(),bo),Qo){const bs=Wa(G,we,!0);we.set({index:bs,count:Qo,text:gt,matchCase:Yt,wholeWord:At,inSelection:Mn})}return Qo},Fr=(G,we)=>{const gt=Wa(G,we,!0);we.set({...we.get(),index:gt})},yr=(G,we)=>{const gt=Wa(G,we,!1);we.set({...we.get(),index:gt})},Ti=G=>{const we=zr(G);return we!==null&&we.length>0},ge=(G,we,gt,Yt,At)=>{const Mn=we.get(),Tn=Mn.index;let nn,bo=Tn;Yt=Yt!==!1;const Lo=G.getBody(),Qo=bt.grep(bt.toArray(Lo.getElementsByTagName("span")),Ti);for(let bs=0;bs<Qo.length;bs++){const Sa=zr(Qo[bs]);let Er=nn=parseInt(Sa,10);if(At||Er===Mn.index){for(gt.length?(Qo[bs].innerText=gt,to(Qo[bs])):Nc(G.dom,Qo[bs]);Qo[++bs];)if(Er=parseInt(zr(Qo[bs]),10),Er===nn)Nc(G.dom,Qo[bs]);else{bs--;break}Yt&&bo--}else nn>Tn&&Qo[bs].setAttribute("data-mce-index",String(nn-1))}return we.set({...Mn,count:At?0:Mn.count-1,index:bo}),Yt?Fr(G,we):yr(G,we),!At&&we.get().count>0},Ce=(G,we,gt)=>{let Yt,At;const Mn=we.get(),Tn=bt.toArray(G.getBody().getElementsByTagName("span"));for(let nn=0;nn<Tn.length;nn++){const bo=zr(Tn[nn]);bo!==null&&bo.length&&(bo===Mn.index.toString()&&(Yt||(Yt=Tn[nn].firstChild),At=Tn[nn].firstChild),to(Tn[nn]))}if(we.set({...Mn,index:-1,count:0,text:""}),Yt&&At){const nn=G.dom.createRng();return nn.setStart(Yt,0),nn.setEnd(At,At.data.length),gt!==!1&&G.selection.setRng(nn),nn}else return},Ie=(G,we)=>we.get().count>1,dt=(G,we)=>we.get().count>1,Rn=(G,we)=>({done:nn=>Ce(G,we,nn),find:(nn,bo,Lo,Qo=!1)=>gn(G,we,nn,bo,Lo,Qo),next:()=>Fr(G,we),prev:()=>yr(G,we),replace:(nn,bo,Lo)=>ge(G,we,nn,bo,Lo)}),Zn=(G,we)=>{const gt=he();G.undoManager.add();const Yt=bt.trim(G.selection.getContent({format:"text"})),At=Gs=>{Gs.setEnabled("next",Ie(G,we)),Gs.setEnabled("prev",dt(G,we))},Mn=Gs=>{const rs=Gs.getData(),Os=we.get();we.set({...Os,matchCase:rs.matchcase,wholeWord:rs.wholewords,inSelection:rs.inselection})},Tn=(Gs,rs)=>{Gn(["replace","replaceall","prev","next"],Vi=>Gs.setEnabled(Vi,!rs))},nn=(Gs,rs)=>{rs.redial(Ml(Gs,rs.getData()))},bo=(Gs,rs)=>{Eo.browser.isSafari()&&Eo.deviceType.isTouch()&&(rs==="find"||rs==="replace"||rs==="replaceall")&&Gs.focus(rs)},Lo=Gs=>{Ce(G,we,!1),Tn(Gs,!0),At(Gs)},Qo=Gs=>{const rs=Gs.getData(),Os=we.get();if(!rs.findtext.length){Lo(Gs);return}if(Os.text===rs.findtext&&Os.matchCase===rs.matchcase&&Os.wholeWord===rs.wholewords)Fr(G,we);else{const ma=gn(G,we,rs.findtext,rs.matchcase,rs.wholewords,rs.inselection);ma<=0&&nn(!0,Gs),Tn(Gs,ma===0)}At(Gs)},bs=we.get(),Sa={findtext:Yt,replacetext:"",wholewords:bs.wholeWord,matchcase:bs.matchCase,inselection:bs.inSelection},Er=Gs=>{const rs=[{type:"label",label:"Find",for:"findtext",items:[{type:"bar",items:[{type:"input",name:"findtext",maximized:!0,inputMode:"search"},{type:"button",name:"prev",text:"Previous",icon:"action-prev",enabled:!1,borderless:!0},{type:"button",name:"next",text:"Next",icon:"action-next",enabled:!1,borderless:!0}]}]},{type:"input",name:"replacetext",label:"Replace with",inputMode:"search"}];return Gs&&rs.push({type:"alertbanner",level:"error",text:"Could not find the specified string.",icon:"warning"}),rs},Ml=(Gs,rs)=>({title:"Find and Replace",size:"normal",body:{type:"panel",items:Er(Gs)},buttons:[{type:"menu",name:"options",icon:"preferences",tooltip:"Preferences",align:"start",items:[{type:"togglemenuitem",name:"matchcase",text:"Match case"},{type:"togglemenuitem",name:"wholewords",text:"Find whole words only"},{type:"togglemenuitem",name:"inselection",text:"Find in selection"}]},{type:"custom",name:"find",text:"Find",primary:!0},{type:"custom",name:"replace",text:"Replace",enabled:!1},{type:"custom",name:"replaceall",text:"Replace all",enabled:!1}],initialData:rs,onChange:(Os,ma)=>{Gs&&nn(!1,Os),ma.name==="findtext"&&we.get().count>0&&Lo(Os)},onAction:(Os,ma)=>{const Vi=Os.getData();switch(ma.name){case"find":Qo(Os);break;case"replace":ge(G,we,Vi.replacetext)?At(Os):Lo(Os);break;case"replaceall":ge(G,we,Vi.replacetext,!0,!0),Lo(Os);break;case"prev":yr(G,we),At(Os);break;case"next":Fr(G,we),At(Os);break;case"matchcase":case"wholewords":case"inselection":nn(!1,Os),Mn(Os),Lo(Os);break}bo(Os,ma.name)},onSubmit:Os=>{Qo(Os),bo(Os,"find")},onClose:()=>{G.focus(),Ce(G,we),G.undoManager.add()}});gt.set(G.windowManager.open(Ml(!1,Sa),{inline:"toolbar"}))},Ao=(G,we)=>{G.addCommand("SearchReplace",()=>{Zn(G,we)})},jo=(G,we)=>()=>{Zn(G,we)},qo=(G,we)=>{G.ui.registry.addMenuItem("searchreplace",{text:"Find and replace...",shortcut:"Meta+F",onAction:jo(G,we),icon:"search"}),G.ui.registry.addButton("searchreplace",{tooltip:"Find and replace",onAction:jo(G,we),icon:"search",shortcut:"Meta+F"}),G.shortcuts.add("Meta+F","",jo(G,we))};var Mo=()=>{Cs.add("searchreplace",G=>{const we=vn({index:-1,count:0,text:"",matchCase:!1,wholeWord:!1,inSelection:!1});return Ao(G,we),qo(G,we),Rn(G,we)})};Mo()})()),LQ}var zQ;function bse(){return zQ||(zQ=1,pse()),IQ}bse();var VQ={},UQ={},WQ;function vse(){return WQ||(WQ=1,(function(){const w=Rt=>{let tn=Rt;return{get:()=>tn,set:ze=>{tn=ze}}};var M=tinymce.util.Tools.resolve("tinymce.PluginManager");const L=(Rt,tn)=>{Rt.dispatch("VisualBlocks",{state:tn})},X=(Rt,tn,fo)=>{Rt.dom.toggleClass(Rt.getBody(),"mce-visualblocks"),fo.set(!fo.get()),L(Rt,fo.get())},se=(Rt,tn,fo)=>{Rt.addCommand("mceVisualBlocks",()=>{X(Rt,tn,fo)})},le=Rt=>tn=>tn.options.get(Rt),Se=Rt=>{const tn=Rt.options.register;tn("visualblocks_default_state",{processor:"boolean",default:!1})},pe=le("visualblocks_default_state"),$e=(Rt,tn,fo)=>{Rt.on("PreviewFormats AfterPreviewFormats",Wn=>{fo.get()&&Rt.dom.toggleClass(Rt.getBody(),"mce-visualblocks",Wn.type==="afterpreviewformats")}),Rt.on("init",()=>{pe(Rt)&&X(Rt,tn,fo)})},Ue=(Rt,tn)=>fo=>{fo.setActive(tn.get());const Wn=ze=>fo.setActive(ze.state);return Rt.on("VisualBlocks",Wn),()=>Rt.off("VisualBlocks",Wn)},sn=(Rt,tn)=>{const fo=()=>Rt.execCommand("mceVisualBlocks");Rt.ui.registry.addToggleButton("visualblocks",{icon:"visualblocks",tooltip:"Show blocks",onAction:fo,onSetup:Ue(Rt,tn),context:"any"}),Rt.ui.registry.addToggleMenuItem("visualblocks",{text:"Show blocks",icon:"visualblocks",onAction:fo,onSetup:Ue(Rt,tn),context:"any"})};var hn=()=>{M.add("visualblocks",(Rt,tn)=>{Se(Rt);const fo=w(!1);se(Rt,tn,fo),sn(Rt,fo),$e(Rt,tn,fo)})};hn()})()),UQ}var ZQ;function yse(){return ZQ||(ZQ=1,vse()),VQ}yse();var jQ={},qQ={},GQ;function Cse(){return GQ||(GQ=1,(function(){var w=tinymce.util.Tools.resolve("tinymce.PluginManager");const M=(pe,$e)=>{pe.focus(),pe.undoManager.transact(()=>{pe.setContent($e)}),pe.selection.setCursorLocation(),pe.nodeChanged()},L=pe=>pe.getContent({source_view:!0}),X=pe=>{const $e=L(pe);pe.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code",spellcheck:!1}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:$e},onSubmit:Ue=>{M(pe,Ue.getData().code),Ue.close()}})},se=pe=>{pe.addCommand("mceCodeEditor",()=>{X(pe)})},le=pe=>{const $e=()=>pe.execCommand("mceCodeEditor");pe.ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:$e}),pe.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:$e})};var Se=()=>{w.add("code",pe=>(se(pe),le(pe),{}))};Se()})()),qQ}var KQ;function wse(){return KQ||(KQ=1,Cse()),jQ}wse();var YQ={},XQ={},JQ;function Sse(){return JQ||(JQ=1,(function(){const w=(J,de,He)=>{var pt;return He(J,de.prototype)?!0:((pt=J.constructor)===null||pt===void 0?void 0:pt.name)===de.name},M=J=>{const de=typeof J;return J===null?"null":de==="object"&&Array.isArray(J)?"array":de==="object"&&w(J,String,(He,pt)=>pt.isPrototypeOf(He))?"string":de},L=J=>de=>M(de)===J,X=J=>de=>typeof de===J,se=J=>de=>J===de,le=L("string"),Se=L("object"),pe=L("array"),$e=se(null),Ue=X("boolean"),sn=se(void 0),hn=J=>J==null,Rt=J=>!hn(J),tn=X("function"),fo=X("number"),Wn=()=>{},ze=(J,de)=>(...He)=>J(de.apply(null,He)),Gn=(J,de)=>He=>J(de(He)),Bt=J=>()=>J;function ie(J,...de){return(...He)=>{const pt=de.concat(He);return J.apply(null,pt)}}const en=Bt(!1),Ro=Bt(!0);class Qe{constructor(de,He){this.tag=de,this.value=He}static some(de){return new Qe(!0,de)}static none(){return Qe.singletonNone}fold(de,He){return this.tag?He(this.value):de()}isSome(){return this.tag}isNone(){return!this.tag}map(de){return this.tag?Qe.some(de(this.value)):Qe.none()}bind(de){return this.tag?de(this.value):Qe.none()}exists(de){return this.tag&&de(this.value)}forall(de){return!this.tag||de(this.value)}filter(de){return!this.tag||de(this.value)?this:Qe.none()}getOr(de){return this.tag?this.value:de}or(de){return this.tag?this:de}getOrThunk(de){return this.tag?this.value:de()}orThunk(de){return this.tag?this:de()}getOrDie(de){if(this.tag)return this.value;throw new Error(de??"Called getOrDie on None")}static from(de){return Rt(de)?Qe.some(de):Qe.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(de){this.tag&&de(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Qe.singletonNone=new Qe(!1);const K=Array.prototype.push,It=(J,de)=>{const He=J.length,pt=new Array(He);for(let Ln=0;Ln<He;Ln++){const Do=J[Ln];pt[Ln]=de(Do,Ln)}return pt},Kn=(J,de)=>{for(let He=0,pt=J.length;He<pt;He++){const Ln=J[He];de(Ln,He)}},vn=(J,de)=>{const He=[];for(let pt=0,Ln=J.length;pt<Ln;pt++){const Do=J[pt];de(Do,pt)&&He.push(Do)}return He},Fe=(J,de,He)=>{for(let pt=0,Ln=J.length;pt<Ln;pt++){const Do=J[pt];if(de(Do,pt))return Qe.some(Do);if(He(Do,pt))break}return Qe.none()},he=(J,de)=>Fe(J,de,en),Cs=J=>{const de=[];for(let He=0,pt=J.length;He<pt;++He){if(!pe(J[He]))throw new Error("Arr.flatten item "+He+" was not an array, input: "+J);K.apply(de,J[He])}return de},ut=(J,de)=>Cs(It(J,de)),Ct=(J,de)=>de>=0&&de<J.length?Qe.some(J[de]):Qe.none(),k=J=>Ct(J,0),Eo=(J,de)=>{for(let He=0;He<J.length;He++){const pt=de(J[He],He);if(pt.isSome())return pt}return Qe.none()},bt=Object.keys,Uo=(J,de)=>{const He=bt(J);for(let pt=0,Ln=He.length;pt<Ln;pt++){const Do=He[pt],Rr=J[Do];de(Rr,Do)}},pn=J=>{let de=J;return{get:()=>de,set:Ln=>{de=Ln}}},Te=typeof window<"u"?window:Function("return this;")(),St=(J,de,He)=>J.isSome()&&de.isSome()?Qe.some(He(J.getOrDie(),de.getOrDie())):Qe.none(),$n=(J,de)=>{let He=de??Te;for(let pt=0;pt<J.length&&He!==void 0&&He!==null;++pt)He=He[J[pt]];return He},Xe=(J,de)=>{const He=J.split(".");return $n(He,de)},qt=J=>{const de=pn(Qe.none()),He=()=>de.get().each(J);return{clear:()=>{He(),de.set(Qe.none())},isSet:()=>de.get().isSome(),get:()=>de.get(),set:Sc=>{He(),de.set(Qe.some(Sc))}}},Ne=()=>qt(J=>J.unbind()),ft=()=>{const J=qt(Wn);return{...J,on:He=>J.get().each(He)}},P=(J,de,He=0,pt)=>{const Ln=J.indexOf(de,He);return Ln!==-1?sn(pt)?!0:Ln+de.length<=pt:!1},Xo=(J,de)=>{let He=null;return{cancel:()=>{$e(He)||(clearTimeout(He),He=null)},throttle:(...Do)=>{$e(He)&&(He=setTimeout(()=>{He=null,J.apply(null,Do)},de))}}},ro=J=>{let de=!1,He;return(...pt)=>(de||(de=!0,He=J.apply(null,pt)),He)};var Qn=tinymce.util.Tools.resolve("tinymce.PluginManager");const _o=J=>({isFullscreen:()=>J.get()!==null}),ws=(J,de)=>{const pt=(de||document).createElement("div");if(pt.innerHTML=J,!pt.hasChildNodes()||pt.childNodes.length>1){const Ln="HTML does not have a single root node";throw console.error(Ln,J),new Error(Ln)}return Oe(pt.childNodes[0])},be=(J,de)=>{const pt=(de||document).createElement(J);return Oe(pt)},ke=(J,de)=>{const pt=(de||document).createTextNode(J);return Oe(pt)},Oe=J=>{if(J==null)throw new Error("Node cannot be null or undefined");return{dom:J}},Re={fromHtml:ws,fromTag:be,fromText:ke,fromDom:Oe,fromPoint:(J,de,He)=>Qe.from(J.dom.elementFromPoint(de,He)).map(Oe)},at=9,tt=11,In=1,qe=3,st=(J,de)=>{const He=J.dom;if(He.nodeType!==In)return!1;{const pt=He;if(pt.matches!==void 0)return pt.matches(de);if(pt.msMatchesSelector!==void 0)return pt.msMatchesSelector(de);if(pt.webkitMatchesSelector!==void 0)return pt.webkitMatchesSelector(de);if(pt.mozMatchesSelector!==void 0)return pt.mozMatchesSelector(de);throw new Error("Browser lacks native selectors")}},Fn=J=>J.nodeType!==In&&J.nodeType!==at&&J.nodeType!==tt||J.childElementCount===0,rn=(J,de)=>{const He=document;return Fn(He)?[]:It(He.querySelectorAll(J),Re.fromDom)},To=(J,de)=>J.dom===de.dom,es=(J,de,He,pt)=>{const Ln=J.isiOS()&&/ipad/i.test(He)===!0,Do=J.isiOS()&&!Ln,Rr=J.isiOS()||J.isAndroid(),Sc=Rr||pt("(pointer:coarse)"),ga=Ln||!Do&&Rr&&pt("(min-device-width:768px)"),xc=Do||Rr&&!ga,Cu=de.isSafari()&&J.isiOS()&&/safari/i.test(He)===!1,Ec=!xc&&!ga&&!Cu;return{isiPad:Bt(Ln),isiPhone:Bt(Do),isTablet:Bt(ga),isPhone:Bt(xc),isTouch:Bt(Sc),isAndroid:J.isAndroid,isiOS:J.isiOS,isWebView:Bt(Cu),isDesktop:Bt(Ec)}},Wo=(J,de)=>{for(let He=0;He<J.length;He++){const pt=J[He];if(pt.test(de))return pt}},eo=(J,de)=>{const He=Wo(J,de);if(!He)return{major:0,minor:0};const pt=Ln=>Number(de.replace(He,"$"+Ln));return mt(pt(1),pt(2))},zs=(J,de)=>{const He=String(de).toLowerCase();return J.length===0?wo():eo(J,He)},wo=()=>mt(0,0),mt=(J,de)=>({major:J,minor:de}),Nt={nu:mt,detect:zs,unknown:wo},wn=(J,de)=>Eo(de.brands,He=>{const pt=He.brand.toLowerCase();return he(J,Ln=>{var Do;return pt===((Do=Ln.brand)===null||Do===void 0?void 0:Do.toLowerCase())}).map(Ln=>({current:Ln.name,version:Nt.nu(parseInt(He.version,10),0)}))}),fn=(J,de)=>{const He=String(de).toLowerCase();return he(J,pt=>pt.search(He))},uo=(J,de)=>fn(J,de).map(He=>{const pt=Nt.detect(He.versionRegexes,de);return{current:He.name,version:pt}}),ts=(J,de)=>fn(J,de).map(He=>{const pt=Nt.detect(He.versionRegexes,de);return{current:He.name,version:pt}}),So=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ks=J=>de=>P(de,J),Xs=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:J=>P(J,"edge/")&&P(J,"chrome")&&P(J,"safari")&&P(J,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,So],search:J=>P(J,"chrome")&&!P(J,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:J=>P(J,"msie")||P(J,"trident")},{name:"Opera",versionRegexes:[So,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ks("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ks("firefox")},{name:"Safari",versionRegexes:[So,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:J=>(P(J,"safari")||P(J,"mobile/"))&&P(J,"applewebkit")}],dn=[{name:"Windows",search:ks("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:J=>P(J,"iphone")||P(J,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ks("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:ks("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ks("linux"),versionRegexes:[]},{name:"Solaris",search:ks("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ks("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:ks("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],ko={browsers:Bt(Xs),oses:Bt(dn)},xo="Edge",ac="Chromium",da="IE",cn="Opera",Bc="Firefox",Ds="Safari",Fc=()=>Ma({current:void 0,version:Nt.unknown()}),Ma=J=>{const de=J.current,He=J.version,pt=Ln=>()=>de===Ln;return{current:de,version:He,isEdge:pt(xo),isChromium:pt(ac),isIE:pt(da),isOpera:pt(cn),isFirefox:pt(Bc),isSafari:pt(Ds)}},zr={unknown:Fc,nu:Ma},Ss="Windows",to="iOS",os="Android",Wa="Linux",Nc="macOS",Za="Solaris",gn="FreeBSD",Fr="ChromeOS",yr=()=>Ti({current:void 0,version:Nt.unknown()}),Ti=J=>{const de=J.current,He=J.version,pt=Ln=>()=>de===Ln;return{current:de,version:He,isWindows:pt(Ss),isiOS:pt(to),isAndroid:pt(os),isMacOS:pt(Nc),isLinux:pt(Wa),isSolaris:pt(Za),isFreeBSD:pt(gn),isChromeOS:pt(Fr)}},ge={unknown:yr,nu:Ti},Ie={detect:(J,de,He)=>{const pt=ko.browsers(),Ln=ko.oses(),Do=de.bind(ga=>wn(pt,ga)).orThunk(()=>uo(pt,J)).fold(zr.unknown,zr.nu),Rr=ts(Ln,J).fold(ge.unknown,ge.nu),Sc=es(Rr,Do,J,He);return{browser:Do,os:Rr,deviceType:Sc}}},dt=J=>window.matchMedia(J).matches;let Rn=ro(()=>Ie.detect(window.navigator.userAgent,Qe.from(window.navigator.userAgentData),dt));const Zn=()=>Rn(),Ao=(J,de)=>Xe(J,de),jo=(J,de)=>{const He=Ao(J,de);if(He==null)throw new Error(J+" not available on this browser");return He},qo=Object.getPrototypeOf,Mo=J=>jo("HTMLElement",J),G=J=>{const de=Xe("ownerDocument.defaultView",J);return Se(J)&&(Mo(de).prototype.isPrototypeOf(J)||/^HTML\w*Element$/.test(qo(J).constructor.name))},we=J=>J.dom.nodeType,gt=J=>de=>we(de)===J,Yt=J=>At(J)&&G(J.dom),At=gt(In),Mn=gt(qe),Tn=gt(tt),nn=J=>Re.fromDom(J.dom.ownerDocument),bo=J=>Qe.from(J.dom.parentNode).map(Re.fromDom),Lo=(J,de)=>{const He=tn(de)?de:en;let pt=J.dom;const Ln=[];for(;pt.parentNode!==null&&pt.parentNode!==void 0;){const Do=pt.parentNode,Rr=Re.fromDom(Do);if(Ln.push(Rr),He(Rr)===!0)break;pt=Do}return Ln},Qo=J=>{const de=He=>vn(He,pt=>!To(J,pt));return bo(J).map(Sa).map(de).getOr([])},bs=J=>Qe.from(J.dom.nextSibling).map(Re.fromDom),Sa=J=>It(J.dom.childNodes,Re.fromDom),Er=J=>Tn(J)&&Rt(J.dom.host),Ml=J=>Re.fromDom(J.dom.getRootNode()),Gs=J=>{const de=Ml(J);return Er(de)?Qe.some(de):Qe.none()},rs=J=>Re.fromDom(J.dom.host),Os=J=>{if(Rt(J.target)){const de=Re.fromDom(J.target);if(At(de)&&ma(de)&&J.composed&&J.composedPath){const He=J.composedPath();if(He)return k(He)}}return Qe.from(J.target)},ma=J=>Rt(J.dom.shadowRoot),Vi=(J,de,He,pt,Ln,Do,Rr)=>({target:J,x:de,y:He,stop:pt,prevent:Ln,kill:Do,raw:Rr}),er=J=>{const de=Re.fromDom(Os(J).getOr(J.target)),He=()=>J.stopPropagation(),pt=()=>J.preventDefault(),Ln=ze(pt,He);return Vi(de,J.clientX,J.clientY,He,pt,Ln,J)},jn=(J,de)=>He=>{J(He)&&de(er(He))},fa=(J,de,He,pt,Ln)=>{const Do=jn(He,pt);return J.dom.addEventListener(de,Do,Ln),{unbind:ie(cr,J,de,Do,Ln)}},xa=(J,de,He,pt)=>fa(J,de,He,pt,!1),cr=(J,de,He,pt)=>{J.dom.removeEventListener(de,He,pt)},Ju=Ro,bu=(J,de,He)=>xa(J,de,Ju,He),Js=(J,de,He)=>{if(le(He)||Ue(He)||fo(He))J.setAttribute(de,He+"");else throw console.error("Invalid call to Attribute.set. Key ",de,":: Value ",He,":: Element ",J),new Error("Attribute value was not simple")},Ai=(J,de,He)=>{Js(J.dom,de,He)},ri=(J,de)=>{const He=J.dom.getAttribute(de);return He===null?void 0:He},Qu=(J,de)=>{J.dom.removeAttribute(de)},Gt=J=>J.style!==void 0&&tn(J.style.getPropertyValue),Pc=J=>{const de=Mn(J)?J.dom.parentNode:J.dom;if(de==null||de.ownerDocument===null)return!1;const He=de.ownerDocument;return Gs(Re.fromDom(de)).fold(()=>He.body.contains(de),Gn(Pc,rs))},Ba=J=>{const de=J.dom.body;if(de==null)throw new Error("Body is not available yet");return Re.fromDom(de)},ja=(J,de,He)=>{if(!le(He))throw console.error("Invalid call to CSS.set. Property ",de,":: Value ",He,":: Element ",J),new Error("CSS value must be a string: "+He);Gt(J)&&J.style.setProperty(de,He)},ir=(J,de,He)=>{const pt=J.dom;ja(pt,de,He)},vu=(J,de)=>{const He=J.dom;Uo(de,(pt,Ln)=>{ja(He,Ln,pt)})},qa=(J,de)=>{const He=J.dom,Ln=window.getComputedStyle(He).getPropertyValue(de);return Ln===""&&!Pc(J)?yc(He,de):Ln},yc=(J,de)=>Gt(J)?J.style.getPropertyValue(de):"",Bl=(J,de)=>({left:J,top:de,translate:(pt,Ln)=>Bl(J+pt,de+Ln)}),ed=Bl,Ui=J=>{const de=J!==void 0?J.dom:document,He=de.body.scrollLeft||de.documentElement.scrollLeft,pt=de.body.scrollTop||de.documentElement.scrollTop;return ed(He,pt)},yu=J=>J.dom.classList!==void 0,Fl=(J,de)=>yu(J)&&J.dom.classList.contains(de),Wi=(J,de,He)=>vn(Lo(J,He),de),Nl=(J,de)=>vn(Qo(J),de),zt=J=>rn(J),dl=(J,de,He)=>Wi(J,pt=>st(pt,de),He),td=(J,de)=>Nl(J,He=>st(He,de)),U=J=>{const de=J===void 0?window:J;return Zn().browser.isFirefox()?Qe.none():Qe.from(de.visualViewport)},ue=(J,de,He,pt)=>({x:J,y:de,width:He,height:pt,right:J+He,bottom:de+pt}),Me=J=>{const de=J===void 0?window:J,He=de.document,pt=Ui(Re.fromDom(He));return U(de).fold(()=>{const Ln=de.document.documentElement,Do=Ln.clientWidth,Rr=Ln.clientHeight;return ue(pt.left,pt.top,Do,Rr)},Ln=>ue(Math.max(Ln.pageLeft,pt.left),Math.max(Ln.pageTop,pt.top),Ln.width,Ln.height))},ct=(J,de,He)=>U(He).map(pt=>{const Ln=Do=>de(er(Do));return pt.addEventListener(J,Ln),{unbind:()=>pt.removeEventListener(J,Ln)}}).getOrThunk(()=>({unbind:Wn}));var Lt=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),mn=tinymce.util.Tools.resolve("tinymce.Env");const Bo=(J,de)=>{J.dispatch("FullscreenStateChanged",{state:de}),J.dispatch("ResizeEditor")},yo=J=>de=>de.options.get(J),us=J=>{const de=J.options.register;de("fullscreen_native",{processor:"boolean",default:!1})},$=yo("fullscreen_native"),j=J=>{const de=Re.fromDom(J.getElement());return Gs(de).map(rs).getOrThunk(()=>Ba(nn(de)))},fe=J=>J.fullscreenElement!==void 0?J.fullscreenElement:J.msFullscreenElement!==void 0?J.msFullscreenElement:J.webkitFullscreenElement!==void 0?J.webkitFullscreenElement:null,Ge=()=>document.fullscreenElement!==void 0?"fullscreenchange":document.msFullscreenElement!==void 0?"MSFullscreenChange":document.webkitFullscreenElement!==void 0?"webkitfullscreenchange":"fullscreenchange",ln=J=>{const de=J.dom;de.requestFullscreen?de.requestFullscreen():de.msRequestFullscreen?de.msRequestFullscreen():de.webkitRequestFullScreen&&de.webkitRequestFullScreen()},Go=J=>{const de=J.dom;de.exitFullscreen?de.exitFullscreen():de.msExitFullscreen?de.msExitFullscreen():de.webkitCancelFullScreen&&de.webkitCancelFullScreen()},Rs=J=>J.dom===fe(nn(J).dom),Or="data-ephox-mobile-fullscreen-style",Fa="display:none!important;",Cc="position:absolute!important;",Ko="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",ml="background-color:rgb(255,255,255)!important;",Rm=mn.os.isAndroid(),Zi=J=>{const de=qa(J,"background-color");return de!==void 0&&de!==""?"background-color:"+de+"!important":ml},mg=(J,de,He)=>{const pt=xc=>td(xc,"*:not(.tox-silver-sink)"),Ln=xc=>Cu=>{const Ec=ri(Cu,"style"),wu=Ec===void 0?"no-styles":Ec.trim();wu!==xc&&(Ai(Cu,Or,wu),vu(Cu,J.parseStyle(xc)))},Do=dl(de,"*"),Rr=ut(Do,pt),Sc=Zi(He);Kn(Rr,Ln(Fa)),Kn(Do,Ln(Cc+Ko+Sc)),Ln((Rm===!0?"":Cc)+Ko+Sc)(de)},Mm=J=>{const de=zt("["+Or+"]");Kn(de,He=>{const pt=ri(He,Or);pt&&pt!=="no-styles"?vu(He,J.parseStyle(pt)):Qu(He,"style"),Qu(He,Or)})},wc=Lt.DOM,nd=()=>Me(window),od=J=>window.scrollTo(J.x,J.y),Mh=U().fold(()=>({bind:Wn,unbind:Wn}),J=>{const de=ft(),He=Ne(),pt=Ne(),Ln=()=>{document.body.scrollTop=0,document.documentElement.scrollTop=0},Do=()=>{window.requestAnimationFrame(()=>{de.on(xc=>vu(xc,{top:J.offsetTop+"px",left:J.offsetLeft+"px",height:J.height+"px",width:J.width+"px"}))})},Rr=Xo(()=>{Ln(),Do()},50);return{bind:xc=>{de.set(xc),Rr.throttle(),He.set(ct("resize",Rr.throttle)),pt.set(ct("scroll",Rr.throttle))},unbind:()=>{de.on(()=>{He.clear(),pt.clear()}),de.clear()}}}),fg=(J,de)=>{const He=document.body,pt=document.documentElement,Ln=J.getContainer(),Do=Re.fromDom(Ln),Rr=bs(Do).filter(Ic=>Yt(Ic)&&Fl(Ic,"tox-silver-sink")),Sc=j(J),ga=de.get(),xc=Re.fromDom(J.getBody()),Cu=mn.deviceType.isTouch(),Ec=Ln.style,wu=J.iframeElement,Tc=wu==null?void 0:wu.style,$c=Ic=>{Ic(He,"tox-fullscreen"),Ic(pt,"tox-fullscreen"),Ic(Ln,"tox-fullscreen"),Gs(Do).map(Po=>rs(Po).dom).each(Po=>{Ic(Po,"tox-fullscreen"),Ic(Po,"tox-shadowhost")})},Pl=()=>{Cu&&Mm(J.dom),$c(wc.removeClass),Mh.unbind(),Qe.from(de.get()).each(Ic=>Ic.fullscreenChangeHandler.unbind())};if(ga)ga.fullscreenChangeHandler.unbind(),$(J)&&Rs(Sc)&&Go(nn(Sc)),Tc.width=ga.iframeWidth,Tc.height=ga.iframeHeight,Ec.width=ga.containerWidth,Ec.height=ga.containerHeight,Ec.top=ga.containerTop,Ec.left=ga.containerLeft,St(Rr,ga.sinkCssPosition,(Ic,Po)=>{ir(Ic,"position",Po)}),Pl(),od(ga.scrollPos),de.set(null),Bo(J,!1),J.off("remove",Pl);else{const Ic=bu(nn(Sc),Ge(),bf=>{$(J)&&!Rs(Sc)&&de.get()!==null&&fg(J,de)}),Po={scrollPos:nd(),containerWidth:Ec.width,containerHeight:Ec.height,containerTop:Ec.top,containerLeft:Ec.left,iframeWidth:Tc.width,iframeHeight:Tc.height,fullscreenChangeHandler:Ic,sinkCssPosition:Rr.map(bf=>qa(bf,"position"))};Cu&&mg(J.dom,Do,xc),Tc.width=Tc.height="100%",Ec.width=Ec.height="",$c(wc.addClass),Rr.each(bf=>{ir(bf,"position","fixed")}),Mh.bind(Do),J.on("remove",Pl),de.set(Po),$(J)&&ln(Sc),Bo(J,!0)}},gg=(J,de)=>{J.addCommand("mceFullScreen",()=>{fg(J,de)})};var Bh=tinymce.util.Tools.resolve("tinymce.util.VK");const pf=(J,de)=>{J.on("init",()=>{J.on("keydown",He=>{He.keyCode===Bh.TAB&&!(He.metaKey||He.ctrlKey)&&de.get()&&He.preventDefault()})})},ji=(J,de)=>He=>{He.setActive(de.get()!==null);const pt=Ln=>He.setActive(Ln.state);return J.on("FullscreenStateChanged",pt),()=>J.off("FullscreenStateChanged",pt)},Fh=(J,de)=>{const He=()=>J.execCommand("mceFullScreen");J.ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:He,onSetup:ji(J,de),context:"any"}),J.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:He,onSetup:ji(J,de),shortcut:"Meta+Shift+F",context:"any"})};var Nh=()=>{Qn.add("fullscreen",J=>{const de=pn(null);return J.inline||(us(J),gg(J,de),Fh(J,de),pf(J,de),J.addShortcut("Meta+Shift+F","","mceFullScreen")),_o(de)})};Nh()})()),XQ}var QQ;function xse(){return QQ||(QQ=1,Sse()),YQ}xse();var eee={},tee={},nee;function Ese(){return nee||(nee=1,(function(){var w=tinymce.util.Tools.resolve("tinymce.PluginManager");const M=Qe=>K=>K.options.get(Qe),L=Qe=>{const K=Qe.options.register;K("insertdatetime_dateformat",{processor:"string",default:Qe.translate("%Y-%m-%d")}),K("insertdatetime_timeformat",{processor:"string",default:Qe.translate("%H:%M:%S")}),K("insertdatetime_formats",{processor:"string[]",default:["%H:%M:%S","%Y-%m-%d","%I:%M:%S %p","%D"]}),K("insertdatetime_element",{processor:"boolean",default:!1})},X=M("insertdatetime_dateformat"),se=M("insertdatetime_timeformat"),le=M("insertdatetime_formats"),Se=M("insertdatetime_element"),pe=Qe=>{const K=le(Qe);return K.length>0?K[0]:se(Qe)},$e="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),Ue="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),sn="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),hn="January February March April May June July August September October November December".split(" "),Rt=(Qe,K)=>{if(Qe=""+Qe,Qe.length<K)for(let It=0;It<K-Qe.length;It++)Qe="0"+Qe;return Qe},tn=(Qe,K,It=new Date)=>(K=K.replace("%D","%m/%d/%Y"),K=K.replace("%r","%I:%M:%S %p"),K=K.replace("%Y",""+It.getFullYear()),K=K.replace("%y",""+It.getYear()),K=K.replace("%m",Rt(It.getMonth()+1,2)),K=K.replace("%d",Rt(It.getDate(),2)),K=K.replace("%H",""+Rt(It.getHours(),2)),K=K.replace("%M",""+Rt(It.getMinutes(),2)),K=K.replace("%S",""+Rt(It.getSeconds(),2)),K=K.replace("%I",""+((It.getHours()+11)%12+1)),K=K.replace("%p",It.getHours()<12?"AM":"PM"),K=K.replace("%B",""+Qe.translate(hn[It.getMonth()])),K=K.replace("%b",""+Qe.translate(sn[It.getMonth()])),K=K.replace("%A",""+Qe.translate(Ue[It.getDay()])),K=K.replace("%a",""+Qe.translate($e[It.getDay()])),K=K.replace("%%","%"),K),fo=(Qe,K,It,Kn)=>{const vn=Qe.dom.create("time",{datetime:It},Kn);Qe.dom.replace(vn,K),Qe.selection.select(vn,!0),Qe.selection.collapse(!1)},Wn=(Qe,K)=>{if(Se(Qe)&&Qe.selection.isEditable()){const It=tn(Qe,K);let Kn;/%[HMSIp]/.test(K)?Kn=tn(Qe,"%Y-%m-%dT%H:%M"):Kn=tn(Qe,"%Y-%m-%d");const vn=Qe.dom.getParent(Qe.selection.getStart(),"time");vn?fo(Qe,vn,Kn,It):Qe.insertContent('<time datetime="'+Kn+'">'+It+"</time>")}else Qe.insertContent(tn(Qe,K))},ze=Qe=>{Qe.addCommand("mceInsertDate",(K,It)=>{Wn(Qe,It??X(Qe))}),Qe.addCommand("mceInsertTime",(K,It)=>{Wn(Qe,It??se(Qe))})},Gn=Qe=>{let K=Qe;return{get:()=>K,set:vn=>{K=vn}}};var Bt=tinymce.util.Tools.resolve("tinymce.util.Tools");const ie=Qe=>K=>{const It=()=>{K.setEnabled(Qe.selection.isEditable())};return Qe.on("NodeChange",It),It(),()=>{Qe.off("NodeChange",It)}},en=Qe=>{const K=le(Qe),It=Gn(pe(Qe)),Kn=Fe=>Qe.execCommand("mceInsertDate",!1,Fe);Qe.ui.registry.addSplitButton("insertdatetime",{icon:"insert-time",tooltip:"Insert date/time",chevronTooltip:"Insert date/time menu",select:Fe=>Fe===It.get(),fetch:Fe=>{Fe(Bt.map(K,he=>({type:"choiceitem",text:tn(Qe,he),value:he})))},onAction:Fe=>{Kn(It.get())},onItemAction:(Fe,he)=>{It.set(he),Kn(he)},onSetup:ie(Qe)});const vn=Fe=>()=>{It.set(Fe),Kn(Fe)};Qe.ui.registry.addNestedMenuItem("insertdatetime",{icon:"insert-time",text:"Date/time",getSubmenuItems:()=>Bt.map(K,Fe=>({type:"menuitem",text:tn(Qe,Fe),onAction:vn(Fe)})),onSetup:ie(Qe)})};var Ro=()=>{w.add("insertdatetime",Qe=>{L(Qe),ze(Qe),en(Qe)})};Ro()})()),tee}var oee;function Tse(){return oee||(oee=1,Ese()),eee}Tse();var see={},ree={},aee;function Ase(){return aee||(aee=1,(function(){var w=tinymce.util.Tools.resolve("tinymce.PluginManager");const M=(ge,Ce,Ie)=>{var dt;return Ie(ge,Ce.prototype)?!0:((dt=ge.constructor)===null||dt===void 0?void 0:dt.name)===Ce.name},L=ge=>{const Ce=typeof ge;return ge===null?"null":Ce==="object"&&Array.isArray(ge)?"array":Ce==="object"&&M(ge,String,(Ie,dt)=>dt.isPrototypeOf(Ie))?"string":Ce},X=ge=>Ce=>L(Ce)===ge,se=X("string"),le=X("object"),Se=X("array"),pe=ge=>ge==null,$e=ge=>!pe(ge);class Ue{constructor(Ce,Ie){this.tag=Ce,this.value=Ie}static some(Ce){return new Ue(!0,Ce)}static none(){return Ue.singletonNone}fold(Ce,Ie){return this.tag?Ie(this.value):Ce()}isSome(){return this.tag}isNone(){return!this.tag}map(Ce){return this.tag?Ue.some(Ce(this.value)):Ue.none()}bind(Ce){return this.tag?Ce(this.value):Ue.none()}exists(Ce){return this.tag&&Ce(this.value)}forall(Ce){return!this.tag||Ce(this.value)}filter(Ce){return!this.tag||Ce(this.value)?this:Ue.none()}getOr(Ce){return this.tag?this.value:Ce}or(Ce){return this.tag?this:Ce}getOrThunk(Ce){return this.tag?this.value:Ce()}orThunk(Ce){return this.tag?this:Ce()}getOrDie(Ce){if(this.tag)return this.value;throw new Error(Ce??"Called getOrDie on None")}static from(Ce){return $e(Ce)?Ue.some(Ce):Ue.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Ce){this.tag&&Ce(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Ue.singletonNone=new Ue(!1);const sn=Array.prototype.push,hn=(ge,Ce)=>{for(let Ie=0,dt=ge.length;Ie<dt;Ie++){const Rn=ge[Ie];Ce(Rn,Ie)}},Rt=ge=>{const Ce=[];for(let Ie=0,dt=ge.length;Ie<dt;++Ie){if(!Se(ge[Ie]))throw new Error("Arr.flatten item "+Ie+" was not an array, input: "+ge);sn.apply(Ce,ge[Ie])}return Ce},tn=Object.keys,fo=Object.hasOwnProperty,Wn=(ge,Ce)=>{const Ie=tn(ge);for(let dt=0,Rn=Ie.length;dt<Rn;dt++){const Zn=Ie[dt],Ao=ge[Zn];Ce(Ao,Zn)}},ze=(ge,Ce)=>Gn(ge,Ce)?Ue.from(ge[Ce]):Ue.none(),Gn=(ge,Ce)=>fo.call(ge,Ce),Bt=ge=>{let Ce=ge;return{get:()=>Ce,set:Rn=>{Ce=Rn}}},ie=(ge,Ce,Ie)=>ge.length>=Ce.length&&ge.substr(Ie,Ie+Ce.length)===Ce,en=(ge,Ce)=>ie(ge,Ce,0),Ro=ge=>Ce=>Ce.options.get(ge),Qe=ge=>{const Ce=ge.options.register;Ce("audio_template_callback",{processor:"function"}),Ce("video_template_callback",{processor:"function"}),Ce("iframe_template_callback",{processor:"function"}),Ce("media_live_embeds",{processor:"boolean",default:!0}),Ce("media_filter_html",{processor:"boolean",default:!0}),Ce("media_url_resolver",{processor:"function"}),Ce("media_alt_source",{processor:"boolean",default:!0}),Ce("media_poster",{processor:"boolean",default:!0}),Ce("media_dimensions",{processor:"boolean",default:!0})},K=Ro("audio_template_callback"),It=Ro("video_template_callback"),Kn=Ro("iframe_template_callback"),vn=Ro("media_live_embeds"),Fe=Ro("media_filter_html"),he=Ro("media_url_resolver"),Cs=Ro("media_alt_source"),ut=Ro("media_poster"),Ct=Ro("media_dimensions");var k=tinymce.util.Tools.resolve("tinymce.util.Tools"),Eo=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),bt=tinymce.util.Tools.resolve("tinymce.html.DomParser");const Uo=Eo.DOM,pn=ge=>ge.replace(/px$/,""),Te=ge=>{const Ce=ge.attr("style"),Ie=Ce?Uo.parseStyle(Ce):{};return{type:"ephox-embed-iri",source:ge.attr("data-ephox-embed-iri"),altsource:"",poster:"",width:ze(Ie,"max-width").map(pn).getOr(""),height:ze(Ie,"max-height").map(pn).getOr("")}},St=(ge,Ce)=>{let Ie={};const Rn=bt({validate:!1,forced_root_block:!1},Ce).parse(ge);for(let Zn=Rn;Zn;Zn=Zn.walk())if(Zn.type===1){const Ao=Zn.name;if(Zn.attr("data-ephox-embed-iri")){Ie=Te(Zn);break}else!Ie.source&&Ao==="param"&&(Ie.source=Zn.attr("movie")),(Ao==="iframe"||Ao==="object"||Ao==="embed"||Ao==="video"||Ao==="audio")&&(Ie.type||(Ie.type=Ao),Ie=k.extend(Zn.attributes.map,Ie)),Ao==="source"&&(Ie.source?Ie.altsource||(Ie.altsource=Zn.attr("src")):Ie.source=Zn.attr("src")),Ao==="img"&&!Ie.poster&&(Ie.poster=Zn.attr("src"))}return Ie.source=Ie.source||Ie.src||"",Ie.altsource=Ie.altsource||"",Ie.poster=Ie.poster||"",Ie},$n=ge=>{var Ce;const Ie={mp3:"audio/mpeg",m4a:"audio/x-m4a",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"},dt=(Ce=ge.toLowerCase().split(".").pop())!==null&&Ce!==void 0?Ce:"";return ze(Ie,dt).getOr("")};var Xe=tinymce.util.Tools.resolve("tinymce.html.Node"),qt=tinymce.util.Tools.resolve("tinymce.html.Serializer");const Ne=(ge,Ce={})=>bt({forced_root_block:!1,validate:!1,allow_conditional_comments:!0,...Ce},ge),ft=Eo.DOM,P=ge=>/^[0-9.]+$/.test(ge)?ge+"px":ge,Xo=(ge,Ce)=>{const Ie=Ce.attr("style"),dt=Ie?ft.parseStyle(Ie):{};$e(ge.width)&&(dt["max-width"]=P(ge.width)),$e(ge.height)&&(dt["max-height"]=P(ge.height)),Ce.attr("style",ft.serializeStyle(dt))},ro=["source","altsource"],Qn=(ge,Ce,Ie,dt)=>{let Rn=0,Zn=0;const Ao=Ne(dt);Ao.addNodeFilter("source",qo=>Rn=qo.length);const jo=Ao.parse(ge);for(let qo=jo;qo;qo=qo.walk())if(qo.type===1){const Mo=qo.name;if(qo.attr("data-ephox-embed-iri")){Xo(Ce,qo);break}else{switch(Mo){case"video":case"object":case"embed":case"img":case"iframe":Ce.height!==void 0&&Ce.width!==void 0&&(qo.attr("width",Ce.width),qo.attr("height",Ce.height));break}if(Ie)switch(Mo){case"video":qo.attr("poster",Ce.poster),qo.attr("src",null);for(let we=Rn;we<2;we++)if(Ce[ro[we]]){const gt=new Xe("source",1);gt.attr("src",Ce[ro[we]]),gt.attr("type",Ce[ro[we]+"mime"]||null),qo.append(gt)}break;case"iframe":qo.attr("src",Ce.source);break;case"object":const G=qo.getAll("img").length>0;if(Ce.poster&&!G){qo.attr("src",Ce.poster);const we=new Xe("img",1);we.attr("src",Ce.poster),we.attr("width",Ce.width),we.attr("height",Ce.height),qo.append(we)}break;case"source":if(Zn<2&&(qo.attr("src",Ce[ro[Zn]]),qo.attr("type",Ce[ro[Zn]+"mime"]||null),!Ce[ro[Zn]])){qo.remove();continue}Zn++;break;case"img":Ce.poster||qo.remove();break}}}return qt({},dt).serialize(jo)},_o=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)\?h=(\w+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?h=$2&title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)\?h=(\w+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?h=$3&title=0&amp;byline=0",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],ws=ge=>{const Ce=ge.match(/^(https?:\/\/|www\.)(.+)$/i);return Ce&&Ce.length>1?Ce[1]==="www."?"https://":Ce[1]:"https://"},be=(ge,Ce)=>{const Ie=ws(Ce),dt=ge.regex.exec(Ce);let Rn=Ie+ge.url;if($e(dt))for(let Zn=0;Zn<dt.length;Zn++)Rn=Rn.replace("$"+Zn,()=>dt[Zn]?dt[Zn]:"");return Rn.replace(/\?$/,"")},ke=ge=>{const Ce=_o.filter(Ie=>Ie.regex.test(ge));return Ce.length>0?k.extend({},Ce[0],{url:be(Ce[0],ge)}):null},Oe=(ge,Ce)=>{if(Ce)return Ce(ge);{const Ie=ge.allowfullscreen?' allowFullscreen="1"':"";return'<iframe src="'+ge.source+'" width="'+ge.width+'" height="'+ge.height+'"'+Ie+"></iframe>"}},me=ge=>{let Ce='<object data="'+ge.source+'" width="'+ge.width+'" height="'+ge.height+'" type="application/x-shockwave-flash">';return ge.poster&&(Ce+='<img src="'+ge.poster+'" width="'+ge.width+'" height="'+ge.height+'" />'),Ce+="</object>",Ce},Re=(ge,Ce)=>Ce?Ce(ge):'<audio controls="controls" src="'+ge.source+'">'+(ge.altsource?`
<source src="`+ge.altsource+'"'+(ge.altsourcemime?' type="'+ge.altsourcemime+'"':"")+` />
`:"")+"</audio>",at=(ge,Ce)=>Ce?Ce(ge):'<video width="'+ge.width+'" height="'+ge.height+'"'+(ge.poster?' poster="'+ge.poster+'"':"")+` controls="controls">
<source src="`+ge.source+'"'+(ge.sourcemime?' type="'+ge.sourcemime+'"':"")+` />
`+(ge.altsource?'<source src="'+ge.altsource+'"'+(ge.altsourcemime?' type="'+ge.altsourcemime+'"':"")+` />
`:"")+"</video>",tt=(ge,Ce)=>{var Ie;const dt=k.extend({},Ce);if(!dt.source&&(k.extend(dt,St((Ie=dt.embed)!==null&&Ie!==void 0?Ie:"",ge.schema)),!dt.source))return"";dt.altsource||(dt.altsource=""),dt.poster||(dt.poster=""),dt.source=ge.convertURL(dt.source,"source"),dt.altsource=ge.convertURL(dt.altsource,"source"),dt.sourcemime=$n(dt.source),dt.altsourcemime=$n(dt.altsource),dt.poster=ge.convertURL(dt.poster,"poster");const Rn=ke(dt.source);if(Rn&&(dt.source=Rn.url,dt.type=Rn.type,dt.allowfullscreen=Rn.allowFullscreen,dt.width=dt.width||String(Rn.w),dt.height=dt.height||String(Rn.h)),dt.embed)return Qn(dt.embed,dt,!0,ge.schema);{const Zn=K(ge),Ao=It(ge),jo=Kn(ge);return dt.width=dt.width||"300",dt.height=dt.height||"150",k.each(dt,(qo,Mo)=>{dt[Mo]=ge.dom.encode(""+qo)}),dt.type==="iframe"?Oe(dt,jo):dt.sourcemime==="application/x-shockwave-flash"?me(dt):dt.sourcemime.indexOf("audio")!==-1?Re(dt,Zn):at(dt,Ao)}},In=ge=>ge.hasAttribute("data-mce-object")||ge.hasAttribute("data-ephox-embed-iri"),qe=ge=>{ge.on("mousedown",Ce=>{const Ie=ge.dom.getParent(Ce.target,".mce-preview-object");Ie&&ge.dom.getAttrib(Ie,"data-mce-selected")==="2"&&Ce.stopImmediatePropagation()}),ge.on("click keyup touchend",()=>{const Ce=ge.selection.getNode();Ce&&ge.dom.hasClass(Ce,"mce-preview-object")&&ge.dom.getAttrib(Ce,"data-mce-selected")&&Ce.setAttribute("data-mce-selected","2")}),ge.on("ObjectResized",Ce=>{const Ie=Ce.target;if(Ie.getAttribute("data-mce-object")){let dt=Ie.getAttribute("data-mce-html");dt&&(dt=unescape(dt),Ie.setAttribute("data-mce-html",escape(Qn(dt,{width:String(Ce.width),height:String(Ce.height)},!1,ge.schema))))}})},st={},Fn=(ge,Ce,Ie)=>new Promise((dt,Rn)=>{const Zn=Ao=>(Ao.html&&(st[ge.source]=Ao),dt({url:ge.source,html:Ao.html?Ao.html:Ce(ge)}));st[ge.source]?Zn(st[ge.source]):Ie({url:ge.source}).then(Zn).catch(Rn)}),rn=(ge,Ce)=>Promise.resolve({html:Ce(ge),url:ge.source}),To=ge=>Ce=>tt(ge,Ce),es=(ge,Ce)=>{const Ie=he(ge);return Ie?Fn(Ce,To(ge),Ie):rn(Ce,To(ge))},Wo=ge=>Gn(st,ge),eo=(ge,Ce)=>ze(Ce,ge).bind(Ie=>ze(Ie,"meta")),zs=(ge,Ce,Ie)=>dt=>{const Rn=()=>ze(ge,dt),Zn=()=>ze(Ce,dt),Ao=Mo=>ze(Mo,"value").bind(G=>G.length>0?Ue.some(G):Ue.none()),jo=()=>Rn().bind(Mo=>le(Mo)?Ao(Mo).orThunk(Zn):Zn().orThunk(()=>Ue.from(Mo))),qo=()=>Zn().orThunk(()=>Rn().bind(Mo=>le(Mo)?Ao(Mo):Ue.from(Mo)));return{[dt]:(dt===Ie?jo():qo()).getOr("")}},wo=(ge,Ce)=>{const Ie={};return ze(ge,"dimensions").each(dt=>{hn(["width","height"],Rn=>{ze(Ce,Rn).orThunk(()=>ze(dt,Rn)).each(Zn=>Ie[Rn]=Zn)})}),Ie},mt=(ge,Ce)=>{const Ie=Ce&&Ce!=="dimensions"?eo(Ce,ge).getOr({}):{},dt=zs(ge,Ie,Ce);return{...dt("source"),...dt("altsource"),...dt("poster"),...dt("embed"),...wo(ge,Ie)}},Nt=ge=>{const Ce={...ge,source:{value:ze(ge,"source").getOr("")},altsource:{value:ze(ge,"altsource").getOr("")},poster:{value:ze(ge,"poster").getOr("")}};return hn(["width","height"],Ie=>{ze(ge,Ie).each(dt=>{const Rn=Ce.dimensions||{};Rn[Ie]=dt,Ce.dimensions=Rn})}),Ce},wn=ge=>Ce=>{const Ie=Ce&&Ce.msg?"Media embed handler error: "+Ce.msg:"Media embed handler threw unknown error.";ge.notificationManager.open({type:"error",text:Ie})},fn=ge=>{const Ce=ge.selection.getNode(),Ie=In(Ce)?ge.serializer.serialize(Ce,{selection:!0}):"",dt=St(Ie,ge.schema),Zn=(()=>{if(ks(dt.source,dt.type)){const Ao=ge.dom.getRect(Ce);return{width:Ao.w.toString().replace(/px$/,""),height:Ao.h.toString().replace(/px$/,"")}}else return{}})();return{embed:Ie,...dt,...Zn}},uo=(ge,Ce)=>Ie=>{if(se(Ie.url)&&Ie.url.trim().length>0){const dt=Ie.html,Zn={...St(dt,Ce.schema),source:Ie.url,embed:dt};ge.setData(Nt(Zn))}},ts=(ge,Ce)=>{const Ie=ge.dom.select("*[data-mce-object]");for(let dt=0;dt<Ce.length;dt++)for(let Rn=Ie.length-1;Rn>=0;Rn--)Ce[dt]===Ie[Rn]&&Ie.splice(Rn,1);ge.selection.select(Ie[0])},So=(ge,Ce)=>{const Ie=ge.dom.select("*[data-mce-object]");ge.insertContent(Ce),ts(ge,Ie),ge.nodeChanged()},ks=(ge,Ce)=>$e(Ce)&&Ce==="ephox-embed-iri"&&$e(ke(ge)),Xs=(ge,Ce)=>((dt,Rn)=>dt.width!==Rn.width||dt.height!==Rn.height)(ge,Ce)&&ks(Ce.source,ge.type),dn=(ge,Ce,Ie)=>{var dt;Ce.embed=Xs(ge,Ce)&&Ct(Ie)?tt(Ie,{...Ce,embed:""}):Qn((dt=Ce.embed)!==null&&dt!==void 0?dt:"",Ce,!1,Ie.schema),Ce.embed&&(ge.source===Ce.source||Wo(Ce.source))?So(Ie,Ce.embed):es(Ie,Ce).then(Rn=>{So(Ie,Rn.html)}).catch(wn(Ie))},ko=ge=>{const Ce=fn(ge),Ie=Bt(Ce),dt=Nt(Ce),Rn=(nn,bo)=>{const Lo=mt(bo.getData(),"source");nn.source!==Lo.source&&(uo(Tn,ge)({url:Lo.source,html:""}),es(ge,Lo).then(uo(Tn,ge)).catch(wn(ge)))},Zn=nn=>{var bo;const Lo=mt(nn.getData()),Qo=St((bo=Lo.embed)!==null&&bo!==void 0?bo:"",ge.schema);nn.setData(Nt(Qo))},Ao=(nn,bo,Lo)=>{const Qo=mt(nn.getData(),bo),bs=Xs(Lo,Qo)&&Ct(ge)?{...Qo,embed:""}:Qo,Sa=tt(ge,bs);nn.setData(Nt({...bs,embed:Sa}))},jo=[{name:"source",type:"urlinput",filetype:"media",label:"Source",picker_text:"Browse files"}],qo=Ct(ge)?[{type:"sizeinput",name:"dimensions",label:"Constrain proportions",constrain:!0}]:[],Mo={title:"General",name:"general",items:Rt([jo,qo])},we={title:"Embed",items:[{type:"textarea",name:"embed",label:"Paste your embed code below:"}]},gt=[];Cs(ge)&&gt.push({name:"altsource",type:"urlinput",filetype:"media",label:"Alternative source URL"}),ut(ge)&&gt.push({name:"poster",type:"urlinput",filetype:"image",label:"Media poster (Image URL)"});const Yt={title:"Advanced",name:"advanced",items:gt},At=[Mo,we];gt.length>0&&At.push(Yt);const Mn={type:"tabpanel",tabs:At},Tn=ge.windowManager.open({title:"Insert/Edit Media",size:"normal",body:Mn,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:nn=>{const bo=mt(nn.getData());dn(Ie.get(),bo,ge),nn.close()},onChange:(nn,bo)=>{switch(bo.name){case"source":Rn(Ie.get(),nn);break;case"embed":Zn(nn);break;case"dimensions":case"altsource":case"poster":Ao(nn,bo.name,Ie.get());break}Ie.set(mt(nn.getData()))},initialData:dt})},xo=ge=>({showDialog:()=>{ko(ge)}}),ac=ge=>{const Ce=()=>{ko(ge)};ge.addCommand("mceMedia",Ce)};var da=tinymce.util.Tools.resolve("tinymce.Env");const cn=ge=>{const Ce=ge.name;return Ce==="iframe"||Ce==="video"||Ce==="audio"},Bc=(ge,Ce,Ie,dt=null)=>{const Rn=ge.attr(Ie);return $e(Rn)?Rn:Gn(Ce,Ie)?null:dt},Ds=(ge,Ce,Ie)=>{const dt=Ce.name==="img"||ge.name==="video",Rn=dt?"300":null,Zn=ge.name==="audio"?"30":"150",Ao=dt?Zn:null;Ce.attr({width:Bc(ge,Ie,"width",Rn),height:Bc(ge,Ie,"height",Ao)})},Fc=(ge,Ce,Ie,dt)=>{const Rn=Ne(ge.schema).parse(dt,{context:Ce});for(;Rn.firstChild;)Ie.append(Rn.firstChild)},Ma=(ge,Ce)=>{const Ie=Ce.name,dt=new Xe("img",1);return Ss(ge,Ce,dt),Ds(Ce,dt,{}),dt.attr({style:Ce.attr("style"),src:da.transparentSrc,"data-mce-object":Ie,class:"mce-object mce-object-"+Ie}),dt},zr=(ge,Ce)=>{var Ie;const dt=Ce.name,Rn=new Xe("span",1);Rn.attr({contentEditable:"false",style:Ce.attr("style"),"data-mce-object":dt,class:"mce-preview-object mce-object-"+dt}),Ss(ge,Ce,Rn);const Zn=ge.dom.parseStyle((Ie=Ce.attr("style"))!==null&&Ie!==void 0?Ie:""),Ao=new Xe(dt,1);if(Ds(Ce,Ao,Zn),Ao.attr({src:Ce.attr("src"),style:Ce.attr("style"),class:Ce.attr("class")}),dt==="iframe")Ao.attr({allowfullscreen:Ce.attr("allowfullscreen"),frameborder:"0",sandbox:Ce.attr("sandbox"),referrerpolicy:Ce.attr("referrerpolicy")});else{hn(["controls","crossorigin","currentTime","loop","muted","poster","preload"],G=>{Ao.attr(G,Ce.attr(G))});const Mo=Rn.attr("data-mce-html");$e(Mo)&&Fc(ge,dt,Ao,unescape(Mo))}const jo=new Xe("span",1);return jo.attr("class","mce-shim"),Rn.append(Ao),Rn.append(jo),Rn},Ss=(ge,Ce,Ie)=>{var dt;const Rn=(dt=Ce.attributes)!==null&&dt!==void 0?dt:[];let Zn=Rn.length;for(;Zn--;){const Mo=Rn[Zn].name;let G=Rn[Zn].value;Mo!=="width"&&Mo!=="height"&&Mo!=="style"&&!en(Mo,"data-mce-")&&((Mo==="data"||Mo==="src")&&(G=ge.convertURL(G,Mo)),Ie.attr("data-mce-p-"+Mo,G))}const Ao=qt({inner:!0},ge.schema),jo=new Xe("div",1);hn(Ce.children(),Mo=>jo.append(Mo));const qo=Ao.serialize(jo);qo&&(Ie.attr("data-mce-html",escape(qo)),Ie.empty())},to=ge=>{const Ce=ge.attr("class");return se(Ce)&&/\btiny-pageembed\b/.test(Ce)},os=ge=>{let Ce=ge;for(;Ce=Ce.parent;)if(Ce.attr("data-ephox-embed-iri")||to(Ce))return!0;return!1},Wa=ge=>Ce=>{let Ie=Ce.length,dt;for(;Ie--;)dt=Ce[Ie],dt.parent&&(dt.parent.attr("data-mce-object")||(cn(dt)&&vn(ge)?os(dt)||dt.replace(zr(ge,dt)):os(dt)||dt.replace(Ma(ge,dt))))},Nc=(ge,Ce,Ie)=>{const dt=ge.options.get,Rn=dt("xss_sanitization"),Zn=Fe(ge);return Ne(ge.schema,{sanitize:Rn,validate:Zn}).parse(Ie,{context:Ce})},Za=ge=>{ge.on("PreInit",()=>{const{schema:Ce,serializer:Ie,parser:dt}=ge,Rn=Ce.getBoolAttrs();hn("webkitallowfullscreen mozallowfullscreen".split(" "),Zn=>{Rn[Zn]={}}),Wn({embed:["wmode"]},(Zn,Ao)=>{const jo=Ce.getElementRule(Ao);jo&&hn(Zn,qo=>{jo.attributes[qo]={},jo.attributesOrder.push(qo)})}),dt.addNodeFilter("iframe,video,audio,object,embed",Wa(ge)),Ie.addAttributeFilter("data-mce-object",(Zn,Ao)=>{var jo;let qo=Zn.length;for(;qo--;){const Mo=Zn[qo];if(!Mo.parent)continue;const G=Mo.attr(Ao),we=new Xe(G,1);if(G!=="audio"){const Mn=Mo.attr("class");Mn&&Mn.indexOf("mce-preview-object")!==-1&&Mo.firstChild?we.attr({width:Mo.firstChild.attr("width"),height:Mo.firstChild.attr("height")}):we.attr({width:Mo.attr("width"),height:Mo.attr("height")})}we.attr({style:Mo.attr("style")});const gt=(jo=Mo.attributes)!==null&&jo!==void 0?jo:[];let Yt=gt.length;for(;Yt--;){const Mn=gt[Yt].name;Mn.indexOf("data-mce-p-")===0&&we.attr(Mn.substr(11),gt[Yt].value)}const At=Mo.attr("data-mce-html");if(At){const Mn=Nc(ge,G,unescape(At));hn(Mn.children(),Tn=>we.append(Tn))}Mo.replace(we)}})}),ge.on("SetContent",()=>{const Ce=ge.dom;hn(Ce.select("span.mce-preview-object"),Ie=>{Ce.select("span.mce-shim",Ie).length===0&&Ce.add(Ie,"span",{class:"mce-shim"})})})},gn=ge=>{ge.on("ResolveName",Ce=>{let Ie;Ce.target.nodeType===1&&(Ie=Ce.target.getAttribute("data-mce-object"))&&(Ce.name=Ie)})},Fr=ge=>Ce=>{const Ie=()=>{Ce.setEnabled(ge.selection.isEditable())};return ge.on("NodeChange",Ie),Ie(),()=>{ge.off("NodeChange",Ie)}},yr=ge=>{const Ce=()=>ge.execCommand("mceMedia");ge.ui.registry.addToggleButton("media",{tooltip:"Insert/edit media",icon:"embed",onAction:Ce,onSetup:Ie=>{const dt=ge.selection;Ie.setActive(In(dt.getNode()));const Rn=dt.selectorChangedWithUnbind("img[data-mce-object],span[data-mce-object],div[data-ephox-embed-iri]",Ie.setActive).unbind,Zn=Fr(ge)(Ie);return()=>{Rn(),Zn()}}}),ge.ui.registry.addMenuItem("media",{icon:"embed",text:"Media...",onAction:Ce,onSetup:Fr(ge)})};var Ti=()=>{w.add("media",ge=>(Qe(ge),ac(ge),yr(ge),gn(ge),Za(ge),qe(ge),xo(ge)))};Ti()})()),ree}var cee;function _se(){return cee||(cee=1,Ase()),see}_se();var iee={},lee={},uee;function kse(){return uee||(uee=1,(function(){var w=tinymce.util.Tools.resolve("tinymce.PluginManager");const M=(E,_,V)=>{var ee;return V(E,_.prototype)?!0:((ee=E.constructor)===null||ee===void 0?void 0:ee.name)===_.name},L=E=>{const _=typeof E;return E===null?"null":_==="object"&&Array.isArray(E)?"array":_==="object"&&M(E,String,(V,ee)=>ee.isPrototypeOf(V))?"string":_},X=E=>_=>L(_)===E,se=E=>_=>typeof _===E,le=E=>_=>E===_,Se=X("string"),pe=X("array"),$e=se("boolean"),Ue=le(void 0),sn=E=>E==null,hn=E=>!sn(E),Rt=se("function"),tn=se("number"),fo=()=>{},Wn=(E,_)=>V=>E(_(V)),ze=E=>()=>E,Gn=E=>E,Bt=(E,_)=>E===_;function ie(E,..._){return(...V)=>{const ee=_.concat(V);return E.apply(null,ee)}}const en=E=>{E()},Ro=ze(!1),Qe=ze(!0);class K{constructor(_,V){this.tag=_,this.value=V}static some(_){return new K(!0,_)}static none(){return K.singletonNone}fold(_,V){return this.tag?V(this.value):_()}isSome(){return this.tag}isNone(){return!this.tag}map(_){return this.tag?K.some(_(this.value)):K.none()}bind(_){return this.tag?_(this.value):K.none()}exists(_){return this.tag&&_(this.value)}forall(_){return!this.tag||_(this.value)}filter(_){return!this.tag||_(this.value)?this:K.none()}getOr(_){return this.tag?this.value:_}or(_){return this.tag?this:_}getOrThunk(_){return this.tag?this.value:_()}orThunk(_){return this.tag?this:_()}getOrDie(_){if(this.tag)return this.value;throw new Error(_??"Called getOrDie on None")}static from(_){return hn(_)?K.some(_):K.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(_){this.tag&&_(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}K.singletonNone=new K(!1);const It=Array.prototype.indexOf,Kn=Array.prototype.push,vn=(E,_)=>It.call(E,_),Fe=(E,_)=>vn(E,_)>-1,he=(E,_)=>{for(let V=0,ee=E.length;V<ee;V++){const Ee=E[V];if(_(Ee,V))return!0}return!1},Cs=(E,_)=>{const V=[];for(let ee=0;ee<E;ee++)V.push(_(ee));return V},ut=(E,_)=>{const V=E.length,ee=new Array(V);for(let Ee=0;Ee<V;Ee++){const ot=E[Ee];ee[Ee]=_(ot,Ee)}return ee},Ct=(E,_)=>{for(let V=0,ee=E.length;V<ee;V++){const Ee=E[V];_(Ee,V)}},k=(E,_)=>{for(let V=E.length-1;V>=0;V--){const ee=E[V];_(ee,V)}},Eo=(E,_)=>{const V=[],ee=[];for(let Ee=0,ot=E.length;Ee<ot;Ee++){const Zt=E[Ee];(_(Zt,Ee)?V:ee).push(Zt)}return{pass:V,fail:ee}},bt=(E,_)=>{const V=[];for(let ee=0,Ee=E.length;ee<Ee;ee++){const ot=E[ee];_(ot,ee)&&V.push(ot)}return V},Uo=(E,_,V)=>(k(E,(ee,Ee)=>{V=_(V,ee,Ee)}),V),pn=(E,_,V)=>(Ct(E,(ee,Ee)=>{V=_(V,ee,Ee)}),V),Te=(E,_,V)=>{for(let ee=0,Ee=E.length;ee<Ee;ee++){const ot=E[ee];if(_(ot,ee))return K.some(ot);if(V(ot,ee))break}return K.none()},St=(E,_)=>Te(E,_,Ro),$n=E=>{const _=[];for(let V=0,ee=E.length;V<ee;++V){if(!pe(E[V]))throw new Error("Arr.flatten item "+V+" was not an array, input: "+E);Kn.apply(_,E[V])}return _},Xe=(E,_)=>$n(ut(E,_)),qt=(E,_)=>{for(let V=0,ee=E.length;V<ee;++V){const Ee=E[V];if(_(Ee,V)!==!0)return!1}return!0},Ne=(E,_)=>{const V={};for(let ee=0,Ee=E.length;ee<Ee;ee++){const ot=E[ee];V[String(ot)]=_(ot,ee)}return V},ft=(E,_)=>_>=0&&_<E.length?K.some(E[_]):K.none(),P=E=>ft(E,0),Xo=E=>ft(E,E.length-1),ro=(E,_)=>{for(let V=0;V<E.length;V++){const ee=_(E[V],V);if(ee.isSome())return ee}return K.none()},Qn=Object.keys,_o=Object.hasOwnProperty,ws=(E,_)=>{const V=Qn(E);for(let ee=0,Ee=V.length;ee<Ee;ee++){const ot=V[ee],Zt=E[ot];_(Zt,ot)}},be=E=>(_,V)=>{E[V]=_},ke=(E,_,V,ee)=>{ws(E,(Ee,ot)=>{(_(Ee,ot)?V:ee)(Ee,ot)})},Oe=(E,_)=>{const V={};return ke(E,_,be(V),fo),V},me=(E,_)=>{const V=[];return ws(E,(ee,Ee)=>{V.push(_(ee,Ee))}),V},Re=E=>me(E,Gn),at=E=>Qn(E).length,tt=(E,_)=>In(E,_)?K.from(E[_]):K.none(),In=(E,_)=>_o.call(E,_),qe=(E,_)=>In(E,_)&&E[_]!==void 0&&E[_]!==null,st=E=>{for(const _ in E)if(_o.call(E,_))return!1;return!0},Fn=E=>{let _=E;return{get:()=>_,set:Ee=>{_=Ee}}},rn=(E,_,V=Bt)=>E.exists(ee=>V(ee,_)),To=E=>{const _=[],V=ee=>{_.push(ee)};for(let ee=0;ee<E.length;ee++)E[ee].each(V);return _},es=(E,_,V)=>E.isSome()&&_.isSome()?K.some(V(E.getOrDie(),_.getOrDie())):K.none(),Wo=E=>E.bind(Gn),eo=(E,_)=>E?K.some(_):K.none(),zs=E=>{const _=Fn(K.none()),V=()=>_.get().each(E);return{clear:()=>{V(),_.set(K.none())},isSet:()=>_.get().isSome(),get:()=>_.get(),set:Sn=>{V(),_.set(K.some(Sn))}}},wo=()=>zs(E=>E.unbind()),mt=(E,_)=>E.substring(_),Nt=(E,_,V)=>_===""||E.length>=_.length&&E.substr(V,V+_.length)===_,wn=(E,_)=>fn(E,_)?mt(E,_.length):E,fn=(E,_)=>Nt(E,_,0),ts=(E=>_=>_.replace(E,""))(/^\s+|\s+$/g),So=E=>E.length>0,ks=E=>!So(E),Xs=(E,_=10)=>{const V=parseInt(E,_);return isNaN(V)?K.none():K.some(V)},dn=E=>{const _=parseFloat(E);return isNaN(_)?K.none():K.some(_)},ko=E=>{let _=!1,V;return(...ee)=>(_||(_=!0,V=E.apply(null,ee)),V)},xo=(E,_)=>{const ee=(_||document).createElement("div");if(ee.innerHTML=E,!ee.hasChildNodes()||ee.childNodes.length>1){const Ee="HTML does not have a single root node";throw console.error(Ee,E),new Error(Ee)}return cn(ee.childNodes[0])},ac=(E,_)=>{const ee=(_||document).createElement(E);return cn(ee)},da=(E,_)=>{const ee=(_||document).createTextNode(E);return cn(ee)},cn=E=>{if(E==null)throw new Error("Node cannot be null or undefined");return{dom:E}},Ds={fromHtml:xo,fromTag:ac,fromText:da,fromDom:cn,fromPoint:(E,_,V)=>K.from(E.dom.elementFromPoint(_,V)).map(cn)},Fc=8,Ma=9,zr=11,Ss=1,to=3,os=(E,_)=>{const V=E.dom;if(V.nodeType!==Ss)return!1;{const ee=V;if(ee.matches!==void 0)return ee.matches(_);if(ee.msMatchesSelector!==void 0)return ee.msMatchesSelector(_);if(ee.webkitMatchesSelector!==void 0)return ee.webkitMatchesSelector(_);if(ee.mozMatchesSelector!==void 0)return ee.mozMatchesSelector(_);throw new Error("Browser lacks native selectors")}},Wa=E=>E.nodeType!==Ss&&E.nodeType!==Ma&&E.nodeType!==zr||E.childElementCount===0,Nc=(E,_)=>{const V=_===void 0?document:_.dom;return Wa(V)?[]:ut(V.querySelectorAll(E),Ds.fromDom)},Za=(E,_)=>{const V=_===void 0?document:_.dom;return Wa(V)?K.none():K.from(V.querySelector(E)).map(Ds.fromDom)},gn=(E,_)=>E.dom===_.dom,Fr=os,yr=E=>E.dom.nodeName.toLowerCase(),Ti=E=>E.dom.nodeType,ge=E=>_=>Ti(_)===E,Ce=E=>Ti(E)===Fc||yr(E)==="#comment",Ie=ge(Ss),dt=ge(to),Rn=ge(Ma),Zn=ge(zr),Ao=E=>_=>Ie(_)&&yr(_)===E,jo=E=>Ds.fromDom(E.dom.ownerDocument),qo=E=>Rn(E)?E:jo(E),Mo=E=>K.from(E.dom.parentNode).map(Ds.fromDom),G=(E,_)=>{const V=Rt(_)?_:Ro;let ee=E.dom;const Ee=[];for(;ee.parentNode!==null&&ee.parentNode!==void 0;){const ot=ee.parentNode,Zt=Ds.fromDom(ot);if(Ee.push(Zt),V(Zt)===!0)break;ee=ot}return Ee},we=E=>K.from(E.dom.previousSibling).map(Ds.fromDom),gt=E=>K.from(E.dom.nextSibling).map(Ds.fromDom),Yt=E=>ut(E.dom.childNodes,Ds.fromDom),At=(E,_)=>{const V=E.dom.childNodes;return K.from(V[_]).map(Ds.fromDom)},Mn=E=>At(E,0),Tn=E=>Zn(E)&&hn(E.dom.host),nn=E=>Ds.fromDom(E.dom.getRootNode()),bo=E=>{const _=nn(E);return Tn(_)?K.some(_):K.none()},Lo=E=>Ds.fromDom(E.dom.host),Qo=(E,_)=>{Mo(E).each(ee=>{ee.dom.insertBefore(_.dom,E.dom)})},bs=(E,_)=>{gt(E).fold(()=>{Mo(E).each(Ee=>{Er(Ee,_)})},ee=>{Qo(ee,_)})},Sa=(E,_)=>{Mn(E).fold(()=>{Er(E,_)},ee=>{E.dom.insertBefore(_.dom,ee.dom)})},Er=(E,_)=>{E.dom.appendChild(_.dom)},Ml=(E,_)=>{Qo(E,_),Er(_,E)},Gs=(E,_)=>{Ct(_,(V,ee)=>{const Ee=ee===0?E:_[ee-1];bs(Ee,V)})},rs=(E,_)=>{Ct(_,V=>{Er(E,V)})},Os=(E,_,V)=>{if(Se(V)||$e(V)||tn(V))E.setAttribute(_,V+"");else throw console.error("Invalid call to Attribute.set. Key ",_,":: Value ",V,":: Element ",E),new Error("Attribute value was not simple")},ma=(E,_,V)=>{Os(E.dom,_,V)},Vi=(E,_)=>{const V=E.dom;ws(_,(ee,Ee)=>{Os(V,Ee,ee)})},er=(E,_)=>{const V=E.dom.getAttribute(_);return V===null?void 0:V},jn=(E,_)=>K.from(er(E,_)),fa=(E,_)=>{E.dom.removeAttribute(_)},xa=E=>pn(E.dom.attributes,(_,V)=>(_[V.name]=V.value,_),{}),cr=E=>{const _=E.dom;_.parentNode!==null&&_.parentNode.removeChild(_)},Ju=E=>{const _=Yt(E);_.length>0&&Gs(E,_),cr(E)},bu=E=>ut(E,Ds.fromDom),Js=E=>E.style!==void 0&&Rt(E.style.getPropertyValue),Ai=E=>{const _=dt(E)?E.dom.parentNode:E.dom;if(_==null||_.ownerDocument===null)return!1;const V=_.ownerDocument;return bo(Ds.fromDom(_)).fold(()=>V.body.contains(_),Wn(Ai,Lo))},ri=(E,_,V)=>{if(!Se(V))throw console.error("Invalid call to CSS.set. Property ",_,":: Value ",V,":: Element ",E),new Error("CSS value must be a string: "+V);Js(E)&&E.style.setProperty(_,V)},Qu=(E,_)=>{Js(E)&&E.style.removeProperty(_)},Gt=(E,_,V)=>{const ee=E.dom;ri(ee,_,V)},Pc=(E,_)=>{const V=E.dom,Ee=window.getComputedStyle(V).getPropertyValue(_);return Ee===""&&!Ai(E)?Ba(V,_):Ee},Ba=(E,_)=>Js(E)?E.style.getPropertyValue(_):"",ja=(E,_)=>{const V=E.dom,ee=Ba(V,_);return K.from(ee).filter(Ee=>Ee.length>0)},ir=(E,_)=>{const V=E.dom;Qu(V,_),rn(jn(E,"style").map(ts),"")&&fa(E,"style")},vu=(E,_)=>dn(E).getOr(_),qa=(E,_,V)=>vu(Pc(E,_),V),yc=(E,_,V,ee)=>{const Ee=qa(E,`padding-${V}`,0),ot=qa(E,`padding-${ee}`,0),Zt=qa(E,`border-${V}-width`,0),Sn=qa(E,`border-${ee}-width`,0);return _-Ee-ot-Zt-Sn},Bl=(E,_)=>{const V=E.dom,ee=V.getBoundingClientRect().width||V.offsetWidth;return yc(E,ee,"left","right")},Ui=E=>Bl(E),Fl=((E,_)=>{const V=ot=>{if(!E(ot))throw new Error("Can only get "+_+" value of a "+_+" node");return ee(ot).getOr("")},ee=ot=>E(ot)?K.from(ot.dom.nodeValue):K.none();return{get:V,getOption:ee,set:(ot,Zt)=>{if(!E(ot))throw new Error("Can only set raw "+_+" value of a "+_+" node");ot.dom.nodeValue=Zt}}})(dt,"text"),Wi=E=>Fl.get(E),Nl=(E,_)=>Fl.set(E,_);var zt=(E,_,V,ee,Ee)=>E(V,ee)?K.some(V):Rt(Ee)&&Ee(V)?K.none():_(V,ee,Ee);const dl=(E,_,V)=>{let ee=E.dom;const Ee=Rt(V)?V:Ro;for(;ee.parentNode;){ee=ee.parentNode;const ot=Ds.fromDom(ee);if(_(ot))return K.some(ot);if(Ee(ot))break}return K.none()},td=(E,_,V)=>zt((Ee,ot)=>ot(Ee),dl,E,_,V),U=(E,_)=>{const V=Ee=>_(Ds.fromDom(Ee));return St(E.dom.childNodes,V).map(Ds.fromDom)},ue=(E,_,V)=>dl(E,ee=>os(ee,_),V),Me=(E,_)=>U(E,V=>os(V,_)),ct=(E,_)=>Za(_,E),Lt=(E,_,V)=>zt((Ee,ot)=>os(Ee,ot),ue,E,_,V),mn=E=>Lt(E,"[contenteditable]"),Bo=(E,_=!1)=>Ai(E)?E.dom.isContentEditable:mn(E).fold(ze(_),V=>yo(V)==="true"),yo=E=>E.dom.contentEditable,us=(E,_)=>bt(Yt(E),_),$=(E,_)=>{let V=[];return Ct(Yt(E),ee=>{_(ee)&&(V=V.concat([ee])),V=V.concat($(ee,_))}),V},j=(E,_)=>us(E,V=>os(V,_)),fe=(E,_)=>Nc(_,E),Ge=(E,_)=>Me(E,_).isSome(),ln=E=>E.nodeName.toLowerCase(),Go=E=>Ds.fromDom(E.getBody()),Rs=E=>_=>gn(_,Go(E)),Or=E=>E?E.replace(/px$/,""):"",Fa=E=>/^\d+(\.\d+)?$/.test(E)?E+"px":E,Cc=E=>Ds.fromDom(E.selection.getStart()),Ko=E=>Ds.fromDom(E.selection.getEnd()),ml=E=>td(E,Ao("table")).forall(Bo),Rm=["tfoot","thead","tbody","colgroup"],Zi=E=>Fe(Rm,E),mg=(E,_)=>({rows:E,columns:_}),Mm=(E,_,V)=>({element:E,rowspan:_,colspan:V}),wc=(E,_,V,ee,Ee,ot)=>({element:E,rowspan:_,colspan:V,row:ee,column:Ee,isLocked:ot}),nd=(E,_,V)=>({element:E,cells:_,section:V}),od=(E,_,V,ee)=>({startRow:E,startCol:_,finishRow:V,finishCol:ee}),Mh=(E,_,V)=>({element:E,colspan:_,column:V}),fg=(E,_)=>({element:E,columns:_}),gg=(E,_,V=0)=>jn(E,_).map(ee=>parseInt(ee,10)).getOr(V),Bh=(E,_)=>pf(E,_,Qe),pf=(E,_,V)=>Xe(Yt(E),ee=>os(ee,_)?V(ee)?[ee]:[]:pf(ee,_,V)),ji=(E,_,V=Ro)=>{if(V(_))return K.none();if(Fe(E,yr(_)))return K.some(_);const ee=Ee=>os(Ee,"table")||V(Ee);return ue(_,E.join(","),ee)},Fh=(E,_)=>ji(["td","th"],E,_),Nh=E=>Bh(E,"th,td"),J=E=>os(E,"colgroup")?j(E,"col"):Xe(pt(E),_=>j(_,"col")),de=(E,_)=>Lt(E,"table",_),He=E=>Bh(E,"tr"),pt=E=>de(E).fold(ze([]),_=>j(_,"colgroup")),Ln=Ao("th"),Do=(E,_)=>E&&_?"sectionCells":E?"section":"cells",Rr=E=>{const _=E.section==="thead",V=rn(Sc(E.cells),"th");return E.section==="tfoot"?{type:"footer"}:_||V?{type:"header",subType:Do(_,V)}:{type:"body"}},Sc=E=>{const _=bt(E,V=>Ln(V.element));return _.length===0?K.some("td"):_.length===E.length?K.some("th"):K.none()},ga=E=>{const _=ut(E,Ee=>Rr(Ee).type),V=Fe(_,"header"),ee=Fe(_,"footer");if(!V&&!ee)return K.some("body");{const Ee=Fe(_,"body");return V&&!Ee&&!ee?K.some("header"):!V&&!Ee&&ee?K.some("footer"):K.none()}},xc=(E,_)=>ut(E,V=>{if(yr(V)==="colgroup"){const ee=ut(J(V),Ee=>{const ot=gg(Ee,"span",1);return Mm(Ee,1,ot)});return nd(V,ee,"colgroup")}else{const ee=ut(Nh(V),Ee=>{const ot=gg(Ee,"rowspan",1),Zt=gg(Ee,"colspan",1);return Mm(Ee,ot,Zt)});return nd(V,ee,_(V))}}),Cu=E=>Mo(E).map(_=>{const V=yr(_);return Zi(V)?V:"tbody"}).getOr("tbody"),Ec=E=>{const _=He(E),ee=[...pt(E),..._];return xc(ee,Cu)},wu="data-snooker-locked-cols",Tc=E=>jn(E,wu).bind(_=>K.from(_.match(/\d+/g))).map(_=>Ne(_,Qe)),$c=(E,_)=>E+","+_,Pl=(E,_,V)=>K.from(E.access[$c(_,V)]),Ic=(E,_,V)=>{const ee=Po(E,Ee=>V(_,Ee.element));return ee.length>0?K.some(ee[0]):K.none()},Po=(E,_)=>{const V=Xe(E.all,ee=>ee.cells);return bt(V,_)},bf=E=>{const _={};let V=0;return Ct(E.cells,ee=>{const Ee=ee.colspan;Cs(Ee,ot=>{const Zt=V+ot;_[Zt]=Mh(ee.element,Ee,Zt)}),V+=Ee}),_},Ph=E=>{const _={},V=[],Ee=P(E).map(Vc=>Vc.element).bind(de).bind(Tc).getOr({});let ot=0,Zt=0,Sn=0;const{pass:go,fail:Fo}=Eo(E,Vc=>Vc.section==="colgroup");Ct(Fo,Vc=>{const ld=[];Ct(Vc.cells,ud=>{let wl=0;for(;_[$c(Sn,wl)]!==void 0;)wl++;const S1=qe(Ee,wl.toString()),_f=wc(ud.element,ud.rowspan,ud.colspan,Sn,wl,S1);for(let Uh=0;Uh<ud.colspan;Uh++)for(let Nm=0;Nm<ud.rowspan;Nm++){const kf=Sn+Nm,Wh=wl+Uh,Zh=$c(kf,Wh);_[Zh]=_f,Zt=Math.max(Zt,Wh+1)}ld.push(_f)}),ot++,V.push(nd(Vc.element,ld,Vc.section)),Sn++});const{columns:Ks,colgroups:ur}=Xo(go).map(Vc=>{const ld=bf(Vc);return{colgroups:[fg(Vc.element,Re(ld))],columns:ld}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:mg(ot,Zt),access:_,all:V,columns:Ks,colgroups:ur}},Nr={fromTable:E=>{const _=Ec(E);return Ph(_)},generate:Ph,getAt:Pl,findItem:Ic,filterItems:Po,justCells:E=>Xe(E.all,_=>_.cells),justColumns:E=>Re(E.columns),hasColumns:E=>Qn(E.columns).length>0,getColumnAt:(E,_)=>K.from(E.columns[_])},Bm=(E,_)=>ro(E.all,V=>St(V.cells,ee=>gn(_,ee.element))),Iy=(E,_,V)=>{const ee=ut(_.selection,ot=>Fh(ot).bind(Zt=>Bm(E,Zt)).filter(V)),Ee=To(ee);return eo(Ee.length>0,Ee)},Mt=(E,_)=>_.mergable,_i=(E,_)=>_.unmergable,hg=(E,_)=>Iy(E,_,Qe),fl=(E,_)=>Bm(E,_).exists(V=>!V.isLocked),vf=(E,_)=>qt(_,V=>fl(E,V)),n1=(E,_)=>Mt(E,_).filter(V=>vf(E,V.cells)),re=(E,_)=>_i(E,_).filter(V=>vf(E,V));var ai=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Hd=()=>{const E=Fo=>Ds.fromDom(Fo.dom.cloneNode(!1)),_=Fo=>qo(Fo).dom,V=Fo=>Ie(Fo)?yr(Fo)==="body"?!0:Fe(ai,yr(Fo)):!1,ee=Fo=>Ie(Fo)?Fe(["br","img","hr","input"],yr(Fo)):!1,Ee=Fo=>Ie(Fo)&&er(Fo,"contenteditable")==="false",ot=(Fo,Ks)=>Fo.dom.compareDocumentPosition(Ks.dom),Zt=(Fo,Ks)=>{const ur=xa(Fo);Vi(Ks,ur)},Sn=Fo=>{const Ks=yr(Fo);return Fe(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],Ks)},go=Fo=>Ie(Fo)?jn(Fo,"lang"):K.none();return{up:ze({selector:ue,closest:Lt,predicate:dl,all:G}),down:ze({selector:fe,predicate:$}),styles:ze({get:Pc,getRaw:ja,set:Gt,remove:ir}),attrs:ze({get:er,set:ma,remove:fa,copyTo:Zt}),insert:ze({before:Qo,after:bs,afterAll:Gs,append:Er,appendAll:rs,prepend:Sa,wrap:Ml}),remove:ze({unwrap:Ju,remove:cr}),create:ze({nu:Ds.fromTag,clone:E,text:Ds.fromText}),query:ze({comparePosition:ot,prevSibling:we,nextSibling:gt}),property:ze({children:Yt,name:yr,parent:Mo,document:_,isText:dt,isComment:Ce,isElement:Ie,isSpecial:Sn,getLanguage:go,getText:Wi,setText:Nl,isBoundary:V,isEmptyTag:ee,isNonEditable:Ee}),eq:gn,is:Fr}};const o1=(E,_,V,ee)=>{const Ee=V[0],ot=V.slice(1);return ee(E,_,Ee,ot)},yf=(E,_,V)=>V.length>0?o1(E,_,V,cc):K.none(),cc=(E,_,V,ee)=>{const Ee=_(E,V);return Uo(ee,(ot,Zt)=>{const Sn=_(E,Zt);return ci(E,ot,Sn)},Ee)},ci=(E,_,V)=>_.bind(ee=>V.filter(ie(E.eq,ee))),s1=yf,r1=Hd(),pg=(E,_)=>s1(r1,(V,ee)=>E(ee),_),a1=(E,_)=>{const V=Nr.fromTable(E);return hg(V,_).bind(Ee=>{const ot=Ee[Ee.length-1],Zt=Ee[0].row,Sn=ot.row+ot.rowspan,go=V.all.slice(Zt,Sn);return ga(go)}).getOr("")},Su=(E,_)=>_.column>=E.startCol&&_.column+_.colspan-1<=E.finishCol&&_.row>=E.startRow&&_.row+_.rowspan-1<=E.finishRow,bg=(E,_)=>{let V=!0;const ee=ie(Su,_);for(let Ee=_.startRow;Ee<=_.finishRow;Ee++)for(let ot=_.startCol;ot<=_.finishCol;ot++)V=V&&Nr.getAt(E,Ee,ot).exists(ee);return V?K.some(_):K.none()},c1=(E,_)=>od(Math.min(E.row,_.row),Math.min(E.column,_.column),Math.max(E.row+E.rowspan-1,_.row+_.rowspan-1),Math.max(E.column+E.colspan-1,_.column+_.colspan-1)),ki=(E,_,V)=>{const ee=Nr.findItem(E,_,gn),Ee=Nr.findItem(E,V,gn);return ee.bind(ot=>Ee.map(Zt=>c1(ot,Zt)))},i1=(E,_,V)=>ki(E,_,V).bind(ee=>bg(E,ee)),$l=(E,_,V)=>{const ee=zd(E);return i1(ee,_,V)},zd=Nr.fromTable;var Yo=tinymce.util.Tools.resolve("tinymce.util.Tools");const Lc=(E,_,V)=>{const ee=E.select("td,th",_);let Ee;for(let ot=0;ot<ee.length;ot++){const Zt=E.getStyle(ee[ot],V);if(Ue(Ee)&&(Ee=Zt),Ee!==Zt)return""}return Ee},Cf=(E,_,V)=>{Yo.each("left center right".split(" "),ee=>{ee!==V&&E.formatter.remove("align"+ee,{},_)}),V&&E.formatter.apply("align"+V,{},_)},cb=(E,_,V)=>{Yo.each("top middle bottom".split(" "),ee=>{ee!==V&&E.formatter.remove("valign"+ee,{},_)}),V&&E.formatter.apply("valign"+V,{},_)},Oo=(E,_,V)=>{E.dispatch("TableModified",{...V,table:_})};var sd=tinymce.util.Tools.resolve("tinymce.Env");const Xr="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",Il=Cs(5,E=>{const _=`${E+1}px`;return{title:_,value:_}}),Ll=ut(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],E=>({title:E,value:E.toLowerCase()})),Tr="100%",xs=E=>{var _;const V=E.dom,ee=(_=V.getParent(E.selection.getStart(),V.isBlock))!==null&&_!==void 0?_:E.getBody();return Ui(Ds.fromDom(ee))+"px"},Ly=(E,_)=>ib(E)||!zc(E)?_:Vd(E)?{..._,width:xs(E)}:{..._,width:Tr},Hy=(E,_)=>ib(E)||zc(E)?_:Vd(E)?{..._,width:xs(E)}:{..._,width:Tr},Jr=E=>_=>_.options.get(E),gl=E=>{const _=E.options.register;_("table_border_widths",{processor:"object[]",default:Il}),_("table_border_styles",{processor:"object[]",default:Ll}),_("table_cell_advtab",{processor:"boolean",default:!0}),_("table_row_advtab",{processor:"boolean",default:!0}),_("table_advtab",{processor:"boolean",default:!0}),_("table_appearance_options",{processor:"boolean",default:!0}),_("table_grid",{processor:"boolean",default:!sd.deviceType.isTouch()}),_("table_cell_class_list",{processor:"object[]",default:[]}),_("table_row_class_list",{processor:"object[]",default:[]}),_("table_class_list",{processor:"object[]",default:[]}),_("table_toolbar",{processor:"string",default:Xr}),_("table_background_color_map",{processor:"object[]",default:[]}),_("table_border_color_map",{processor:"object[]",default:[]})},hl=Jr("table_sizing_mode"),oa=Jr("table_border_widths"),Hl=Jr("table_border_styles"),Hc=Jr("table_cell_advtab"),Di=Jr("table_row_advtab"),ic=Jr("table_advtab"),_s=Jr("table_appearance_options"),qi=Jr("table_grid"),zc=Jr("table_style_by_css"),Na=Jr("table_cell_class_list"),Ea=Jr("table_row_class_list"),wr=Jr("table_class_list"),pl=Jr("table_toolbar"),Ta=Jr("table_background_color_map"),Vr=Jr("table_border_color_map"),Vd=E=>hl(E)==="fixed",ib=E=>hl(E)==="responsive",$h=E=>{const _=E.options,V=_.get("table_default_styles");return _.isSet("table_default_styles")?V:Ly(E,V)},Aa=E=>{const _=E.options,V=_.get("table_default_attributes");return _.isSet("table_default_attributes")?V:Hy(E,V)},l1=E=>ue(E,"table"),lb=(E,_)=>{const V=fe(E,_);return V.length>0?K.some(V):K.none()},Fm=(E,_,V)=>ct(E,_).bind(ee=>ct(E,V).bind(Ee=>pg(l1,[ee,Ee]).map(ot=>({first:ee,last:Ee,table:ot})))),Hn=(E,_)=>lb(E,_),u1=(E,_,V)=>Fm(E,_,V).bind(ee=>{const Ee=go=>gn(E,go),ot="thead,tfoot,tbody,table",Zt=ue(ee.first,ot,Ee),Sn=ue(ee.last,ot,Ee);return Zt.bind(go=>Sn.bind(Fo=>gn(go,Fo)?$l(ee.table,ee.first,ee.last):K.none()))}),ha=Gn,Pa=E=>{const _=(ee,Ee)=>jn(ee,Ee).exists(ot=>parseInt(ot,10)>1),V=ee=>_(ee,"rowspan")||_(ee,"colspan");return E.length>0&&qt(E,V)?K.some(E):K.none()},$a=(E,_,V)=>_.length<=1?K.none():u1(E,V.firstSelectedSelector,V.lastSelectedSelector).map(ee=>({bounds:ee,cells:_})),tr="data-mce-selected",Ud="data-mce-first-selected",Ih="td["+Ud+"],th["+Ud+"]",Gi="data-mce-last-selected",zl="td["+Gi+"],th["+Gi+"]",d1={selected:tr,firstSelectedSelector:Ih,lastSelectedSelector:zl},m1=E=>de(E).bind(_=>Hn(_,d1.firstSelectedSelector)).fold(ze(E),_=>_[0]),vg=E=>(_,V)=>{const ee=yr(_),Ee=ee==="col"||ee==="colgroup"?m1(_):_;return Lt(Ee,E,V)},xu=vg("th,td,caption"),bl=vg("th,td"),f1=E=>bu(E.model.table.getSelectedCells()),Ga=(E,_)=>{const V=bl(E),ee=V.bind(Ee=>de(Ee)).map(Ee=>He(Ee));return es(V,ee,(Ee,ot)=>bt(ot,Zt=>he(bu(Zt.dom.cells),Sn=>er(Sn,_)==="1"||gn(Sn,Ee)))).getOr([])},Ki=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],Eu=E=>({value:yg(E)}),ds=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Oi=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,ub=E=>ds.test(E)||Oi.test(E),yg=E=>wn(E,"#").toUpperCase(),Yi=E=>ub(E)?K.some({value:yg(E)}):K.none(),Yn=E=>{const _=E.toString(16);return(_.length===1?"0"+_:_).toUpperCase()},Cr=E=>{const _=Yn(E.red)+Yn(E.green)+Yn(E.blue);return Eu(_)},Ka=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,nr=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,Xi=(E,_,V,ee)=>({red:E,green:_,blue:V,alpha:ee}),lr=(E,_,V,ee)=>{const Ee=parseInt(E,10),ot=parseInt(_,10),Zt=parseInt(V,10),Sn=parseFloat(ee);return Xi(Ee,ot,Zt,Sn)},Qr=E=>{const _=Ka.exec(E);if(_!==null)return K.some(lr(_[1],_[2],_[3],"1"));const V=nr.exec(E);return V!==null?K.some(lr(V[1],V[2],V[3],V[4])):K.none()},wf=E=>Yi(E).orThunk(()=>Qr(E).map(Cr)).getOrThunk(()=>{const _=document.createElement("canvas");_.height=1,_.width=1;const V=_.getContext("2d");V.clearRect(0,0,_.width,_.height),V.fillStyle="#FFFFFF",V.fillStyle=E,V.fillRect(0,0,1,1);const ee=V.getImageData(0,0,1,1).data,Ee=ee[0],ot=ee[1],Zt=ee[2],Sn=ee[3];return Cr(Xi(Ee,ot,Zt,Sn))}),Ho=E=>Qr(E).map(Cr).map(_=>"#"+_.value).getOr(E),vl=(E,_,V)=>ee=>{const Ee=wo(),ot=ks(V),Zt=()=>{const Sn=f1(E),go=Fo=>E.formatter.match(_,{value:V},Fo.dom,ot);ot?(ee.setActive(!he(Sn,go)),Ee.set(E.formatter.formatChanged(_,Fo=>ee.setActive(!Fo),!0))):(ee.setActive(qt(Sn,go)),Ee.set(E.formatter.formatChanged(_,ee.setActive,!1,{value:V})))};return E.initialized?Zt():E.on("init",Zt),Ee.clear},Ws=E=>qe(E,"menu"),li=E=>ut(E,_=>{const V=_.text||_.title||"";return Ws(_)?{text:V,items:li(_.menu)}:{text:V,value:_.value}}),ea=E=>E.length?K.some(li([{text:"Select...",value:"mce-no-match"},...E])):K.none(),ta=(E,_,V,ee)=>ut(_,Ee=>{const ot=Ee.text||Ee.title;return Ws(Ee)?{type:"nestedmenuitem",text:ot,getSubmenuItems:()=>ta(E,Ee.menu,V,ee)}:{text:ot,type:"togglemenuitem",onAction:()=>ee(Ee.value),onSetup:vl(E,V,Ee.value)}}),Tu=(E,_)=>V=>{E.execCommand("mceTableApplyCellStyle",!1,{[_]:V})},Sf=E=>Xe(E,_=>Ws(_)?[{..._,menu:Sf(_.menu)}]:So(_.value)?[_]:[]),rd=(E,_,V,ee)=>Ee=>Ee(ta(E,_,V,ee)),Wd=(E,_,V)=>{const ee=ut(_,Ee=>({text:Ee.title,value:"#"+wf(Ee.value).value,type:"choiceitem"}));return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:ee.length>0?ee:void 0,allowCustomColors:!1},onAction:Ee=>{const ot=Ee.value==="remove"?"":Ee.value;E.execCommand("mceTableApplyCellStyle",!1,{[V]:ot})}}]},Zd=E=>()=>{const V=E.queryCommandValue("mceTableRowType")==="header"?"body":"header";E.execCommand("mceTableRowType",!1,{type:V})},Ya=E=>()=>{const V=E.queryCommandValue("mceTableColType")==="th"?"td":"th";E.execCommand("mceTableColType",!1,{type:V})},ad=E=>ea(Na(E)).map(_=>({name:"class",type:"listbox",label:"Class",items:_})),zy=[{name:"width",type:"input",label:"Width"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:Ki}],jd=E=>zy.concat(ad(E).toArray()),Ms=(E,_)=>{const ee=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(li(Hl(E)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:_==="cell"?[{name:"borderwidth",type:"input",label:"Border width"}].concat(ee):ee}},xf={normal:(E,_)=>{const V=E.dom;return{setAttrib:(Zt,Sn)=>{V.setAttrib(_,Zt,Sn)},setStyle:(Zt,Sn)=>{V.setStyle(_,Zt,Sn)},setFormat:(Zt,Sn)=>{Sn===""?E.formatter.remove(Zt,{value:null},_,!0):E.formatter.apply(Zt,{value:Sn},_)}}}},lc=E=>fn(E,"rgb")?Ho(E):E,ui=E=>{const _=Ds.fromDom(E);return{borderwidth:ja(_,"border-width").getOr(""),borderstyle:ja(_,"border-style").getOr(""),bordercolor:ja(_,"border-color").map(lc).getOr(""),backgroundcolor:ja(_,"background-color").map(lc).getOr("")}},Pr=E=>{const _=E[0],V=E.slice(1);return Ct(V,ee=>{Ct(Qn(_),Ee=>{ws(ee,(ot,Zt)=>{const Sn=_[Ee];Sn!==""&&Ee===Zt&&Sn!==ot&&(_[Ee]=Ee==="class"?"mce-no-match":"")})})}),_},cd=(E,_,V,ee)=>St(E,Ee=>!Ue(V.formatter.matchNode(ee,_+Ee))).getOr(""),Ur=ie(cd,["left","center","right"],"align"),Ef=ie(cd,["top","middle","bottom"],"valign"),Lh=(E,_)=>{const V=$h(E),ee=Aa(E),Ee=()=>({borderstyle:tt(V,"border-style").getOr(""),bordercolor:lc(tt(V,"border-color").getOr("")),backgroundcolor:lc(tt(V,"background-color").getOr(""))}),ot={height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""},Zt=()=>{const Ks=V["border-width"];return zc(E)&&Ks?{border:Ks}:tt(ee,"border").fold(()=>({}),ur=>({border:ur}))},Sn=_?Ee():{},go=()=>{const Ks=tt(V,"border-spacing").or(tt(ee,"cellspacing")).fold(()=>({}),na=>({cellspacing:na})),ur=tt(V,"border-padding").or(tt(ee,"cellpadding")).fold(()=>({}),na=>({cellpadding:na}));return{...Ks,...ur}};return{...ot,...V,...ee,...Sn,...Zt(),...go()}},h1=E=>de(Ds.fromDom(E)).map(_=>{const V={selection:bu(E.cells)};return a1(_,V)}).getOr(""),wS=(E,_,V)=>{const ee=(Sn,go)=>{const Fo=ja(Ds.fromDom(go),"border-width");return zc(E)&&Fo.isSome()?Fo.getOr(""):Sn.getAttrib(go,"border")||Lc(E.dom,go,"border-width")||Lc(E.dom,go,"border")||""},Ee=E.dom,ot=zc(E)?Ee.getStyle(_,"border-spacing")||Ee.getAttrib(_,"cellspacing"):Ee.getAttrib(_,"cellspacing")||Ee.getStyle(_,"border-spacing"),Zt=zc(E)?Lc(Ee,_,"padding")||Ee.getAttrib(_,"cellpadding"):Ee.getAttrib(_,"cellpadding")||Lc(Ee,_,"padding");return{width:Ee.getStyle(_,"width")||Ee.getAttrib(_,"width"),height:Ee.getStyle(_,"height")||Ee.getAttrib(_,"height"),cellspacing:ot??"",cellpadding:Zt??"",border:ee(Ee,_),caption:!!Ee.select("caption",_)[0],class:Ee.getAttrib(_,"class",""),align:Ur(E,_),...V?ui(_):{}}},Vl=(E,_,V)=>{const ee=E.dom;return{height:ee.getStyle(_,"height")||ee.getAttrib(_,"height"),class:ee.getAttrib(_,"class",""),type:h1(_),align:Ur(E,_),...V?ui(_):{}}},Vy=(E,_,V,ee)=>{const Ee=E.dom,ot=ee.getOr(_);return{width:((Sn,go)=>Ee.getStyle(Sn,go)||Ee.getAttrib(Sn,go))(ot,"width"),scope:Ee.getAttrib(_,"scope"),celltype:ln(_),class:Ee.getAttrib(_,"class",""),halign:Ur(E,_),valign:Ef(E,_),...V?ui(_):{}}},p1=(E,_)=>{const V=Nr.fromTable(E),ee=Nr.justCells(V),Ee=bt(ee,ot=>he(_,Zt=>gn(ot.element,Zt)));return ut(Ee,ot=>({element:ot.element.dom,column:Nr.getColumnAt(V,ot.column).map(Zt=>Zt.element.dom)}))},Ul=(E,_,V,ee)=>{ee("scope")&&E.setAttrib("scope",V.scope),ee("class")&&V.class!=="mce-no-match"&&E.setAttrib("class",V.class),ee("width")&&_.setStyle("width",Fa(V.width))},db=(E,_,V)=>{V("backgroundcolor")&&E.setFormat("tablecellbackgroundcolor",_.backgroundcolor),V("bordercolor")&&E.setFormat("tablecellbordercolor",_.bordercolor),V("borderstyle")&&E.setFormat("tablecellborderstyle",_.borderstyle),V("borderwidth")&&E.setFormat("tablecellborderwidth",Fa(_.borderwidth))},Tf=(E,_,V,ee)=>{const Ee=_.length===1;Ct(_,ot=>{const Zt=ot.element,Sn=Ee?Qe:ee,go=xf.normal(E,Zt),Fo=ot.column.map(Ks=>xf.normal(E,Ks)).getOr(go);Ul(go,Fo,V,Sn),Hc(E)&&db(go,V,Sn),ee("halign")&&Cf(E,Zt,V.halign),ee("valign")&&cb(E,Zt,V.valign)})},Cg=(E,_)=>{E.execCommand("mceTableCellType",!1,{type:_.celltype,no_events:!0})},wg=(E,_,V,ee)=>{const Ee=Oe(ee,(ot,Zt)=>V[Zt]!==ot);at(Ee)>0&&_.length>=1&&de(_[0]).each(ot=>{const Zt=p1(ot,_),Sn=at(Oe(Ee,(Fo,Ks)=>Ks!=="scope"&&Ks!=="celltype"))>0,go=In(Ee,"celltype");(Sn||In(Ee,"scope"))&&Tf(E,Zt,ee,ie(In,Ee)),go&&Cg(E,ee),Oo(E,ot.dom,{structure:go,style:Sn})})},b1=(E,_,V,ee)=>{const Ee=ee.getData();ee.close(),E.undoManager.transact(()=>{wg(E,_,V,Ee),E.focus()})},mb=(E,_)=>{const V=de(_[0]).map(ee=>ut(p1(ee,_),Ee=>Vy(E,Ee.element,Hc(E),Ee.column)));return Pr(V.getOrDie())},yl=E=>{const _=f1(E);if(_.length===0)return;const V=mb(E,_),ee={type:"tabpanel",tabs:[{title:"General",name:"general",items:jd(E)},Ms(E,"cell")]},Ee={type:"panel",items:[{type:"grid",columns:2,items:jd(E)}]};E.windowManager.open({title:"Cell Properties",size:"normal",body:Hc(E)?ee:Ee,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:V,onSubmit:ie(b1,E,_,V)})},Uy=E=>ea(Ea(E)).map(_=>({name:"class",type:"listbox",label:"Class",items:_})),qd=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],Bs=E=>qd.concat(Uy(E).toArray()),uc=(E,_,V)=>{V("class")&&_.class!=="mce-no-match"&&E.setAttrib("class",_.class),V("height")&&E.setStyle("height",Fa(_.height))},Au=(E,_,V)=>{V("backgroundcolor")&&E.setStyle("background-color",_.backgroundcolor),V("bordercolor")&&E.setStyle("border-color",_.bordercolor),V("borderstyle")&&E.setStyle("border-style",_.borderstyle)},v1=(E,_,V,ee)=>{const ot=_.length===1?Qe:ee;Ct(_,Zt=>{const Sn=j(Ds.fromDom(Zt),"td,th"),go=xf.normal(E,Zt);uc(go,V,ot),Di(E)&&Au(go,V,ot),ee("height")&&Ct(Sn,Fo=>{E.dom.setStyle(Fo.dom,"height",null)}),ee("align")&&Cf(E,Zt,V.align)})},Gd=(E,_)=>{E.execCommand("mceTableRowType",!1,{type:_.type,no_events:!0})},y1=(E,_,V,ee)=>{const Ee=Oe(ee,(ot,Zt)=>V[Zt]!==ot);if(at(Ee)>0){const ot=In(Ee,"type"),Zt=ot?at(Ee)>1:!0;Zt&&v1(E,_,ee,ie(In,Ee)),ot&&Gd(E,ee),de(Ds.fromDom(_[0])).each(Sn=>Oo(E,Sn.dom,{structure:ot,style:Zt}))}},fb=(E,_,V,ee)=>{const Ee=ee.getData();ee.close(),E.undoManager.transact(()=>{y1(E,_,V,Ee),E.focus()})},_u=E=>{const _=Ga(Cc(E),d1.selected);if(_.length===0)return;const V=ut(_,Zt=>Vl(E,Zt.dom,Di(E))),ee=Pr(V),Ee={type:"tabpanel",tabs:[{title:"General",name:"general",items:Bs(E)},Ms(E,"row")]},ot={type:"panel",items:[{type:"grid",columns:2,items:Bs(E)}]};E.windowManager.open({title:"Row Properties",size:"normal",body:Di(E)?Ee:ot,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:ee,onSubmit:ie(fb,E,ut(_,Zt=>Zt.dom),ee)})},ku=(E,_,V)=>{const ee=V?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],Ee=[{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}],ot=_s(E)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],Zt=[{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}],Sn=_.length>0?[{name:"class",type:"listbox",label:"Class",items:_}]:[];return ee.concat(Ee).concat(ot).concat(Zt).concat(Sn)},Ls=(E,_,V,ee)=>{if(_.tagName==="TD"||_.tagName==="TH")Se(V)&&hn(ee)?E.setStyle(_,V,ee):E.setStyles(_,V);else if(_.children)for(let Ee=0;Ee<_.children.length;Ee++)Ls(E,_.children[Ee],V,ee)},gb=(E,_,V,ee)=>{const Ee=E.dom,ot={},Zt={},Sn=zc(E),go=ic(E),Fo=parseFloat(V.border)===0;if(!Ue(V.class)&&V.class!=="mce-no-match"&&(ot.class=V.class),Zt.height=Fa(V.height),Sn?Zt.width=Fa(V.width):Ee.getAttrib(_,"width")&&(ot.width=Or(V.width)),Sn?(Fo?(ot.border=0,Zt["border-width"]=""):(Zt["border-width"]=Fa(V.border),ot.border=1),Zt["border-spacing"]=Fa(V.cellspacing)):(ot.border=Fo?0:V.border,ot.cellpadding=V.cellpadding,ot.cellspacing=V.cellspacing),Sn&&_.children){const Ks={};if(Fo?Ks["border-width"]="":ee.border&&(Ks["border-width"]=Fa(V.border)),ee.cellpadding&&(Ks.padding=Fa(V.cellpadding)),go&&ee.bordercolor&&(Ks["border-color"]=V.bordercolor),!st(Ks))for(let ur=0;ur<_.children.length;ur++)Ls(Ee,_.children[ur],Ks)}if(go){const Ks=V;Zt["background-color"]=Ks.backgroundcolor,Zt["border-color"]=Ks.bordercolor,Zt["border-style"]=Ks.borderstyle}Ee.setStyles(_,{...$h(E),...Zt}),Ee.setAttribs(_,{...Aa(E),...ot})},Sr=(E,_,V,ee)=>{const Ee=E.dom,ot=ee.getData(),Zt=Oe(ot,(Sn,go)=>V[go]!==Sn);ee.close(),E.undoManager.transact(()=>{if(!_){const Sn=Xs(ot.cols).getOr(1),go=Xs(ot.rows).getOr(1);E.execCommand("mceInsertTable",!1,{rows:go,columns:Sn}),_=bl(Cc(E),Rs(E)).bind(Fo=>de(Fo,Rs(E))).map(Fo=>Fo.dom).getOrDie()}if(at(Zt)>0){const Sn={border:In(Zt,"border"),bordercolor:In(Zt,"bordercolor"),cellpadding:In(Zt,"cellpadding")};gb(E,_,ot,Sn);const go=Ee.select("caption",_)[0];(go&&!ot.caption||!go&&ot.caption)&&E.execCommand("mceTableToggleCaption"),Cf(E,_,ot.align)}if(E.focus(),E.addVisual(),at(Zt)>0){const Sn=In(Zt,"caption"),go=Sn?at(Zt)>1:!0;Oo(E,_,{structure:Sn,style:go})}})},Af=(E,_)=>{const V=E.dom;let ee,Ee=Lh(E,ic(E));_?(Ee.cols="1",Ee.rows="1",ic(E)&&(Ee.borderstyle="",Ee.bordercolor="",Ee.backgroundcolor="")):(ee=V.getParent(E.selection.getStart(),"table",E.getBody()),ee?Ee=wS(E,ee,ic(E)):ic(E)&&(Ee.borderstyle="",Ee.bordercolor="",Ee.backgroundcolor=""));const ot=ea(wr(E));ot.isSome()&&Ee.class&&(Ee.class=Ee.class.replace(/\s*mce\-item\-table\s*/g,""));const Zt={type:"grid",columns:2,items:ku(E,ot.getOr([]),_)},Sn=()=>({type:"panel",items:[Zt]}),go=()=>({type:"tabpanel",tabs:[{title:"General",name:"general",items:[Zt]},Ms(E,"table")]}),Fo=ic(E)?go():Sn();E.windowManager.open({title:"Table Properties",size:"normal",body:Fo,onSubmit:ie(Sr,E,ee,Ee),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Ee})},Wr=E=>{const _=V=>{ml(Cc(E))&&V()};ws({mceTableProps:ie(Af,E,!1),mceTableRowProps:ie(_u,E),mceTableCellProps:ie(yl,E),mceInsertTableDialog:ie(Af,E,!0)},(V,ee)=>E.addCommand(ee,()=>_(V)))},Du=E=>({element:E,mergable:K.none(),unmergable:K.none(),selection:[E]}),dc=(E,_,V)=>({element:V,mergable:$a(_,E,d1),unmergable:Pa(E),selection:ha(E)}),id=E=>{const _=Fn(K.none()),V=Fn([]);let ee=K.none();const Ee=Ao("caption"),ot=ls=>ee.forall(Zs=>!Zs[ls]),Zt=()=>xu(Cc(E),Rs(E)),Sn=()=>xu(Ko(E),Rs(E)),go=()=>Zt().bind(ls=>Wo(es(de(ls),Sn().bind(de),(Zs,pa)=>gn(Zs,pa)?Ee(ls)?K.some(Du(ls)):K.some(dc(f1(E),Zs,ls)):K.none()))),Fo=ls=>de(ls.element).map(pa=>{const mi=Nr.fromTable(pa),jh=hg(mi,ls).getOr([]),xg=pn(jh,(qh,Gh)=>(Gh.isLocked&&(qh.onAny=!0,Gh.column===0?qh.onFirst=!0:Gh.column+Gh.colspan>=mi.grid.columns&&(qh.onLast=!0)),qh),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:n1(mi,ls).isSome(),unmergeable:re(mi,ls).isSome(),locked:xg}}),Ks=()=>{_.set(ko(go)()),ee=_.get().bind(Fo),Ct(V.get(),en)},ur=ls=>(ls(),V.set(V.get().concat([ls])),()=>{V.set(bt(V.get(),Zs=>Zs!==ls))}),na=(ls,Zs)=>ur(()=>_.get().fold(()=>{ls.setEnabled(!1)},pa=>{ls.setEnabled(!Zs(pa)&&E.selection.isEditable())})),Vc=(ls,Zs,pa)=>ur(()=>_.get().fold(()=>{ls.setEnabled(!1),ls.setActive(!1)},mi=>{ls.setEnabled(!Zs(mi)&&E.selection.isEditable()),ls.setActive(pa(mi))})),ld=ls=>ee.exists(Zs=>Zs.locked[ls]),ud=ls=>na(ls,Zs=>!1),wl=ls=>na(ls,Zs=>Ee(Zs.element)),S1=ls=>Zs=>na(Zs,pa=>Ee(pa.element)||ld(ls)),_f=ls=>Zs=>na(Zs,pa=>Ee(pa.element)||ls().isNone()),Uh=(ls,Zs)=>pa=>na(pa,mi=>Ee(mi.element)||ls().isNone()||ld(Zs)),Nm=ls=>na(ls,Zs=>ot("mergeable")),kf=ls=>na(ls,Zs=>ot("unmergeable")),Wh=ls=>Vc(ls,Ro,Zs=>de(Zs.element,Rs(E)).exists(mi=>Ge(mi,"caption"))),Zh=(ls,Zs)=>pa=>Vc(pa,mi=>Ee(mi.element),()=>E.queryCommandValue(ls)===Zs),Zy=Zh("mceTableRowType","header"),jy=Zh("mceTableColType","th");return E.on("NodeChange ExecCommand TableSelectorChange",Ks),{onSetupTable:ud,onSetupCellOrRow:wl,onSetupColumn:S1,onSetupPasteable:_f,onSetupPasteableColumn:Uh,onSetupMergeable:Nm,onSetupUnmergeable:kf,resetTargets:Ks,onSetupTableWithCaption:Wh,onSetupTableRowHeaders:Zy,onSetupTableColumnHeaders:jy,targets:_.get}};var Hh=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const C1="x-tinymce/dom-table-",w1=C1+"rows",Wy=C1+"columns",di=E=>{var _;const V=(_=Hh.read())!==null&&_!==void 0?_:[];return ro(V,ee=>K.from(ee.getType(E)))},Wl=()=>di(w1),Zr=()=>di(Wy),_a=E=>_=>{const V=()=>{_.setEnabled(E.selection.isEditable())};return E.on("NodeChange",V),V(),()=>{E.off("NodeChange",V)}},zh=(E,_)=>{E.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",onSetup:_a(E),fetch:Sn=>Sn("inserttable | cell row column | advtablesort | tableprops deletetable")});const V=Sn=>()=>E.execCommand(Sn),ee=(Sn,go)=>{E.queryCommandSupported(go.command)&&E.ui.registry.addButton(Sn,{...go,onAction:Rt(go.onAction)?go.onAction:V(go.command)})},Ee=(Sn,go)=>{E.queryCommandSupported(go.command)&&E.ui.registry.addToggleButton(Sn,{...go,onAction:Rt(go.onAction)?go.onAction:V(go.command)})};ee("tableprops",{tooltip:"Table properties",command:"mceTableProps",icon:"table",onSetup:_.onSetupTable}),ee("tabledelete",{tooltip:"Delete table",command:"mceTableDelete",icon:"table-delete-table",onSetup:_.onSetupTable}),ee("tablecellprops",{tooltip:"Cell properties",command:"mceTableCellProps",icon:"table-cell-properties",onSetup:_.onSetupCellOrRow}),ee("tablemergecells",{tooltip:"Merge cells",command:"mceTableMergeCells",icon:"table-merge-cells",onSetup:_.onSetupMergeable}),ee("tablesplitcells",{tooltip:"Split cell",command:"mceTableSplitCells",icon:"table-split-cells",onSetup:_.onSetupUnmergeable}),ee("tableinsertrowbefore",{tooltip:"Insert row before",command:"mceTableInsertRowBefore",icon:"table-insert-row-above",onSetup:_.onSetupCellOrRow}),ee("tableinsertrowafter",{tooltip:"Insert row after",command:"mceTableInsertRowAfter",icon:"table-insert-row-after",onSetup:_.onSetupCellOrRow}),ee("tabledeleterow",{tooltip:"Delete row",command:"mceTableDeleteRow",icon:"table-delete-row",onSetup:_.onSetupCellOrRow}),ee("tablerowprops",{tooltip:"Row properties",command:"mceTableRowProps",icon:"table-row-properties",onSetup:_.onSetupCellOrRow}),ee("tableinsertcolbefore",{tooltip:"Insert column before",command:"mceTableInsertColBefore",icon:"table-insert-column-before",onSetup:_.onSetupColumn("onFirst")}),ee("tableinsertcolafter",{tooltip:"Insert column after",command:"mceTableInsertColAfter",icon:"table-insert-column-after",onSetup:_.onSetupColumn("onLast")}),ee("tabledeletecol",{tooltip:"Delete column",command:"mceTableDeleteCol",icon:"table-delete-column",onSetup:_.onSetupColumn("onAny")}),ee("tablecutrow",{tooltip:"Cut row",command:"mceTableCutRow",icon:"cut-row",onSetup:_.onSetupCellOrRow}),ee("tablecopyrow",{tooltip:"Copy row",command:"mceTableCopyRow",icon:"duplicate-row",onSetup:_.onSetupCellOrRow}),ee("tablepasterowbefore",{tooltip:"Paste row before",command:"mceTablePasteRowBefore",icon:"paste-row-before",onSetup:_.onSetupPasteable(Wl)}),ee("tablepasterowafter",{tooltip:"Paste row after",command:"mceTablePasteRowAfter",icon:"paste-row-after",onSetup:_.onSetupPasteable(Wl)}),ee("tablecutcol",{tooltip:"Cut column",command:"mceTableCutCol",icon:"cut-column",onSetup:_.onSetupColumn("onAny")}),ee("tablecopycol",{tooltip:"Copy column",command:"mceTableCopyCol",icon:"duplicate-column",onSetup:_.onSetupColumn("onAny")}),ee("tablepastecolbefore",{tooltip:"Paste column before",command:"mceTablePasteColBefore",icon:"paste-column-before",onSetup:_.onSetupPasteableColumn(Zr,"onFirst")}),ee("tablepastecolafter",{tooltip:"Paste column after",command:"mceTablePasteColAfter",icon:"paste-column-after",onSetup:_.onSetupPasteableColumn(Zr,"onLast")}),ee("tableinsertdialog",{tooltip:"Insert table",command:"mceInsertTableDialog",icon:"table",onSetup:_a(E)});const ot=Sf(wr(E));ot.length!==0&&E.queryCommandSupported("mceTableToggleClass")&&E.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:rd(E,ot,"tableclass",Sn=>E.execCommand("mceTableToggleClass",!1,Sn)),onSetup:_.onSetupTable});const Zt=Sf(Na(E));Zt.length!==0&&E.queryCommandSupported("mceTableCellToggleClass")&&E.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:rd(E,Zt,"tablecellclass",Sn=>E.execCommand("mceTableCellToggleClass",!1,Sn)),onSetup:_.onSetupCellOrRow}),E.queryCommandSupported("mceTableApplyCellStyle")&&(E.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:rd(E,Ki,"tablecellverticalalign",Tu(E,"vertical-align")),onSetup:_.onSetupCellOrRow}),E.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:rd(E,oa(E),"tablecellborderwidth",Tu(E,"border-width")),onSetup:_.onSetupCellOrRow}),E.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:rd(E,Hl(E),"tablecellborderstyle",Tu(E,"border-style")),onSetup:_.onSetupCellOrRow}),E.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:Sn=>Sn(Wd(E,Ta(E),"background-color")),onSetup:_.onSetupCellOrRow}),E.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:Sn=>Sn(Wd(E,Vr(E),"border-color")),onSetup:_.onSetupCellOrRow})),Ee("tablecaption",{tooltip:"Table caption",icon:"table-caption",command:"mceTableToggleCaption",onSetup:_.onSetupTableWithCaption}),Ee("tablerowheader",{tooltip:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:Zd(E),onSetup:_.onSetupTableRowHeaders}),Ee("tablecolheader",{tooltip:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:Ya(E),onSetup:_.onSetupTableColumnHeaders})},Sg=E=>{const _=ee=>E.dom.is(ee,"table")&&E.getBody().contains(ee)&&E.dom.isEditable(ee.parentNode),V=pl(E);V.length>0&&E.ui.registry.addContextToolbar("table",{predicate:_,items:V,scope:"node",position:"node"})},Vh=E=>_=>{const V=()=>{_.setEnabled(E.selection.isEditable())};return E.on("NodeChange",V),V(),()=>{E.off("NodeChange",V)}},hb=(E,_)=>{const V=ur=>()=>E.execCommand(ur),ee=(ur,na)=>E.queryCommandSupported(na.command)?(E.ui.registry.addMenuItem(ur,{...na,onAction:Rt(na.onAction)?na.onAction:V(na.command)}),!0):!1,Ee=(ur,na)=>{E.queryCommandSupported(na.command)&&E.ui.registry.addToggleMenuItem(ur,{...na,onAction:Rt(na.onAction)?na.onAction:V(na.command)})},ot=ur=>{E.execCommand("mceInsertTable",!1,{rows:ur.numRows,columns:ur.numColumns})},Zt=[ee("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",command:"mceTableInsertRowBefore",onSetup:_.onSetupCellOrRow}),ee("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",command:"mceTableInsertRowAfter",onSetup:_.onSetupCellOrRow}),ee("tabledeleterow",{text:"Delete row",icon:"table-delete-row",command:"mceTableDeleteRow",onSetup:_.onSetupCellOrRow}),ee("tablerowprops",{text:"Row properties",icon:"table-row-properties",command:"mceTableRowProps",onSetup:_.onSetupCellOrRow}),ee("tablecutrow",{text:"Cut row",icon:"cut-row",command:"mceTableCutRow",onSetup:_.onSetupCellOrRow}),ee("tablecopyrow",{text:"Copy row",icon:"duplicate-row",command:"mceTableCopyRow",onSetup:_.onSetupCellOrRow}),ee("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",command:"mceTablePasteRowBefore",onSetup:_.onSetupPasteable(Wl)}),ee("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",command:"mceTablePasteRowAfter",onSetup:_.onSetupPasteable(Wl)})],Sn=[ee("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",command:"mceTableInsertColBefore",onSetup:_.onSetupColumn("onFirst")}),ee("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",command:"mceTableInsertColAfter",onSetup:_.onSetupColumn("onLast")}),ee("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",command:"mceTableDeleteCol",onSetup:_.onSetupColumn("onAny")}),ee("tablecutcolumn",{text:"Cut column",icon:"cut-column",command:"mceTableCutCol",onSetup:_.onSetupColumn("onAny")}),ee("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",command:"mceTableCopyCol",onSetup:_.onSetupColumn("onAny")}),ee("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",command:"mceTablePasteColBefore",onSetup:_.onSetupPasteableColumn(Zr,"onFirst")}),ee("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",command:"mceTablePasteColAfter",onSetup:_.onSetupPasteableColumn(Zr,"onLast")})],go=[ee("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",command:"mceTableCellProps",onSetup:_.onSetupCellOrRow}),ee("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",command:"mceTableMergeCells",onSetup:_.onSetupMergeable}),ee("tablesplitcells",{text:"Split cell",icon:"table-split-cells",command:"mceTableSplitCells",onSetup:_.onSetupUnmergeable})];qi(E)?E.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"inserttable",onAction:ot}],onSetup:Vh(E)}):E.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:V("mceInsertTableDialog"),onSetup:Vh(E)}),E.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:V("mceInsertTableDialog"),onSetup:Vh(E)}),ee("tableprops",{text:"Table properties",onSetup:_.onSetupTable,command:"mceTableProps"}),ee("deletetable",{text:"Delete table",icon:"table-delete-table",onSetup:_.onSetupTable,command:"mceTableDelete"}),Fe(Zt,!0)&&E.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:ze("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")}),Fe(Sn,!0)&&E.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:ze("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")}),Fe(go,!0)&&E.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:ze("tablecellprops tablemergecells tablesplitcells")}),E.ui.registry.addContextMenu("table",{update:()=>(_.resetTargets(),_.targets().fold(ze(""),ur=>yr(ur.element)==="caption"?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"))});const Fo=Sf(wr(E));Fo.length!==0&&E.queryCommandSupported("mceTableToggleClass")&&E.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:()=>ta(E,Fo,"tableclass",ur=>E.execCommand("mceTableToggleClass",!1,ur)),onSetup:_.onSetupTable});const Ks=Sf(Na(E));Ks.length!==0&&E.queryCommandSupported("mceTableCellToggleClass")&&E.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:()=>ta(E,Ks,"tablecellclass",ur=>E.execCommand("mceTableCellToggleClass",!1,ur)),onSetup:_.onSetupCellOrRow}),E.queryCommandSupported("mceTableApplyCellStyle")&&(E.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:()=>ta(E,Ki,"tablecellverticalalign",Tu(E,"vertical-align")),onSetup:_.onSetupCellOrRow}),E.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:()=>ta(E,oa(E),"tablecellborderwidth",Tu(E,"border-width")),onSetup:_.onSetupCellOrRow}),E.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:()=>ta(E,Hl(E),"tablecellborderstyle",Tu(E,"border-style")),onSetup:_.onSetupCellOrRow}),E.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:()=>Wd(E,Ta(E),"background-color"),onSetup:_.onSetupCellOrRow}),E.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:()=>Wd(E,Vr(E),"border-color"),onSetup:_.onSetupCellOrRow})),Ee("tablecaption",{icon:"table-caption",text:"Table caption",command:"mceTableToggleCaption",onSetup:_.onSetupTableWithCaption}),Ee("tablerowheader",{text:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:Zd(E),onSetup:_.onSetupTableRowHeaders}),Ee("tablecolheader",{text:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:Ya(E),onSetup:_.onSetupTableRowHeaders})},Cl=E=>{const _=id(E);gl(E),Wr(E),hb(E,_),zh(E,_),Sg(E)};var SS=()=>{w.add("table",Cl)};SS()})()),lee}var dee;function Dse(){return dee||(dee=1,kse()),iee}Dse();var mee={},fee={},gee;function Ose(){return gee||(gee=1,(function(){const w=(qe,st,Fn)=>{var rn;return Fn(qe,st.prototype)?!0:((rn=qe.constructor)===null||rn===void 0?void 0:rn.name)===st.name},M=qe=>{const st=typeof qe;return qe===null?"null":st==="object"&&Array.isArray(qe)?"array":st==="object"&&w(qe,String,(Fn,rn)=>rn.isPrototypeOf(Fn))?"string":st},L=qe=>st=>M(st)===qe,X=qe=>st=>typeof st===qe,se=qe=>st=>qe===st,le=L("string"),Se=se(void 0),pe=qe=>qe==null,$e=qe=>!pe(qe),Ue=X("function"),hn=(qe=>()=>qe)(!1);class Rt{constructor(st,Fn){this.tag=st,this.value=Fn}static some(st){return new Rt(!0,st)}static none(){return Rt.singletonNone}fold(st,Fn){return this.tag?Fn(this.value):st()}isSome(){return this.tag}isNone(){return!this.tag}map(st){return this.tag?Rt.some(st(this.value)):Rt.none()}bind(st){return this.tag?st(this.value):Rt.none()}exists(st){return this.tag&&st(this.value)}forall(st){return!this.tag||st(this.value)}filter(st){return!this.tag||st(this.value)?this:Rt.none()}getOr(st){return this.tag?this.value:st}or(st){return this.tag?this:st}getOrThunk(st){return this.tag?this.value:st()}orThunk(st){return this.tag?this:st()}getOrDie(st){if(this.tag)return this.value;throw new Error(st??"Called getOrDie on None")}static from(st){return $e(st)?Rt.some(st):Rt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(st){this.tag&&st(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Rt.singletonNone=new Rt(!1);const tn=Array.prototype.slice,fo=Array.prototype.indexOf,Wn=(qe,st)=>fo.call(qe,st),ze=(qe,st)=>Wn(qe,st)>-1,Gn=(qe,st)=>{const Fn=qe.length,rn=new Array(Fn);for(let To=0;To<Fn;To++){const es=qe[To];rn[To]=st(es,To)}return rn},Bt=(qe,st)=>{const Fn=[];for(let rn=0,To=qe.length;rn<To;rn++){const es=qe[rn];st(es,rn)&&Fn.push(es)}return Fn},ie=(qe,st,Fn)=>{for(let rn=0,To=qe.length;rn<To;rn++){const es=qe[rn];if(st(es,rn))return Rt.some(es);if(Fn(es,rn))break}return Rt.none()},en=(qe,st)=>ie(qe,st,hn),Ro=(qe,st)=>{const Fn=tn.call(qe,0);return Fn.sort(st),Fn},Qe=Object.keys,K=Object.hasOwnProperty,It=(qe,st)=>Kn(qe,st)?Rt.from(qe[st]):Rt.none(),Kn=(qe,st)=>K.call(qe,st),vn=qe=>{let st=qe;return{get:()=>st,set:To=>{st=To}}},Fe=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let he=0;const Cs=qe=>{const Fn=new Date().getTime(),rn=Math.floor(Fe()*1e9);return he++,qe+"_"+rn+he+String(Fn)},ut=qe=>{const st=[],Fn=rn=>{st.push(rn)};for(let rn=0;rn<qe.length;rn++)qe[rn].each(Fn);return st};var Ct=tinymce.util.Tools.resolve("tinymce.PluginManager");const k=qe=>({addTab:Fn=>{var rn;const To=(rn=Fn.name)!==null&&rn!==void 0?rn:Cs("tab-name"),es=qe.get();es[To]=Fn,qe.set(es)}}),Eo=(qe,st)=>{qe.addCommand("mceHelp",st)},bt=qe=>st=>st.options.get(qe),Uo=qe=>{const st=qe.options.register;st("help_tabs",{processor:"array"})},pn=bt("help_tabs"),Te=bt("forced_plugins"),St=(qe,st)=>{qe.ui.registry.addButton("help",{icon:"help",tooltip:"Help",onAction:st,context:"any"}),qe.ui.registry.addMenuItem("help",{text:"Help",icon:"help",shortcut:"Alt+0",onAction:st,context:"any"})};var $n=tinymce.util.Tools.resolve("tinymce.Resource"),Xe=tinymce.util.Tools.resolve("tinymce.util.I18n");const qt=(qe,st)=>$n.load(`tinymce.html-i18n.help-keynav.${st}`,`${qe}/js/i18n/keynav/${st}.js`),Ne=qe=>qt(qe,Xe.getCode()).catch(()=>qt(qe,"en")),ft=(qe,st)=>{qe.on("init",()=>{Ne(st)})},P=async qe=>({name:"keyboardnav",title:"Keyboard Navigation",items:[{type:"htmlpanel",presets:"document",html:await Ne(qe)}]});var Xo=tinymce.util.Tools.resolve("tinymce.Env");const ro=qe=>{const st=Xo.os.isMacOS()||Xo.os.isiOS(),To=st?{alt:"&#x2325;",ctrl:"&#x2303;",shift:"&#x21E7;",meta:"&#x2318;",access:"&#x2303;&#x2325;"}:{meta:"Ctrl ",access:"Shift + Alt "},es=qe.split("+"),Wo=Gn(es,eo=>{const zs=eo.toLowerCase().trim();return Kn(To,zs)?To[zs]:eo});return st?Wo.join("").replace(/\s/,""):Wo.join("+")},Qn=[{shortcuts:["Meta + B"],action:"Bold"},{shortcuts:["Meta + I"],action:"Italic"},{shortcuts:["Meta + U"],action:"Underline"},{shortcuts:["Meta + A"],action:"Select all"},{shortcuts:["Meta + Y","Meta + Shift + Z"],action:"Redo"},{shortcuts:["Meta + Z"],action:"Undo"},{shortcuts:["Access + 1"],action:"Heading 1"},{shortcuts:["Access + 2"],action:"Heading 2"},{shortcuts:["Access + 3"],action:"Heading 3"},{shortcuts:["Access + 4"],action:"Heading 4"},{shortcuts:["Access + 5"],action:"Heading 5"},{shortcuts:["Access + 6"],action:"Heading 6"},{shortcuts:["Access + 7"],action:"Paragraph"},{shortcuts:["Access + 8"],action:"Div"},{shortcuts:["Access + 9"],action:"Address"},{shortcuts:["Alt + 0"],action:"Open help dialog"},{shortcuts:["Alt + F9"],action:"Focus to menubar"},{shortcuts:["Alt + F10"],action:"Focus to toolbar"},{shortcuts:["Alt + F11"],action:"Focus to element path"},{shortcuts:["Alt + F12"],action:"Focus to notification"},{shortcuts:["Ctrl + F9"],action:"Focus to contextual toolbar"},{shortcuts:["Shift + Enter"],action:"Open popup menu for split buttons"},{shortcuts:["Meta + K"],action:"Insert link (if link plugin activated)"},{shortcuts:["Meta + S"],action:"Save (if save plugin activated)"},{shortcuts:["Meta + F"],action:"Find (if searchreplace plugin activated)"},{shortcuts:["Meta + Shift + F"],action:"Switch to or from fullscreen mode"}],_o=()=>{const qe=Gn(Qn,Fn=>{const rn=Gn(Fn.shortcuts,ro).join(" or ");return[Fn.action,rn]});return{name:"shortcuts",title:"Handy Shortcuts",items:[{type:"table",header:["Action","Shortcut"],cells:qe}]}},ws=Gn([{key:"accordion",name:"Accordion"},{key:"anchor",name:"Anchor"},{key:"autolink",name:"Autolink"},{key:"autoresize",name:"Autoresize"},{key:"autosave",name:"Autosave"},{key:"charmap",name:"Character Map"},{key:"code",name:"Code"},{key:"codesample",name:"Code Sample"},{key:"colorpicker",name:"Color Picker"},{key:"directionality",name:"Directionality"},{key:"emoticons",name:"Emoticons"},{key:"fullscreen",name:"Full Screen"},{key:"help",name:"Help"},{key:"image",name:"Image"},{key:"importcss",name:"Import CSS"},{key:"insertdatetime",name:"Insert Date/Time"},{key:"link",name:"Link"},{key:"lists",name:"Lists"},{key:"advlist",name:"List Styles"},{key:"media",name:"Media"},{key:"nonbreaking",name:"Nonbreaking"},{key:"pagebreak",name:"Page Break"},{key:"preview",name:"Preview"},{key:"quickbars",name:"Quick Toolbars"},{key:"save",name:"Save"},{key:"searchreplace",name:"Search and Replace"},{key:"table",name:"Table"},{key:"textcolor",name:"Text Color"},{key:"visualblocks",name:"Visual Blocks"},{key:"visualchars",name:"Visual Characters"},{key:"wordcount",name:"Word Count"},{key:"a11ychecker",name:"Accessibility Checker",type:"premium"},{key:"typography",name:"Advanced Typography",type:"premium",slug:"advanced-typography"},{key:"ai",name:"AI Assistant",type:"premium"},{key:"casechange",name:"Case Change",type:"premium"},{key:"checklist",name:"Checklist",type:"premium"},{key:"advcode",name:"Enhanced Code Editor",type:"premium"},{key:"mediaembed",name:"Enhanced Media Embed",type:"premium",slug:"introduction-to-mediaembed"},{key:"advtable",name:"Enhanced Tables",type:"premium"},{key:"exportpdf",name:"Export to PDF",type:"premium"},{key:"exportword",name:"Export to Word",type:"premium"},{key:"footnotes",name:"Footnotes",type:"premium"},{key:"formatpainter",name:"Format Painter",type:"premium"},{key:"editimage",name:"Image Editing",type:"premium"},{key:"uploadcare",name:"Image Optimizer Powered by Uploadcare",type:"premium"},{key:"importword",name:"Import from Word",type:"premium"},{key:"inlinecss",name:"Inline CSS",type:"premium",slug:"inline-css"},{key:"linkchecker",name:"Link Checker",type:"premium"},{key:"math",name:"Math",type:"premium"},{key:"markdown",name:"Markdown",type:"premium"},{key:"mentions",name:"Mentions",type:"premium"},{key:"mergetags",name:"Merge Tags",type:"premium"},{key:"pageembed",name:"Page Embed",type:"premium"},{key:"permanentpen",name:"Permanent Pen",type:"premium"},{key:"powerpaste",name:"PowerPaste",type:"premium",slug:"introduction-to-powerpaste"},{key:"revisionhistory",name:"Revision History",type:"premium"},{key:"tinymcespellchecker",name:"Spell Checker",type:"premium",slug:"introduction-to-tiny-spellchecker"},{key:"suggestededits",name:"Suggested Edits",type:"premium"},{key:"autocorrect",name:"Spelling Autocorrect",type:"premium"},{key:"tableofcontents",name:"Table of Contents",type:"premium"},{key:"advtemplate",name:"Templates",type:"premium",slug:"advanced-templates"},{key:"tinycomments",name:"Tiny Comments",type:"premium",slug:"introduction-to-tiny-comments"},{key:"tinydrive",name:"Tiny Drive",type:"premium",slug:"tinydrive-introduction"}],qe=>({...qe,type:qe.type||"opensource",slug:qe.slug||qe.key})),be=qe=>{const st=()=>{const wo=Bt(ws,({type:wn})=>wn==="premium"),mt=Ro(Gn(wo,wn=>wn.name),(wn,fn)=>wn.localeCompare(fn)),Nt=Gn(mt,wn=>`<li>${wn}</li>`).join("");return"<div><p><b>"+Xe.translate("Premium plugins:")+"</b></p><ul>"+Nt+'<li class="tox-help__more-link" "><a href="https://www.tiny.cloud/pricing/?utm_campaign=help_dialog_plugin_tab&utm_source=tiny&utm_medium=referral&utm_term=read_more&utm_content=premium_plugin_heading" rel="noopener" target="_blank" data-alloy-tabstop="true" tabindex="-1">'+Xe.translate("Learn more...")+"</a></li></ul></div>"},Fn=wo=>`<a data-alloy-tabstop="true" tabindex="-1" href="${wo.url}" target="_blank" rel="noopener">${wo.name}</a>`,rn=(wo,mt)=>{const Nt=wo.plugins[mt].getMetadata;if(Ue(Nt)){const wn=Nt();return{name:wn.name,html:Fn(wn)}}else return{name:mt,html:mt}},To=(wo,mt)=>en(ws,Nt=>Nt.key===mt).fold(()=>rn(wo,mt),Nt=>{const wn=Nt.type==="premium"?`${Nt.name}*`:Nt.name,fn=Fn({name:wn,url:`https://www.tiny.cloud/docs/tinymce/${tinymce.majorVersion}/${Nt.slug}/`});return{name:wn,html:fn}}),es=wo=>{const mt=Qe(wo.plugins),Nt=Te(wo),wn=Se(Nt)?["onboarding"]:Nt.concat(["onboarding"]);return Bt(mt,fn=>!ze(wn,fn))},Wo=wo=>{const mt=es(wo),Nt=Ro(Gn(mt,So=>To(wo,So)),(So,ks)=>So.name.localeCompare(ks.name)),wn=Gn(Nt,So=>"<li>"+So.html+"</li>"),fn=wn.length,uo=wn.join("");return"<p><b>"+Xe.translate(["Plugins installed ({0}):",fn])+"</b></p><ul>"+uo+"</ul>"};return{name:"plugins",title:"Plugins",items:[{type:"htmlpanel",presets:"document",html:[(wo=>wo==null?"":"<div>"+Wo(wo)+"</div>")(qe),st()].join("")}]}};var ke=tinymce.util.Tools.resolve("tinymce.EditorManager");const Oe=()=>{const Fn='<a data-alloy-tabstop="true" tabindex="-1" href="https://www.tiny.cloud/docs/tinymce/8/changelog/?utm_campaign=help_dialog_version_tab&utm_source=tiny&utm_medium=referral" rel="noopener" target="_blank">TinyMCE '+((To,es)=>To.indexOf("@")===0?"X.X.X":To+"."+es)(ke.majorVersion,ke.minorVersion)+"</a>";return{name:"versions",title:"Version",items:[{type:"htmlpanel",html:"<p>"+Xe.translate(["You are using {0}",Fn])+"</p>",presets:"document"}]}},me=(qe,st)=>{const Fn={},rn=Gn(qe,To=>{var es;if(le(To))return Kn(st,To)&&(Fn[To]=st[To]),To;{const Wo=(es=To.name)!==null&&es!==void 0?es:Cs("tab-name");return Fn[Wo]=To,Wo}});return{tabs:Fn,names:rn}},Re=qe=>{const st=Qe(qe),Fn=st.indexOf("versions");return Fn!==-1&&(st.splice(Fn,1),st.push("versions")),{tabs:qe,names:st}},at=async(qe,st,Fn)=>{const rn=_o(),To=await P(Fn),es=be(qe),Wo=Oe(),eo={[rn.name]:rn,[To.name]:To,[es.name]:es,[Wo.name]:Wo,...st.get()};return Rt.from(pn(qe)).fold(()=>Re(eo),zs=>me(zs,eo))},tt=(qe,st,Fn)=>()=>{at(qe,st,Fn).then(({tabs:rn,names:To})=>{const es=Gn(To,zs=>It(rn,zs)),eo={type:"tabpanel",tabs:ut(es)};qe.windowManager.open({title:"Help",size:"medium",body:eo,buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{}})})};var In=()=>{Ct.add("help",(qe,st)=>{const Fn=vn({}),rn=k(Fn);Uo(qe);const To=tt(qe,Fn,st);return St(qe,To),Eo(qe,To),qe.shortcuts.add("Alt+0","Open help dialog","mceHelp"),ft(qe,st),rn})};In()})()),fee}var hee;function Rse(){return hee||(hee=1,Ose()),mee}Rse();var pee={},bee={},vee;function Mse(){return vee||(vee=1,(function(){var w=tinymce.util.Tools.resolve("tinymce.PluginManager");const L=(be=>ke=>be===ke)(null),X=be=>be,se=(be,ke)=>{const Oe=be.length,me=new Array(Oe);for(let Re=0;Re<Oe;Re++){const at=be[Re];me[Re]=ke(at,Re)}return me},le=(be,ke)=>{let Oe=null;return{cancel:()=>{L(Oe)||(clearTimeout(Oe),Oe=null)},throttle:(...at)=>{L(Oe)&&(Oe=setTimeout(()=>{Oe=null,be.apply(null,at)},ke))}}},Se=be=>be.replace(/\uFEFF/g,""),$e={aletter:"[A-Za-z---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]",midnumlet:"[-'\\.]",midletter:"[:]",midnum:"[+*/,;;]",numeric:"[0-9---------------------------------]",cr:"\\r",lf:"\\n",newline:"[\v\f\u2028\u2029]",extend:"[------------------------------------------------------------------------------------------------------]",format:"[----\uFEFF-]",katakana:"[-------]",extendnumlet:"[=_--<>]",punctuation:"[~|!-*+-\\/:;?@\\[-`{};----------------------------------------------]"},Ue={ALETTER:0,MIDNUMLET:1,MIDLETTER:2,MIDNUM:3,NUMERIC:4,CR:5,LF:6,NEWLINE:7,EXTEND:8,FORMAT:9,KATAKANA:10,EXTENDNUMLET:11,AT:12,OTHER:13},sn=[new RegExp($e.aletter),new RegExp($e.midnumlet),new RegExp($e.midletter),new RegExp($e.midnum),new RegExp($e.numeric),new RegExp($e.cr),new RegExp($e.lf),new RegExp($e.newline),new RegExp($e.extend),new RegExp($e.format),new RegExp($e.katakana),new RegExp($e.extendnumlet),new RegExp("@")],hn="",Rt=new RegExp("^"+$e.punctuation+"$"),tn=/^\s+$/,fo=sn,Wn=Ue.OTHER,ze=be=>{let ke=Wn;const Oe=fo.length;for(let me=0;me<Oe;++me){const Re=fo[me];if(Re&&Re.test(be)){ke=me;break}}return ke},Gn=be=>{const ke={};return Oe=>{if(ke[Oe])return ke[Oe];{const me=be(Oe);return ke[Oe]=me,me}}},Bt=be=>{const ke=Gn(ze);return se(be,ke)},ie=(be,ke)=>{const Oe=be[ke],me=be[ke+1];if(ke<0||ke>be.length-1&&ke!==0||Oe===Ue.ALETTER&&me===Ue.ALETTER)return!1;const Re=be[ke+2];if(Oe===Ue.ALETTER&&(me===Ue.MIDLETTER||me===Ue.MIDNUMLET||me===Ue.AT)&&Re===Ue.ALETTER)return!1;const at=be[ke-1];return(Oe===Ue.MIDLETTER||Oe===Ue.MIDNUMLET||me===Ue.AT)&&me===Ue.ALETTER&&at===Ue.ALETTER||(Oe===Ue.NUMERIC||Oe===Ue.ALETTER)&&(me===Ue.NUMERIC||me===Ue.ALETTER)||(Oe===Ue.MIDNUM||Oe===Ue.MIDNUMLET)&&me===Ue.NUMERIC&&at===Ue.NUMERIC||Oe===Ue.NUMERIC&&(me===Ue.MIDNUM||me===Ue.MIDNUMLET)&&Re===Ue.NUMERIC||(Oe===Ue.EXTEND||Oe===Ue.FORMAT)&&(me===Ue.ALETTER||me===Ue.NUMERIC||me===Ue.KATAKANA||me===Ue.EXTEND||me===Ue.FORMAT)||(me===Ue.EXTEND||me===Ue.FORMAT&&(Re===Ue.ALETTER||Re===Ue.NUMERIC||Re===Ue.KATAKANA||Re===Ue.EXTEND||Re===Ue.FORMAT))&&(Oe===Ue.ALETTER||Oe===Ue.NUMERIC||Oe===Ue.KATAKANA||Oe===Ue.EXTEND||Oe===Ue.FORMAT)||Oe===Ue.CR&&me===Ue.LF?!1:Oe===Ue.NEWLINE||Oe===Ue.CR||Oe===Ue.LF||me===Ue.NEWLINE||me===Ue.CR||me===Ue.LF?!0:!(Oe===Ue.KATAKANA&&me===Ue.KATAKANA||me===Ue.EXTENDNUMLET&&(Oe===Ue.ALETTER||Oe===Ue.NUMERIC||Oe===Ue.KATAKANA||Oe===Ue.EXTENDNUMLET)||Oe===Ue.EXTENDNUMLET&&(me===Ue.ALETTER||me===Ue.NUMERIC||me===Ue.KATAKANA)||Oe===Ue.AT)},en=hn,Ro=tn,Qe=Rt,K=be=>be==="http"||be==="https",It=(be,ke)=>{let Oe;for(Oe=ke;Oe<be.length&&!Ro.test(be[Oe]);Oe++);return Oe},Kn=(be,ke)=>{const Oe=It(be,ke+1);return be.slice(ke+1,Oe).join(en).substr(0,3)==="://"?Oe:ke},vn=(be,ke,Oe,me)=>{const Re=[],at=[];let tt=[];for(let In=0;In<Oe.length;++In)if(tt.push(be[In]),ie(Oe,In)){const qe=ke[In];if((me.includeWhitespace||!Ro.test(qe))&&(me.includePunctuation||!Qe.test(qe))){const st=In-tt.length+1,Fn=In+1,rn=ke.slice(st,Fn).join(en);if(K(rn)){const To=Kn(ke,In),es=be.slice(Fn,To);Array.prototype.push.apply(tt,es),In=To}ke[In+1]==="."&&/^([a-zA-Z]\.)+$/.test(rn+".")?(tt.push(be[In+1]),at.push({start:st,end:Fn+1})):at.push({start:st,end:Fn}),Re.push(tt)}tt=[]}return{words:Re,indices:at}},Fe=()=>({includeWhitespace:!1,includePunctuation:!1}),he=(be,ke,Oe)=>{Oe={...Fe(),...Oe};const me=se(be,ke),Re=Bt(me);return vn(be,me,Re,Oe)},ut=(be,ke,Oe)=>he(be,ke,Oe).words;var Ct=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker");const k=(be,ke)=>{const Oe=ke.getBlockElements(),me=ke.getVoidElements(),Re=st=>Oe[st.nodeName]||me[st.nodeName],at=[];let tt="";const In=new Ct(be,be);let qe;for(;qe=In.next();)qe.nodeType===3?tt+=Se(qe.data):Re(qe)&&tt.length&&(at.push(tt),tt="");return tt.length&&at.push(tt),at},Eo=be=>be.replace(/\u200B/g,""),bt=be=>be.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length,Uo=(be,ke)=>{const Oe=Eo(k(be,ke).join(`
`));return ut(Oe.split(""),X).length},pn=(be,ke)=>{const Oe=k(be,ke).join("");return bt(Oe)},Te=(be,ke)=>{const Oe=k(be,ke).join("").replace(/\s/g,"");return bt(Oe)},St=(be,ke)=>()=>ke(be.getBody(),be.schema),$n=(be,ke)=>()=>ke(be.selection.getRng().cloneContents(),be.schema),Xe=be=>St(be,Uo),qt=be=>({body:{getWordCount:Xe(be),getCharacterCount:St(be,pn),getCharacterCountWithoutSpaces:St(be,Te)},selection:{getWordCount:$n(be,Uo),getCharacterCount:$n(be,pn),getCharacterCountWithoutSpaces:$n(be,Te)},getCount:Xe(be)}),Ne=(be,ke)=>{be.windowManager.open({title:"Word Count",body:{type:"panel",items:[{type:"table",header:["Count","Document","Selection"],cells:[["Words",String(ke.body.getWordCount()),String(ke.selection.getWordCount())],["Characters (no spaces)",String(ke.body.getCharacterCountWithoutSpaces()),String(ke.selection.getCharacterCountWithoutSpaces())],["Characters",String(ke.body.getCharacterCount()),String(ke.selection.getCharacterCount())]]}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}]})},ft=(be,ke)=>{be.addCommand("mceWordCount",()=>Ne(be,ke))};var P=tinymce.util.Tools.resolve("tinymce.util.Delay");const Xo=(be,ke)=>{be.dispatch("wordCountUpdate",{wordCount:{words:ke.body.getWordCount(),characters:ke.body.getCharacterCount(),charactersWithoutSpaces:ke.body.getCharacterCountWithoutSpaces()}})},ro=(be,ke)=>{Xo(be,ke)},Qn=(be,ke,Oe)=>{const me=le(()=>ro(be,ke),Oe);be.on("init",()=>{ro(be,ke),P.setEditorTimeout(be,()=>{be.on("SetContent BeforeAddUndo Undo Redo ViewUpdate keyup",me.throttle)},0),be.on("remove",me.cancel)})},_o=be=>{const ke=()=>be.execCommand("mceWordCount");be.ui.registry.addButton("wordcount",{tooltip:"Word count",icon:"character-count",onAction:ke,context:"any"}),be.ui.registry.addMenuItem("wordcount",{text:"Word count",icon:"character-count",onAction:ke,context:"any"})};var ws=(be=300)=>{w.add("wordcount",ke=>{const Oe=qt(ke);return ft(ke,Oe),_o(ke),Qn(ke,Oe,be),Oe})};ws()})()),bee}var yee;function Bse(){return yee||(yee=1,Mse()),pee}Bse();var Cee={},wee={},See;function Fse(){return See||(See=1,(function(){var w=tinymce.util.Tools.resolve("tinymce.ModelManager");const M=(l,m,p)=>{var y;return p(l,m.prototype)?!0:((y=l.constructor)===null||y===void 0?void 0:y.name)===m.name},L=l=>{const m=typeof l;return l===null?"null":m==="object"&&Array.isArray(l)?"array":m==="object"&&M(l,String,(p,y)=>y.isPrototypeOf(p))?"string":m},X=l=>m=>L(m)===l,se=l=>m=>typeof m===l,le=l=>m=>l===m,Se=X("string"),pe=X("object"),$e=X("array"),Ue=le(null),sn=se("boolean"),hn=le(void 0),Rt=l=>l==null,tn=l=>!Rt(l),fo=se("function"),Wn=se("number"),ze=()=>{},Gn=(l,m)=>(...p)=>l(m.apply(null,p)),Bt=(l,m)=>p=>l(m(p)),ie=l=>()=>l,en=l=>l,Ro=(l,m)=>l===m;function Qe(l,...m){return(...p)=>{const y=m.concat(p);return l.apply(null,y)}}const K=l=>m=>!l(m),It=l=>()=>{throw new Error(l)},Kn=l=>l(),vn=ie(!1),Fe=ie(!0);class he{constructor(m,p){this.tag=m,this.value=p}static some(m){return new he(!0,m)}static none(){return he.singletonNone}fold(m,p){return this.tag?p(this.value):m()}isSome(){return this.tag}isNone(){return!this.tag}map(m){return this.tag?he.some(m(this.value)):he.none()}bind(m){return this.tag?m(this.value):he.none()}exists(m){return this.tag&&m(this.value)}forall(m){return!this.tag||m(this.value)}filter(m){return!this.tag||m(this.value)?this:he.none()}getOr(m){return this.tag?this.value:m}or(m){return this.tag?this:m}getOrThunk(m){return this.tag?this.value:m()}orThunk(m){return this.tag?this:m()}getOrDie(m){if(this.tag)return this.value;throw new Error(m??"Called getOrDie on None")}static from(m){return tn(m)?he.some(m):he.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(m){this.tag&&m(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}he.singletonNone=new he(!1);const Cs=Array.prototype.slice,ut=Array.prototype.indexOf,Ct=Array.prototype.push,k=(l,m)=>ut.call(l,m),Eo=(l,m)=>k(l,m)>-1,bt=(l,m)=>{for(let p=0,y=l.length;p<y;p++){const A=l[p];if(m(A,p))return!0}return!1},Uo=(l,m)=>{const p=[];for(let y=0;y<l;y++)p.push(m(y));return p},pn=(l,m)=>{const p=l.length,y=new Array(p);for(let A=0;A<p;A++){const R=l[A];y[A]=m(R,A)}return y},Te=(l,m)=>{for(let p=0,y=l.length;p<y;p++){const A=l[p];m(A,p)}},St=(l,m)=>{for(let p=l.length-1;p>=0;p--){const y=l[p];m(y,p)}},$n=(l,m)=>{const p=[],y=[];for(let A=0,R=l.length;A<R;A++){const I=l[A];(m(I,A)?p:y).push(I)}return{pass:p,fail:y}},Xe=(l,m)=>{const p=[];for(let y=0,A=l.length;y<A;y++){const R=l[y];m(R,y)&&p.push(R)}return p},qt=(l,m,p)=>(St(l,(y,A)=>{p=m(p,y,A)}),p),Ne=(l,m,p)=>(Te(l,(y,A)=>{p=m(p,y,A)}),p),ft=(l,m,p)=>{for(let y=0,A=l.length;y<A;y++){const R=l[y];if(m(R,y))return he.some(R);if(p(R,y))break}return he.none()},P=(l,m)=>ft(l,m,vn),Xo=(l,m)=>{for(let p=0,y=l.length;p<y;p++){const A=l[p];if(m(A,p))return he.some(p)}return he.none()},ro=l=>{const m=[];for(let p=0,y=l.length;p<y;++p){if(!$e(l[p]))throw new Error("Arr.flatten item "+p+" was not an array, input: "+l);Ct.apply(m,l[p])}return m},Qn=(l,m)=>ro(pn(l,m)),_o=(l,m)=>{for(let p=0,y=l.length;p<y;++p){const A=l[p];if(m(A,p)!==!0)return!1}return!0},ws=l=>{const m=Cs.call(l,0);return m.reverse(),m},be=(l,m)=>{const p={};for(let y=0,A=l.length;y<A;y++){const R=l[y];p[String(R)]=m(R,y)}return p},ke=(l,m)=>{const p=Cs.call(l,0);return p.sort(m),p},Oe=(l,m)=>m>=0&&m<l.length?he.some(l[m]):he.none(),me=l=>Oe(l,0),Re=l=>Oe(l,l.length-1),at=(l,m)=>{for(let p=0;p<l.length;p++){const y=m(l[p],p);if(y.isSome())return y}return he.none()},tt=Object.keys,In=Object.hasOwnProperty,qe=(l,m)=>{const p=tt(l);for(let y=0,A=p.length;y<A;y++){const R=p[y],I=l[R];m(I,R)}},st=(l,m)=>Fn(l,(p,y)=>({k:y,v:m(p,y)})),Fn=(l,m)=>{const p={};return qe(l,(y,A)=>{const R=m(y,A);p[R.k]=R.v}),p},rn=l=>(m,p)=>{l[p]=m},To=(l,m,p,y)=>{qe(l,(A,R)=>{(m(A,R)?p:y)(A,R)})},es=(l,m)=>{const p={};return To(l,m,rn(p),ze),p},Wo=(l,m)=>{const p=[];return qe(l,(y,A)=>{p.push(m(y,A))}),p},eo=l=>Wo(l,en),zs=(l,m)=>wo(l,m)?he.from(l[m]):he.none(),wo=(l,m)=>In.call(l,m),mt=(l,m)=>wo(l,m)&&l[m]!==void 0&&l[m]!==null,Nt=l=>{for(const m in l)if(In.call(l,m))return!1;return!0},fn={generate:l=>{if(!$e(l))throw new Error("cases must be an array");if(l.length===0)throw new Error("there must be at least one case");const m=[],p={};return Te(l,(y,A)=>{const R=tt(y);if(R.length!==1)throw new Error("one and only one name per case");const I=R[0],W=y[I];if(p[I]!==void 0)throw new Error("duplicate key detected:"+I);if(I==="cata")throw new Error("cannot have a case named cata (sorry)");if(!$e(W))throw new Error("case arguments must be an array");m.push(I),p[I]=(...ne)=>{const ve=ne.length;if(ve!==W.length)throw new Error("Wrong number of arguments to case "+I+". Expected "+W.length+" ("+W+"), got "+ve);return{fold:(...xt)=>{if(xt.length!==l.length)throw new Error("Wrong number of arguments to fold. Expected "+l.length+", got "+xt.length);return xt[A].apply(null,ne)},match:xt=>{const jt=tt(xt);if(m.length!==jt.length)throw new Error("Wrong number of arguments to match. Expected: "+m.join(",")+`
Actual: `+jt.join(","));if(!_o(m,Dn=>Eo(jt,Dn)))throw new Error("Not all branches were specified when using match. Specified: "+jt.join(", ")+`
Required: `+m.join(", "));return xt[I].apply(null,ne)},log:xt=>{console.log(xt,{constructors:m,constructor:I,params:ne})}}}}),p}},uo=l=>{let m=l;return{get:()=>m,set:A=>{m=A}}},ts=l=>l.slice(0).sort(),So=(l,m)=>{throw new Error("All required keys ("+ts(l).join(", ")+") were not specified. Specified keys were: "+ts(m).join(", ")+".")},ks=l=>{throw new Error("Unsupported keys for object: "+ts(l).join(", "))},Xs=(l,m)=>{if(!$e(m))throw new Error("The "+l+" fields must be an array. Was: "+m+".");Te(m,p=>{if(!Se(p))throw new Error("The value "+p+" in the "+l+" fields was not a string.")})},dn=(l,m)=>{throw new Error("All values need to be of type: "+m+". Keys ("+ts(l).join(", ")+") were not.")},ko=l=>{const m=ts(l);P(m,(y,A)=>A<m.length-1&&y===m[A+1]).each(y=>{throw new Error("The field: "+y+" occurs more than once in the combined fields: ["+m.join(", ")+"].")})},xo=(l,m)=>ac(l,m,{validate:fo,label:"function"}),ac=(l,m,p)=>{if(m.length===0)throw new Error("You must specify at least one required field.");return Xs("required",m),ko(m),y=>{const A=tt(y);_o(m,W=>Eo(A,W))||So(m,A),l(m,A);const I=Xe(m,W=>!p.validate(y[W],W));return I.length>0&&dn(I,p.label),y}},da=(l,m)=>{const p=Xe(m,y=>!Eo(l,y));p.length>0&&ks(p)},cn=l=>xo(da,l),Bc=l=>{const m=R=>R(l),p=ie(l),y=()=>A,A={tag:!0,inner:l,fold:(R,I)=>I(l),isValue:Fe,isError:vn,map:R=>Ma.value(R(l)),mapError:y,bind:m,exists:m,forall:m,getOr:p,or:y,getOrThunk:p,orThunk:y,getOrDie:p,each:R=>{R(l)},toOptional:()=>he.some(l)};return A},Ds=l=>{const m=()=>p,p={tag:!1,inner:l,fold:(y,A)=>y(l),isValue:vn,isError:Fe,map:m,mapError:y=>Ma.error(y(l)),bind:m,exists:vn,forall:Fe,getOr:en,or:en,getOrThunk:Kn,orThunk:Kn,getOrDie:It(String(l)),each:ze,toOptional:he.none};return p},Ma={value:Bc,error:Ds,fromOption:(l,m)=>l.fold(()=>Ds(m),Bc)},zr=typeof window<"u"?window:Function("return this;")(),Ss=l=>{const m=l.replace(/\./g,"-");return{resolve:y=>m+"-"+y}},to=(l,m,p=Ro)=>l.exists(y=>p(y,m)),os=l=>{const m=[],p=y=>{m.push(y)};for(let y=0;y<l.length;y++)l[y].each(p);return m},Wa=(l,m)=>l!=null?m(l):he.none(),Nc=(l,m)=>l?he.some(m):he.none(),Za=(l,m)=>{let p=m??zr;for(let y=0;y<l.length&&p!==void 0&&p!==null;++y)p=p[l[y]];return p},gn=(l,m)=>{const p=l.split(".");return Za(p,m)},Fr=l=>{const m=uo(he.none()),p=()=>m.get().each(l);return{clear:()=>{p(),m.set(he.none())},isSet:()=>m.get().isSome(),get:()=>m.get(),set:W=>{p(),m.set(he.some(W))}}},yr=()=>{const l=Fr(ze);return{...l,on:p=>l.get().each(p)}},Ti=(l,m)=>l.substring(m),ge=(l,m,p)=>m===""||l.length>=m.length&&l.substr(p,p+m.length)===m,Ce=(l,m)=>dt(l,m)?Ti(l,m.length):l,Ie=(l,m,p=0,y)=>{const A=l.indexOf(m,p);return A!==-1?hn(y)?!0:A+m.length<=y:!1},dt=(l,m)=>ge(l,m,0),Rn=(l,m)=>ge(l,m,l.length-m.length),Ao=(l=>m=>m.replace(l,""))(/^\s+|\s+$/g),jo=l=>l.length>0,qo=l=>{const m=parseFloat(l);return isNaN(m)?he.none():he.some(m)},Mo=(l,m)=>{let p=null;const y=()=>{Ue(p)||(clearTimeout(p),p=null)};return{cancel:y,throttle:(...R)=>{y(),p=setTimeout(()=>{p=null,l.apply(null,R)},m)}}},G=l=>{let m=!1,p;return(...y)=>(m||(m=!0,p=l.apply(null,y)),p)},we="",gt=["tfoot","thead","tbody","colgroup"],Yt=l=>Eo(gt,l),At=(l,m)=>({rows:l,columns:m}),Mn=(l,m)=>({row:l,column:m}),Tn=(l,m,p)=>({element:l,rowspan:m,colspan:p}),nn=(l,m,p,y)=>({element:l,rowspan:m,colspan:p,isNew:y}),bo=(l,m,p,y,A,R)=>({element:l,rowspan:m,colspan:p,row:y,column:A,isLocked:R}),Lo=(l,m,p)=>({element:l,cells:m,section:p}),Qo=(l,m,p,y)=>({element:l,cells:m,section:p,isNew:y}),bs=(l,m,p)=>({element:l,isNew:m,isLocked:p}),Sa=(l,m,p,y)=>({element:l,cells:m,section:p,isNew:y}),Er=(l,m,p,y)=>({startRow:l,startCol:m,finishRow:p,finishCol:y}),Ml=(l,m,p)=>({element:l,colspan:m,column:p}),Gs=(l,m)=>({element:l,columns:m}),rs=(l,m,p)=>{const y=l.cells,A=y.slice(0,m),R=y.slice(m),I=A.concat(p).concat(R);return Vi(l,I)},Os=(l,m,p)=>rs(l,m,[p]),ma=(l,m,p)=>{const y=l.cells;y[m]=p},Vi=(l,m)=>Sa(l.element,m,l.section,l.isNew),er=(l,m)=>{const p=l.cells,y=pn(p,m);return Sa(l.element,y,l.section,l.isNew)},jn=(l,m)=>l.cells[m],fa=(l,m)=>jn(l,m).element,xa=l=>l.cells.length,cr=l=>{const m=$n(l,p=>p.section==="colgroup");return{rows:m.fail,cols:m.pass}},Ju=(l,m,p)=>{const y=pn(l.cells,p);return Sa(m(l.element),y,l.section,!0)},bu=(l,m)=>{const y=(m||document).createElement("div");if(y.innerHTML=l,!y.hasChildNodes()||y.childNodes.length>1){const A="HTML does not have a single root node";throw console.error(A,l),new Error(A)}return ri(y.childNodes[0])},Js=(l,m)=>{const y=(m||document).createElement(l);return ri(y)},Ai=(l,m)=>{const y=(m||document).createTextNode(l);return ri(y)},ri=l=>{if(l==null)throw new Error("Node cannot be null or undefined");return{dom:l}},Gt={fromHtml:bu,fromTag:Js,fromText:Ai,fromDom:ri,fromPoint:(l,m,p)=>he.from(l.dom.elementFromPoint(m,p)).map(ri)},Pc=(l,m)=>{const p=l.document.createRange();return p.selectNode(m.dom),p},Ba=(l,m)=>{const p=l.document.createRange();return ja(p,m),p},ja=(l,m)=>l.selectNodeContents(m.dom),ir=(l,m)=>{m.fold(p=>{l.setStartBefore(p.dom)},(p,y)=>{l.setStart(p.dom,y)},p=>{l.setStartAfter(p.dom)})},vu=(l,m)=>{m.fold(p=>{l.setEndBefore(p.dom)},(p,y)=>{l.setEnd(p.dom,y)},p=>{l.setEndAfter(p.dom)})},qa=(l,m,p)=>{const y=l.document.createRange();return ir(y,m),vu(y,p),y},yc=(l,m,p,y,A)=>{const R=l.document.createRange();return R.setStart(m.dom,p),R.setEnd(y.dom,A),R},Bl=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom,width:l.width,height:l.height}),ed=l=>{const m=l.getClientRects(),p=m.length>0?m[0]:l.getBoundingClientRect();return p.width>0||p.height>0?he.some(p).map(Bl):he.none()},Ui=fn.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),yu=(l,m,p)=>m(Gt.fromDom(p.startContainer),p.startOffset,Gt.fromDom(p.endContainer),p.endOffset),Fl=(l,m)=>m.match({domRange:p=>({ltr:ie(p),rtl:he.none}),relative:(p,y)=>({ltr:G(()=>qa(l,p,y)),rtl:G(()=>he.some(qa(l,y,p)))}),exact:(p,y,A,R)=>({ltr:G(()=>yc(l,p,y,A,R)),rtl:G(()=>he.some(yc(l,A,R,p,y)))})}),Wi=(l,m)=>{const p=m.ltr();return p.collapsed?m.rtl().filter(A=>A.collapsed===!1).map(A=>Ui.rtl(Gt.fromDom(A.endContainer),A.endOffset,Gt.fromDom(A.startContainer),A.startOffset)).getOrThunk(()=>yu(l,Ui.ltr,p)):yu(l,Ui.ltr,p)},Nl=(l,m)=>{const p=Fl(l,m);return Wi(l,p)},zt=(l,m)=>Nl(l,m).match({ltr:(y,A,R,I)=>{const W=l.document.createRange();return W.setStart(y.dom,A),W.setEnd(R.dom,I),W},rtl:(y,A,R,I)=>{const W=l.document.createRange();return W.setStart(R.dom,I),W.setEnd(y.dom,A),W}});Ui.ltr,Ui.rtl;const dl=8,td=9,U=11,ue=1,Me=3,ct=(l,m)=>{const p=l.dom;if(p.nodeType!==ue)return!1;{const y=p;if(y.matches!==void 0)return y.matches(m);if(y.msMatchesSelector!==void 0)return y.msMatchesSelector(m);if(y.webkitMatchesSelector!==void 0)return y.webkitMatchesSelector(m);if(y.mozMatchesSelector!==void 0)return y.mozMatchesSelector(m);throw new Error("Browser lacks native selectors")}},Lt=l=>l.nodeType!==ue&&l.nodeType!==td&&l.nodeType!==U||l.childElementCount===0,mn=(l,m)=>{const p=m===void 0?document:m.dom;return Lt(p)?[]:pn(p.querySelectorAll(l),Gt.fromDom)},Bo=(l,m)=>{const p=m===void 0?document:m.dom;return Lt(p)?he.none():he.from(p.querySelector(l)).map(Gt.fromDom)},yo=(l,m)=>l.dom===m.dom,us=(l,m)=>{const p=l.dom,y=m.dom;return p===y?!1:p.contains(y)},$=ct,j=(l,m,p,y)=>{const A=l.isiOS()&&/ipad/i.test(p)===!0,R=l.isiOS()&&!A,I=l.isiOS()||l.isAndroid(),W=I||y("(pointer:coarse)"),ne=A||!R&&I&&y("(min-device-width:768px)"),ve=R||I&&!ne,Le=m.isSafari()&&l.isiOS()&&/safari/i.test(p)===!1,xt=!ve&&!ne&&!Le;return{isiPad:ie(A),isiPhone:ie(R),isTablet:ie(ne),isPhone:ie(ve),isTouch:ie(W),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:ie(Le),isDesktop:ie(xt)}},fe=(l,m)=>{for(let p=0;p<l.length;p++){const y=l[p];if(y.test(m))return y}},Ge=(l,m)=>{const p=fe(l,m);if(!p)return{major:0,minor:0};const y=A=>Number(m.replace(p,"$"+A));return Rs(y(1),y(2))},ln=(l,m)=>{const p=String(m).toLowerCase();return l.length===0?Go():Ge(l,p)},Go=()=>Rs(0,0),Rs=(l,m)=>({major:l,minor:m}),Or={nu:Rs,detect:ln,unknown:Go},Fa=(l,m)=>at(m.brands,p=>{const y=p.brand.toLowerCase();return P(l,A=>{var R;return y===((R=A.brand)===null||R===void 0?void 0:R.toLowerCase())}).map(A=>({current:A.name,version:Or.nu(parseInt(p.version,10),0)}))}),Cc=(l,m)=>{const p=String(m).toLowerCase();return P(l,y=>y.search(p))},Ko=(l,m)=>Cc(l,m).map(p=>{const y=Or.detect(p.versionRegexes,m);return{current:p.name,version:y}}),ml=(l,m)=>Cc(l,m).map(p=>{const y=Or.detect(p.versionRegexes,m);return{current:p.name,version:y}}),Rm=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Zi=l=>m=>Ie(m,l),mg=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:l=>Ie(l,"edge/")&&Ie(l,"chrome")&&Ie(l,"safari")&&Ie(l,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Rm],search:l=>Ie(l,"chrome")&&!Ie(l,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:l=>Ie(l,"msie")||Ie(l,"trident")},{name:"Opera",versionRegexes:[Rm,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Zi("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Zi("firefox")},{name:"Safari",versionRegexes:[Rm,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:l=>(Ie(l,"safari")||Ie(l,"mobile/"))&&Ie(l,"applewebkit")}],Mm=[{name:"Windows",search:Zi("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:l=>Ie(l,"iphone")||Ie(l,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Zi("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Zi("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Zi("linux"),versionRegexes:[]},{name:"Solaris",search:Zi("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Zi("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Zi("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],wc={browsers:ie(mg),oses:ie(Mm)},nd="Edge",od="Chromium",Mh="IE",fg="Opera",gg="Firefox",Bh="Safari",pf=()=>ji({current:void 0,version:Or.unknown()}),ji=l=>{const m=l.current,p=l.version,y=A=>()=>m===A;return{current:m,version:p,isEdge:y(nd),isChromium:y(od),isIE:y(Mh),isOpera:y(fg),isFirefox:y(gg),isSafari:y(Bh)}},Fh={unknown:pf,nu:ji},Nh="Windows",J="iOS",de="Android",He="Linux",pt="macOS",Ln="Solaris",Do="FreeBSD",Rr="ChromeOS",Sc=()=>ga({current:void 0,version:Or.unknown()}),ga=l=>{const m=l.current,p=l.version,y=A=>()=>m===A;return{current:m,version:p,isWindows:y(Nh),isiOS:y(J),isAndroid:y(de),isMacOS:y(pt),isLinux:y(He),isSolaris:y(Ln),isFreeBSD:y(Do),isChromeOS:y(Rr)}},xc={unknown:Sc,nu:ga},Ec={detect:(l,m,p)=>{const y=wc.browsers(),A=wc.oses(),R=m.bind(ne=>Fa(y,ne)).orThunk(()=>Ko(y,l)).fold(Fh.unknown,Fh.nu),I=ml(A,l).fold(xc.unknown,xc.nu),W=j(I,R,l,p);return{browser:R,os:I,deviceType:W}}},wu=l=>window.matchMedia(l).matches;let Tc=G(()=>Ec.detect(window.navigator.userAgent,he.from(window.navigator.userAgentData),wu));const $c=()=>Tc(),Pl=(l,m)=>gn(l,m),Ic=(l,m)=>{const p=Pl(l,m);if(p==null)throw new Error(l+" not available on this browser");return p},Po=Object.getPrototypeOf,bf=l=>Ic("HTMLElement",l),Ph=l=>{const m=gn("ownerDocument.defaultView",l);return pe(l)&&(bf(m).prototype.isPrototypeOf(l)||/^HTML\w*Element$/.test(Po(l).constructor.name))},Ir=l=>l.dom.nodeName.toLowerCase(),yS=l=>l.dom.nodeType,t1=l=>m=>yS(m)===l,CS=l=>yS(l)===dl||Ir(l)==="#comment",ab=l=>Nr(l)&&Ph(l.dom),Nr=t1(ue),Bm=t1(Me),Iy=t1(td),Mt=t1(U),_i=l=>m=>Nr(m)&&Ir(m)===l,hg=l=>Gt.fromDom(l.dom.ownerDocument),fl=l=>Iy(l)?l:hg(l),vf=l=>Gt.fromDom(fl(l).dom.documentElement),n1=l=>Gt.fromDom(fl(l).dom.defaultView),re=l=>he.from(l.dom.parentNode).map(Gt.fromDom),ai=l=>he.from(l.dom.parentElement).map(Gt.fromDom),Hd=(l,m)=>{const p=fo(m)?m:vn;let y=l.dom;const A=[];for(;y.parentNode!==null&&y.parentNode!==void 0;){const R=y.parentNode,I=Gt.fromDom(R);if(A.push(I),p(I)===!0)break;y=R}return A},o1=l=>he.from(l.dom.previousSibling).map(Gt.fromDom),yf=l=>he.from(l.dom.nextSibling).map(Gt.fromDom),cc=l=>pn(l.dom.childNodes,Gt.fromDom),ci=(l,m)=>{const p=l.dom.childNodes;return he.from(p[m]).map(Gt.fromDom)},s1=l=>ci(l,0),r1=(l,m,p,y)=>{const R=hg(l).dom.createRange();return R.setStart(l.dom,m),R.setEnd(p.dom,y),R},pg=(l,m,p,y)=>{const A=r1(l,m,p,y),R=yo(l,p)&&m===y;return A.collapsed&&!R},ii=l=>Mt(l)&&tn(l.dom.host),a1=l=>Gt.fromDom(l.dom.getRootNode()),Su=l=>ii(l)?l:Gt.fromDom(fl(l).dom.body),bg=l=>{const m=a1(l);return ii(m)?he.some(m):he.none()},c1=l=>Gt.fromDom(l.dom.host),ki=l=>{if(tn(l.target)){const m=Gt.fromDom(l.target);if(Nr(m)&&i1(m)&&l.composed&&l.composedPath){const p=l.composedPath();if(p)return me(p)}}return he.from(l.target)},i1=l=>tn(l.dom.shadowRoot),$l=(l,m,p,y,A,R,I)=>({target:l,x:m,y:p,stop:y,prevent:A,kill:R,raw:I}),zd=l=>{const m=Gt.fromDom(ki(l).getOr(l.target)),p=()=>l.stopPropagation(),y=()=>l.preventDefault(),A=Gn(y,p);return $l(m,l.clientX,l.clientY,p,y,A,l)},Yo=(l,m)=>p=>{l(p)&&m(zd(p))},Lc=(l,m,p,y,A)=>{const R=Yo(p,y);return l.dom.addEventListener(m,R,A),{unbind:Qe(cb,l,m,R,A)}},Cf=(l,m,p,y)=>Lc(l,m,p,y,!1),cb=(l,m,p,y)=>{l.dom.removeEventListener(m,p,y)},Oo=Fe,sd=(l,m,p)=>Cf(l,m,Oo,p),Xr=zd,Il=(l,m)=>{re(l).each(y=>{y.dom.insertBefore(m.dom,l.dom)})},Ll=(l,m)=>{yf(l).fold(()=>{re(l).each(A=>{xs(A,m)})},y=>{Il(y,m)})},Tr=(l,m)=>{s1(l).fold(()=>{xs(l,m)},y=>{l.dom.insertBefore(m.dom,y.dom)})},xs=(l,m)=>{l.dom.appendChild(m.dom)},Ly=(l,m,p)=>{ci(l,p).fold(()=>{xs(l,m)},y=>{Il(y,m)})},Hy=(l,m)=>{Il(l,m),xs(m,l)},Jr=(l,m)=>{Te(m,(p,y)=>{const A=y===0?l:m[y-1];Ll(A,p)})},gl=(l,m)=>{Te(m,p=>{xs(l,p)})},hl=(l,m,p)=>{if(Se(p)||sn(p)||Wn(p))l.setAttribute(m,p+"");else throw console.error("Invalid call to Attribute.set. Key ",m,":: Value ",p,":: Element ",l),new Error("Attribute value was not simple")},oa=(l,m,p)=>{hl(l.dom,m,p)},Hl=(l,m)=>{const p=l.dom;qe(m,(y,A)=>{hl(p,A,y)})},Hc=(l,m)=>{qe(m,(p,y)=>{p.fold(()=>{_s(l,y)},A=>{hl(l.dom,y,A)})})},Di=(l,m)=>{const p=l.dom.getAttribute(m);return p===null?void 0:p},ic=(l,m)=>he.from(Di(l,m)),_s=(l,m)=>{l.dom.removeAttribute(m)},qi=l=>Ne(l.dom.attributes,(m,p)=>(m[p.name]=p.value,m),{}),zc=l=>{l.dom.textContent="",Te(cc(l),m=>{Na(m)})},Na=l=>{const m=l.dom;m.parentNode!==null&&m.parentNode.removeChild(m)},Ea=l=>{const m=cc(l);m.length>0&&Jr(l,m),Na(l)},wr=(l,m)=>Gt.fromDom(l.dom.cloneNode(m)),pl=l=>wr(l,!1),Ta=l=>wr(l,!0),Vr=(l,m)=>{const p=Gt.fromTag(m),y=qi(l);return Hl(p,y),p},Vd=(l,m)=>{const p=Vr(l,m),y=cc(Ta(l));return gl(p,y),p},ib=(l,m)=>{const p=Vr(l,m);Ll(l,p);const y=cc(l);return gl(p,y),Na(l),p},$h=(l,m)=>{const y=document.createElement("div");return y.innerHTML=l,cc(Gt.fromDom(y))},Aa=l=>pn(l,Gt.fromDom),l1=l=>l.dom.innerHTML,lb=l=>{const m=Gt.fromTag("div"),p=Gt.fromDom(l.dom.cloneNode(!0));return xs(m,p),l1(m)},Fm=l=>l.style!==void 0&&fo(l.style.getPropertyValue),Hn=l=>{const m=Bm(l)?l.dom.parentNode:l.dom;if(m==null||m.ownerDocument===null)return!1;const p=m.ownerDocument;return bg(Gt.fromDom(m)).fold(()=>p.body.contains(m),Bt(Hn,c1))},u1=l=>{const m=l.dom.body;if(m==null)throw new Error("Body is not available yet");return Gt.fromDom(m)},ha=(l,m,p)=>{if(!Se(p))throw console.error("Invalid call to CSS.set. Property ",m,":: Value ",p,":: Element ",l),new Error("CSS value must be a string: "+p);Fm(l)&&l.style.setProperty(m,p)},Pa=(l,m)=>{Fm(l)&&l.style.removeProperty(m)},$a=(l,m,p)=>{const y=l.dom;ha(y,m,p)},tr=(l,m)=>{const p=l.dom;qe(m,(y,A)=>{ha(p,A,y)})},Ud=(l,m)=>{const p=l.dom,A=window.getComputedStyle(p).getPropertyValue(m);return A===""&&!Hn(l)?Ih(p,m):A},Ih=(l,m)=>Fm(l)?l.style.getPropertyValue(m):"",Gi=(l,m)=>{const p=l.dom,y=Ih(p,m);return he.from(y).filter(A=>A.length>0)},zl=(l,m)=>{const p=l.dom;Pa(p,m),to(ic(l,"style").map(Ao),"")&&_s(l,"style")},d1=(l,m)=>{const p=l.dom,y=m.dom;Fm(p)&&Fm(y)&&(y.style.cssText=p.style.cssText)},m1=(l,m)=>{const p=(W,ne)=>{if(!Wn(ne)&&!ne.match(/^[0-9]+$/))throw new Error(l+".set accepts only positive integer values. Value was "+ne);const ve=W.dom;Fm(ve)&&(ve.style[l]=ne+"px")},y=W=>{const ne=m(W);if(ne<=0||ne===null){const ve=Ud(W,l);return parseFloat(ve)||0}return ne},A=y,R=(W,ne)=>Ne(ne,(ve,Le)=>{const xt=Ud(W,Le),jt=xt===void 0?0:parseInt(xt,10);return isNaN(jt)?ve:ve+jt},0);return{set:p,get:y,getOuter:A,aggregate:R,max:(W,ne,ve)=>{const Le=R(W,ve);return ne>Le?ne-Le:0}}},vg=(l,m)=>qo(l).getOr(m),xu=(l,m,p)=>vg(Ud(l,m),p),bl=(l,m,p,y)=>{const A=xu(l,`padding-${p}`,0),R=xu(l,`padding-${y}`,0),I=xu(l,`border-${p}-width`,0),W=xu(l,`border-${y}-width`,0);return m-A-R-I-W},f1=(l,m)=>{const p=l.dom,y=p.getBoundingClientRect().width||p.offsetWidth;return bl(l,y,"left","right")},Ga=l=>xu(l,"height",l.dom.offsetHeight),Ki=l=>xu(l,"width",l.dom.offsetWidth),Eu=l=>f1(l),ds=m1("height",l=>{const m=l.dom;return Hn(l)?m.getBoundingClientRect().height:m.offsetHeight}),Oi=l=>ds.get(l),ub=l=>ds.getOuter(l),yg=Ga,Yi=m1("width",l=>{const m=l.dom;return Hn(l)?m.getBoundingClientRect().width:m.offsetWidth}),Yn=l=>Yi.get(l),Cr=l=>Yi.getOuter(l),Ka=Eu,nr=Ki,Xi=(l,m)=>({left:l,top:m,translate:(y,A)=>Xi(l+y,m+A)}),lr=Xi,Qr=l=>{const m=l.getBoundingClientRect();return lr(m.left,m.top)},wf=(l,m)=>l!==void 0?l:m!==void 0?m:0,Ho=l=>{const m=l.dom.ownerDocument,p=m.body,y=m.defaultView,A=m.documentElement;if(p===l.dom)return lr(p.offsetLeft,p.offsetTop);const R=wf(y==null?void 0:y.pageYOffset,A.scrollTop),I=wf(y==null?void 0:y.pageXOffset,A.scrollLeft),W=wf(A.clientTop,p.clientTop),ne=wf(A.clientLeft,p.clientLeft);return vl(l).translate(I-ne,R-W)},vl=l=>{const m=l.dom,y=m.ownerDocument.body;return y===m?lr(y.offsetLeft,y.offsetTop):Hn(l)?Qr(m):lr(0,0)},Ws=l=>{const m=l!==void 0?l.dom:document,p=m.body.scrollLeft||m.documentElement.scrollLeft,y=m.body.scrollTop||m.documentElement.scrollTop;return lr(p,y)},li=(l,m,p)=>{const A=(p!==void 0?p.dom:document).defaultView;A&&A.scrollBy(l,m)},ta=((l,m)=>{const p=R=>{if(!l(R))throw new Error("Can only get "+m+" value of a "+m+" node");return y(R).getOr("")},y=R=>l(R)?he.from(R.dom.nodeValue):he.none();return{get:p,getOption:y,set:(R,I)=>{if(!l(R))throw new Error("Can only set raw "+m+" value of a "+m+" node");R.dom.nodeValue=I}}})(Bm,"text"),Tu=l=>ta.get(l),Sf=l=>ta.getOption(l),rd=(l,m)=>ta.set(l,m),Wd=(l,m)=>p=>Zd(p)==="rtl"?m:l,Zd=l=>Ud(l,"direction")==="rtl"?"rtl":"ltr",Ya=(l,m)=>{const p=Di(l,m);return p===void 0||p===""?[]:p.split(" ")},ad=(l,m,p)=>{const A=Ya(l,m).concat([p]);return oa(l,m,A.join(" ")),!0},zy=(l,m,p)=>{const y=Xe(Ya(l,m),A=>A!==p);return y.length>0?oa(l,m,y.join(" ")):_s(l,m),!1};var jd=(l,m,p,y,A)=>l(p,y)?he.some(p):fo(A)&&A(p)?he.none():m(p,y,A);const Ms=(l,m,p)=>{let y=l.dom;const A=fo(p)?p:vn;for(;y.parentNode;){y=y.parentNode;const R=Gt.fromDom(y);if(m(R))return he.some(R);if(A(R))break}return he.none()},g1=(l,m,p)=>jd((A,R)=>R(A),Ms,l,m,p),xf=(l,m)=>{const p=A=>m(Gt.fromDom(A));return P(l.dom.childNodes,p).map(Gt.fromDom)},lc=(l,m)=>{const p=y=>{for(let A=0;A<y.childNodes.length;A++){const R=Gt.fromDom(y.childNodes[A]);if(m(R))return he.some(R);const I=p(y.childNodes[A]);if(I.isSome())return I}return he.none()};return p(l.dom)},ui=(l,m,p)=>Ms(l,y=>ct(y,m),p),Pr=(l,m)=>xf(l,p=>ct(p,m)),cd=(l,m)=>Bo(m,l),Ur=(l,m,p)=>jd((A,R)=>ct(A,R),ui,l,m,p),Ef=l=>l.dom.classList!==void 0,Lh=l=>Ya(l,"class"),h1=(l,m)=>ad(l,"class",m),wS=(l,m)=>zy(l,"class",m),Vl=(l,m)=>{Ef(l)?l.dom.classList.add(m):h1(l,m)},Vy=l=>{(Ef(l)?l.dom.classList:Lh(l)).length===0&&_s(l,"class")},p1=(l,m)=>{Ef(l)?l.dom.classList.remove(m):wS(l,m),Vy(l)},Ul=(l,m)=>Ef(l)&&l.dom.classList.contains(m),db=(l,m)=>{Te(m,p=>{p1(l,p)})},Tf=l=>Ur(l,"[contenteditable]"),Cg=(l,m=!1)=>Hn(l)?l.dom.isContentEditable:Tf(l).fold(ie(m),p=>wg(p)==="true"),wg=l=>l.dom.contentEditable,b1=l=>m=>{Vl(m,l)},mb=l=>m=>{db(m,l)},yl=(l,m,p)=>Xe(Hd(l,p),m),Uy=(l,m)=>Xe(cc(l),m),qd=(l,m)=>{let p=[];return Te(cc(l),y=>{m(y)&&(p=p.concat([y])),p=p.concat(qd(y,m))}),p},Bs=(l,m,p)=>yl(l,y=>ct(y,m),p),uc=(l,m)=>Uy(l,p=>ct(p,m)),Au=(l,m)=>mn(m,l),v1=(l,m,p,y)=>({parent:l,children:m,element:p,index:y}),Gd=l=>re(l).bind(m=>{const p=cc(m);return y1(p,l).map(y=>v1(m,p,l,y))}),y1=(l,m)=>Xo(l,Qe(yo,m)),fb=(l,m,p)=>Ms(l,m,p).isSome(),_u=l=>Ir(l)==="img"?1:Sf(l).fold(()=>cc(l).length,m=>m.length),ku=l=>Sf(l).filter(m=>m.trim().length!==0||m.indexOf(we)>-1).isSome(),Ls=l=>ab(l)&&Di(l,"contenteditable")==="false",gb=["img","br"],Sr=l=>ku(l)||Eo(gb,Ir(l))||Ls(l),Af=l=>lc(l,Sr),Wr=l=>Du(l,Sr),Du=(l,m)=>{const p=y=>{const A=cc(y);for(let R=A.length-1;R>=0;R--){const I=A[R];if(m(I))return he.some(I);const W=p(I);if(W.isSome())return W}return he.none()};return p(l)},id={create:(l,m,p,y)=>({start:l,soffset:m,finish:p,foffset:y})},Hh=fn.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),C1=(l,m,p,y)=>l.fold(m,p,y),w1=l=>l.fold(en,en,en),Wy=Hh.before,di=Hh.on,Wl=Hh.after,Zr={before:Wy,on:di,after:Wl,cata:C1,getStart:w1},_a=fn.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),zh=l=>_a.exact(l.start,l.soffset,l.finish,l.foffset),Sg=l=>l.match({domRange:m=>Gt.fromDom(m.startContainer),relative:(m,p)=>Zr.getStart(m),exact:(m,p,y,A)=>m}),Vh=_a.domRange,hb=_a.relative,Cl=_a.exact,SS=l=>{const m=Sg(l);return n1(m)},E=id.create,_={domRange:Vh,relative:hb,exact:Cl,exactFromRange:zh,getWin:SS,range:E},V=(l,m,p)=>{var y;return he.from((y=l.caretPositionFromPoint)===null||y===void 0?void 0:y.call(l,m,p)).bind(A=>{if(A.offsetNode===null)return he.none();const R=l.createRange();return R.setStart(A.offsetNode,A.offset),R.collapse(),he.some(R)})},ee=(l,m,p)=>{var y;return he.from((y=l.caretRangeFromPoint)===null||y===void 0?void 0:y.call(l,m,p))},Ee=(l,m,p)=>l.caretPositionFromPoint?V(l,m,p):l.caretRangeFromPoint?ee(l,m,p):he.none(),ot=(l,m,p)=>{const y=l.document;return Ee(y,m,p).map(A=>id.create(Gt.fromDom(A.startContainer),A.startOffset,Gt.fromDom(A.endContainer),A.endOffset))},Zt=(l,m)=>{const p=Ir(l);return p==="input"?Zr.after(l):Eo(["br","img"],p)?m===0?Zr.before(l):Zr.after(l):Zr.on(l,m)},Sn=(l,m)=>{const p=l.fold(Zr.before,Zt,Zr.after),y=m.fold(Zr.before,Zt,Zr.after);return _.relative(p,y)},go=(l,m,p,y)=>{const A=Zt(l,m),R=Zt(p,y);return _.relative(A,R)},Fo=l=>he.from(l.getSelection()),Ks=(l,m)=>{Fo(l).each(p=>{p.removeAllRanges(),p.addRange(m)})},ur=(l,m,p,y,A)=>{const R=yc(l,m,p,y,A);Ks(l,R)},na=(l,m,p,y,A,R)=>{m.collapse(p.dom,y),m.extend(A.dom,R)},Vc=(l,m)=>Nl(l,m).match({ltr:(p,y,A,R)=>{ur(l,p,y,A,R)},rtl:(p,y,A,R)=>{Fo(l).each(I=>{if(I.setBaseAndExtent)I.setBaseAndExtent(p.dom,y,A.dom,R);else if(I.extend)try{na(l,I,p,y,A,R)}catch{ur(l,A,R,p,y)}else ur(l,A,R,p,y)})}}),ld=(l,m,p,y,A)=>{const R=go(m,p,y,A);Vc(l,R)},ud=(l,m,p)=>{const y=Sn(m,p);Vc(l,y)},wl=l=>{if(l.rangeCount>0){const m=l.getRangeAt(0),p=l.getRangeAt(l.rangeCount-1);return he.some(id.create(Gt.fromDom(m.startContainer),m.startOffset,Gt.fromDom(p.endContainer),p.endOffset))}else return he.none()},S1=l=>{if(l.anchorNode===null||l.focusNode===null)return wl(l);{const m=Gt.fromDom(l.anchorNode),p=Gt.fromDom(l.focusNode);return pg(m,l.anchorOffset,p,l.focusOffset)?he.some(id.create(m,l.anchorOffset,p,l.focusOffset)):wl(l)}},_f=(l,m,p=!0)=>{const A=(p?Ba:Pc)(l,m);Ks(l,A)},Uh=l=>Fo(l).filter(m=>m.rangeCount>0).bind(S1),Nm=l=>Uh(l).map(m=>_.exact(m.start,m.soffset,m.finish,m.foffset)),kf=(l,m)=>{const p=zt(l,m);return ed(p)},Wh=(l,m,p)=>ot(l,m,p),Zh=l=>{Fo(l).each(m=>m.removeAllRanges())},Zy={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},jy=(()=>{const l="[0-9]+",p="[eE]"+("[+-]?"+l),y="\\.",A=W=>`(?:${W})?`,I=`[+-]?(?:${["Infinity",l+y+A(l)+A(p),y+l+A(p),l+A(p)].join("|")})`;return new RegExp(`^(${I})(.*)$`)})(),ls=(l,m)=>bt(m,p=>bt(Zy[p],y=>l===y)),Zs=(l,m)=>he.from(jy.exec(l)).bind(y=>{const A=Number(y[1]),R=y[2];return ls(R,m)?he.some({value:A,unit:R}):he.none()}),pa=l=>pn(l,ie(0)),mi=(l,m,p,y,A)=>A(l.slice(0,m)).concat(y).concat(A(l.slice(p))),jh=l=>(m,p,y,A)=>{if(l(y)){const R=Math.max(A,m[p]-Math.abs(y)),I=Math.abs(R-m[p]);return y>=0?I:-I}else return y},xg=jh(l=>l<0),qh=jh(Fe),Gh=()=>{const l=(W,ne,ve,Le,xt)=>{const jt=xg(W,ne,Le,xt);return mi(W,ne,ve+1,[jt,0],pa)},m=(W,ne,ve,Le)=>{const xt=(100+ve)/100,jt=Math.max(Le,(W[ne]+ve)/xt);return pn(W,(Pt,Dn)=>(Dn===ne?jt:Pt/xt)-Pt)},p=(W,ne,ve,Le,xt,jt)=>jt?m(W,ne,Le,xt):l(W,ne,ve,Le,xt);return{resizeTable:(W,ne)=>W(ne),clampTableDelta:xg,calcLeftEdgeDeltas:p,calcMiddleDeltas:(W,ne,ve,Le,xt,jt,Pt)=>p(W,ve,Le,xt,jt,Pt),calcRightEdgeDeltas:(W,ne,ve,Le,xt,jt)=>{if(jt)return m(W,ve,Le,xt);{const Pt=xg(W,ve,Le,xt);return pa(W.slice(0,ve)).concat([Pt])}},calcRedestributedWidths:(W,ne,ve,Le)=>{if(Le){const jt=(ne+ve)/ne,Pt=pn(W,Dn=>Dn/jt);return{delta:jt*100-100,newSizes:Pt}}else return{delta:ve,newSizes:W}}}},xS=()=>{const l=(I,W,ne,ve,Le)=>{const xt=ve>=0?ne:W,jt=qh(I,xt,ve,Le);return mi(I,W,ne+1,[jt,-jt],pa)};return{resizeTable:(I,W,ne)=>{ne&&I(W)},clampTableDelta:(I,W,ne,ve,Le)=>{if(Le){if(ne>=0)return ne;{const xt=Ne(I,(jt,Pt)=>jt+Pt-ve,0);return Math.max(-xt,ne)}}else return xg(I,W,ne,ve)},calcLeftEdgeDeltas:l,calcMiddleDeltas:(I,W,ne,ve,Le,xt)=>l(I,ne,ve,Le,xt),calcRightEdgeDeltas:(I,W,ne,ve,Le,xt)=>{if(xt)return pa(I);{const jt=ve/I.length;return pn(I,ie(jt))}},calcRedestributedWidths:(I,W,ne,ve)=>({delta:0,newSizes:I})}},Pm=(l,m,p=0)=>ic(l,m).map(y=>parseInt(y,10)).getOr(p),Kd=(l,m)=>Pm(l,m,1),qy=l=>_i("col")(l)?Pm(l,"span",1)>1:Kd(l,"colspan")>1,I_=l=>Kd(l,"rowspan")>1,ba=(l,m)=>parseInt(Ud(l,m),10),sa=ie(10),dd=ie(10),Kh=(l,m)=>pb(l,m,Fe),pb=(l,m,p)=>Qn(cc(l),y=>ct(y,m)?p(y)?[y]:[]:pb(y,m,p)),Uc=(l,m,p=vn)=>{if(p(m))return he.none();if(Eo(l,Ir(m)))return he.some(m);const y=A=>ct(A,"table")||p(A);return ui(m,l.join(","),y)},Gy=(l,m)=>Uc(["td","th"],l,m),Df=l=>Kh(l,"th,td"),bb=l=>ct(l,"colgroup")?uc(l,"col"):Qn(Qs(l),m=>uc(m,"col")),Ji=(l,m)=>Ur(l,"table",m),vb=l=>Kh(l,"tr"),Qs=l=>Ji(l).fold(ie([]),m=>uc(m,"colgroup")),Yh=_i("th"),$m=l=>_o(l,m=>Yh(m.element)),L_=(l,m)=>l&&m?"sectionCells":l?"section":"cells",ES=l=>{const m=l.section==="thead",p=to(yb(l.cells),"th");return l.section==="tfoot"?{type:"footer"}:m||p?{type:"header",subType:L_(m,p)}:{type:"body"}},yb=l=>{const m=Xe(l,p=>Yh(p.element));return m.length===0?he.some("td"):m.length===l.length?he.some("th"):he.none()},H_=l=>{const m=pn(l,A=>ES(A).type),p=Eo(m,"header"),y=Eo(m,"footer");if(!p&&!y)return he.some("body");{const A=Eo(m,"body");return p&&!A&&!y?he.some("header"):!p&&!A&&y?he.some("footer"):he.none()}},Ky=l=>at(l.all,m=>{const p=ES(m);return p.type==="header"?he.from(p.subType):he.none()}),Im=(l,m)=>pn(l,p=>{if(Ir(p)==="colgroup"){const y=pn(bb(p),A=>{const R=Pm(A,"span",1);return Tn(A,1,R)});return Lo(p,y,"colgroup")}else{const y=pn(Df(p),A=>{const R=Pm(A,"rowspan",1),I=Pm(A,"colspan",1);return Tn(A,R,I)});return Lo(p,y,m(p))}}),Yy=l=>re(l).map(m=>{const p=Ir(m);return Yt(p)?p:"tbody"}).getOr("tbody"),Cn=l=>{const m=vb(l),y=[...Qs(l),...m];return Im(y,Yy)},dr=(l,m)=>Im(l,()=>m),Xh="data-snooker-locked-cols",Eg=l=>ic(l,Xh).bind(m=>he.from(m.match(/\d+/g))).map(m=>be(m,Fe)),Xa=l=>{const m=Ne(cr(l).rows,(y,A)=>(Te(A.cells,(R,I)=>{R.isLocked&&(y[I]=!0)}),y),{}),p=Wo(m,(y,A)=>parseInt(A,10));return ke(p)},Jh=(l,m)=>l+","+m,z_=(l,m,p)=>he.from(l.access[Jh(m,p)]),Tg=(l,m,p)=>{const y=TS(l,A=>p(m,A.element));return y.length>0?he.some(y[0]):he.none()},TS=(l,m)=>{const p=Qn(l.all,y=>y.cells);return Xe(p,m)},Yd=l=>{const m={};let p=0;return Te(l.cells,y=>{const A=y.colspan;Uo(A,R=>{const I=p+R;m[I]=Ml(y.element,A,I)}),p+=A}),m},Of=l=>{const m={},p=[],A=me(l).map(Pt=>Pt.element).bind(Ji).bind(Eg).getOr({});let R=0,I=0,W=0;const{pass:ne,fail:ve}=$n(l,Pt=>Pt.section==="colgroup");Te(ve,Pt=>{const Dn=[];Te(Pt.cells,it=>{let Et=0;for(;m[Jh(W,Et)]!==void 0;)Et++;const zn=mt(A,Et.toString()),ho=bo(it.element,it.rowspan,it.colspan,W,Et,zn);for(let un=0;un<it.colspan;un++)for(let Fs=0;Fs<it.rowspan;Fs++){const Ns=W+Fs,Co=Et+un,ca=Jh(Ns,Co);m[ca]=ho,I=Math.max(I,Co+1)}Dn.push(ho)}),R++,p.push(Lo(Pt.element,Dn,Pt.section)),W++});const{columns:Le,colgroups:xt}=Re(ne).map(Pt=>{const Dn=Yd(Pt);return{colgroups:[Gs(Pt.element,eo(Dn))],columns:Dn}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:At(R,I),access:m,all:p,columns:Le,colgroups:xt}},Io={fromTable:l=>{const m=Cn(l);return Of(m)},generate:Of,getAt:z_,findItem:Tg,filterItems:TS,justCells:l=>Qn(l.all,m=>m.cells),justColumns:l=>eo(l.columns),hasColumns:l=>tt(l.columns).length>0,getColumnAt:(l,m)=>he.from(l.columns[m])},Ag=(l,m,p)=>bs(p(l.element,m),!0,l.isLocked),xr=(l,m)=>l.section!==m?Sa(l.element,l.cells,m,l.isNew):l,e2=()=>({transformRow:xr,transformCell:(l,m,p)=>{const y=p(l.element,m),A=Ir(y)!=="td"?ib(y,"td"):y;return bs(A,l.isNew,l.isLocked)}}),Ou=()=>({transformRow:xr,transformCell:Ag}),fi=()=>({transformRow:(l,m)=>xr(l,m==="thead"?"tbody":m),transformCell:Ag}),Xd={getTableSectionType:(l,m)=>{const p=Io.fromTable(l);switch(Ky(p).getOr(m)){case"section":return e2();case"sectionCells":return Ou();case"cells":return fi()}},section:e2,sectionCells:Ou,cells:fi,fallback:()=>({transformRow:en,transformCell:Ag})},t2=(l,m=Fe)=>{const p=l.grid,y=Uo(p.columns,en),A=Uo(p.rows,en);return pn(y,R=>wb(()=>Qn(A,ve=>Io.getAt(l,ve,R).filter(Le=>Le.column===R).toArray()),ve=>ve.colspan===1&&m(ve.element),()=>Io.getAt(l,0,R)))},wb=(l,m,p)=>{const y=l();return P(y,m).orThunk(()=>he.from(y[0]).orThunk(p)).map(I=>I.element)},Ru=l=>{const m=l.grid,p=Uo(m.rows,en),y=Uo(m.columns,en);return pn(p,A=>wb(()=>Qn(y,ne=>Io.getAt(l,A,ne).filter(ve=>ve.row===A).fold(ie([]),ve=>[ve])),ne=>ne.rowspan===1,()=>Io.getAt(l,A,0)))},n2=(l,m)=>{if(m<0||m>=l.length-1)return he.none();const p=l[m].fold(()=>{const A=ws(l.slice(0,m));return at(A,(R,I)=>R.map(W=>({value:W,delta:I+1})))},A=>he.some({value:A,delta:0})),y=l[m+1].fold(()=>{const A=l.slice(m+1);return at(A,(R,I)=>R.map(W=>({value:W,delta:I+1})))},A=>he.some({value:A,delta:1}));return p.bind(A=>y.map(R=>{const I=R.delta+A.delta;return Math.abs(R.value-A.value)/I}))},Sb=(l,m)=>({row:l,y:m}),o2=(l,m)=>({col:l,x:m}),AS=l=>Ho(l).left+Cr(l),V_=l=>Ho(l).left,s2=(l,m)=>o2(l,V_(m)),_S=(l,m)=>o2(l,AS(m)),xb=l=>Ho(l).top,U_=(l,m)=>Sb(l,xb(m)),W_=(l,m)=>Sb(l,xb(m)+ub(m)),r2=(l,m,p)=>{if(p.length===0)return[];const y=pn(p.slice(1),(R,I)=>R.map(W=>l(I,W))),A=p[p.length-1].map(R=>m(p.length-1,R));return y.concat([A])},a2=l=>-l,Zl={delta:en,positions:l=>r2(U_,W_,l),edge:xb},Xn=Wd({delta:en,edge:V_,positions:l=>r2(s2,_S,l)},{delta:a2,edge:AS,positions:l=>r2(_S,s2,l)}),hi={delta:(l,m)=>Xn(m).delta(l,m),positions:(l,m)=>Xn(m).positions(l,m),edge:l=>Xn(l).edge(l)},_g=/(\d+(\.\d+)?)%/,kS=/(\d+(\.\d+)?)px|em/,Z_=_i("col"),Eb=_i("tr"),x1=(l,m,p)=>{const y=ai(l).getOrThunk(()=>u1(hg(l)));return m(l)/p(y)*100},kg=(l,m)=>{$a(l,"width",m+"px")},Tb=(l,m)=>{$a(l,"width",m+"%")},Rf=(l,m)=>{$a(l,"height",m+"px")},c2=l=>{zl(l,"height")},DS=l=>yg(l)+"px",Mr=(l,m,p,y)=>{const A=Ji(l).map(R=>{const I=p(R);return Math.floor(m/100*I)}).getOr(m);return y(l,A),A},Mu=(l,m,p,y)=>{const A=parseFloat(l);return Rn(l,"%")&&Ir(m)!=="table"?Mr(m,A,p,y):A},Ri=l=>{const m=DS(l);return m?Mu(m,l,Oi,Rf):Oi(l)},Mf=(l,m,p)=>{const y=p(l),A=Kd(l,m);return y/A},pi=(l,m)=>Gi(l,m).orThunk(()=>ic(l,m).map(p=>p+"px")),Dg=l=>pi(l,"width"),Ia=l=>pi(l,"height"),Ac=l=>x1(l,Yn,Ka),Qh=l=>Z_(l)?Math.round(Yn(l)):nr(l),yt=l=>Eb(l)?Oi(l):Mf(l,"rowspan",Ri),xl=l=>Dg(l).bind(p=>Zs(p,["fixed","relative","empty"])),E1=(l,m,p)=>{$a(l,"width",m+p)},ka=l=>Yn(l)+"px",jl=l=>Oi(l)+"px",ql=l=>x1(l,Yn,Ka)+"%",OS=l=>Dg(l).exists(m=>_g.test(m)),Lm=l=>Dg(l).exists(m=>kS.test(m)),RS=l=>Dg(l).isNone(),Mi=ie(_g),Hs=_i("col"),Bu=l=>Dg(l).getOrThunk(()=>Qh(l)+"px"),T1=l=>Ia(l).getOrThunk(()=>yt(l)+"px"),Lr=l=>pn(Io.justColumns(l),m=>he.from(m.element)),MS=l=>{const m=$c().browser,p=m.isChromium()||m.isFirefox();return Hs(l)?p:!0},Ab=(l,m,p,y,A,R)=>l.filter(y).fold(()=>R(n2(p,m)),I=>A(I)),md=(l,m,p,y)=>{const A=t2(l),R=Io.hasColumns(l)?Lr(l):A,I=[he.some(hi.edge(m))].concat(pn(hi.positions(A,m),ne=>ne.map(ve=>ve.x))),W=K(qy);return pn(R,(ne,ve)=>Ab(ne,ve,I,W,Le=>{if(MS(Le))return p(Le);{const xt=Wa(A[ve],en);return Ab(xt,ve,I,W,jt=>y(he.some(Math.round(Yn(jt)))),y)}},y))},i2=l=>l.map(m=>m+"px").getOr(""),Qi=(l,m)=>md(l,m,Bu,i2),l2=(l,m,p)=>md(l,m,Ac,y=>y.fold(()=>p.minCellWidth(),A=>A/p.pixelWidth()*100)),We=(l,m,p)=>md(l,m,Qh,y=>y.getOrThunk(p.minCellWidth)),bi=(l,m,p,y)=>{const A=Ru(l),R=pn(l.all,W=>he.some(W.element)),I=[he.some(Zl.edge(m))].concat(pn(Zl.positions(A,m),W=>W.map(ne=>ne.y)));return pn(R,(W,ne)=>Ab(W,ne,I,Fe,p,y))},ep=(l,m)=>bi(l,m,yt,p=>p.getOrThunk(dd)),Br=(l,m)=>bi(l,m,T1,i2),El=(l,m)=>()=>Hn(l)?m(l):parseFloat(Gi(l,"width").getOr("0")),mc=l=>{const m=El(l,Yn),p=ie(0);return{width:m,pixelWidth:m,getWidths:(A,R)=>We(A,l,R),getCellDelta:p,singleColumnWidth:ie([0]),minCellWidth:p,setElementWidth:ze,adjustTableWidth:ze,isRelative:!0,label:"none"}},$s=l=>{const m=El(l,ne=>parseFloat(ql(ne))),p=El(l,Yn);return{width:m,pixelWidth:p,getWidths:(ne,ve)=>l2(ne,l,ve),getCellDelta:ne=>ne/p()*100,singleColumnWidth:(ne,ve)=>[100-ne],minCellWidth:()=>sa()/p()*100,setElementWidth:Tb,adjustTableWidth:ne=>{const ve=m(),Le=ne/100*ve,xt=ve+Le;Tb(l,xt)},isRelative:!0,label:"percent"}},BS=l=>{const m=El(l,Yn);return{width:m,pixelWidth:m,getWidths:(I,W)=>We(I,l,W),getCellDelta:en,singleColumnWidth:(I,W)=>[Math.max(sa(),I+W)-I],minCellWidth:sa,setElementWidth:kg,adjustTableWidth:I=>{const W=m()+I;kg(l,W)},isRelative:!1,label:"pixel"}},Bf=(l,m)=>Mi().exec(m)!==null?$s(l):BS(l),Ff={getTableSize:l=>Dg(l).fold(()=>mc(l),p=>Bf(l,p)),pixelSize:BS,percentageSize:$s,noneSize:mc},tp=(l,m,p,y)=>{p===y?_s(l,m):oa(l,m,p)},FS=(l,m,p)=>{Re(uc(l,m)).fold(()=>Tr(l,p),y=>Ll(y,p))},NS=(l,m)=>{const p=Pr(l,m).getOrThunk(()=>{const y=Gt.fromTag(m,hg(l).dom);return m==="thead"?FS(l,"caption,colgroup",y):m==="colgroup"?FS(l,"caption",y):xs(l,y),y});return zc(p),p},Hm=(l,m)=>{const p=[],y=[],A=Pt=>pn(Pt,Dn=>{Dn.isNew&&p.push(Dn.element);const it=Dn.element;return zc(it),Te(Dn.cells,Et=>{Et.isNew&&y.push(Et.element),tp(Et.element,"colspan",Et.colspan,1),tp(Et.element,"rowspan",Et.rowspan,1),xs(it,Et.element)}),it}),R=Pt=>Qn(Pt,Dn=>pn(Dn.cells,it=>(tp(it.element,"span",it.colspan,1),it.element))),I=(Pt,Dn)=>{const it=NS(l,Dn),zn=(Dn==="colgroup"?R:A)(Pt);gl(it,zn)},W=Pt=>{Pr(l,Pt).each(Na)},ne=(Pt,Dn)=>{Pt.length>0?I(Pt,Dn):W(Dn)},ve=[],Le=[],xt=[],jt=[];return Te(m,Pt=>{switch(Pt.section){case"thead":ve.push(Pt);break;case"tbody":Le.push(Pt);break;case"tfoot":xt.push(Pt);break;case"colgroup":jt.push(Pt);break}}),ne(jt,"colgroup"),ne(ve,"thead"),ne(Le,"tbody"),ne(xt,"tfoot"),{newRows:p,newCells:y}},A1=l=>pn(l,m=>{const p=pl(m.element);return Te(m.cells,y=>{const A=Ta(y.element);tp(A,"colspan",y.colspan,1),tp(A,"rowspan",y.rowspan,1),xs(p,A)}),p}),eM=(l,m)=>pn(l,p=>jn(p,m)),Og=(l,m)=>l[m],fc=(l,m)=>{if(l.length===0)return 0;const p=l[0];return Xo(l,A=>!m(p.element,A.element)).getOr(l.length)},Ja=(l,m,p,y)=>{const A=Og(l,m),R=A.section==="colgroup",I=fc(A.cells.slice(p),y),W=R?1:fc(eM(l.slice(m),p),y);return{colspan:I,rowspan:W}},zm=(l,m)=>{const p=pn(l,A=>pn(A.cells,vn)),y=(A,R,I,W)=>{for(let ne=A;ne<A+I;ne++)for(let ve=R;ve<R+W;ve++)p[ne][ve]=!0};return pn(l,(A,R)=>{const I=Qn(A.cells,(W,ne)=>{if(p[R][ne]===!1){const ve=Ja(l,R,ne,m);return y(R,ne,ve.rowspan,ve.colspan),[nn(W.element,ve.rowspan,ve.colspan,W.isNew)]}else return[]});return Qo(A.element,I,A.section,A.isNew)})},Vm=(l,m,p)=>{const y=[];Te(l.colgroups,A=>{const R=[];for(let I=0;I<l.grid.columns;I++){const W=Io.getColumnAt(l,I).map(ne=>bs(ne.element,p,!1)).getOrThunk(()=>bs(m.colGap(),!0,!1));R.push(W)}y.push(Sa(A.element,R,"colgroup",p))});for(let A=0;A<l.grid.rows;A++){const R=[];for(let ne=0;ne<l.grid.columns;ne++){const ve=Io.getAt(l,A,ne).map(Le=>bs(Le.element,p,Le.isLocked)).getOrThunk(()=>bs(m.gap(),!0,!1));R.push(ve)}const I=l.all[A],W=Sa(I.element,R,I.section,p);y.push(W)}return y},Rg=(l,m)=>Vm(l,m,!1),np=l=>zm(l,yo),vi=(l,m)=>at(l.all,p=>P(p.cells,y=>yo(m,y.element))),Nf=(l,m,p)=>{const y=pn(m.selection,R=>Gy(R).bind(I=>vi(l,I)).filter(p)),A=os(y);return Nc(A.length>0,A)},Da=(l,m,p,y,A,R,I,W,ne)=>{const ve=Io.fromTable(R),Le=he.from(ne==null?void 0:ne.section).getOrThunk(Xd.fallback);return m(ve,I).map(jt=>{const Pt=Rg(ve,W),Dn=l(Pt,jt,yo,A(W),Le),it=Xa(Dn.grid),Et=np(Dn.grid);return{info:jt,grid:Et,cursor:Dn.cursor,lockedColumns:it}}).bind(jt=>{const Pt=Hm(R,jt.grid),Dn=he.from(ne==null?void 0:ne.sizing).getOrThunk(()=>Ff.getTableSize(R)),it=he.from(ne==null?void 0:ne.resize).getOrThunk(xS);return p(R,jt.grid,jt.info,{sizing:Dn,resize:it,section:Le}),y(R),_s(R,Xh),jt.lockedColumns.length>0&&oa(R,Xh,jt.lockedColumns.join(",")),he.some({cursor:jt.cursor,newRows:Pt.newRows,newCells:Pt.newCells})})},_b=(l,m)=>Gy(m.element).bind(p=>vi(l,p).map(y=>({...y,generators:m.generators,clipboard:m.clipboard}))),Fu=(l,m)=>Nf(l,m,Fe).map(p=>({cells:p,generators:m.generators,clipboard:m.clipboard})),Nu=(l,m)=>m.mergable,kb=(l,m)=>m.unmergable,La=(l,m)=>Nf(l,m,Fe),op=(l,m)=>Nf(l,m,p=>!p.isLocked),Um=(l,m)=>vi(l,m).exists(p=>!p.isLocked),Mg=(l,m)=>_o(m,p=>Um(l,p)),Jd=(l,m)=>Nu(l,m).filter(p=>Mg(l,p.cells)),_1=(l,m)=>kb(l,m).filter(p=>Mg(l,p)),Bg={...fn.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},PS=(l,m)=>l.length===0?Bg.none():l.length===1?Bg.only(0):m===0?Bg.left(0,1):m===l.length-1?Bg.right(m-1,m):m>0&&m<l.length-1?Bg.middle(m-1,m,m+1):Bg.none(),jr=(l,m,p,y,A)=>{const R=l.slice(0),I=PS(l,m),W=ie(pn(R,ie(0))),ne=jt=>y.singleColumnWidth(R[jt],p),ve=(jt,Pt)=>A.calcLeftEdgeDeltas(R,jt,Pt,p,y.minCellWidth(),y.isRelative),Le=(jt,Pt,Dn)=>A.calcMiddleDeltas(R,jt,Pt,Dn,p,y.minCellWidth(),y.isRelative),xt=(jt,Pt)=>A.calcRightEdgeDeltas(R,jt,Pt,p,y.minCellWidth(),y.isRelative);return I.fold(W,ne,ve,Le,xt)},$S=(l,m,p)=>{let y=0;for(let A=l;A<m;A++)y+=p[A]!==void 0?p[A]:0;return y},Qd=(l,m)=>{const p=Io.justCells(l);return pn(p,y=>{const A=$S(y.column,y.column+y.colspan,m);return{element:y.element,width:A,colspan:y.colspan}})},Pu=(l,m)=>{const p=Io.justColumns(l);return pn(p,(y,A)=>({element:y.element,width:m[A],colspan:y.colspan}))},d2=(l,m)=>pn(l.all,(p,y)=>({element:p.element,height:m[y]})),Fg=l=>qt(l,(m,p)=>m+p,0),el=(l,m)=>Io.hasColumns(l)?Pu(l,m):Qd(l,m),Ng=(l,m,p)=>{const y=el(l,m);Te(y,A=>{p.setElementWidth(A.element,A.width)})},Pg=(l,m,p,y,A)=>{const R=Io.fromTable(l),I=A.getCellDelta(m),W=A.getWidths(R,A),ne=p===R.grid.columns-1,ve=y.clampTableDelta(W,p,I,A.minCellWidth(),ne),Le=jr(W,p,ve,A,y),xt=pn(Le,(jt,Pt)=>jt+W[Pt]);Ng(R,xt,A),y.resizeTable(A.adjustTableWidth,ve,ne)},m2=(l,m,p)=>{const y=Io.fromTable(l),A=ep(y,l),R=pn(A,(ne,ve)=>p===ve?Math.max(m+ne,dd()):ne),I=d2(y,R);Te(I,ne=>{Rf(ne.element,ne.height)}),Te(Io.justCells(y),ne=>{c2(ne.element)});const W=Fg(R);Rf(l,W)},Db=(l,m,p,y,A)=>{const R=Io.generate(m),I=y.getWidths(R,y),W=y.pixelWidth(),{newSizes:ne,delta:ve}=A.calcRedestributedWidths(I,W,p.pixelDelta,y.isRelative);Ng(R,ne,y),y.adjustTableWidth(ve)},Ob=(l,m,p,y)=>{const A=Io.generate(m),R=y.getWidths(A,y);Ng(A,R,y)},Rb=(l,m)=>{qy(l)||xl(l).each(y=>{const A=y.value/2;E1(l,A,y.unit),E1(m,A,y.unit)})},f2=(l,m,p)=>{const y=Pm(l,m,1);p===1||y<=1?_s(l,m):oa(l,m,Math.min(p,y))},IS=(l,m)=>p=>{const y=p.column+p.colspan-1,A=p.column;return y>=l&&A<m},$g=(l,m,p)=>{if(Io.hasColumns(l)){const y=Xe(Io.justColumns(l),IS(m,p)),A=pn(y,I=>{const W=Ta(I.element);return f2(W,"span",p-m),W}),R=Gt.fromTag("colgroup");return gl(R,A),[R]}else return[]},Ig=(l,m,p)=>pn(l.all,y=>{const A=Xe(y.cells,IS(m,p)),R=pn(A,W=>{const ne=Ta(W.element);return f2(ne,"colspan",p-m),ne}),I=Gt.fromTag("tr");return gl(I,R),I}),fd=(l,m)=>{const p=Io.fromTable(l);return op(p,m).map(A=>{const R=A[A.length-1],I=A[0].column,W=R.column+R.colspan,ne=$g(p,I,W),ve=Ig(p,I,W);return[...ne,...ve]})},Wm=(l,m,p)=>{const y=Io.fromTable(l);return La(y,m).bind(R=>{const I=Vm(y,p,!1),ne=cr(I).rows.slice(R[0].row,R[R.length-1].row+R[R.length-1].rowspan),ve=Qn(ne,xt=>{const jt=Xe(xt.cells,Pt=>!Pt.isLocked);return jt.length>0?[{...xt,cells:jt}]:[]}),Le=np(ve);return Nc(Le.length>0,Le)}).map(R=>A1(R))},Lg=(l,m,p,y,A,R)=>({minRow:l,minCol:m,maxRow:p,maxCol:y,allCells:A,selectedCells:R}),LS=(l,m)=>{const p=l.grid.columns;let A=l.grid.rows,R=p,I=0,W=0;const ne=[],ve=[];return qe(l.access,Le=>{if(ne.push(Le),m(Le)){ve.push(Le);const xt=Le.row,jt=xt+Le.rowspan-1,Pt=Le.column,Dn=Pt+Le.colspan-1;xt<A?A=xt:jt>I&&(I=jt),Pt<R?R=Pt:Dn>W&&(W=Dn)}}),Lg(A,R,I,W,ne,ve)},k1=(l,m,p)=>{const y=l[p].element,A=Gt.fromTag("td");xs(A,Gt.fromTag("br")),(m?xs:Tr)(y,A)},D1=(l,m,p,y)=>{const A=Xe(l,W=>W.section!=="colgroup"),R=m.grid.columns,I=m.grid.rows;for(let W=0;W<I;W++){let ne=!1;for(let ve=0;ve<R;ve++)W<p.minRow||W>p.maxRow||ve<p.minCol||ve>p.maxCol||(Io.getAt(m,W,ve).filter(y).isNone()?k1(A,ne,W):ne=!0)}},HS=(l,m,p,y)=>{qe(p.columns,I=>{(I.column<m.minCol||I.column>m.maxCol)&&Na(I.element)});const A=Xe(Kh(l,"tr"),I=>I.dom.childElementCount===0);Te(A,Na),(m.minCol===m.maxCol||m.minRow===m.maxRow)&&Te(Kh(l,"th,td"),I=>{_s(I,"rowspan"),_s(I,"colspan")}),_s(l,Xh),_s(l,"data-snooker-col-series"),Ff.getTableSize(l).adjustTableWidth(y)},zS=(l,m,p,y)=>{if(y.minCol===0&&m.grid.columns===y.maxCol+1)return 0;const A=We(m,l,p),R=Ne(A,(ve,Le)=>ve+Le,0),ne=Ne(A.slice(y.minCol,y.maxCol+1),(ve,Le)=>ve+Le,0)/R*p.pixelWidth()-p.pixelWidth();return p.getCellDelta(ne)},Mb=(l,m)=>{const p=jt=>ct(jt.element,m),y=Ta(l),A=Cn(y),R=Ff.getTableSize(l),I=Io.generate(A),W=LS(I,p),ne="th:not("+m+"),td:not("+m+")",ve=pb(y,"th,td",jt=>ct(jt,ne));Te(ve,Na),D1(A,I,W,p);const Le=Io.fromTable(l),xt=zS(l,Le,R,W);return HS(y,W,I,xt),y},Hg=_i("col"),Bb=_i("colgroup"),Gl=l=>Ir(l)==="tr"||Bb(l),VS=l=>{const m=Pm(l,"colspan",1),p=Pm(l,"rowspan",1);return{element:l,colspan:m,rowspan:p}},$u=(l,m=VS)=>{const p=W=>Hg(W.element)?l.col(W):l.cell(W),y=W=>Bb(W.element)?l.colgroup(W):l.row(W),A=W=>{if(Gl(W))return y({element:W});{const ne=W,ve=p(m(ne));return R=he.some({item:ne,replacement:ve}),ve}};let R=he.none();return{getOrInit:(W,ne)=>R.fold(()=>A(W),ve=>ne(W,ve.item)?ve.replacement:A(W))}},O1=l=>m=>{const p=[],y=(I,W)=>P(p,ne=>W(ne.item,I)),A=I=>{const W=l==="td"?{scope:null}:{},ne=m.replace(I,l,W);return p.push({item:I,sub:ne}),ne};return{replaceOrInit:(I,W)=>{if(Gl(I)||Hg(I))return I;{const ne=I;return y(ne,W).fold(()=>A(ne),ve=>W(I,ve.item)?ve.sub:A(ne))}}}},US=l=>ic(l,"scope").map(m=>m.substr(0,3)),tl={modification:$u,transform:O1,merging:l=>({unmerge:y=>{const A=US(y);return A.each(R=>oa(y,"scope",R)),()=>{const R=l.cell({element:y,colspan:1,rowspan:1});return zl(R,"width"),zl(y,"width"),A.each(I=>oa(R,"scope",I)),R}},merge:y=>{const A=()=>{const R=os(pn(y,US));if(R.length===0)return he.none();{const I=R[0],W=["row","col"];return bt(R,ve=>ve!==I&&Eo(W,ve))?he.none():he.from(I)}};return zl(y[0],"width"),A().fold(()=>_s(y[0],"scope"),R=>oa(y[0],"scope",R+"group")),ie(y[0])}})},R1=(l,m)=>{const p=l.slice(0,m[m.length-1].row+1),y=np(p);return Qn(y,A=>{const R=A.cells.slice(0,m[m.length-1].column+1);return pn(R,I=>I.element)})},ZS=(l,m)=>{const p=l.slice(m[0].row+m[0].rowspan-1,l.length),y=np(p);return Qn(y,A=>{const R=A.cells.slice(m[0].column+m[0].colspan-1,A.cells.length);return pn(R,I=>I.element)})},Pf=(l,m,p)=>{const y=Io.fromTable(l);return La(y,m).map(R=>{const I=Vm(y,p,!1),{rows:W}=cr(I),ne=R1(W,R),ve=ZS(W,R);return{upOrLeftCells:ne,downOrRightCells:ve}})},G_={only:(l,m)=>{const p=Iy(l)?vf(l):l;return{parent:ie(p),view:ie(l),dragContainer:ie(p),origin:ie(lr(0,0)),isResizable:m}},detached:(l,m,p)=>{const y=()=>Ho(m);return{parent:ie(m),view:ie(l),dragContainer:ie(m),origin:y,isResizable:p}},body:(l,m)=>({parent:ie(l),view:ie(l),dragContainer:ie(l),origin:()=>Ho(l),isResizable:m})},Is=fn.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),jS=(l,m,p)=>{const y=p.substring(0,p.length-l.length),A=parseFloat(y);return y===A.toString()?m(A):Is.invalid(p)},Kl={...Is,from:l=>Rn(l,"%")?jS("%",Is.percent,l):Rn(l,"px")?jS("px",Is.pixels,l):Is.invalid(l)},zg=(l,m)=>pn(l,p=>Kl.from(p).fold(()=>p,A=>A/m*100+"%",A=>A+"%")),as=(l,m,p)=>{const y=p/m;return pn(l,A=>Kl.from(A).fold(()=>A,I=>I*y+"px",I=>I/100*p+"px"))},va=(l,m)=>{const p=l.fold(()=>ie(""),y=>{const A=y/m;return ie(A+"px")},()=>{const y=100/m;return ie(y+"%")});return Uo(m,p)},M1=(l,m,p)=>l.fold(()=>m,y=>as(m,p,y),y=>zg(m,p)),Fb=(l,m,p)=>{const y=Kl.from(p),A=_o(l,R=>R==="0px")?va(y,l.length):M1(y,l,m);return GS(A)},fr=(l,m)=>l.length===0?m:qt(l,(p,y)=>Kl.from(y).fold(ie(0),en,en)+p,0),sp=(l,m)=>{const p=Math.floor(l);return{value:p+m,remainder:l-p}},Nb=(l,m)=>Kl.from(l).fold(ie(l),p=>p+m+"px",p=>p+m+"%"),GS=l=>{if(l.length===0)return l;const m=qt(l,(y,A)=>{const R=Kl.from(A).fold(()=>({value:A,remainder:0}),I=>sp(I,"px"),I=>({value:I+"%",remainder:0}));return{output:[R.value].concat(y.output),remainder:y.remainder+R.remainder}},{output:[],remainder:0}),p=m.output;return p.slice(0,p.length-1).concat([Nb(p[p.length-1],Math.round(m.remainder))])},KS=Kl.from,YS=(l,m,p)=>{Te(m,y=>{const A=l.slice(y.column,y.colspan+y.column),R=fr(A,sa());$a(y.element,"width",R+p)})},tM=(l,m,p)=>{Te(m,(y,A)=>{const R=fr([l[A]],sa());$a(y.element,"width",R+p)})},K_=(l,m,p)=>{Te(p,y=>{zl(y.element,"height")}),Te(m,(y,A)=>{$a(y.element,"height",l[A])})},Y_=l=>KS(l).fold(ie("px"),ie("px"),ie("%")),XS=(l,m,p)=>{const y=Io.fromTable(l),A=y.all,R=Io.justCells(y),I=Io.justColumns(y);m.each(W=>{const ne=Y_(W),ve=Yn(l),Le=Qi(y,l),xt=Fb(Le,ve,W);Io.hasColumns(y)?tM(xt,I,ne):YS(xt,R,ne),$a(l,"width",W)}),p.each(W=>{const ne=Oi(l),ve=Br(y,l),Le=Fb(ve,ne,W);K_(Le,A,R),$a(l,"height",W)})},JS=OS,Iu=Lm,_c=RS;var Lu=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],gd=()=>{const l=ve=>Gt.fromDom(ve.dom.cloneNode(!1)),m=ve=>fl(ve).dom,p=ve=>Nr(ve)?Ir(ve)==="body"?!0:Eo(Lu,Ir(ve)):!1,y=ve=>Nr(ve)?Eo(["br","img","hr","input"],Ir(ve)):!1,A=ve=>Nr(ve)&&Di(ve,"contenteditable")==="false",R=(ve,Le)=>ve.dom.compareDocumentPosition(Le.dom),I=(ve,Le)=>{const xt=qi(ve);Hl(Le,xt)},W=ve=>{const Le=Ir(ve);return Eo(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],Le)},ne=ve=>Nr(ve)?ic(ve,"lang"):he.none();return{up:ie({selector:ui,closest:Ur,predicate:Ms,all:Hd}),down:ie({selector:Au,predicate:qd}),styles:ie({get:Ud,getRaw:Gi,set:$a,remove:zl}),attrs:ie({get:Di,set:oa,remove:_s,copyTo:I}),insert:ie({before:Il,after:Ll,afterAll:Jr,append:xs,appendAll:gl,prepend:Tr,wrap:Hy}),remove:ie({unwrap:Ea,remove:Na}),create:ie({nu:Gt.fromTag,clone:l,text:Gt.fromText}),query:ie({comparePosition:R,prevSibling:o1,nextSibling:yf}),property:ie({children:cc,name:Ir,parent:re,document:m,isText:Bm,isComment:CS,isElement:Nr,isSpecial:W,getLanguage:ne,getText:Tu,setText:rd,isBoundary:p,isEmptyTag:y,isNonEditable:A}),eq:yo,is:$}};const hd=(l,m)=>({item:l,mode:m}),$f=(l,m,p,y=em)=>l.property().parent(m).map(A=>hd(A,y)),em=(l,m,p,y=Zm)=>p.sibling(l,m).map(A=>hd(A,y)),Zm=(l,m,p,y=Zm)=>{const A=l.property().children(m);return p.first(A).map(I=>hd(I,y))},h2=[{current:$f,next:em,fallback:he.none()},{current:em,next:Zm,fallback:he.some($f)},{current:Zm,next:Zm,fallback:he.some(em)}],p2=(l,m,p,y,A=h2)=>P(A,I=>I.current===p).bind(I=>I.current(l,m,y,I.next).orThunk(()=>I.fallback.bind(W=>p2(l,m,W,y)))),Pb={left:()=>({sibling:(p,y)=>p.query().prevSibling(y),first:p=>p.length>0?he.some(p[p.length-1]):he.none()}),right:()=>({sibling:(p,y)=>p.query().nextSibling(y),first:p=>p.length>0?he.some(p[0]):he.none()})},$b=(l,m,p,y,A,R)=>p2(l,m,y,A).bind(W=>R(W.item)?he.none():p(W.item)?he.some(W.item):$b(l,W.item,p,W.mode,A,R)),QS=(l,m,p,y)=>$b(l,m,p,em,Pb.left(),y),Ib=(l,m,p,y)=>$b(l,m,p,em,Pb.right(),y),If=(l,m)=>({element:l,offset:m}),B1=(l,m,p)=>l.property().isText(m)&&l.property().getText(m).trim().length===0||l.property().isComment(m)?p(m).bind(y=>B1(l,y,p).orThunk(()=>he.some(y))):he.none(),pd=(l,m)=>l.property().isText(m)?l.property().getText(m).length:l.property().children(m).length,Lb=(l,m)=>{const p=B1(l,m,l.query().prevSibling).getOr(m);if(l.property().isText(p))return If(p,pd(l,p));const y=l.property().children(p);return y.length>0?Lb(l,y[y.length-1]):If(p,pd(l,p))},J_=Lb,Hb=gd(),zb=l=>J_(Hb,l),ex=l=>m=>l.property().children(m).length===0,Q_=(l,m,p)=>tx(l,m,ex(l),p),rp=(l,m,p)=>tm(l,m,ex(l),p),tx=QS,tm=Ib,ap=gd(),Vb=(l,m)=>Q_(ap,l,m),nm=(l,m)=>rp(ap,l,m),yi=(l,m,p)=>tx(ap,l,m,p),nl=(l,m,p)=>tm(ap,l,m,p),ol=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Ub=(l,m)=>{const p=l.property().name(m);return Eo(["ol","ul"],p)},b2=(l,m)=>{const p=l.property().name(m);return Eo(ol,p)},cp=(l,m)=>Eo(["br","img","hr","input"],l.property().name(m)),om=(l,m,p,y)=>{const A=p[0],R=p.slice(1);return y(l,m,A,R)},e4=(l,m,p)=>p.length>0?om(l,m,p,ya):he.none(),ya=(l,m,p,y)=>{const A=m(l,p);return qt(y,(R,I)=>{const W=m(l,I);return Wb(l,R,W)},A)},Wb=(l,m,p)=>m.bind(y=>p.filter(Qe(l.eq,y))),Bi=(l,m)=>Qe(l.eq,m),nx=(l,m,p,y=vn)=>{const A=[m].concat(l.up().all(m)),R=[p].concat(l.up().all(p)),I=Le=>Xo(Le,y).fold(()=>Le,jt=>Le.slice(0,jt+1)),W=I(A),ne=I(R),ve=P(W,Le=>bt(ne,Bi(l,Le)));return{firstpath:W,secondpath:ne,shared:ve}},ox=e4,Lf=nx,jm=gd(),Es=(l,m)=>ox(jm,(p,y)=>l(y),m),Wc=(l,m,p)=>Lf(jm,l,m,p),F1=gd(),Zb=l=>b2(F1,l),jb=l=>Ub(F1,l),N1=l=>cp(F1,l),sx=l=>{const m=_i("br"),p=ne=>_o(ne,ve=>m(ve)||Bm(ve)&&Tu(ve).trim().length===0),y=ne=>Ir(ne)==="li"||Ms(ne,jb).isSome(),A=ne=>yf(ne).map(ve=>Zb(ve)?!0:N1(ve)?Ir(ve)!=="img":!1).getOr(!1),R=ne=>Wr(ne).bind(ve=>{const Le=A(ve);return re(ve).map(xt=>Le===!0||y(xt)||m(ve)||Zb(xt)&&!yo(ne,xt)?[]:[Gt.fromTag("br")])}).getOr([]),W=(()=>{const ne=Qn(l,ve=>{const Le=cc(ve);return p(Le)?[]:Le.concat(R(ve))});return ne.length===0?[Gt.fromTag("br")]:ne})();zc(l[0]),gl(l[0],W)},sm=l=>{_s(l,"width"),_s(l,"height")},Hf=l=>{const m=ql(l);XS(l,he.some(m),he.none()),sm(l)},v2=l=>{const m=ka(l);XS(l,he.some(m),he.none()),sm(l)},Al=l=>{const m=jl(l);XS(l,he.none(),he.some(m)),sm(l)},ip=l=>{zl(l,"width");const m=bb(l),p=m.length>0?m:Df(l);Te(p,y=>{zl(y,"width"),sm(y)}),sm(l)},ra={scope:["row","col"]},Fi=l=>()=>{const m=Gt.fromTag("td",l.dom);return xs(m,Gt.fromTag("br",l.dom)),m},qb=l=>()=>Gt.fromTag("col",l.dom),rx=l=>()=>Gt.fromTag("colgroup",l.dom),y2=l=>()=>Gt.fromTag("tr",l.dom),zf=(l,m,p)=>{const y=Vd(l,m);return qe(p,(A,R)=>{A===null?_s(y,R):oa(y,R,A)}),y},Vg=l=>l,C2=(l,m,p)=>Af(l).map(A=>{const R=p.join(","),I=Bs(A,R,W=>yo(W,l));return qt(I,(W,ne)=>{const ve=pl(ne);return xs(W,ve),ve},m)}).getOr(m),w2=(l,m)=>{qe(ra,(p,y)=>ic(l,y).filter(A=>Eo(p,A)).each(A=>oa(m,y,A)))},P1=(l,m,p)=>{const y=(I,W)=>{d1(I.element,W),zl(W,"height"),I.colspan!==1&&zl(W,"width")},A=I=>{const W=Gt.fromTag(Ir(I.element),m.dom),ne=p.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),ve=ne.length>0?C2(I.element,W,ne):W;return xs(ve,Gt.fromTag("br")),y(I,W),w2(I.element,W),l(I.element,W),W};return{col:I=>{const W=Gt.fromTag(Ir(I.element),m.dom);return y(I,W),l(I.element,W),W},colgroup:rx(m),row:y2(m),cell:A,replace:zf,colGap:qb(m),gap:Fi(m)}},S2=l=>({col:qb(l),colgroup:rx(l),row:y2(l),cell:Fi(l),replace:Vg,colGap:qb(l),gap:Fi(l)}),Vf=l=>Io.fromTable(l).grid,qm=(l,m,p,y)=>{const A=cr(l).rows;if(A.length===0)return l;for(let R=m.startRow;R<=m.finishRow;R++)for(let I=m.startCol;I<=m.finishCol;I++){const W=A[R],ne=jn(W,I).isLocked;ma(W,I,bs(y(),!1,ne))}return l},ax=(l,m,p,y)=>{const A=cr(l).rows;let R=!0;for(let I=0;I<A.length;I++)for(let W=0;W<xa(A[0]);W++){const ne=A[I],ve=jn(ne,W),Le=ve.element,xt=p(Le,m);xt&&!R?ma(ne,W,bs(y(),!0,ve.isLocked)):xt&&(R=!1)}return l},gc=(l,m)=>Ne(l,(p,y)=>bt(p,A=>m(A.element,y.element))?p:p.concat([y]),[]),cx=(l,m,p,y)=>(m>0&&m<l[0].cells.length&&Te(l,A=>{const R=A.cells[m-1];let I=0;const W=y();for(;A.cells.length>m+I&&p(R.element,A.cells[m+I].element);)ma(A,m+I,bs(W,!0,A.cells[m+I].isLocked)),I++}),l),Uf=(l,m,p,y)=>{const A=cr(l).rows;if(m>0&&m<A.length){const R=A[m-1].cells,I=gc(R,p);Te(I,W=>{let ne=he.none();for(let ve=m;ve<A.length;ve++)for(let Le=0;Le<xa(A[0]);Le++){const xt=A[ve],jt=jn(xt,Le);p(jt.element,W.element)&&(ne.isNone()&&(ne=he.some(y())),ne.each(Dn=>{ma(xt,Le,bs(Dn,!0,jt.isLocked))}))}})}return l},ix=(l,m,p)=>{if(l.row>=m.length||l.column>xa(m[0]))return Ma.error("invalid start address out of table bounds, row: "+l.row+", column: "+l.column);const y=m.slice(l.row),A=y[0].cells.slice(l.column),R=xa(p[0]),I=p.length;return Ma.value({rowDelta:y.length-I,colDelta:A.length-R})},Gb=(l,m)=>{const p=xa(l[0]),y=xa(m[0]);return{rowDelta:0,colDelta:p-y}},x2=(l,m)=>{const p=l.length,y=m.length;return{rowDelta:p-y,colDelta:0}},$1=(l,m,p,y)=>{const A=m.section==="colgroup"?p.col:p.cell;return Uo(l,R=>bs(A(),!0,y(R)))},E2=(l,m,p,y)=>{const A=l[l.length-1];return l.concat(Uo(m,()=>{const R=A.section==="colgroup"?p.colgroup:p.row,I=Ju(A,R,en),W=$1(I.cells.length,I,p,ne=>wo(y,ne.toString()));return Vi(I,W)}))},lx=(l,m,p,y)=>pn(l,A=>{const R=$1(m,A,p,vn);return rs(A,y,R)}),ux=(l,m,p)=>pn(l,y=>Ne(p,(A,R)=>{const I=$1(1,y,m,Fe)[0];return Os(A,R,I)},y)),I1=(l,m,p)=>{const y=m.colDelta<0?lx:en,A=m.rowDelta<0?E2:en,R=Xa(l),I=xa(l[0]),W=bt(R,Le=>Le===I-1),ne=y(l,Math.abs(m.colDelta),p,W?I-1:I),ve=Xa(ne);return A(ne,Math.abs(m.rowDelta),p,be(ve,Fe))},Ca=(l,m,p,y)=>{const A=jn(l[m],p),R=Qe(y,A.element),I=l[m];return l.length>1&&xa(I)>1&&(p>0&&R(fa(I,p-1))||p<I.cells.length-1&&R(fa(I,p+1))||m>0&&R(fa(l[m-1],p))||m<l.length-1&&R(fa(l[m+1],p)))},gr=(l,m,p,y,A,R)=>{const I=l.row,W=l.column,ne=p.length,ve=xa(p[0]),Le=I+ne,xt=W+ve+R.length,jt=be(R,Fe);for(let Pt=I;Pt<Le;Pt++){let Dn=0;for(let it=W;it<xt;it++){if(jt[it]){Dn++;continue}Ca(m,Pt,it,A)&&ax(m,fa(m[Pt],it),A,y.cell);const Et=it-W-Dn,zn=jn(p[Pt-I],Et),ho=zn.element,un=y.replace(ho);ma(m[Pt],it,bs(un,!0,zn.isLocked))}}return m},hc=(l,m,p)=>{const y=xa(m[0]),A=cr(m).cols.length+l.row,R=Uo(y-l.column,W=>W+l.column),I=P(R,W=>_o(p,ne=>ne!==W)).getOr(y-1);return{row:A,column:I}},Oa=(l,m,p)=>Xe(p,y=>y>=l.column&&y<=xa(m[0])+l.column),Ha=(l,m,p,y,A)=>{const R=Xa(m),I=hc(l,m,R),W=cr(p).rows,ne=Oa(I,W,R);return ix(I,m,W).map(Le=>{const xt={...Le,colDelta:Le.colDelta-ne.length},jt=I1(m,xt,y),Pt=Xa(jt),Dn=Oa(I,W,Pt);return gr(I,jt,W,y,A,Dn)})},aa=(l,m,p,y,A)=>{cx(m,l,A,y.cell);const R=x2(p,m),I=I1(p,R,y),W=x2(m,I),ne=I1(m,W,y);return pn(ne,(ve,Le)=>rs(ve,l,I[Le].cells))},Kb=(l,m,p,y,A)=>{Uf(m,l,A,y.cell);const R=Xa(m),I=Gb(m,p),W={...I,colDelta:I.colDelta-R.length},ne=I1(m,W,y),{cols:ve,rows:Le}=cr(ne),xt=Xa(ne),jt=Gb(p,m),Pt={...jt,colDelta:jt.colDelta+xt.length},Dn=ux(p,y,xt),it=I1(Dn,Pt,y);return[...ve,...Le.slice(0,l),...it,...Le.slice(l,Le.length)]},Yb=(l,m,p,y)=>Ju(l,A=>y(A,p),m),Xb=(l,m,p,y,A)=>{const{rows:R,cols:I}=cr(l),W=R.slice(0,m),ne=R.slice(m),ve=Yb(R[p],(Le,xt)=>m>0&&m<R.length&&y(fa(R[m-1],xt),fa(R[m],xt))?jn(R[m],xt):bs(A(Le.element,y),!0,Le.isLocked),y,A);return[...I,...W,ve,...ne]},dx=(l,m,p,y,A,R,I)=>{if(p==="colgroup"||!y){const W=jn(l,A);return bs(I(W.element,R),!0,!1)}else return jn(l,m)},Jb=(l,m,p,y,A)=>pn(l,R=>{const I=m>0&&m<xa(R)&&y(fa(R,m-1),fa(R,m)),W=dx(R,m,R.section,I,p,y,A);return Os(R,m,W)}),mx=(l,m)=>Qn(l,p=>{const y=p.cells,A=qt(m,(R,I)=>I>=0&&I<R.length?R.slice(0,I).concat(R.slice(I+1)):R,y);return A.length>0?[Sa(p.element,A,p.section,p.isNew)]:[]}),Ug=(l,m,p)=>{const{rows:y,cols:A}=cr(l);return[...A,...y.slice(0,m),...y.slice(p+1)]},T2=(l,m,p,y)=>fa(l[m],p)!==void 0&&m>0&&y(fa(l[m-1],p),fa(l[m],p)),Wg=(l,m,p)=>m>0&&p(fa(l,m-1),fa(l,m)),Qb=(l,m,p,y)=>T2(l,m,p,y)||Wg(l[m],p,y),A2=(l,m)=>_o(m,en)&&$m(l.cells)?Fe:(y,A,R)=>!(Ir(y.element)==="th"&&m[R]),ev=(l,m)=>_o(m,en)&&$m(l)?Fe:(y,A,R)=>!(Ir(y.element)==="th"&&m[A]),bd=(l,m,p,y)=>{const A=I=>I==="row"?I_(m):qy(m),R=I=>A(I)?`${I}group`:I;return l?Yh(m)?R(p):null:y&&Yh(m)?R(p==="row"?"col":"row"):null},L1=(l,m)=>(p,y,A)=>he.some(bd(l,p.element,"col",m[A])),_2=(l,m)=>(p,y)=>he.some(bd(l,p.element,"row",m[y])),lp=(l,m,p)=>bs(p(l.element,m),!0,l.isLocked),H1=(l,m,p,y,A,R,I)=>{const W=ne=>bt(m,ve=>p(ne.element,ve.element));return pn(l,(ne,ve)=>er(ne,(Le,xt)=>{if(W(Le)){const jt=I(Le,ve,xt)?A(Le,p,y):Le;return R(jt,ve,xt).each(Pt=>{Hc(jt.element,{scope:he.from(Pt)})}),jt}else return Le}))},tv=(l,m,p)=>Qn(l,(y,A)=>Qb(l,A,m,p)?[]:[jn(y,m)]),k2=(l,m,p)=>{const y=l[m];return Qn(y.cells,(A,R)=>Qb(l,m,R,p)?[]:[A])},Hu=(l,m,p,y,A)=>{const R=cr(l).rows,I=Qn(m,Le=>tv(R,Le,y)),W=pn(R,Le=>$m(Le.cells)),ne=ev(I,W),ve=_2(p,W);return H1(l,I,y,A,lp,ve,ne)},rm=(l,m,p,y,A,R,I)=>{const{cols:W,rows:ne}=cr(l),ve=ne[m[0]],Le=Qn(m,Et=>k2(ne,Et,A)),xt=pn(ve.cells,(Et,zn)=>$m(tv(ne,zn,A))),jt=[...ne];Te(m,Et=>{jt[Et]=I.transformRow(ne[Et],p)});const Pt=[...W,...jt],Dn=A2(ve,xt),it=L1(y,xt);return H1(Pt,Le,A,R,I.transformCell,it,Dn)},up=(l,m,p,y)=>{const A=cr(l).rows,R=pn(m,I=>jn(A[I.row],I.column));return H1(l,R,p,y,lp,he.none,Fe)},nt=l=>Ne(l,(p,y)=>bt(p,R=>R.column===y.column)?p:p.concat([y]),[]).sort((p,y)=>p.column-y.column),Ni=l=>Cg(l,!0),dp=l=>{Df(l).length===0&&Na(l)},z1=(l,m)=>({grid:l,cursor:m}),nv=l=>at(l,m=>at(m.cells,p=>{const y=p.element;return Nc(Ni(y),y)})),vd=(l,m,p)=>{var y,A;const R=cr(l).rows;return he.from((A=(y=R[m])===null||y===void 0?void 0:y.cells[p])===null||A===void 0?void 0:A.element).filter(Ni).orThunk(()=>nv(R))},Zc=(l,m,p)=>{const y=vd(l,m,p);return z1(l,y)},V1=l=>Ne(l,(p,y)=>bt(p,R=>R.row===y.row)?p:p.concat([y]),[]).sort((p,y)=>p.row-y.row),fx=(l,m,p,y)=>{const A=m[0].row,R=V1(m),I=qt(R,(W,ne)=>({grid:Xb(W.grid,A,ne.row+W.delta,p,y.getOrInit),delta:W.delta+1}),{grid:l,delta:0}).grid;return Zc(I,A,m[0].column)},ov=(l,m,p,y)=>{const A=V1(m),R=A[A.length-1],I=R.row+R.rowspan,W=qt(A,(ne,ve)=>Xb(ne,I,ve.row,p,y.getOrInit),l);return Zc(W,I,m[0].column)},gx=(l,m,p,y)=>{const A=m.details,R=nt(A),I=R[0].column,W=qt(R,(ne,ve)=>({grid:Jb(ne.grid,I,ve.column+ne.delta,p,y.getOrInit),delta:ne.delta+1}),{grid:l,delta:0}).grid;return Zc(W,A[0].row,I)},Zg=(l,m,p,y)=>{const A=m.details,R=A[A.length-1],I=R.column+R.colspan,W=nt(A),ne=qt(W,(ve,Le)=>Jb(ve,I,Le.column,p,y.getOrInit),l);return Zc(ne,A[0].row,I)},D2=(l,m,p,y)=>{const A=nt(m),R=pn(A,W=>W.column),I=Hu(l,R,!0,p,y.replaceOrInit);return Zc(I,m[0].row,m[0].column)},am=(l,m,p,y)=>{const A=up(l,m,p,y.replaceOrInit);return Zc(A,m[0].row,m[0].column)},O2=(l,m,p,y)=>{const A=nt(m),R=pn(A,W=>W.column),I=Hu(l,R,!1,p,y.replaceOrInit);return Zc(I,m[0].row,m[0].column)},hx=(l,m,p,y)=>{const A=up(l,m,p,y.replaceOrInit);return Zc(A,m[0].row,m[0].column)},jc=(l,m)=>(p,y,A,R,I)=>{const W=V1(y),ne=pn(W,Le=>Le.row),ve=rm(p,ne,l,m,A,R.replaceOrInit,I);return Zc(ve,y[0].row,y[0].column)},yd=jc("thead",!0),sl=jc("tbody",!1),sv=jc("tfoot",!1),mp=(l,m,p,y)=>{const A=nt(m.details),R=mx(l,pn(A,W=>W.column)),I=R.length>0?R[0].cells.length-1:0;return Zc(R,A[0].row,Math.min(A[0].column,I))},px=(l,m,p,y)=>{const A=V1(m),R=Ug(l,A[0].row,A[A.length-1].row),I=Math.max(cr(R).rows.length-1,0);return Zc(R,Math.min(m[0].row,I),m[0].column)},t4=(l,m,p,y)=>{const A=m.cells;sx(A);const R=qm(l,m.bounds,p,y.merge(A));return z1(R,he.from(A[0]))},R2=(l,m,p,y)=>{const R=qt(m,(I,W)=>ax(I,W,p,y.unmerge(W)),l);return z1(R,he.from(m[0]))},bx=(l,m,p,y)=>{const R=((ne,ve)=>{const Le=Io.fromTable(ne);return Vm(Le,ve,!0)})(m.clipboard,m.generators),I=Mn(m.row,m.column);return Ha(I,l,R,m.generators,p).fold(()=>z1(l,he.some(m.element)),ne=>Zc(ne,m.row,m.column))},$o=(l,m,p)=>{const y=dr(l,p.section),A=Io.generate(y);return Vm(A,m,!0)},Nn=(l,m,p,y)=>{const A=cr(l).rows,R=m.cells[0].column,I=A[m.cells[0].row],W=$o(m.clipboard,m.generators,I),ne=aa(R,l,W,m.generators,p);return Zc(ne,m.cells[0].row,m.cells[0].column)},U1=(l,m,p,y)=>{const A=cr(l).rows,R=m.cells[m.cells.length-1].column+m.cells[m.cells.length-1].colspan,I=A[m.cells[0].row],W=$o(m.clipboard,m.generators,I),ne=aa(R,l,W,m.generators,p);return Zc(ne,m.cells[0].row,R)},rv=(l,m,p,y)=>{const A=cr(l).rows,R=m.cells[0].row,I=A[R],W=$o(m.clipboard,m.generators,I),ne=Kb(R,l,W,m.generators,p);return Zc(ne,m.cells[0].row,m.cells[0].column)},M2=(l,m,p,y)=>{const A=cr(l).rows,R=m.cells[m.cells.length-1].row+m.cells[m.cells.length-1].rowspan,I=A[m.cells[0].row],W=$o(m.clipboard,m.generators,I),ne=Kb(R,l,W,m.generators,p);return Zc(ne,R,m.cells[0].column)},n4=(l,m)=>{const p=Io.fromTable(l);return La(p,m).bind(A=>{const R=A[A.length-1],I=A[0].column,W=R.column+R.colspan,ne=ro(pn(p.all,ve=>Xe(ve.cells,Le=>Le.column>=I&&Le.column<W)));return yb(ne)}).getOr("")},B2=(l,m)=>{const p=Io.fromTable(l);return La(p,m).bind(yb).getOr("")},hr=(l,m)=>{const p=Io.fromTable(l);return La(p,m).bind(A=>{const R=A[A.length-1],I=A[0].row,W=R.row+R.rowspan,ne=p.all.slice(I,W);return H_(ne)}).getOr("")},av=(l,m,p,y)=>Ob(l,m,p,y.sizing),W1=(l,m,p,y)=>Db(l,m,p,y.sizing,y.resize),jg=(l,m)=>bt(m,p=>p.column===0&&p.isLocked),rt=(l,m)=>bt(m,p=>p.column+p.colspan>=l.grid.columns&&p.isLocked),cv=(l,m)=>{const p=t2(l),y=nt(m);return Ne(y,(A,R)=>{const W=p[R.column].map(Cr).getOr(0);return A+W},0)},vx=l=>(m,p)=>La(m,p).filter(y=>!(l?jg:rt)(m,y)).map(y=>({details:y,pixelDelta:cv(m,y)})),iv=(l,m)=>op(l,m).map(p=>({details:p,pixelDelta:-cv(l,p)})),yx=l=>(m,p)=>Fu(m,p).filter(y=>!(l?jg:rt)(m,y.cells)),Gm=tl.transform("th"),qg=tl.transform("td"),Gg=(l,m,p,y)=>Da(fx,La,ze,ze,tl.modification,l,m,p,y),F2=(l,m,p,y)=>Da(ov,La,ze,ze,tl.modification,l,m,p,y),Kg=(l,m,p,y)=>Da(gx,vx(!0),W1,ze,tl.modification,l,m,p,y),or=(l,m,p,y)=>Da(Zg,vx(!1),W1,ze,tl.modification,l,m,p,y),Cd=(l,m,p,y)=>Da(mp,iv,W1,dp,tl.modification,l,m,p,y),Cx=(l,m,p,y)=>Da(px,La,ze,dp,tl.modification,l,m,p,y),Km=(l,m,p,y)=>Da(D2,op,ze,ze,Gm,l,m,p,y),zu=(l,m,p,y)=>Da(O2,op,ze,ze,qg,l,m,p,y),o4=(l,m,p,y)=>Da(yd,La,ze,ze,Gm,l,m,p,y),s4=(l,m,p,y)=>Da(sl,La,ze,ze,qg,l,m,p,y),N2=(l,m,p,y)=>Da(sv,La,ze,ze,qg,l,m,p,y),r4=(l,m,p,y)=>Da(am,op,ze,ze,Gm,l,m,p,y),a4=(l,m,p,y)=>Da(hx,op,ze,ze,qg,l,m,p,y),c4=(l,m,p,y)=>Da(t4,Jd,av,ze,tl.merging,l,m,p,y),i4=(l,m,p,y)=>Da(R2,_1,av,ze,tl.merging,l,m,p,y),P2=(l,m,p,y)=>Da(bx,_b,av,ze,tl.modification,l,m,p,y),Ft=(l,m,p,y)=>Da(Nn,yx(!0),ze,ze,tl.modification,l,m,p,y),wx=(l,m,p,y)=>Da(U1,yx(!1),ze,ze,tl.modification,l,m,p,y),Qa=(l,m,p,y)=>Da(rv,Fu,ze,ze,tl.modification,l,m,p,y),Sx=(l,m,p,y)=>Da(M2,Fu,ze,ze,tl.modification,l,m,p,y),xx=n4,Ex=B2,l4=hr,so=(l,m)=>{const p=m.column,y=m.column+m.colspan-1,A=m.row,R=m.row+m.rowspan-1;return p<=l.finishCol&&y>=l.startCol&&A<=l.finishRow&&R>=l.startRow},$2=(l,m)=>m.column>=l.startCol&&m.column+m.colspan-1<=l.finishCol&&m.row>=l.startRow&&m.row+m.rowspan-1<=l.finishRow,Tx=(l,m)=>{let p=!0;const y=Qe($2,m);for(let A=m.startRow;A<=m.finishRow;A++)for(let R=m.startCol;R<=m.finishCol;R++)p=p&&Io.getAt(l,A,R).exists(y);return p?he.some(m):he.none()},oM=(l,m)=>Er(Math.min(l.row,m.row),Math.min(l.column,m.column),Math.max(l.row+l.rowspan-1,m.row+m.rowspan-1),Math.max(l.column+l.colspan-1,m.column+m.colspan-1)),u4=(l,m,p)=>{const y=Io.findItem(l,m,yo),A=Io.findItem(l,p,yo);return y.bind(R=>A.map(I=>oM(R,I)))},Ax=(l,m,p)=>u4(l,m,p).bind(y=>Tx(l,y)),sM=(l,m,p,y)=>Io.findItem(l,m,yo).bind(A=>{const R=p>0?A.row+A.rowspan-1:A.row,I=y>0?A.column+A.colspan-1:A.column;return Io.getAt(l,R+p,I+y).map(ne=>ne.element)}),d4=(l,m,p)=>u4(l,m,p).map(y=>{const A=Io.filterItems(l,Qe(so,y));return pn(A,R=>R.element)}),_x=(l,m)=>{const p=(y,A)=>us(A,y);return Io.findItem(l,m,p).map(y=>y.element)},I2=(l,m,p)=>Ji(l).bind(y=>{const A=_l(y);return sM(A,l,m,p)}),ao=(l,m,p)=>{const y=_l(l);return d4(y,m,p)},L2=(l,m,p,y,A)=>{const R=_l(l),I=yo(l,p)?he.some(m):_x(R,m),W=yo(l,A)?he.some(y):_x(R,y);return I.bind(ne=>W.bind(ve=>d4(R,ne,ve)))},Ym=(l,m,p)=>{const y=_l(l);return Ax(y,m,p)},_l=Io.fromTable,an={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},qc=()=>Gt.fromTag("th"),Z1=()=>Gt.fromTag("td"),j1=()=>Gt.fromTag("col"),lv=(l,m,p,y)=>{const A=Gt.fromTag("tr");for(let R=0;R<l;R++){const I=y<m||R<p?qc():Z1();R<p&&oa(I,"scope","row"),y<m&&oa(I,"scope","col"),xs(I,Gt.fromTag("br")),xs(A,I)}return A},fp=l=>{const m=Gt.fromTag("colgroup");return Uo(l,()=>xs(m,j1())),m},q1=(l,m,p,y)=>Uo(l,A=>lv(m,p,y,A)),Xm=(l,m,p,y,A,R=an)=>{const I=Gt.fromTag("table"),W=A!=="cells";tr(I,R.styles),Hl(I,R.attributes),R.colGroups&&xs(I,fp(m));const ne=Math.min(l,p);if(W&&p>0){const Pt=Gt.fromTag("thead");xs(I,Pt);const it=q1(p,m,A==="sectionCells"?ne:0,y);gl(Pt,it)}const ve=Gt.fromTag("tbody");xs(I,ve);const Le=W?l-ne:l,jt=q1(Le,m,W?0:p,y);return gl(ve,jt),I},kc=l=>{let m=[];return{bind:R=>{if(R===void 0)throw new Error("Event bind error: undefined handler");m.push(R)},unbind:R=>{m=Xe(m,I=>I!==R)},trigger:(...R)=>{const I={};Te(l,(W,ne)=>{I[W]=R[ne]}),Te(m,W=>{W(I)})}}},cm=l=>{const m=st(l,y=>({bind:y.bind,unbind:y.unbind})),p=st(l,y=>y.trigger);return{registry:m,trigger:p}},m4=cn(["compare","extract","mutate","sink"]),pc=cn(["element","start","stop","destroy"]),gp=cn(["forceDrop","drop","move","delayDrop"]),f4=()=>{let l=he.none();const m=()=>{l=he.none()},p=(R,I)=>{const W=l.map(ne=>R.compare(ne,I));return l=he.some(I),W},y=(R,I)=>{I.extract(R).each(ne=>{p(I,ne).each(Le=>{A.trigger.move(Le)})})},A=cm({move:kc(["info"])});return{onEvent:y,reset:m,events:A.registry}},ss=()=>{const l=cm({move:kc(["info"])});return{onEvent:ze,reset:ze,events:l.registry}},wd=()=>{const l=ss(),m=f4();let p=l;return{on:()=>{p.reset(),p=m},off:()=>{p.reset(),p=l},isOn:()=>p===m,onEvent:(W,ne)=>{p.onEvent(W,ne)},events:m.events}},Yg=(l,m,p)=>{let y=!1;const A=cm({start:kc([]),stop:kc([])}),R=wd(),I=()=>{Dn.stop(),R.isOn()&&(R.off(),A.trigger.stop())},W=Mo(I,200),ne=Et=>{Dn.start(Et),R.on(),A.trigger.start()},ve=Et=>{W.cancel(),R.onEvent(Et,m)};R.events.move.bind(Et=>{m.mutate(l,Et.info)});const Le=()=>{y=!0},xt=()=>{y=!1},jt=()=>y,Pt=Et=>(...zn)=>{y&&Et.apply(null,zn)},Dn=m.sink(gp({forceDrop:I,drop:Pt(I),move:Pt(ve),delayDrop:Pt(W.throttle)}),p),it=()=>{Dn.destroy()};return{element:Dn.element,go:ne,on:Le,off:xt,isActive:jt,destroy:it,events:A.registry}},Xg=Ss("ephox-dragster").resolve,cs=l=>{const m={layerClass:Xg("blocker"),...l},p=Gt.fromTag("div");return oa(p,"role","presentation"),tr(p,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),Vl(p,Xg("blocker")),Vl(p,m.layerClass),{element:ie(p),destroy:()=>{Na(p)}}};var G1=m4({compare:(l,m)=>lr(m.left-l.left,m.top-l.top),extract:l=>he.some(lr(l.x,l.y)),sink:(l,m)=>{const p=cs(m),y=sd(p.element(),"mousedown",l.forceDrop),A=sd(p.element(),"mouseup",l.drop),R=sd(p.element(),"mousemove",l.move),I=sd(p.element(),"mouseout",l.delayDrop),W=()=>{p.destroy(),A.unbind(),R.unbind(),I.unbind(),y.unbind()},ne=Le=>{xs(Le,p.element())},ve=()=>{Na(p.element())};return pc({element:p.element,start:ne,stop:ve,destroy:W})},mutate:(l,m)=>{l.mutate(m.left,m.top)}});const g4=(l,m={})=>{var p;const y=(p=m.mode)!==null&&p!==void 0?p:G1;return Yg(l,y,m)},uv=Ss("ephox-snooker").resolve,H2=()=>{const l=cm({drag:kc(["xDelta","yDelta"])});return{mutate:(p,y)=>{l.trigger.drag(p,y)},events:l.registry}},K1=()=>{const l=cm({drag:kc(["xDelta","yDelta","target"])});let m=he.none();const p=H2();return p.events.drag.bind(R=>{m.each(I=>{l.trigger.drag(R.xDelta,R.yDelta,I)})}),{assign:R=>{m=he.some(R)},get:()=>m,mutate:p.mutate,events:l.registry}},Dx=(l,m,p,y,A)=>{const R=Gt.fromTag("div");return tr(R,{position:"absolute",left:m-y/2+"px",top:p+"px",height:A+"px",width:y+"px"}),Hl(R,{"data-mce-bogus":"all","data-column":l,role:"presentation"}),R},h4=(l,m,p,y,A)=>{const R=Gt.fromTag("div");return tr(R,{position:"absolute",left:m+"px",top:p-A/2+"px",height:A+"px",width:y+"px"}),Hl(R,{"data-mce-bogus":"all","data-row":l,role:"presentation"}),R},Y1=uv("resizer-bar"),z2=uv("resizer-rows"),V2=uv("resizer-cols"),Ox=7,Rx=(l,m)=>Qn(l.all,(p,y)=>m(p.element)?[y]:[]),Mx=(l,m)=>{const p=[];return Uo(l.grid.columns,y=>{Io.getColumnAt(l,y).map(R=>R.element).forall(m)&&p.push(y)}),Xe(p,y=>{const A=Io.filterItems(l,R=>R.column===y);return _o(A,R=>m(R.element))})},U2=l=>{const m=Au(l.parent(),"."+Y1);Te(m,Na)},W2=(l,m,p)=>{const y=l.origin();Te(m,A=>{A.each(R=>{const I=p(y,R);Vl(I,Y1),xs(l.parent(),I)})})},vs=(l,m,p,y)=>{W2(l,m,(A,R)=>{const I=Dx(R.col,R.x-A.left,p.top-A.top,Ox,y);return Vl(I,V2),I})},Bx=(l,m,p,y)=>{W2(l,m,(A,R)=>{const I=h4(R.row,p.left-A.left,R.y-A.top,y,Ox);return Vl(I,z2),I})},dv=(l,m,p,y,A)=>{const R=Ho(p),I=m.isResizable,W=y.length>0?Zl.positions(y,p):[],ne=W.length>0?Rx(l,I):[],ve=Xe(W,(Pt,Dn)=>bt(ne,it=>Dn===it));Bx(m,ve,R,Cr(p));const Le=A.length>0?hi.positions(A,p):[],xt=Le.length>0?Mx(l,I):[],jt=Xe(Le,(Pt,Dn)=>bt(xt,it=>Dn===it));vs(m,jt,R,ub(p))},Z2=(l,m)=>{if(U2(l),l.isResizable(m)){const p=Io.fromTable(m),y=Ru(p),A=t2(p);dv(p,l,m,y,A)}},Yl=(l,m)=>{const p=Au(l.parent(),"."+Y1);Te(p,m)},Fx=l=>{Yl(l,m=>{$a(m,"display","none")})},j2=l=>{Yl(l,m=>{$a(m,"display","block")})},p4=l=>Ul(l,z2),im=l=>Ul(l,V2),b4=uv("resizer-bar-dragging"),X1=l=>{const m=K1(),p=g4(m,{});let y=he.none();const A=(it,Et)=>he.from(Di(it,Et));m.events.drag.bind(it=>{A(it.target,"data-row").each(Et=>{const zn=ba(it.target,"top");$a(it.target,"top",zn+it.yDelta+"px")}),A(it.target,"data-column").each(Et=>{const zn=ba(it.target,"left");$a(it.target,"left",zn+it.xDelta+"px")})});const R=(it,Et)=>{const zn=ba(it,Et),ho=Pm(it,"data-initial-"+Et,0);return zn-ho};p.events.stop.bind(()=>{m.get().each(it=>{y.each(Et=>{A(it,"data-row").each(zn=>{const ho=R(it,"top");_s(it,"data-initial-top"),Dn.trigger.adjustHeight(Et,ho,parseInt(zn,10))}),A(it,"data-column").each(zn=>{const ho=R(it,"left");_s(it,"data-initial-left"),Dn.trigger.adjustWidth(Et,ho,parseInt(zn,10))}),Z2(l,Et)})})});const I=(it,Et)=>{Dn.trigger.startAdjust(),m.assign(it),oa(it,"data-initial-"+Et,ba(it,Et)),Vl(it,b4),$a(it,"opacity","0.2"),p.go(l.dragContainer())},W=sd(l.parent(),"mousedown",it=>{p4(it.target)&&I(it.target,"top"),im(it.target)&&I(it.target,"left")}),ne=it=>yo(it,l.view()),ve=it=>Ur(it,"table",ne).filter(Cg),Le=it=>Ul(it,"ephox-snooker-resizer-bar")||Ul(it,"ephox-dragster-blocker"),xt=sd(l.view(),"mouseover",it=>{ve(it.target).fold(()=>{Hn(it.target)&&!Le(it.target)&&U2(l)},Et=>{p.isActive()&&(y=he.some(Et),Z2(l,Et))})}),jt=()=>{W.unbind(),xt.unbind(),p.destroy(),U2(l)},Pt=it=>{Z2(l,it)},Dn=cm({adjustHeight:kc(["table","delta","row"]),adjustWidth:kc(["table","delta","column"]),startAdjust:kc([])});return{destroy:jt,refresh:Pt,on:p.on,off:p.off,hideBars:Qe(Fx,l),showBars:Qe(j2,l),events:Dn.registry}},v4={create:(l,m,p)=>{const y=Zl,A=hi,R=X1(l),I=cm({beforeResize:kc(["table","type"]),afterResize:kc(["table","type"]),startDrag:kc([])});return R.events.adjustHeight.bind(W=>{const ne=W.table;I.trigger.beforeResize(ne,"row");const ve=y.delta(W.delta,ne);m2(ne,ve,W.row),I.trigger.afterResize(ne,"row")}),R.events.startAdjust.bind(W=>{I.trigger.startDrag()}),R.events.adjustWidth.bind(W=>{const ne=W.table;I.trigger.beforeResize(ne,"col");const ve=A.delta(W.delta,ne),Le=p(ne);Pg(ne,ve,W.column,m,Le),I.trigger.afterResize(ne,"col")}),{on:R.on,off:R.off,refreshBars:R.refresh,hideBars:R.hideBars,showBars:R.showBars,destroy:R.destroy,events:I.registry}}},Wf=l=>m=>m.options.get(l),mv="100%",Nx=l=>{var m;const p=l.dom,y=(m=p.getParent(l.selection.getStart(),p.isBlock))!==null&&m!==void 0?m:l.getBody();return Ka(Gt.fromDom(y))+"px"},y4=(l,m)=>o0(l)||!gv(l)?m:Jm(l)?{...m,width:Nx(l)}:{...m,width:mv},Px=(l,m)=>o0(l)||gv(l)?m:Jm(l)?{...m,width:Nx(l)}:{...m,width:mv},uM=l=>{const m=l.options.register;m("table_clone_elements",{processor:"string[]"}),m("table_use_colgroups",{processor:"boolean",default:!0}),m("table_header_type",{processor:p=>{const y=Eo(["section","cells","sectionCells","auto"],p);return y?{value:p,valid:y}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),m("table_sizing_mode",{processor:"string",default:"auto"}),m("table_default_attributes",{processor:"object",default:{border:"1"}}),m("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),m("table_column_resizing",{processor:p=>{const y=Eo(["preservetable","resizetable"],p);return y?{value:p,valid:y}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),m("table_resize_bars",{processor:"boolean",default:!0}),m("table_style_by_css",{processor:"boolean",default:!0}),m("table_merge_content_on_paste",{processor:"boolean",default:!0})},$x=l=>he.from(l.options.get("table_clone_elements")),Ix=l=>{const m=l.options.get("object_resizing");return Eo(m.split(","),"table")},Q1=Wf("table_header_type"),e0=Wf("table_column_resizing"),t0=l=>e0(l)==="preservetable",Jg=l=>e0(l)==="resizetable",fv=Wf("table_sizing_mode"),n0=l=>fv(l)==="relative",Jm=l=>fv(l)==="fixed",o0=l=>fv(l)==="responsive",q2=Wf("table_resize_bars"),gv=Wf("table_style_by_css"),Lx=Wf("table_merge_content_on_paste"),Hx=l=>{const m=l.options,p=m.get("table_default_attributes");return m.isSet("table_default_attributes")?p:Px(l,p)},zx=l=>{const m=l.options,p=m.get("table_default_styles");return m.isSet("table_default_styles")?p:y4(l,p)},C4=Wf("table_use_colgroups"),hv=l=>Gt.fromDom(l.getBody()),hp=l=>m=>yo(m,hv(l)),Qg=l=>{_s(l,"data-mce-style");const m=p=>_s(p,"data-mce-style");Te(Df(l),m),Te(bb(l),m),Te(vb(l),m)},eh=l=>Gt.fromDom(l.selection.getStart()),Vx=l=>l.getBoundingClientRect().width,Ux=l=>l.getBoundingClientRect().height,Wx=l=>(m,p)=>{const y=m.dom.getStyle(p,l)||m.dom.getAttrib(p,l);return he.from(y).filter(jo)},pv=Wx("width"),Zx=Wx("height"),w4=l=>/^(\d+(\.\d+)?)%$/.test(l),jx=l=>/^(\d+(\.\d+)?)px$/.test(l),bv=l=>g1(l,_i("table")).exists(Cg),G2=l=>ui(l,"table"),vv=(l,m,p)=>{const y=A=>R=>p!==void 0&&p(R)||yo(R,A);return yo(l,m)?he.some({boxes:he.some([l]),start:l,finish:m}):G2(l).bind(A=>G2(m).bind(R=>{if(yo(A,R))return he.some({boxes:ao(A,l,m),start:l,finish:m});if(us(A,R)){const I=Bs(m,"td,th",y(A)),W=I.length>0?I[I.length-1]:m;return he.some({boxes:L2(A,l,A,m,R),start:l,finish:W})}else if(us(R,A)){const I=Bs(l,"td,th",y(R)),W=I.length>0?I[I.length-1]:l;return he.some({boxes:L2(R,l,A,m,R),start:l,finish:W})}else return Wc(l,m).shared.bind(I=>Ur(I,"table",p).bind(W=>{const ne=Bs(m,"td,th",y(W)),ve=ne.length>0?ne[ne.length-1]:m,Le=Bs(l,"td,th",y(W)),xt=Le.length>0?Le[Le.length-1]:l;return he.some({boxes:L2(W,l,A,m,R),start:xt,finish:ve})}))}))},K2=(l,m)=>{const p=Au(l,m);return p.length>0?he.some(p):he.none()},S4=(l,m)=>P(l,p=>ct(p,m)),Y2=(l,m,p)=>cd(l,m).bind(y=>cd(l,p).bind(A=>Es(G2,[y,A]).map(R=>({first:y,last:A,table:R})))),qx=(l,m)=>ui(l,"table").bind(p=>cd(p,m).bind(y=>vv(y,l).bind(A=>A.boxes.map(R=>({boxes:R,start:A.start,finish:A.finish}))))),Gx=(l,m,p,y,A)=>S4(l,A).bind(R=>I2(R,m,p).bind(I=>qx(I,y))),s0=(l,m)=>K2(l,m),x4=(l,m,p)=>Y2(l,m,p).bind(y=>{const A=ne=>yo(l,ne),R="thead,tfoot,tbody,table",I=ui(y.first,R,A),W=ui(y.last,R,A);return I.bind(ne=>W.bind(ve=>yo(ne,ve)?Ym(y.table,y.first,y.last):he.none()))}),X2=en,J2=l=>{const m=(y,A)=>ic(y,A).exists(R=>parseInt(R,10)>1),p=y=>m(y,"rowspan")||m(y,"colspan");return l.length>0&&_o(l,p)?he.some(l):he.none()},E4=(l,m,p)=>m.length<=1?he.none():x4(l,p.firstSelectedSelector,p.lastSelectedSelector).map(y=>({bounds:y,cells:m})),th={create:(l,m)=>({selection:l,kill:m})},Kx=(l,m,p,y)=>{switch(l.tag){case"none":return m();case"single":return y(l.element);case"multiple":return p(l.elements)}},Yx=()=>({tag:"none"}),A4=l=>({tag:"multiple",elements:l}),_4=l=>({tag:"single",element:l}),k4=(l,m,p)=>({get:()=>s0(l(),p).fold(()=>m().fold(Yx,_4),A4)}),r0={create:(l,m,p,y)=>({start:Zr.on(l,m),finish:Zr.on(p,y)})},Q2=(l,m)=>{const p=zt(l,m);return id.create(Gt.fromDom(p.startContainer),p.startOffset,Gt.fromDom(p.endContainer),p.endOffset)},a0=r0.create,Xx=(l,m,p,y,A,R,I)=>yo(p,A)&&y===R?he.none():Ur(p,"td,th",m).bind(W=>Ur(A,"td,th",m).bind(ne=>c0(l,m,W,ne,I))),c0=(l,m,p,y,A)=>yo(p,y)?he.none():vv(p,y,m).bind(R=>{const I=R.boxes.getOr([]);return I.length>1?(A(l,I,R.start,R.finish),he.some(th.create(he.some(a0(p,0,p,_u(p))),!0))):he.none()}),D4=(l,m,p,y,A)=>{const R=I=>(A.clearBeforeUpdate(p),A.selectRange(p,I.boxes,I.start,I.finish),I.boxes);return Gx(y,l,m,A.firstSelectedSelector,A.lastSelectedSelector).map(R)},Cv=fn.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),O4=(l,m,p)=>{const y=l.getRect(m),A=l.getRect(p);return A.right>y.left&&A.left<y.right},Jx=l=>Ur(l,"tr"),nh={...Cv,verify:(l,m,p,y,A,R,I)=>Ur(y,"td,th",I).bind(W=>Ur(m,"td,th",I).map(ne=>yo(W,ne)?yo(y,W)&&_u(W)===A?R(ne):Cv.none("in same cell"):Es(Jx,[W,ne]).fold(()=>O4(l,ne,W)?Cv.success():R(ne),ve=>R(ne)))).getOr(Cv.none("default")),cata:(l,m,p,y,A)=>l.fold(m,p,y,A)},wv=_i("br"),Sv=(l,m,p)=>m(l,p).bind(y=>Bm(y)&&Tu(y).trim().length===0?Sv(y,m,p):he.some(y)),Qx=(l,m,p)=>p.traverse(m).orThunk(()=>Sv(m,p.gather,l)).map(p.relative),M4=(l,m)=>ci(l,m).filter(wv).orThunk(()=>ci(l,m-1).filter(wv)),xv=(l,m,p,y)=>M4(m,p).bind(A=>y.traverse(A).fold(()=>Sv(A,y.gather,l).map(y.relative),R=>Gd(R).map(I=>Zr.on(I.parent,I.index)))),eE=(l,m,p,y)=>(wv(m)?Qx(l,m,y):xv(l,m,p,y)).map(R=>({start:R,finish:R})),tE=l=>nh.cata(l,m=>he.none(),()=>he.none(),m=>he.some(If(m,0)),m=>he.some(If(m,_u(m)))),Ev=(l,m)=>({left:l.left,top:l.top+m,right:l.right,bottom:l.bottom+m}),lm=(l,m)=>({left:l.left,top:l.top-m,right:l.right,bottom:l.bottom-m}),nE=(l,m,p)=>({left:l.left+m,top:l.top+p,right:l.right+m,bottom:l.bottom+p}),B4=l=>l.top,F4=l=>l.bottom,N4=(l,m,p)=>p>=0&&p<_u(m)?l.getRangedRect(m,p,m,p+1):p>0?l.getRangedRect(m,p-1,m,p):he.none(),pp=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom}),oE=(l,m)=>he.some(l.getRect(m)),eC=(l,m,p)=>Nr(m)?oE(l,m).map(pp):Bm(m)?N4(l,m,p).map(pp):he.none(),Tv=(l,m)=>Nr(m)?oE(l,m).map(pp):Bm(m)?l.getRangedRect(m,0,m,_u(m)).map(pp):he.none(),Sd=5,i0=100,um=fn.generate([{none:[]},{retry:["caret"]}]),tC=(l,m)=>l.left<m.left||Math.abs(m.right-l.left)<1||l.left>m.right,sE=(l,m,p)=>g1(m,Zb).fold(vn,y=>Tv(l,y).exists(A=>tC(p,A))),rE=(l,m,p,y,A)=>{const R=Ev(A,Sd);return Math.abs(p.bottom-y.bottom)<1||p.top>A.bottom?um.retry(R):p.top===A.bottom?um.retry(Ev(A,1)):sE(l,m,A)?um.retry(nE(R,Sd,0)):um.none()},aE={point:B4,adjuster:(l,m,p,y,A)=>{const R=lm(A,Sd);return Math.abs(p.top-y.top)<1||p.bottom<A.top?um.retry(R):p.bottom===A.top?um.retry(lm(A,1)):sE(l,m,A)?um.retry(nE(R,Sd,0)):um.none()},move:lm,gather:Vb},$4={point:F4,adjuster:rE,move:Ev,gather:nm},I4=(l,m,p)=>l.elementFromPoint(m,p).filter(y=>Ir(y)==="table").isSome(),L4=(l,m,p,y,A)=>bp(l,m,p,m.move(y,Sd),A),bp=(l,m,p,y,A)=>A===0?he.some(y):I4(l,y.left,m.point(y))?L4(l,m,p,y,A-1):l.situsFromPoint(y.left,m.point(y)).bind(R=>R.start.fold(he.none,I=>Tv(l,I).bind(W=>m.adjuster(l,I,W,p,y).fold(he.none,ne=>bp(l,m,p,ne,A-1))).orThunk(()=>he.some(y)),he.none)),l0=(l,m,p)=>l.point(m)>p.getInnerHeight()?he.some(l.point(m)-p.getInnerHeight()):l.point(m)<0?he.some(-l.point(m)):he.none(),cE=(l,m,p)=>{const y=l.move(p,Sd),A=bp(m,l,p,y,i0).getOr(y);return l0(l,A,m).fold(()=>m.situsFromPoint(A.left,l.point(A)),R=>(m.scrollBy(0,R),m.situsFromPoint(A.left,l.point(A)-R)))},dm={tryUp:Qe(cE,aE),tryDown:Qe(cE,$4),getJumpSize:ie(Sd)},mm=20,nC=(l,m,p)=>l.getSelection().bind(y=>eE(m,y.finish,y.foffset,p).fold(()=>he.some(If(y.finish,y.foffset)),A=>{const R=l.fromSitus(A),I=nh.verify(l,y.finish,y.foffset,R.finish,R.foffset,p.failure,m);return tE(I)})),Av=(l,m,p,y,A,R)=>R===0?he.none():Zf(l,m,p,y,A).bind(I=>{const W=l.fromSitus(I),ne=nh.verify(l,p,y,W.finish,W.foffset,A.failure,m);return nh.cata(ne,()=>he.none(),()=>he.some(I),ve=>yo(p,ve)&&y===0?iE(l,p,y,lm,A):Av(l,m,ve,0,A,R-1),ve=>yo(p,ve)&&y===_u(ve)?iE(l,p,y,Ev,A):Av(l,m,ve,_u(ve),A,R-1))}),iE=(l,m,p,y,A)=>eC(l,m,p).bind(R=>_n(l,A,y(R,dm.getJumpSize()))),_n=(l,m,p)=>{const y=$c().browser;return y.isChromium()||y.isSafari()||y.isFirefox()?m.retry(l,p):he.none()},Zf=(l,m,p,y,A)=>eC(l,p,y).bind(R=>_n(l,A,R)),vp=(l,m,p)=>nC(l,m,p).bind(y=>Av(l,m,y.element,y.offset,p,mm).map(l.fromSitus)),oC=(l,m)=>fb(l,p=>re(p).exists(y=>yo(y,m))),_v=(l,m,p,y,A)=>Ur(y,"td,th",m).bind(R=>Ur(R,"table",m).bind(I=>oC(A,I)?vp(l,m,p).bind(W=>Ur(W.finish,"td,th",m).map(ne=>({start:R,finish:ne,range:W}))):he.none())),Qm=(l,m,p,y,A,R)=>R(y,m).orThunk(()=>_v(l,m,p,y,A).map(I=>{const W=I.range;return th.create(he.some(a0(W.start,W.soffset,W.finish,W.foffset)),!0)})),yp=(l,m)=>Ur(l,"tr",m).bind(p=>Ur(p,"table",m).bind(y=>{const A=Au(y,"tr");return yo(p,A[0])?yi(y,R=>Wr(R).isSome(),m).map(R=>{const I=_u(R);return th.create(he.some(a0(R,I,R,I)),!0)}):he.none()})),u0=(l,m)=>Ur(l,"tr",m).bind(p=>Ur(p,"table",m).bind(y=>{const A=Au(y,"tr");return yo(p,A[A.length-1])?nl(y,R=>Af(R).isSome(),m).map(R=>th.create(he.some(a0(R,0,R,0)),!0)):he.none()})),jf=(l,m,p,y,A,R,I)=>_v(l,p,y,A,R).bind(W=>c0(m,p,W.start,W.finish,I)),Cp=(l,m)=>Ur(l,"td,th",m),sC=l=>ai(l).exists(Cg),xd=(l,m,p,y)=>{const A=yr(),R=A.clear,I=Le=>{A.on(xt=>{y.clearBeforeUpdate(m),Cp(Le.target,p).each(jt=>{vv(xt,jt,p).each(Pt=>{const Dn=Pt.boxes.getOr([]);if(Dn.length===1){const it=Dn[0],Et=wg(it)==="false",zn=to(Tf(Le.target),it,yo);Et&&zn&&y.selectRange(m,Dn,it,it)}else Dn.length>1&&(y.selectRange(m,Dn,Pt.start,Pt.finish),l.selectContents(jt))})})})};return{clearstate:R,mousedown:Le=>{y.clear(m),Cp(Le.target,p).filter(sC).each(A.set)},mouseover:Le=>{I(Le)},mouseup:Le=>{I(Le),R()}}},rC={traverse:yf,gather:nm,relative:Zr.before,retry:dm.tryDown,failure:nh.failedDown},kv={traverse:o1,gather:Vb,relative:Zr.before,retry:dm.tryUp,failure:nh.failedUp},Ed=l=>m=>m===l,fm=Ed(38),qf=Ed(40),oh=l=>l>=37&&l<=40,gm={isBackward:Ed(37),isForward:Ed(39)},aC={isBackward:Ed(39),isForward:Ed(37)},d0=l=>({elementFromPoint:(Et,zn)=>Gt.fromPoint(Gt.fromDom(l.document),Et,zn),getRect:Et=>Et.dom.getBoundingClientRect(),getRangedRect:(Et,zn,ho,un)=>{const Fs=_.exact(Et,zn,ho,un);return kf(l,Fs)},getSelection:()=>Nm(l).map(Et=>Q2(l,Et)),fromSitus:Et=>{const zn=_.relative(Et.start,Et.finish);return Q2(l,zn)},situsFromPoint:(Et,zn)=>Wh(l,Et,zn).map(ho=>r0.create(ho.start,ho.soffset,ho.finish,ho.foffset)),clearSelection:()=>{Zh(l)},collapseSelection:(Et=!1)=>{Nm(l).each(zn=>zn.fold(ho=>ho.collapse(Et),(ho,un)=>{const Fs=Et?ho:un;ud(l,Fs,Fs)},(ho,un,Fs,Ns)=>{const Co=Et?ho:Fs,ca=Et?un:Ns;ld(l,Co,ca,Co,ca)}))},setSelection:Et=>{ld(l,Et.start,Et.soffset,Et.finish,Et.foffset)},setRelativeSelection:(Et,zn)=>{ud(l,Et,zn)},selectNode:Et=>{_f(l,Et,!1)},selectContents:Et=>{_f(l,Et)},getInnerHeight:()=>l.innerHeight,getScrollY:()=>Ws(Gt.fromDom(l.document)).top,scrollBy:(Et,zn)=>{li(Et,zn,Gt.fromDom(l.document))}}),Td=(l,m)=>({rows:l,cols:m}),Ad=(l,m,p,y)=>{const A=d0(l),R=xd(A,m,p,y);return{clearstate:R.clearstate,mousedown:R.mousedown,mouseover:R.mouseover,mouseup:R.mouseup}},lE=l=>g1(l,ab).exists(Cg),cC=(l,m)=>lE(l)||lE(m),iC=(l,m,p,y)=>{const A=d0(l),R=()=>(y.clear(m),he.none());return{keydown:(ne,ve,Le,xt,jt,Pt)=>{const Dn=ne.raw,it=Dn.which,Et=Dn.shiftKey===!0;return K2(m,y.selectedSelector).fold(()=>(oh(it)&&!Et&&y.clearBeforeUpdate(m),oh(it)&&Et&&!cC(ve,xt)?he.none:qf(it)&&Et?Qe(jf,A,m,p,rC,xt,ve,y.selectRange):fm(it)&&Et?Qe(jf,A,m,p,kv,xt,ve,y.selectRange):qf(it)?Qe(Qm,A,p,rC,xt,ve,u0):fm(it)?Qe(Qm,A,p,kv,xt,ve,yp):he.none),ho=>{const un=Fs=>()=>at(Fs,Co=>D4(Co.rows,Co.cols,m,ho,y)).fold(()=>Y2(m,y.firstSelectedSelector,y.lastSelectedSelector).map(Co=>{const ca=qf(it)||Pt.isForward(it)?Zr.after:Zr.before;return A.setRelativeSelection(Zr.on(Co.first,0),ca(Co.table)),y.clear(m),th.create(he.none(),!0)}),Co=>he.some(th.create(he.none(),!0)));return oh(it)&&Et&&!cC(ve,xt)?he.none:qf(it)&&Et?un([Td(1,0)]):fm(it)&&Et?un([Td(-1,0)]):Pt.isBackward(it)&&Et?un([Td(0,-1),Td(-1,0)]):Pt.isForward(it)&&Et?un([Td(0,1),Td(1,0)]):oh(it)&&!Et?R:he.none})()},keyup:(ne,ve,Le,xt,jt)=>K2(m,y.selectedSelector).fold(()=>{const Pt=ne.raw,Dn=Pt.which;return Pt.shiftKey===!0&&oh(Dn)&&cC(ve,xt)?Xx(m,p,ve,Le,xt,jt,y.selectRange):he.none()},he.none)}},lC=(l,m,p,y)=>{const A=d0(l);return(R,I)=>{y.clearBeforeUpdate(m),vv(R,I,p).each(W=>{const ne=W.boxes.getOr([]);y.selectRange(m,ne,W.start,W.finish),A.selectContents(I),A.collapseSelection()})}},H4={byClass:l=>{const m=b1(l.selected),p=mb([l.selected,l.lastSelected,l.firstSelected]),y=R=>{const I=Au(R,l.selectedSelector);Te(I,p)};return{clearBeforeUpdate:y,clear:y,selectRange:(R,I,W,ne)=>{y(R),Te(I,m),Vl(W,l.firstSelected),Vl(ne,l.lastSelected)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}},byAttr:(l,m,p)=>{const y=ne=>{_s(ne,l.selected),_s(ne,l.firstSelected),_s(ne,l.lastSelected)},A=ne=>{oa(ne,l.selected,"1")},R=ne=>{I(ne),p()},I=ne=>{const ve=Au(ne,`${l.selectedSelector},${l.firstSelectedSelector},${l.lastSelectedSelector}`);Te(ve,y)};return{clearBeforeUpdate:I,clear:R,selectRange:(ne,ve,Le,xt)=>{R(ne),Te(ve,A),oa(Le,l.firstSelected,"1"),oa(xt,l.lastSelected,"1"),m(ve,Le,xt)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}}},Gc="data-mce-selected",sh="td["+Gc+"],th["+Gc+"]",uC="["+Gc+"]",Gf="data-mce-first-selected",Kc="td["+Gf+"],th["+Gf+"]",Ci="data-mce-last-selected",Yc="td["+Ci+"],th["+Ci+"]",Vu=uC,ef={selected:Gc,selectedSelector:sh,firstSelected:Gf,firstSelectedSelector:Kc,lastSelected:Ci,lastSelectedSelector:Yc},Pi=(l,m,p)=>({element:p,mergable:E4(m,l,ef),unmergable:J2(l),selection:X2(l)}),hm=(l,m,p)=>({element:l,clipboard:m,generators:p}),dE=(l,m,p,y)=>({selection:X2(l),clipboard:p,generators:y}),fM=l=>Ji(l).bind(m=>s0(m,ef.firstSelectedSelector)).fold(ie(l),m=>m[0]),mE=l=>(m,p)=>{const y=Ir(m),A=y==="col"||y==="colgroup"?fM(m):m;return Ur(A,l,p)},co=mE("th,td,caption"),Dv=mE("th,td"),Xl=l=>Aa(l.model.table.getSelectedCells()),fE=l=>Xe(Xl(l),m=>ct(m,ef.selectedSelector)),z4=l=>Ji(l[0]).map(m=>{const p=Mb(m,Vu);return Qg(p),[p]}),V4=(l,m)=>pn(m,p=>l.selection.serializer.serialize(p.dom,{})).join(""),U4=(l,m)=>{const p=l.getDoc(),y=a1(Gt.fromDom(l.getBody())),A=Gt.fromTag("div",p);oa(A,"data-mce-bogus","all"),tr(A,{position:"fixed",left:"-9999999px",top:"0",overflow:"hidden",opacity:"0"});const R=Su(y);gl(A,m),xs(R,A);const I=A.dom.innerText;return Na(A),I},gE=(l,m)=>{l.on("BeforeGetContent",p=>{const y=A=>{p.preventDefault(),z4(A).each(R=>{const I=p.format==="text"?U4(l,R):V4(l,R);p.content=I})};if(p.selection===!0){const A=fE(l);A.length>=1&&y(A)}}),l.on("BeforeSetContent",p=>{if(p.selection===!0&&p.paste===!0){const y=Xl(l);me(y).each(A=>{Ji(A).each(R=>{const I=Xe($h(p.content),ne=>Ir(ne)!=="meta"),W=_i("table");if(Lx(l)&&I.length===1&&W(I[0])){p.preventDefault();const ne=Gt.fromDom(l.getDoc()),ve=S2(ne),Le=hm(A,I[0],ve);m.pasteCells(R,Le).each(()=>{l.focus()})}})})}})},dC=(l,m)=>l.dispatch("NewRow",{node:m}),m0=(l,m)=>l.dispatch("NewCell",{node:m}),Jl=(l,m,p)=>{l.dispatch("TableModified",{...p,table:m})},rh=(l,m,p,y,A)=>{l.dispatch("TableSelectionChange",{cells:m,start:p,finish:y,otherCells:A})},W4=l=>{l.dispatch("TableSelectionClear")},Ov=(l,m,p,y,A)=>{l.dispatch("ObjectResizeStart",{target:m,width:p,height:y,origin:A})},Z4=(l,m,p,y,A)=>{l.dispatch("ObjectResized",{target:m,width:p,height:y,origin:A})},Rv={structure:!1,style:!0},ec={structure:!0,style:!1},j4={structure:!0,style:!0},rl=(l,m)=>n0(l)?Ff.percentageSize(m):Jm(l)?Ff.pixelSize(m):Ff.getTableSize(m),gM=(l,m,p)=>{const y=wa=>Ir(hv(wa))==="table",A=wa=>!y(l)||Vf(wa).rows>1,R=wa=>!y(l)||Vf(wa).columns>1,I=$x(l),W=Jg(l)?ze:Rb,ne=wa=>{switch(Q1(l)){case"section":return Xd.section();case"sectionCells":return Xd.sectionCells();case"cells":return Xd.cells();default:return Xd.getTableSectionType(wa,"section")}},ve=(wa,xp)=>xp.cursor.fold(()=>{const p0=Df(wa);return me(p0).filter(Hn).map(of=>{p.clearSelectedCells(wa.dom);const ei=l.dom.createRng();return ei.selectNode(of.dom),l.selection.setRng(ei),oa(of,"data-mce-selected","1"),ei})},p0=>{const of=zb(p0),ei=l.dom.createRng();return ei.setStart(of.element.dom,of.offset),ei.setEnd(of.element.dom,of.offset),l.selection.setRng(ei),p.clearSelectedCells(wa.dom),he.some(ei)}),Le=(wa,xp,p0,of)=>(ei,X4,wE=!1)=>{Qg(ei);const xn=Gt.fromDom(l.getDoc()),eu=P1(p0,xn,I),J4={sizing:rl(l,ei),resize:Jg(l)?Gh():xS(),section:ne(ei)};return xp(ei)?wa(ei,X4,eu,J4).bind(Iv=>{m.refresh(ei.dom),Te(Iv.newRows,bm=>{dC(l,bm.dom)}),Te(Iv.newCells,bm=>{m0(l,bm.dom)});const SE=ve(ei,Iv);return Hn(ei)&&(Qg(ei),wE||Jl(l,ei.dom,of)),SE.map(bm=>({rng:bm,effect:of}))}):he.none()},xt=Le(Cx,A,ze,ec),jt=Le(Cd,R,ze,ec),Pt=Le(Gg,Fe,ze,ec),Dn=Le(F2,Fe,ze,ec),it=Le(Kg,Fe,W,ec),Et=Le(or,Fe,W,ec),zn=Le(c4,Fe,ze,ec),ho=Le(i4,Fe,ze,ec),un=Le(Ft,Fe,ze,ec),Fs=Le(wx,Fe,ze,ec),Ns=Le(Qa,Fe,ze,ec),Co=Le(Sx,Fe,ze,ec),ca=Le(P2,Fe,ze,j4),kl=Le(r4,Fe,ze,ec),pm=Le(a4,Fe,ze,ec),Yf=Le(Km,Fe,ze,ec),ch=Le(zu,Fe,ze,ec),Vs=Le(o4,Fe,ze,ec),Xc=Le(s4,Fe,ze,ec),Jc=Le(N2,Fe,ze,ec);return{deleteRow:xt,deleteColumn:jt,insertRowsBefore:Pt,insertRowsAfter:Dn,insertColumnsBefore:it,insertColumnsAfter:Et,mergeCells:zn,unmergeCells:ho,pasteColsBefore:un,pasteColsAfter:Fs,pasteRowsBefore:Ns,pasteRowsAfter:Co,pasteCells:ca,makeCellsHeader:kl,unmakeCellsHeader:pm,makeColumnsHeader:Yf,unmakeColumnsHeader:ch,makeRowsHeader:Vs,makeRowsBody:Xc,makeRowsFooter:Jc,getTableRowType:l4,getTableCellType:Ex,getTableColType:xx}},Mv=(l,m)=>{l.selection.select(m.dom,!0),l.selection.collapse(!0)},ah=(l,m)=>{cd(m,"td,th").each(Qe(Mv,l))},mC=(l,m)=>{Te(Au(m,"tr"),p=>{dC(l,p.dom),Te(Au(p,"th,td"),y=>{m0(l,y.dom)})})},fC=l=>Se(l)&&l.indexOf("%")!==-1,gC=(l,m,p,y,A)=>{const R=zx(l),I={styles:R,attributes:Hx(l),colGroups:C4(l)};return l.undoManager.ignore(()=>{const W=Xm(p,m,A,y,Q1(l),I);oa(W,"data-mce-id","__mce");const ne=lb(W);l.insertContent(ne),l.addVisual()}),cd(hv(l),'table[data-mce-id="__mce"]').map(W=>(Jm(l)?v2(W):o0(l)?ip(W):(n0(l)||fC(R.width))&&Hf(W),Qg(W),_s(W,"data-mce-id"),mC(l,W),ah(l,W),W.dom)).getOrNull()},q4=(l,m,p,y={})=>{const A=R=>Wn(R)&&R>0;if(A(m)&&A(p)){const R=y.headerRows||0,I=y.headerColumns||0;return gC(l,p,m,I,R)}else return console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table."),null};var Bv=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const hE="x-tinymce/dom-table-",Fv=hE+"rows",Kf=hE+"columns",wp=l=>{const m=Bv.FakeClipboardItem(l);Bv.write([m])},hC=l=>{var m;const p=(m=Bv.read())!==null&&m!==void 0?m:[];return at(p,y=>he.from(y.getType(l)))},pE=l=>{hC(l).isSome()&&Bv.clear()},tf=l=>{l.fold(pC,m=>wp({[Fv]:m}))},Nv=()=>hC(Fv),pC=()=>pE(Fv),Pv=l=>{l.fold(bC,m=>wp({[Kf]:m}))},f0=()=>hC(Kf),bC=()=>pE(Kf),g0=l=>co(eh(l),hp(l)).filter(bv),vC=l=>Dv(eh(l),hp(l)).filter(bv),G4=(l,m)=>{const p=hp(l),y=()=>g0(l).each(Et=>{Ji(Et,p).filter(K(p)).each(zn=>{const ho=Gt.fromText("");if(Ll(zn,ho),Na(zn),l.dom.isEmpty(l.getBody()))l.setContent(""),l.selection.setCursorLocation();else{const un=l.dom.createRng();un.setStart(ho.dom,0),un.setEnd(ho.dom,0),l.selection.setRng(un),l.nodeChanged()}})}),A=Et=>g0(l).each(zn=>{o0(l)||Jm(l)||n0(l)||Ji(zn,p).each(un=>{Et==="relative"&&!JS(un)?Hf(un):Et==="fixed"&&!Iu(un)?v2(un):Et==="responsive"&&!_c(un)&&ip(un),Qg(un),Jl(l,un.dom,ec)})}),R=Et=>Ji(Et,p),I=Et=>vC(l).bind(zn=>R(zn).map(ho=>Et(ho,zn))),W=(Et,zn)=>{I(ho=>{l.formatter.toggle("tableclass",{value:zn},ho.dom),Jl(l,ho.dom,Rv)})},ne=(Et,zn)=>{I(ho=>{const un=Xl(l),Ns=_o(un,Co=>l.formatter.match("tablecellclass",{value:zn},Co.dom))?l.formatter.remove:l.formatter.apply;Te(un,Co=>Ns("tablecellclass",{value:zn},Co.dom)),Jl(l,ho.dom,Rv)})},ve=()=>{g0(l).each(Et=>{Ji(Et,p).each(zn=>{Pr(zn,"caption").fold(()=>{const ho=Gt.fromTag("caption");xs(ho,Gt.fromText("Caption")),Ly(zn,ho,0),l.selection.setCursorLocation(ho.dom,0)},ho=>{_i("caption")(Et)&&Bo("td",zn).each(un=>l.selection.setCursorLocation(un.dom,0)),Na(ho)}),Jl(l,zn.dom,ec)})})},Le=Et=>{l.focus()},xt=(Et,zn=!1)=>I((ho,un)=>{const Fs=Pi(Xl(l),ho,un);Et(ho,Fs,zn).each(Le)}),jt=()=>I((Et,zn)=>{const ho=Pi(Xl(l),Et,zn),un=P1(ze,Gt.fromDom(l.getDoc()),he.none());return Wm(Et,ho,un)}),Pt=()=>I((Et,zn)=>{const ho=Pi(Xl(l),Et,zn);return fd(Et,ho)}),Dn=(Et,zn)=>zn().each(ho=>{const un=pn(ho,Fs=>Ta(Fs));I((Fs,Ns)=>{const Co=S2(Gt.fromDom(l.getDoc())),ca=dE(Xl(l),Ns,un,Co);Et(Fs,ca).each(Le)})}),it=Et=>(zn,ho)=>zs(ho,"type").each(un=>{xt(Et(un),ho.no_events)});qe({mceTableSplitCells:()=>xt(m.unmergeCells),mceTableMergeCells:()=>xt(m.mergeCells),mceTableInsertRowBefore:()=>xt(m.insertRowsBefore),mceTableInsertRowAfter:()=>xt(m.insertRowsAfter),mceTableInsertColBefore:()=>xt(m.insertColumnsBefore),mceTableInsertColAfter:()=>xt(m.insertColumnsAfter),mceTableDeleteCol:()=>xt(m.deleteColumn),mceTableDeleteRow:()=>xt(m.deleteRow),mceTableCutCol:()=>Pt().each(Et=>{Pv(Et),xt(m.deleteColumn)}),mceTableCutRow:()=>jt().each(Et=>{tf(Et),xt(m.deleteRow)}),mceTableCopyCol:()=>Pt().each(Et=>Pv(Et)),mceTableCopyRow:()=>jt().each(Et=>tf(Et)),mceTablePasteColBefore:()=>Dn(m.pasteColsBefore,f0),mceTablePasteColAfter:()=>Dn(m.pasteColsAfter,f0),mceTablePasteRowBefore:()=>Dn(m.pasteRowsBefore,Nv),mceTablePasteRowAfter:()=>Dn(m.pasteRowsAfter,Nv),mceTableDelete:y,mceTableCellToggleClass:ne,mceTableToggleClass:W,mceTableToggleCaption:ve,mceTableSizingMode:(Et,zn)=>A(zn),mceTableCellType:it(Et=>Et==="th"?m.makeCellsHeader:m.unmakeCellsHeader),mceTableColType:it(Et=>Et==="th"?m.makeColumnsHeader:m.unmakeColumnsHeader),mceTableRowType:it(Et=>{switch(Et){case"header":return m.makeRowsHeader;case"footer":return m.makeRowsFooter;default:return m.makeRowsBody}})},(Et,zn)=>l.addCommand(zn,Et)),l.addCommand("mceInsertTable",(Et,zn)=>{q4(l,zn.rows,zn.columns,zn.options)}),l.addCommand("mceTableApplyCellStyle",(Et,zn)=>{const ho=Ns=>"tablecell"+Ns.toLowerCase().replace("-","");if(!pe(zn))return;const un=Xe(Xl(l),bv);if(un.length===0)return;const Fs=es(zn,(Ns,Co)=>l.formatter.has(ho(Co))&&Se(Ns));Nt(Fs)||(qe(Fs,(Ns,Co)=>{const ca=ho(Co);Te(un,kl=>{Ns===""?l.formatter.remove(ca,{value:null},kl.dom,!0):l.formatter.apply(ca,{value:Ns},kl.dom)})}),R(un[0]).each(Ns=>Jl(l,Ns.dom,Rv)))})},K4=(l,m)=>{const p=hp(l),y=A=>Dv(eh(l)).bind(R=>Ji(R,p).map(I=>{const W=Pi(Xl(l),I,R);return A(I,W)})).getOr("");qe({mceTableRowType:()=>y(m.getTableRowType),mceTableCellType:()=>y(m.getTableCellType),mceTableColType:()=>y(m.getTableColType)},(A,R)=>l.addQueryValueHandler(R,A))},yC=l=>!Ul(Gt.fromDom(l.target),"ephox-snooker-resizer-bar"),h0=(l,m)=>{const p=k4(()=>Gt.fromDom(l.getBody()),()=>Dv(eh(l),hp(l)),ef.selectedSelector),y=(ne,ve,Le)=>{Ji(ve).each(jt=>{const Pt=pn(ne,ho=>ho.dom),Dn=$x(l),it=P1(ze,Gt.fromDom(l.getDoc()),Dn),Et=Xl(l),zn=Pf(jt,{selection:Et},it).map(ho=>st(ho,un=>pn(un,Fs=>Fs.dom))).getOrUndefined();rh(l,Pt,ve.dom,Le.dom,zn)})},A=()=>W4(l),R=H4.byAttr(ef,y,A);return l.on("init",ne=>{const ve=l.getWin(),Le=hv(l),xt=hp(l),jt=()=>{const Vs=l.selection,Xc=Gt.fromDom(Vs.getStart()),Jc=Gt.fromDom(Vs.getEnd());Es(Ji,[Xc,Jc]).fold(()=>R.clear(Le),ze)},Pt=Ad(ve,Le,xt,R),Dn=iC(ve,Le,xt,R),it=lC(ve,Le,xt,R),Et=Vs=>Vs.raw.shiftKey===!0;l.on("TableSelectorChange",Vs=>it(Vs.start,Vs.finish));const zn=(Vs,Xc)=>{Et(Vs)&&(Xc.kill&&Vs.kill(),Xc.selection.each(Jc=>{const Ql=_.relative(Jc.start,Jc.finish),Qc=zt(ve,Ql);l.selection.setRng(Qc)}))},ho=Vs=>{const Xc=Xr(Vs);if(Xc.raw.shiftKey&&oh(Xc.raw.which)){const Jc=l.selection.getRng(),Ql=Gt.fromDom(Jc.startContainer),Qc=Gt.fromDom(Jc.endContainer);Dn.keyup(Xc,Ql,Jc.startOffset,Qc,Jc.endOffset).each(nf=>{zn(Xc,nf)})}},un=Vs=>{const Xc=Xr(Vs);m.hide();const Jc=l.selection.getRng(),Ql=Gt.fromDom(Jc.startContainer),Qc=Gt.fromDom(Jc.endContainer),nf=Wd(gm,aC)(Gt.fromDom(l.selection.getStart()));Dn.keydown(Xc,Ql,Jc.startOffset,Qc,Jc.endOffset,nf).each(wa=>{zn(Xc,wa)}),m.show()},Fs=Vs=>Vs.button===0,Ns=Vs=>Vs.buttons===void 0?!0:(Vs.buttons&1)!==0,Co=Vs=>{Pt.clearstate()},ca=Vs=>{Fs(Vs)&&yC(Vs)&&Pt.mousedown(Xr(Vs))},kl=Vs=>{Ns(Vs)&&yC(Vs)&&Pt.mouseover(Xr(Vs))},pm=Vs=>{Fs(Vs)&&yC(Vs)&&Pt.mouseup(Xr(Vs))},ch=(()=>{const Vs=uo(Gt.fromDom(Le)),Xc=uo(0);return{touchEnd:Ql=>{const Qc=Gt.fromDom(Ql.target);if(_i("td")(Qc)||_i("th")(Qc)){const nf=Vs.get(),wa=Xc.get();yo(nf,Qc)&&Ql.timeStamp-wa<300&&(Ql.preventDefault(),it(Qc,Qc))}Vs.set(Qc),Xc.set(Ql.timeStamp)}}})();l.on("dragstart",Co),l.on("mousedown",ca),l.on("mouseover",kl),l.on("mouseup",pm),l.on("touchend",ch.touchEnd),l.on("keyup",ho),l.on("keydown",un),l.on("NodeChange",jt)}),l.on("PreInit",()=>{l.serializer.addTempAttr(ef.firstSelected),l.serializer.addTempAttr(ef.lastSelected)}),{getSelectedCells:()=>Kx(p.get(),ie([]),ne=>pn(ne,ve=>ve.dom),ne=>[ne.dom]),clearSelectedCells:ne=>R.clear(Gt.fromDom(ne))}},CC=(l,m)=>{const p=Gt.fromDom(l.getBody());return G_.body(p,m)},bE=l=>tn(l)&&l.nodeName==="TABLE",$v="bar-",Y4=l=>Di(l,"data-mce-resize")!=="false",vE=l=>{const m=Io.fromTable(l);Io.hasColumns(m)||Te(Df(l),p=>{const y=Ud(p,"width");$a(p,"width",y),_s(p,"width")})},wC=l=>dt(l,"corner-"),Sp=l=>Ce(l,"corner-"),SC=l=>{const m=yr(),p=yr(),y=yr();let A,R,I,W;const ne=un=>rl(l,un),ve=()=>t0(l)?xS():Gh(),Le=un=>Vf(un).columns,xt=un=>Vf(un).rows,jt=(un,Fs,Ns,Co)=>{const ca=Sp(Fs),kl=Rn(ca,"e"),pm=dt(ca,"n");if(R===""&&Hf(un),W===""&&Al(un),Ns!==A&&R!==""){$a(un,"width",R);const Yf=ve(),ch=ne(un),Vs=t0(l)||kl?Le(un)-1:0;Pg(un,Ns-A,Vs,Yf,ch)}else if(w4(R)){const Yf=parseFloat(R.replace("%","")),ch=Ns*Yf/A;$a(un,"width",ch+"%")}if(jx(R)&&vE(un),Co!==I&&W!==""){$a(un,"height",W);const Yf=pm?0:xt(un)-1;m2(un,Co-I,Yf)}},Pt=()=>{p.on(un=>{un.destroy()})};l.on("init",()=>{const un=CC(l,Y4);if(y.set(un),Ix(l)&&q2(l)){const Fs=ve(),Ns=v4.create(un,Fs,ne);l.mode.isReadOnly()||Ns.on(),Ns.events.startDrag.bind(Co=>{m.set(l.selection.getRng())}),Ns.events.beforeResize.bind(Co=>{const ca=Co.table.dom;Ov(l,ca,Vx(ca),Ux(ca),$v+Co.type)}),Ns.events.afterResize.bind(Co=>{const ca=Co.table,kl=ca.dom;Qg(ca),m.on(pm=>{l.selection.setRng(pm),l.focus()}),Z4(l,kl,Vx(kl),Ux(kl),$v+Co.type),l.undoManager.add()}),p.set(Ns)}}),l.on("ObjectResizeStart",un=>{const Fs=un.target;if(bE(Fs)&&!l.mode.isReadOnly()){const Ns=Gt.fromDom(Fs);Te(l.dom.select(".mce-clonedresizable"),Co=>{l.dom.addClass(Co,"mce-"+e0(l)+"-columns")}),!Iu(Ns)&&Jm(l)?v2(Ns):!JS(Ns)&&n0(l)&&Hf(Ns),_c(Ns)&&dt(un.origin,$v)&&Hf(Ns),A=un.width,R=o0(l)?"":pv(l,Fs).getOr(""),I=un.height,W=Zx(l,Fs).getOr("")}}),l.on("ObjectResized",un=>{const Fs=un.target;if(bE(Fs)){const Ns=Gt.fromDom(Fs),Co=un.origin;wC(Co)&&jt(Ns,Co,un.width,un.height),Qg(Ns),Jl(l,Ns.dom,Rv)}});const Dn=()=>{p.on(un=>{un.on(),un.showBars()})},it=()=>{p.on(un=>{un.off(),un.hideBars()})};return l.on("DisabledStateChange",un=>{un.state?it():Dn()}),l.on("SwitchMode",()=>{l.mode.isReadOnly()?it():Dn()}),l.on("dragstart dragend",un=>{un.type==="dragstart"?it():Dn()}),l.on("remove",()=>{Pt()}),{refresh:un=>{p.on(Fs=>Fs.refreshBars(Gt.fromDom(un)))},hide:()=>{p.on(un=>un.hideBars())},show:()=>{p.on(un=>un.showBars())}}},pr=l=>{uM(l);const m=SC(l),p=h0(l,m),y=gM(l,m,p);return G4(l,y),K4(l,y),gE(l,y),{getSelectedCells:p.getSelectedCells,clearSelectedCells:p.clearSelectedCells}},yE=l=>({table:pr(l)});var CE=()=>{w.add("dom",yE)};CE()})()),wee}var xee;function Nse(){return xee||(xee=1,Fse()),Cee}Nse();window.initTinyMCE=function(){document.querySelector("#content")&&Koe.init({selector:"#content",license_key:"gpl",height:500,menubar:!1,plugins:["advlist","autolink","lists","link","image","charmap","preview","anchor","searchreplace","visualblocks","code","fullscreen","insertdatetime","media","table","help","wordcount"],toolbar:"undo redo | blocks | bold italic forecolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }",promotion:!1,branding:!1,skin_url:"/tinymce/skins/ui/oxide",content_css:"/tinymce/skins/content/default/content.css"})};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",window.initTinyMCE):window.initTinyMCE();window.Alpine=Nte;Nte.start();
